"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5312],{45312:function(e,n,s){s.r(n),s.d(n,{default:function(){return M}});var r=s(93433),t=s(74165),a=s(15861),l=s(4942),c=s(1413),i=s(29439),o=s(72791),u=s(36167),d=s(74569),m=s.n(d),h=s(34831),f=s(59513),p=s.n(f),v=(s(68639),s(72426)),x=s.n(v),j=s(56355),g=s(78983),b=s(63521),N=s(32125),Z=s(11683),C=s(83854),S=(s(79122),s(80184));var y=function(e){var n=(0,o.useRef)(null),s=e.tableData,u=e.searchdata,d=e.month,f=e.selectType,p=e.loggedUserId,v=e.projects,g=e.customer,b=e.selectedCust,N=e.column,y=e.laterMeasureLabel,R=(0,o.useState)((0,r.Z)(N)),T=(0,i.Z)(R,2),E=(T[0],T[1]),w=(0,o.useState)([]),M=(0,i.Z)(w,2),U=M[0],k=M[1],D=(0,o.useState)([]),P=(0,i.Z)(D,2),A=P[0],L=P[1],V=h.N.baseUrl,_=(0,o.useState)(!1),I=(0,i.Z)(_,2),B=I[0],F=I[1],H=(0,o.useState)([]),q=(0,i.Z)(H,2),G=q[0],O=q[1],K=(0,o.useState)([]),Y=(0,i.Z)(K,2),z=Y[0],$=Y[1];(0,o.useEffect)((function(){E(N)}),[N]),(0,o.useEffect)((function(){if("BusinessUnit"==f){var e=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:V+"/CostMS/cost/getDepartments"});case 2:n=e.sent,(s=(s=n.data).filter((function(e){return e.value>=0}))).push({value:999,label:"Non Revenue Units"}),L(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}if("DP"==f){m().get(V+"/administrationms/subkconversiontrend/getdeliverypartner").then((function(e){var n=[],s=e.data;s.push({id:0,PersonName:"<<Others>>"}),s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};n.push(s)})),$(n)}))}if("CSL"==f){!function(){var e=p;m()({method:"get",url:V+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(e)}).then((function(e){var n=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};n.push(s)})),O(n)}))}()}}),[]);var J=x()(d).startOf("month").format("yyyy-MM-DD"),W=function(e,s){n.current=new AbortController,m()({method:"post",url:V+"/revenuemetricsms/headCountAndTrend/getHeadCountAndTrendDataByCadre",signal:n.current.signal,data:{month:J,duration:u.duration,resTyp:u.resTyp,countries:"6,5,3,8,0,7,1,2"==u.countries?"6,5,3,8,7,1,2":u.countries,measures:u.measures,searchType:u.searchType,busUnits:"BusinessUnit"!=f?-1:u.busUnits,customers:"Customer"!=f?-1:"1"==u.Customer?b:u.Customer,prjId:"Project"!=f?-1:u.prjId,sortBy:u.sortBy,cadres:"E1,E2,E3,L,M,G,T1,UA"==u.cadres?-1:u.cadres,cslRes:"CSL"!=f?-1:u.cslRes,dpRes:"DP"!=f?-1:u.dpRes,objId:e,overheadChecked:!1}}).then((function(n){F(!1);var t=n.data.data;t=t.map((function(n){return(0,c.Z)((0,c.Z)({},n),{},{name:n.name+"_"+e})})),k((function(n){var a=n.findIndex((function(e){return"Head Count"==y||"New Hires"==y||"Exits"==y?(e.kpi.includes("SUBK")||e.kpi.includes(y))&&e.name===s:e.kpi===y&&e.name===s}));return console.log(a),-1!==a?[].concat((0,r.Z)(n.slice(0,a+1)),(0,r.Z)(t.map((function(n,s){return(0,c.Z)((0,c.Z)({},n),{},{id:e+s+1})}))),(0,r.Z)(n.slice(a+1))):n}))})).catch((function(e){F(!1),console.log("Error: ",e)}))};(0,o.useEffect)((function(){for(var e=1,n=0;n<s.length;n++)s[n].id=e,++e%100==16&&(e+=985);k(Q(s))}),[s]);var Q=function(e,n){n=(0,c.Z)({id:"id",parentId:"parentId",children:"subRows"},n);var s={},t=[],a=n.children;return e.forEach((function(e){var r=e[n.id],t=e[n.parentId];s[r]=(0,c.Z)((0,c.Z)((0,l.Z)({},a,[]),e),s[r]),s[t]=s[t]||(0,l.Z)({},a,[]),s[t][a].push(s[r])})),Object.values(s).forEach((function(e){"undefined"===typeof e[n.id]&&t.push.apply(t,(0,r.Z)(e[a]))})),t},X=[{header:(0,S.jsx)("div",{className:"legendContainer ",children:"BusinessUnit"===f?(0,S.jsxs)("div",{className:"legend lightbrown",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:(0,S.jsx)("b",{children:"Business Unit"})})]}):"DP"===f?(0,S.jsxs)("div",{className:"legend brown",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:(0,S.jsx)("b",{children:"DP"})})]}):"CSL"===f?(0,S.jsxs)("div",{className:"legend brown",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:(0,S.jsx)("b",{children:"CSL"})})]}):"Customer"===f?(0,S.jsxs)("div",{className:"legend darkgreen",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:(0,S.jsx)("b",{children:"Customer"})})]}):"Project"===f?(0,S.jsxs)("div",{className:"legend purple",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:(0,S.jsx)("b",{children:"Project"})})]}):""}),accessorKey:"name",enableGrouping:!1,GroupedCell:function(e){var n=e.cell;e.table;if("BusinessUnit"==f){var s=A.find((function(e){return e.label===n.getValue()})),r=(0,o.useState)({}),t=(0,i.Z)(r,2),a=t[0],u=t[1];if(s){var d=s.value,m=(s.label,a[d]);return(0,S.jsxs)("span",{style:{cursor:"pointer"},value:s.value,onClick:function(){!function(){if(s){var e=s.value,n=s.label;U.some((function(n){return n.name.includes("_".concat(e))}))?(u((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!1))})),k((function(n){return n.filter((function(n){return!n.name.includes("_".concat(e))}))}))):(u((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!0))})),setTimeout((function(){F(!1)}),2e3),W(e,n))}}()},className:"parent",children:[m?(0,S.jsx)(j.NR5,{}):(0,S.jsx)(j.jS6,{})," ",(0,S.jsx)("b",{className:"buRM",title:s.label,children:s.label})]})}return["T1","E1","E2","E3","M","L","G","Unassigned"].some((function(e){return n.getValue().includes(e)}))?(0,S.jsx)("span",{className:"child",style:{display:"flex",justifyContent:"center"},children:(0,S.jsx)("b",{className:"resRM",title:n.getValue(),children:n.getValue().split("_")[0]})}):(0,S.jsxs)("span",{children:[(0,S.jsx)("b",{children:"Summary"})," "]})}if("Customer"==f){var h=g.find((function(e){return e.fullName===n.getValue()})),p=(0,o.useState)({}),x=(0,i.Z)(p,2),b=x[0],N=x[1];if(h){var Z=b[h.id];return(0,S.jsxs)("span",{style:{cursor:"pointer"},value:h.id,onClick:function(){!function(){if(h){var e=h.id,n=h.fullName;U.some((function(n){return n.name.includes("_".concat(e))}))?(N((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!1))})),k((function(n){return n.filter((function(n){return!n.name.includes("_".concat(e))}))}))):(N((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!0))})),setTimeout((function(){F(!1)}),2e3),W(e,n))}}()},className:"parent",children:[Z?(0,S.jsx)(j.NR5,{}):(0,S.jsx)(j.jS6,{})," ",(0,S.jsx)("b",{className:"custRM",title:h.fullName,children:h.fullName})]})}return["T1","E1","E2","E3","M","L","G","Unassigned"].some((function(e){return n.getValue().includes(e)}))?(0,S.jsx)("span",{className:"child",style:{display:"flex",justifyContent:"center"},children:(0,S.jsx)("b",{className:"resRM",title:n.getValue(),children:n.getValue().split("_")[0]})}):(0,S.jsxs)("span",{children:[(0,S.jsx)("b",{children:"Summary"})," "]})}if("Project"==f){var C=v.find((function(e){return e.name===n.getValue()})),y=(0,o.useState)({}),R=(0,i.Z)(y,2),T=R[0],E=R[1];if(C){var w=C.id,M=(C.name,T[w]);return(0,S.jsxs)("span",{style:{cursor:"pointer"},value:C.id,onClick:function(){!function(){if(C){var e=C.id,n=C.name;U.some((function(n){return n.name.includes("_".concat(e))}))?(E((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!1))})),k((function(n){return n.filter((function(n){return!n.name.includes("_".concat(e))}))}))):(E((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!0))})),setTimeout((function(){F(!1)}),2e3),W(e,n))}}()},className:"parent",children:[M?(0,S.jsx)(j.NR5,{}):(0,S.jsx)(j.jS6,{})," ",(0,S.jsx)("b",{className:"projRM",title:C.name,children:C.name})]})}return["T1","E1","E2","E3","M","L","G","Unassigned"].some((function(e){return n.getValue().includes(e)}))?(0,S.jsx)("span",{className:"child",style:{display:"flex",justifyContent:"center"},children:(0,S.jsx)("b",{className:"resRM",title:n.getValue(),children:n.getValue().split("_")[0]})}):(0,S.jsxs)("span",{children:[(0,S.jsx)("b",{children:"Summary"})," "]})}if("CSL"==f){var D=G.find((function(e){return e.label===n.getValue()})),P=(0,o.useState)({}),L=(0,i.Z)(P,2),V=L[0],_=L[1];if(D){var I=V[D.value];return(0,S.jsxs)("span",{style:{cursor:"pointer"},value:D.value,onClick:function(){!function(){if(D){var e=D.value,n=D.label;U.some((function(n){return n.name.includes("_".concat(e))}))?(_((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!1))})),k((function(n){return n.filter((function(n){return!n.name.includes("_".concat(e))}))}))):(_((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!0))})),setTimeout((function(){F(!1)}),2e3),W(e,n))}}()},className:"parent",children:[I?(0,S.jsx)(j.NR5,{}):(0,S.jsx)(j.jS6,{})," ",(0,S.jsx)("b",{className:"resRM",title:D.label,children:D.label})]})}return["T1","E1","E2","E3","M","L","G","Unassigned"].some((function(e){return n.getValue().includes(e)}))?(0,S.jsx)("span",{className:"child",style:{display:"flex",justifyContent:"center"},children:(0,S.jsx)("b",{className:"resRM",title:n.getValue(),children:n.getValue().split("_")[0]})}):(0,S.jsxs)("span",{children:[(0,S.jsx)("b",{children:"Summary"})," "]})}if("DP"==f){var B=z.find((function(e){return e.label===n.getValue()})),H=(0,o.useState)({}),q=(0,i.Z)(H,2),O=q[0],K=q[1];if(B){var Y=O[B.value];return(0,S.jsxs)("span",{style:{cursor:"pointer"},value:B.value,onClick:function(){!function(){if(B){var e=B.value,n=B.label;U.some((function(n){return n.name.includes("_".concat(e))}))?(K((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!1))})),k((function(n){return n.filter((function(n){return!n.name.includes("_".concat(e))}))}))):(K((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},e,!0))})),setTimeout((function(){F(!1)}),2e3),W(e,n))}}()},className:"parent",children:[Y?(0,S.jsx)(j.NR5,{}):(0,S.jsx)(j.jS6,{})," ",(0,S.jsx)("b",{className:"resRM",title:B.label,children:B.label})]})}return["T1","E1","E2","E3","M","L","G","Unassigned"].some((function(e){return n.getValue().includes(e)}))?(0,S.jsx)("span",{className:"child",style:{display:"flex",justifyContent:"center"},children:(0,S.jsx)("b",{className:"resRM",title:n.getValue(),children:n.getValue().split("_")[0]})}):(0,S.jsxs)("span",{children:[(0,S.jsx)("b",{children:"Summary"})," "]})}}},{header:"",accessorKey:"kpi",Cell:function(e){var n=e.cell;return(0,S.jsx)("span",{className:/(T1|E1|E2|E3|L_|M_|G_|Unassigned)/.test(n.row.original.name)?"child resRMchild":"BusinessUnit"===f?"buRMchild":"Customer"===f?"custRMchild":"Project"===f?"projRMchild":"CSL"===f||"DP"===f?"resRMchild":"inherit",style:{fontWeight:"bold"},title:n.getValue(),children:n.getValue().includes("FTE")||n.getValue().includes("SUBK")?(0,S.jsxs)(S.Fragment,{children:["\xa0\xa0 ",n.getValue()]}):n.getValue()})}},{header:"Total",accessorKey:"Total",Cell:function(e){var n,s=e.cell;return(0,S.jsxs)(S.Fragment,{children:["Resource Direct Cost"===s.row.original.kpi||"Recognized Revenue"===s.row.original.kpi||"Revenue/Emp"===s.row.original.kpi||"Resource Direct Cost/Emp"===s.row.original.kpi||"Margin/Emp"===s.row.original.kpi?(0,S.jsx)("span",{style:{display:"block",float:"left"},children:(0,S.jsx)("b",{children:"$"})}):"",(0,S.jsx)("span",{style:{display:"block",float:"right"},className:"total",children:(0,S.jsxs)("b",{children:[null===(n=Math.round(s.getValue()))||void 0===n?void 0:n.toLocaleString("en-US"),"Gross Margin %"===s.row.original.kpi?(0,S.jsx)("span",{children:null===s.getValue()?"":"%"}):""]})})]})}}];return N.forEach((function(e,n){if(n>1&&"Total"!==e){var s=new Date("".concat(e.slice(0,4),"-").concat(e.slice(5,7),"-").concat(e.slice(8,10))).toLocaleDateString("en-US",{month:"short",year:"numeric"}).replace(" ","-");X.push({header:s,accessorKey:"".concat(e),className:"software",Cell:function(e){var n,s,r,t=e.cell;return(0,S.jsxs)(S.Fragment,{children:["Resource Direct Cost"==t.row.original.kpi||"Recognized Revenue"==t.row.original.kpi||"Revenue/Emp"==t.row.original.kpi||"Resource Direct Cost/Emp"==t.row.original.kpi||"Margin/Emp"==t.row.original.kpi?(0,S.jsx)("span",{style:{display:"block",float:"left"},children:"$"}):"",(0,S.jsxs)("span",{style:{display:"block",float:"right"},children:[""==(null===(n=t.getValue())||void 0===n?void 0:n.toLocaleString("en-US"))||void 0==(null===(s=t.getValue())||void 0===s?void 0:s.toLocaleString("en-US"))?0:null===(r=t.getValue())||void 0===r?void 0:r.toLocaleString("en-US"),"Gross Margin %"==t.row.original.kpi?(0,S.jsx)("span",{children:"%"}):""]})]})}})}})),(0,S.jsxs)("div",{className:"materialReactExpandableTable headCountTable darkHeader",children:[(0,S.jsx)(Z.ZP,{columns:X,data:U,enableExpanding:function(e){return"name"===e.id},enableRowVirtualization:!0,enablePagination:!1,enableGlobalFilter:!0,enableDensityToggle:!1,enableFullScreenToggle:!1,enableHiding:!1,enableColumnFilters:!1,enableBottomToolbar:!1,enableTopToolbar:!1,enableColumnActions:!1,enableSorting:!1,filterFromLeafRows:!0,initialState:{showGlobalFilter:!0,grouping:["name"],expanded:!0,density:"compact",columnPinning:{right:["Total"]}},muiTableBodyProps:{sx:{"&":{borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc"},"& td":{borderRight:"1px solid #ccc",height:"22px",padding:"0px 5px"}}},muiTableHeadProps:{sx:{"& th":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",background:"#f4f4f4 ",padding:"0 5px"}}}}),B?(0,S.jsx)(C.Z,{handleAbort:function(){n.current&&n.current.abort(),F(!1)}}):""]})},R=s(78820),T=s(85401),E=s(72920),w=s(38262);var M=function(){var e,n,s=(0,o.useRef)(null),d=(0,o.useState)(!1),f=(0,i.Z)(d,2),v=f[0],Z=f[1],M=(0,o.useState)([]),U=(0,i.Z)(M,2),k=U[0],D=U[1],P=(0,o.useState)([]),A=(0,i.Z)(P,2),L=A[0],V=A[1],_=(0,o.useState)([]),I=(0,i.Z)(_,2),B=I[0],F=I[1],H=(0,o.useState)([]),q=(0,i.Z)(H,2),G=q[0],O=q[1],K=(0,o.useState)([]),Y=(0,i.Z)(K,2),z=Y[0],$=Y[1],J=(0,o.useState)([]),W=(0,i.Z)(J,2),Q=W[0],X=W[1],ee=(0,o.useState)([]),ne=(0,i.Z)(ee,2),se=ne[0],re=ne[1],te=(0,o.useState)([]),ae=(0,i.Z)(te,2),le=ae[0],ce=ae[1],ie=function(e,n){var s=n.map((function(e){return e.label})),r=e.filter((function(e){return s.includes(e.label)})),t=r[r.length-1];return t?t.label:""}(se,le);console.log(ie);var oe=(0,o.useState)([]),ue=(0,i.Z)(oe,2),de=ue[0],me=ue[1],he=(0,o.useState)([]),fe=(0,i.Z)(he,2),pe=fe[0],ve=fe[1],xe=(0,o.useState)([]),je=(0,i.Z)(xe,2),ge=je[0],be=je[1],Ne=(0,o.useState)([]),Ze=(0,i.Z)(Ne,2),Ce=Ze[0],Se=Ze[1],ye=(0,o.useState)(!1),Re=(0,i.Z)(ye,2),Te=Re[0],Ee=Re[1],we=(0,o.useState)(j.UdN),Me=(0,i.Z)(we,2),Ue=Me[0],ke=Me[1],De=(0,o.useState)([]),Pe=(0,i.Z)(De,2),Ae=Pe[0],Le=Pe[1],Ve=(0,o.useState)([]),_e=(0,i.Z)(Ve,2),Ie=_e[0],Be=_e[1],Fe=(0,o.useState)([]),He=(0,i.Z)(Fe,2),qe=He[0],Ge=He[1],Oe=(0,o.useState)([]),Ke=(0,i.Z)(Oe,2),Ye=Ke[0],ze=Ke[1],$e=(0,o.useState)("BusinessUnit"),Je=(0,i.Z)($e,2),We=Je[0],Qe=Je[1],Xe=h.N.baseUrl,en=(0,o.useState)((new Date).setMonth((new Date).getMonth()-3)),nn=(0,i.Z)(en,2),sn=nn[0],rn=nn[1],tn=new Date,an=new Date(sn),ln=12*(tn.getFullYear()-an.getFullYear())+tn.getMonth()-an.getMonth(),cn=localStorage.getItem("resId"),on=(0,o.useState)(!1),un=(0,i.Z)(on,2),dn=un[0],mn=un[1],hn=(0,o.useRef)([]),fn=(0,o.useState)(!1),pn=(0,i.Z)(fn,2),vn=pn[0],xn=pn[1],jn=(0,o.useState)(!1),gn=(0,i.Z)(jn,2),bn=gn[0],Nn=gn[1],Zn=(0,o.useState)([]),Cn=(0,i.Z)(Zn,2),Sn=Cn[0],yn=Cn[1];(0,o.useEffect)((function(){Rn()}),[]);var Rn=function(){m()({method:"GET",url:Xe+"/CommonMS/master/getMenus?loggedUserId=".concat(cn)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Monthly Revenue Trend"!==e.display_name&&"Revenue & Margin Variance"!==e.display_name&&"Rev. Projections"!==e.display_name&&"Project Timesheet (Deprecated)"!==e.display_name&&"Financial Plan & Review"!==e.display_name}))),e})).forEach((function(e){"Revenue Metrics"===e.display_name&&yn([e])}))}))},Tn=function(e){e.expanded;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(j.qL$,{className:"chevronIcon"})})},En=x()(sn).startOf("month").format("yyyy-MM-DD"),wn={month:En,duration:3,resTyp:-1,countries:"",measures:"-1",searchType:"BusinessUnit",busUnits:"170,211,123,82,168,207,212,18,213,49,149,208,999",Customer:-1,prjId:-1,sortBy:-1,cadres:-1,cslRes:-1,dpRes:-1,objId:-1,overheadChecked:!1},Mn=(0,o.useState)(wn),Un=(0,i.Z)(Mn,2),kn=Un[0],Dn=Un[1];console.log("searchdata>",kn);var Pn=function(e){var n=e.target,s=n.name,r=n.value;"searchType"===s&&(Qe(r),xn(!1),Dn("BusinessUnit"===r?function(e){return(0,c.Z)((0,c.Z)({},e),{},{cslRes:-1,dpRes:-1,prjId:-1,Customer:-1})}:"Customer"===r?function(e){return(0,c.Z)((0,c.Z)({},e),{},{cslRes:-1,dpRes:-1,prjId:-1,busUnits:-1,Customer:0})}:"CSL"===r?function(e){return(0,c.Z)((0,c.Z)({},e),{},{busUnits:-1,dpRes:-1,prjId:-1,Customer:-1})}:"Project"===r?function(e){return(0,c.Z)((0,c.Z)({},e),{},{cslRes:-1,dpRes:-1,busUnits:-1,Customer:-1})}:function(e){return(0,c.Z)((0,c.Z)({},e),{},{cslRes:-1,busUnits:-1,prjId:-1,Customer:-1})})),"Customer"==s&&"1"===r&&Nn(!0),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},s,r))}))},An=(0,o.useState)([{}]),Ln=(0,i.Z)(An,2),Vn=Ln[0],_n=Ln[1],In=null===Vn||void 0===Vn?void 0:Vn.map((function(e){return null===e||void 0===e?void 0:e.id})).toString();(0,o.useEffect)((function(){}),[In]);var Bn=null===(e=JSON.parse(localStorage.getItem("selectedCust")))||void 0===e||null===(n=e.map((function(e){return e.id})))||void 0===n?void 0:n.toString(),Fn=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,s,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:Xe+"/CostMS/cost/getDepartments"});case 2:n=e.sent,(s=(s=n.data).filter((function(e){return e.value>=0}))).push({value:999,label:"Non-Revenue Units"}),D(s),V(s.filter((function(e){return e.value>=0}))),r=[],s.forEach((function(e){r.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"busUnits",r.toString()))}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){m()({method:"get",url:Xe+"/revenuemetricsms/RevenueMarginAnalysis/getCustomers"}).then((function(e){var n=e.data;Be(n)}))}),[]),(0,o.useEffect)((function(){var e=[];B.forEach((function(n){e.push(n.value)})),Dn((function(n){return(0,c.Z)((0,c.Z)({},n),{},(0,l.Z)({},"countries",e.toString()))}))}),[B]);var Hn=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,s,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:Xe+"/revenuemetricsms/headCountAndTrend/getCadres"});case 2:n=e.sent,s=[],(r=n.data).push({id:"UA",cadre:"UnAssigned"}),r.length>0&&r.forEach((function(e){var n={label:e.cadre,value:e.id};s.push(n),$(s),X(s.filter((function(e){return 0!=e.value})));var r=[];s.forEach((function(e){0!=e.value&&r.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"cadres",r.toString()))}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qn=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){var n,s,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:Xe+"/revenuemetricsms/headCountAndTrend/getMeasures"});case 2:n=e.sent,s=[],(r=n.data).length>0&&r.forEach((function(e){var n={label:e.measures,value:e.id};s.push(n),re(s),ce(s.filter((function(e){return 0!=e.value})));var r=[];s.forEach((function(e){0!=e.value&&r.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"measures",r.toString()))}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){Fn(),m().get(Xe+"/revenuemetricsms/headCountAndTrend/getCountries").then((function(e){var n=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.countryName,value:e.id};n.push(s)}));var r=n.sort((function(e,n){var s=e.label.toUpperCase(),r=n.label.toUpperCase();return s<r?-1:s>r?1:0}));F(r),O(n)})).catch((function(e){return console.log(e)})),Hn(),qn(),function(){var e=cn;m()({method:"get",url:Xe+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(e)}).then((function(e){var n=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};n.push(s)})),me(n),ve(n)}))}(),m()({method:"get",url:Xe+"/ProjectMS/Audit/getProjectNameandId"}).then((function(e){var n=e.data;Le(n)})),m().get(Xe+"/administrationms/subkconversiontrend/getdeliverypartner").then((function(e){var n=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};n.push(s)})),be(n),Se(n)}))}),[We]);var Gn=function(e,n){var s=e.map((function(e){return e.value})),r=n.map((function(e){return e.value}));return s.length===r.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,S.jsxs)("div",{children:[dn?(0,S.jsxs)("div",{className:"statusMsg error",children:[" ",(0,S.jsx)(R.CSE,{})," Please select valid values for highlighted fields"]}):"",(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne"}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"Headcount and Margins Trend"})}),(0,S.jsx)("div",{className:"childThree"})]}),(0,S.jsx)(w.Z,{routes:Sn,currentScreenName:["Headcount and Margins Trend"]}),(0,S.jsx)("div",{children:(0,S.jsxs)("div",{className:"group mb-3 customCard",children:[(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Search Filters"}),(0,S.jsx)("div",{className:"helpBtn",children:(0,S.jsx)(E.Z,{pdfname:"HeadCountTrend.pdf",name:"Head Count Trend Help"})}),(0,S.jsx)("div",{onClick:function(){Ee(!Te),ke(Te?j.UdN:j.NR5)},children:(0,S.jsx)("span",{children:Ue})})]}),(0,S.jsx)(g.V9,{visible:!Te,children:(0,S.jsxs)("div",{className:"group-content row",children:[(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Start Month",children:["Start Month"," ",(0,S.jsxs)("span",{className:"required",children:["\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 datepicker",children:(0,S.jsx)(p(),{className:"month",id:"month",name:"month",maxDate:new Date(tn.getFullYear(),tn.getMonth(),0),selected:sn,dateFormat:"MMM-yyyy",showMonthYearPicker:!0,onChange:function(e){!function(e){rn(e),document.getElementById("duration").value=""}(e)}})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"duration",children:["Duration\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{onChange:Pn,className:"text",defaultValue:3,name:"duration",id:"duration",ref:function(e){hn.current[0]=e},children:[(0,S.jsx)("option",{value:"",children:"<< Please Select >>"}),(0,r.Z)(Array(Math.min(ln,12))).map((function(e,n){var s=n+1;return(0,S.jsx)("option",{value:s,children:s},s)}))]})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"searchType",children:["Search Type\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{onChange:Pn,className:"text",defaultValue:"BusinessUnit",name:"searchType",id:"searchType",ref:function(e){hn.current[1]=e},children:[(0,S.jsx)("option",{value:"",children:"<< Please Select >>"}),(0,S.jsx)("option",{value:"BusinessUnit",children:"Business Unit"}),(0,S.jsx)("option",{value:"CSL",children:"CSL"}),(0,S.jsx)("option",{value:"Customer",children:"Customer"}),(0,S.jsx)("option",{value:"DP",children:"Delivery Partner"}),(0,S.jsx)("option",{value:"Project",children:"Project"})]})})]})}),"BusinessUnit"==We?(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Business Unit",children:["Business Unit"," ",(0,S.jsxs)("span",{className:"required",children:["\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[2]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"busUnits",options:k.sort((function(e,n){return e.label.localeCompare(n.label)})),hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:L,disabled:!1,onChange:function(e){V(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"busUnits",n.toString()))}))},valueRenderer:Gn})})]})}):"Customer"==We?(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Customer",children:["Customer\xa0",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{className:"cancel text",name:"Customer",id:"Customer",onChange:Pn,defaultValue:0,children:[(0,S.jsx)("option",{value:-1,children:" <<All>>"}),(0,S.jsx)("option",{value:0,children:"Active Customers"}),(0,S.jsx)("option",{value:1,children:"Select"})]})})]})}):"Project"==We?(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Project\xa0",(0,S.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"autoComplete-container react  reactsearchautocomplete",ref:function(e){hn.current[2]=e},children:(0,S.jsx)(b.ReactSearchAutocomplete,{items:Ae,type:"Text",name:"prjId",id:"prjId",className:"error AutoComplete",onSelect:function(e){Dn((function(n){return(0,c.Z)((0,c.Z)({},n),{},{prjId:e.id})}))},showIcon:!1,placeholder:"Type minimum 3 characters"})})})]})}):"CSL"==We?(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"CSL",children:["CSL\xa0",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[2]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"cslRes",name:"cslRes",options:de.sort((function(e,n){return e.label.localeCompare(n.label)})),hasSelectAll:!0,value:pe,shouldToggleOnHover:!1,valueRenderer:Gn,disableSearch:!1,selected:pe,disabled:!1,onChange:function(e){ve(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"cslRes",n.toString()))}))}})})]})}):"DP"==We?(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"businessunit",children:["Delivery Partner\xa0",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[2]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"dpRes",options:ge.sort((function(e,n){return e.label.localeCompare(n.label)})),hasSelectAll:!0,isLoading:!1,valueRenderer:Gn,value:Ce,disabled:!1,disableSearch:!1,shouldToggleOnHover:!1,onChange:function(e){Se(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"dpRes",n.toString()))}))}})})]})}):"",(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Res. Type",children:["Res. Type\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{onChange:Pn,name:"resTyp",id:"resTyp",children:[(0,S.jsx)("option",{value:-1,children:"<< All >>"}),(0,S.jsx)("option",{value:"subK",children:"Contractor"}),(0,S.jsx)("option",{value:"fte",children:"Employee"})]})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Res.Location",children:["Res.Location"," ",(0,S.jsxs)("span",{className:"required",children:["\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[""==We?2:3]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"countries",name:"countries",options:B,hasSelectAll:!0,value:G,disabled:!1,onChange:function(e){O(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"countries",n.toString()))}))},valueRenderer:Gn})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"cadres",children:["Cadres"," ",(0,S.jsxs)("span",{className:"required",children:["\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]})]}),(0,S.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[""==We?3:4]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"cadres",options:z,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Q,disabled:!1,onChange:function(e){X(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"cadres",n.toString()))}))},valueRenderer:Gn})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"measures",children:["Measures"," ",(0,S.jsxs)("span",{className:"required",children:["\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){hn.current[""==We?4:5]=e},children:(0,S.jsx)(u.NU,{ArrowRenderer:Tn,id:"measures",name:"measures",options:se.sort((function(e,n){return e.label.localeCompare(n.label)})),hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:le,disabled:!1,onChange:function(e){ce(e);var n=[];e.forEach((function(e){n.push(e.value)})),Dn((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,l.Z)({},"measures",n.toString()))}))},valueRenderer:Gn})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"sortBy",children:["Sort By\xa0",(0,S.jsx)("span",{className:"required error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{onChange:Pn,name:"sortBy",id:"sortBy",children:[(0,S.jsx)("option",{value:"-1",children:"Default"}),le.map((function(e){return(0,S.jsxs)("option",{value:e.value,children:[" ",e.label]})}))]})})]})}),"BusinessUnit"==We?(0,S.jsx)(S.Fragment,{children:le.some((function(e){return 1339===e.value}))&&(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",children:"Consider Overhead Cost"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("span",{className:"col-6 align-self-center",children:(0,S.jsx)("input",{type:"checkbox",onChange:function(e){Dn((0,c.Z)((0,c.Z)({},kn),{},{overheadChecked:e.target.checked}))},style:{marginTop:"5px"}})})]})})}):"",(0,S.jsx)("div",{className:"col-md-12 btn-container center my-3",children:(0,S.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){!function(e){mn(!1),s.current=new AbortController;var n=hn.current.filter((function(e){return null!=e}));hn.current=n;var r=(0,N.Z)(hn);if(1==r)return Z(!1),void mn(!0);xn(!1);var t=setTimeout((function(){Z(!0)}),2e3);m()({method:"post",url:Xe+"/revenuemetricsms/headCountAndTrend/getHeadCountAndTrendData",signal:s.current.signal,data:{month:En,duration:kn.duration,resTyp:kn.resTyp,countries:"6,5,3,8,0,7,1,2"==kn.countries?"6,5,3,8,7,1,2":kn.countries,measures:kn.measures,searchType:kn.searchType,busUnits:"BusinessUnit"!=kn.searchType?-1:kn.busUnits,customers:"Customer"==kn.searchType?"1"==kn.Customer?Bn:"-1"==kn.Customer?"-1":0:-1,prjId:kn.prjId,sortBy:kn.sortBy,cadres:"E1,E2,E3,L,M,G,T1,UA"==kn.cadres?-1:kn.cadres,cslRes:kn.cslRes,dpRes:kn.dpRes,objId:kn.objId,overheadChecked:kn.overheadChecked}}).then((function(e){Z(!1),clearTimeout(t);var n=e.data;Ge(n.data),m()({method:"get",url:Xe+"/revenuemetricsms/headCountAndTrend/getColumnsData?reportRunId=".concat(n.reportRunId),signal:s.current.signal}).then((function(e){!r&&Ee(!Te),ke(Te?j.UdN:j.NR5);var n=e.data.val.replace(/`/g,"").replace(/'/g,"").split(",");ze(n.slice(1))})).catch((function(e){console.log(e)})),mn(!1),xn(!0)}))}()},children:[(0,S.jsx)(j.U41,{})," Search"," "]})})]})})]})}),v?(0,S.jsx)(C.Z,{handleAbort:function(){s.current&&s.current.abort(),Z(!1)}}):"",(0,S.jsx)(T.Z,{flag:1,visible:bn,setVisible:Nn,setSelectedItems:_n,selectedItems:Vn}),vn&&(0,S.jsx)(y,{tableData:qe,column:Ye,searchdata:kn,month:sn,selectType:We,loggedUserId:cn,projects:Ae,customer:Ie,selectedCust:Bn,laterMeasureLabel:ie})]})}},79122:function(){}}]);
//# sourceMappingURL=5312.a4b513ce.chunk.js.map