"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[183,5100],{96602:function(e,s,t){t.r(s),t.d(s,{default:function(){return _}});var l=t(29439),a=t(4942),n=t(1413),i=t(72791),c=t(74569),o=t.n(c),r=t(59513),d=t.n(r),u=(t(68639),t(39040)),x=t(56355),m=t(34831),p=t(3900),h=t(80184);function v(e){var s=e.setreportRunId,t=e.setinsideSalesData,c=e.searching,r=e.setsearching,v=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal")),g=(0,i.useState)(!1),j=(0,l.Z)(g,2),f=j[0],S=j[1],N=(0,i.useState)((function(){var e=new Date,s=e.getDate()-e.getDay()+1;return new Date(e.setDate(s))})),y=(0,l.Z)(N,2),b=y[0],C=y[1],D=(0,i.useState)((function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e.setMonth(e.getMonth()-3),e})),I=(0,l.Z)(D,2),_=I[0],Z=I[1],k=(0,i.useState)("<< All SE >>"),E=(0,l.Z)(k,2),w=E[0],A=E[1],P=null!==localStorage.getItem("isIndividualCheckedLocal")&&JSON.parse(localStorage.getItem("isIndividualCheckedLocal")),L=(0,i.useState)([]),M=(0,l.Z)(L,2),F=M[0],R=M[1],q=(0,i.useState)(!1),J=(0,l.Z)(q,2),O=J[0],Q=J[1],T=(0,i.useState)({type:"main",executives:"-2",isActive:"true",isIndividual:"false",from:b.toLocaleDateString("en-CA"),duration:"2",duration2:"2",quarter:function(){var e=new Date,s=Math.floor(e.getMonth()/3);return new Date(e.getFullYear(),3*s,1).toLocaleDateString("en-CA")}(),selectExecs:""}),Y=(0,l.Z)(T,2),U=Y[0],V=Y[1],H=function(e){var s=e.id,t=e.value;console.log(s+" "+t),V((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},s,t))})),"executives"===s&&"1"===t&&S(!0)},B=m.N.baseUrl,W=function(){r(!0),Q(!1),"1"===U.executives&&(U.executives=String(JSON.parse(localStorage.getItem("selectedSE")).map((function(e){return e.id})))),U.isIndividual="true"===localStorage.getItem("selectedSE")?"true":"false",o().post(B+"/SalesMS/insideSales/getInsideSalesProgress",U).then((function(e){var l=e.data.data,a=e.data.insideSales.split(","),n=l.map((function(e){return JSON.parse(JSON.stringify(e,a,4))}));t(n),s(e.data.reportRunId),r(!1)})).catch((function(e){console.log(e)}))};return(0,i.useEffect)((function(){o().get(B+"/SalesMS/MasterController/salesExecutiveData").then((function(e){var s=e.data.filter((function(e){return 1===e.isActive})).map((function(e){return(0,h.jsx)("option",{value:e.val,children:e.lkupName},e.id)}));R(s)})).catch((function(e){console.log(e)})),W()}),[]),(0,h.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:[O&&(0,h.jsx)("div",{className:"alert alert-danger",children:(0,h.jsxs)("span",{children:[(0,h.jsx)("strong",{children:(0,h.jsx)("em",{className:"icon","data-icon":"\ue717"})}),"Please select valid values for highlighted fields"]})}),(0,h.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:[(0,h.jsxs)("div",{className:"col-md-3 col-sm-10 col-xs-12 seDiv",id:"execSelDiv",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,h.jsxs)("div",{className:"form-group pui-require",children:[(0,h.jsxs)("label",{className:"col-md-6 col-sm-6 col-xs-6 no-padding",children:["Inside Sales Executive",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{className:"col-xs-1 bold",children:":"}),(0,h.jsx)("span",{className:"col-md-5 col-sm-5 col-xs-5 no-padding ".concat(O&&"error"),style:{height:"23px"},children:(0,h.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12  onLoadEmpty",value:U.executives,onChange:function(e){H(e.target),A(e.target.options[e.target.selectedIndex].text)},children:[(0,h.jsx)("option",{value:0,children:"<< Please select>> "}),F]})})]})]}),(0,h.jsxs)("div",{className:"col-md-3 col-sm-10 col-xs-12 seDiv",id:"execSelDiv",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,h.jsxs)("div",{className:"form-group pui-require",children:[(0,h.jsxs)("label",{className:"col-md-6 col-sm-6 col-xs-6 no-padding",children:["Start Week ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{className:"col-xs-1 bold",children:":"}),(0,h.jsx)("span",{className:"col-md-5 col-sm-5 col-xs-5 no-padding",style:{height:"23px"},children:(0,h.jsx)(d(),{selected:b,onChange:function(e){var s=(0,l.Z)(e,2),t=s[0];s[1];C(t),H({id:"from",value:t.toLocaleDateString("en-CA")})},startDate:b,endDate:(0,u.default)(b,6),selectsRange:!0,calendarStartDay:1,filterDate:function(e){return 1===e.getDay()},dateFormat:"dd/MM/yyyy"})})]})]}),(0,h.jsxs)("div",{className:"col-md-3 col-sm-10 col-xs-12 seDiv",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"12px"}}),(0,h.jsxs)("div",{className:"form-group pui-require",children:[(0,h.jsxs)("label",{className:"col-md-6 col-sm-6 col-xs-6 no-padding",children:["Duration ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{className:"col-xs-1 bold",children:":"}),(0,h.jsx)("span",{className:"col-md-5 col-sm-5 col-xs-5 no-padding",style:{height:"23px"},children:(0,h.jsxs)("select",{id:"duration",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",defaultValue:"2",onChange:function(e){H(e.target)},children:[(0,h.jsx)("option",{value:1,children:"1"}),(0,h.jsx)("option",{value:2,children:"2"}),(0,h.jsx)("option",{value:3,children:"3"}),(0,h.jsx)("option",{value:4,children:"4"})]})})]})]}),(0,h.jsxs)("div",{className:"col-md-3 col-sm-10 col-xs-12 seDiv",id:"execSelDiv",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,h.jsxs)("div",{className:"form-group pui-require",children:[(0,h.jsxs)("label",{className:"col-md-6 col-sm-6 col-xs-6 no-padding",children:["Quarter ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{className:"col-xs-1 bold",children:":"}),(0,h.jsx)("span",{className:"col-md-5 col-sm-5 col-xs-5 no-padding",style:{height:"23px"},children:(0,h.jsx)(d(),{selected:_,onChange:function(e){Z(e);var s=new Date(e.getTime());s.setFullYear(s.getFullYear()-1),s.setMonth(s.getMonth()+3),H({id:"quarter",value:s.toLocaleDateString("en-CA")})},dateFormat:"yyyy, QQQ",showQuarterYearPicker:!0})})]})]})]}),(0,h.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12",children:(0,h.jsxs)("div",{className:"col-md-3 col-sm-10 col-xs-12 seDiv",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"12px"}}),(0,h.jsxs)("div",{className:"form-group pui-require",children:[(0,h.jsxs)("label",{className:"col-md-6 col-sm-6 col-xs-6 no-padding",children:["Quarters ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{className:"col-xs-1 bold",children:":"}),(0,h.jsx)("span",{className:"col-md-5 col-sm-5 col-xs-5 no-padding",style:{height:"23px"},children:(0,h.jsxs)("select",{id:"duration2",name:"duration2",className:"col-md-12 col-sm-12 col-xs-12 ",defaultValue:"2",onChange:function(e){H(e.target)},children:[(0,h.jsx)("option",{value:1,children:"1"}),(0,h.jsx)("option",{value:2,children:"2"}),(0,h.jsx)("option",{value:3,children:"3"}),(0,h.jsx)("option",{value:4,children:"4"})]})})]})]})}),(0,h.jsxs)("div",{className:"col-md-12 no-padding section",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"20px"}}),(0,h.jsxs)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"},children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"5px"}}),(0,h.jsxs)("span",{className:"selectedSE",children:[(0,h.jsx)("b",{children:"Selected SE : "}),(0,h.jsx)("span",{className:"dynText",children:"<< Select SE >>"===w?v.map((function(e,s){return(0,h.jsxs)("span",{children:[P?e.salesPersonName?e.salesPersonName:e.text:e.salesPersonName?e.salesPersonName:e.text+" & Team",s===v.length-1?"":", "]},e.id)})):w})]}),(0,h.jsx)("div",{className:"clearfix ",style:{height:"5px"}})]})]}),(0,h.jsx)("div",{className:"col-md-12 no-padding section",children:(0,h.jsx)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"}})}),(0,h.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"25px"}}),c?(0,h.jsxs)("button",{className:"btn btn-primary",type:"button",disabled:!0,children:[(0,h.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}),"Loading..."]}):(0,h.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){"0"===U.executives?Q(!0):W()},style:{boxShadow:"none"},children:[(0,h.jsx)(x.U41,{})," Search"," "]})]}),(0,h.jsx)(p.default,{visible:f,setVisible:S})]})}var g=t(7692);function j(e){var s=e.reportRunId,t=e.execName,c=e.execId,r=m.N.baseUrl,d=(0,i.useState)([]),u=(0,l.Z)(d,2),p=u[0],v=u[1],j={reportRunId:String(s),executiveId:String(c)},f=(0,i.useState)({}),S=(0,l.Z)(f,2),N=S[0],y=S[1],b={1:(0,h.jsx)(x.gbA,{style:{color:"purple"}}),0:(0,h.jsx)(x.gbA,{style:{color:"green"}})},C=function(){y({}),o().post(r+"/SalesMS/insideSales/getInsideSalesProgressDetails",j).then((function(e){var s=e.data.data,t=["id","type","qrtr","opportunity","count","customer","isProspect","country","closeDate","amount","probability","nextStep","comments"],l=s.map((function(e){return JSON.parse(JSON.stringify(e,t,4))}));v(l)})).catch((function(e){}))};(0,i.useEffect)((function(){C()}),[c]);var D=function(e,s){var t=e.target,l=t.value,i=t.id;v((function(e){var t=e.findIndex((function(e){return parseInt(e.id)===parseInt(s)}));return e[t][i]=l,e})),y((function(e){var t,c=p.findIndex((function(e){return parseInt(e.id)===parseInt(s)}));return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},s,{comments:"comments"===i?l:void 0===e[s]?p[c].comments:e[s].comments,nextStep:"nextStep"===i?l:void 0===e[s]?p[c].nextStep:null===(t=e[s])||void 0===t?void 0:t.nextStep}))}))},I=p.map((function(e){var s=["count","id","isProspect"],t=[];for(var l in e)!s.includes(l)&&t.push(e.id<0?(0,h.jsx)("th",{children:"__iconCust__ Customer __iconProsp__ Prospect"===e[l]?(0,h.jsxs)("span",{children:[(0,h.jsx)("span",{children:b[0]}),e[l].split("_")[4],(0,h.jsx)("br",{}),(0,h.jsx)("span",{children:b[1]}),e[l].split("_")[8]]}):e[l].replace(/(<([^>]+)>)/gi,"")},l):(0,h.jsxs)("td",{className:l,children:["customer"===l&&b[e.isProspect],"nextStep"===l||"comments"===l?(0,h.jsx)("input",{type:"text",id:l,value:e[l],onChange:function(s){D(s,e.id)},placeholder:"Enter Comments Here"}):"amount"===l?parseInt(e[l]).toLocaleString("en-US"):e[l]]},l));return(0,h.jsx)("tr",{children:t},e.id)}));return(0,h.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 mt10 no-padding ",children:[(0,h.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:(0,h.jsxs)("b",{children:["Inside Sales Progress of ",(0,h.jsx)("span",{className:"linkSty",children:t})]})}),(0,h.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding clearfix",style:{height:"10px"}}),(0,h.jsx)("table",{className:"table table-bordered table-striped progresstable",children:(0,h.jsx)("tbody",{children:I})}),(0,h.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center",children:[(0,h.jsx)("div",{className:"clearfix",style:{height:"25px"}}),(0,h.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){o().post(r+"/SalesMS/insideSales/saveInsideSalesComments",N).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},children:[(0,h.jsx)(x.TvB,{}),"Save "]}),(0,h.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:C,style:{marginLeft:"10px"},children:[(0,h.jsx)(g.oAZ,{}),"Reset "]})]})]})}var f=t(49177),S=t(34911),N=t(56637),y=t(53824),b=t(48462),C=t(59170);function D(e){var s=e.insideSalesData,t=e.reportRunId,a=(0,i.useState)(""),n=(0,l.Z)(a,2),c=n[0],o=n[1],r=(0,i.useState)(""),d=(0,l.Z)(r,2),u=d[0],x=d[1],m={fte0:(0,h.jsx)("img",{src:S,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,h.jsx)("img",{src:f,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,h.jsx)("img",{src:N,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,h.jsx)("img",{src:b,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,h.jsx)("img",{src:y,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,h.jsx)("img",{src:C,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},p=s.map((function(e){var s=["Count","execStatus","id","isActive"],t=[],l=function(l){var a,n,c,r,d,u,p,v;null!==e[l]&&!s.some((function(e){return l.includes(e)}))&&t.push(e.id<0?(0,h.jsx)("th",{className:(null===l||void 0===l?void 0:l.split("_")[0])+" pipeth",colSpan:null===(a=e[l])||void 0===a?void 0:a.split("^&")[2],rowSpan:null===(n=e[l])||void 0===n?void 0:n.split("^&")[1],children:null===(c=e[l])||void 0===c?void 0:c.split("^&")[0]},l):(0,h.jsx)("td",{className:(l.includes("service")?"service":"software")+" pipetd "+(null===l||void 0===l?void 0:l.split("_")[0]),colSpan:null===(r=e[l])||void 0===r?void 0:r.split("^&")[2],rowSpan:null===(d=e[l])||void 0===d?void 0:d.split("^&")[1],style:{backgroundColor:0===e.id?"#EADDCA":""},children:"executive"!==l?(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)("span",{children:parseInt(null===(u=e[l])||void 0===u?void 0:u.split("^&")[0]).toLocaleString("en-US")}),"\xa0 (",(0,h.jsx)("span",{children:null===(p=e[l+"Count"])||void 0===p?void 0:p.split("^&")[0]}),")"]}):(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)("span",{children:m[e.execStatus]}),(0,h.jsx)("span",{className:0===e.id?"":"linkSty",onClick:function(){o(e.id),x(e.executive)},children:null===(v=e[l])||void 0===v?void 0:v.split("^&")[0]})]})},l))};for(var a in e)l(a);return(0,h.jsx)("tr",{children:t},e.id)}));return(0,h.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:[(0,h.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding scrollit",children:(0,h.jsx)("table",{className:"table table-bordered table-striped pipelinetable ",children:(0,h.jsx)("tbody",{children:p})})}),""===c?"":(0,h.jsx)(j,{execId:c,execName:u,reportRunId:t})]})}var I=t(83854);function _(){var e=(0,i.useState)([]),s=(0,l.Z)(e,2),t=s[0],a=s[1],n=(0,i.useState)(""),c=(0,l.Z)(n,2),o=c[0],r=c[1],d=(0,i.useState)(!1),u=(0,l.Z)(d,2),x=u[0],m=u[1];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:[(0,h.jsx)("div",{className:"pageHeading",children:"Inside Sales"}),(0,h.jsx)(v,{setinsideSalesData:a,setreportRunId:r,searching:x,setsearching:m}),(0,h.jsx)(D,{insideSalesData:t,reportRunId:o})]}),x&&(0,h.jsx)(I.Z,{setsearching:m})]})}}}]);
//# sourceMappingURL=183.2c843bc2.chunk.js.map