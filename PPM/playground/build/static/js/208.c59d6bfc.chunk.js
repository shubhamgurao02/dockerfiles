"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[208],{20208:function(e,n,t){t.r(n),t.d(n,{default:function(){return B}});var o=t(74165),s=t(15861),i=t(29439),r=t(72791),l=t(74569),c=t.n(l),a=t(34831),u=t(4942),d=t(1413),m=t(93433),h=t(11683),f=t(64554),g=t(20068),p=t(13400),x=t(36151),Z=t(5574),v=t(65661),j=t(39157),y=t(1582),C=t(96285),w=t(97123),k=t(74223),S=t(80184),b=(0,k.Z)((0,S.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),M=(0,k.Z)((0,S.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save"),E=(0,k.Z)((0,S.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel"),H=(0,k.Z)((0,S.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),P=t(63521),z=function(e){var n=e.open,t=e.columns,o=e.onClose,s=e.onSubmit,l=(0,r.useState)((function(){return t.reduce((function(e,n){var t;return e[null!==(t=n.accessorKey)&&void 0!==t?t:""]="",e}),{})})),c=(0,i.Z)(l,2),a=c[0],m=c[1];return(0,S.jsxs)(Z.Z,{open:n,children:[(0,S.jsx)(v.Z,{textAlign:"center",children:"Create New Account"}),(0,S.jsx)(j.Z,{children:(0,S.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:(0,S.jsx)(y.Z,{sx:{width:"100%",minWidth:{xs:"300px",sm:"360px",md:"400px"},gap:"1.5rem"},children:t.map((function(e){return(0,S.jsx)(C.Z,{label:e.header,name:e.accessorKey,onChange:function(e){return m((0,d.Z)((0,d.Z)({},a),{},(0,u.Z)({},e.target.name,e.target.value)))}},e.accessorKey)}))})})}),(0,S.jsxs)(w.Z,{sx:{p:"1.25rem"},children:[(0,S.jsx)(x.Z,{onClick:o,children:"Cancel"}),(0,S.jsx)(x.Z,{color:"secondary",onClick:function(){s(a),o()},variant:"contained",children:"Add"})]})]})},D=function(e){return!!e.length},N=function(e){return!!e.length&&e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},T=function(e){return e>=18&&e<=50},_=function(e){var n=e.Data,t=e.issueDetails;(0,r.useEffect)((function(){console.log(t)}),[t]);var l=(0,r.useState)(!1),Z=(0,i.Z)(l,2),v=Z[0],j=Z[1],y=(0,r.useState)([]),C=(0,i.Z)(y,2),w=C[0],k=C[1],_=(0,r.useState)({}),B=(0,i.Z)(_,2),I=B[0],V=B[1],A=(0,r.useState)(),F=(0,i.Z)(A,2),R=(F[0],F[1],(0,r.useState)([])),K=(0,i.Z)(R,2),L=(K[0],K[1]),O=a.N.baseUrl,U=(0,r.useState)({name:"",roleTypeId:"543",isPrimary:"0",hasfullHierarchy:""}),q=(0,i.Z)(U,2),W=q[0],Y=q[1];console.log(W);console.log(W.name);var $=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.exitEditingMode,s=n.row,n.table,console.log(s),console.log("-----------------------------on click of edit icon"),console.log("in line 99---"),console.log(W),console.log(W.name,W.id,void 0===W.id?W.name:W.id),c()({method:"post",url:O+"/administrationms/salesPermission/saveresourceaccess",data:{userId:void 0===W.id?W.name:W.id,roleTypeId:"543",isPrimary:"0",hasfullHierarchy:W.hasFullHierarchy}}).then((function(e){console.log("success",e),c()({method:"get",url:O+"/administrationms/salesPermission/getSalesPermission"}).then((function(e){var n=e.data;L(n)})).catch((function(e){}))})),Object.keys(I).length||(w[s.index]=values,k((0,m.Z)(w)),t());case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=(0,r.useCallback)((function(e){console.log(e.original.id),console.log(e.name),console.log(W.name),console.log(W.id),c()({method:"delete",url:O+"/administrationms/salesPermission/deleteSalesPermission?Roleid=543&UserId=".concat(e.original.id)}).then((function(e){console.log(e),console.log("success",e),setDeletePopup(!1),setDeleteMessage(!0),setTimeout((function(){setDeleteMessage(!1)}),3e3)})),w.splice(e.index,1),k((0,m.Z)(w))}),[w]),J=(0,r.useCallback)((function(e){return{error:!!I[e.id],helperText:I[e.id],onBlur:function(n){("email"===e.column.id?N(n.target.value):"age"===e.column.id?T(+n.target.value):D(n.target.value))?(delete I[e.id],V((0,d.Z)({},I))):V((0,d.Z)((0,d.Z)({},I),{},(0,u.Z)({},e.id,"".concat(e.column.columnDef.header," is required"))))}}}),[I]),Q=(0,r.useMemo)((function(){return[{accessorKey:"name",header:"Name",Edit:function(e){var n=e.cell,o=e.column;e.table;return(0,S.jsxs)(S.Fragment,{children:[console.log(n.getValue()),console.log(""+n.getValue()==""),console.log(o),""!=n.getValue()?(0,S.jsx)("input",{type:"text",disabled:!0,value:n.getValue()}):(0,S.jsx)(P.ReactSearchAutocomplete,{items:t,type:"Text",name:"userId",id:"userId",className:"wrapperauto",issueDetails:t,onSelect:function(e){console.log(t),Y((function(n){return(0,d.Z)((0,d.Z)({},n),{},(0,u.Z)({},"name",e.id))})),console.log(e.id)},showIcon:!1})]})}},{accessorKey:"hasFullHierarchy",header:"Has Full Hierarchy",Cell:function(e){return 1==e.cell.getValue()?"Yes":"No"},Edit:function(e){e.cell,e.column,e.table,e.options;return(0,S.jsx)("input",{id:"hasFullHierarchy",type:"checkBox",onChange:function(e){Y((function(n){return(0,d.Z)((0,d.Z)({},n),{},(0,u.Z)({},e.target.id,e.target.checked?1:0))}))},checked:1==W.hasFullHierarchy})}}]}),[J,W]);(0,r.useEffect)((function(){console.log(n),k(n)}),[n]);return(0,r.useEffect)((function(){var e;console.log(w),""==(null===(e=w[0])||void 0===e?void 0:e.name)&&setTimeout((function(){var e,n;console.log("in timeout"),null===(e=document)||void 0===e||null===(n=e.getElementsByClassName("MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-78trlr-MuiButtonBase-root-MuiIconButton-root")[5])||void 0===n||n.click()}),200)}),[w]),(0,S.jsx)("div",{className:"roleMappingTable",children:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(h.ZP,{displayColumnDefOptions:{"mrt-row-actions":{muiTableHeadCellProps:{align:"center"},size:120}},columns:Q,data:w,editingMode:"row",enableColumnOrdering:!0,enableEditing:!0,onEditingRowCancel:function(){V({})},renderRowActions:function(e){var n=e.row,t=e.table;return(0,S.jsxs)(f.Z,{sx:{display:"flex",gap:"1rem"},children:[(0,S.jsx)(g.Z,{arrow:!0,placement:"right",title:"Edit",children:(0,S.jsx)(p.Z,{onClick:function(){console.log(n.original),Y(n.original),t.setEditingRow(n)},children:(0,S.jsx)(b,{})})}),(0,S.jsx)(g.Z,{arrow:!0,placement:"left",title:"Save",children:(0,S.jsx)(p.Z,{onClick:function(){$(n,t)},children:(0,S.jsx)(M,{})})}),(0,S.jsx)(g.Z,{arrow:!0,placement:"left",title:"Cancel",children:(0,S.jsx)(p.Z,{onClick:function(){return t.setEditingRow("")},children:(0,S.jsx)(E,{})})}),(0,S.jsx)(g.Z,{arrow:!0,placement:"right",title:"Delete",children:(0,S.jsx)(p.Z,{color:"error",onClick:function(){return G(n)},children:(0,S.jsx)(H,{})})})]})},renderTopToolbarCustomActions:function(){return(0,S.jsx)(x.Z,{color:"secondary",onClick:function(){k([].concat([{name:"",hasFullHierarchy:""}],(0,m.Z)(w)))},variant:"contained",children:"add"})}}),(0,S.jsx)(z,{columns:Q,open:v,onClose:function(){return j(!1)},onSubmit:function(e){console.log("----------------------------- on click of add icon"),w.push(e),k((0,m.Z)(w))}})]})})};function B(){var e=(0,r.useState)([]),n=(0,i.Z)(e,2),t=n[0],l=n[1],u=(0,r.useState)([]),d=(0,i.Z)(u,2),m=d[0],h=d[1],f=a.N.baseUrl,g=(0,r.useState)(!1),p=(0,i.Z)(g,2),x=p[0],Z=p[1],v=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()({method:"get",url:f+"/administrationms/salesPermission/getSalesPermission"});case 2:n=e.sent,t=n.data,h(t),j();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("line no 106"),e.next=3,c()({method:"get",url:f+"/administrationms/salesPermission/getResourcesAutoComplete"});case 3:n=e.sent,t=n.data,l(t),console.log("assigned data"),console.log(t),Z(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){}),[t]),(0,r.useEffect)((function(){v()}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne"}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"Sales Permissions"})}),(0,S.jsx)("div",{className:"childThree"})]})}),x&&(0,S.jsx)(_,{Data:m,issueDetails:t})]})}}}]);
//# sourceMappingURL=208.c59d6bfc.chunk.js.map