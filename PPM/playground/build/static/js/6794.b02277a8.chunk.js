"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6794],{96794:function(e,l,t){t.r(l),t.d(l,{default:function(){return B}});var s=t(37762),i=t(4942),n=t(1413),a=t(29439),o=t(72791),r=t(56355),c=t(1063),d=t(59513),u=t.n(d),m=(t(47477),t(68639),t(72426)),h=t.n(m),v=(t(36167),t(78983)),j=t(74569),x=t.n(j),f=t(34831),g=t(83854),p=t(93433),b=t(46175),N=t(37145),y=t(41310),R=t(53329),w=t(11167),M=t(7692),H=t(32125),I=t(11087),D=t(25103),S=t(87890),F=t(80184);function Z(e){var l,t,s,c,d,u,m,j,Z,A,T,_,G,C,B=e.linkId,k=(e.firstTableData,e.projectInfoTab),P=e.setUpdatedata,O=e.formData,Y=e.updateddata,E=e.setProjectinfoTab,V=e.setLoader,U=e.isMatchedId,z=e.isMatchedDMId,L=e.isMatchedFMId,X=e.setHidewholetables,Q=e.getGraph,K=e.getDataBsedGrpah,J=e.setAddmsg,$=e.setValidationMessage,W=e.storegrpahname,q=e.resourceInfo,ee=(e.setResourceInfo,e.billDetailsCount,e.reviewerAction,e.getResourceInfo),le=e.headerData,te=(0,o.useState)(!1),se=(0,a.Z)(te,2),ie=se[0],ne=se[1],ae=(0,o.useState)([]),oe=(0,a.Z)(ae,2),re=oe[0],ce=oe[1],de=(0,o.useState)(!1),ue=(0,a.Z)(de,2),me=ue[0],he=ue[1],ve=(0,o.useState)(r.NR5),je=(0,a.Z)(ve,2),xe=je[0],fe=je[1],ge=(0,o.useState)(r.NR5),pe=(0,a.Z)(ge,2),be=pe[0],Ne=pe[1],ye=f.N.baseUrl,Re=O.billingMonth,we=h()(Re).endOf("month").format("YYYY-MM-DD"),Me=localStorage.getItem("resId"),He=O.billingMonth,Ie=(new Date(He).toLocaleString("en-US",{month:"long",year:"numeric"}),(0,o.useState)(null!==(l=k[0])&&void 0!==l&&l.TotalProjectVal?k[0].TotalProjectVal:0)),De=(0,a.Z)(Ie,2),Se=De[0],Fe=De[1],Ze=(0,o.useState)(null!==(t=k[0])&&void 0!==t&&t.RevenueAccuredtillDate?k[0].RevenueAccuredtillDate:0),Ae=(0,a.Z)(Ze,2),Te=Ae[0],_e=Ae[1],Ge=(0,o.useState)(null!==(s=k[0])&&void 0!==s&&s.bal_amount?k[0].bal_amount:0),Ce=(0,a.Z)(Ge,2),Be=Ce[0],ke=Ce[1],Pe=(0,o.useState)(null!==(c=k[0])&&void 0!==c&&c.projectCompletion?k[0].projectCompletion:0),Oe=(0,a.Z)(Pe,2),Ye=Oe[0],Ee=Oe[1],Ve=(0,o.useState)(null!=(null===(d=k[0])||void 0===d?void 0:d.Billingamount)?k[0].Billingamount:0),Ue=(0,a.Z)(Ve,2),ze=Ue[0],Le=Ue[1],Xe=(0,o.useState)(null===(u=k[0])||void 0===u?void 0:u.Billingaction),Qe=(0,a.Z)(Xe,2),Ke=Qe[0],Je=Qe[1],$e=(0,o.useState)(1==(null===(m=k[0])||void 0===m?void 0:m.has_discount)?"Yes":"No"),We=(0,a.Z)($e,2),qe=We[0],el=We[1],ll=(0,o.useState)(null===(j=k[0])||void 0===j?void 0:j.discountType),tl=(0,a.Z)(ll,2),sl=tl[0],il=tl[1],nl=(0,o.useState)(null===(Z=k[0])||void 0===Z?void 0:Z.discountAmount),al=(0,a.Z)(nl,2),ol=al[0],rl=al[1];(0,o.useEffect)((function(){var e,l,t,s,i,n,a,o,r;Fe(null!==(e=k[0])&&void 0!==e&&e.TotalProjectVal?k[0].TotalProjectVal:0),_e(null!==(l=k[0])&&void 0!==l&&l.RevenueAccuredtillDate?k[0].RevenueAccuredtillDate:0),ke(null!==(t=k[0])&&void 0!==t&&t.bal_amount?k[0].bal_amount:0),Ee(null!==(s=k[0])&&void 0!==s&&s.projectCompletion?k[0].projectCompletion:0),Le(null!=(null===(i=k[0])||void 0===i?void 0:i.Billingamount)?k[0].Billingamount:0),Je(null===(n=k[0])||void 0===n?void 0:n.Billingaction),el(1==(null===(a=k[0])||void 0===a?void 0:a.has_discount)?"Yes":"No"),il(null===(o=k[0])||void 0===o?void 0:o.discountType),rl(null===(r=k[0])||void 0===r?void 0:r.discountAmount)}),[k]),(0,o.useEffect)((function(){if(0==ze&&"In PM Review"===W){var e=ul.reduce((function(e,l){return e+parseFloat(l.billTotHours*l.finalBillRate)}),0);"Amount"===sl?xl(e-("Yes"==qe?ol:0)):"Percentage"===sl&&bl(e*(100-("Yes"==qe?ol:0))/100),Le(e)}else"Amount"===sl?xl(ze-("Yes"==qe?ol:0)):"Percentage"===sl&&bl(ze*(100-("Yes"==qe?ol:0))/100)}),[ol,ze]);var cl=(0,o.useState)(q),dl=(0,a.Z)(cl,2),ul=dl[0],ml=dl[1],hl=(0,o.useState)(null===(A=k[0])||void 0===A?void 0:A.NetBiliingAmount),vl=(0,a.Z)(hl,2),jl=vl[0],xl=vl[1],fl=(0,o.useState)(null===(T=k[0])||void 0===T?void 0:T.NetBiliingAmount),gl=(0,a.Z)(fl,2),pl=gl[0],bl=gl[1],Nl={contains:{value:null,matchMode:S.a6.CONTAINS}},yl=(0,o.useState)({global:Nl.contains}),Rl=(0,a.Z)(yl,2),wl=Rl[0],Ml=Rl[1];(0,o.useEffect)((function(){Ml({global:Nl.contains})}),[le]);var Hl=(0,o.useState)(""),Il=(0,a.Z)(Hl,2),Dl=Il[0],Sl=Il[1],Fl=function(e){var l=e.target.value,t=(0,n.Z)({},wl);t.global.value=l,Ml(t),Sl(l)},Zl=(0,F.jsxs)("div",{className:"flex justify-content-between",children:[(0,F.jsx)("span",{}),(0,F.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,F.jsx)("i",{className:"pi pi-search"}),(0,F.jsx)(D.o,{defaultValue:Dl,onChange:Fl,placeholder:"Keyword Search",style:{textAlign:"center",verticalAlign:"middle"}})]})]}),Al=(0,o.useState)({}),Tl=(0,a.Z)(Al,2),_l=Tl[0],Gl=Tl[1];(0,o.useEffect)((function(){Gl(ul)}),[ul]),(0,o.useEffect)((function(){Gl(re),ml(re)}),[re]),(0,o.useEffect)((function(){ne(!1),he(!1),Ne(r.NR5),fe(r.NR5)}),[B]),(0,o.useEffect)((function(){ml(q)}),[q]);var Cl=function(e){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("input",{type:"text",id:"billOtHours",name:"billOtHours",defaultValue:e.billOtHours,title:e.billOtHours,onChange:function(l){!function(l,t,s){var i=l.target.value,a=parseFloat(e.billTotHours);if(""===i||isNaN(i)){var o=0-e.billOtHours+a,r=ul.map((function(l){return l.id===e.id?(0,n.Z)((0,n.Z)({},l),{},{billOtHours:i,billTotHours:o.toFixed(2)}):l}));ml(r)}else{var c=parseFloat(i)-e.billOtHours+a,d=ul.map((function(l){return l.id===e.id?(0,n.Z)((0,n.Z)({},l),{},{billOtHours:i,billTotHours:c.toFixed(2)}):l}));ml(d)}}(l)},disabled:(0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"==W))&&(0==z||!("In DM Review"==W||"Finance Rejected"==W)),onKeyPress:function(e){var l=e.keyCode||e.which,t=String.fromCharCode(l);/^[0-9]*$/.test(t)||e.preventDefault()}})})},Bl=function(e){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("input",{type:"text",id:"finalBillRate",name:"finalBillRate",value:e.finalBillRate,title:e.finalBillRate,onChange:function(l){var t=l.target,s=t.value,a=t.id;P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},a,s))}));var o=parseFloat(s),r=(isNaN(o),ul.map((function(l){return l.id===e.id?(0,n.Z)((0,n.Z)({},l),{},{finalBillRate:isNaN(o)?"":o,billAmount:o*e.billTotHours}):l})));ml(r)},disabled:!0,onKeyPress:function(e){var l=e.keyCode||e.which,t=String.fromCharCode(l);/^[0-9]*$/.test(t)||e.preventDefault()}})})},kl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.billTotHours,children:e.billTotHours})},Pl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.wrkOtHours,children:e.wrkOtHours})},Ol=function(e){var l="&#36"===e.currency?"$":"&#8377"===e.currency?"\u20b9":"\xa3",t=isNaN(parseFloat(e.billTotHours)*parseFloat(e.finalBillRate))?0:parseFloat(e.billTotHours)*parseFloat(e.finalBillRate);return(0,F.jsxs)("span",{children:[l,t.toFixed(2)]})};var Yl=function(e){var l="null"===e.comments?"":e.comments;return(0,F.jsx)("div",{className:(!1===U||"In PM Review"!==W&&"DM Rejected"!==W&&"Finance Rejected"!==W)&&(!1===z||"In DM Review"!==W&&"Finance Rejected"!==W)?"disabledFieldStyles":"",children:(0,F.jsx)("textarea",{className:"textarea",type:"text",id:"comments",name:"comments",title:l,defaultValue:l,rows:1,disabled:(!1===U||!("In PM Review"===W||"DM Rejected"===W||"Finance Rejected"===W))&&(!1===z||!("In DM Review"===W||"Finance Rejected"===W)),onChange:function(l){!function(e,l){var t=e.target.value,s=(0,p.Z)(q),i=s.findIndex((function(e){return e.id===l}));-1!==i&&(s[i].comments=t,ml(s))}(l,e.id)}})})},El=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.stdBillRate,children:e.stdBillRate})},Vl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.allocTypeName,children:e.allocTypeName})},Ul=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.roleName,children:e.roleName})},zl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.resource,children:e.resource})},Ll=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.allocHours,children:e.allocHours})},Xl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.leaveHours,children:e.leaveHours})},Ql=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.wrkStdHours,children:e.wrkStdHours})},Kl=function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.wrkApprvHours,children:e.wrkApprvHours})},Jl=function(e){return(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("input",{type:"text",title:e.wrkApprvHours,disabled:!0,value:e.wrkApprvHours})})},$l=function(e){var l=(e.wrkStdHours-e.billTotHours).toFixed(2);return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:l,children:l})};(0,o.useEffect)((function(){x().get(ye+"/timeandexpensesms/getProjectInfo?id=".concat(B)).then((function(e){for(var l=e.data,t=0;t<l.length;t++)l[t].has_discount=1==l[t].has_discount?1:0;E(l),setTimeout((function(){V(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)}))}),[B]);var Wl=(0,o.useRef)([]),ql=function(){ne(!ie),Ne(ie?r.NR5:r.UdN)},et=function(){he(!me),fe(me?r.NR5:r.UdN)},lt=function(e){var l=e.children,t=(0,o.useState)(!0),s=(0,a.Z)(t,2),i=s[0],n=s[1],r=l?i?l.slice(0,50):l:"";return(0,F.jsx)("p",{className:"col-md-12 text",children:r?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("div",{className:"form-group row",children:(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Comments History:"})}),(0,F.jsx)("br",{}),(0,F.jsx)("span",{dangerouslySetInnerHTML:{__html:null==r?"":r}}),(0,F.jsx)("br",{}),(0,F.jsx)("span",{onClick:function(){n(!i)},className:"read-or-hide",children:i?(0,F.jsx)("span",{className:"toggleStyle",style:{color:"#0096D7"},children:"Read More..."}):(0,F.jsxs)("span",{className:"toggleStyle",style:{color:"#0096D7"},children:["Hide ",(0,F.jsx)("i",{className:"fa fa-eye-slash","aria-hidden":"true"})]})})]}):(0,F.jsx)("div",{className:"form-group row",children:(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Comments History"})})})},tt=(0,o.useState)(!1),st=(0,a.Z)(tt,2),it=st[0],nt=st[1],at=(0,F.jsxs)(b.E,{children:[(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{header:"Resource Information",colSpan:4,style:{textAlign:"center"}}),(0,F.jsx)(w.sgG,{header:"Hours",colSpan:5}),(0,F.jsx)(w.sgG,{header:"Billing Hours",colSpan:3}),(0,F.jsx)(w.sgG,{header:"Billing Amount",colSpan:3}),(0,F.jsx)(w.sgG,{field:"roleSite",rowSpan:2,header:"Comment",body:Yl})]}),(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{field:"allocTypeName",header:"Allocation",body:Vl}),(0,F.jsx)(w.sgG,{field:"roleName",header:"Role",body:Ul}),(0,F.jsx)(w.sgG,{field:"resource",header:"Resource",body:zl}),(0,F.jsx)(w.sgG,{field:"stdBillRate",header:"Rate",body:El}),(0,F.jsx)(w.sgG,{field:"allocHours",header:"Allocated",body:Ll}),(0,F.jsx)(w.sgG,{field:"leaveHours",header:"Vacation",body:Xl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",header:"Actual",body:Ql}),(0,F.jsx)(w.sgG,{field:"wrkOtHours",header:"OT",body:Pl}),(0,F.jsx)(w.sgG,{field:"wrkApprvHours",header:"Approved",body:Kl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",header:"Actual",body:Jl}),(0,F.jsx)(w.sgG,{field:"billOtHours",header:"OT",body:Cl}),(0,F.jsx)(w.sgG,{field:"billTotHours",header:"Total",body:kl}),(0,F.jsx)(w.sgG,{header:"Unbilled",body:$l}),(0,F.jsx)(w.sgG,{field:"finalBillRate",header:"Rate",body:Bl}),(0,F.jsx)(w.sgG,{field:"billAmount",header:"Amount",body:Ol})]}),(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{colSpan:12}),(0,F.jsx)(w.sgG,{header:"Discount Amount :",colSpan:2}),"Amount"==sl?(0,F.jsx)(w.sgG,{header:null===(_=k[0])||void 0===_?void 0:_.discountAmount}):(0,F.jsx)(w.sgG,{header:null===(G=k[0])||void 0===G?void 0:G.discountAmount}),(0,F.jsx)(w.sgG,{})]}),(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{colSpan:12}),(0,F.jsx)(w.sgG,{header:"Net Billing Amount:",colSpan:2}),"Amount"==sl?(0,F.jsx)(w.sgG,{header:jl}):(0,F.jsx)(w.sgG,{header:pl}),(0,F.jsx)(w.sgG,{})]})]}),ot=(0,F.jsxs)(b.E,{children:[(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{header:"Resource Information",colSpan:4,style:{textAlign:"center"}}),(0,F.jsx)(w.sgG,{header:"Hours",colSpan:5}),(0,F.jsx)(w.sgG,{header:"Billing Hours",colSpan:3}),(0,F.jsx)(w.sgG,{header:"Billing Amount",colSpan:3}),(0,F.jsx)(w.sgG,{field:"comments",rowSpan:2,header:"Comments",body:Yl})]}),(0,F.jsxs)(y.X,{children:[(0,F.jsx)(w.sgG,{field:"allocTypeName",bosdy:Vl,header:"Allocation",style:{width:"200px"}}),(0,F.jsx)(w.sgG,{field:"roleName",header:"Role",body:Ul,style:{width:"200px"}}),(0,F.jsx)(w.sgG,{field:"resource",header:"Resource",bosy:zl,style:{width:"200px"}}),(0,F.jsx)(w.sgG,{field:"stdBillRate",header:"Rate",body:El}),(0,F.jsx)(w.sgG,{field:"allocHours",header:"Allocated",body:Ll}),(0,F.jsx)(w.sgG,{field:"leaveHours",header:"Vacation",body:Xl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",header:"Actual",body:Ql}),(0,F.jsx)(w.sgG,{field:"wrkOtHours",header:"OT",body:Pl}),(0,F.jsx)(w.sgG,{field:"wrkApprvHours",header:"Approved",body:Kl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",header:"Actual",body:Jl}),(0,F.jsx)(w.sgG,{field:"billOtHours",header:"OT",body:Cl}),(0,F.jsx)(w.sgG,{field:"billTotHours",header:"Total",body:kl}),(0,F.jsx)(w.sgG,{header:"Unbilled",body:$l}),(0,F.jsx)(w.sgG,{field:"finalBillRate",header:"Rate",body:Bl}),(0,F.jsx)(w.sgG,{field:"billAmount",header:"Amount",body:Ol})]})]});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{children:[0==U||"In PM Review"!=W&&"DM Rejected"!=W?"":(0,F.jsxs)("div",{onClick:function(){var e,l;x()({method:"post",url:ye+"/timeandexpensesms/projectBilling",data:{billId:B,isActive:1,isAdmin:!!["104335943","1798"].includes(Me),billMon:Re,isRefresh:0,isDirty:!1,usrId:Me},headers:{"Content-Type":"application/json"}}).then((function(e){C=e.data.PpmBillingTsDtl;for(var l=0;l<C.length;l++)C[l].stdBillRate=null==C[l].stdBillRate?"":C[l].stdBillRate.toFixed(2),C[l].allocHours=null==C[l].allocHours?"":C[l].allocHours.toFixed(2),C[l].leaveHours=null==C[l].leaveHours?"":C[l].leaveHours.toFixed(2),C[l].wrkStdHours=null==C[l].wrkStdHours?"":C[l].wrkStdHours.toFixed(2),C[l].wrkOtHours=null==C[l].wrkOtHours?"":C[l].wrkOtHours.toFixed(2),C[l].wrkApprvHours=null==C[l].wrkApprvHours?"":C[l].wrkApprvHours.toFixed(2),C[l].billTotHours=null==C[l].billTotHours?"":C[l].billTotHours.toFixed(2),C[l].finalBillRate=null==C[l].finalBillRate?"":C[l].finalBillRate.toFixed(2),C[l].billAmount=null==C[l].billAmount?"":C[l].billAmount.toFixed(2),C[l].billOtHours=null==C[l].billOtHours?"":C[l].billOtHours.toFixed(2);ce(C)})).catch((function(e){console.log("Error :"+e)})),nt(!0),setTimeout((function(){nt(!1)}),1e3);Number(Y.discount_amount),Number(Y.billAmount),1==(null===(e=k[0])||void 0===e?void 0:e.has_discount)||null===(l=k[0])||void 0===l||l.has_discount;var t=[],s=[];Object.keys(_l).forEach((function(e){"bill_action"!=e&&(s={id:_l[e].id?_l[e].id:0,resourceId:_l[e].resourceId?_l[e].resourceId:0,billingTsId:_l[e].billingTsId,projectRoleId:_l[e].projectRoleId,projectRoleRateId:_l[e].projectRoleRateId,roleName:_l[e].roleName,resource:_l[e].resource,allocType:_l[e].allocType?_l[e].allocType:0,allocTypeName:_l[e].allocTypeName,allocHours:_l[e].allocHours,wrkStdHours:_l[e].wrkStdHours,wrkOtHours:_l[e].wrkOtHours,leaveHours:_l[e].leaveHours,wrkApprvHours:_l[e].wrkApprvHours,stdBillRate:_l[e].stdBillRate,billStdHours:_l[e].billStdHours,billOtHours:_l[e].billOtHours,billTotHours:_l[e].billStdHours+parseInt(_l[e].billOtHours,10),unbillHours:0==_l[e].billOtHours||""==_l[e].billOtHours?0:-_l[e].billOtHours,finalBillRate:_l[e].finalBillRate,billAmount:_l[e].billTotHours*_l[e].finalBillRate,roleSite:_l[e].roleSite,comments:_l[e].comments,isDirty:_l[e].isDirty?"1":"0",currency:_l[e].currency}),Object.values(s).every((function(e,l){return null===e||void 0===e||""===e}))||t.push(s)}))},style:{float:"right",color:"#15a7ea",textDecoration:"underline",cursor:"pointer"},children:[(0,F.jsx)("span",{className:"col-6",style:{textDecoration:"underline",cursor:"pointer",color:"black"},children:(0,F.jsx)(M.t5J,{style:{fontSize:"20px"}})}),"Refresh Data"]}),(0,F.jsx)("div",{className:"group mb-1 customCard",children:(0,F.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,F.jsx)("h2",{children:(0,F.jsx)(I.rU,{onClick:function(){return ql()},children:"Resource Information"})}),(0,F.jsx)("div",{onClick:function(){return ql()},children:(0,F.jsx)("span",{className:"chevron-icon",children:be})})]})}),(0,F.jsxs)(v.V9,{visible:ie,children:[it?(0,F.jsx)(g.Z,{}):"",(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"group mb-3 customCard darkHeader",children:"Yes"==qe?(0,F.jsxs)(N.w,{className:"primeReactDataTable invoicingSearchTable",value:ul,paginator:!0,rows:10,showGridlines:!0,headerColumnGroup:at,filters:wl,header:Zl,children:[(0,F.jsx)(w.sgG,{field:"allocTypeName",body:Vl,style:{width:"200px"}}),(0,F.jsx)(w.sgG,{field:"roleName",body:Ul}),(0,F.jsx)(w.sgG,{field:"resource",body:zl}),(0,F.jsx)(w.sgG,{field:"stdBillRate",body:El}),(0,F.jsx)(w.sgG,{field:"allocHours",body:Ll}),(0,F.jsx)(w.sgG,{field:"leaveHours",body:Xl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",body:Ql}),(0,F.jsx)(w.sgG,{field:"wrkOtHours",body:Pl}),(0,F.jsx)(w.sgG,{field:"wrkApprvHours",body:Kl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",body:Jl}),(0,F.jsx)(w.sgG,{field:"billOtHours",body:Cl}),(0,F.jsx)(w.sgG,{field:"billTotHours",body:kl}),(0,F.jsx)(w.sgG,{body:$l}),(0,F.jsx)(w.sgG,{field:"finalBillRate",body:Bl}),(0,F.jsx)(w.sgG,{field:"billAmount",body:Ol}),(0,F.jsx)(w.sgG,{field:"comments",body:Yl})]}):(0,F.jsxs)(N.w,{className:"primeReactDataTable invoicingSearchTable",value:ul,paginator:!0,rows:10,showGridlines:!0,headerColumnGroup:ot,filters:wl,header:Zl,children:[(0,F.jsx)(w.sgG,{field:"allocTypeName",body:Vl}),(0,F.jsx)(w.sgG,{field:"roleName",body:Ul}),(0,F.jsx)(w.sgG,{field:"resource",body:zl}),(0,F.jsx)(w.sgG,{field:"stdBillRate",body:El}),(0,F.jsx)(w.sgG,{field:"allocHours",body:Ll}),(0,F.jsx)(w.sgG,{field:"leaveHours",body:Xl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",body:Ql}),(0,F.jsx)(w.sgG,{field:"wrkOtHours",body:Pl}),(0,F.jsx)(w.sgG,{field:"wrkApprvHours",body:Kl}),(0,F.jsx)(w.sgG,{field:"wrkStdHours",body:Jl}),(0,F.jsx)(w.sgG,{field:"billOtHours",body:Cl}),(0,F.jsx)(w.sgG,{field:"billTotHours",body:kl}),(0,F.jsx)(w.sgG,{body:$l}),(0,F.jsx)(w.sgG,{field:"finalBillRate",body:Bl}),(0,F.jsx)(w.sgG,{field:"billAmount",body:Ol}),(0,F.jsx)(w.sgG,{field:"comments",body:Yl})]})})})]})]}),(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:"group mb-1 customCard",children:(0,F.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,F.jsx)("h2",{children:(0,F.jsx)(I.rU,{onClick:function(){return et()},children:"Financial Information"})}),(0,F.jsx)("div",{onClick:function(){return et()},children:(0,F.jsx)("span",{className:"chevron-icon",children:xe})})]})}),(0,F.jsx)(v.V9,{visible:me,children:(0,F.jsx)("div",{children:(0,F.jsx)("div",{className:"group-content row mx-2",children:(0,F.jsx)("div",{className:" col-md-12 mb-2",children:k.map((function(e){return(0,F.jsxs)("div",{className:"group-content row",children:[(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Total Project Value"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"total_project_value",name:"total_project_value",onChange:function(e){var l=e.target,t=l.value,s=l.id;Fe(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W),value:Se})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Revenue Accured Till Date"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"revenue_accured",name:"revenue_accured",onChange:function(e){var l=e.target,t=l.value,s=l.id;_e(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W),value:Te})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Remaining Budget"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"remaining_budget",name:"remaining_budget",onChange:function(e){var l=e.target,t=l.value,s=l.id;ke(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W),value:Be})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Project Completion (%)"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"project_completion",name:"project_completion",onChange:function(e){var l=e.target,t=l.value,s=l.id;Ee(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W),value:Ye})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Billing Amount"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"billing_amount",name:"billing_amount",onChange:function(e){var l=e.target,t=l.value,s=l.id;Le(""===t?0:t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W),value:ze})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"duration",children:"Billing Action \xa0"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{ref:function(e){Wl.current[0]=e},className:"text cancel",id:"bill_action",onChange:function(e){var l=e.target,t=l.value,s=l.id;Je(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},value:Ke,disabled:(0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W))&&(0==z||!("In DM Review"==W||"Finance Rejected"==W)),children:[(0,F.jsxs)("option",{value:"",children:[" ","<<Please Select>>"]}),(0,F.jsx)("option",{value:"Bill To Customer",children:"Bill To Customer"}),(0,F.jsx)("option",{value:"Accure Only",children:"Accure Only"})]})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Apply Discounts"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"has_discount",name:"has_discount",onChange:function(e){var l=e.target,t=l.value,s=l.id;el(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},value:qe,disabled:(0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W))&&(0==z||!("In DM Review"==W||"Finance Rejected"==W)),children:[(0,F.jsx)("option",{value:"No",children:"No"}),(0,F.jsx)("option",{value:"Yes",children:"Yes"})]})})]})}),(0,F.jsx)("div",{className:"col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Discounts Type"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"discount_type",onChange:function(e){var l=e.target,t=l.value,s=l.id;il(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},value:sl,disabled:(0==U||"In PM Review"!=W&&"DM Rejected"!=W&&"Finance Rejected"!==W)&&(0==z||"In DM Review"!=W&&"Finance Rejected"!=W)||!("Yes"===qe),children:[(0,F.jsx)("option",{value:"null",children:"<<Please Select>>"}),(0,F.jsx)("option",{value:"Percentage",children:"Percentage"}),(0,F.jsx)("option",{value:"Amount",children:"Amount"})]})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Discount Amount"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("input",{type:"text",id:"discount_amount",name:"discount_amount",onChange:function(e){var l=e.target,t=l.value,s=l.id;rl(t),P((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),Gl((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))}))},disabled:(0==U||"In PM Review"!=W&&"DM Rejected"!=W&&"Finance Rejected"!==W)&&(0==z||"In DM Review"!=W&&"Finance Rejected"!=W)||(!("Amount"===sl||"Percentage"===sl)||"No"===qe),value:ol})})]})}),(0,F.jsx)("div",{className:"form-group row",children:(0,F.jsx)("div",{className:"col-md-12",children:(0,F.jsx)(lt,{children:"null"===k[0].comments||null===k[0].comments||""===k[0].comments?"":k[0].comments})})}),(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Comments"}),(0,F.jsx)("div",{className:0!=U&&("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W)||0!=z&&("In DM Review"==W||"Finance Rejected"==W)||0!=L&&"In Finance Review"==W?"":"disabledFieldStyles",children:(0,F.jsx)("textarea",{className:"textarea",type:"text",name:"comments",id:"comments",style:{position:"relative",minHeight:"40px"},onChange:function(e){return function(e){var l=e.target,t=l.value;l.id,k(1==L&&"In Finance Review"==W?function(e){return(0,n.Z)((0,n.Z)({},e),{},{fin_comments:t})}:function(e){return(0,n.Z)((0,n.Z)({},e),{},{comments:t})})}(e)},disabled:(0==U||!("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"===W))&&(0==z||!("In DM Review"==W||"Finance Rejected"==W))&&(0==L||!("In Finance Review"==W))})})]})]})}))})})})}),0!=U&&("In PM Review"==W||"DM Rejected"==W||"Finance Rejected"==W)||0!=z&&("In DM Review"==W||"Finance Rejected"==W||"Finance Rejected"==W)||0!=L&&"In Finance Review"==W?(0,F.jsx)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:(0,F.jsxs)("button",{className:"btn btn-primary ",onClick:function(){var e,l,t,s,i,n,a,o,c,d,u,m,h;window.scrollTo({top:0,behavior:"smooth"});var v=(0,H.Z)(Wl);if(1==U&&"In DM Review"==(null===(e=k[0])||void 0===e?void 0:e.status)&&v)return fe(r.UdN),he(!0),$(!0),void setTimeout((function(){$(!1)}),3e3);V(!1),X(!1);Number(Y.discount_amount),Number(Y.billingAmount);var j=1==(null===(l=k[0])||void 0===l?void 0:l.has_discount)||1==(null===(t=k[0])||void 0===t?void 0:t.has_discount)?1:0;console.log(_l),console.log("Amount"===sl?jl:"Percentage"===sl?pl:ze);var f=[],g=[];Object.keys(_l).forEach((function(e){"bill_action"!=e&&(g={id:_l[e].id?_l[e].id:0,resourceId:_l[e].resourceId?_l[e].resourceId:0,billingTsId:_l[e].billingTsId,projectRoleId:_l[e].projectRoleId,projectRoleRateId:_l[e].projectRoleRateId,roleName:_l[e].roleName,resource:_l[e].resource,allocType:_l[e].allocType?_l[e].allocType:0,allocTypeName:_l[e].allocTypeName,allocHours:_l[e].allocHours,wrkStdHours:_l[e].wrkStdHours,wrkOtHours:_l[e].wrkOtHours,leaveHours:_l[e].leaveHours,wrkApprvHours:_l[e].wrkApprvHours,stdBillRate:_l[e].stdBillRate,billStdHours:_l[e].billStdHours,billOtHours:_l[e].billOtHours,billTotHours:_l[e].billStdHours+parseInt(_l[e].billOtHours,10),unbillHours:0==_l[e].billOtHours||""==_l[e].billOtHours?0:-_l[e].billOtHours,finalBillRate:_l[e].finalBillRate,billAmount:_l[e].billTotHours*_l[e].finalBillRate,roleSite:_l[e].roleSite,comments:_l[e].comments,isDirty:_l[e].isDirty?"1":"0",currency:_l[e].currency}),Object.values(g).every((function(e,l){return console.log(e),null===e||void 0===e||""===e||0===e}))||f.push(g)})),x()({method:"post",url:ye+"/timeandexpensesms/saveBillingDetails",data:{id:null===(s=k[0])||void 0===s?void 0:s.id,projectId:null===(i=k[0])||void 0===i?void 0:i.projectId,billingScheduleId:null===(n=k[0])||void 0===n?void 0:n.billing_schedule_id,status:""==Y.status?null===(a=k[0])||void 0===a?void 0:a.status:Y.status,fromDate:O.billingMonth,toDate:O.billingMonth?we:"",billAction:""==Y.bill_action?null===(o=k[0])||void 0===o?void 0:o.Billingaction:Y.bill_action,billingAmount:parseInt(ze)?parseInt(ze):0,hasDiscount:""==Y.has_discount?j:"Yes"==Y.has_discount?1:0,discountType:"Yes"==qe?sl:null,discountAmount:"Yes"==qe?"Amount"===sl?ol:"Percentage"===sl?ze-pl:0:0,net_billAmount:"Amount"===sl?jl:"Percentage"===sl?pl:ze,invoiceAmount:null===(c=k[0])||void 0===c?void 0:c.invoice_amount,createdOn:new Date,comments:null===(d=k[0])||void 0===d?void 0:d.comments,history:null===(u=k[0])||void 0===u?void 0:u.history,pctComplete:null==Ye?0:Ye,finComments:null===(m=k[0])||void 0===m?void 0:m.fin_comments,accAmount:null==Te?0:Te,balAmount:null==Be?0:Be,totPrjVal:null==Se?0:Se,billingMonth:O.billingMonth,customerId:""==O.customerId?Me:O.customerId,billMonth:O.billingMonth,mgrIds:Me,billingTsDtls:f,refreshDate:null===(h=k[0])||void 0===h?void 0:h.refreshDate}}).then((function(e){Q(),K(e.data,W),ee(),J(!0),$(!1),setTimeout((function(){J(!1),V(!1)}),3e3)}))},children:[(0,F.jsx)(R.Z,{}),"Save"]})}):""]})]})}function A(e){var l=e.firstTableData,t=e.PMReview,r=e.setProjectinfoTab,c=e.projectInfoTab,d=e.linkId,u=e.formData,m=e.DMReview,v=e.storegrpahname,j=e.setLoader,x=e.FMReview,f=e.getGraph,g=e.getDataBsedGrpah,b=e.setAddmsg,N=e.setValidationMessage,y=e.resourceInfo,R=e.setResourceInfo,w=e.billDetailsCount,M=e.reviewerAction,H=e.getResourceInfo,I=e.projectInfo,D=e.headerData;console.log(I);var S=u.billingMonth,A=(h()(S).endOf("month").format("YYYY-MM-DD"),(0,i.Z)({id:d,project_id:d,billing_schedule_id:"",status:"",bill_action:"",billing_amount:"",has_discount:"",discount_type:"",allocFte:0,discount_amount:"",comments:"",from_date:"",to_date:"",billing_month:"",billing_ts_id:"",resourceId:"",allocType:187,billOtHours:"",finalBillRate:"",billAmount:""},"comments","")),T=(0,o.useState)(A),_=(0,a.Z)(T,2),G=_[0],C=_[1];function B(e){var l=e.target,t=l.value,s=l.id;C((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},s,t))})),r((function(e){var l=(0,p.Z)(e);return l[0].status=t,l}))}var k,P=localStorage.getItem("resId"),O=(0,o.useState)(!0),Y=(0,a.Z)(O,2),E=(Y[0],Y[1]),V=(0,o.useState)(!1),U=(0,a.Z)(V,2),z=U[0],L=U[1],X=!1,Q=(0,s.Z)(t);try{for(Q.s();!(k=Q.n()).done;){if(k.value.prgMgrId.split(",").includes(P.toString())){X=!0;break}}}catch(oe){Q.e(oe)}finally{Q.f()}(0,o.useEffect)((function(){L(X)}),[X]);var K,J=(0,o.useState)(!1),$=(0,a.Z)(J,2),W=$[0],q=$[1],ee=!1,le=(0,s.Z)(m);try{for(le.s();!(K=le.n()).done;){var te=K.value;if(te.deliveryMgrId&&te.deliveryMgrId===P.toString()){ee=!0;break}}}catch(oe){le.e(oe)}finally{le.f()}(0,o.useEffect)((function(){q(ee)}),[ee]);var se=(0,o.useState)(!1),ie=(0,a.Z)(se,2),ne=ie[0],ae=ie[1];return(0,o.useEffect)((function(){x.some((function(e){return 126===e.role_type_id}))?x.some((function(e){return[82,157,158].includes(e.role_type_id)}))?ae(!1):ae(!0):ae(!1)}),[]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"customCard card graph mt-2 mb-2 darkHeader",children:[(0,F.jsx)("div",{className:"group mb-1 customCard",children:(0,F.jsx)("div",{className:"col-md-12  collapseHeader px-3",style:{backgroundColor:"#f4f4f4"},children:(0,F.jsx)("h2",{style:{backgroundColor:"#f4f4f4"},children:"Project Information"})})}),(0,F.jsx)("div",{className:"group-content row mx-2",children:(0,F.jsx)("div",{className:" col-md-12 mb-2",children:c.map((function(e){var l,t,s,i,n,a,o,r,d,u;return(0,F.jsxs)("div",{className:"group-content row",children:[(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Project"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.project,children:null==e.project?"NA":e.project})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2 ",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Practice"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:null===(l=I[0])||void 0===l?void 0:l.practiceName,children:null==(null===(t=I[0])||void 0===t?void 0:t.practiceName)?"NA":null===(s=I[0])||void 0===s?void 0:s.practiceName})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Planned Dates"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.planned_dates,children:null==e.planned_dates?"NA":e.planned_dates})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Is Billable"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.is_billable,children:null==e.is_billable?"NA":e.is_billable})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Primary PM"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.primary_manager,children:[null==e.primary_manager?"NA":e.primary_manager," "]})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Customer"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.customer,children:[null==e.customer?"NA":e.customer,""]})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Contract Terms:"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.contract_terms,children:null==e.contract_terms?"NA":e.contract_terms})})]})}),(0,F.jsx)("div",{className:" col-md-4 mb-2",children:"In DM Review"==v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(i=c[0])||void 0===i?void 0:i.status,disabled:0==W,children:[(0,F.jsx)("option",{value:"In DM Review",children:"In DM Review"}),(0,F.jsx)("option",{value:"DM Rejected",children:"DM Rejected"}),(0,F.jsx)("option",{value:"In Finance Review",children:"In Finance Review"})]})})]}):"DM Rejected"==v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(n=c[0])||void 0===n?void 0:n.status,disabled:0==z,children:[(0,F.jsx)("option",{value:"In DM Review",children:"In DM Review"}),(0,F.jsx)("option",{value:"DM Rejected",children:"DM Rejected"})]})})]}):"In PM Review"===v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(a=c[0])||void 0===a?void 0:a.status,disabled:0==z,children:[(0,F.jsx)("option",{value:"In PM Review",children:"In PM Review"}),(0,F.jsx)("option",{value:"In DM Review",children:"In DM Review"})]})})]}):"In Finance Review"===v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(o=c[0])||void 0===o?void 0:o.status,disabled:0==ne,children:[(0,F.jsx)("option",{value:"In Finance Review",children:"In Finance Review"}),(0,F.jsx)("option",{value:"Finance Rejected",children:"Finance Rejected"}),(0,F.jsx)("option",{value:"Finance Accepted",children:"Finance Accepted"})]})})]}):"Finance Accepted"===v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(r=c[0])||void 0===r?void 0:r.status,disabled:!0,children:[(0,F.jsx)("option",{value:"In Finance Review",children:"In Finance Review"}),(0,F.jsx)("option",{value:"Finance Rejected",children:"Finance Rejected"}),(0,F.jsx)("option",{value:"Finance Accepted",children:"Finance Accepted"})]})})]}):"Finance Rejected"===v?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(d=c[0])||void 0===d?void 0:d.status,disabled:!(1==W||1==z),children:[(0,F.jsx)("option",{value:"In Finance Review",children:"In Finance Review"}),(0,F.jsx)("option",{value:"Finance Rejected",children:"Finance Rejected"})]})})]}):!1===ne?(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsx)("label",{className:"col-5",htmlFor:"text-input-inline",children:"Status"}),(0,F.jsx)("span",{className:"col-1",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{id:"status",onChange:function(e){return B(e)},value:null===(u=c[0])||void 0===u?void 0:u.status,disabled:!0,children:[(0,F.jsx)("option",{value:"In Finance Review",children:"In Finance Review"}),(0,F.jsx)("option",{value:"Finance Rejected",children:"Finance Rejected"}),(0,F.jsx)("option",{value:"Finance Accepted",children:"Finance Accepted"})]})})]}):null})]})}))})})]}),(0,F.jsx)(Z,{linkId:d,firstTableData:l,projectInfoTab:c,setUpdatedata:C,formData:u,updateddata:G,setProjectinfoTab:r,setLoader:j,setHidewholetables:E,isMatchedId:z,isMatchedDMId:W,isMatchedFMId:ne,getGraph:f,getDataBsedGrpah:g,setAddmsg:b,setValidationMessage:N,storegrpahname:v,resourceInfo:y,setResourceInfo:R,billDetailsCount:w,reviewerAction:M,getResourceInfo:H,headerData:D})]})}function T(e){e.data;var l,t,s,i,r=e.storeFirstTab,d=(e.setStorefirstTab,e.formData),u=e.storegrpahname,m=(e.firstTabledata,e.showtable,e.visibleTable),v=(e.setVisibleTable,e.firstTableData),j=e.setFirstTableData,p=e.showSecTable,R=e.setShowSecTable,w=e.getGraph,M=e.getDataBsedGrpah,H=e.PMReview,Z=e.setPMReview,T=e.DMReview,_=e.setDMReview,G=e.FMReview,C=e.setFMReview,B=e.EMReview,k=e.isSQA,P=e.isDM,O=e.setAddmsg,Y=e.setValidationMessage,E=f.N.baseUrl,V=localStorage.getItem("resId"),U=new Date(r.billingMonth),z=new Date,L=(0,o.useState)(new Date(z.getFullYear(),z.getMonth(),1)),X=(0,a.Z)(L,2),Q=X[0],K=(X[1],h()(Q).format("yyyy-MM-DD")),J=new Date(U.getFullYear(),U.getMonth()+1,0),$=h()(J).format("yyyy-MM-DD"),W=(0,o.useState)([]),q=(0,a.Z)(W,2),ee=q[0],le=q[1],te=(0,o.useState)([]),se=(0,a.Z)(te,2),ie=se[0],ne=se[1],ae=(0,o.useState)([]),oe=(0,a.Z)(ae,2),re=(oe[0],oe[1]),ce=(0,o.useState)([]),de=(0,a.Z)(ce,2),ue=de[0],me=de[1],he=(0,o.useState)(!1),ve=(0,a.Z)(he,2),je=ve[0],xe=ve[1],fe=d.billingMonth,ge=h()(fe).endOf("month").format("YYYY-MM-DD"),pe=(0,o.useState)([]),be=(0,a.Z)(pe,2),Ne=be[0],ye=be[1],Re=(0,o.useState)([]),we=(0,a.Z)(Re,2),Me=we[0],He=we[1],Ie=function(){x()({method:"post",url:E+"/timeandexpensesms/projectBilling",data:{billId:ee,isActive:1,isAdmin:!!["104335943","1798"].includes(V),billMon:fe,isRefresh:0,isDirty:!1,usrId:V},headers:{"Content-Type":"application/json"}}).then((function(e){t=e.data.PpmBillingTsDtl,He(e.data.tsInfo),s=e.data.BillDtlCnt,i=e.data.reviewerAction;for(var l=0;l<t.length;l++)t[l].stdBillRate=null==t[l].stdBillRate?"":t[l].stdBillRate.toFixed(2),t[l].allocHours=null==t[l].allocHours?"":t[l].allocHours.toFixed(2),t[l].leaveHours=null==t[l].leaveHours?"":t[l].leaveHours.toFixed(2),t[l].wrkStdHours=null==t[l].wrkStdHours?"":t[l].wrkStdHours.toFixed(2),t[l].wrkOtHours=null==t[l].wrkOtHours?"":t[l].wrkOtHours.toFixed(2),t[l].wrkApprvHours=null==t[l].wrkApprvHours?"":t[l].wrkApprvHours.toFixed(2),t[l].billTotHours=null==t[l].billTotHours?"":t[l].billTotHours.toFixed(2),t[l].finalBillRate=null==t[l].finalBillRate?"":t[l].finalBillRate.toFixed(2),t[l].billAmount=null==t[l].billAmount?"":t[l].billAmount.toFixed(2),t[l].billOtHours=null==t[l].billOtHours?"":t[l].billOtHours.toFixed(2);ye(t)})).catch((function(e){console.log("Error :"+e)}))},De=function(){var e,l;x()({method:"post",url:E+"/timeandexpensesms/getFirstTable",data:{tsId:0,isSQA:!["104335943","1798"].includes(V)&&919!=(null===(e=B[0])||void 0===e?void 0:e.role_type_id)&&k,status:u,tsName:"",customerId:void 0==d.customerId||""==d.customerId||"null"==d.customerId?0:d.customerId,term:"monthly",startDate:d.billingMonth?d.billingMonth:K,endDate:d.billingMonth?ge:$,billMonth:d.billingMonth?d.billingMonth:K,isDM:P,isAdmin:!(!["104335943","1798"].includes(V)&&919!=(null===(l=B[0])||void 0===l?void 0:l.role_type_id)),loggedId:V},headers:{"Content-Type":"application/json"}}).then((function(e){for(var l=e.data,t=0;t<l.length;t++){l[t].is_dirty=null==l[t].is_dirty?"No":h()(l[t].is_dirty).format("DD-MMM-YYYY"),l[t].refreshDate=null==l[t].refreshDate?"NA":h()(l[t].refreshDate).format("DD-MMM-YYYY");var s=l[t].billingPeriod;if(s){var i=s.split(" to "),n=(0,a.Z)(i,2),o=n[0],r=n[1],c=h()(o).format("DD-MMM-YY"),d=h()(r).format("DD-MMM-YY");l[t].billingPeriod="".concat(c," to ").concat(d)}}ne(["projectName","billingTsId"]),re([""]),j(l),setTimeout((function(){xe(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)}))},Se=(0,o.useRef)(null),Fe=(0,o.useState)([]),Ze=(0,a.Z)(Fe,2),Ae=Ze[0],Te=Ze[1],_e=function(){x().get(E+"/timeandexpensesms/getProjectInfo?id=".concat(ee)).then((function(e){var l=e.data;Te(l),setTimeout((function(){xe(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)}))},Ge=function(){var e;x().get(E+"/timeandexpensesms/getPMid?id=".concat(null===(e=Ae[0])||void 0===e?void 0:e.projectId)).then((function(e){var l=e.data;Z(l)})).catch((function(e){console.log("Error :"+e)}))},Ce=function(){var e;x().get(E+"/timeandexpensesms/getDMid?id=".concat(null===(e=Ae[0])||void 0===e?void 0:e.projectId)).then((function(e){var l=e.data;_(l)})).catch((function(e){console.log("Error :"+e)}))},Be=function(){x().get(E+"/timeandexpensesms/getFMid?id=".concat(V)).then((function(e){var l=e.data;C(l)})).catch((function(e){console.log("Error :"+e)}))};(0,o.useEffect)((function(){v[0]&&me(JSON.parse(JSON.stringify(v[0])))}),[v]);var ke={contains:{value:null,matchMode:S.a6.CONTAINS}},Pe=(0,o.useState)({global:ke.contains}),Oe=(0,a.Z)(Pe,2),Ye=Oe[0],Ee=Oe[1];(0,o.useEffect)((function(){Ee({global:ke.contains})}),[ue]);var Ve=(0,o.useState)(""),Ue=(0,a.Z)(Ve,2),ze=Ue[0],Le=Ue[1],Xe=function(e){var l=e.target.value,t=(0,n.Z)({},Ye);t.global.value=l,Ee(t),Le(l)},Qe=(0,F.jsxs)("div",{className:"flex justify-content-between",children:[(0,F.jsx)("span",{}),(0,F.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,F.jsx)("i",{className:"pi pi-search"}),(0,F.jsx)(D.o,{defaultValue:ze,onChange:Xe,placeholder:"Keyword Search",style:{textAlign:"center",verticalAlign:"middle"}})]})]}),Ke=ie[0];v[Ke];(0,o.useEffect)((function(){De(),_e(),Ie(),Ge(),Ce(),Be()}),[ee]),(0,o.useEffect)((function(){_e(),Ie(),Ge(),Ce(),Be()}),[null===(l=Ae[0])||void 0===l?void 0:l.projectId]);var Je=(0,F.jsxs)(b.E,{children:[(0,F.jsxs)(y.X,{children:[(0,F.jsx)(c.s,{header:"Customer",style:{textAlign:"center"}}),(0,F.jsx)(c.s,{header:"Projects",style:{textAlign:"center"}}),(0,F.jsx)(c.s,{header:"Status",style:{textAlign:"center"}}),(0,F.jsx)(c.s,{header:"Billing Period",style:{textAlign:"center"}}),(0,F.jsx)(c.s,{colSpan:5,header:"Hours"}),(0,F.jsx)(c.s,{colSpan:3,header:"Billing Hours"}),(0,F.jsx)(c.s,{colSpan:4,header:"Billing Amount"}),(0,F.jsx)(c.s,{header:"Is Data Modified"}),(0,F.jsx)(c.s,{header:"Refresh Date"})]}),(0,F.jsxs)(y.X,{children:[(0,F.jsx)(c.s,{}),(0,F.jsx)(c.s,{}),(0,F.jsx)(c.s,{}),(0,F.jsx)(c.s,{}),(0,F.jsx)(c.s,{header:"Allocated"}),(0,F.jsx)(c.s,{header:"Vocation"}),(0,F.jsx)(c.s,{header:"Actual"}),(0,F.jsx)(c.s,{header:"OT"}),(0,F.jsx)(c.s,{header:"Approved"}),(0,F.jsx)(c.s,{header:"Actual"}),(0,F.jsx)(c.s,{header:"OT"}),(0,F.jsx)(c.s,{header:"Total"}),(0,F.jsx)(c.s,{header:"Unbilled"}),(0,F.jsx)(c.s,{header:"Amount"}),(0,F.jsx)(c.s,{header:"Discount Amount"}),(0,F.jsx)(c.s,{header:"Net Amount"}),(0,F.jsx)(c.s,{}),(0,F.jsx)(c.s,{})]})]});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("div",{className:"group mb-3 customCard",children:[(0,F.jsx)("div",{className:"col-md-12 collapseHeader",children:(0,F.jsxs)("h2",{children:["In PM Review"==u||"In DM Review"==u||"In Finance Review"==u?u.slice(3):u," ","Projects"]})}),(0,F.jsx)("div",{className:"darkHeader",children:m&&(0,F.jsxs)(N.w,{className:"primeReactDataTable invoicingSearchTable",value:v,paginator:!0,rows:20,showGridlines:!0,headerColumnGroup:Je,filters:Ye,header:Qe,children:[(0,F.jsx)(c.s,{field:"customerName",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.customerName,children:e.customerName})}}),(0,F.jsx)(c.s,{field:"projectName",body:function(e){var l=e.billingTsId;return(0,F.jsx)(I.rU,{title:e.projectName,onClick:function(e){return t=l,De(),R(!0),le(t),xe(!1),_e(),Ge(),Ce(),void Be();var t},children:e.projectName})}}),(0,F.jsx)(c.s,{field:"status",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.status,children:e.status})}}),(0,F.jsx)(c.s,{field:"billingPeriod",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.billingPeriod,children:e.billingPeriod})}}),(0,F.jsx)(c.s,{field:"allocatedHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.allocatedHrs,children:e.allocatedHrs})}}),(0,F.jsx)(c.s,{field:"vacationHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.vacationHrs,children:e.vacationHrs})}}),(0,F.jsx)(c.s,{field:"actualHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.actualHrs,children:e.actualHrs})}}),(0,F.jsx)(c.s,{field:"otHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.otHrs,children:e.otHrs})}}),(0,F.jsx)(c.s,{field:"approvedHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.approvedHrs,children:e.approvedHrs})}}),(0,F.jsx)(c.s,{field:"actualBillHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.actualBillHrs,children:e.actualBillHrs})}}),(0,F.jsx)(c.s,{field:"otBillHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.otBillHrs,children:e.otBillHrs})}}),(0,F.jsx)(c.s,{field:"totalBillHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.actualBillHrs+e.otBillHrs,children:e.actualBillHrs+e.otBillHrs})}}),(0,F.jsx)(c.s,{field:"unbillHrs",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.unbillHrs,children:e.unbillHrs})}}),(0,F.jsx)(c.s,{field:"billingAmount",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.billingAmount,children:e.billingAmount})}}),(0,F.jsx)(c.s,{field:"discountAmount",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.discountAmount,children:e.discountAmount})}}),(0,F.jsx)(c.s,{field:"netBillAmount",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"right","data-toggle":"tooltip",title:e.netBillAmount,children:e.netBillAmount})}}),(0,F.jsx)(c.s,{field:"is_dirty",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.is_dirty,children:e.is_dirty})}}),(0,F.jsx)(c.s,{field:"refreshDate",body:function(e){return(0,F.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.refreshDate,children:e.refreshDate})}})]})})]}),je?(0,F.jsx)(g.Z,{handleAbort:function(){Se.current&&Se.current.abort(),xe(!1)}}):"",1==p?(0,F.jsx)(A,{firstTableData:v,setProjectinfoTab:Te,projectInfoTab:Ae,projectInfo:Me,linkId:ee,formData:d,setLoader:xe,PMReview:H,DMReview:T,storegrpahname:u,FMReview:G,getGraph:w,getDataBsedGrpah:M,setAddmsg:O,setValidationMessage:Y,resourceInfo:Ne,setResourceInfo:ye,billDetailsCount:s,reviewerAction:i,getResourceInfo:Ie,headerData:ue}):""]})}var _=t(40071),G=t(38262),C=t(72920);var B=function(){var e,l,t,c,d,m,j,p=f.N.baseUrl,b=new Date,N=(0,o.useState)(new Date(b.getFullYear(),b.getMonth(),1)),y=(0,a.Z)(N,2),R=y[0],w=y[1],H=h()(R).format("yyyy-MM-DD"),I=(0,o.useState)(new Date(b.getFullYear(),b.getMonth(),1)),D=(0,a.Z)(I,2),S=(D[0],D[1],h()(new Date).format("yyyy-MM-DD")),Z=h()(new Date).format("yyyy-MM-DD").split("-"),A=(0,a.Z)(Z,2),B=A[0],k=A[1],P="".concat(k,"-").concat(B),O=new Date(b.getFullYear(),b.getMonth()+1,0),Y=h()(O).format("yyyy-MM-DD"),E=(0,o.useState)([{billingMonth:R}]),V=(0,a.Z)(E,2),U=V[0],z=V[1],L=(0,o.useState)(!1),X=(0,a.Z)(L,2),Q=X[0],K=X[1],J=(0,o.useState)(r.UdN),$=(0,a.Z)(J,2),W=$[0],q=$[1],ee=(0,o.useState)([]),le=(0,a.Z)(ee,2),te=le[0],se=le[1],ie=(0,o.useState)(!1),ne=(0,a.Z)(ie,2),ae=ne[0],oe=ne[1],re=(0,o.useState)(!1),ce=(0,a.Z)(re,2),de=ce[0],ue=ce[1],me=(0,o.useState)(!1),he=(0,a.Z)(me,2),ve=(he[0],he[1],(0,o.useState)(!1)),je=(0,a.Z)(ve,2),xe=je[0],fe=je[1],ge=(0,o.useState)([]),pe=(0,a.Z)(ge,2),be=pe[0],Ne=pe[1],ye=(0,o.useRef)(null),Re=(0,o.useState)(!1),we=(0,a.Z)(Re,2),Me=we[0],He=we[1],Ie=(0,o.useState)(!1),De=(0,a.Z)(Ie,2),Se=(De[0],De[1]),Fe=(0,o.useState)([{}]),Ze=(0,a.Z)(Fe,2),Ae=Ze[0],Te=Ze[1],_e=(0,o.useState)(!1),Ge=(0,a.Z)(_e,2),Ce=Ge[0],Be=Ge[1],ke=(0,o.useState)([]),Pe=(0,a.Z)(ke,2),Oe=Pe[0],Ye=Pe[1],Ee=(0,o.useState)([]),Ve=(0,a.Z)(Ee,2),Ue=Ve[0],ze=Ve[1],Le=null===(e=Oe[0])||void 0===e?void 0:e.billingMonth;h()(Le).endOf("month").format("YYYY-MM-DD"),U.billingMonth;var Xe=U.billingMonth,Qe=h()(Xe).endOf("month").format("YYYY-MM-DD"),Ke=(0,o.useState)([]),Je=(0,a.Z)(Ke,2),$e=Je[0],We=Je[1],qe=(0,o.useState)([]),el=(0,a.Z)(qe,2),ll=el[0],tl=el[1],sl=(0,o.useState)([]),il=(0,a.Z)(sl,2),nl=il[0],al=il[1],ol=(0,o.useState)([]),rl=(0,a.Z)(ol,2),cl=rl[0],dl=rl[1],ul=(0,o.useState)([]),ml=(0,a.Z)(ul,2),hl=ml[0],vl=ml[1],jl=(0,o.useState)([]),xl=(0,a.Z)(jl,2),fl=xl[0],gl=xl[1],pl=localStorage.getItem("resId"),bl=(U.billingMonth||S).split("-"),Nl=(0,a.Z)(bl,2),yl=Nl[0],Rl=Nl[1],wl="".concat(Rl,"-").concat(yl),Ml=function(){var e=[];x().get(p+"/timeandexpensesms/getEMid?id=".concat(pl)).then((function(l){var t,s;l.data?e=l.data:e.push(role_type_id=0),console.log(e),vl(e),console.log(919==(null===(t=e[0])||void 0===t?void 0:t.role_type_id)),["104335943","1798"].includes(pl)||919==(null===(s=e[0])||void 0===s?void 0:s.role_type_id)?x()({method:"post",url:p+"/timeandexpensesms/projectBillingList",data:{billMnth:void 0==wl?P:wl,tsName:"",term:"monthly",customerId:void 0==U.customerId||""==U.customerId?0:U.customerId,startDate:U.billingMonth?U.billingMonth:H,endDate:U.billingMonth?Qe:Y,userId:pl},headers:{"Content-Type":"application/json"}}).then((function(e){var l=e.data;Ye(e.data.billingtslist),ze(e.data.isSQA),Te(l),Ql(l,"In PM Review"),setTimeout((function(){He(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)})):x()({method:"post",url:p+"/timeandexpensesms/myProjectBillingList",data:{billingMonth:void 0==wl?P:wl,billingtslist:"",userLogged:pl,tsId:"",tsName:"",term:"monthly",customerId:void 0==U.customerId||""==U.customerId?0:U.customerId,startDate:U.billingMonth?U.billingMonth:H,endDate:U.billingMonth?Qe:Y,userId:pl},headers:{"Content-Type":"application/json"}}).then((function(e){var l=e.data;Ye(e.data.billingtslist),ze(e.data.isSQA),Te(l),Ql(l,"In PM Review"),setTimeout((function(){He(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)}))})).catch((function(e){console.log("Error :"+e)}))};(0,o.useEffect)((function(){Ml(),Hl()}),[]);var Hl=function(){x()({method:"GET",url:p+"/CommonMS/master/getMenus?loggedUserId=".concat(pl)}).then((function(e){var l=e.data;l.forEach((function(e){"Time & Expenses"===e.display_name&&gl([e])}));var t=l.find((function(e){return"Time & Expenses"===e.display_name})).subMenus.find((function(e){return"Fixed Price - Open"===e.display_name})),s=t?t.userRoles.includes("690")&&t.userRoles.includes("641")?600:t.userRoles.includes("690")?690:t.userRoles.includes("641")?641:t.userRoles.includes("930")?930:t.userRoles.includes("46")&&46:null;Ne(s)}))};console.log(be);var Il=function(){x()(641==be||690==be||930==be||600==be?p+"/CommonMS/master/getCustomersList?loggedUserId=".concat(pl):p+"/ProjectMS/Engagement/getCustomerName").then((function(e){var l=e.data;console.log(l),se(l)}))};(0,o.useEffect)((function(){641!=be&&690!=be&&930!=be&&46!=be||Il()}),[be]),(0,o.useEffect)((function(){Il()}),[]);var Dl,Sl=(0,o.useState)([]),Fl=(0,a.Z)(Sl,2),Zl=Fl[0],Al=Fl[1],Tl=(0,o.useState)(!1),_l=(0,a.Z)(Tl,2),Gl=_l[0],Cl=_l[1],Bl=(0,o.useState)([{}]),kl=(0,a.Z)(Bl,2),Pl=kl[0],Ol=kl[1],Yl=(0,o.useState)(!1),El=(0,a.Z)(Yl,2),Vl=El[0],Ul=El[1],zl=!1,Ll=(0,s.Z)(nl);try{for(Ll.s();!(Dl=Ll.n()).done;){var Xl=Dl.value;if(Xl.deliveryMgrId&&Xl.deliveryMgrId.includes(","))if(Xl.deliveryMgrId.split(",").includes(pl.toString())){zl=!0;break}}}catch(Kl){Ll.e(Kl)}finally{Ll.f()}(0,o.useEffect)((function(){Ul(zl)}),[zl]);var Ql=function(e,l){var t,s;Be(!0),oe(!1),Al(l),x()({method:"post",url:p+"/timeandexpensesms/getFirstTable",data:{tsId:0,isSQA:!["104335943","1798"].includes(pl)&&919!=(null===(t=hl[0])||void 0===t?void 0:t.role_type_id)&&(Ue.length>0?Ue:e.isSQA),status:l,tsName:"",customerId:void 0==U.customerId||""==U.customerId?0:U.customerId,term:"monthly",startDate:U.billingMonth?U.billingMonth:H,endDate:U.billingMonth?Qe:Y,billMonth:U.billingMonth?U.billingMonth:H,isDM:Vl,isAdmin:!(!["104335943","1798"].includes(pl)&&919!=(null===(s=hl[0])||void 0===s?void 0:s.role_type_id)),loggedId:pl},headers:{"Content-Type":"application/json"}}).then((function(e){for(var l=e.data,t=0;t<l.length;t++){l[t].is_dirty=null==l[t].is_dirty?"No":h()(l[t].is_dirty).format("DD-MMM-YYYY"),l[t].refreshDate=null==l[t].refreshDate?"NA":h()(l[t].refreshDate).format("DD-MMM-YYYY");var s=l[t].billingPeriod;if(s){var i=s.split(" to "),n=(0,a.Z)(i,2),o=n[0],r=n[1],c=h()(o).format("DD-MMM-YY"),d=h()(r).format("DD-MMM-YY");l[t].billingPeriod="".concat(c," to ").concat(d)}}Ol(l),Cl(!0),setTimeout((function(){He(!1)}),1e3)})).catch((function(e){console.log("Error :"+e)}))};return(0,F.jsxs)("div",{children:[de?(0,F.jsx)("div",{className:"statusMsg success",children:(0,F.jsxs)("span",{className:"errMsg",children:[(0,F.jsx)(M.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," ","\xa0Billing timesheet details saved successfully"]})}):"",xe?(0,F.jsxs)("div",{className:"statusMsg error",children:[" ",(0,F.jsxs)("span",{children:[" ",(0,F.jsx)(_.SZZ,{})," Please select the valid values for highlighted fields"," "]})]}):"",(0,F.jsx)("div",{className:"col-md-12",children:(0,F.jsxs)("div",{className:"pageTitle",children:[(0,F.jsx)("div",{className:"childOne"}),(0,F.jsx)("div",{className:"childTwo",children:(0,F.jsx)("h2",{children:"Fixed Price-Open"})}),(0,F.jsx)("div",{className:"childThree"})]})}),(0,F.jsx)(G.Z,{routes:fl,currentScreenName:["Fixed Price - Open"]}),(0,F.jsxs)("div",{className:"group mb-3 customCard",children:[(0,F.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,F.jsx)("h2",{children:"Search Filters"}),(0,F.jsx)("div",{className:"helpBtn",children:(0,F.jsx)(C.Z,{pdfname:"FixedPriceOpen.pdf",name:"Fixed-price Open Help"})}),(0,F.jsx)("div",{onClick:function(){K(!Q),q(Q?r.UdN:r.NR5)},children:(0,F.jsx)("span",{children:W})})]}),(0,F.jsx)(v.V9,{visible:!Q,children:(0,F.jsxs)("div",{className:"group-content row",children:[(0,F.jsx)("div",{className:"col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsxs)("label",{className:"col-5",htmlFor:"customerId",children:["Customer",(0,F.jsx)("span",{style:{color:"red"}})]}),(0,F.jsx)("span",{className:"col-1 p-0",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsxs)("select",{className:"text cancel",id:"customerId",name:"customerId",onChange:function(e){return function(e){var l=e.target,t=l.id,s=(l.name,l.value);z((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,i.Z)({},t,s))}))}(e)},children:[(0,F.jsx)("option",{value:"null",children:"<<Please Select>>"}),te.map((function(e){return(0,F.jsx)("option",{value:e.id,children:e.name})}))]})})]})}),(0,F.jsx)("div",{className:"col-md-4 mb-2",children:(0,F.jsxs)("div",{className:"form-group row",children:[(0,F.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Month",(0,F.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,F.jsx)("span",{className:"col-1 p-0",children:":"}),(0,F.jsx)("div",{className:"col-6",children:(0,F.jsx)(u(),{selected:R,name:"billingMonth",id:"billingMonth",onChange:function(e){z((function(l){return(0,n.Z)((0,n.Z)({},l),{},(0,i.Z)({},"billingMonth",h()(e).format("yyyy-MM-DD")))})),w(e)},dateFormat:"MMM-yyyy",maxDate:new Date,showMonthYearPicker:!0})})]})}),(0,F.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:(0,F.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){K(!Q),q(Q?r.UdN:r.NR5),He(!1),Be(!1),Se(!0),Ml()},children:[(0,F.jsx)(r.U41,{}),"Search"," "]})})]})})]}),(0,F.jsx)(F.Fragment,{children:(0,F.jsx)("div",{className:"flowBox",children:(0,F.jsxs)("div",{className:"flowContainer",children:[(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"PM Review"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(l=Ae.billingtslist)||void 0===l?void 0:l.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0==e.pmReview?"count zero":"count"),"data-count":"1",onClick:function(){0!=e.pmReview&&Ql(Ae,"In PM Review")},children:e.pmReview},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]}),(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"DM Review"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(t=Ae.billingtslist)||void 0===t?void 0:t.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0===e.dmReview?"count zero":"count"),"data-count":"1",onClick:function(l){0!==e.dmReview&&Ql(Ae,"In DM Review")},children:e.dmReview},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]}),(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"DM Rejected"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(c=Ae.billingtslist)||void 0===c?void 0:c.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0==e.dmRejected?"count zero":"count"),"data-count":"1",onClick:function(){0!=e.dmRejected&&Ql(Ae,"DM Rejected")},children:e.dmRejected},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]}),(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"Finance Review"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(d=Ae.billingtslist)||void 0===d?void 0:d.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0==e.finReview?"count zero":"count"),"data-count":"1",onClick:function(){0!=e.finReview&&Ql(Ae,"In Finance Review")},children:e.finReview},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]}),(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"Finance Rejected"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(m=Ae.billingtslist)||void 0===m?void 0:m.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0==e.finRejected?"count zero":"count"),"data-count":"1",onClick:function(){0!=e.finRejected&&Ql(Ae,"Finance Rejected")},children:e.finRejected},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]}),(0,F.jsxs)("div",{className:"flowItem",children:[(0,F.jsx)("div",{className:"flowItemHeader",children:"Finance Accepted"}),(0,F.jsx)("div",{className:"flowItemContent",children:(null===Ae||void 0===Ae||null===(j=Ae.billingtslist)||void 0===j?void 0:j.length)>0?Ae.billingtslist.map((function(e,l){return(0,F.jsx)("a",{className:"".concat(0==e.finAccepted?"count zero":"count"),"data-count":"1",onClick:function(){0!=e.finAccepted&&Ql(Ae,"Finance Accepted")},children:e.finAccepted},l)})):(0,F.jsx)("a",{className:"count zero","data-count":"1",children:0})})]})]})})}),Me?(0,F.jsx)(g.Z,{handleAbort:function(){ye.current&&ye.current.abort(),He(!1)}}):"",1==Ce?(0,F.jsx)(T,{formData:U,setStorefirstTab:Ye,storeFirstTab:Oe,firstTabledata:$e,storegrpahname:Zl,showtable:Ce,visibleTable:Gl,setVisibleTable:Cl,setFirstTabledata:We,setFirstTableData:Ol,firstTableData:Pl,showSecTable:ae,setShowSecTable:oe,getGraph:Ml,getDataBsedGrpah:Ql,PMReview:ll,setPMReview:tl,DMReview:nl,setDMReview:al,FMReview:cl,setFMReview:dl,EMReview:hl,isSQA:Ue,isDM:Vl,setAddmsg:ue,setValidationMessage:fe}):""]})}}}]);
//# sourceMappingURL=6794.b02277a8.chunk.js.map