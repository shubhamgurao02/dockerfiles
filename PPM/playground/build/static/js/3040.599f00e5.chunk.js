"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3040],{73040:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var s=n(4942),r=n(1413),a=n(74165),i=n(15861),c=n(29439),l=n(74569),d=n.n(l),o=n(72791),u=n(34831),h=n(80184);var x=function(e){var t=e.countries,n=e.practices,s=e.cadres,r=(e.setAddRoleGrid,e.addRoleGrid,e.addRoleGridData,e.formData,e.setFormData,e.onChangeFilters),a=e.filtersClickHandler;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{class:"group-content row",children:[(0,h.jsx)("div",{class:"col-md-3 mb-2",children:(0,h.jsxs)("div",{class:"form-group row",children:[(0,h.jsxs)("label",{class:"col-5",for:"BuIds",children:["Practice ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{class:"col-1 p-0",children:":"}),(0,h.jsxs)("div",{class:"col-6",children:[" ",(0,h.jsxs)("select",{id:"practice",onChange:function(e){return r(e)},children:[(0,h.jsx)("option",{value:"",children:"<<Please Select>>"},""),n.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.groupName},e.id)}))]})]})]})}),(0,h.jsx)("div",{class:"col-md-3 mb-2",children:(0,h.jsxs)("div",{class:"form-group row",children:[(0,h.jsxs)("label",{class:"col-5",for:"BuIds",children:["Country ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{class:"col-1 p-0",children:":"}),(0,h.jsx)("div",{class:"col-6",children:(0,h.jsxs)("select",{id:"country",onChange:function(e){return r(e)},children:[(0,h.jsx)("option",{value:"",children:"<<Please Select>>"},""),t.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.country_name},e.id)}))]})})]})}),(0,h.jsx)("div",{class:"col-md-3 mb-2",children:(0,h.jsxs)("div",{class:"form-group row",children:[(0,h.jsxs)("label",{class:"col-5",for:"BuIds",children:["Cadre ",(0,h.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,h.jsx)("span",{class:"col-1 p-0",children:":"}),(0,h.jsxs)("div",{class:"col-6",children:[" ",(0,h.jsxs)("select",{id:"cadre",onChange:function(e){return r(e)},children:[(0,h.jsx)("option",{value:"",children:"<<Please Select>>"},""),s.map((function(e){return(0,h.jsx)("option",{value:e.cadre_code,children:e.cadre_code},e.id)}))]})]})]})}),(0,h.jsx)("div",{class:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:(0,h.jsx)("button",{type:"submit",class:"btn btn-primary",title:"Search",onClick:function(){a()},children:"Search"})})]})})},f=(n(85565),n(37762)),j=n(93433),m=n(78820),p=n(7692),v=n(78983);var g=function(e){var t=e.roleGridDeleteState,n=e.setRoleGridDeleteState;return e.gridCostDeleter,(0,h.jsx)("div",{children:(0,h.jsxs)(v.Tk,{size:"sm",visible:t,onClose:function(){return n(!1)},children:[(0,h.jsx)(v.p0,{className:"hgt22",children:(0,h.jsx)(v.fl,{children:(0,h.jsx)("span",{className:"ft16",children:"Delete Record"})})}),(0,h.jsx)(v.sD,{children:(0,h.jsxs)("div",{class:"modal-body",children:[(0,h.jsx)("div",{class:"col-md-12 addRoleGridSubHeader",children:(0,h.jsx)("b",{children:"Are You Sure Want To Delete?"})}),(0,h.jsxs)("div",{class:"col-md-12 mt-2 addRoleGridButtons",align:"right",children:[(0,h.jsx)("button",{class:"btn btn-sm btn-outline-secondary mx-3",type:"button",children:"Cancel"}),(0,h.jsx)("button",{class:"btn btn-sm btn-danger",type:"button",children:"Delete"})]})]})})]})})};var _=function(e){e.addRoleGridData;var t=e.countries,n=e.practices,s=e.cadres,a=e.roleGridCostData,i=e.getCostRoleGrid,l=(e.addRoleGrid,e.setAddRoleGrid),x=e.setLoaderState,v=(0,o.useState)(null),_=(0,c.Z)(v,2),C=_[0],b=_[1],y=(0,o.useState)(!1),S=(0,c.Z)(y,2),R=S[0],Z=S[1],G={},B=(0,o.useState)(null),D=(0,c.Z)(B,2),M=D[0],N=D[1],k=(0,o.useState)(!1),E=(0,c.Z)(k,2),P=(E[0],E[1]),w=((0,o.useRef)(null),(0,o.useState)(-1)),T=(0,c.Z)(w,2),A=T[0],I=T[1],F=(0,o.useState)(!1),H=(0,c.Z)(F,2),L=H[0],O=H[1],V=(0,o.useState)(-1),K=(0,c.Z)(V,2),q=K[0],U=K[1],Y=(0,o.useState)(!1),z=(0,c.Z)(Y,2),Q=z[0],W=z[1],J=(0,o.useRef)(null),X=u.N.baseUrl,$=["group_name","cadre","country_name","min_experience","max_experience","min_salary","max_salary","salary_diff","gm_perc","revenue_influence","total_count","below_min_sal","above_max_salary","less_than_median","greater_than_median","equal_to_median","action"],ee=["total_count","below_min_sal","above_max_salary","less_than_median","greater_than_median","equal_to_median"];(0,o.useEffect)((function(){se()}),[]);var te=function(e){var t=e.target,n=t.id,s=t.value;G[n]=s,void 0!==G.min_salary&&void 0!==G.max_salary&&(G.salary_diff=G.max_salary-G.min_salary,J.current.value=G.salary_diff)},ne=function(e){var t=e.which?e.which:e.keyCode;return 8==t||46==t||37==t||39==t?e.key:t<48||t>57?e.preventDefault():e.key},se=function(){b((function(){var e=a,i=[];return 0===(i=R?[(0,r.Z)({},$)].concat((0,j.Z)(e)):a).length?(0,h.jsx)("tr",{children:(0,h.jsx)("td",{colSpan:17,align:"center",children:"No Records Found"})}):i.map((function(e,r){var a=[];return R&&0===r||-1!==A&&A===r?(-1!==A&&Object.assign(G,e),$.forEach((function(r,i){"action"===r?a.push((0,h.jsxs)("td",{children:[(0,h.jsx)(m.gg_,{title:"Save",className:"pointerCursor",onClick:function(e){ie()}}),(0,h.jsx)(m.LHV,{title:"Cancel",className:"pointerCursor",onClick:function(e){ce()}})]})):"group_name"===r?a.push((0,h.jsx)("td",{children:(0,h.jsxs)("select",{id:r,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultValue:e.practice_id,disabled:-1!==A,onChange:function(e){te(e)},children:[(0,h.jsx)("option",{children:"<<Please Select>>"},""),n.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.groupName},e.id)}))]})})):"cadre"===r?a.push((0,h.jsx)("td",{children:(0,h.jsxs)("select",{id:r,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultValue:e[r],disabled:-1!==A,onChange:function(e){te(e)},children:[(0,h.jsx)("option",{children:"<<Please Select>>"},""),s.map((function(e){return(0,h.jsx)("option",{value:e.cadre_code,children:e.cadre_code},e.id)}))]})})):"country_name"===r?a.push((0,h.jsx)("td",{children:(0,h.jsxs)("select",{id:r,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultValue:e.country_id,disabled:-1!==A,onChange:function(e){te(e)},children:[(0,h.jsx)("option",{children:"<<Please Select>>"},""),t.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.country_name},e.id)}))]})})):"salary_diff"===r?a.push((0,h.jsx)("td",{id:r,children:(0,h.jsx)("input",{id:r,ref:J,disabled:"disabled",defaultValue:0,onKeyPress:function(e){return ne(e)},type:"text",className:"textBxBrdrRd inputCss validateErr disabledIcon",onChange:function(e){te(e)}})})):0==ee.includes(r)?a.push((0,h.jsx)("td",{id:r,children:(0,h.jsx)("input",{id:r,defaultValue:e[r],onKeyPress:function(e){return ne(e)},type:"text",className:"textBxBrdrRd inputCss validateErr",onChange:function(e){te(e)}})})):a.push((0,h.jsx)("td",{id:r,children:e[r]}))}))):$.forEach((function(t,n){"action"==t?a.push((0,h.jsx)("td",{children:(0,h.jsxs)("div",{align:"center",children:[(0,h.jsx)("span",{children:(0,h.jsx)(m.QML,{title:"Edit",className:"pointerCursor",onClick:function(t){ae(e,r)}})}),(0,h.jsx)("span",{children:(0,h.jsx)(m.YK6,{title:"Delete",className:"pointerCursor",onClick:function(t){re(e)}})})]})})):a.push((0,h.jsx)("td",{align:n>2?"right":"left",children:e[t]}))})),(0,h.jsx)("tr",{children:a},r)}))}))},re=function(e){O(!0),U(e.id)},ae=function(e,t){I(t)};(0,o.useEffect)((function(){se()}),[A]);var ie=function(){for(var e=document.getElementsByClassName("validateErr"),t=[],n=0;n<e.length;n++){var s=e[n].value,r=e[n].classList;""===s&&!1===r.contains("txtBoxBorderColor")?r.add("txtBoxBorderColor"):r.remove("txtBoxBorderColor"),t.push(r.contains("txtBoxBorderColor"))}N(!!t.includes(!0)),setTimeout((function(){N(!1)}),3e3),t.includes(!0)||(x(!0),-1!==A&&(G.country_name=G.country_id,G.group_name=G.practice_id),d()({method:"POST",url:X+"/CostMS/cost/saveRoleGridCost",data:G}).then((function(e){e.data.status&&(l(!1),Object.keys(G).forEach((function(e){delete G[e]})),x(!1),P(!0),setTimeout((function(){P(!1)}),5e3),i(),Z(!1),se())})))};(0,o.useEffect)((function(){se()}),[R]);var ce=function(){Z((function(e){return!1})),N(!1),I(-1);var e,t=(0,f.Z)(Object.getOwnPropertyNames(G));try{for(t.s();!(e=t.n()).done;){var n=e.value;delete G[n]}}catch(s){t.e(s)}finally{t.f()}};return(0,h.jsxs)("div",{children:[M?(0,h.jsxs)("div",{className:"col-md-12 statusMsg error",children:[(0,h.jsx)(p.I2T,{}),"Please Provide Mandatory Fields"]}):"",Q?(0,h.jsx)("div",{className:"successMsg",children:"Deleted Grid Cost Successfully"}):"",(0,h.jsx)("table",{className:"table table-bordered table-striped",style:{width:"100%"},children:(0,h.jsxs)("tbody",{children:[(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Practice"}),(0,h.jsx)("th",{children:"Cadre"}),(0,h.jsx)("th",{children:"Country"}),(0,h.jsx)("th",{children:"Min. Exp."}),(0,h.jsx)("th",{children:"Max. Exp"}),(0,h.jsx)("th",{children:"Min. Salary"}),(0,h.jsx)("th",{children:"Max. Salary"}),(0,h.jsx)("th",{children:"Difference Max-Min(L)"}),(0,h.jsx)("th",{children:"GM%"}),(0,h.jsx)("th",{children:"Revenue Influence"}),(0,h.jsx)("th",{children:"Total Count"}),(0,h.jsx)("th",{children:"Below Min"}),(0,h.jsx)("th",{children:"Above Max"}),(0,h.jsx)("th",{children:"< Median"}),(0,h.jsx)("th",{children:"> Median"}),(0,h.jsx)("th",{children:" Median"}),(0,h.jsx)("th",{children:"Action"})]}),C]})}),(0,h.jsxs)("button",{className:"btn btn-primary",title:"Add",onClick:function(e){Z((function(e){return e||!e}))},children:[(0,h.jsx)(m.dEn,{style:{marginRight:"3px"}}),"Add"]}),L?(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(g,{roleGridDeleteState:L,setRoleGridDeleteState:O,gridCostDeleter:function(){var e=X+"/CostMS/cost/deleteRoleCostGrid?id=".concat(q);d().delete(e).then((function(e){e.data.status&&O(!1),W(!0),i(),b(null),se(),setTimeout((function(){W(!1)}),2e3)})).catch((function(e){console.log(e)}))}})}):""]})},C=n(83854);var b=function(){var e=u.N.baseUrl,t=(0,o.useState)([]),n=(0,c.Z)(t,2),l=n[0],f=n[1],j=(0,o.useState)([]),m=(0,c.Z)(j,2),p=m[0],v=m[1],g=(0,o.useState)([]),b=(0,c.Z)(g,2),y=b[0],S=b[1],R=(0,o.useState)(!1),Z=(0,c.Z)(R,2),G=Z[0],B=Z[1],D=(0,o.useState)([]),M=(0,c.Z)(D,2),N=M[0],k=(M[1],(0,o.useState)([])),E=(0,c.Z)(k,2),P=E[0],w=E[1],T=(0,o.useState)([]),A=(0,c.Z)(T,2),I=(A[0],A[1],(0,o.useState)(!1)),F=(0,c.Z)(I,2),H=F[0],L=F[1],O=localStorage.getItem("resId"),V=window.location.href,K=(0,o.useState)({practice:"",country:"",cadre:""}),q=(0,c.Z)(K,2),U=q[0],Y=q[1],z=(0,o.useState)(!1),Q=(0,c.Z)(z,2),W=Q[0],J=Q[1];(0,o.useEffect)((function(){te(),X(),$(),ee(),ne()}),[]),(0,o.useEffect)((function(){}),[P]);var X=function(){d()({url:e+"/CostMS/cost/getCountries"}).then((function(e){f(e.data)}))},$=function(){d()({url:e+"/CostMS/cost/getPractices"}).then((function(e){v(e.data)}))},ee=function(){d()({url:e+"/CostMS/cost/getCadres"}).then((function(e){S(e.data)}))},te=function(){L(!1),J(!0),d()({method:"POST",url:e+"/CostMS/cost/getRoleGridCost",data:U}).then((function(e){w(e.data),L(!0),J(!1)}))},ne=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://geolocation-db.com/json/").then((function(e){return e.json()}),"jsonp").then((function(e){se(e.IPv4)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(t){var n={},s=V.split("#");n.ipAddress=t,n.userId=O,n.url=s[1],d()({method:"POST",url:e+"/CostMS/cost/saveLoginTracks",data:n}).then((function(e){console.log(e.data)}))};return(0,h.jsxs)("div",{children:[W?(0,h.jsx)(C.Z,{}):"",(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(x,{countries:l,practices:p,cadres:y,setAddRoleGrid:B,addRoleGrid:G,addRoleGridData:N,formData:U,setFormData:Y,onChangeFilters:function(e){var t=e.target,n=t.id,a=t.value;Y((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},n,a))}))},filtersClickHandler:function(){console.log(U),te()}})}),H&&(0,h.jsx)("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12 customCard",children:(0,h.jsx)(_,{addRoleGridData:N,countries:l,practices:p,cadres:y,roleGridCostData:P,getCostRoleGrid:te,addRoleGrid:G,setAddRoleGrid:B,setLoaderState:J})})]})}}}]);
//# sourceMappingURL=3040.599f00e5.chunk.js.map