"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6605],{79123:function(e,t,a){a.r(t),a.d(t,{default:function(){return ce}});var n=a(74165),l=a(15861),s=a(4942),r=a(1413),o=a(29439),i=a(72791),c=a(72426),u=a.n(c),d=a(74569),m=a.n(d),v=a(34831),p=a(59513),h=a.n(p),f=a(36167),g=a(78983),j=a(56355),x=a(84373),y=a(59962),b=a.n(y),N=a(13972),S=a(80184);var C=function(e){var t=e.buttonPopup,a=e.setButtonPopup,n=e.actionItems,l=(e.setActionItems,e.rows),s=e.actionTable,r=e.handleActionItems;return(0,i.useEffect)((function(){r()}),[s]),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsx)(b(),{children:(0,S.jsxs)(g.Tk,{size:"xl",visible:t,className:"ui-dialog ",onClose:function(){return a(!1)},children:[(0,S.jsx)(g.p0,{className:"hgt22",children:(0,S.jsx)(g.fl,{children:(0,S.jsx)("span",{className:"ft16",children:"Action Items"})})}),(0,S.jsx)(g.sD,{children:(0,S.jsx)("div",{className:"row",children:(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsx)(N.Z,{data:n,rows:l})})})})]})})})},Z=a(52846),R=a(26971),A=a(78820),P=a(83854),D=a(17425),T=a(39349),M=a(32125),E=a(15475),B=a(63521),w=a(93433),I=a(6748),U=a(99259),F=a(66934),L=a(12065),H=a(99651),_=a(41523),Y=a(56125),k=a(27336),z=a(73728);function V(e){return(0,S.jsx)(U.Z,(0,r.Z)((0,r.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,S.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function q(e){return(0,S.jsx)(U.Z,(0,r.Z)((0,r.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,S.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function O(e){var t=(0,k.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,S.jsx)(k.q.div,{style:t,children:(0,S.jsx)(Y.Z,(0,r.Z)({},e))})}var W=(0,F.ZP)((function(e){return(0,S.jsx)("div",{children:(0,i.createElement)(H.Z,(0,r.Z)((0,r.Z)({},e),{},{key:String(e.node.id),nodeId:String(e.node.id),label:e.node.full_name,TransitionComponent:O}),Array.isArray(e.node.subRows)?e.node.subRows.map((function(e){return J(e)})):console.log("coming here?"))})}))((function(e){var t,a=e.theme;return t={},(0,s.Z)(t,"& .".concat(_.Z.iconContainer),{"& .close":{opacity:.3}}),(0,s.Z)(t,"& .".concat(_.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,L.Fq)(a.palette.text.primary,.4))}),t})),J=function(e){return(0,S.jsx)("div",{children:(0,S.jsx)(W,{node:e})})};function K(e){var t=e.defaultExpandedRows,a=e.data,n=e.setHierarchyId,l=e.setLabel,o=e.setFormData,i=function(e,t){t=(0,r.Z)({id:"id",parentId:"parent_id",children:"subRows"},t);var a={},n=[],l=t.children;return e.forEach((function(e){var n=e[t.id],o=e[t.parentId];a[n]=(0,r.Z)((0,r.Z)((0,s.Z)({},l,[]),e),a[n]),a[o]=a[o]||(0,s.Z)({},l,[]),a[o][l].push(a[n])})),Object.values(a).forEach((function(e){"undefined"===typeof e[t.id]&&n.push.apply(n,(0,w.Z)(e[l]))})),n}(a);return(0,S.jsx)("div",{className:"hierarchyTree",children:(0,S.jsx)(I.Z,{"aria-label":"rich object",defaultExpanded:[t],defaultCollapseIcon:(0,S.jsx)(V,{}),defaultExpandIcon:(0,S.jsx)(q,{}),defaultEndIcon:(0,S.jsx)(z.FYx,{}),defaultParentIcon:(0,S.jsx)(z.FYx,{}),sx:{"& .css-1g86id8-MuiTreeItem-content .MuiTreeItem-label":{width:"auto",minwidth:0}},onNodeSelect:function(e,t){n(t),o((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Name",t))})),l(e.target.innerHTML)},children:J(i[0])})})}var G=a(72920),Q=a(22804),X=a(11683),$=a(13400),ee=a(7692);function te(e){var t=e.data,a=e.expandedCols,n=e.colExpandState,l=(0,i.useState)([]),c=(0,o.Z)(l,2),u=c[0],d=c[1],m=(0,i.useState)(null),v=(0,o.Z)(m,2),p=v[0],h=v[1],f=(0,i.useState)({}),g=(0,o.Z)(f,2),j=g[0],x=g[1],y=(0,i.useState)(!1),b=(0,o.Z)(y,2),N=b[0],C=b[1],Z=(0,i.useState)([]),R=(0,o.Z)(Z,2),A=(R[0],R[1]),P=function(e){var t=String(e);if(t.includes(".")){if(t.includes(".00"))return t;var a=Number(t);return null!=a&&(null===a||void 0===a?void 0:a.toFixed(2))}return t};(0,i.useEffect)((function(){T()}),[null===t||void 0===t?void 0:t.tableData]);var D=0,T=function(){var e,l,r,i="";i=1==N&&D>0?"expanded":"";var c,u,m=null===t||void 0===t?void 0:t.tableData,v=null;null!==t&&void 0!==t&&null!==(e=t.columnData)&&void 0!==e&&e.includes("'")?v=null===t||void 0===t||null===(c=t.columnData)||void 0===c?void 0:c.replaceAll("'",""):v=null===t||void 0===t||null===(u=t.columnData)||void 0===u?void 0:u.replaceAll("'","");for(var p=null===(l=v)||void 0===l?void 0:l.split(","),f=[],g=[],j={},y=0;y<(null===p||void 0===p?void 0:p.length);y++){var b=p[y].trim(),Z=m[0];j[b]=Z[b]}var R=Object.entries(j).filter((function(e){var t=(0,o.Z)(e,2);t[0];return"string"===typeof t[1]}));m=null===(r=m)||void 0===r?void 0:r.filter((function(e,t){return 0!==t})),R.map((function(e){var t=(0,o.Z)(e,2),n=t[0];t[1];a.includes(n)&&g.push((0,s.Z)({},n,!1))})),x(Object.assign.apply(Object,[{}].concat(g))),A(v),R.map((function(e,t){var a=(0,o.Z)(e,2),l=a[0],s=a[1];f.push({accessorKey:l,header:s,enableColumnActions:!1,enableHiding:!0,rowspan:5,Header:function(e){e.column;return(0,S.jsxs)("div",{children:[s,l==n[2]?(0,S.jsx)("span",{className:"expandIcon ".concat(i),children:(0,S.jsx)($.Z,{onClick:function(){C((function(e){return!e}))},children:(0,S.jsx)(ee.lU2,{})})}):null]})},Cell:function(e){var t=e.cell;return(0,S.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:t.getValue(),children:t.column.id.includes("gmper")||t.column.id.includes("billrate")||t.column.id.includes("bill_rate")||t.column.id.includes("cost")?(0,S.jsx)("div",{className:"align right",children:P(t.getValue())}):null!=t.getValue()?t.getValue().split("^")[0]:t.getValue()})}})})),h(f),d(m)};(0,i.useEffect)((function(){N?M():E()}),[N]);var M=function(){D++,T(),x({})},E=function(){T()};return(0,S.jsx)("div",{className:"materialReactExpandableTable engagementAllocationsTable darkHeader",children:null!==u&&void 0!==u&&u.length?(0,S.jsx)(X.ZP,{columns:p,data:u,enableExpandAll:!1,enablePagination:!1,enableBottomToolbar:!1,enableTopToolbar:!1,enableColumnActions:!1,enableSorting:!1,filterFromLeafRows:!0,initialState:{expanded:!1,density:"compact",columnVisibility:(0,r.Z)({},j),enablePinning:!0,columnPinning:{right:["total"]}},state:{columnVisibility:(0,r.Z)({},j)},defaultColumn:{minSize:40,maxSize:180,size:40},enableStickyHeader:!0,muiTableContainerProps:{sx:{maxHeight:"50vh",width:"100%"}},muiTableBodyProps:{sx:{"&":{},"& td":{borderRight:"1px solid #ccc",height:"22px",fontSize:"11px",paddingTop:"0px",paddingBottom:"0px"}}},muiTableHeadProps:{sx:{"& th":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",background:"#f4f4f4 ",fontSize:"13px",padding:"0px 8px"}}}}):null})}var ae=a(25415),ne=a.n(ae),le=a(81877),se=a(57689);var re=function(e){var t,n,l,c,d,p,y,b=e.capType,N=(e.hierarchyId,e.mgrId),w=e.departments,I=e.customer,U=e.selectedDepartments,F=e.selectedEngCompany,L=e.selectedCsl,H=e.selectedDp,_=e.project,Y=e.selectedEngLocation,k=e.resource,z=e.projectname,V=e.resourceName,q=e.manager,O=e.pmname,W=e.summaryBy,J=e.selectedSummaryBy,X=e.financialMeasures,$=e.selectview,ee=e.selectedResLocation,ae=e.selectedContractTerms,re=e.utilizationSummary,oe=e.benchSummary,ie=e.CustomerName,ce=e.displayState,ue=e.displayStateA,de=e.displayStateB,me=e.hierarchydata,ve=e.searchingA,pe=e.setsearchingA,he=e.addHandler,fe=e.subtractHandler,ge=e.handleDateChange,je=e.resLocation,xe=e.engCompany,ye=e.formData,be=e.month,Ne=e.contractTerms,Se=e.csl,Ce=e.dp,Ze=e.selecttype,Re=e.setSelectType,Ae=e.actionTable,Pe=e.setFormData,De=e.setCapType,Te=e.setMonth,Me=e.formattedMonth,Ee=e.setSelectView,Be=e.engLocation,we=e.filteredNumbers,Ie=e.setSelectedDepartments,Ue=e.setSelectedResLocation,Fe=e.setSelectedContractorTerms,Le=e.setSelectedEngCompany,He=e.setSelectedCsl,_e=e.setSelectedDp,Ye=e.setSelectedSummaryBy,ke=e.setSelectedEngLocation,ze=e.setValidationMessage,Ve=e.abortController,qe=e.loggedResourceId,Oe=e.setHierarchyId,We=e.setLabel,Je=e.label,Ke=e.getSearchData,Ge=e.loggedUserId,Qe=e.displayHierarchy,Xe=e.setSearching,$e=e.searching,et=e.pageurl,tt=e.page_Name,at=e.setEditAddmsg,nt=e.alloctype,lt=(e.setAlloctype,e.setSelectedalloctype),st=e.selectedalloctype,rt=e.setSelectedFinancialMeasures,ot=e.selectedFinancialMeasures,it=e.setDisplayHierarchy,ct=e.allcontractterms,ut=e.allengcompanies,dt=e.allcsl,mt=e.alldp,vt=e.setDisplayState,pt=e.setDisplayStateA,ht=e.setDisplayStateB,ft=e.setActionTable,gt=e.setUtilizationSummary,jt=e.setBenchSummary,xt=e.dataAccess,yt=e.setType,bt=e.visible,Nt=e.setvisible,St=e.cheveronIcon,Ct=e.setCheveronIcon,Zt=(e.managerProjects,(0,i.useRef)([])),Rt=(0,i.useState)([]),At=(0,o.Z)(Rt,2),Pt=At[0],Dt=At[1],Tt=(0,i.useState)([]),Mt=(0,o.Z)(Tt,2),Et=Mt[0],Bt=Mt[1],wt=(0,i.useState)([]),It=(0,o.Z)(wt,2),Ut=It[0],Ft=It[1],Lt=(0,i.useState)(!1),Ht=(0,o.Z)(Lt,2),_t=Ht[0],Yt=Ht[1],kt=(0,i.useState)(!1),zt=(0,o.Z)(kt,2),Vt=zt[0],qt=zt[1],Ot=(0,i.useState)(!1),Wt=(0,o.Z)(Ot,2),Jt=Wt[0],Kt=Wt[1],Gt=(0,i.useState)(x.u1R),Qt=(0,o.Z)(Gt,2),Xt=(Qt[0],Qt[1]),$t=(0,i.useState)(!1),ea=(0,o.Z)($t,2),ta=ea[0],aa=ea[1],na=(0,i.useState)(!1),la=(0,o.Z)(na,2),sa=la[0],ra=la[1],oa=(0,i.useState)(!1),ia=(0,o.Z)(oa,2),ca=ia[0],ua=ia[1],da=(0,i.useState)(j.UdN),ma=(0,o.Z)(da,2),va=ma[0],pa=ma[1],ha=(0,i.useState)(j.UdN),fa=(0,o.Z)(ha,2),ga=fa[0],ja=fa[1],xa=(0,i.useState)(!1),ya=(0,o.Z)(xa,2),ba=ya[0],Na=ya[1],Sa=(0,i.useState)([]),Ca=(0,o.Z)(Sa,2),Za=Ca[0],Ra=Ca[1],Aa=(0,i.useState)(!1),Pa=(0,o.Z)(Aa,2),Da=Pa[0],Ta=Pa[1],Ma=(0,i.useState)([]),Ea=(0,o.Z)(Ma,2),Ba=Ea[0],wa=(Ea[1],v.N.baseUrl),Ia=(0,i.useState)([]),Ua=(0,o.Z)(Ia,2),Fa=Ua[0],La=Ua[1],Ha=(0,i.useState)(!1),_a=(0,o.Z)(Ha,2),Ya=_a[0],ka=_a[1],za=(0,i.useState)(!1),Va=(0,o.Z)(za,2),qa=Va[0],Oa=Va[1],Wa=(0,i.useState)([]),Ja=(0,o.Z)(Wa,2),Ka=Ja[0],Ga=Ja[1],Qa=(0,i.useState)(!1),Xa=(0,o.Z)(Qa,2),$a=Xa[0],en=Xa[1],tn=(0,i.useRef)(new AbortController),an=(localStorage.getItem("resName"),function(e){e.expanded;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(j.qL$,{className:"chevronIcon"})})}),nn=(0,se.TH)(),ln=new URLSearchParams(nn.search).get("id"),sn=(0,i.useState)([]),rn=(0,o.Z)(sn,2),on=rn[0],cn=rn[1];(0,i.useEffect)((function(){m()({method:"get",url:wa+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===ln?0:ln)}).then((function(e){var t=e.data;cn(t)}))}),[ln]);var un=Fa[4],dn=Fa[6],mn=Fa[7],vn=Fa[9],pn=Fa[3],hn=Fa[8],fn=Fa[2],gn=Fa[1],jn=Fa[5],xn=Fa[0];(0,i.useEffect)((function(){console.log("SS>>",J," DP>>",Ce," CSL>>",Se," FD>>",on["Primary PM"]),ln&&on&&(0,le.setTimeout)((function(){Zn()}),4e3)}),[on,on["Primary PM"],Ce,Se,J]);var yn=function(){Ve.current.length>0&&Ve.current.forEach((function(e){return e.abort()}));pe(!1),it(!1),ka(!1)},bn=function(e){var t={};Object.keys(e[1]).forEach((function(e,a){t[e]="0","name"!=e&&"id"!=e&&"uniqueId"!=e&&"lvl"!=e&&"parentId"!=e||(t.name="No Records Found",t.id="999",t.uniqueId="3",t.lvl="1",t.parentId=null)})),e[2]=t},Nn=function(e,t,a){var n,l,s,r,o,i,c,u,d;if(Oa(!1),null!==(n=e.data.value)&&void 0!==n&&n.includes("Region")){var m=e.data.tableData,v=null===m||void 0===m?void 0:m.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));e.data.tableData=v,2===v.length?(bn(v),Dt(e.data)):Dt(e.data),Yt(!0)}else if(null!==(l=e.data.value)&&void 0!==l&&l.includes("Practice")){var p=e.data.tableData,h=null===p||void 0===p?void 0:p.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));e.data.tableData=h,2===h.length?(bn(h),Ft(e.data)):Ft(e.data),qt(!0)}else if(null!==(s=e.data.value)&&void 0!==s&&s.includes("Customer")){var f=e.data.tableData,g=null===f||void 0===f?void 0:f.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));e.data.tableData=g,2===g.length?(bn(g),Bt(e.data)):Bt(e.data),Kt(!0)}if(void 0!==t)if(null!==(r=t.data.value)&&void 0!==r&&r.includes("Region")){var x=t.data.tableData,y=null===x||void 0===x?void 0:x.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));t.data.tableData=y,2===y.length?(bn(y),Dt(t.data)):Dt(t.data),Yt(!0)}else if(null!==(o=t.data.value)&&void 0!==o&&o.includes("Practice")){var b=t.data.tableData,N=null===b||void 0===b?void 0:b.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));t.data.tableData=N,2===N.length?(bn(N),Ft(t.data)):Ft(t.data),qt(!0)}else if(null!==(i=t.data.value)&&void 0!==i&&i.includes("Customer")){var S=t.data.tableData,C=null===S||void 0===S?void 0:S.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));t.data.tableData=C,2===C.length?(bn(C),Bt(t.data)):Bt(t.data),Kt(!0)}if(void 0!==a)if(null!==(c=a.data.value)&&void 0!==c&&c.includes("Region")){var Z=a.data.tableData,R=null===Z||void 0===Z?void 0:Z.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));a.data.tableData=R,2===R.length?(bn(R),Dt(a.data)):Dt(a.data),Yt(!0)}else if(null!==(u=a.data.value)&&void 0!==u&&u.includes("Practice")){var A=a.data.tableData,P=null===A||void 0===A?void 0:A.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));a.data.tableData=P,2===P.length?(bn(P),Ft(a.data)):Ft(a.data),qt(!0)}else if(null!==(d=a.data.value)&&void 0!==d&&d.includes("Customer")){var D=a.data.tableData,T=null===D||void 0===D?void 0:D.filter((function(e){return 999!=(null===e||void 0===e?void 0:e.id)}));a.data.tableData=T,2===T.length?(bn(T),Bt(a.data)):Bt(a.data),Kt(!0)}var E=(0,M.Z)(Zt);Xe(!1),!E&&Nt(!bt),Ct(bt?j.UdN:j.NR5)},Sn=null===on||void 0===on||null===(t=on.Dp)||void 0===t?void 0:t.split(",");y=(null===Sn||void 0===Sn?void 0:Sn.length)===(null===Ce||void 0===Ce?void 0:Ce.length)?"-1":null===on||void 0===on?void 0:on.Dp;var Cn=null===(n=on.Csl)||void 0===n?void 0:n.split(",");p=(null===Cn||void 0===Cn?void 0:Cn.length)===(null===Se||void 0===Se?void 0:Se.length)?"-1":null===on||void 0===on?void 0:on.Csl,console.log(on.summaryBy);var Zn=function(){var e=on.View;Ee(e),aa(!1),ra(!1),ft([]),gt([]),jt([]),ht(!1),vt(!1),pt(!1),Dt([]),Ft([]),Bt([]),Yt(!1),qt(!1),Kt(!1),tn.current.abort(),tn.current=new AbortController,en(!1),Oa(!1);var t=Zt.current.filter((function(e){return null!=e}));Zt.current=t;var a=(0,M.Z)(Zt);if(1==a&&(ze(!0),(0,le.setTimeout)((function(){ze(!1)}),3e3)),!a)if("Hierarchy"==(null===on||void 0===on?void 0:on.type)&&ua(!0),"consol"===on.View){var n=[];null===on||void 0===on||on.summaryBy,J.map((function(e){switch(e.value){case"Region":n.push(m().post(wa+"/revenuemetricsms/metrics/postRegionUtilization",{BUIds:null===on||void 0===on?void 0:on.BusinessUnit,ResType:on.ResType,FromDt:Me,FBy:"country",Countries:on.ResLocation,FMeasure:on.Financialmeasures,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",contTerms:"28,27,752,606,26,25,1024,612,608,609,610,611,750"===on.ContractTerms?"-1":on.ContractTerms,engComps:on.EngCompany,cslIds:p,dpIds:y,UserId:Ge},{signal:tn.current.signal}));break;case"Practice":n.push(m().post(wa+"/revenuemetricsms/metrics/postBUUtilization",{BUIds:on.BusinessUnit,ResType:on.ResType,FromDt:Me,FBy:"country",Countries:on.ResLocation,FMeasure:on.Financialmeasures,contTerms:"28,27,752,606,26,25,1024,612,608,609,610,611,750"==on.ContractTerms?"-1":on.ContractTerms,engComps:on.EngCompany,cslIds:p,dpIds:y,UserId:Ge},{signal:tn.current.signal}));break;case"Customer":n.push(m().post(wa+"/revenuemetricsms/metrics/postCustomerConsolidation",{BUIds:on.BusinessUnit,ResType:on.ResType,FromDt:on.FromDt,FBy:"country",Countries:ye.ResLocation,FMeasure:ye.Financialmeasures,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",contTerms:"28,27,752,606,26,25,1024,612,608,609,610,611,750"===on.ContractTerms?"-1":on.ContractTerms,engComps:on.EngCompany,cslIds:p,dpIds:y,UserId:Ge},{signal:tn.current.signal}))}return e.value}));m().all(n).then(m().spread((function(e,t,a){Nn(e,t,a)})))}else Rn()},Rn=function(){(0,le.setTimeout)((function(){pe(!0)}),2e3);Ve.current[1]=new AbortController,m()({method:"post",url:wa+"/revenuemetricsms/metrics/search",signal:Ve.current[1].signal,data:{Typ:on.captype,ObjectId:"Business Unit"==(null===on||void 0===on?void 0:on.type)?on.BusinessUnit:"Hierarchy"==(null===on||void 0===on?void 0:on.type)?+(null===on||void 0===on?void 0:on.Name):"customer"==(null===on||void 0===on?void 0:on.type)?on.Customer:"project"==(null===on||void 0===on?void 0:on.type)?on.Project:"resource"==(null===on||void 0===on?void 0:on.type)?on["Resource Name"]:"Primary PM"==(null===on||void 0===on?void 0:on.type)?N:"",FromDt:Me,AllocType:on.AllocType,FilterType:"Primary PM"==(null===on||void 0===on?void 0:on.type)?"project":on.type,FBy:"country",Countries:on.ResLocation,Measure:on.measure,ResType:on.ResType,FMeasure:on.Financialmeasures,PrjSource:on.Source,EngCountries:on.engLocation,avgFilterType:on.Avg,avgFilterVal:on.avgtextvalue,contTerms:"28,27,752,606,26,25,1024,612,608,609,610,611,750"===on.ContractTerms?"-1":on.ContractTerms,engComps:on.EngCompany,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",cslIds:p,dpIds:y,UserId:Ge}}).then((function(e){var t=e.data;ft([]),ft(t[0]),gt(e.data[1]),jt(e.data[2]),console.log(null===on||void 0===on?void 0:on.type),(0,le.setTimeout)((function(){t.length>0&&void 0!=(null===on||void 0===on?void 0:on.type)&&(ht(!0),vt(!0),pt(!0),Xe(!1),pe(!1),!(0,M.Z)(Zt)&&Nt(!bt),Ct(bt?j.UdN:j.NR5))}),19e3)}))},An=function(){var e=(0,le.setTimeout)((function(){Ta(!0)}),2e3);Ve.current=new AbortController,m()({method:"post",url:wa+"/revenuemetricsms/metrics/getResourceActionItems",signal:Ve.current.signal,data:{resIds:""+we,fromDt:u()().startOf("month").format("YYYY-MM-DD"),toDt:u()().endOf("month").format("YYYY-MM-DD")}}).then((function(t){t.data;Ra([{resource:"Resource",created_dt:"Entry Dt",createdby:"Entry By",lkup_name:"Category",effective_dt:"Effective Dt",completed_dt:"Completed Dt",comments:"Comments"}].concat(t.data)),Ta(!1),clearTimeout(e)}))},Pn=function(){Promise.resolve().then(a.bind(a,34045)).then((function(e){var t,a,n,l=null,s=null,r=null;"resWithMailsTemp"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffWithInvalidEmailIDReport",s=null===xn||void 0===xn?void 0:xn.columnData,r=null===xn||void 0===xn?void 0:xn.tableData):"resourceWithoutBUMappingTemp"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffwithoutBUMappingReport",s=null===gn||void 0===gn?void 0:gn.columnData,r=null===gn||void 0===gn?void 0:gn.tableData):"resWithZerobillRateResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffwithnobillrateReport",s=null===fn||void 0===fn?void 0:fn.columnData,r=null===fn||void 0===fn?void 0:fn.tableData):"resWithNoEndDateResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="InactiveStaffwithMissingStartorEndDateReport",s=null===pn||void 0===pn?void 0:pn.columnData,r=null===pn||void 0===pn?void 0:pn.tableData):"allocBeyondEndDateResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="InActiveStaffwithAllocationsafterEndDateReport",s=null===un||void 0===un?void 0:un.columnData,r=null===un||void 0===un?void 0:un.tableData):"resWithoutDesignationResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffwithmissingDesignationReport",s=null===jn||void 0===jn?void 0:jn.columnData,r=null===jn||void 0===jn?void 0:jn.tableData):"projectsWithoutBUResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="ProjectswithmissingBUReport",s=null===dn||void 0===dn?void 0:dn.columnData,r=null===dn||void 0===dn?void 0:dn.tableData):"resRateLessCostResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffwithBillratelowerthanCostRateReport",s=null===mn||void 0===mn?void 0:mn.columnData,r=null===mn||void 0===mn?void 0:mn.tableData):"resWithZeroRoleCostResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffwithNoCostRateReport",s=null===hn||void 0===hn?void 0:hn.columnData,r=null===hn||void 0===hn?void 0:hn.tableData):"resWithNegGMPerResult"==(null===Ka||void 0===Ka?void 0:Ka.value)?(l="StaffWithNegativeGMPercentReport",s=null===vn||void 0===vn?void 0:vn.columnData,r=null===vn||void 0===vn?void 0:vn.tableData):"ResourceCapacity"==Ka&&(l="ResourceCapacity",s=null===Ae||void 0===Ae?void 0:Ae.columns,r=null===Ae||void 0===Ae?void 0:Ae.tableData);n=null===(a=null===s||void 0===s||null===(t=s.replaceAll("'",""))||void 0===t?void 0:t.replaceAll("<br>",""))||void 0===a?void 0:a.split(",").filter((function(e){return!e.includes("Id")&&!e.includes("action_items")}));var i,c,u=null;0!==Ka.length?u=null===(i=n)||void 0===i?void 0:i.filter((function(e){return"resource_id"!==e})):u=null===(c=n)||void 0===c?void 0:c.filter((function(e){return"action_items"!==e&&"Id"!==e}));var d=null===r||void 0===r?void 0:r.filter((function(e){return"action_items"!==e&&"Id"!==e})),m=null===d||void 0===d?void 0:d.map((function(e,t){var a={};for(var n in e)if(e.hasOwnProperty(n)){var l=e[n];if(0===t&&null!==l&&"string"===typeof l)a[n]=l.replace(/[_<]br>/g," ");else if(0!==t&&null!==l&&"string"===typeof l&&(l.includes("_")||l.includes("."))){var s=l.split(/[_\.]/)[0];a[n]=s}else a[n]=l}return a})),v=null===m||void 0===m?void 0:m.map((function(e){var t={};return u.forEach((function(a){var n=e[a];if("string"===typeof n){var l=n.split("^&"),s=(0,o.Z)(l,2)[0];t[a]=s}else t[a]=n})),t})),p=(null===v||void 0===v||v.map((function(e){var t=[];return u.forEach((function(a){t.push(e[a])})),t})),new(ne().Workbook)),h=p.addWorksheet("data");v.forEach((function(e){h.addRow(Object.values(e))}));[1].forEach((function(e){h.getRow(e).font={bold:!0}})),p.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),l+".xlsx")})),Ga([])}))};(0,i.useEffect)((function(){}),[Ba]);var Dn=function(e,t){var a=e.map((function(e){return e.value})),n=t.map((function(e){return e.value}));return a.length===n.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,S.jsx)("div",{className:"group mb-3 customCard",children:(0,S.jsxs)("div",{className:"group-content row",children:["Hierarchy"==Ze?(0,S.jsxs)(S.Fragment,{children:[1==ca?(0,S.jsx)("span",{className:"backArrow",onClick:function(){ua(!ca),Xt(ca?x.hjJ:x.u1R)},children:ca?(0,S.jsx)(x.hjJ,{}):(0,S.jsx)(x.u1R,{})}):"",(0,S.jsx)("div",{className:"col-md-2 ",children:(0,S.jsxs)(g.V9,{visible:!ca,setvisiblec:"false",children:[0==ca?(0,S.jsxs)("h2",{children:["Resources",(0,S.jsx)("span",{className:"backArrow",onClick:function(){ua(!ca),Xt(ca?x.hjJ:x.u1R)},children:ca?(0,S.jsx)(x.hjJ,{}):(0,S.jsx)(x.u1R,{})})]}):"",(0,S.jsx)(K,{defaultExpandedRows:String(qe),data:me,setHierarchyId:Oe,setLabel:We,setFormData:Pe})]})})]}):"",(0,S.jsxs)("div",{className:0==ca&&"Hierarchy"==Ze?"col-10":"col-12",children:[(0,S.jsxs)("div",{className:"group mb-3 customCard",children:[(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Search Filters"}),(0,S.jsx)("div",{className:"helpBtn",children:(0,S.jsx)(G.Z,{pdfname:"MonthlyRevenueForecast.pdf",name:"Monthly Revenue Forecast Help"})}),(0,S.jsx)("div",{className:"saveBtn",children:(0,S.jsx)(Q.Z,{setEditAddmsg:at,pageurl:et,page_Name:tt,payload:ye})})," ","\xa0",(0,S.jsx)("div",{onClick:function(){Nt(!bt),Ct(bt?j.UdN:j.NR5)},children:(0,S.jsx)("span",{children:St})})]}),(0,S.jsx)(g.V9,{visible:!bt,setvisible:"false",children:(0,S.jsx)("div",{children:(0,S.jsxs)("div",{className:"group-content row",children:[(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Type-select",children:"Type"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("select",{id:"type",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"type",e.target.value))})),Ue(je),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"View","detail"))})),"Hierarchy"===e.target.value&&ua(!1),Re(e.target.value),yt("Hierarchy")},value:null==ln?null===ye||void 0===ye?void 0:ye.type:on.type,children:46===xt?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("option",{id:"Hierarchy",value:"Hierarchy",children:"Hierarchy"}),(0,S.jsx)("option",{value:"project",children:"Project"})]}):800===xt||700==xt?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("option",{id:"",value:"",children:"<<Please Select>>"}),(0,S.jsx)("option",{id:"Hierarchy",value:"Hierarchy",children:"Hierarchy"}),(0,S.jsx)("option",{value:"customer",children:"Customer"}),(0,S.jsx)("option",{value:"project",children:"Project"})]}):307===xt||428==xt?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("option",{id:"",value:"",children:"<<Please Select>>"}),(0,S.jsx)("option",{id:"Hierarchy",value:"Hierarchy",children:"Hierarchy"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("option",{id:"",value:"",children:"<<Please Select>>"}),(0,S.jsx)("option",{id:"Hierarchy",value:"Hierarchy",children:"Hierarchy"}),686==xt||126==xt||250==xt||932==xt||911==xt||908==xt||910==xt||1100==xt||307==xt?(0,S.jsx)("option",{value:"Business Unit",children:"Business Unit"}):"",(0,S.jsx)("option",{value:"customer",children:"Customer"}),(0,S.jsx)("option",{value:"project",children:"Project"}),686==xt||126==xt||250==xt||932==xt||908==xt||910==xt||911==xt?(0,S.jsx)("option",{value:"resource",children:"Resource"}):"",686==xt||126==xt||250==xt||932==xt||911==xt||908==xt||910==xt||307==xt?(0,S.jsx)("option",{value:"Primary PM",children:"Primary PM"}):""]})})})]})}),"Business Unit"===Ze&&686==xt||126==xt&&"customer"!=Ze&&"project"!=Ze&&"resource"!=Ze&&"Hierarchy"!=Ze&&"Primary PM"!=Ze||250==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||911==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||307==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||1100==xt&&"customer"!=Ze&&"project"!=Ze&&"resource"!=Ze&&"Hierarchy"!=Ze&&"Primary PM"!=Ze||1300==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||1200==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||932==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||908==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze||910==xt&&"customer"!=Ze&&"project"!=Ze&&"Hierarchy"!=Ze&&"resource"!=Ze&&"Primary PM"!=Ze?(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Business Unit",children:["Business Unit",(0,S.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"multiselect col-6",ref:function(e){Zt.current[0]=e},children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"BusinessUnit",options:w,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:U,valueRenderer:Dn,disabled:!1,onChange:function(e){Ie(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"BusinessUnit",t.toString()))})),ze(!1)}})})]})}):"","Hierarchy"==Ze||307==xt?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Name",children:["Name"," ",(0,S.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("input",{className:"disableField",name:"Name",type:"text",id:"Name",placeholder:"",value:Je,disabled:!0,defaultValue:Ge,required:!0,readOnly:!0,onChange:function(e){var t=e.target,a=(t.id,t.value);Oe(e.target.value),Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Name",e.target.value))})),Re(a),yt(a),Ee(a),ze(!1)}})})]})}):"","customer"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"customerName",children:["Customer Name",(0,S.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("div",{className:"autoComplete-container react  reactsearchautocomplete",id:"autocomplete reactautocomplete",ref:function(e){Zt.current[0]=e},children:[(0,S.jsx)(B.ReactSearchAutocomplete,{items:I,inputSearchString:ie,type:"Text",name:"Customer",id:"Customer",className:"err cancel",onClear:function(){Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{Customer:""})}))},placeholder:"Type minimum 3 characters",fuseOptions:{keys:["id","name","cust_code"]},resultStringKeyName:"name",onSelect:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},{Customer:e.id})}))},showIcon:!1}),(0,S.jsxs)("span",{children:[" ",Ba.name]})]})})]})}):"","project"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"projectName",children:["Project Name",(0,S.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:" col-6",children:(0,S.jsxs)("div",{className:"autoComplete-container react  reactsearchautocomplete",id:"autocomplete reactautocomplete",ref:function(e){Zt.current[0]=e},children:[(0,S.jsx)(B.ReactSearchAutocomplete,{items:_,type:"Text",inputSearchString:z,name:"Project",id:"Project",className:"err cancel",onClear:function(){Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},{Project:""})}))},placeholder:"Type minimum 3 characters",fuseOptions:{keys:["id","name"]},resultStringKeyName:"name",onSelect:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},{Project:e.id})}))},showIcon:!1}),(0,S.jsxs)("span",{children:[" ",Ba.name]})]})})]})}):"","resource"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Resource Name",children:["Resource Name",(0,S.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 ",children:(0,S.jsxs)("div",{className:"autoComplete-container react  reactsearchautocomplete",id:"autocomplete reactautocomplete",ref:function(e){Zt.current[0]=e},children:[(0,S.jsx)(B.ReactSearchAutocomplete,{items:k,inputSearchString:V,type:"Text",name:"Resource Name",id:"Resource Name",className:"err cancel",onClear:function(){Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Resource Name",""))}))},placeholder:"Type minimum 3 characters",fuseOptions:{keys:["id","name"]},resultStringKeyName:"name",onSelect:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Resource Name",e.id))}))},showIcon:!1}),(0,S.jsxs)("span",{children:[" ",Ba.name]})]})})]})}):"","Primary PM"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Primary PM",children:["Primary PM",(0,S.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 ",children:(0,S.jsxs)("div",{className:"autoComplete-container react  reactsearchautocomplete",id:"autocomplete reactautocomplete",ref:function(e){Zt.current[0]=e},children:[(0,S.jsx)(B.ReactSearchAutocomplete,{items:q,inputSearchString:O,type:"Text",name:"Primary PM",id:"Primary PM",className:"err cancel",onClear:function(){Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Primary PM",""))}))},placeholder:"Type minimum 3 characters",fuseOptions:{keys:["id","name"]},resultStringKeyName:"name",onSelect:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Primary PM",e.id))}))},showIcon:!1}),(0,S.jsxs)("span",{children:[" ",Ba.name]})]})})]})}):"",(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Res.Location",children:"Res.Location"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"ResLocation",options:je,hasSelectAll:!0,value:ee,disabled:!1,valueRenderer:Dn,onChange:function(e){Ue(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"ResLocation",t.toString()))}))}})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Eng.Company",children:"Eng.Company"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"EngCompany",options:xe,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:F,valueRenderer:Dn,onChange:function(e){Le(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"EngCompany",t.toString()))}))},disabled:!1})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"captype",children:"Cap.Type"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:"consol"==ye.View?(0,S.jsx)("select",{id:" captype",name:" captype",className:"disableField",disabled:!0,onChange:function(e){Pe((function(t){var a;return(0,r.Z)((0,r.Z)({},t),{},(a={},(0,s.Z)(a,"captype",e.target.value),(0,s.Z)(a,"capTypeName",e.target.lkup_name),a))}))},value:ye.captype,children:b.map((function(e){return(0,S.jsx)("option",{value:e.value,children:e.label},e.label)}))}):(0,S.jsx)("select",{id:" captype",name:" captype",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"captype",e.target.value))})),"capacity"!==e.target.value&&"available"!==e.target.value||lt(nt)},value:ye.captype,children:b.map((function(e){return(0,S.jsx)("option",{value:e.value,children:e.label},e.label)}))})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"Alloc.Type",children:["Alloc.Type"," ",(0,S.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){Zt.current[1]=e},children:"capacity"==ye.captype||"available"==ye.captype||"consol"==ye.View||"consol"===$?(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"AllocType",className:"disableField",options:nt,hasSelectAll:!0,value:st,disabled:!0,selected:st,valueRenderer:Dn,onChange:function(e){lt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"AllocType",t.toString()))})),ze(!1)}}):(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"AllocType",className:"AllocType",options:nt,hasSelectAll:!0,value:st,disabled:!1,selected:st,valueRenderer:Dn,onChange:function(e){lt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"AllocType",t.toString()))})),ze(!1)}})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-1",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"ResType",children:"Res.Type"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{className:"ResType",id:"ResType",onChange:function(e){return Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"ResType",e.target.value))}))},value:ye.ResType,children:[(0,S.jsx)("option",{value:"all",children:"<<ALL>>"}),(0,S.jsx)("option",{value:"fte",children:"Employee"}),(0,S.jsx)("option",{value:"subk",children:"Contractors"})]})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-1",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Month",children:"Month"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(h(),{id:"month",selected:be,onChange:ge,dateFormat:"MMM-yyyy",showMonthYearPicker:!0})})]})}),(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"View",children:"View"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",id:"View",children:(0,S.jsxs)("div",{className:"row px-1",children:[(0,S.jsx)("div",{className:"col-7",children:"Hierarchy"==Ze||"project"==Ze||"resource"==Ze||"Primary PM"==Ze?(0,S.jsxs)("select",{className:"disableField",disabled:!0,id:"View",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"View",e.target.value))})),Ee(e.target.value)},value:ye.View,children:[(0,S.jsx)("option",{value:"detail",children:"Resource"}),"Business Unit"==Ze?(0,S.jsx)("option",{value:"consol",children:"Business Unit"}):""]}):(0,S.jsxs)("select",{id:"View",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"View",e.target.value))})),Ee(e.target.value)},value:ye.View,children:[(0,S.jsx)("option",{value:"detail",children:"Resource"}),"Business Unit"==Ze?(0,S.jsx)("option",{value:"consol",children:"Business Unit"}):""]})}),(0,S.jsx)("div",{className:"col-5",children:"consol"==$||"consol"==ye.View?(0,S.jsxs)("select",{className:"measure disableField",id:"measure",disabled:!0,value:ye.measure,children:[(0,S.jsx)("option",{value:"hrs",children:"Hrs"}),(0,S.jsx)("option",{value:"percent",children:"%"})]}):(0,S.jsxs)("select",{className:"measure",id:"measure",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"measure",e.target.value))}))},value:ye.measure,children:[(0,S.jsx)("option",{value:"hrs",children:"Hrs"}),(0,S.jsx)("option",{value:"percent",children:"%"})]})})]})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Financialmeasures",children:"Financial Measures"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"Financialmeasures",options:X,hasSelectAll:!0,isLoading:!1,value:ot,selected:ot,valueRenderer:Dn,disableSearch:!1,onChange:function(e){rt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Financialmeasures",t.toString()))}))},disabled:!1})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Contract Terms",children:"Contract Terms"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"ContractTerms",options:Ne,hasSelectAll:!0,value:ae,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,valueRenderer:Dn,onChange:function(e){Fe(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"ContractTerms",t.toString()))}))}})})]})}),"project"==Ze||"customer"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"Source",children:"Source"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{className:"Source",id:"Source",onChange:function(e){Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Source",e.target.value))}))},value:ye.Source,children:[(0,S.jsx)("option",{value:"-1",children:"<<ALL>>"}),(0,S.jsx)("option",{value:"PPM",children:"PPM"}),(0,S.jsx)("option",{value:"Projector",children:"Projector"})]})})]})}):"","project"==Ze||"customer"==Ze?(0,S.jsx)("div",{className:"col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"engLocation",children:"Eng.Location"}),(0,S.jsx)("span",{className:"col-1 ",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"engLocation",options:Be,hasSelectAll:!0,value:Y,valueRenderer:Dn,disabled:!1,onChange:function(e){ke(e);var t=[];e.forEach((function(e){t.push(e.value)})),8!==t.length?Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"engLocation",t.toString()))})):Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"engLocation","-1"))}))}})})]})}):"",(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"CSL",children:"CSL"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"Csl",options:Se,hasSelectAll:!0,value:L,shouldToggleOnHover:!1,disableSearch:!1,selected:L,valueRenderer:Dn,disabled:!1,onChange:function(e){He(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Csl",t.toString()))}))}})})]})}),(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"DP",children:"DP"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(f.NU,{ArrowRenderer:an,id:"Dp",options:Ce,hasSelectAll:!0,value:H,shouldToggleOnHover:!1,disableSearch:!1,selected:H,disabled:!1,valueRenderer:Dn,onChange:function(e){_e(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"Dp",t.toString()))}))}})})]})}),"consol"==ye.View&&"Business Unit"==Ze?(0,S.jsx)("div",{className:" col-md-4 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"SummaryBy",children:["Summary By",(0,S.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){Zt.current[1]=e},children:(0,S.jsx)(f.NU,{ArrowRenderer:an,name:"summaryBy",id:"summaryBy",options:W,hasSelectAll:!0,value:J,selected:J,valueRenderer:Dn,disabled:!1,onChange:function(e){Ye(e);var t=[];e.forEach((function(e){t.push(e.value)})),Pe((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"summaryBy",t.toString()))})),ze(!1)}})})]})}):""]}),(0,S.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-1",children:[(0,S.jsxs)("button",{type:"submit",id:"search",name:"search",className:"btn btn-primary",onClick:function(){aa(!1),ra(!1),ft([]),gt([]),jt([]),ht(!1),vt(!1),pt(!1),Dt([]),Ft([]),Bt([]),Yt(!1),qt(!1),Kt(!1),tn.current.abort(),tn.current=new AbortController,en(!1),Oa(!1);var e=Zt.current.filter((function(e){return null!=e}));Zt.current=e;var t=(0,M.Z)(Zt);if(1==t&&(ze(!0),(0,le.setTimeout)((function(){ze(!1)}),3e3)),!t)if("Hierarchy"==Ze&&ua(!0),"consol"==ye.View){(0,le.setTimeout)((function(){Xe(!0)}),2e3);var a=[];J.map((function(e){switch(e.value){case"Region":a.push(m().post(wa+"/revenuemetricsms/metrics/postRegionUtilization",{BUIds:ye.BusinessUnit,ResType:ye.ResType,FromDt:Me,FBy:"country",Countries:ye.ResLocation,FMeasure:ye.Financialmeasures,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",contTerms:ct,engComps:ut,cslIds:dt,dpIds:mt,UserId:Ge},{signal:tn.current.signal}));break;case"Practice":a.push(m().post(wa+"/revenuemetricsms/metrics/postBUUtilization",{BUIds:ye.BusinessUnit,ResType:ye.ResType,FromDt:Me,FBy:"country",Countries:ye.ResLocation,FMeasure:ye.Financialmeasures,contTerms:ct,engComps:ut,cslIds:dt,dpIds:mt,UserId:Ge},{signal:tn.current.signal}));break;case"Customer":a.push(m().post(wa+"/revenuemetricsms/metrics/postCustomerConsolidation",{BUIds:ye.BusinessUnit,ResType:ye.ResType,FromDt:Me,FBy:"country",Countries:ye.ResLocation,FMeasure:ye.Financialmeasures,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",contTerms:ct,engComps:ut,cslIds:dt,dpIds:mt,UserId:Ge},{signal:tn.current.signal}))}return e.value}));m().all(a).then(m().spread((function(e,t,a){Nn(e,t,a)})))}else Ke()},children:[(0,S.jsx)(j.U41,{})," Search"]}),"Hierarchy"==Ze?"":(0,S.jsxs)("button",{type:"submit",id:"exceptionReports",name:"exceptionReports",className:"btn btn-primary",onClick:function(){La([]),Oa(!1),en(!1);var e=(0,le.setTimeout)((function(){ka(!0)}),2e3);pt(!1),vt(!1),ht(!1),Yt(!1),Kt(!1),qt(!1),Ve.current[2]=new AbortController,m()({method:"post",url:wa+"/revenuemetricsms/metrics/getExceptionReports",signal:Ve.current[2].signal,data:{filterType:"Business Unit"==ye.type?"businessUnit":"Primary PM"==ye.type?"primaryPm":ye.type,contextVal:"Business Unit"==Ze?ye.BusinessUnit:"customer"==Ze?ye.Customer:"project"==Ze?ye.Project:"resource"==Ze?ye["Resource Name"]:"Primary PM"==Ze?ye["Primary PM"]:"",fromDt:Me,countries:ye.ResLocation,resType:ye.ResType,cslIds:dt,dpIds:mt,loggedUserId:Ge}}).then((function(t){La(t.data),Oa(!0),ka(!1),clearTimeout(e);var a=(0,M.Z)(Zt);Xe(!1),!a&&Nt(!bt),Ct(bt?j.UdN:j.NR5)}))},children:[(0,S.jsx)(A.neS,{}),"Exception Reports"]})]})]})})}),"consol"==$?(0,S.jsxs)(S.Fragment,{children:[null!==(l=ye.summaryBy)&&void 0!==l&&l.includes("Region")&&_t?(0,S.jsxs)("div",{className:"my-2",children:[(0,S.jsx)("h2",{children:"Summary By Region"}),(0,S.jsx)(T.Z,{data:Pt,expandedCols:[],colExpandState:[]})]}):" ",null!==(c=ye.summaryBy)&&void 0!==c&&c.includes("Practice")&&Vt?(0,S.jsxs)("div",{className:"my-2",children:[(0,S.jsx)("h2",{children:"Summary By Practice"}),(0,S.jsx)(T.Z,{data:Ut,expandedCols:[],colExpandState:[]})]}):" ",null!==(d=ye.summaryBy)&&void 0!==d&&d.includes("Customer")&&Jt?(0,S.jsxs)("div",{className:"my-2",children:[(0,S.jsx)("h2",{children:"Summary By Customer"}),(0,S.jsx)(E.Z,{data:Et,expandedCols:[],colExpandState:[]})]}):" "]}):"detail"==$&&re&&oe&&Za?(0,S.jsxs)("div",{children:[ce?(0,S.jsxs)("div",{className:"mb-2",children:[(0,S.jsx)("div",{className:"group mb-1 customCard",children:(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Utilization Summary"}),(0,S.jsx)("div",{onClick:function(){aa(!ta),pa(ta?j.UdN:j.NR5)},children:(0,S.jsx)("span",{style:{cursor:"pointer"},children:va})})]})}),(0,S.jsx)(g.V9,{visible:!ta,children:(0,S.jsx)(Z.Z,{data:re,expandedCols:[],colExpandState:[]})})]}):"",ue?(0,S.jsxs)("div",{className:"mb-2",children:[(0,S.jsx)("div",{className:"group mb-1 customCard",children:(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Bench Summary"}),(0,S.jsx)("div",{onClick:function(){ra(!sa),ja(sa?j.UdN:j.NR5)},children:(0,S.jsx)("span",{style:{cursor:"pointer"},children:ga})})]})}),(0,S.jsx)(g.V9,{visible:!sa,children:(0,S.jsx)(Z.Z,{data:oe,expandedCols:[],colExpandState:[]})})]}):"",de?(0,S.jsxs)("div",{className:"",children:[(0,S.jsxs)("div",{className:"collapseHeader revForcast",children:[(0,S.jsx)("div",{className:"leftSection",children:(0,S.jsxs)("div",{className:"legendContainer",children:[(0,S.jsxs)("div",{className:"legend blue",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:"Holiday"})]}),(0,S.jsxs)("div",{className:"legend pink",children:[(0,S.jsx)("div",{className:"legendCircle"}),(0,S.jsx)("div",{className:"legendTxt",children:"Leave"})]}),(0,S.jsx)("button",{id:"actionItems",name:"actionItems",className:"btn btn-primary",onClick:function(){Na(!0),An()},children:"Action Items"})]})}),(0,S.jsxs)("div",{className:"rightSection",children:[(0,S.jsx)("label",{children:"Avg :"}),(0,S.jsxs)("select",{id:"Avg",onChange:function(e){return Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Avg",e.target.value))}))},children:[(0,S.jsx)("option",{value:"",selected:!0}),(0,S.jsx)("option",{value:"ge",children:"\u2265"}),(0,S.jsx)("option",{value:"le",children:"\u2264"}),(0,S.jsx)("option",{value:"gt",children:">"}),(0,S.jsx)("option",{value:"lt",children:"<"}),(0,S.jsx)("option",{value:"eq",children:"\u268c"})]}),(0,S.jsx)("input",{id:"avgtextvalue",name:"avgtextvalue",onChange:function(e){return Pe((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"avgtextvalue",e.target.value))}))}}),"%",(0,S.jsxs)("span",{className:"ml-2 chevronContainer",children:[(0,S.jsx)(A.euR,{cursor:"pointer",size:"2em",onClick:fe}),(0,S.jsx)("span",{children:u()(be).format("MMM-YYYY")}),(0,S.jsx)(A.EnJ,{cursor:"pointer",size:"2em",onClick:he})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(e){Ga("ResourceCapacity"),Pn()}})})]})]}),(0,S.jsx)("div",{className:"mt-2",children:(0,S.jsx)(R.Z,{data:Ae,expandedCols:["emp_cadre","BusinessUnit","Supervisor"],colExpandState:["0","1","Name"],formData:ye,setFormData:Pe,setCapType:De,capType:b,value:"UpdateBillingRate",month:be,setMonth:Te,formattedMonth:Me,setsearchingA:pe,actionPopup:$a,setActionPopup:en,dataAccess:xt})})]}):""]}):"",qa?(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(e){Ga(xn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff With Invalid Email ID"}),(0,S.jsx)(te,{data:xn,expandedCols:["resType","bu","country","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(e){Ga(gn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff Without BU Mapping"}),(0,S.jsx)(te,{data:gn,expandedCols:["resType","bu","country","supervisor","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]})," ",(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(fn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff with non-billable allocations"}),(0,S.jsx)(te,{data:fn,expandedCols:["resType","bu","country","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(pn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Inactive Staff with missing Start/end Dates"}),(0,S.jsx)(te,{data:pn,expandedCols:["resType","bu","country","supervisor","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(un),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Inactive Staff with Allocations after End Date"}),(0,S.jsx)(te,{data:un,expandedCols:["resType","bu","country","supervisor","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(jn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff with missing Designation"}),(0,S.jsx)(te,{data:jn,expandedCols:["resType","bu","country","supervisor","project_mgr","csl","dp","designation"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(dn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2 ",children:[(0,S.jsx)("h2",{children:"Projects with Missing BU"}),(0,S.jsx)(te,{data:dn,expandedCols:["bu","country","project_mgr","csl","dp"],colExpandState:["0","0","project_code"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(mn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff with Bill rate lower than Cost Rate"}),(0,S.jsx)(te,{data:mn,expandedCols:["resType","bu","country","project_mgr","csl","dp"],colExpandState:["0","1","resource_name"]})]}),(0,S.jsx)("span",{children:(0,S.jsx)(D.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){Ga(hn),Pn()}})}),(0,S.jsxs)("div",{className:"mt-2 mb-2",children:[(0,S.jsx)("h2",{children:"Staff with No Cost Rate"}),(0,S.jsx)(te,{data:hn,expandedCols:["resType","bu","country","project_mgr","csl","dp","role_type","designation","cadre"],colExpandState:["0","1","resource_name"]})]})]}):""]}),$e?(0,S.jsx)(P.Z,{handleAbort:function(){tn.current.abort(),Xe(!1)}}):"",ve?(0,S.jsx)(P.Z,{handleAbort:yn}):"",Da?(0,S.jsx)(P.Z,{handleAbort:yn}):"",Qe?(0,S.jsx)(P.Z,{handleAbort:yn}):"",Ya?(0,S.jsx)(P.Z,{handleAbort:yn}):"",ba?(0,S.jsx)(C,{buttonPopup:ba,setButtonPopup:Na,actionItems:Za,setActionItems:Ra,rows:5,actionTable:Ae,handleActionItems:An}):" "]})]})})},oe=a(38262),ie=a(59831);var ce=function(){var e,t,a,c,d,p,h,f=(0,i.useState)(690),g=(0,o.Z)(f,2),x=g[0],y=g[1],b=(0,i.useState)([]),N=(0,o.Z)(b,2),C=(N[0],N[1]),Z=localStorage.getItem("resId"),R=Number(Z)+1,P=(0,i.useState)(600==x||641==x||690==x||930==x?"customer":"Business Unit"),D=(0,o.Z)(P,2),T=D[0],E=D[1],B=(0,i.useState)("Hierarchy"),w=(0,o.Z)(B,2),I=w[0],U=w[1],F=(0,i.useState)([{value:"actualHrs",label:"Actual Hrs"},{value:"allocations",label:"Allocation Hrs"},{value:"approvedHrs",label:"Approved Hrs"},{value:"assigned",label:"Assigned Hrs"},{value:"available",label:"Available Hrs"},{value:"capacity",label:"Net Capacity Hrs"},{value:"unapprovedHrs",label:"Unapproved Hrs"},{value:"actAppr",label:"Variance: Actual - Approved Hrs"},{value:"unassigned",label:"Variance: Allocation - Assigned Hrs"},{value:"allocAct",label:"Variance: Allocation - Actual Hrs"},{value:"allocAppr",label:"Variance: Allocation - Approved Hrs"},{value:"assAct",label:"Variance: Assigned - Actual Hrs"},{value:"assAppr",label:"Variance: Assigned - Approved Hrs"}]),L=(0,o.Z)(F,2),H=L[0],_=L[1],Y=(0,i.useState)([]),k=(0,o.Z)(Y,2),z=k[0],V=k[1],q=(0,i.useState)([]),O=(0,o.Z)(q,2),W=O[0],J=O[1],K=(0,i.useState)([]),G=(0,o.Z)(K,2),Q=G[0],X=G[1],$=(0,i.useState)([]),te=(0,o.Z)($,2),ae=te[0],ne=te[1],le=(0,i.useState)([{}]),ce=(0,o.Z)(le,2),ue=ce[0],de=ce[1],me=(0,i.useState)([]),ve=(0,o.Z)(me,2),pe=ve[0],he=ve[1],fe=(0,i.useState)([]),ge=(0,o.Z)(fe,2),je=ge[0],xe=ge[1],ye=(0,i.useState)([]),be=(0,o.Z)(ye,2),Ne=be[0],Se=be[1],Ce=(0,i.useState)([]),Ze=(0,o.Z)(Ce,2),Re=Ze[0],Ae=Ze[1],Pe=(0,i.useState)([]),De=(0,o.Z)(Pe,2),Te=De[0],Me=De[1],Ee=(0,i.useState)([]),Be=(0,o.Z)(Ee,2),we=Be[0],Ie=Be[1],Ue=(0,i.useState)([]),Fe=(0,o.Z)(Ue,2),Le=Fe[0],He=Fe[1],_e=(0,i.useState)([]),Ye=(0,o.Z)(_e,2),ke=Ye[0],ze=Ye[1],Ve=(0,i.useState)([]),qe=(0,o.Z)(Ve,2),Oe=qe[0],We=qe[1],Je=(0,i.useState)(""),Ke=(0,o.Z)(Je,2),Ge=Ke[0],Qe=Ke[1],Xe=(0,i.useState)([]),$e=(0,o.Z)(Xe,2),et=$e[0],tt=$e[1],at=(0,i.useState)(""),nt=(0,o.Z)(at,2),lt=nt[0],st=nt[1],rt=(0,i.useState)([]),ot=(0,o.Z)(rt,2),it=ot[0],ct=ot[1],ut=(0,i.useState)([{value:"Region",label:"Region"},{value:"Practice",label:"Practice"},{value:"Customer",label:"Customer"}]),dt=(0,o.Z)(ut,2),mt=dt[0],vt=(dt[1],(0,i.useState)([{label:"Region",value:"Region"}])),pt=(0,o.Z)(vt,2),ht=pt[0],ft=pt[1],gt=(0,i.useState)([{value:"capacity",label:"Net Capacity"},{value:"billAppr",label:"Billable Approved Hrs"},{value:"billApprNet",label:"Billable Approved %"},{value:"Revenue",label:"Planned Revenue"},{value:"AssRevenue",label:"Assigned Revenue"},{value:"ActRevenue",label:"Actual Revenue"},{value:"ApprRevenue",label:"Approved Revenue"},{value:"RecRevenue",label:"Recognized Revenue"},{value:"AvgCost",label:"PR Cost Adjusted (Role)"},{value:"NAvgCost",label:"PR Cost  (Role)"},{value:"AcGM",label:"PR GM % Adjusted (Role)"},{value:"NAcGM",label:"PR GM %  (Role)"},{value:"RRCost",label:"RR Cost Adjusted (Role)"},{value:"NRRCost",label:"RR Cost (Role)"},{value:"RRGM",label:"RR GM % Adjusted (Role)"},{value:"NRRGM",label:"RR GM % (Role)"}]),jt=(0,o.Z)(gt,2),xt=jt[0],yt=(jt[1],(0,i.useState)([{label:"Planned Revenue",value:"Revenue"}])),bt=(0,o.Z)(yt,2),Nt=bt[0],St=bt[1],Ct=(0,i.useState)("detail"),Zt=(0,o.Z)(Ct,2),Rt=Zt[0],At=Zt[1],Pt=(0,i.useState)([{}]),Dt=(0,o.Z)(Pt,2),Tt=Dt[0],Mt=Dt[1],Et=(0,i.useState)([]),Bt=(0,o.Z)(Et,2),wt=Bt[0],It=Bt[1],Ut=(0,i.useState)([{}]),Ft=(0,o.Z)(Ut,2),Lt=Ft[0],Ht=Ft[1],_t=(0,i.useState)([]),Yt=(0,o.Z)(_t,2),kt=Yt[0],zt=Yt[1],Vt=(0,i.useState)([]),qt=(0,o.Z)(Vt,2),Ot=qt[0],Wt=(qt[1],(0,i.useState)([])),Jt=(0,o.Z)(Wt,2),Kt=Jt[0],Gt=Jt[1],Qt=(0,i.useState)([]),Xt=(0,o.Z)(Qt,2),$t=Xt[0],ea=Xt[1],ta=(0,i.useState)(!1),aa=(0,o.Z)(ta,2),na=aa[0],la=aa[1],sa=(0,i.useState)(!1),ra=(0,o.Z)(sa,2),oa=ra[0],ia=ra[1],ca=(0,i.useState)(!1),ua=(0,o.Z)(ca,2),da=ua[0],ma=ua[1],va=(0,i.useState)(!1),pa=(0,o.Z)(va,2),ha=pa[0],fa=pa[1],ga=(0,i.useState)(!1),ja=(0,o.Z)(ga,2),xa=ja[0],ya=ja[1],ba=(0,i.useState)([{}]),Na=(0,o.Z)(ba,2),Sa=Na[0],Ca=Na[1],Za=(0,i.useRef)([]),Ra=(0,i.useState)([]),Aa=(0,o.Z)(Ra,2),Pa=Aa[0],Da=Aa[1],Ta=(0,i.useState)(R),Ma=(0,o.Z)(Ta,2),Ea=Ma[0],Ba=Ma[1],wa=localStorage.getItem("resName"),Ia=(0,i.useState)(wa),Ua=(0,o.Z)(Ia,2),Fa=Ua[0],La=Ua[1],Ha=(0,i.useState)([{value:"billable",label:"Billable"},{value:"nonBillUtil",label:"Non Billable Utilized"},{value:"nonBillShad",label:"Non Billable Shadow"},{value:"nonBillEnb",label:"Non Billable Enabled"},{value:"nonBillCliPrep",label:"Non Billable Client Prep"},{value:"nonBillNonUtil",label:"Non Billable Non Utilized"},{value:"nonBillInnov",label:"Non-billable Innovation"}]),_a=(0,o.Z)(Ha,2),Ya=_a[0],ka=_a[1],za=(0,i.useState)(Ya),Va=(0,o.Z)(za,2),qa=Va[0],Oa=Va[1],Wa=(0,i.useState)(""),Ja=(0,o.Z)(Wa,2),Ka=Ja[0],Ga=Ja[1],Qa=(0,i.useState)(!1),Xa=(0,o.Z)(Qa,2),$a=Xa[0],en=Xa[1],tn=(0,i.useState)(j.UdN),an=(0,o.Z)(tn,2),nn=an[0],ln=an[1],sn=(0,i.useRef)([]),rn=(0,se.TH)(),on=new URLSearchParams(rn.search).get("id"),cn=(0,i.useState)(!1),un=(0,o.Z)(cn,2),dn=un[0],mn=un[1],vn=(0,i.useState)([]),pn=(0,o.Z)(vn,2),hn=pn[0],fn=pn[1],gn=(0,i.useState)([]),jn=(0,o.Z)(gn,2),xn=jn[0],yn=jn[1];(0,i.useEffect)((function(){bn()}),[x]);var bn=function(){m().get(zn+"/CommonMS/master/getMenus?loggedUserId=".concat(Z)).then((function(e){var t=e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Monthly Revenue Trend"!==e.display_name&&"Revenue & Margin Variance"!==e.display_name&&"Rev. Projections"!==e.display_name&&"Project Timesheet (Deprecated)"!==e.display_name&&"Financial Plan & Review"!==e.display_name}))),e}));C(t),t.forEach((function(e){"Revenue Metrics"===e.display_name&&yn([e])}));var a=t.find((function(e){return"Revenue Metrics"===e.display_name})).subMenus.find((function(e){return"Monthly Revenue Forecast"===e.display_name})),n=a?a.userRoles.includes("911")?911:a.userRoles.includes("126")?126:a.userRoles.includes("908")?908:a.userRoles.includes("910")?910:a.userRoles.includes("911")&&a.userRoles.includes("46")?1100:a.userRoles.includes("307")&&a.userRoles.includes("932")?250:a.userRoles.includes("690")&&a.userRoles.includes("911")?1200:a.userRoles.includes("641")&&a.userRoles.includes("911")?1300:a.userRoles.includes("690")&&a.userRoles.includes("46")?800:a.userRoles.includes("641")&&a.userRoles.includes("46")?700:a.userRoles.includes("690")&&a.userRoles.includes("641")?600:a.userRoles.includes("690")&&a.userRoles.includes("930")?500:a.userRoles.includes("641")&&a.userRoles.includes("930")?400:a.userRoles.includes("690")?690:a.userRoles.includes("641")?641:a.userRoles.includes("932")?932:a.userRoles.includes("46")?46:a.userRoles.includes("686")?686:a.userRoles.includes("930")?930:a.userRoles.includes("307")&&307:null;y(n),600==n||500==n||400==n?m().get(zn+"/dashboardsms/allocationDashboard/getCustomers?loggedUserId=".concat(Z)).then((function(e){J(e.data)})):641==n||700==n?m().get(zn+"/ProjectMS/project/getCustomersByCsl?loggedUserId=".concat(Z)).then((function(e){J(e.data)})):690==n||800==n?m().get(zn+"/ProjectMS/project/getCustomersByDP?loggedUserId=".concat(Z)).then((function(e){J(e.data)})):930==n?m().get(zn+"/ProjectMS/project/getCustomersbyAe?loggedUserId=".concat(Z)).then((function(e){J(e.data)})):m().get(zn+"/revenuemetricsms/metrics/customers").then((function(e){J(e.data)})),641==n||600==n?m().get(zn+"/SalesMS/MasterController/getCslDropDownData?userId=102007130").then((function(e){var t=[],a=e.data,n=new Set;a.length>0&&a.forEach((function(e){if(!n.has(e.PersonName)){var a={label:e.PersonName,value:e.id};t.push(a),n.add(e.PersonName)}})),t.push({label:"UnAssigned",value:999}),xe(t),null==on&&Se(t)})):m().get(zn+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(Z)).then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.PersonName,value:e.id};t.push(a)})),t.push({label:"UnAssigned",value:999}),xe(t),null==on&&Se(t)})),600==n?m().get(zn+"/CommonMS/master/getDPDropDownData?userId=".concat(Z)).then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.PersonName,value:e.delivery_partner_id};t.push(a)})),t.push({label:"UnAssigned",value:999}),Ae(t),null==on&&Me(t)})):690==n?m().get(zn+"/CommonMS/master/getDPDropDownData?userId=".concat(Z)).then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.PersonName,value:e.id};t.push(a)})),t.push({label:"UnAssigned",value:999}),Ae(t),null==on&&Me(t)})):m().get(zn+"/CommonMS/master/getDPDropDownData?userId=".concat(Z)).then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.PersonName,value:e.id};t.push(a)})),t.push({label:"UnAssigned",value:999}),Ae(t),null==on&&Me(t)})),600==n?m().get(zn+"/ProjectMS/project/getProjectsbyCslDp?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):500==n?m().get(zn+"/ProjectMS/project/getProjectsdpae?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):46==n?m().get(zn+"/ProjectMS/project/getprojectsforPm?userId=".concat(Z)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):400==n?m().get(zn+"/ProjectMS/project/getProjectscslae?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):930===n?m().get(zn+"/CommonMS/master/getProjectsforAE?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):690==n?m().get(zn+"/ProjectMS/project/getProjectsbyDp?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):641==n?m().get(zn+"/ProjectMS/project/getProjectsbycsl?loggedUserId=".concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):800==n?m().get(zn+"/ProjectMS/project/getProjectsforDPPM?userId=".concat(Z,"&resId=").concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):700==n?m().get(zn+"/ProjectMS/project/getProjectsforCSLPM?userId=".concat(Z,"&resId=").concat(Number(Z)+1)).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})):m().get(zn+"/ProjectMS/Audit/getProjectNameandId").then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),Ie(t)})),700!=n&&800!=n&&307!=n&&931!=n||(E("Hierarchy"),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"Hierarchy"})}))),46!=n&&428!=n||(E("project"),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"project"})}))),641!=n&&690!=n&&930!=n||(E("customer"),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"customer"})}))),126!=n&&686!=n&&911!=n&&932!=n&&1100!=n&&1200!=n&&1300!=n&&908!=n&&910!=n||(E("Business Unit"),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"Business Unit"})})))}))};(0,i.useEffect)((function(){m()({method:"get",url:zn+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===on?0:on)}).then((function(e){var t=e.data;fn(t)}))}),[on]);var Nn=(0,i.useState)({}),Sn=(0,o.Z)(Nn,2),Cn=Sn[0],Zn=Sn[1];(0,i.useEffect)((function(){Zn((function(){return null!=on?{type:hn.type,BusinessUnit:null===hn||void 0===hn?void 0:hn.BusinessUnit,ResLocation:hn.ResLocation,EngCompany:hn.EngCompany,captype:hn.captype,AllocType:hn.AllocType,ResType:hn.ResType,View:hn.View,measure:hn.measure,Financialmeasures:hn.Financialmeasures,ContractTerms:hn.ContractTerms,Csl:hn.Csl,Dp:null===hn||void 0===hn?void 0:hn.Dp,summaryBy:hn.summaryBy,Source:hn.Source,engLocation:hn.engLocation,Customer:hn.customer,Project:hn.Project,"Resource Name":hn["Resource Name"],"Primary PM":hn["Primary PM"],Name:hn.Name,hierarchyId:hn.hierarchyId,Avg:hn.Avg,avgtextvalue:hn.avgtextvalue,capTypeName:hn.capTypeName,managerProjects:hn.managerProjects,FromDt:hn.fromDate}:{type:null==on&&(641==x||690==x||600==x)?"customer":"Business Unit",BusinessUnit:"-1",ResLocation:"6,5,3,8,7,1,2",EngCompany:"-1",captype:"capacity",AllocType:"billable,nonBillUtil,nonBillShad,nonBillEnb,nonBillCliPrep,nonBillNonUtil,nonBillInnov",ResType:"all",View:"detail",measure:"hrs",Financialmeasures:"Revenue",ContractTerms:"-1",Csl:"-1",Dp:"-1",summaryBy:"Region",Source:"-1",engLocation:"-1",Customer:"",Project:"","Resource Name":"","Primary PM":"",Name:Ea,hierarchyId:Z,Avg:"",avgtextvalue:"",capTypeName:"",managerProjects:"",FromDt:""}}))}),[hn]);var Rn=(0,i.useState)(""),An=(0,o.Z)(Rn,2),Pn=An[0],Dn=An[1];(0,i.useEffect)((function(){if(null!=on){var e,t,a,n,l,s,r,o,i,c,u,d=Q.filter((function(e){var t;return null===(t=hn.BusinessUnit)||void 0===t?void 0:t.includes(e.value)})),m=Tt.filter((function(e){var t;return null===(t=hn.ResLocation)||void 0===t?void 0:t.includes(e.value)})),v=ue.filter((function(e){var t;return null===(t=Cn.EngCompany)||void 0===t?void 0:t.includes(e.value)})),p=(H.filter((function(e){return hn.captype===e.value})),null===Ya||void 0===Ya?void 0:Ya.filter((function(e){var t;return null===(t=hn.AllocType)||void 0===t?void 0:t.includes(e.value)})));Oa(p);null===(e=hn.Financialmeasures)||void 0===e||e.split(",");var h=null===xt||void 0===xt?void 0:xt.filter((function(e){var t;return+(null===(t=Cn.Financialmeasures)||void 0===t?void 0:t.includes(e.value))})),f=Lt.filter((function(e){var t;return null===(t=hn.ContractTerms)||void 0===t?void 0:t.includes(e.value)})),g=Re.filter((function(e){var t;return+(null===(t=hn.Dp)||void 0===t?void 0:t.includes(e.value))})),j=je.filter((function(e){var t;return null===hn||void 0===hn||null===(t=hn.Csl)||void 0===t?void 0:t.includes(e.value)})),x=mt.filter((function(e){var t;return null===(t=Cn.summaryBy)||void 0===t?void 0:t.includes(e.value)})),y=null===W||void 0===W?void 0:W.filter((function(e){var t;return null===hn||void 0===hn||null===(t=hn.Customer)||void 0===t?void 0:t.includes(e.id)})),b=null===(t=JSON.stringify(null===(a=y[0])||void 0===a?void 0:a.name))||void 0===t?void 0:t.replace(/"/g,""),N=null===we||void 0===we?void 0:we.filter((function(e){var t;return null===hn||void 0===hn||null===(t=hn.Project)||void 0===t?void 0:t.includes(e.id)})),S=null===(n=JSON.stringify(null===(l=N[0])||void 0===l?void 0:l.name))||void 0===n?void 0:n.replace(/"/g,""),C=Oe.filter((function(e){return parseInt(hn["Resource Name"])===e.id})),Z=null===(s=JSON.stringify(null===(r=C[0])||void 0===r?void 0:r.name))||void 0===s?void 0:s.replace(/"/g,""),R=et.filter((function(e){var t;return null===(t=hn["Primary PM"])||void 0===t?void 0:t.includes(e.id)})),A=null===(o=JSON.stringify(null===(i=R[0])||void 0===i?void 0:i.name))||void 0===o?void 0:o.replace(/"/g,""),P=Oe.filter((function(e){return parseInt(null===hn||void 0===hn?void 0:hn.Name)===e.id})),D=null===(c=JSON.stringify(null===(u=P[0])||void 0===u?void 0:u.name))||void 0===c?void 0:c.replace(/"/g,"");if(La(D),st(A),void 0!==hn.FromDt&&""!==hn.FromDt){var T=hn.FromDt;al((0,ie.default)(T))}var M=Le.filter((function(e){var t;return null===(t=Cn.engLocation)||void 0===t?void 0:t.includes(e.value)})),B=(hn.type,"detail");At(B),"-1"==(null===hn||void 0===hn?void 0:hn.engLocation)?ze(Le):ze(M),Dn(b),Ga(S),Qe(Z);var w=null===hn||void 0===hn?void 0:hn.type;ft(x),"-1"==hn.Csl?Se(je):Se(j),"-1"===hn.Dp?Me(Re):Me(g),"-1"==hn.BusinessUnit?ne(Q):ne(d),It(m),"-1"==Cn.EngCompany?he(ue):he(v),St(h),"-1"==hn.ContractTerms?zt(Lt):zt(f),E(w),U("Hierarchy")}}),[on,Ya,null===Cn||void 0===Cn?void 0:Cn.type,Q,Cn.BusinessUnit,Tt,Cn.ResLocation,ue,Cn.EngCompany,H,hn.captype,Cn.AllocType,xt,Cn.Financialmeasures,Lt,hn.contractTerms,Cn.ContractTerms,Cn.summaryBy,hn.Dp,Cn.captype,Cn.engLocation,null===hn||void 0===hn?void 0:hn.Project,we,hn.type,Cn.Csl,Cn.Dp,null===hn||void 0===hn?void 0:hn.Name,hn.BusinessUnit]);var Tn,Mn,En,Bn,wn,In=(0,i.useState)(!1),Un=(0,o.Z)(In,2),Fn=Un[0],Ln=Un[1],Hn=(0,i.useState)(!1),_n=(0,o.Z)(Hn,2),Yn=_n[0],kn=_n[1],zn=v.N.baseUrl,Vn=(0,i.useState)(0),qn=(0,o.Z)(Vn,2),On=qn[0],Wn=qn[1],Jn={fromDate:u()().startOf("month").format("YYYY-MM-DD"),toDate:u()().startOf("month").add("month",0).format("YYYY-MM-DD")},Kn=(0,i.useState)(Jn),Gn=(0,o.Z)(Kn,2),Qn=Gn[0],Xn=Gn[1],$n=(0,i.useState)(u()(Qn.toDate).toDate()),el=(0,o.Z)($n,2),tl=el[0],al=el[1],nl=u()(tl).format("YYYY-MM-DD"),ll=(Number(Z),(0,i.useState)(!1)),sl=(0,o.Z)(ll,2);sl[0],sl[1],(0,i.useEffect)((function(){1===On&&fl()}),[On,Qn,tl]);var rl=null===Cn||void 0===Cn||null===(e=Cn.BusinessUnit)||void 0===e?void 0:e.split(",");Tn=(null===rl||void 0===rl?void 0:rl.length)===(null===Q||void 0===Q?void 0:Q.length)?"-1":null===Cn||void 0===Cn?void 0:Cn.BusinessUnit;var ol=null===(t=Cn.ResLocation)||void 0===t?void 0:t.split(",");(null===ol||void 0===ol?void 0:ol.length)===Tt.length||null===Cn||void 0===Cn||Cn.ResLocation;var il=null===Cn||void 0===Cn||null===(a=Cn.EngCompany)||void 0===a?void 0:a.split(","),cl=null===Cn||void 0===Cn||null===(c=Cn.ContractTerms)||void 0===c?void 0:c.split(",");En=(null===cl||void 0===cl?void 0:cl.length)===(null===Lt||void 0===Lt?void 0:Lt.length)?"-1":null===Cn||void 0===Cn?void 0:Cn.ContractTerms,Mn=(null===il||void 0===il?void 0:il.length)===ue.length?"-1":null===Cn||void 0===Cn?void 0:Cn.EngCompany;var ul=null===(d=Cn.Csl)||void 0===d?void 0:d.split(",");Bn=(null===ul||void 0===ul?void 0:ul.length)===(null===je||void 0===je?void 0:je.length)?"-1":null===Cn||void 0===Cn?void 0:Cn.Csl;var dl=null===Cn||void 0===Cn||null===(p=Cn.Dp)||void 0===p?void 0:p.split(",");wn=(null===dl||void 0===dl?void 0:dl.length)===(null===Re||void 0===Re?void 0:Re.length)?"-1":null===Cn||void 0===Cn?void 0:Cn.Dp;var ml=function(){var e=(0,l.Z)((0,n.Z)().mark((function e(){var t,a,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()({url:zn+"/CostMS/cost/getDepartments"});case 2:t=e.sent,(a=t.data).push({value:999,label:"Non-Revenue Units"}),X(a),null==on&&ne(a.filter((function(e){return e.value>=0}))),l=[],a.forEach((function(e){e.value>=0&&l.push(e.value)})),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"BusinessUnit",l.toString()))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=[];z.forEach((function(t){e.push(t.value)})),Zn((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"Country",e.toString()))}))}),[Le]);var vl=(null===Pa||void 0===Pa?void 0:Pa.map((function(e){return null===e||void 0===e||e.object_id,e.object_id}))).toString();(0,i.useEffect)((function(){"Hierarchy"==T&&null==on&&pl()}),[T]),(0,i.useEffect)((function(){"Hierarchy"==hn.type&&null!=on&&hl()}),[hn.type]);var pl=function(){var e=setTimeout((function(){ya(!0)}),2e3);m()(zn+"/customersms/Customers/getResourcehierarchy?rid=".concat(Z)).then((function(t){t.data;Ca(t.data),ya(!1),clearTimeout(e)}))},hl=function(){var e=setTimeout((function(){ya(!0)}),2e3),t=hn.Name-1;m()(zn+"/customersms/Customers/getResourcehierarchy?rid=".concat(t)).then((function(t){t.data;Ca(t.data),ya(!1),clearTimeout(e)}))},fl=function(){var e=setTimeout((function(){Ln(!0)}),2e3);Za.current[1]=new AbortController;var t=Math.random();m()({method:"post",url:zn+"/revenuemetricsms/metrics/search?cacheBuster=".concat(t),signal:Za.current[1].signal,headers:{"Cache-Control":"no-store",Pragma:"no-cache"},data:{Typ:Cn.captype,ObjectId:"Business Unit"==T?Cn.BusinessUnit:"Hierarchy"==T?Ea:"customer"==T?Cn.Customer:"project"==T?Cn.Project:"resource"==T?Cn["Resource Name"]:"Primary PM"==T?vl:"",FromDt:nl,AllocType:Cn.AllocType,FilterType:"Primary PM"==T?"project":Cn.type,FBy:"country",Countries:Cn.ResLocation,Measure:Cn.measure,ResType:Cn.ResType,FMeasure:Cn.Financialmeasures,PrjSource:Cn.Source,EngCountries:Cn.engLocation,avgFilterType:Cn.Avg,avgFilterVal:Cn.avgtextvalue,contTerms:En,engComps:Mn,SaltKey:"AAAAB3NzaC1yc2EAAAABJQAAAIEAkwFrmz0JNpn8",cslIds:Bn,dpIds:wn,UserId:Z}}).then((function(t){var a=t.data;Ln(!1),clearTimeout(e),ct([]),ma(!0),ct(a[0]),Gt(t.data[1]),ea(t.data[2]),a.length>0&&(ma(!0),la(!0),ia(!0));var n=(0,M.Z)(sn);fa(!1),!n&&en(!$a),ln($a?j.UdN:j.NR5)})).catch((function(e){console.error("An error occurred:",e)}))},gl=null===(h=it.tableData)||void 0===h?void 0:h.map((function(e){return e.Id})),jl=null===gl||void 0===gl?void 0:gl.filter((function(e){return![-1,-2,999].includes(e)}));return(0,i.useEffect)((function(){}),[x]),(0,i.useEffect)((function(){ml(),m()({url:zn+"/revenuemetricsms/metrics/getCompany"}).then((function(e){var t=e.data;de(e.data),he(t.filter((function(e){return e.value>=0})));var a=[];t.forEach((function(e){e.value>=0&&a.push(e.value)})),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"EngagementCompany",a.toString()))}))})),m().get(zn+"/dashboardsms/Dashboard/getCountry").then((function(e){var t=[];t.push({value:0,label:"Others"});var a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.country_name,value:e.id};t.push(a)}));var n=t.sort((function(e,t){var a=e.label.toUpperCase(),n=t.label.toUpperCase();return a<n?-1:a>n?1:0}));He(n),null==on&&ze(t)})),m()({method:"get",url:zn+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),We(t)})),m()({method:"get",url:zn+"/dashboardsms/allocationDashboard/getManagers"}).then((function(e){var t=e.data;tt(t)})),m()({method:"get",url:zn+"/revenuemetricsms/metrics/getreslocation"}).then((function(e){var t=e.data;Mt(e.data),null==on&&It(t.filter((function(e){return e.value>=0})));var a=[];t.forEach((function(e){e.value>=0&&a.push(e.value)})),Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"ResLocation",a.toString()))}))})),m()({method:"get",url:zn+"/revenuemetricsms/metrics/getcontractterms"}).then((function(e){var t=e.data;Ht(e.data),null==on&&zt(t.filter((function(e){return e.value>=0})));var a=[];t.forEach((function(e){e.value>=0&&a.push(e.value)})),null==on&&Zn((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},"ContractTerms",a.toString()))}))}))}),[]),(0,i.useEffect)((function(){m().get(zn+"/revenuemetricsms/metrics/getProjectsByPrimaryMgr?mgrId=".concat(null==on?Cn["Primary PM"]:hn["Primary PM"])).then((function(e){var t=e.data;Da(t)}))}),[Cn["Primary PM"],hn["Primary PM"]]),(0,S.jsxs)("div",{children:[Yn?(0,S.jsxs)("div",{className:"statusMsg error",children:[" ",(0,S.jsx)(A.CSE,{})," Please select valid values for highlighted fields"]}):"",dn?(0,S.jsx)("div",{className:"statusMsg success",children:(0,S.jsxs)("span",{className:"errMsg",children:[(0,S.jsx)(ee.hXj,{size:"1.4em"})," \xa0 Search created successfully."]})}):"",(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne"}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"Monthly Revenue Forecast"})}),(0,S.jsx)("div",{className:"childThree"})]}),(0,S.jsx)(oe.Z,{routes:xn,currentScreenName:["Monthly Revenue Forecast"]}),(0,S.jsx)(re,{capType:H,country:z,setCountry:V,customer:W,departments:Q,selectedDepartments:ae,selectedEngCompany:pe,selectedCsl:Ne,selectedDp:Te,project:we,resourceName:Ge,pmname:lt,selectedEngLocation:ke,resource:Oe,manager:et,summaryBy:mt,selectedSummaryBy:ht,financialMeasures:xt,selectview:Rt,selectedResLocation:wt,selectedContractTerms:kt,tableData:Ot,utilizationSummary:Kt,benchSummary:$t,displayState:na,displayStateA:oa,displayStateB:da,hierarchydata:Sa,searchingA:Fn,setsearchingA:Ln,alldepartments:Tn,addHandler:function(){Wn(1);var e=u()(Qn.fromDate).add("month",1).format("YYYY-MM-DD"),t=u()(Qn.toDate).add("month",1).format("YYYY-MM-DD");Xn({fromDate:e,toDate:t}),al(u()(t).toDate())},subtractHandler:function(){Wn(1);var e=u()(Qn.fromDate).subtract("month",1).format("YYYY-MM-DD"),t=u()(Qn.toDate).subtract("month",1).format("YYYY-MM-DD");Xn({fromDate:e,toDate:t}),al(u()(t).toDate())},handleDateChange:function(e){Wn(0),al(e),Xn((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"toDate",u()(e).format("YYYY-MM-DD")))})),Zn((function(t){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},"FromDt",u()(e).format("YYYY-MM-DD")))})),nl=u()(e).format("YYYY-MM-DD")},setDisplayHierarchy:ya,resLocation:Tt,engCompany:ue,formData:Cn,month:tl,contractTerms:Lt,csl:je,hierarchyId:Ea,dp:Re,projectname:Ka,selecttype:T,setSelectType:E,setType:U,type:I,actionTable:it,setActionTable:ct,setUtilizationSummary:Gt,setBenchSummary:ea,setFormData:Zn,setCapType:_,setMonth:al,formattedMonth:nl,setSelectView:At,engLocation:Le,filteredNumbers:jl,setSearching:fa,searching:ha,setSelectedDepartments:ne,setSelectedResLocation:It,setSelectedContractorTerms:zt,setSelectedEngCompany:he,setSelectedCsl:Se,setSelectedDp:Me,setSelectedSummaryBy:ft,setSelectedEngLocation:ze,loggedUserId:Z,validationmessage:Yn,setValidationMessage:kn,abortController:Za,loggedResourceId:R,setHierarchyId:Ba,setLabel:La,label:Fa,getSearchData:fl,displayHierarchy:xa,visible:$a,setvisible:en,page_Name:"Utilization Analysis",CustomerName:Pn,pageurl:"http://10.11.12.149:3000/#/resource/capacity",setEditAddmsg:mn,alloctype:Ya,setAlloctype:ka,setSelectedalloctype:Oa,selectedalloctype:qa,selectedFinancialMeasures:Nt,setSelectedFinancialMeasures:St,savedSaerchid:on,filterData:hn,allcontractterms:En,allengcompanies:Mn,allcsl:Bn,alldp:wn,setDisplayState:la,setDisplayStateA:ia,setDisplayStateB:ma,dataAccess:x,cheveronIcon:nn,setCheveronIcon:ln,mgrId:vl,managerProjects:Pa})]})}}}]);
//# sourceMappingURL=6605.15f24673.chunk.js.map