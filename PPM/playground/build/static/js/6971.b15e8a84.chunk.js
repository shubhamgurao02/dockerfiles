"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6971],{26971:function(e,t,l){l.d(t,{Z:function(){return le}});var n=l(1413),a=l(4942),i=l(93433),s=l(29439),r=l(72791),o=l(11683),c=l(13400),d=l(74569),u=l.n(d),m=l(34831),p=l(78820),v=l(14651),h=l(11087),g=l(72426),f=l.n(g),x=l(7692),j=(l(68639),l(84127)),b=l(37145),y=l(11167),_=l(59513),A=l.n(_),N=l(77201),D=l(56355),Z=l(70828),C=l(78983),w=l(80184);var S=function(e){for(var t=m.N.baseUrl,l=e.resid,o=e.resourcedata,c=e.setResourcedata,d=e.setValidationMessage,v=e.validationmessage,h=(e.setResourceName,e.setSaveActionMessage),g=e.setDeleteMessage,x=e.handleClick1,j=e.employeeid,_=(e.setsearching,e.searching,e.setAddmsg),S=e.dataAccess,k=(0,r.useState)([]),V=(0,s.Z)(k,2),M=V[0],T=V[1],I=(0,r.useState)(),E=(0,s.Z)(I,2),Y=E[0],H=E[1],P=(0,r.useState)(new Date),F=(0,s.Z)(P,2),R=F[0],B=(F[1],f()(R).format("YYYY-MM-DD")),U=localStorage.getItem("resId"),z=localStorage.getItem("resName"),q=(0,r.useState)(!1),L=(0,s.Z)(q,2),O=L[0],G=L[1],W=(0,r.useState)(!0),K=(0,s.Z)(W,2),X=K[0],Q=K[1],$=(0,r.useState)(!0),J=(0,s.Z)($,2),ee=J[0],te=J[1],le=(0,r.useState)(!1),ne=(0,s.Z)(le,2),ae=ne[0],ie=ne[1],se=(0,r.useState)(!1),re=(0,s.Z)(se,2),oe=(re[0],re[1],(0,r.useState)("")),ce=(0,s.Z)(oe,2),de=ce[0],ue=ce[1],me=(0,r.useState)(!1),pe=(0,s.Z)(me,2),ve=(pe[0],pe[1],(0,r.useState)({})),he=(0,s.Z)(ve,2),ge=he[0],fe=he[1],xe=(0,r.useState)(!1),je=(0,s.Z)(xe,2),be=je[0],ye=je[1],_e=((0,r.useRef)([]),new Date),Ae=new Date(_e.getTime()-(_e.getDay()+2)%7*24*60*60*1e3),Ne=(new Date(Ae.getTime()-6048e5),new Date(_e.getTime()-6048e5)),De=1;De<7;De++){var Ze=new Date(_e.getTime()-24*De*60*60*1e3);Ze<Ne&&(Ne=Ze)}var Ce=(0,r.useState)({created_dt:"",createdby:"",completed_dt:"",effective_dt:"",comments:"",lkup_name:""}),we=(0,s.Z)(Ce,2),Se=we[0],ke=we[1];(0,r.useEffect)((function(){}),[Se]),(0,r.useEffect)((function(){u().get(t+"/fullfilmentms/resourceoverview/actiontypesbillable").then((function(e){var t=[],l=e.data;l.length>0&&l.forEach((function(e){var l={label:e.lkup_name,value:e.id};t.push(l)})),T(l)}))}),[]),(0,r.useEffect)((function(){var e,t;""==(null===(e=o[0])||void 0===e?void 0:e.comments)&&(null===(t=document.getElementsByClassName("p-row-editor-init p-link")[0])||void 0===t||t.click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=o[0])||void 0===t?void 0:t.comments)&&c(o.slice(1,o.length))}),!0)}),200))}),[o]);var Ve=(0,r.useState)([]),Me=(0,s.Z)(Ve,2),Te=(Me[0],Me[1],function(e,n){for(var a=document.getElementsByClassName("error"),i=0;i<a.length;i++)""==e.comments||null==e.comments||""==e.effective_dt||""===a[i].value||"null"===a[i].value||"All"===a[i].value||void 0===a[i].value?(a[i].classList.add("error-block"),d(!0)):a[i].classList.remove("error-block");""==e.comments||"Invalid date"==e.effective_dt||""==e.effective_dt?d(!0):(d(!1),u()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null,created_dt:e.created_dt,created_by:parseInt(U),resource_id:l,typ_category_id:parseInt(null==e.type_id?831:e.type_id),effective_dt:f()(e.effective_dt).format("YYYY-MM-DD"),completed_dt:null,comments:e.comments}}).then((function(e){d(!1),h(!0),setTimeout((function(){h(!1)}),3e3),x(j),G(!1),te(!0),Q(!0)})).catch((function(e){})))}),Ie=function(e){u()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null===e||void 0===e?void 0:e.id,created_dt:f()(null===e||void 0===e?void 0:e.created_dt).format("YYYY-MM-DD"),created_by:parseInt(U),resource_id:l,typ_category_id:parseInt(null===e||void 0===e?void 0:e.lkup_id),effective_dt:f()(null===e||void 0===e?void 0:e.effective_dt).format("YYYY-MM-DD"),completed_dt:B,comments:null===e||void 0===e?void 0:e.comments}}).then((function(e){_(!0),setTimeout((function(){_(!1)}),2e3),x(j),d(!1)}))},Ee=function(){u()({method:"delete",url:t+"/fullfilmentms/resourceoverview/deleteActionDetails?id=".concat(de)}).then((function(e){ie(!1),g(!0),setTimeout((function(){g(!1)}),3e3),x(j)}))};function Ye(e){var t=e.deletePopup,l=e.setDeletePopup;return(0,w.jsx)("div",{children:(0,w.jsxs)(C.Tk,{visible:t,size:"xs",className:"ui-dialog",onClose:function(){return l(!1)},children:[(0,w.jsx)(C.p0,{className:"",children:(0,w.jsx)(C.fl,{children:(0,w.jsx)("span",{className:"",children:"Delete Action Item"})})}),(0,w.jsxs)(C.sD,{children:[(0,w.jsx)("h6",{children:"Are you sure you want to delete Action Item ?"}),(0,w.jsxs)("div",{className:"btn-container center my-2",children:[(0,w.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){Ee()},children:[(0,w.jsx)(p.YK6,{})," Delete"," "]})," ","\xa0 \xa0",(0,w.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){l(!1)},children:[" ",(0,w.jsx)(Z.sQZ,{fontSize:"11px"})," Cancel"," "]})]})]})]})})}return(0,w.jsxs)("div",{className:"darkHeader",children:[(0,w.jsxs)(b.w,{value:o,editMode:"row",showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",paginator:!0,rows:5,onRowEditComplete:function(e){var t=(0,i.Z)(o),l=e.newData;t[e.index]=l,c(t),Te(e.newData),G(!0)},className:"primeReactDataTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],children:[(0,w.jsx)(y.sgG,{field:"created_dt",title:"created_dt",header:"Entry Date",sortable:!0}),(0,w.jsx)(y.sgG,{field:"createdby",header:"Entry By",sortable:!0}),(0,w.jsx)(y.sgG,{field:"lkup_name",header:"Category",sortable:!0,filter:!0,editor:function(e){return t=e,(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("select",{id:"lkup_name",className:"cancel",name:"lkup_name",onChange:function(e){t.editorCallback(e.target.value),M.map((function(l){l.id==e.target.value&&(t.rowData.lkup_name=l.lkup_name,t.rowData.type_id=e.target.value)}))},children:null===M||void 0===M?void 0:M.map((function(e,l){return(0,w.jsx)("option",{value:e.id,selected:e.id==t.rowData.type_id,children:e.lkup_name},l)}))})});var t}}),(0,w.jsx)(y.sgG,{field:"effective_dt",id:"effective_dt",header:"Effective Date",editor:function(e){return function(e,t,l){return(0,w.jsx)("div",{title:e.effective_dt,children:(0,w.jsx)(A(),{className:"error ".concat(!0===v?"error-block":""),name:"effective_dt",selected:Y,id:"effective_dt",value:e.effective_dt,minDate:Ne,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(f()(t).format("DD-MMM-yyyy")),ke((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},"effective_dt",f()(t).format("yyyy-MM-DD")))})),H(t)}})})}(e)},sortable:!0,filter:!0,filterMatchMode:"custom",filterFunction:function(e,t){return null===t||void 0===t||("lte"===t.operator?new Date(e)<=new Date(t.value):"gte"===t.operator?new Date(e)>=new Date(t.value):"equals"!==e||new Date(e).getTime()===new Date(t.value).getTime())},filterElement:(0,w.jsx)("div",{className:"p-field p-grid",children:(0,w.jsx)("div",{className:"p-col-12 p-md-10",children:(0,w.jsx)(N.f,{id:"event_date",placeholder:"Select a date",showIcon:!0,inputClassName:"p-ml-2",selectionMode:"range",dateFormat:"mm/dd/yy",monthNavigator:!0,yearNavigator:!0,yearRange:"2000:2030",showButtonBar:!0,className:"p-datepicker"})})})}),(0,w.jsx)(y.sgG,{field:"completed_dt",header:"Completed Date",sortable:!0}),(0,w.jsx)(y.sgG,{field:"comments",sortable:!0,header:"Comments",editor:function(e){return function(e){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"error-block error",children:(0,w.jsx)("input",{className:"error ".concat(!0===v?"error-block":""),type:"text",id:"comments",name:"comments",value:e.comments,onChange:function(t){e.editorCallback(t.target.value)}})})})}(e)},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,w.jsx)(y.sgG,{style:{display:"none"},rowEditor:!0,header:"Action",headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:{textAlign:"center"},sortable:!0}),(0,w.jsx)(y.sgG,{body:function(e){return(0,w.jsx)("div",{style:{paddingLeft:"55px"},children:z==e.createdby&&""==e.completed_dt&&""!=e.effective_dt&&0==v?(0,w.jsxs)("label",{cursor:"pointer",children:[(0,w.jsx)("input",{type:"checkbox",cursor:"pointer",onClick:function(t){var l=t.target.checked;ye(l),Q(!!be),fe(e),te(!!be),G(!be)},selection:e,onSelectionChange:function(t){return e(t.value)}})," ","\xa0",(0,w.jsx)(p.YK6,{color:"orange",cursor:"pointer",onClick:function(){ie(!0),ue(e.id)}})]}):""})},header:"Action",bodyStyle:{textAlign:"center"},sortable:!0})]}),932==S||307==S?"":(0,w.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,w.jsxs)("button",{className:"btn btn-primary",disabled:O,onClick:function(){!function(){var e={completed_dt:"",created_dt:f()(new Date).format("DD-MMM-yyyy"),createdby:z,effective_dt:"",lkup_name:"",comments:""},t=[];t.push(e),c([].concat(t,(0,i.Z)(o))),G(!0),te(!1),Q(!1)}()},children:[" ",(0,w.jsx)(D.wEH,{})," Add"]})," ",(0,w.jsxs)("button",{className:"btn btn-primary",disabled:X,variant:"contained",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click(),Ie(),te(!0),Q(!0),G(!1),1==be&&Ie(ge)}(),H()},children:[(0,w.jsx)(D.TvB,{})," Save"]})," ",(0,w.jsxs)("button",{className:"btn btn-primary",disabled:ee,onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),G(!1),te(!0),Q(!0)}(),d(!1)},title:"Cancel",size:"1.4em",children:[(0,w.jsx)(Z.sQZ,{fontSize:"11px"})," Cancel"]})]}),ae?(0,w.jsx)(Ye,{deletePopup:ae,setDeletePopup:ie}):""]})},k=l(95269),V=l(5965),M=l(94026);l(62508);var T=function(e){var t,l,i,o,c,d,v,g,b,y,_,A,N=e.tabledata,D=e.formData,Z=e.setFormData,C=e.linkId,T=e.setLinkId,I=e.name,E=e.setName,Y=e.month,H=e.setMonth,P=e.formattedMonth,F=e.setCapType,R=e.capType,B=e.anchorEl,U=e.handleClose,z=e.setAnchorEl,q=e.setActionItemsTable,L=e.actionItemsTable,O=e.dataAccess,G=(0,r.useState)(!1),W=(0,s.Z)(G,2),K=W[0],X=W[1],Q=m.N.baseUrl;function $(e){var t=e.linkId,l=(e.setAnchorEl,(0,r.useState)([])),n=(0,s.Z)(l,2),a=n[0],i=n[1],o=(0,r.useState)(""),c=(0,s.Z)(o,2),d=c[0],m=c[1],v=(0,r.useState)(!1),h=(0,s.Z)(v,2),g=h[0],f=h[1],j=(0,r.useState)(!1),b=(0,s.Z)(j,2),y=b[0],_=b[1],A=(0,r.useState)(!1),N=(0,s.Z)(A,2),D=N[0],Z=N[1],C=(0,r.useState)(!1),k=(0,s.Z)(C,2),V=k[0],M=k[1],T=function(){m(t),u()({method:"get",url:Q+"/fullfilmentms/resourceoverview/ActionTable?resource_id=".concat(t)}).then((function(e){var t=e.data;i(t)}))};return(0,r.useEffect)((function(){T()}),[t]),(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"col-md-12",children:[(0,w.jsxs)("div",{children:[D?(0,w.jsxs)("div",{className:"statusMsg success",children:[(0,w.jsx)(x.hXj,{}),"Action Item Saved Successfully"]}):"",g?(0,w.jsxs)("div",{className:"statusMsg success",children:[(0,w.jsx)(x.hXj,{}),"Updated Successfully"]}):"",V?(0,w.jsxs)("div",{className:"statusMsg error",children:[(0,w.jsx)(p.CSE,{}),"Please provide valid values for highlighted values"]}):"",y?(0,w.jsx)("div",{className:"statusMsg success",children:(0,w.jsxs)("span",{className:"errMsg",children:[(0,w.jsx)(x.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," ","\xa0 Action Item Deleted successfully"]})}):""]}),(0,w.jsx)("div",{className:"col-md-12 mt-2 mb-2",children:(0,w.jsx)("div",{className:"collapseHeader revForcast",children:(0,w.jsx)("div",{className:"leftSection",children:(0,w.jsxs)("span",{style:{color:"#15a7ea"},children:["Action Items (",I,")"]})})})}),(0,w.jsx)("div",{className:"resourceOverviewEmp",children:(0,w.jsx)(S,{resid:t,handleClick1:T,resourcedata:a,setResourcedata:i,setDeleteMessage:_,setSaveActionMessage:Z,employeeid:d,setValidationMessage:M,saveactionmessage:D,validationmessage:V,addmsg:g,setAddmsg:f,dataAccess:O})})]})})}function J(e){var t=e.formData,l=e.linkId,i=e.name,o=e.month,c=e.setMonth,d=(0,r.useState)([]),m=(0,s.Z)(d,2),v=m[0],h=m[1],g=localStorage.getItem("resId"),x=(0,r.useState)([{value:"allocations",label:"Allocation Hrs"},{value:"assigned",label:"Assigned Hrs"},{value:"actualHrs",label:"Actual Hrs"},{value:"approvedHrs",label:"Approved Hrs"},{value:"unapprovedHrs",label:"Unapproved Hrs"},{value:"unassigned",label:" Allocation - Assigned Hrs"},{value:"allocAct",label:"Allocation - Actual Hrs"},{value:"allocAppr",label:" Allocation - Approved Hrs"},{value:"assAct",label:" Assigned - Actual Hrs"},{value:"assAppr",label:" Assigned - Approved Hrs"},{value:"actAppr",label:" Actual - Approved Hrs"}]),b=(0,s.Z)(x,2),y=b[0],_=(b[1],{resourcealloctype:"all",resourcecapType:null===t||void 0===t?void 0:t.captype,FromDt:f()(o).format("yyyy-MM-DD")}),A=(0,r.useState)(_),N=(0,s.Z)(A,2),D=N[0],Z=N[1],C=f()(o).format("yyyy-MM-DD"),S={fromDate:f()(C).startOf("month").format("YYYY-MM-DD"),toDate:f()(C).startOf("month").add("month",0).format("YYYY-MM-DD")},k=(0,r.useState)(S),V=(0,s.Z)(k,2),M=V[0],T=V[1],I=(0,r.useState)(!1),E=(0,s.Z)(I,2),Y=E[0],H=E[1];return(0,r.useEffect)((function(){Y?(h([]),u()({method:"post",url:Q+"/revenuemetricsms/metrics/getResourceTable",data:{Src:"project",Typ:D.resourcecapType,ObjectId:l,FromDt:M.toDate,AllocType:D.resourcealloctype,PrjSource:"-1",contTerms:t.ContractTerms,engComps:t.EngCompany,cslIds:t.Csl,dpIds:t.Dp,UserId:g}}).then((function(e){h(e.data)}))):H(!0)}),[D.resourcealloctype,D.resourcecapType,M.toDate,Y]),(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:"",children:[(0,w.jsx)("div",{className:"col-md-12 mt-2",children:(0,w.jsxs)("div",{className:"collapseHeader revForcast",children:[(0,w.jsxs)("div",{className:"leftSection",children:[(0,w.jsx)("span",{children:i}),(0,w.jsx)("select",{id:"resourcecapType",name:"resourcecapType",defaultValue:t.captype,onChange:function(e){return Z((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,a.Z)({},"resourcecapType",e.target.value))}))},children:null===y||void 0===y?void 0:y.map((function(e){return(0,w.jsx)("option",{selected:t.captype.value,value:e.value,children:e.label},e.label)}))}),(0,w.jsxs)("select",{className:"resourcealloctype",id:"resourcealloctype",onChange:function(e){Z((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,a.Z)({},"resourcealloctype",e.target.value))}))},children:[(0,w.jsx)("option",{value:"all",children:"<<ALL>>"}),(0,w.jsx)("option",{value:"billable",children:"Billable"}),(0,w.jsx)("option",{value:"nonBillUtil",children:"Non Billable Utilized"}),(0,w.jsx)("option",{value:"nonBillShad",children:"Non Billable Shadow"}),(0,w.jsx)("option",{value:"nonBillEnb",children:"Non Billable Enabled"}),(0,w.jsx)("option",{value:"nonBillCliPrep",children:"Non Billable Client Prep"}),(0,w.jsx)("option",{value:"nonBillNonUtil",children:"Non Billable Non Utilized"}),(0,w.jsx)("option",{value:"nonBillInnov",children:"Non-billable Innovation"})]})]}),(0,w.jsx)("div",{className:"rightSection",children:(0,w.jsxs)("span",{className:"ml-2 chevronContainer",children:[(0,w.jsx)(p.euR,{cursor:"pointer",size:"2em",onClick:function(){T((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},"fromDate",f()(M.fromDate).subtract("month",1).format("YYYY-MM-DD")))})),T((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},"toDate",f()(M.toDate).subtract("month",1).format("YYYY-MM-DD")))}))}}),(0,w.jsx)("span",{children:f()(M.toDate).format("MMM-YYYY")}),(0,w.jsx)(p.EnJ,{cursor:"pointer",size:"2em",onClick:function(){T((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},"fromDate",f()(M.fromDate).add("month",1).format("YYYY-MM-DD")))})),T((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},"toDate",f()(M.toDate).add("month",1).format("YYYY-MM-DD")))}))}})]})})]})}),(0,w.jsx)("div",{className:"col-md-12",children:(0,w.jsx)(j.Z,{linkId:l,data:v,expandedCols:[],colExpandState:[],month:o,setMonth:c,resourcedata:D})})]})})}var ee=Boolean(B)?"my-popver":void 0;return(0,w.jsxs)("div",{className:"",children:[(0,w.jsx)(k.ZP,{id:ee,open:Boolean(B),anchorEl:B,onClose:U,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,w.jsxs)("div",{className:"resourcePopup",children:[(0,w.jsxs)(V.Z,{children:[(0,w.jsx)("span",{children:I}),(0,w.jsx)(x.czh,{onClick:U})]}),(0,w.jsx)(M.Z,{children:(0,w.jsxs)("ul",{children:[(0,w.jsx)("li",{children:(0,w.jsx)(h.rU,{to:"/resource/profile/:".concat(C),target:"_blank",children:"View Resource's Profile"})}),"capacity"==(null===(t=e.formData)||void 0===t?void 0:t.captype)?"":(0,w.jsx)("li",{children:(0,w.jsxs)(h.rU,{onClick:function(){X(!0),z(!1)},children:["View Resource's"," ","allocations"==(null===(l=e.formData)||void 0===l?void 0:l.captype)?"Allocation":"assigned"==(null===(i=e.formData)||void 0===i?void 0:i.captype)?"Assignments":"actualHrs"==(null===(o=e.formData)||void 0===o?void 0:o.captype)?"Actual Hrs":"approvedHrs"==(null===(c=e.formData)||void 0===c?void 0:c.captype)?"Approved Hrs":"unapprovedHrs"==(null===(d=e.formData)||void 0===d?void 0:d.captype)?"Unapproved Hrs":"unassigned"==(null===(v=e.formData)||void 0===v?void 0:v.captype)?"Allocation - Assigned Hrs":"allocAct"==(null===(g=e.formData)||void 0===g?void 0:g.captype)?"Allocation - Actual Hrs":"allocAppr"==(null===(b=e.formData)||void 0===b?void 0:b.captype)?"Allocation - Approved Hrs":"assAct"==(null===(y=e.formData)||void 0===y?void 0:y.captype)?"Assigned - Actual Hrs":"assAppr"==(null===(_=e.formData)||void 0===_?void 0:_.captype)?"Assigned - Approved Hrs":"actAppr"==(null===(A=e.formData)||void 0===A?void 0:A.captype)?"Actual - Approved Hrs":""]})}),(0,w.jsx)("li",{children:(0,w.jsx)(h.rU,{onClick:function(){q(!0),z(!1)},children:"Action Items"})})]})})]})}),L?(0,w.jsx)($,{linkId:C,setLinkId:T,name:I,setAnchorEl:z}):K?(0,w.jsx)(J,{resourcePopUp:K,setResourcePopUp:X,tabledata:N,formData:D,setFormData:Z,linkId:C,setLinkId:T,name:I,setName:E,month:Y,setMonth:H,formattedMonth:P,setCapType:F,capType:R,setAnchorEl:z}):""]})},I=l(49177),E=l(34911),Y=l(56637),H=l(53824),P=l(48462),F=l(59170),R=(l(26809),l(6748)),B=l(99259),U=l(66934),z=l(12065),q=l(99651),L=l(41523),O=l(56125),G=l(27336);function W(e){return(0,w.jsx)(B.Z,(0,n.Z)((0,n.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,w.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function K(e){return(0,w.jsx)(B.Z,(0,n.Z)((0,n.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,w.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function X(e){var t=(0,G.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,w.jsx)(G.q.div,{style:t,children:(0,w.jsx)(O.Z,(0,n.Z)({},e))})}var Q=(0,U.ZP)((function(e){var t,l,a,i,s;return(0,w.jsx)("div",{children:(0,r.createElement)(q.Z,(0,n.Z)((0,n.Z)({},e),{},{key:String(null===(t=e.node)||void 0===t?void 0:t.id),nodeId:String(null===(l=e.node)||void 0===l?void 0:l.id),label:null===(a=e.node)||void 0===a?void 0:a.full_name,TransitionComponent:X}),Array.isArray(null===(i=e.node)||void 0===i?void 0:i.subRows)?null===(s=e.node)||void 0===s?void 0:s.subRows.map((function(e){return $(e)})):console.log("coming here?"))})}))((function(e){var t,l=e.theme;return t={},(0,a.Z)(t,"& .".concat(L.Z.iconContainer),{"& .close":{opacity:.3}}),(0,a.Z)(t,"& .".concat(L.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,z.Fq)(l.palette.text.primary,.4))}),t})),$=function(e){return(0,w.jsx)("div",{children:(0,w.jsx)(Q,{node:e})})};function J(e){var t=e.data;console.log(t);var l=function(e,t){if(!Array.isArray(e))return[];t=(0,n.Z)({id:"id",parentId:"parent_id",children:"subRows"},t);var l={},s=[],r=t.children;return null===e||void 0===e||e.forEach((function(e){var i=e[t.id],s=e[t.parentId];l[i]=(0,n.Z)((0,n.Z)((0,a.Z)({},r,[]),e),l[i]),l[s]=l[s]||(0,a.Z)({},r,[]),l[s][r].push(l[i])})),Object.values(l).forEach((function(e){"undefined"===typeof e[t.id]&&s.push.apply(s,(0,i.Z)(e[r]))})),s}(t);console.log(l),console.log(l[0]);var s=function e(t){var l=[String(t.id)];return t.subRows&&t.subRows.length>0&&t.subRows.forEach((function(t){l.push.apply(l,(0,i.Z)(e(t)))})),l}(l[0]);return(0,w.jsx)(R.Z,{"aria-label":"rich object",defaultExpanded:s,defaultCollapseIcon:(0,w.jsx)(W,{}),defaultExpandIcon:(0,w.jsx)(K,{}),sx:{"& .css-1g86id8-MuiTreeItem-content .MuiTreeItem-label":{width:"auto",minwidth:0}},className:"hierarchyTree",children:$(l[0])})}var ee=function(e){e.hierarchyPopUp,e.setHierarchyPopUp;var t=e.anchor,l=e.setAnchor,n=e.hierarchyData,a=(e.hierearchyVisible,e.setHierarchyVisible,e.handleAbort,Boolean(t)?"my-popver":void 0),i=function(){l(!1)};return(0,w.jsx)("div",{className:"",children:(0,w.jsx)(k.ZP,{id:a,open:Boolean(t),anchorEl:t,onClose:i,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,w.jsxs)("div",{className:"hierarchyPopup",children:[(0,w.jsx)(V.Z,{children:(0,w.jsx)(x.czh,{onClick:i})}),(0,w.jsx)(M.Z,{children:(0,w.jsxs)("div",{children:[" ",void 0!=n?(0,w.jsx)(J,{data:n}):" "]})})]})})})},te=l(83854);function le(e){var t=e.data,l=e.expandedCols,d=e.colExpandState,g=e.formData,f=e.setFormData,j=(e.value,e.month),b=e.setMonth,y=e.setsearchingA,_=e.actionPopup,A=e.setActionPopup,N=e.dataAccess,D=(0,r.useState)([]),Z=(0,s.Z)(D,2),C=Z[0],S=Z[1],k=(0,r.useState)(),V=(0,s.Z)(k,2),M=V[0],R=V[1],B=(0,r.useState)(null),U=(0,s.Z)(B,2),z=U[0],q=U[1],L=(0,r.useState)(null),O=(0,s.Z)(L,2),G=O[0],W=O[1],K=(0,r.useState)({}),X=(0,s.Z)(K,2),Q=X[0],$=X[1],J=(0,r.useState)(!1),le=(0,s.Z)(J,2),ne=le[0],ae=le[1],ie=(0,r.useState)([]),se=(0,s.Z)(ie,2),re=(se[0],se[1]),oe=(0,r.useState)(!1),ce=(0,s.Z)(oe,2),de=ce[0],ue=ce[1],me=(0,r.useState)(null),pe=(0,s.Z)(me,2),ve=pe[0],he=pe[1],ge=(0,r.useState)(null),fe=(0,s.Z)(ge,2),xe=fe[0],je=fe[1],be=(0,r.useState)(!1),ye=(0,s.Z)(be,2),_e=ye[0],Ae=ye[1],Ne=m.N.baseUrl,De=(0,r.useRef)(null),Ze=(0,r.useState)(""),Ce=(0,s.Z)(Ze,2),we=Ce[0],Se=Ce[1],ke=(0,r.useState)(!1),Ve=(0,s.Z)(ke,2),Me=Ve[0],Te=Ve[1],Ie={fteActive:(0,w.jsx)("img",{src:I,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fteNotice:(0,w.jsx)("img",{src:Y,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subkActive:(0,w.jsx)("img",{src:H,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),fteInactive:(0,w.jsx)("img",{src:E,alt:"(fte_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Employee"}),subk0:(0,w.jsx)("img",{src:P,alt:"(subk_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Contractor"}),subk2:(0,w.jsx)("img",{src:F,alt:"(subk_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Contractor in notice period"})},Ee=Number(we)-1;(0,r.useEffect)((function(){-1===we||0===we||""===we||isNaN(we)||function(){Se("");var e=setTimeout((function(){Ae(!0)}),2e3);De.current=new AbortController,u()({method:"get",url:Ne+"/customersms/Customers/getResProfileUpwardhierarchy?rid=".concat(Ee),signal:De.current.signal}).then((function(t){var l=t.data,n=null===l||void 0===l?void 0:l.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==Number(Ee)+1}));Se(n),ue(!0),Ae(!1),clearTimeout(e)}))}()}),[we]);var Ye=function(){De.current&&De.current.abort(),Ae(!1)},He=function(e){var t=String(e);if(!0===t.includes(".")){if(!0===t.includes(".00")){var l,n=t,a=(null!=(s=Number(n))&&(null===(l=s)||void 0===l?void 0:l.toFixed(0))).split(".");return a[0]=a[0].replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","),a.join(".")}n=t;var i,s,r=(null!=(s=Number(n))&&(null===(i=s)||void 0===i?void 0:i.toFixed(2))).split(".");return r[0]=r[0].replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","),r.join(".")}return null!=t&&(null===t||void 0===t?void 0:t.replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","))};(0,r.useEffect)((function(){Fe()}),[t.tableData]);var Pe=0,Fe=function(){var e,n,r,o="";o=1==ne&&Pe>0?"expanded":"";var u,m=t.tableData,f=null;null!==t&&void 0!==t&&null!==(e=t.columns)&&void 0!==e&&e.includes("'")?f=null===t||void 0===t||null===(u=t.columns)||void 0===u?void 0:u.replaceAll("'",""):f=null===t||void 0===t?void 0:t.columns;var j=null===(n=f)||void 0===n?void 0:n.split(","),b=null;void 0!=j&&(b=[].concat(["course_1"],(0,i.Z)(j)));for(var y=[],_=[],N={},D=0;D<(null===(Z=b)||void 0===Z?void 0:Z.length);D++){var Z,C=b[D].trim(),k=m[0];N[C]=k[C]}var V=Object.entries(N),M=["Id","action_items"],T=V.filter((function(e){return!M.includes(e[0])}));re(T),T.map((function(e){var t=(0,s.Z)(e,2),n=t[0];t[1];l.includes(n)&&_.push((0,a.Z)({},n,!1))})),$(Object.assign.apply(Object,[{}].concat(_)));var I=null===m||void 0===m?void 0:m.filter((function(e){return-1==e.Id}));T.map((function(e,t){var l=(0,s.Z)(e,2),n=l[0],a=l[1];null===a||void 0===a||a.replace("<br>","");y.push({accessorKey:n,header:a,enableColumnActions:!1,enableHiding:!0,rowspan:5,Header:function(e){e.column;return(0,w.jsxs)("div",{className:n.includes("AcGM")||n.includes("NAcGM")||n.includes("NAvgCost")||n.includes("AvgCost")?"mixer":null!==n&&void 0!==n&&n.includes("_L")||null!==n&&void 0!==n&&n.includes("_N")?"disabledDatesColumn":null!==n&&void 0!==n&&n.includes("manager")?"manager mixer":null!==n&&void 0!==n&&n.includes("Supervisor")?"supervisor mixer":null!==n&&void 0!==n&&n.includes("BusinessUnit")?"businessUnit mixer":null!==n&&void 0!==n&&n.includes("emp_cadre")?"cadre mixer":null!==n&&void 0!==n&&n.includes("Revenue")||null!==n&&void 0!==n&&n.includes("Cost")||null!==n&&void 0!==n&&n.includes("course_1")||null!==n&&void 0!==n&&n.includes("Name")||null!==n&&void 0!==n&&n.includes("emp_cadre")||null!==n&&void 0!==n&&n.includes("BusinessUnit")||null!==n&&void 0!==n&&n.includes("Supervisor")||null!==n&&void 0!==n&&n.includes("manager")||null!==n&&void 0!==n&&n.includes("capacity")||null!==n&&void 0!==n&&n.includes("billAppr")||null!==n&&void 0!==n&&n.includes("billApprNet")||null!==n&&void 0!==n&&n.includes("Total")||null!==n&&void 0!==n&&n.includes("Avg")||null!==n&&void 0!==n&&n.includes("GM")?"mixer":"datesColumn",children:[null!==a&&void 0!==a&&a.includes("<br>")?(0,w.jsx)("div",{title:a.replace("<br>"," "),children:a.replace("<br>"," ")}):(0,w.jsx)("div",{title:a,children:a}),n==d[2]?(0,w.jsx)("span",{className:"expandIcon ".concat(o),children:(0,w.jsx)(c.Z,{onClick:function(){ae((function(e){return!e}))},children:(0,w.jsx)(x.lU2,{})})}):null]})}})}));var E=I&&(null===(r=Object.entries(I[0]))||void 0===r?void 0:r.filter((function(e){return!(null!==M&&void 0!==M&&M.includes(e[0]))})));y.map((function(e){var t=y.indexOf(e);E.map((function(l,n){var a=(0,s.Z)(l,2),i=a[0],r=a[1];if(i==e.accessorKey){var o={id:i,header:(0,w.jsx)("div",{className:i.includes("_L")||null!==i&&void 0!==i&&i.includes("_N")?"disabledDatesColumn":i.includes("_W")?"datesColumn":""==r||null==r||void 0==r?"":"datesColumn",title:r,children:null==r||0==r?null:r}),accessorKey:i,Cell:function(e){var t,l,n=e.cell;return(0,w.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Name"==n.column.id&&null!=n.row.original?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("span",{title:n.getValue().split("_")[0],children:[Ie[n.row.original.Name.split("_")[1]]," ","Total"==n.row.original.Name?(0,w.jsx)("b",{className:"align right",children:" Total"}):"Avg"==n.row.original.Name?(0,w.jsx)("b",{className:"align right",children:" Avg"}):(0,w.jsx)(h.rU,{onClick:function(e){he(e.currentTarget),Te(!1),A(!0),S(n.row.original.Id),R(n.row.original.Name.split("_")[0])},style:{cursor:"pointer"},children:n.getValue().split("_")[0]})]})}):"course_1"==n.column.id&&"Total"!=n.row.original.Name&&"Avg"!=n.row.original.Name&&null!=n.row.original?(0,w.jsx)(w.Fragment,{children:"1"==n.getValue()?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"green legendCircle",title:"ISMS Certified"}),1==n.row.original.action_items&&null!=n.row.original?(0,w.jsx)("span",{className:"exclamation orange",title:"Action Items Exist",children:(0,w.jsx)(p.CSE,{})}):(0,w.jsx)("span",{className:"exclamation gray",title:"No Action Items",children:(0,w.jsx)(p.CSE,{})})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("span",{className:"red legendCircle",title:"ISMS Not Certified"}),0==n.row.original.action_items&&null!=n.row.original?(0,w.jsx)("span",{className:"exclamation gray",title:"No Action Items",children:(0,w.jsx)(p.CSE,{})}):(0,w.jsx)("span",{className:"exclamation orange",title:"Action Items Exist",children:(0,w.jsx)(p.CSE,{})})]})}):"Supervisor"==n.column.id&&null!=n.row.original?(0,w.jsxs)("div",{className:"supervisor",children:["Total"!=n.row.original.Name&&"Avg"!=n.row.original.Name&&(0,w.jsx)("span",{className:"hierarchyIcon",onClick:function(e){je(e.currentTarget),Se(n.row.original.Id)},title:"Hierarchy",style:{cursor:"pointer"},children:(0,w.jsx)(v.DOT,{})}),(0,w.jsx)("span",{title:null===(t=n.getValue())||void 0===t?void 0:t.split("_")[0],children:""+n.getValue()!=""&&null!=n.getValue()?null===(l=n.getValue())||void 0===l?void 0:l.split("_")[0]:""})]}):"BusinessUnit"!==n.column.id||"percent"!=g.measure&&"hrs"!=g.measure?"manager"!==n.column.id||"percent"!=g.measure&&"hrs"!=g.measure?"Avg"==n.column.id&&null!=n.getValue()?(0,w.jsxs)("div",{className:"align right",title:n.getValue(),children:[n.getValue(),"%"]}):null!=n.getValue()&&"leave"==n.getValue().split("_")[1]?(0,w.jsx)("span",{className:"pink align right datesColumn",title:n.getValue().split("_")[0],children:n.getValue().split("_")[0]}):null!=n.getValue()&&n.getValue().includes("0.00")&&(i.includes("_L")||i.includes("_W")||i.includes("_N"))?(0,w.jsx)("span",{className:" align right datesColumn",title:n.getValue().split("_")[0],children:n.getValue().split("_")[0]}):"0_holday"==n.getValue()||"0.00_holday"==n.getValue()?(0,w.jsx)("span",{className:"blue align right datesColumn",title:n.getValue().split("_")[0],children:n.getValue().split("_")[0]}):"percent"==g.measure&&i.includes("billAppr")?(0,w.jsxs)("div",{class:"align right",title:n.getValue(),children:[He(n.getValue()),"%"]}):null!=n.getValue()&&i.includes("_W")?(0,w.jsx)("span",{className:"disabledDatesColumn datesColumn",title:n.getValue(),children:n.getValue()}):null!=n.getValue()&&(i.includes("Revenue")||i.includes("Cost"))?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{title:He(n.getValue()),children:[(0,w.jsx)("span",{children:"$"}),(0,w.jsx)("span",{style:{float:"right"},children:He(n.getValue())})]})}):null==n.getValue()&&(i.includes("Revenue")||i.includes("Cost"))?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{title:He(n.getValue()),children:[(0,w.jsx)("span",{children:"$"}),(0,w.jsx)("span",{style:{float:"right"},children:0})]})}):null!=n.getValue()&&i.includes("billApprNet")?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{class:"align right",title:n.getValue(),children:[He(n.getValue())," %"]})}):"percent"==g.measure&&i.includes("capacity")?(0,w.jsxs)("div",{class:"align right",title:He(n.getValue()),children:[He(n.getValue()),"%"]}):"hrs"==g.measure&&i.includes("billAppr")||"hrs"==g.measure&&i.includes("capacity")?(0,w.jsx)("div",{class:"align right",title:He(n.getValue()),children:He(n.getValue())}):null!=n.getValue()&&(i.includes("GM")||i.includes("billApprNet"))?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{class:"align right",title:n.getValue(),children:[He(n.getValue())," %"]})}):null==n.getValue()&&i.includes("GM")?(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{class:"align right",title:n.getValue(),children:[0," %"]})}):"Name"==n.column.id||"course_1"==n.column.id?(0,w.jsx)("span",{title:n.getValue(),children:n.getValue()}):null!=n.getValue()&&"emp_cadre"==n.column.id?(0,w.jsxs)("div",{class:"align center cadre",title:n.getValue(),children:[" ",n.getValue()]}):"percent"!=g.measure||null==n.getValue()||""==n.getValue()||"Avg"==n.column.id||i.includes("_L")&&i.includes("_W")&&i.includes("_N")?i.includes("_L")||i.includes("_N")?(0,w.jsxs)("div",{class:"disabledDatesColumn ",title:n.getValue(),children:[" ",n.getValue()]}):"Total"==n.column.id||"Avg"==n.column.id?(0,w.jsxs)("div",{class:"align right ",title:n.getValue(),children:[" ",n.getValue()]}):i.includes("_W")?(0,w.jsxs)("div",{class:"disabledDatesColumn datesColumn",title:n.getValue(),children:[" ",n.getValue()]}):"manager"===n.column.id?(0,w.jsx)("div",{class:"manager",title:n.getValue(),children:n.getValue()}):(0,w.jsxs)("div",{class:"align right datesColumn",title:n.getValue(),children:[" ",n.getValue()]}):(0,w.jsxs)("span",{className:"align right datesColumn",title:n.getValue(),children:[n.getValue(),"%"]}):(0,w.jsx)("div",{class:"manager",title:n.getValue(),children:n.getValue()}):(0,w.jsx)("div",{class:"businessUnit",title:n.getValue(),children:n.getValue()})})}};y[t].columns=[o]}}))})),W(y);var Y=null===m||void 0===m?void 0:m.filter((function(e){return-1!==e.Id&&-2!==e.Id}));q(Y)};(0,r.useEffect)((function(){ne?Re():Be()}),[ne]);var Re=function(){Pe++,Fe(),$({})},Be=function(){Fe()};return(0,r.useEffect)((function(){y(!1)}),[z]),(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"materialReactExpandableTable calenderTable darkHeader",children:null!==z&&void 0!==z&&z.length?(0,w.jsx)(o.ZP,{columns:G,data:z,enableRowVirtualization:!0,enablePagination:!1,enableGlobalFilter:!0,enableDensityToggle:!1,enableFullScreenToggle:!1,enableHiding:!1,enableColumnFilters:!1,enableBottomToolbar:!1,enableTopToolbar:!0,enableColumnActions:!1,enableSorting:!1,filterFromLeafRows:!0,initialState:{showGlobalFilter:!0,expanded:!1,density:"compact",columnVisibility:(0,n.Z)({},Q)},state:{columnVisibility:(0,n.Z)({},Q)},defaultColumn:{minSize:30,maxSize:1e3,size:30},muiSearchTextFieldProps:{variant:"outlined"},muiTableContainerProps:{sx:{maxHeight:"50vh"}},muiTableBodyProps:{sx:{"&":{borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc"},"& td":{borderRight:"1px solid #ccc",height:"22px",padding:"0px 5px"}}},muiTableHeadProps:{sx:{"tr:nth-of-type(2) th":{zIndex:"auto"},"& th":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",background:"#f4f4f4 ",padding:"0 5px"}}}}):null}),_?(0,w.jsx)(T,{linkId:C,setLinkId:S,name:M,setName:R,tabledata:t,actionPopup:_,setActionPopup:A,formData:g,setFormData:f,month:j,setMonth:b,anchorEl:ve,handleClose:function(){he(!1)},setAnchorEl:he,actionItemsTable:Me,setActionItemsTable:Te,dataAccess:N}):" ",de&&we.length>0&&void 0!=we.length?(0,w.jsx)(ee,{hierarchyPopUp:de,setHierarchyPopUp:ue,hierarchyData:we,setHiearchyData:Se,anchor:xe,setAnchor:je,hierearchyVisible:_e,setHierarchyVisible:Ae,handleAbort:Ye}):" ",_e?(0,w.jsx)(te.Z,{handleAbort:Ye}):""]})}}}]);
//# sourceMappingURL=6971.b15e8a84.chunk.js.map