"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[130],{10130:function(e,t,n){n.r(t);var s=n(93433),r=n(74165),a=n(4942),l=n(1413),i=n(15861),o=n(29439),c=n(72791),u=n(59513),d=n.n(u),m=n(36167),h=n(74569),f=n.n(h),p=n(34831),x=n(72426),v=n.n(x),j=n(83854),y=(n(41980),n(39122),n(31896),n(81975),n(78820)),g=n(1063),N=n(47477),C=n(32125),S=n(56355),b=n(78983),D=n(38262),Z=n(80184);t.default=function(){var e,t=(0,c.useState)([]),n=(0,o.Z)(t,2),u=n[0],h=n[1],x=new Date,R=(0,c.useState)(new Date(x.getFullYear(),x.getMonth(),1)),_=(0,o.Z)(R,2),M=_[0],w=_[1],E=(0,c.useState)([]),I=(0,o.Z)(E,2),T=I[0],k=I[1],U=(0,c.useState)([]),Y=(0,o.Z)(U,2),A=Y[0],F=Y[1],L=(0,c.useState)([]),O=(0,o.Z)(L,2),q=O[0],P=O[1],H=(0,c.useState)([]),J=(0,o.Z)(H,2),$=J[0],B=J[1],G=(0,c.useState)(S.UdN),V=(0,o.Z)(G,2),X=V[0],z=V[1],K=(0,c.useState)(!1),Q=(0,o.Z)(K,2),W=Q[0],ee=Q[1],te=(0,c.useState)(!1),ne=(0,o.Z)(te,2),se=ne[0],re=ne[1],ae=(0,c.useState)([]),le=(0,o.Z)(ae,2),ie=le[0],oe=le[1],ce=(0,c.useState)(!1),ue=(0,o.Z)(ce,2),de=ue[0],me=ue[1],he=(0,c.useRef)(null),fe=(0,c.useState)([]),pe=(0,o.Z)(fe,2),xe=pe[0],ve=pe[1],je=(0,c.useState)(!1),ye=(0,o.Z)(je,2),ge=ye[0],Ne=ye[1],Ce=localStorage.getItem("resId"),Se=(0,c.useState)([]),be=(0,o.Z)(Se,2),De=be[0],Ze=be[1];(0,c.useEffect)((function(){u[0]&&oe(JSON.parse(JSON.stringify(u[0])));ve(["XLS"])}),[u]);var Re,_e,Me=(0,c.useRef)([]),we=p.N.baseUrl,Ee=(0,c.useState)({buIds:"",country:"",startDate:""}),Ie=(0,o.Z)(Ee,2),Te=Ie[0],ke=Ie[1],Ue=v()(M).format("YYYY-MM-DD"),Ye=Te.buIds.split(",");Re=Ye.length===q.length?"-1":Te.buIds;var Ae=Te.country.split(",");_e=Ae.length===T.length?"-1":Te.country;var Fe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()({url:we+"/CostMS/cost/getDepartments"});case 2:t=e.sent,(n=t.data).push({value:0,label:"Non-Revenue Units"}),P(n),B(n.filter((function(e){return 0!=e.value}))),s=[],n.forEach((function(e){0!=e.value&&s.push(e.value)})),ke((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"buIds",s.toString()))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=[];T.forEach((function(t){e.push(t.value)})),ke((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},"country",e.toString()))}))}),[T]),(0,c.useEffect)((function(){f().get(we+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.country_name,value:e.id};t.push(n)})),k(t),F(t)})),Fe(),f()({method:"GET",url:we+"/CommonMS/master/getMenus?loggedUserId=".concat(Ce)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&Ze([e])}))}))}),[]),(0,c.useRef)("");var Le=function(e){return(0,Z.jsx)("div",{align:"center",title:e.SNo,children:e.SNo})},Oe=function(e){return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Z.jsx)("div",{style:{alignSelf:"flex-start"},children:"$"}),(0,Z.jsx)("div",{style:{alignSelf:"flex-end"},title:e.Cost,children:e.Cost})]})})},qe=function(e){return(0,Z.jsx)("div",{title:e.Cadre,children:""==e.Cadre?"-":e.Cadre})},Pe=function(e){return(0,Z.jsx)("div",{title:""==e.Country?"-":e.Country,className:"ellipsis",children:""==e.Country?"-":e.Country})},He=function(e){return(0,Z.jsx)("div",{title:""==e.Department?"-":e.Department,className:"ellipsis",children:""==e.Department?"-":e.Department})},Je=function(e){return(0,Z.jsx)("div",{title:""==e.Designation?"-":e.Designation,className:"ellipsis",children:""==e.Designation?"-":e.Designation})},$e=function(e){return(0,Z.jsx)("div",{title:""==e.Resource?"-":e.Resource,className:"ellipsis",children:e.Resource})},Be=function(e){return(0,Z.jsx)("div",{title:e["Employee ID"],children:e["Employee ID"]})},Ge=function(e){return(0,Z.jsx)("div",{title:null===e["Role Type"]?"-":e["Role Type"],className:"ellipsis",children:null===e["Role Type"]?"-":e["Role Type"]})},Ve=null===(e=Object.keys(ie))||void 0===e?void 0:e.map((function(e,t){return(0,Z.jsx)(g.s,{sortable:!0,body:"SNo"==e?Le:"Cadre"==e?qe:"Country"==e?Pe:"Department"==e?He:"Designation"==e?Je:"Resource"==e?$e:"Employee ID"==e?Be:"Role Type"==e?Ge:"Cost"==e&&Oe,field:e,header:ie[e]},e)})),Xe=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},ze=function(e){e.expanded;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(S.qL$,{className:"chevronIcon"})})};return(0,Z.jsxs)("div",{children:[de?(0,Z.jsxs)("div",{className:"statusMsg error",children:[(0,Z.jsx)(y.CSE,{})," ","Please select the valid values for highlighted fields"]}):"",(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Contractor Costs"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:De,currentScreenName:["Contractor Costs"]}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"Search Filters"}),(0,Z.jsx)("div",{onClick:function(){ee(!W),z(W?S.UdN:S.NR5)},children:(0,Z.jsx)("span",{children:X})})]}),(0,Z.jsx)(b.V9,{visible:!W,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"country",children:["Country \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){Me.current[0]=e},children:(0,Z.jsx)(m.NU,{id:"country",options:T,hasSelectAll:!0,value:A,disabled:!1,valueRenderer:Xe,ArrowRenderer:ze,onChange:function(e){F(e);var t=[];e.forEach((function(e){t.push(e.value)})),ke((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"country",t.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"bu",children:["BU \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){Me.current[1]=e},children:(0,Z.jsx)(m.NU,{id:"buIds",options:q,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:$,valueRenderer:Xe,ArrowRenderer:ze,disabled:!1,onChange:function(e){B(e);var t=[];e.forEach((function(e){t.push(e.value)})),ke((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"buIds",t.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"startDate",children:["Month \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 datepicker",ref:function(e){Me.current[2]=e},children:(0,Z.jsx)(d(),{selected:M,name:"startDate",onChange:function(e){ke((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},"startDate",v()(e).format("yyyy-MM-DD")))})),w(e)},dateFormat:"MMM-yyyy",maxDate:new Date,showMonthYearPicker:!0})})]})}),(0,Z.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){if((0,C.Z)(Me))return me(!0),void setTimeout((function(){me(!1)}),3e3);re(!0),Ne(!1),he.current=new AbortController,f()({method:"post",url:we+"/administrationms/ContratorCosts/gettabledata",signal:he.current.signal,data:{buIds:Re,countryIds:_e,fromDate:Ue,salaryDecryptSalt:""}}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].SNo=n+1;var r=[].concat([{SNo:"S.No","Employee ID":"Employee ID",Resource:"Resource",Country:"Country",Department:"Department","Role Type":"Role Type",Designation:"Designation",Cadre:"Cadre",Cost:"Cost ($)"}],(0,s.Z)(t));h(r),setTimeout((function(){re(!1),Ne(!0)}),1e3)}))},children:[(0,Z.jsx)(S.U41,{}),"Search"," "]})})]})})]}),(0,Z.jsxs)("div",{className:"col-md-12",children:[se?(0,Z.jsx)(j.Z,{handleAbort:function(){he.current&&he.current.abort(),re(!1)}}):"",ge?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("span",{className:"ft16",style:{color:"#297AB0",align:"center"},children:(0,Z.jsxs)("b",{children:[" ","Contractor Costs for ",v()(M).format("MMM-YYYY")]})}),(0,Z.jsx)(N.Z,{fileName:"ContractorCostData.xls",data:u,rows:10,dynamicColumns:Ve,headerData:ie,setHeaderData:oe,exportData:xe})]}):""]})]})}}}]);
//# sourceMappingURL=130.c54ee78c.chunk.js.map