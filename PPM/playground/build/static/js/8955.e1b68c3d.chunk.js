"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8955],{38955:function(e,t,n){n.r(t),n.d(t,{default:function(){return xe}});var s=n(29439),l=n(72791),a=n(4942),i=n(1413),r=n(36167),o=n(59513),c=n.n(o),d=(n(68639),n(56355)),u=n(78983),m=n(74569),p=n.n(m),f=n(34831),h=n(72426),v=n.n(h),g=n(47477),x=n(1063),j=n(83854),y=(n(72572),n(80184)),N=n(57689),b=n(22804),D=n(72920),S=n(7692),C=(n(49177),n(34911)),_=n(56637),Z=(n(53824),n(48462)),k=(n(59170),n(17425)),w=n(32125),M=n(38262),E=n(24745),I=n(14651),T=n(25763),A=n(93433),B=n(37145),R=n(11167),F=n(77201),O=(n(58620),n(25103)),Y=n(70828),L=n(78820);var P=function(e){for(var t=f.N.baseUrl,n=e.resid,r=e.resourcedata,o=e.setResourcedata,m=e.setValidationMessage,h=e.validationmessage,g=(e.setResourceName,e.setSaveActionMessage),x=e.setDeleteMessage,j=e.handleClick1,N=e.employeeid,b=(e.setsearching,e.searching,e.setAddmsg),D=e.permission,S=(0,l.useState)([]),C=(0,s.Z)(S,2),_=C[0],Z=C[1],k=(0,l.useState)(),w=(0,s.Z)(k,2),M=w[0],E=w[1],I=(0,l.useState)(new Date),T=(0,s.Z)(I,2),O=T[0],P=(T[1],v()(O).format("YYYY-MM-DD")),H=localStorage.getItem("resId"),U=localStorage.getItem("resName"),z=(0,l.useState)(!1),G=(0,s.Z)(z,2),W=G[0],J=G[1],K=(0,l.useState)(!0),V=(0,s.Z)(K,2),q=V[0],X=V[1],Q=(0,l.useState)(!0),$=(0,s.Z)(Q,2),ee=$[0],te=$[1],ne=(0,l.useState)(!1),se=(0,s.Z)(ne,2),le=se[0],ae=se[1],ie=(0,l.useState)(!1),re=(0,s.Z)(ie,2),oe=(re[0],re[1],(0,l.useState)("")),ce=(0,s.Z)(oe,2),de=ce[0],ue=ce[1],me=(0,l.useState)(!1),pe=(0,s.Z)(me,2),fe=(pe[0],pe[1],(0,l.useState)({})),he=(0,s.Z)(fe,2),ve=he[0],ge=he[1],xe=(0,l.useState)(!1),je=(0,s.Z)(xe,2),ye=je[0],Ne=je[1],be=((0,l.useRef)([]),new Date),De=new Date(be.getTime()-(be.getDay()+2)%7*24*60*60*1e3),Se=(new Date(De.getTime()-6048e5),new Date(be.getTime()-6048e5)),Ce=1;Ce<7;Ce++){var _e=new Date(be.getTime()-24*Ce*60*60*1e3);_e<Se&&(Se=_e)}var Ze=(0,l.useState)({created_dt:"",createdby:"",completed_dt:"",effective_dt:"",comments:"",lkup_name:""}),ke=(0,s.Z)(Ze,2),we=ke[0],Me=ke[1];(0,l.useEffect)((function(){}),[we]),(0,l.useEffect)((function(){p().get(t+"/fullfilmentms/resourceoverview/actiontypesbillable").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),Z(n)}))}),[]),(0,l.useEffect)((function(){var e,t;""==(null===(e=r[0])||void 0===e?void 0:e.comments)&&(null===(t=document.getElementsByClassName("p-row-editor-init p-link")[0])||void 0===t||t.click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=r[0])||void 0===t?void 0:t.comments)&&(o(r.slice(1,r.length)),X(!0))}),!0)}),200))}),[r]);var Ee=(0,l.useState)([]),Ie=(0,s.Z)(Ee,2),Te=(Ie[0],Ie[1],function(e,s){for(var l=document.getElementsByClassName("error"),a=0;a<l.length;a++)""==e.comments||null==e.comments||""==e.effective_dt||""===l[a].value||"null"===l[a].value||"All"===l[a].value||void 0===l[a].value?(l[a].classList.add("error-block"),m(!0),X(!0),J(!1)):l[a].classList.remove("error-block");""==e.comments||"Invalid date"==e.effective_dt||""==e.effective_dt?(m(!0),X(!0),J(!1)):(m(!1),p()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null,created_dt:e.created_dt,created_by:parseInt(H),resource_id:n,typ_category_id:parseInt(null==e.type_id?831:e.type_id),effective_dt:v()(e.effective_dt).format("YYYY-MM-DD"),completed_dt:null,comments:e.comments}}).then((function(e){m(!1),g(!0),setTimeout((function(){g(!1)}),3e3),j(N),J(!1),te(!0),X(!0)})).catch((function(e){})))}),Ae=function(e){p()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null===e||void 0===e?void 0:e.id,created_dt:v()(null===e||void 0===e?void 0:e.created_dt).format("YYYY-MM-DD"),created_by:parseInt(H),resource_id:n,typ_category_id:parseInt(null===e||void 0===e?void 0:e.lkup_id),effective_dt:v()(null===e||void 0===e?void 0:e.effective_dt).format("YYYY-MM-DD"),completed_dt:P,comments:null===e||void 0===e?void 0:e.comments}}).then((function(e){b(!0),setTimeout((function(){b(!1)}),2e3),j(N),m(!1)}))},Be=function(){p()({method:"delete",url:t+"/fullfilmentms/resourceoverview/deleteActionDetails?id=".concat(de)}).then((function(e){ae(!1),x(!0),setTimeout((function(){x(!1)}),3e3),j(N)}))};function Re(e){var t=e.deletePopup,n=e.setDeletePopup;return(0,y.jsx)("div",{children:(0,y.jsxs)(u.Tk,{visible:t,size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,y.jsx)(u.p0,{className:"",children:(0,y.jsx)(u.fl,{children:(0,y.jsx)("span",{className:"",children:"Delete Action Item"})})}),(0,y.jsxs)(u.sD,{children:[(0,y.jsx)("h6",{children:"Are you sure you want to delete Action Item ?"}),(0,y.jsxs)("div",{className:"btn-container center my-2",children:[(0,y.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){Be()},children:[(0,y.jsx)(L.YK6,{})," Delete"," "]})," ","\xa0 \xa0",(0,y.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){n(!1)},children:[" ",(0,y.jsx)(Y.sQZ,{fontSize:"11px"})," Cancel"," "]})]})]})]})})}return(0,y.jsxs)("div",{className:"darkHeader",children:[(0,y.jsxs)(B.w,{value:r,editMode:"row",showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",paginator:!0,rows:25,onRowEditComplete:function(e){var t=(0,A.Z)(r),n=e.newData;t[e.index]=n,o(t),Te(e.newData),J(!0)},className:"primeReactDataTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],children:[(0,y.jsx)(R.sgG,{field:"created_dt",title:"created_dt",header:"Entry Date",sortable:!0,body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"created_dt",title:e.created_dt,value:e.created_dt,disabled:!0,type:"text",className:"ellipsis"})})}}),(0,y.jsx)(R.sgG,{field:"createdby",header:"Entry By",sortable:!0,body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"createdby",title:e.createdby,value:e.createdby,disabled:!0,type:"text",className:"ellipsis"})})}}),(0,y.jsx)(R.sgG,{field:"lkup_name",header:"Category",sortable:!0,filter:!0,editor:function(e){return t=e,(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("select",{id:"lkup_name",className:"cancel",name:"lkup_name",onChange:function(e){t.editorCallback(e.target.value),_.map((function(n){n.id==e.target.value&&(t.rowData.lkup_name=n.lkup_name,t.rowData.type_id=e.target.value)}))},children:null===_||void 0===_?void 0:_.map((function(e,n){return(0,y.jsx)("option",{value:e.id,selected:e.id==t.rowData.type_id,children:e.lkup_name},n)}))})});var t},body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"lkup_name",title:e.lkup_name,value:e.lkup_name,disabled:!0,type:"text",className:"ellipsis"})})}}),(0,y.jsx)(R.sgG,{field:"effective_dt",id:"effective_dt",header:"Effective Date",editor:function(e){return function(e,t,n){return(0,y.jsx)("div",{title:e.effective_dt,children:(0,y.jsx)(c(),{className:"error ".concat(!0===h?"error-block":""),name:"effective_dt",selected:M,id:"effective_dt",value:e.effective_dt,minDate:Se,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(v()(t).format("DD-MMM-yyyy")),Me((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"effective_dt",v()(t).format("yyyy-MM-DD")))})),E(t)}})})}(e)},body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"effective_dt",title:e.effective_dt,value:e.effective_dt,disabled:!0,type:"text",className:"ellipsis"})})},sortable:!0,filter:!0,filterMatchMode:"custom",filterFunction:function(e,t){return null===t||void 0===t||("lte"===t.operator?new Date(e)<=new Date(t.value):"gte"===t.operator?new Date(e)>=new Date(t.value):"equals"!==e||new Date(e).getTime()===new Date(t.value).getTime())},filterElement:(0,y.jsx)("div",{className:"p-field p-grid",children:(0,y.jsx)("div",{className:"p-col-12 p-md-10",children:(0,y.jsx)(F.f,{id:"event_date",placeholder:"Select a date",showIcon:!0,inputClassName:"p-ml-2",selectionMode:"range",dateFormat:"mm/dd/yy",monthNavigator:!0,yearNavigator:!0,yearRange:"2000:2030",showButtonBar:!0,className:"p-datepicker"})})})}),(0,y.jsx)(R.sgG,{field:"completed_dt",header:"Completed Date",body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"completed_dt",title:e.completed_dt,value:e.completed_dt,disabled:!0,type:"text",className:"ellipsis"})})},sortable:!0}),(0,y.jsx)(R.sgG,{field:"comments",sortable:!0,header:"Comments",body:function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("input",{id:"comments",title:e.comments,value:e.comments,disabled:!0,type:"text",className:"ellipsis"})})},editor:function(e){return function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"error-block error",children:(0,y.jsx)("input",{className:"error ".concat(!0===h?"error-block":""),type:"text",id:"comments",name:"comments",value:e.comments,onChange:function(t){e.editorCallback(t.target.value)}})})})}(e)},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,y.jsx)(R.sgG,{style:{display:"none"},rowEditor:!0,header:"Action",headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:{textAlign:"center"},sortable:!0}),(0,y.jsx)(R.sgG,{body:function(e){return(0,y.jsx)("div",{style:{paddingLeft:"55px"},children:U==e.createdby&&""==e.completed_dt&&""!=e.effective_dt&&0==h?(0,y.jsxs)("label",{cursor:"pointer",children:[(0,y.jsx)("input",{type:"checkbox",cursor:"pointer",onClick:function(t){var n=t.target.checked;Ne(n),X(!!ye),ge(e),te(!!ye),J(!ye)},selection:e,onSelectionChange:function(t){return e(t.value)}})," ","\xa0",(0,y.jsx)(L.YK6,{color:"orange",cursor:"pointer",onClick:function(){ae(!0),ue(e.id)}})]}):""})},header:"Action",bodyStyle:{textAlign:"center"},sortable:!0})]}),0==D[1].is_write?"":(0,y.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,y.jsxs)("button",{className:"btn btn-primary",disabled:W,title:"Add new row",onClick:function(){!function(){X(!1);var e={completed_dt:"",created_dt:v()(new Date).format("DD-MMM-yyyy"),createdby:U,effective_dt:"",lkup_name:"",comments:""},t=[];t.push(e),o([].concat(t,(0,A.Z)(r))),J(!0),te(!1),X(!1)}()},children:[" ",(0,y.jsx)(d.wEH,{})," Add"]})," ",(0,y.jsxs)("button",{className:"btn btn-primary",disabled:q,variant:"contained",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click(),Ae(),te(!1),X(!1),1==ye&&Ae(ve)}(),E()},children:[(0,y.jsx)(d.TvB,{})," Save"]})," ",(0,y.jsxs)("button",{className:"btn btn-primary",disabled:ee,onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),J(!1),te(!0),X(!0)}(),m(!1)},title:"Cancel",size:"1.4em",children:[(0,y.jsx)(Y.sQZ,{fontSize:"11px"})," Cancel"]})]}),le?(0,y.jsx)(Re,{deletePopup:le,setDeletePopup:ae}):""]})};var H=function(e){for(var t=f.N.baseUrl,n=e.resid,r=e.resourcedata,o=e.setResourcedata,m=e.setValidationMessage,h=e.validationmessage,g=e.setSaveActionMessage,x=e.setDeleteMessage,j=e.handleClick1,N=e.employeeid,b=e.setAddmsg,D=e.setLoader,S=(0,l.useState)([]),C=(0,s.Z)(S,2),_=C[0],Z=C[1],k=(0,l.useState)(!0),w=(0,s.Z)(k,2),M=w[0],E=w[1],I=(0,l.useState)(),T=(0,s.Z)(I,2),O=T[0],P=T[1],H=(0,l.useState)(new Date),U=(0,s.Z)(H,2),z=U[0],G=(U[1],v()(z).format("YYYY-MM-DD")),W=localStorage.getItem("resId"),J=localStorage.getItem("resName"),K=(0,l.useState)(!1),V=(0,s.Z)(K,2),q=V[0],X=V[1],Q=(0,l.useState)(!0),$=(0,s.Z)(Q,2),ee=($[0],$[1]),te=(0,l.useState)(!0),ne=(0,s.Z)(te,2),se=(ne[0],ne[1]),le=(0,l.useState)(!1),ae=(0,s.Z)(le,2),ie=ae[0],re=ae[1],oe=(0,l.useState)(!1),ce=(0,s.Z)(oe,2),de=(ce[0],ce[1],(0,l.useState)("")),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],fe=(0,l.useState)(!1),he=(0,s.Z)(fe,2),ve=(he[0],he[1],(0,l.useState)({})),ge=(0,s.Z)(ve,2),xe=ge[0],je=ge[1],ye=(0,l.useState)(!1),Ne=(0,s.Z)(ye,2),be=Ne[0],De=Ne[1],Se=new Date,Ce=new Date(Se.getTime()-(Se.getDay()+2)%7*24*60*60*1e3),_e=(new Date(Ce.getTime()-6048e5),new Date(Se.getTime()-6048e5)),Ze=1;Ze<7;Ze++){var ke=new Date(Se.getTime()-24*Ze*60*60*1e3);ke<_e&&(_e=ke)}var we=(0,l.useState)({created_dt:"",entryby:"",completed_dt:"",effective_dt:"",comments:"",lkup_name:""}),Me=(0,s.Z)(we,2),Ee=Me[0],Ie=Me[1];(0,l.useEffect)((function(){}),[Ee]),(0,l.useEffect)((function(){D(!0),p().get(t+"/fullfilmentms/resourceoverview/actiontypesbillable").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),Z(n),D(!1)})).catch((function(e){return console.log(e)}))}),[]);var Te=function(e){Object.keys(e).forEach((function(t){if(["",null,void 0," "].includes(e[t]))return o(r.slice(1)),void X((function(e){return!e}))}))},Ae=document.getElementsByClassName("p-paginator-next p-paginator-element p-link"),Be=document.getElementsByClassName("p-paginator-last p-paginator-element p-link"),Re=(0,l.useRef)(null);(0,l.useEffect)((function(){var e,t,n,s=r[0];if(null===(e=Ae[0])||void 0===e||e.addEventListener("click",(function(){Te(s)})),null===(t=Be[0])||void 0===t||t.addEventListener("click",(function(){Te(s)})),""==(null===(n=r[0])||void 0===n?void 0:n.comments)){var l=document.getElementsByClassName("p-row-editor-init p-link")[0];l.setAttribute("title","Edit selected row"),l.click(),setTimeout((function(){document.getElementsByClassName("p-row-editor-save p-link")[0].setAttribute("title","Save row");var e=document.getElementsByClassName("p-row-editor-cancel p-link")[0];e.setAttribute("title","Cancel row editing"),null===e||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=r[0])||void 0===t?void 0:t.comments)&&(o(r.slice(1,r.length)),E(!0),X(!1),m(!1),Re.current.forceUpdate())}),!0)}),200)}}),[r]);var Fe=function(e,s){""==e.comments||"Invalid date"==e.effective_dt||""==e.effective_dt?(console.log("inline208-----------------------"),m(!0)):(console.log("inline-210-----------------------"==e.comments),p()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null,created_dt:e.created_dt,created_by:parseInt(W),resource_id:n,typ_category_id:parseInt(null==e.type_id?831:e.type_id),effective_dt:v()(e.effective_dt).format("YYYY-MM-DD"),completed_dt:null,comments:e.comments}}).then((function(e){g(!0),setTimeout((function(){g(!1)}),3e3),b(!0),setTimeout((function(){b(!1)}),3e3),setTimeout((function(){D(!1)}),1e3),j(N),se(!0),ee(!0),E(!0),X(!1),m(!1)})).catch((function(e){console.log(e)})))},Oe=function(e){""==e.comments||"Invalid date"==e.effective_dt||""==e.effective_dt?(console.log("inline208-----------------------"),m(!0)):p()({method:"post",url:t+"/fullfilmentms/resourceoverview/UpdateActiontableitems",data:{id:null===e||void 0===e?void 0:e.id,created_dt:v()(null===e||void 0===e?void 0:e.created_dt).format("DD-MMM-YYYY"),created_by:parseInt(W),resource_id:n,typ_category_id:null==parseInt(null===e||void 0===e?void 0:e.lkup_id)?831:parseInt(null===e||void 0===e?void 0:e.lkup_id),effective_dt:v()(null===e||void 0===e?void 0:e.effective_dt).format("DD-MMM-YYYY"),completed_dt:G,comments:null===e||void 0===e?void 0:e.comments}}).then((function(e){j(N),m(!1),se(!1)})).catch((function(e){return console.log(e)}))},Ye=function(){p()({method:"delete",url:t+"/fullfilmentms/resourceoverview/deleteActionDetails?id=".concat(me)}).then((function(e){re(!1),x(!0),setTimeout((function(){x(!1)}),3e3),j(N)}))};function Le(e){var t=e.deletePopup,n=e.setDeletePopup;return(0,y.jsx)("div",{children:(0,y.jsxs)(u.Tk,{visible:t,size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,y.jsx)(u.p0,{className:"",children:(0,y.jsx)(u.fl,{children:(0,y.jsx)("span",{className:"",children:"Delete Action Item"})})}),(0,y.jsxs)(u.sD,{children:[(0,y.jsx)("h6",{children:"Are you sure you want to delete Action Item ?"}),(0,y.jsxs)("div",{className:"btn-container center my-2",children:[(0,y.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){Ye()},children:[(0,y.jsx)(L.YK6,{})," Delete"," "]})," ","\xa0 \xa0",(0,y.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){n(!1)},children:[" ",(0,y.jsx)(Y.sQZ,{fontSize:"11px"})," Cancel"," "]})]})]})]})})}return(0,y.jsxs)("div",{className:"p-fluid  mb-2 darkHeader",children:[(0,y.jsxs)(B.w,{className:"primeReactDataTable eventsTable",value:r,editMode:"row",showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",paginator:!0,rows:10,tableStyle:{minWidth:"auto",width:"auto"},onRowEditComplete:function(e){var t=(0,A.Z)(r),n=e.newData;t[e.index]=n,o(t),Fe(e.newData),X(!0)},paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],children:[(0,y.jsx)(R.sgG,{field:"created_dt",title:"created_dt",header:"Entry Date",sortable:!0,style:{width:"30px"},body:function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},children:v()(e.created_dt).format("DD-MMM-YYYY")})}}),(0,y.jsx)(R.sgG,{field:"entryby",header:"Entry By",sortable:!0}),(0,y.jsx)(R.sgG,{field:"lkup_name",header:"Category",sortable:!0,filter:!0,editor:function(e){return t=e,(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("select",{id:"lkup_name",className:"cancel",name:"lkup_name",onChange:function(e){t.editorCallback(e.target.value),_.map((function(n){n.id==e.target.value&&(t.rowData.lkup_name=n.lkup_name,t.rowData.type_id=e.target.value)}))},children:null===_||void 0===_?void 0:_.map((function(e,n){return(0,y.jsx)("option",{value:e.id,selected:e.id==t.rowData.type_id,children:e.lkup_name},n)}))})});var t}}),(0,y.jsx)(R.sgG,{field:"effective_dt",id:"effective_dt",header:"Effective Date",editor:function(e){return function(e,t,n){return(0,y.jsx)(c(),{className:"error ".concat(h&&!e.rowData.effective_dt?"error-block":""),name:"effective_dt",selected:O,id:"effective_dt",value:e.effective_dt,minDate:_e,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(v()(t).format("DD-MMM-yyyy")),Ie((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"effective_dt",v()(t).format("yyyy-MM-DD")))})),P(t)},onKeyDown:function(e){e.preventDefault()}})}(e)},sortable:!0,style:{width:"10px"},filter:!0,body:function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},children:v()(e.effective_dt).format("DD-MMM-YYYY")})},filterMatchMode:"custom",filterFunction:function(e,t){return null===t||void 0===t||("lte"===t.operator?new Date(e)<=new Date(t.value):"gte"===t.operator?new Date(e)>=new Date(t.value):"equals"!==e||new Date(e).getTime()===new Date(t.value).getTime())},filterElement:(0,y.jsx)("div",{className:"p-field p-grid",children:(0,y.jsx)("div",{className:"p-col-12 p-md-10",children:(0,y.jsx)(F.f,{id:"event_date",placeholder:"Select a date",showIcon:!0,inputClassName:"p-ml-2",selectionMode:"range",dateFormat:"mm/dd/yy",monthNavigator:!0,yearNavigator:!0,yearRange:"2000:2030",showButtonBar:!0,className:"p-datepicker"})})})}),(0,y.jsx)(R.sgG,{field:"completed_dt",header:"Completed Date",sortable:!0,style:{width:"30px"},body:function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},children:e.completed_dt?v()(e.completed_dt).format("DD-MMM-YYYY"):""})}}),(0,y.jsx)(R.sgG,{field:"comments",sortable:!0,header:"Comments",editor:function(e){return function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:(0,y.jsx)("input",{className:"error ".concat(h&&!e.rowData.comments?"error-block":""),type:"text",id:"comments",name:"comments",value:e.comments,onChange:function(t){e.editorCallback(t.target.value)}})})})}(e)},filter:!0,style:{width:"270px"},body:function(e){return(0,y.jsx)("span",{title:e.comments,style:{textAlign:"left",display:"block"},className:"ellipsis",children:e.comments})},filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,y.jsx)(R.sgG,{style:{display:"none",width:"10px"},rowEditor:!0,header:"Action",headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:{textAlign:"center"},sortable:!0}),(0,y.jsx)(R.sgG,{body:function(e){var t=e.entryby.split(/\s+/).join(" ");return console.log(J==t),(0,y.jsx)("div",{children:J==t&&""==e.completed_dt&&""!==e.effective_dt?(0,y.jsxs)("label",{cursor:"pointer",children:[(0,y.jsx)("input",{type:"checkbox",cursor:"pointer",onClick:function(t){var n=t.target.checked;De(n),ee(!!be),je(e),se(!!be),X(!be)},selection:e,onSelectionChange:function(t){return e(t.value)}})," ","\xa0",(0,y.jsx)(L.YK6,{color:"orange",cursor:"pointer",onClick:function(){re(!0),pe(e.id)}})]}):""})},header:"Action",bodyStyle:{textAlign:"center"},sortable:!0})]}),(0,y.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,y.jsxs)("button",{className:"btn btn-primary",disabled:q,onClick:function(){!function(){document.getElementsByClassName("p-paginator-first p-paginator-element p-link")[0].click(),q||(X(!0),E(!1));var e={completed_dt:"",created_dt:v()(new Date).format("DD-MMM-YYYY"),entryby:J,effective_dt:"",lkup_name:"",comments:""},t=[];t.push(e),o([].concat(t,(0,A.Z)(r))),X(!0),se(!1),ee(!1)}()},children:[" ",(0,y.jsx)(d.wEH,{})," Add"]})," ",(0,y.jsxs)("button",{className:"btn btn-primary",disabled:M,variant:"contained",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click(),Oe(),se(!0),ee(!0),X(!1),1==be&&Oe(xe)}(),P()},children:[(0,y.jsx)(d.TvB,{})," Save"]})," ",(0,y.jsxs)("button",{className:"btn btn-primary",disabled:M,onClick:function(){!function(){var e;m(!1),null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),X(!1),se(!0),ee(!0)}()},title:"Cancel",size:"1.4em",children:[(0,y.jsx)(Y.sQZ,{fontSize:"11px"})," Cancel"]})]}),ie?(0,y.jsx)(Le,{deletePopup:ie,setDeletePopup:re}):""]})},U=n(25415),z=n.n(U),G=n(87890);var W=function(e){var t=e.data,a=e.rows,r=e.excelData,o=(e.col,e.headerdatagroup,e.linkColumns,e.linkColumnsRoutes,e.dynamicColumns),c=e.headerData,d=e.setHeaderData,u=e.exportData,m=e.customFilters,p=e.customFilterValue,f=e.setCustomFilterValue,h=e.fileName,v=(0,l.useState)([]),g=(0,s.Z)(v,2),x=g[0],j=g[1],N=(0,l.useState)([]),b=(0,s.Z)(N,2),D=b[0],S=b[1],C=(0,l.useState)([]),_=(0,s.Z)(C,2),Z=(_[0],_[1]),k=(0,l.useRef)(null);(0,l.useEffect)((function(){j(JSON.parse(JSON.stringify(t)))}),[t]),(0,l.useEffect)((function(){if(x.length>0){d(x[0]),S(x.splice(1));var e=[],t=x[0];Object.keys(t).forEach((function(n){e.push({title:n,dataKey:t[n]})})),Z(e)}}),[x]);var w={contains:{value:null,matchMode:G.a6.CONTAINS}},M=(0,l.useState)({global:w.contains}),E=(0,s.Z)(M,2),I=E[0],T=E[1];(0,l.useEffect)((function(){T({global:w.contains})}),[c]);var R=(0,l.useState)(""),F=(0,s.Z)(R,2),Y=F[0],L=F[1],P=function(e){var t=e.target.value,n=(0,i.Z)({},I);n.global.value=t,T(n),L(t)},H=function(){var e=m;if("select"===e.type)return(0,y.jsx)("select",{id:e.id,onChange:function(e){f(e.target.value)},children:Object.keys(e.data).map((function(t){return(0,y.jsx)("option",{selected:p==t,value:t,children:e.data[t]})}))})},U=function(){Promise.resolve().then(n.bind(n,34045)).then((function(e){for(var t=Object.keys(r[0]),n=((0,A.Z)(new Set(t)),["empId","resource","designation","department","LoB","cadre_code","skillGrps","Skill","emp_citizenship","projected","status","resAllocType","actionDt","actionEffDt","actionItem","supervisor","aging","customer","nectCap","billHrs","availHrs","nbHrs"]),s=r.map((function(e){return n.map((function(t){var n=e[t];if("revenue"===t&&"string"===typeof n){var s=parseFloat(n);return isNaN(s)?n:s.toLocaleString()}return"scheduledDate"===t&&moment(n).isValid()?moment(n).format("DD-MMM-YYYY"):n}))})),l=s.map((function(e){return Object.values(e)})),a=new(z().Workbook),i=a.addWorksheet(h),o=0;o<l.length;o++)i.addRow(l[o]);[1].forEach((function(e){i.getRow(e).font={bold:!0}})),a.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});saveAs(t,h)}))}))},W=(null===u||void 0===u||u.includes("PRINT"),(0,y.jsxs)("div",{className:"flex  flex-row-reverse",children:[void 0!=m&&(0,y.jsx)("span",{children:(0,y.jsx)(H,{})}),(0,y.jsx)("div",{className:"exportBtn ml-3",children:(null===u||void 0===u?void 0:u.includes("XLS"))&&(0,y.jsx)("span",{className:"pi pi-file-excel excel",onClick:U,title:"Export to Excel"})}),(0,y.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,y.jsx)("i",{className:"pi pi-search"}),(0,y.jsx)(O.o,{defaultValue:Y,onChange:P,placeholder:"Keyword Search"})]})]}));return(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"card darkHeader",children:Object.keys(c).length>0&&(0,y.jsx)(B.w,{paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:D,paginator:!0,showGridlines:!0,rows:a,dataKey:"id",filters:I,responsiveLayout:"scroll",header:W,emptyMessage:(0,y.jsx)("center",{children:"No Records found."}),ref:function(e){k.current=e},className:"primeReactDataTable ",children:o})})})};var J=function(){var e,t=(0,l.useState)(new Date),n=(0,s.Z)(t,2),o=n[0],m=(n[1],(0,l.useState)(!1)),h=(0,s.Z)(m,2),g=h[0],E=h[1],A=localStorage.getItem("resId"),B=(v()(o).format("yyyy-MM-DD"),(0,l.useState)([])),R=(0,s.Z)(B,2),F=R[0],O=R[1],Y=(0,l.useState)([]),P=(0,s.Z)(Y,2),U=P[0],G=P[1],J=(0,l.useState)(!1),K=(0,s.Z)(J,2),V=K[0],q=K[1],X=(0,l.useState)(d.UdN),Q=(0,s.Z)(X,2),$=Q[0],ee=Q[1],te=(0,l.useState)([]),ne=(0,s.Z)(te,2),se=ne[0],le=ne[1],ae=(0,l.useState)([]),ie=(0,s.Z)(ae,2),re=ie[0],oe=ie[1],ce=(0,l.useState)(!1),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=l.useState(!1),fe=(0,s.Z)(pe,2),he=(fe[0],fe[1]),ve=(0,l.useState)([]),ge=(0,s.Z)(ve,2),xe=ge[0],je=ge[1],ye=(0,l.useState)([]),Ne=(0,s.Z)(ye,2),be=Ne[0],De=Ne[1],Se=(0,l.useState)([]),Ce=(0,s.Z)(Se,2),_e=Ce[0],Ze=Ce[1],ke=(0,l.useState)([]),we=(0,s.Z)(ke,2),Me=we[0],Ee=we[1],Ie=(0,l.useState)([]),Te=(0,s.Z)(Ie,2),Ae=Te[0],Be=Te[1],Re=(0,l.useState)(!1),Fe=(0,s.Z)(Re,2),Oe=(Fe[0],Fe[1]),Ye=(0,l.useState)([]),Le=(0,s.Z)(Ye,2),Pe=Le[0],He=Le[1],Ue=(0,l.useState)([]),ze=(0,s.Z)(Ue,2),Ge=ze[0],We=ze[1],Je=(0,l.useState)(!1),Ke=(0,s.Z)(Je,2),Ve=Ke[0],qe=Ke[1],Xe=(0,l.useState)(st(new Date)),Qe=(0,s.Z)(Xe,2),$e=Qe[0],et=Qe[1],tt=(0,l.useState)(function(e){var t=(e.getDay()+1)%7+1,n=e.getTime()-864e5*t,s=new Date(n);return s}($e)),nt=(0,s.Z)(tt,2);function st(e){var t=e.getDay(),n=6===t?1:t+1,s=new Date(e);return s.setDate(e.getDate()-n),s}nt[0],nt[1];var lt=(0,l.useState)(!1),at=(0,s.Z)(lt,2),it=at[0],rt=at[1],ot=(0,l.useState)(!1),ct=(0,s.Z)(ot,2),dt=ct[0],ut=ct[1],mt=(0,l.useState)(!1),pt=(0,s.Z)(mt,2),ft=pt[0],ht=pt[1],vt=(0,l.useState)([]),gt=(0,s.Z)(vt,2),xt=gt[0],jt=gt[1],yt=(0,l.useState)(!1),Nt=(0,s.Z)(yt,2),bt=Nt[0],Dt=Nt[1],St=(0,l.useState)([]),Ct=(0,s.Z)(St,2),_t=Ct[0],Zt=(Ct[1],(0,l.useState)([])),kt=(0,s.Z)(Zt,2),wt=(kt[0],kt[1],(0,l.useState)([])),Mt=(0,s.Z)(wt,2),Et=Mt[0],It=Mt[1],Tt=(0,l.useState)([]),At=(0,s.Z)(Tt,2),Bt=At[0],Rt=At[1],Ft=(0,l.useState)([]),Ot=(0,s.Z)(Ft,2),Yt=Ot[0],Lt=Ot[1],Pt=(0,l.useState)([]),Ht=(0,s.Z)(Pt,2),Ut=(Ht[0],Ht[1],(0,l.useState)([])),zt=(0,s.Z)(Ut,2),Gt=(zt[0],zt[1]),Wt=(0,l.useState)(!1),Jt=(0,s.Z)(Wt,2),Kt=(Jt[0],Jt[1]),Vt=(0,l.useState)([]),qt=(0,s.Z)(Vt,2),Xt=(qt[0],qt[1]),Qt=(0,l.useState)(""),$t=(0,s.Z)(Qt,2),en=$t[0],tn=$t[1],nn=(0,l.useState)(!1),sn=(0,s.Z)(nn,2),ln=sn[0],an=sn[1],rn=(0,l.useState)(!1),on=(0,s.Z)(rn,2),cn=on[0],dn=on[1],un=(0,N.TH)(),mn=new URLSearchParams(un.search).get("id"),pn=(0,l.useState)(!1),fn=(0,s.Z)(pn,2),hn=fn[0],vn=fn[1],gn=(0,l.useState)([]),xn=(0,s.Z)(gn,2),jn=xn[0],yn=xn[1],Nn=f.N.baseUrl,bn=(0,l.useRef)(null),Dn=(0,l.useState)([]),Sn=(0,s.Z)(Dn,2),Cn=Sn[0],_n=Sn[1];(0,l.useEffect)((function(){var e=Et,t=Et.slice(0,2),n=e.splice(2);ys(t),Ss(n)}),[Et]);var Zn=(0,l.useState)("170,211,123,82,168,207,212,18,213,49,149,208,243"),kn=(0,s.Z)(Zn,2),wn=kn[0],Mn=kn[1],En=(0,l.useRef)([]);(0,l.useEffect)((function(){p()({method:"get",url:Nn+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===mn?0:mn)}).then((function(e){var t=e.data;yn(t)}))}),[]);var In=(0,l.useState)({BuIds:"170,211,123,82,168,207,212,18,213,49,149,208,243",CountryIds:"6,5,3,8,7,1,2,999",EngCountryIds:"-1",FromDate:v()($e).format("yyyy-MM-DD"),Duration:"1",sessKey:"44524751691400245360",isExport:"0",resType:"all",isChecked:"true"}),Tn=(0,s.Z)(In,2),An=Tn[0],Bn=Tn[1];(0,l.useEffect)((function(){Bn((function(){return null!=mn?{BuIds:jn.BuIds,CountryIds:jn.CountryIds,EngCountryIds:jn.EngCountryIds,FromDate:jn.FromDate,Duration:jn.Duration,sessKey:jn.sessKey,isExport:jn.isExport,resType:jn.resType,isChecked:jn.isChecked}:{BuIds:"170,211,123,82,168,207,212,18,213,49,149,208,243",CountryIds:"6,5,3,8,7,1,2,999",EngCountryIds:"-1",FromDate:v()($e).format("yyyy-MM-DD"),Duration:"1",sessKey:"44524751691400245360",isExport:"0",resType:"all",isChecked:"true"}}))}),[jn]),(0,l.useEffect)((function(){be[0]&&Lt(JSON.parse(JSON.stringify(be[0])));Ze(["XLS"])}),[be]),(0,l.useEffect)((function(){if(null!=mn){var e=se.filter((function(e){var t;return null===(t=An.BuIds)||void 0===t?void 0:t.includes(e.value)})),t=Me.filter((function(e){var t;return null===(t=An.CountryIds)||void 0===t?void 0:t.includes(e.value)})),n=Pe.filter((function(e){var t;return null===(t=An.EngCountryIds)||void 0===t?void 0:t.includes(e.value)}));We(n),Be(t),oe(e)}}),[mn,se,Me,Pe]),(0,l.useEffect)((function(){null!=mn&&setTimeout((function(){hs()}),3e3)}),[mn,An]);var Rn=function(e){tn(e),p()({method:"get",url:Nn+"/dashboardsms/allocationDashboard/getActionItemDetails?rid=".concat(e)}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].completed_dt=null==t[n].completed_dt?"":v()(t[n].completed_dt).format("DD-MMM-YYYY"),t[n].effective_dt=null==t[n].effective_dt?"":v()(t[n].effective_dt).format("DD-MMM-YYYY"),t[n].created_dt=null==t[n].created_dt?"":v()(t[n].created_dt).format("DD-MMM-YYYY");O(t),window.scrollTo({top:1500,behavior:"smooth"}),setGraphKey1((function(e){return e+1})),an(!1)}))},Fn=(0,l.useState)([]),On=(0,s.Z)(Fn,2),Yn=On[0],Ln=On[1];(0,l.useEffect)((function(){}),[be]);var Pn=function(e){_t[0];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:"fteActive"==e.empStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",style:{width:"150px"},children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){jt(e.resource),G(e.id),me(!0),Rn(e.id)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):"subkActive"==e.empStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon amber ellipsis",title:"Active Contractor",style:{width:"200px"},children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){jt(e.resource),G(e.id),me(!0),Rn(e.id)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):"fteInactive"!==e.empStatus||["Non Deployable","Blocked","No Allocation","Future Allocated"].includes(e.resAllocType)?"fteNotice"==e.empStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Employee in notice period",children:[(0,y.jsx)("img",{src:_,alt:"(fte_notice_icon)",style:{height:"12px",marginRight:"10px"},title:"Employee in notice period"}),(0,y.jsx)("a",{onClick:function(t){jt(e.resource),G(e.id),me(!0),Rn(e.id)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):"Bench"==e.empStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon white ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){me(!0),Rn(e.id),G(e.id),jt(e.resource)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):(e.empStatus,"fteInactive"===e.empStatus&&["Non Deployable","Blocked","No Allocation","Future Allocated","Training"].includes(e.resAllocType)?(0,y.jsxs)("div",{className:"rollOffTableIcon white ellipsis",title:"Employee",children:[(0,y.jsx)("img",{src:C,alt:"(fte_inactive_icon)",style:{height:"16px",width:"16px",margin:"3px"},title:"Ex-Employee"}),(0,y.jsx)("a",{onClick:function(t){me(!0),Rn(e.id),G(e.id),jt(e.resource)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):"subkInactive"===e.empStatus&&["Non Deployable","Blocked","No Allocation","Future Allocated"].includes(e.resAllocType)?(0,y.jsxs)("div",{className:"rollOffTableIcon white ellipsis",title:"Employee",children:[(0,y.jsx)("img",{src:Z,alt:"(fte_notice_icon)",style:{height:"16px",width:"16px",margin:"3px"},title:"Ex-Contractor"}),(0,y.jsx)("a",{onClick:function(t){me(!0),Rn(e.id),G(e.id),jt(e.resource)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]}):""):(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)("img",{src:C,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),(0,y.jsx)("a",{onClick:function(t){jt(e.resource),G(e.id),me(!0),Rn(e.id)},children:0==An.isChecked?"":(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resource,children:e.resource})]})})})},Hn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",style:{width:"80px",textAlign:"center"},title:v()(e.actionDt).format("DD-MMM-YYYY"),children:"Invalid date"==v()(e.actionDt).format("DD-MMM-YYYY")?"":v()(e.actionDt).format("DD-MMM-YYYY")})},Un=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",style:{width:"125px",textAlign:"center"},title:v()(e.actionEffDt).format("DD-MMM-YYYY"),children:"Invalid date"==v()(e.actionEffDt).format("DD-MMM-YYYY")?"":v()(e.actionEffDt).format("DD-MMM-YYYY")})},zn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",style:{width:"80px",textAlign:"center"},title:v()(e.futureAllocDate).format("DD-MMM-YYYY"),children:"Invalid date"==v()(e.futureAllocDate).format("DD-MMM-YYYY")?"":v()(e.futureAllocDate).format("DD-MMM-YYYY")})},Gn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.designation,children:e.designation})},Wn=function(e){return console.log(e),(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",style:{width:"70px"},title:e.empId,children:e.empId})},Jn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.department,children:e.department})},Kn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.customer,children:e.customer})},Vn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.LoB,children:e.LoB})},qn=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},"data-toggle":"tooltip",title:e.cadre_code,children:e.cadre_code})},Xn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.skillGrps,children:e.skillGrps})},Qn=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Skill,children:e.Skill})},$n=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.emp_citizenship,children:e.emp_citizenship})},es=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right",width:"80px"},"data-toggle":"tooltip",title:e.nectCap,children:e.nectCap})},ts=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:e.billHrs,children:e.billHrs})},ns=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:e.availHrs,children:e.availHrs})},ss=function(e){var t=e.projected+"%";return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:t,children:t})},ls=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:e.aging,children:e.aging})},as=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right",width:"80px"},"data-toggle":"tooltip",title:e.nbHrs,children:e.nbHrs})},is=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.supervisor,children:e.supervisor})},rs=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.actionItem,children:e.actionItem})},os="",cs=function(e,t,n){os=e.split("_")[0];var s={};"cogs"==e.split("_")[0]||"over"==e.split("_")[0]||"total"==e.split("_")[0]||"bench"==e.split("_")[0]?"over"==e.split("_")[0]?s.a="ovrh":s.a=e.split("_")[0]:s.a=e,s.b=t,function(e,t){var n=t.name;ut(!0);var s=setTimeout((function(){Dt(!0)}),2e3),l=e.a;p()({method:"post",url:Nn+"/fullfilmentms/rolloffs/getBenchReportSummary",data:{BuIds:e.b,CountryIds:"-1",Typ:e.a,isExport:"0",isChecked:An.isChecked,UserId:A}}).then((function(e){Dt(!1),clearTimeout(s),e=e.data,_n(n+" -"+("cogs"==os?" COGS":"over"==os?" OVRH":"total"==os?" Total Resources":"fullAlloc"==os?" Fully Allocated Resources":"bench"==os?" Complete Bench":"noAlloc"==os?" No Allocation":"nonDepl"==os?" Non Deployable":"futAlloc"==os?" Future Allocated":"blocked"==os?" Blocked Resources":"backfill"==os?" Backfill":"training"==os?" Training":"compBench"==os?" Complete Bench":"nBCat2"==os?" Non Billable (8 <= hrs < 20)":"nBCat3"==os?" Non Billable (20 <= hrs < 40)":"nBFTE"==os?" Non Billable (FTE)":"nBTotal"==os?" Non Billable (Total)":"pBCat1"==os?" Partially Billable (< 8 hrs)":"pBCat2"==os?" Partially Billable (8 <= hrs < 20)":"pBCat3"==os?" Partially Billable (20 <= hrs < 40)":"pBFTE"==os?" Partially Billable (FTE)":"pBTotal"==os?" Partially Billable (Total)":"nBCat1"==os?" Non Billable (8 <= hrs < 20)":"innovCat1"==os?" Innovation Billable (< 8 hrs)":"innovCat2"==os?" Innovation Billable (8 <= hrs < 20)":"innovCat3"==os?" Innovation Billable (20 <= hrs < 40)":"innovFTE"==os?" Innovation Billable (FTE)":"innovTotal"==os?" Innovation Billable (Total)":""));var t=[{empId:"Emp. Id",resource:"Resource",designation:"Designation",department:"Department",customer:"Customer",LoB:"LOB Category",cadre_code:"Cadre",skillGrps:"Skill Group",Skill:"Skill",emp_citizenship:"Citizenship",nectCap:"Net Cap. Hrs",billHrs:"Billable Hrs",availHrs:"Available Hrs",projected:"Availability%",aging:"Ageing",nbHrs:"Non Bill Hrs",supervisor:"Supervisor",actionItem:"Action Item",actionDt:"Action Item Date",actionEffDt:"Action Item Eff. Date",futureAllocDate:"Future Alloc Date"}];"bench"!==l&&"noAlloc_count"!==l&&"nonDepl_count"!=l&&"futAlloc_count"!=l&&"blocked_count"!=l&&"backfill_count"!=l&&"training_count"!=l&&"compBench_count"!=l&&(delete t[0].aging,delete t[0].futureAllocDate);for(var a=[],i=[],r=0;r<e.length;r++)0==r?(a.push(e[r]),i.push(e[r])):i.push(e[r]);Ln([{empId:"Emp Id",resource:"Resource",designation:"Designation",department:"Department",LoB:"LoB Category",cadre_code:"Cadre",skillGrps:"Skill Group",Skill:"Skill",emp_citizenship:"Citizenship",projected:"Availability%",status:"Status",resAllocType:"Res.Alloc. Type",actionDt:"Action Item Date",actionEffDt:"Action Item Effective Date",actionItem:"Action Item",supervisor:"Supervisor",aging:"Ageing",customer:"Customer",nectCap:"Net Cap. Hrs",billHrs:"Billable Hrs",availHrs:"Available Hrs",nbHrs:"Non Bill Hrs"}].concat(i)),De(t.concat(i)),rt(!0),ut(!1),Lt(a),Dt(!1),window.scrollTo({top:1500,behavior:"smooth"})})).catch((function(e){console.log(e)}))}(s,n),me(!1),rt(!1)},ds=["id","name","cogs_count","over_head_count","total","fullAlloc_count","bench","noAlloc_count","nonDepl_count","futAlloc_count","blocked_count","backfill_count","training_count","compBench_count","nBCat1_count","nBCat2_count","nBCat3_count","nBFTE_count","nBTotal_count","pBCat1_count","pBCat2_count","pBCat3_count","pBFTE_count","pBTotal_count","innovCat1_count","innovCat2_count","innovCat3_count","innovFTE_count","innovTotal_count"],us=(0,l.useState)(!1),ms=(0,s.Z)(us,2),ps=ms[0],fs=ms[1],hs=function(){if((0,w.Z)(En))return dn(!0),void setTimeout((function(){dn(!1)}),3e3);var e=setTimeout((function(){Dt(!0)}),2e3);p()({method:"post",url:Nn+"/fullfilmentms/rolloffs/getBenchReport",data:{BuIds:wn,CountryIds:An.CountryIds,EngCountryIds:An.EngCountryIds,FromDate:An.FromDate,Duration:An.Duration,isExport:0,resType:An.resType,isChecked:An.isChecked,UserId:A},headers:{"Content-Type":"application/json"}}).then((function(t){var n=t.data.map((function(e){var t={};return ds.forEach((function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}));je(n),ut(!1),Dt(!1),fs(!0),clearTimeout(e),q(!V),ee(V?d.UdN:d.NR5)})),qe(!1),dn(!1)};(0,l.useEffect)((function(){xe[0]&&Lt(JSON.parse(JSON.stringify(xe[0])))}),[xe]),(0,l.useEffect)((function(){p().get(Nn+"/CostMS/cost/getDepartments").then((function(e){var t=e.data;t.push({value:0,label:"Non-Revenue Units"}),le(t),oe(t.filter((function(e){return 0!=e.value})));var n=[];t.forEach((function(e){0!=e.value&&n.push(e.value)}))})).catch((function(e){return console.log(e)})),p().get(Nn+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.push({id:0,country_name:"<<Others>>"}),n.length>0&&n.forEach((function(e){if(4!==e.id){var n={label:e.country_name,value:e.id};t.push(n)}})),Ee(t),null==mn&&Be(t)})).catch((function(e){return console.log(e)})),p().get(Nn+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.push({id:0,country_name:"<<Others>>"}),n.length>0&&n.forEach((function(e){if(4!==e.id){var n={label:e.country_name,value:e.id};t.push(n)}})),He(t),null==mn&&We(t)})).catch((function(e){return console.log(e)}))}),[]);var vs=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.qL$,{className:"chevronIcon"})})},gs=(0,l.useState)([]),xs=(0,s.Z)(gs,2),js=xs[0],ys=xs[1],Ns=(0,l.useState)([]),bs=(0,s.Z)(Ns,2),Ds=bs[0],Ss=bs[1];console.log(Ds);var Cs=null===(e=Object.keys(Yt))||void 0===e?void 0:e.map((function(e,t){return(0,y.jsx)(x.s,{sortable:!0,body:"empId"==e&&Wn||"resource"==e&&Pn||"actionDt"==e&&Hn||"actionEffDt"==e&&Un||"designation"==e&&Gn||"department"==e&&Jn||"customer"==e&&Kn||"LoB"==e&&Vn||"cadre_code"==e&&qn||"skillGrps"==e&&Xn||"Skill"==e&&Qn||"emp_citizenship"==e&&$n||"nectCap"==e&&es||"billHrs"==e&&ts||"availHrs"==e&&ns||"projected"==e&&ss||"aging"==e&&ls||"nbHrs"==e&&as||"supervisor"==e&&is||"actionItem"==e&&rs||"futureAllocDate"==e&&zn,field:e,header:Yt[e]},e)}));(0,l.useEffect)((function(){be[0]&&Lt(JSON.parse(JSON.stringify(be[0])))}),[be]),(0,l.useEffect)((function(){if(xe.length>0){var e=Object.keys(xe[0]).filter((function(e){return"id"!=e&&"lvl"!=e}));Rt(e)}}),[xe]),(0,l.useEffect)((function(){_s()}),[Bt]);var _s=function(){It((function(){return xe.map((function(e,t){var n=[];return Bt.forEach((function(s,l){if(0===t){var a=(""+e[s]).includes("^&")?e[s].split("^&"):e[s],i=a?a[1]:"",r=a?a[2]:"";a&&(console.log(a[0]),n.push((0,y.jsx)("th",{style:{textAlign:"center"},colSpan:r,rowSpan:i,children:a[0]},l)))}else if(1===t)e[s]&&n.push((0,y.jsx)("th",{align:l>0?"right":"left",style:{textAlign:"center"},children:(0,y.jsx)("span",{children:e[s]})}));else{var o=["total","over_head_count","cogs_count"].includes(s)?"lightTurquoise":["fullAlloc_count","bench"].includes(s)?"lightBlue":["noAlloc_count","nonDepl_count","futAlloc_count","blocked_count","backfill_count","training_count","compBench_count"].includes(s)?"lightPink":["nBCat1_count","nBCat2_count","nBCat3_count","nBFTE_count","nBTotal_count"].includes(s)?"lemonGreen":["pBCat1_count","pBCat2_count","pBCat3_count","pBFTE_count","pBTotal_count"].includes(s)?"lightYellow":["innovCat1_count","innovCat2_count","innovCat3_count","innovFTE_count","innovTotal_count"].includes(s)?"skyBlue":"",c=e[s];console.log(c);var d="name"==s?c:Math.round(c);console.log(n),xe[2].id,9999!==xe[2].id&&n.push((0,y.jsx)("td",{align:l>0?"right":"center",children:(0,y.jsx)("span",{className:o,style:{cursor:l>0&&0!=e[s]?"pointer":"",color:0!=l&&0!=e[s]?"#2e88c5":""},onMouseOver:function(t){t.target.style.textDecoration=l>0&&0!=e[s]?"underline":"none"},onMouseOut:function(e){e.target.style.textDecoration="none"},onClick:function(){l>0&&0!=e[s]&&cs(s,0==e.id?"-1":e.id,e,Gt(s),Xt(e.id),Kt(!0))},children:"bench"==s?d+" %":d.toLocaleString()})}))}})),(0,y.jsx)("tr",{children:n},t)}))}))},Zs=(0,l.useState)([]),ks=(0,s.Z)(Zs,2),ws=ks[0],Ms=ks[1];(0,l.useEffect)((function(){Es()}),[]);var Es=function(){p()({method:"GET",url:Nn+"/CommonMS/master/getMenus?loggedUserId=".concat(A)}).then((function(e){e.data.forEach((function(e){"Fullfilment"===e.display_name&&Ms([e])}))}))},Is=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return console.log(js),(0,y.jsxs)("div",{children:[cn?(0,y.jsxs)("div",{className:"statusMsg error",children:[(0,y.jsx)(L.CSE,{}),"Please provide valid values for highlighted values"]}):"",(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Bench Report"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsx)(M.Z,{routes:ws,currentScreenName:["Bench Metrics"]}),bt?(0,y.jsx)(j.Z,{handleAbort:function(){bn.current&&bn.current.abort(),Dt(!1)}}):"",hn?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(S.hXj,{size:"1.4em"})," \xa0 Search created successfully."]})}):"",(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(D.Z,{pdfname:"RMGBenchReport.pdf",name:"Bench Report Help"})}),(0,y.jsx)("div",{className:"saveBtn",children:(0,y.jsx)(b.Z,{setEditAddmsg:vn,pageurl:"http://10.11.12.149:3000/#/rmg/bench",page_Name:"Bench Report",payload:An})}),"\xa0",(0,y.jsx)("div",{onClick:function(){q(!V),ee(V?d.UdN:d.NR5)},children:(0,y.jsx)("span",{children:$})})]}),(0,y.jsx)(u.V9,{visible:!V,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"BuIds",children:["Business Unit\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"multiselect",ref:function(e){En.current[0]=e},children:(0,y.jsx)(r.NU,{id:"BuIds",ArrowRenderer:vs,value:re,valueRenderer:Is,options:se,hasSelectAll:!0,disabled:!1,onChange:function(e){oe(e);var t=[];e.forEach((function(e){t.push(e.value)})),Bn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"BuIds",t.toString()))})),Mn(t.toString())}})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"CountryIds",children:["Res. Location\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"multiselect",ref:function(e){En.current[1]=e},children:(0,y.jsx)(r.NU,{id:"CountryIds",options:Me,ArrowRenderer:vs,valueRenderer:Is,hasSelectAll:!0,value:Ae,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,onChange:function(e){Be(e);var t=[];e.forEach((function(e){t.push(e.value)})),Bn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"CountryIds",t.toString()))}))}})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-6",htmlFor:"EngCountryIds",children:"Engagement Location"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-5",children:(0,y.jsx)(r.NU,{id:"EngCountryIds",options:Pe,ArrowRenderer:vs,valueRenderer:Is,hasSelectAll:!0,value:Ge,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,onChange:function(e){var t=e.map((function(e){return e.value}));if(We(e),t.length===Pe.length){var n=[];e.forEach((function(e){n.push(e.value)})),Bn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"EngCountryIds","-1"))}))}else{var s=[];e.forEach((function(e){s.push(e.value)})),Bn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"EngCountryIds",t.toString()))}))}}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"week",children:["Week\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(c(),{name:"FromDate",value:$e,id:"FromDate",selected:$e,showYearDropdown:!0,showMonthDropdown:!0,onChange:function(e){!function(e){var t=new Date(e),n=st(t);6==t.getDay()?et(t):et(n),Bn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"FromDate",v()(6==t.getDay()?t:n).format("yyyy-MM-DD")))}))}(e)},dateFormat:"dd-MMM-yy",placeholderText:"",dropdownMode:"select",onKeyDown:function(e){e.preventDefault()}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"Duration",children:["Duration\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"Duration",onChange:function(e){var t=e.target,n=t.value,s=t.id;Bn((0,i.Z)((0,i.Z)({},An),{},(0,a.Z)({},s,n)))},value:An.Duration,children:[(0,y.jsx)("option",{value:"1",children:"1"}),(0,y.jsx)("option",{value:"2",children:"2"}),(0,y.jsx)("option",{value:"3",children:"3"}),(0,y.jsx)("option",{value:"4",children:"4"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"resType",children:["Res. Type\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"resType",name:"resType",onChange:function(e){var t=e.target,n=t.value,s=t.id;Bn((0,i.Z)((0,i.Z)({},An),{},(0,a.Z)({},s,n)))},value:An.resType,children:[(0,y.jsx)("option",{value:"all",children:" <<ALL>>"}),(0,y.jsx)("option",{value:"fte",children:"Employee"}),(0,y.jsx)("option",{value:"subk",children:"Contractors"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-6",htmlFor:"Duration",children:"Resources with >1 FTE Allocations"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-5",children:(0,y.jsx)("input",{type:"checkbox",id:"myCheckbox",name:"myCheckbox",checked:An.isChecked,onChange:function(e){he(e.target.checked),Bn((0,i.Z)((0,i.Z)({},An),{},(0,a.Z)({},"isChecked",e.target.checked)))}})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:(0,y.jsxs)("button",{type:"submit",className:"btn btn-primary",title:"Search",onClick:function(){hs(),me(!1),rt(!1),me(!1),fs(!1),an(!1)},children:[(0,y.jsx)(d.U41,{}),"Search"]})})]})})]}),1==ps?(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsxs)("div",{className:"mt-2",children:[(0,y.jsx)(k.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){for(var e=["id"],t=xe.slice(2).filter((function(e,t){return 1!==t})).map((function(t){var n=Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})));return Object.values(n)})),n=new(z().Workbook),l=n.addWorksheet("BenchReportConsolidated"),a=(l.addRow(["Business Unit","COGS","OVRH","Total","Fully Allocated","Deployable Bench %","No Alloc","Non Depl","Future Alloc","Blocked","Backfill","Training","Total","1 <= hrs < 8","8 <= hrs < 20",">= 20 hrs","FTE","Total","1 <= hrs < 8","8 <= hrs < 20","20 <= hrs < 40","FTE","Total","1 <= hrs < 8","8 <= hrs < 20","20 <= hrs < 40","FTE","Total"]),0);a<t.length;a++)l.addRow(t[a]);n.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"BenchReportConsolidated.xlsx")}))}})," "]}),(0,y.jsx)("div",{className:"benchReportTable darkHeader toHead",children:(0,y.jsxs)("table",{className:"table table-bordered htmlTable",cellPadding:0,cellSpacing:0,style:{marginTop:"7px"},children:[(0,y.jsx)("thead",{children:js}),(0,y.jsx)("tbody",{children:1===Ds.length?(0,y.jsx)("td",{style:{textAlign:"center",background:"#b3bdc7 "},colSpan:"28",children:" No Data Found"}):Ds})]})})]}):"",(0,y.jsx)("div",{children:1==it?(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{children:[(0,y.jsx)("b",{style:{color:"#297AB0",fontSize:"15px"},children:Cn}),(0,y.jsx)(W,{headerData:Yt,data:be,excelData:Yn,rows:20,loaderState:dt,setLoaderState:ut,dynamicColumns:Cs,setHeaderData:Lt,exportData:_e,fileName:"Bench Report"})]})}):""}),ln?(0,y.jsxs)("div",{className:"statusMsg error",children:[(0,y.jsx)(L.CSE,{}),"Please provide valid values for highlighted values"]}):"",g?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(S.hXj,{size:"1.4em"})," \xa0Action Item saved successfully"]})}):"",ft?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(S.hXj,{size:"1.4em"})," \xa0Action Item Deleted successfully"]})}):"",ue&&(0,y.jsxs)("div",{className:"resourceOverviewEmp",children:[(0,y.jsx)("b",{style:{color:"#297AB0",fontSize:"15px"},children:"Action Items ("+xt+")"}),(0,y.jsx)(H,{resid:U,resourcedata:F,setResourcedata:O,setResourceName:jt,handleClick1:Rn,setDeleteMessage:ht,setSaveActionMessage:Oe,employeeid:en,setValidationMessage:an,searching:Ve,validationmessage:ln,setLoader:Dt,setAddmsg:E})]})]})},K=n(74165),V=n(15861),q=n(45987),X=n(29718),Q=n.n(X),$=n(12003),ee=n.n($),te=n(4189),ne=n.n(te),se=n(59831),le=n(91951);ne()(Q());var ae=function(e){e.tableData,e.column;var t,n=e.filteredData,i=(e.allHeaders,e.alldata,(0,l.useState)([])),r=(0,s.Z)(i,2),o=(r[0],r[1],{});null===n||void 0===n||n.forEach((function(e){e.kpi.includes("Deployable Bench - Actual")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");o[l]=e[t]}}))}));var c=Object.keys(o).sort((function(e,t){return new Date(e)-new Date(t)})),d={};c.forEach((function(e){d[e]=o[e]}));var u={};null===n||void 0===n||n.forEach((function(e){e.kpi.includes("NBL on projects")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");u[l]=e[t]}}))}));var m=Object.keys(u).sort((function(e,t){return new Date(e)-new Date(t)})),p={};m.forEach((function(e){p[e]=u[e]}));var f={};null===n||void 0===n||n.forEach((function(e){e.kpi.includes("Bench (Zero Allocation)")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");f[l]=e[t]}}))}));var h=Object.keys(f).sort((function(e,t){return new Date(e)-new Date(t)})),v={};h.forEach((function(e){v[e]=f[e]}));var g={};null===n||void 0===n||n.forEach((function(e){e.kpi.includes("Resources being billed")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");g[l]=e[t]}}))}));var x=Object.keys(g).sort((function(e,t){return new Date(e)-new Date(t)})),j={};x.forEach((function(e){j[e]=g[e]}));var N={};null===n||void 0===n||n.forEach((function(e){e.kpi.includes("Total Billable Resources")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");N[l]=e[t]}}))}));var b=Object.keys(N).sort((function(e,t){return new Date(e)-new Date(t)})),D={};b.forEach((function(e){D[e]=N[e]})),Object.assign({},o,g);var S={chart:{type:"column"},title:{text:"Resource Overview"},exporting:{enabled:!0},xAxis:{categories:Object.keys(d),title:{text:"Weeks"}},yAxis:{title:{text:"Resource Count"}},tooltip:{formatter:function(){var e="<b>"+this.x+"</b><br/>";return this.points.forEach((function(t){e+='<span style="color:'+t.color+'">'+t.series.name+'</span>: <span style="text-align: right; display: inline-block"><b>'+t.y+"</b></span><br/>"})),e},shared:!0,positioner:function(e,t,n){return{x:n.plotX+this.chart.plotLeft-e/2,y:n.plotY+this.chart.plotTop-t-10}}},series:[{name:"Deployable Bench - Actual",data:Object.values(d).map((function(e){return Number(e)})),dataLabels:{enabled:!0,formatter:function(){return this.y}},marker:{symbol:"square"}},{name:"NBL on projects",data:Object.values(p).map((function(e){return Number(e)})),dataLabels:{enabled:!0,formatter:function(){return this.y}},marker:{symbol:"square"}},{name:"Bench (Zero Allocation)",data:Object.values(v).map((function(e){return Number(e)})),dataLabels:{enabled:!0,formatter:function(){return this.y}},marker:{symbol:"square"}}]},C=(t={chart:{type:"line"},title:{text:"Billable vs Billed"},exporting:{enabled:!0},xAxis:{categories:Object.keys(j),title:{text:"Weeks"}},yAxis:{title:{text:"Resource Count"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y}}},(0,a.Z)(t,"tooltip",{formatter:function(){var e="<b>"+this.x+"</b><br/>";return this.points.forEach((function(t){e+=t.series.name+": "+t.y+"<br/>"})),e},shared:!0,positioner:function(e,t,n){return{x:n.plotX+this.chart.plotLeft-e/2,y:n.plotY+this.chart.plotTop-t-10}}}),(0,a.Z)(t,"series",[{name:"Total Billable Resources",data:Object.values(D).map((function(e){return Number(e)}))},{name:"Resources Being billed",data:Object.values(j).map((function(e){return Number(e)}))}]),t);return(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{}),(0,y.jsx)(ee(),{highcharts:Q(),options:C}),(0,y.jsx)(ee(),{highcharts:Q(),options:S})]})},ie=n(96907),re=n(20040),oe=(n(62508),["kpi_id"]),ce=["kpi_id"];function de(e){var t,n,a=e.tableData,r=e.column,o=e.onClickHandler,c=e.setId,u=e.setHeaderDate,m=e.setTotaldata,p=e.setEmpTable;console.log(e.id);var f=new Intl.NumberFormat,h=(new Date,(0,l.useState)("")),v=(0,s.Z)(h,2),g=v[0],x=v[1],j=(0,l.useState)(null),N=(0,s.Z)(j,2),b=N[0],D=N[1];if(console.log(b),!a||!a.data)return(0,y.jsx)("div",{});var S=[];console.log(S);var C=[],_=null===(t=a.data)||void 0===t?void 0:t.reduce((function(e,t){var n=t.kpi_id,s=(0,q.Z)(t,oe);return-1!==n&&"#"!==n?e.push((0,i.Z)((0,i.Z)({},s),{},{kpi_id:n})):e.push(t),e}),[]),Z={};null===(n=a.data)||void 0===n||n.forEach((function(e){e.kpi.includes("Deployable Bench - Actual")&&Object.keys(e).forEach((function(t){if(t.includes("count")){var n=t.substring(0,10),s=(0,se.default)(n.replace(/_/g,"-")),l=(0,le.default)(s,"dd-MMM-yyyy");Z[l]=e[t]}}))}));return(0,y.jsxs)("div",{className:"col-md-12 my-1 ",children:[(0,y.jsxs)("div",{className:"statusMsg warning",children:[(0,y.jsx)("span",{className:"bold",children:(0,y.jsx)(ie.BrF,{})}),"\xa0 For past weeks there is no option to click."]}),(0,y.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:" HC Overview "}),(0,y.jsx)("div",{className:"darkHeader",children:(0,y.jsxs)("div",{className:"col-md-12 row ",style:{paddingLeft:"10px"},children:[(0,y.jsx)("table",{className:"table table-bordered table-striped col-6 htmlTable resourceOverview ",style:{width:"51%"},children:(0,y.jsx)("thead",{children:(null===r||void 0===r?void 0:r.length)>0&&_.map((function(e,t){var n=[];return r.forEach((function(s,l){if("kpi_id"!==s){var a,i,r=e[s],h=null;if(-1!=r&&-1==e.kpi_id&&null!==r&&void 0!==r&&r.includes("^&")?h=e[s].split("^&"):"#"==r||0===e.kpi_id&&0===r?e[s]="":h=e[t],-1===e.kpi_id)n.push((null===(a=h)||void 0===a?void 0:a.length)>0?(0,y.jsxs)("th",{colspan:1===l?1:2,rowspan:"Resource Category^&0^&2"===r?"2":"",style:{textAlign:"Resource Category^&0^&2"===r?"center":"left",paddingLeft:1===l?"14px":""},children:[" ",(null===(i=h)||void 0===i?void 0:i.length)>0?h[0]:h]}):null),S.push(e.kpi);else if(e[s]){e.kpi_id;var v=(0,q.Z)(e,ce),g=t>1&&l>1&&(Math.floor(l/2)%2===0?"#F3D6D6":"#BFF5F5");n.push((0,y.jsxs)("td",{style:{backgroundColor:g,textAlign:t>1&&l>1?"right":"left"},className:0===v[s]?"label":"FTE"===v[s]?"fteStyle":"Count"===v[s]?"countStyle":"",children:[(0,y.jsx)("span",{style:l>1&&0!=v[s]&&!v[s].includes("FTE")&&!v[s].includes("Count")?{color:"#15a7ea",textDecoration:"underline",cursor:"pointer"}:{},dangerouslySetInnerHTML:{__html:v[s].includes("FTE")||v[s].includes("Count")?"<b>".concat(v[s],"</b>"):"NaN"==f.format(parseInt(v[s]))?v[s]:f.format(parseInt(v[s]))},onClick:function(t){if(l>1&&0!=v[s]){var n=s.replace("_fte","").replace("_count","");o(e.kpi_id,c(e.kpi_id),p(!1)),u(n),m(e.kpi)}}}),(e.kpi.includes("Total Resources")||e.kpi.includes("Total Overhead")||e.kpi.includes("Total Billable Resources")||e.kpi.includes("Enablement")||e.kpi.includes("Serving Notice Period")||e.kpi.includes("Deployable Bench - Actual")||e.kpi.includes("Deployable Bench (Resource Type)"))&&1===l&&(0,y.jsx)(d.DAO,{className:"tableInfoIcon",onClick:function(t){!function(e){console.log(e);var t=e.replace(/<\/?span.*?>/gi,"");console.log(t);var n="";n=t.includes("Total Resources")?"=Sum(Employee+Contractors)":t.includes("Total Overhead")?"=Sum(Org Overhead+Delivery Overhead)":t.includes("Total Billable Resources ")?"=Total resources-(Total Overhead+Gardening leave)":t.includes("Enablement")?"*Head Count  is combination of Billable & Non Billable Resources":t.includes("Serving Notice Period")?"=Billable+NBL on projects+Bench (Zero Allocation)+Gardening Leave+Org Overhead+Delivery Overhead":t.includes("Deployable Bench - Actual")||t.includes("Deployable Bench (Resource Type)")?"= NBL on projects+Bench (Zero Allocation)+Innovation+Partial Bench":"No information available for this KPI.",x(n)}(e.kpi),D(t.currentTarget)}})]})),C.push(e[s])}}})),(0,y.jsx)("tr",{children:n},t)}))})}),(0,y.jsx)("div",{className:"col-6",style:{width:"49%"},children:(0,y.jsx)(ae,{filteredData:_,allHeaders:S,alldata:C})})]})}),b&&(0,y.jsx)(re.Z,{handleClose:function(){D(!1)},anchorEl:b,infoMessage:g})]})}var ue=function(e){var t,n=e.permission,o=localStorage.getItem("resId"),m=(localStorage.getItem("resName"),(0,l.useState)(!1)),h=(0,s.Z)(m,2),g=h[0],x=h[1],C=(0,l.useState)(d.UdN),Z=(0,s.Z)(C,2),k=Z[0],w=Z[1],A=(0,l.useState)([]),B=(0,s.Z)(A,2),F=B[0],O=B[1],Y=(0,l.useState)([]),H=(0,s.Z)(Y,2),U=H[0],z=H[1],G=(0,l.useState)([]),W=(0,s.Z)(G,2),J=W[0],q=(W[1],(0,l.useState)([])),X=(0,s.Z)(q,2),Q=X[0],$=X[1],ee=(0,l.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],le=(0,l.useState)(!1),ae=(0,s.Z)(le,2),ie=ae[0],re=ae[1],oe=(0,l.useState)([]),ce=(0,s.Z)(oe,2),ue=ce[0],me=ce[1],pe=(0,l.useState)([]),fe=(0,s.Z)(pe,2),he=fe[0],ve=fe[1],ge=(0,l.useState)([]),xe=(0,s.Z)(ge,2),je=xe[0],ye=xe[1];console.log(je);var Ne=(0,l.useState)([]),be=(0,s.Z)(Ne,2),De=be[0],Se=be[1],Ce=(0,l.useState)(0),_e=(0,s.Z)(Ce,2),Ze=_e[0],ke=_e[1],we=(0,l.useState)([]),Me=(0,s.Z)(we,2),Ee=(Me[0],Me[1]),Ie=(0,l.useState)([]),Te=(0,s.Z)(Ie,2),Ae=Te[0],Be=Te[1],Re=(0,l.useState)([]),Fe=(0,s.Z)(Re,2),Oe=Fe[0],Ye=(Fe[1],(0,l.useState)([])),Le=(0,s.Z)(Ye,2),Pe=(Le[0],Le[1],(0,l.useState)([])),He=(0,s.Z)(Pe,2),Ue=He[0],ze=He[1],Ge=(0,l.useState)(""),We=(0,s.Z)(Ge,2),Je=We[0],Ke=We[1],Ve=(0,l.useState)(!1),qe=(0,s.Z)(Ve,2),Xe=qe[0],Qe=qe[1],$e=f.N.baseUrl,et=(0,l.useState)(!1),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],lt=(0,l.useState)([]),at=(0,s.Z)(lt,2),it=at[0],rt=at[1],ot=(0,l.useState)([]),ct=(0,s.Z)(ot,2),dt=ct[0],ut=ct[1],mt=(0,l.useState)([]),pt=(0,s.Z)(mt,2),ft=pt[0],ht=pt[1],vt=(0,l.useState)([]),gt=(0,s.Z)(vt,2),xt=gt[0],jt=gt[1],yt=(0,l.useState)([]),Nt=(0,s.Z)(yt,2),bt=Nt[0],Dt=Nt[1],St=(0,l.useState)(!1),Ct=(0,s.Z)(St,2),_t=Ct[0],Zt=Ct[1],kt=(0,l.useState)(!1),wt=(0,s.Z)(kt,2),Mt=wt[0],Et=wt[1],It=(0,l.useState)(!1),Tt=(0,s.Z)(It,2),At=Tt[0],Bt=Tt[1],Rt=(0,l.useState)(!1),Ft=(0,s.Z)(Rt,2),Ot=Ft[0],Yt=Ft[1],Lt=(0,l.useState)(!1),Pt=(0,s.Z)(Lt,2),Ht=Pt[0],Ut=Pt[1],zt=(0,l.useState)(!1),Gt=(0,s.Z)(zt,2),Wt=Gt[0],Jt=Gt[1],Kt=(0,l.useState)(!1),Vt=(0,s.Z)(Kt,2),qt=Vt[0],Xt=Vt[1],Qt=(0,l.useState)([]),$t=(0,s.Z)(Qt,2),en=$t[0],tn=$t[1],nn=(0,l.useState)([]),sn=(0,s.Z)(nn,2),ln=sn[0],an=sn[1];(0,l.useEffect)((function(){}),[ln]);var rn=document.createElement("div");rn.innerHTML=ln;var on=rn.textContent.trim(),cn=((0,l.useRef)([]),(0,l.useRef)(null)),dn=(0,l.useState)(0),un=(0,s.Z)(dn,2),mn=un[0],pn=un[1];(0,l.useEffect)((function(){mn&&cn.current&&cn.current.scrollIntoView({behavior:"instant"})}),[mn]);var fn=(0,l.useRef)(null),hn=(0,l.useState)(0),vn=(0,s.Z)(hn,2),gn=vn[0],xn=vn[1];(0,l.useEffect)((function(){gn&&fn.current&&fn.current.scrollIntoView({behavior:"instant"})}),[gn]);var jn=(0,l.useRef)(null),yn=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.qL$,{className:"chevronIcon"})})},Nn=function(){var e=new Date,t=e.getDay(),n=e.getDate()-t+6;return new Date(e.setDate(n))}(),bn=(0,l.useState)(Nn),Dn=(0,s.Z)(bn,2),Sn=Dn[0],Cn=Dn[1],_n=(v()(Sn).format("yyyy-MM-DD"),new Date),Zn=new Date(_n.getTime()-(_n.getDay()+1)%7*24*60*60*1e3),kn=(0,N.TH)(),wn=new URLSearchParams(kn.search).get("id"),Mn=(0,l.useState)(!1),En=(0,s.Z)(Mn,2),In=En[0],Tn=En[1],An=(0,l.useState)([]),Bn=(0,s.Z)(An,2),Rn=(Bn[0],Bn[1]);(0,l.useEffect)((function(){p()({method:"get",url:$e+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===wn?0:wn)}).then((function(e){var t=e.data;Rn(t),console.log(t+"in line 881...")}))}),[]);var Fn=(0,l.useState)({BuIds:"170,211,123,82,168,207,212,18,213,49,149,208,243",CountryIds:"-1",StartDate:v()(Sn).format("yyyy-MM-DD"),Duration:"4",resType:"0"}),On=(0,s.Z)(Fn,2),Yn=On[0],Ln=On[1],Pn={id:ue,rmg_bench_type_id:""},Hn=(0,l.useState)(Pn),Un=(0,s.Z)(Hn,2),zn=(Un[0],Un[1]),Gn=(0,l.useState)(),Wn=(0,s.Z)(Gn,2),Jn=Wn[0],Kn=Wn[1];(0,l.useEffect)((function(){Xn()}),[ne,en]);var Vn=function(){jn.current&&jn.current.abort(),re(!1)};(0,l.useEffect)((function(){p()({method:"get",url:$e+"/fullfilmentms/resourceoverview/actionitemtypes"}).then((function(e){var t=e.data;Kn(t)}))}),[]),(0,l.useEffect)((function(){p()({method:"get",url:$e+"/ProjectMS/defectphases/getresourceid?id=".concat(o)}).then((function(e){var t=e.data;ke(t)}))}),[Ze]);var qn=function(){var e=(0,V.Z)((0,K.Z)().mark((function e(){var t;return(0,K.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ut(!1),ht([]),Dt([]),t=setTimeout((function(){re(!0)}),2e3),p()({method:"post",url:$e+"/fullfilmentms/resourceoverview/getResourceTrendingData",data:{departments:"170,211,123,82,168,207,212,18,213,49,149,208,0"===Yn.BuIds||""===Yn.BuIds?"-1":Yn.BuIds,country:""==Yn.CountryIds?"-1":Yn.CountryIds,from:Yn.StartDate,duration:Yn.Duration,resType:Yn.resType},headers:{"Content-Type":"application/json"}}).then((function(e){var n=e.data;p()({method:"get",url:$e+"/fullfilmentms/resourceoverview/getheaders?ReportRunId=".concat(n.reportRunId)}).then((function(e){var t=e.data.val,n=null===t||void 0===t?void 0:t.replaceAll("'",""),s=null===n||void 0===n?void 0:n.split(",");jt(s);var l=null===s||void 0===s?void 0:s.map((function(e){return e.trim()}));ht(l),Bt(!0)})),Dt(n),re(!1),clearTimeout(t),x(!g),w(g?d.UdN:d.NR5)})),Et(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){p().get($e+"/CostMS/cost/getDepartments").then((function(e){var t=[],n=e.data;n.push({value:999,label:"Non-Revenue Units"}),n.length>0&&n.forEach((function(e){var n={label:e.label,value:e.value};t.push(n)})),O(t),z(t.filter((function(e){return 999!==e.value})))})).catch((function(e){return console.log(e)})),p().get($e+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.country_name,value:e.id};t.push(n)})),rt(t),ut(t)})).catch((function(e){return console.log(e)}))}),[]),(0,l.useEffect)((function(){J[0]&&Be(JSON.parse(JSON.stringify(J[0])))}),[J]),(0,l.useEffect)((function(){if(At&&0===ft.length&&bt){var e=xt.map((function(e){return e.trim()}));ht(e)}}),[At,bt,Yn.Duration]);var Xn=function(){p()({method:"post",url:$e+"/fullfilmentms/resourceoverview/getRMGHcDetailsView?kpi=".concat(ne,"&weekDt=").concat(en,"&sessKey=").concat(bt.sessKey,"&reportRunId=").concat(bt.reportRunId)}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].resDOJ=null==t[n].resDOJ?"":v()(t[n].resDOJ).format("DD-MMM-YYYY"),t[n].actionItemDate=null==t[n].actionItemDate?"":v()(t[n].actionItemDate).format("DD-MMM-YYYY"),t[n].actionItemEffDt=null==t[n].actionItemEffDt?"":v()(t[n].actionItemEffDt).format("DD-MMM-YYYY"),t[n].rollOfDate=null==t[n].rollOfDate?"":v()(t[n].rollOfDate).format("DD-MMM-YYYY"),t[n].aging=0==t[n].aging?"NA":t[n].aging;for(var s=[{employee_number:"Emp ID",resName:"Emp Name",resDOJ:"DOJ",resCategory:"Res Cat",practice:"Practice",subPractice:"SubPractice",supervisor:"Supervisor",projects:"Projects",resAlloc:"Allocs",rollOfDate:"Roll of Date",aging:"Ageing",workLocation:"Work Location",designation:"Designation",resEmail:"Email",restType:"Res Type",skillName:"Skills",actionItem:"Action   Item",actionItemDate:"Action Item Date",actionItemEffDt:"Action Item Eff Dt"}],l=[],a=[],i=0;i<t.length;i++)0==i?l.push(t[i]):a.push(t[i]);Ee(a);s.concat(a);var r=t.sort((function(e,t){var n=e.employee_number.toUpperCase(),s=t.employee_number.toUpperCase();return n<s?-1:n>s?1:0}));Ut(!0),$(s.concat(r)),pn((function(e){return e+1})),re(!1),setTimeout((function(){re(!1)}),100)})).catch((function(e){re(!1)}))},Qn=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},"data-toggle":"tooltip",title:e.employee_number,children:e.employee_number})},$n=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.resDOJ,children:e.resDOJ})},es=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.resCategory,children:e.resAlloc>=e.resNetCap?"Fully Allocated":e.resCategory})},ts=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.practice,children:e.practice})},ns=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.subPractice,children:e.subPractice})},ss=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.supervisor,children:e.supervisor})},ls=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.projects,children:e.projects})},as=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:e.resAlloc,children:e.resAlloc})},is=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},"data-toggle":"tooltip",title:e.aging,children:e.aging})},rs=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.workLocation,children:e.workLocation})},os=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.designation,children:e.designation})},cs=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.resEmail,children:e.resEmail})},ds=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},"data-toggle":"tooltip",title:e.restType,children:e.restType})},us=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.skillName,children:e.skillName})},ms=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.actionItem,children:e.actionItem})},ps=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",style:{textAlign:"center"},title:e.actionItemDate,children:e.actionItemDate})},fs=function(e){return(0,y.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},"data-toggle":"tooltip",title:e.actionItemEffDt,children:e.actionItemEffDt})},hs=function(e){Oe[0];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{children:1==e.isInNotice?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",children:[(0,y.jsx)("img",{src:_,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{title:e.resName,children:e.resName})]}):"CN Employee"==e.restType||"Employed - Full Time"==e.restType||"Gardening Leave"==e.restType||"Maternity Leave"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resName,children:e.resName})]}):"Contractor"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon amber ellipsis",title:"Active Contractor",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resName,children:e.resName})]}):"UK Employee"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{className:"ellipsis",title:e.resName,children:e.resName})]}):"Sub-Contractor"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon amber ellipsis",title:"Active Contractor",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{title:e.resName,children:e.resName})]}):"US Employee"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items",cursor:"pointer"})})," ","\xa0",(0,y.jsx)("span",{title:e.resName,children:e.resName})]}):"DE Employee"==e.restType?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("a",{onClick:function(t){gs(e.resId),Qe(!0),me(e.resId),ve(e.resName),ye(e.resCategory)},children:(0,y.jsx)(I.py9,{size:"1.4em",title:"Action Items"})})," ","\xa0",(0,y.jsx)("span",{title:e.resName,children:e.resName})]}):""})})},vs=null===(t=Object.keys(Ae))||void 0===t?void 0:t.map((function(e,t){return(0,y.jsx)(R.sgG,{sortable:!0,body:"resName"==e&&hs||"employee_number"==e&&Qn||"resDOJ"==e&&$n||"resCategory"==e&&es||"practice"==e&&ts||"resAlloc"==e&&as||"aging"==e&&is||"workLocation"==e&&rs||"designation"==e&&os||"resEmail"==e&&cs||"restType"==e&&ds||"skillName"==e&&us||"actionItem"==e&&ms||"actionItemDate"==e&&ps||"actionItemEffDt"==e&&fs||"subPractice"==e&&ns||"supervisor"==e&&ss||"projects"==e&&ls,field:e,header:Ae[e]},e)}));(0,l.useEffect)((function(){Q[0]&&Be(JSON.parse(JSON.stringify(Q[0])));ze(["XLS"])}),[Q]);var gs=function(e){re(!1);var t=JSON.stringify(e);Ke(e),p()({method:"get",url:$e+"/fullfilmentms/resourceoverview/ActionTable?resource_id=".concat(t)}).then((function(e){var t=e.data;Se(t),re(!1),xn((function(e){return e+1})),Zt(!1)}))},xs=(0,l.useState)([]),js=(0,s.Z)(xs,2),ys=js[0],Ns=js[1];(0,l.useEffect)((function(){bs()}),[]);var bs=function(){p()({method:"GET",url:$e+"/CommonMS/master/getMenus?loggedUserId=".concat(o)}).then((function(e){e.data.forEach((function(e){"Fullfilment"===e.display_name&&Ns([e])}))}))},Ds=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"col-md-12",children:[In?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(S.hXj,{size:"1.4em"})," \xa0 Search created successfully."]})}):"",(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Resource Overview"})}),(0,y.jsx)("div",{className:"childThree"})]})]}),(0,y.jsx)(M.Z,{routes:ys,currentScreenName:["Bench Metrics","Resource Overview"]}),(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(D.Z,{pdfname:"RMGResourceOverview.pdf",name:"Resource overview Help"})}),(0,y.jsx)("div",{className:"saveBtn",children:(0,y.jsx)(b.Z,{setEditAddmsg:Tn,pageurl:"http://10.11.12.149:3000/#/rmg/bench",page_Name:"Resource Overview",payload:Yn})}),"\xa0",(0,y.jsx)("div",{onClick:function(){x(!g),w(g?d.UdN:d.NR5)},children:(0,y.jsx)("span",{children:k})})]}),(0,y.jsx)(u.V9,{visible:!g,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"BuIds",children:"Business Unit"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(r.NU,{ArrowRenderer:yn,valueRenderer:Ds,id:"BuIds",value:U,options:F,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<<Please Select>>"},disabled:!1,onChange:function(e){z(e);var t=[];e.forEach((function(e){t.push(e.value)})),Ln((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"BuIds",t.toString()))}))}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"country",children:"Country"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 multiselect",children:(0,y.jsx)(r.NU,{ArrowRenderer:yn,valueRenderer:Ds,id:"CountryIds",options:it,hasSelectAll:!0,value:dt,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<<Please Select>>"},onChange:function(e){ut(e);var t=[];e.forEach((function(e){t.push(e.value)})),Ln((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"CountryIds",t.toString()))}))}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"startweek",children:["Start Week\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 datepicker",children:(0,y.jsx)(c(),{name:"StartDate",minDate:Zn,id:"StartDate",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:Sn,onChange:function(e){Ln((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},"StartDate",v()(e).format("yyyy-MM-DD")))})),Cn(e)},filterDate:function(e){return 6===e.getDay()},dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"duration",children:["Duration\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 ",children:(0,y.jsxs)("select",{className:"text",id:"Duration",onChange:function(e){var t=e.target,n=t.value,s=t.id;Ln((0,i.Z)((0,i.Z)({},Yn),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"1",children:"1"}),(0,y.jsx)("option",{value:"2",children:"2"}),(0,y.jsx)("option",{value:"3",children:"3"}),(0,y.jsx)("option",{value:"4",selected:!0,children:"4"}),(0,y.jsx)("option",{value:"5",children:"5"}),(0,y.jsx)("option",{value:"6",children:"6"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"resType",children:"Res. Type"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"resType",name:"resType",onChange:function(e){var t=e.target,n=t.value,s=t.id;Ln((0,i.Z)((0,i.Z)({},Yn),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"all",children:" <<ALL>>"}),(0,y.jsx)("option",{value:"1",children:"Employee"}),(0,y.jsx)("option",{value:"2",children:"Contractors"})]})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:nt?(0,y.jsxs)("button",{className:"btn btn-primary",type:"button",style:{pointerEvents:"none"},children:[(0,y.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}),ie?(0,y.jsx)(j.Z,{handleAbort:Vn}):""]}):(0,y.jsxs)("button",{className:"btn btn-primary ",onClick:function(){qn(),Qe(!1),Ut(!1)},children:[(0,y.jsx)(d.U41,{}),"Search"]})})]})})]}),Mt&&(0,y.jsx)(de,{tableData:bt,column:ft,onClickHandler:function(e,t){Qe(!1),re(!1);var n={};n.a=e,n.b=t},setEmpTable:Ut,setId:se,id:ne,setHeaderDate:tn,setTotaldata:an}),ie?(0,y.jsx)(j.Z,{handleAbort:Vn}):"",Ht&&(0,y.jsxs)("div",{ref:cn,className:"resourceOverviewEmp",children:[(0,y.jsxs)("b",{style:{color:"#297ab0",fontSize:"15px"},children:[on," Details"," "]}),(0,y.jsx)("br",{}),(0,y.jsx)(E.Z,{data:Q,dynamicColumns:vs,headerData:Ae,setHeaderData:Be,rows:25,exportData:Ue,fileName:"Resource Overview"})]},mn),(0,y.jsx)("br",{}),Xe&&(0,y.jsxs)("div",{className:"col-md-12",ref:fn,children:[qt?(0,y.jsxs)("div",{className:"statusMsg success",children:[(0,y.jsx)(S.hXj,{}),"Action Item Saved Successfully"]}):"",Ot?(0,y.jsxs)("div",{className:"statusMsg success",children:[(0,y.jsx)(S.hXj,{}),"Updated Successfully"]}):"",Wt?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(S.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," \xa0 Action Item Deleted successfully"]})}):"",_t?(0,y.jsxs)("div",{className:"statusMsg error",children:[(0,y.jsx)(L.CSE,{}),"Please provide valid values for highlighted values"]}):"",(0,y.jsx)("div",{class:"actionItemStyles",children:(0,y.jsxs)("div",{class:"row",children:[(0,y.jsx)("div",{class:"col-md-4",children:(0,y.jsxs)("label",{style:{color:"#2e88c5"},children:["Action Items (",he,")"]})}),(0,y.jsx)("div",{class:"col-md-4",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("label",{style:{float:"right",color:"#2e88c5"},children:"Resource Alloc Category :"})}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("select",{id:"ResourceAllocCategory",onChange:function(e){return function(e){var t=e.target,n=t.id,s=t.value;zn((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},n,s))})),p().post($e+"/fullfilmentms/resourceoverview/updateResourceAlloc",{id:ue,rmg_bench_type_id:s}).then((function(e){p().post($e+"/fullfilmentms/resourceoverview/updateRMGResAllocActionItem?resourceId=".concat(ue)).then((function(e){Yt(!0),re(!0),setTimeout((function(){Yt(!1),re(!1)}),4e3),Xn()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(e)},children:null===Jn||void 0===Jn?void 0:Jn.map((function(e){return(0,y.jsx)("option",{value:e.id,selected:e.lkup_name==je,children:e.lkup_name},e.id)}))})})]})})]})}),(0,y.jsx)("div",{className:"resourceOverviewEmp",children:(0,y.jsx)(P,{resid:ue,resourcedata:De,setResourcedata:Se,setResourceName:ve,handleClick1:gs,setDeleteMessage:Jt,setSaveActionMessage:Xt,employeeid:Je,setValidationMessage:Zt,searching:nt,validationmessage:_t,setsearching:st,permission:n})})]},gn)]})},me=n(50541);var pe=function(){var e=(0,l.useState)(!1),t=(0,s.Z)(e,2),n=t[0],o=t[1],m=(0,l.useState)([]),h=(0,s.Z)(m,2),g=h[0],x=(h[1],(0,l.useState)(d.UdN)),S=(0,s.Z)(x,2),C=S[0],_=S[1],Z=(0,l.useState)([]),k=(0,s.Z)(Z,2),E=k[0],I=k[1],T=(0,l.useState)([]),A=(0,s.Z)(T,2),B=A[0],R=A[1],F=(0,l.useState)([]),O=(0,s.Z)(F,2),Y=O[0],P=O[1],H=(0,l.useState)([]),U=(0,s.Z)(H,2),z=U[0],G=U[1],W=(0,l.useState)(!1),J=(0,s.Z)(W,2),q=J[0],X=J[1],Q=(0,l.useState)(!1),$=(0,s.Z)(Q,2),ee=($[0],$[1]),te=f.N.baseUrl,ne=(0,l.useState)([]),se=(0,s.Z)(ne,2),le=(se[0],se[1]),ae=(0,l.useState)(""),ie=(0,s.Z)(ae,2),re=ie[0],oe=ie[1],ce=(0,l.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],pe=de[1],fe=(0,l.useState)([]),he=(0,s.Z)(fe,2),ve=he[0],ge=he[1],xe=(0,l.useState)([]),je=(0,s.Z)(xe,2),ye=je[0],Ne=je[1],be=(0,l.useState)(!1),De=(0,s.Z)(be,2),Se=(De[0],De[1]),Ce=(0,l.useState)(!1),_e=(0,s.Z)(Ce,2),Ze=_e[0],ke=_e[1],we=(0,l.useState)([1,2,3,4]),Me=(0,s.Z)(we,2),Ee=Me[0],Ie=Me[1],Te=(0,l.useState)(!1),Ae=(0,s.Z)(Te,2),Be=Ae[0],Re=Ae[1],Fe=new Date,Oe=(0,l.useState)(!1),Ye=(0,s.Z)(Oe,2),Le=Ye[0],Pe=Ye[1],He=(0,l.useRef)(null),Ue=(0,l.useState)(),ze=(0,s.Z)(Ue,2),Ge=ze[0],We=ze[1],Je="";(0,l.useEffect)((function(){var e=new Date,t=new Date(e),n=28+(e.getDay()+1)%7;t.setDate(e.getDate()-n),Je=t,We(t)}),[]);var Ke=function(e){var t=e.getDay(),n=t>=5?t-5:t+2,s=new Date(e);return s.setDate(e.getDate()-n),s}(Fe),Ve=(v()(Ge).format("yyyy-MM-DD"),(0,N.TH)()),qe=new URLSearchParams(Ve.search).get("id"),Xe=(0,l.useState)(!1),Qe=(0,s.Z)(Xe,2),$e=(Qe[0],Qe[1]),et=(0,l.useState)([]),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],lt=(0,l.useRef)([]),at=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.qL$,{className:"chevronIcon"})})},it=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};(0,l.useEffect)((function(){p()({method:"get",url:te+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===qe?0:qe)}).then((function(e){var t=e.data;st(t),console.log(t+"in line 881...")}))}),[]);var rt=(0,l.useState)({BuIds:"-1",CountryIds:"-1",FromDate:v()(Ge).format("yyyy-MM-DD"),Duration:"4",resType:"0"}),ot=(0,s.Z)(rt,2),ct=ot[0],dt=ot[1];console.log("formdate...",Ge),v()(Ge).format("yyyy-MM-DD"),(0,l.useEffect)((function(){dt((function(){return null!=qe?{BuIds:nt.BuIds,CountryIds:nt.CountryIds,FromDate:nt.FromDate,Duration:nt.Duration,resType:nt.resType}:{BuIds:"-1",CountryIds:"-1",FromDate:v()(Je).format("yyyy-MM-DD"),Duration:nt.Duration,resType:"0"}}))}),[nt]),(0,l.useEffect)((function(){if(null!=qe){var e=Y.filter((function(e){var t;return null===(t=ct.BuIds)||void 0===t?void 0:t.includes(e.value)})),t=E.filter((function(e){var t;return null===(t=ct.CountryIds)||void 0===t?void 0:t.includes(e.value)}));G(e),R(t),console.log(t)}}),[qe]);var ut=function(){var e=(0,V.Z)((0,K.Z)().mark((function e(){var t,s;return(0,K.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=lt.current.filter((function(e){return null!=e})),lt.current=t,s=(0,w.Z)(lt),console.log(s),!s){e.next=8;break}return Se(!0),Re(!0),e.abrupt("return");case 8:return Re(!1),pe([]),Ne([]),ee(!0),X(!0),e.next=15,p()({method:"post",url:te+"/fullfilmentms/resourceTrending/getResourceTrendingData",data:{departments:ct.BuIds,country:ct.CountryIds,from:v()(Ge).format("yyyy-MM-DD"),duration:ct.Duration,resType:ct.resType},headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;p()({method:"get",url:te+"/fullfilmentms/resourceTrending/getheaders?ReportRunId=".concat(t.reportRunId)}).then((function(e){var t=e.data.val.replaceAll("'","").split(",");ge(t);var n=t.map((function(e){return e.trim()}));pe(n),Pe(!0)})),Ne(t),X(!1),o(!n),_(n?d.UdN:d.NR5),ee(!1)}));case 15:ke(!0),X(!1),o(!n),_(n?d.UdN:d.NR5);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(Ze),console.log("dur,,,",Ee),(0,l.useEffect)((function(){g[0]&&le(JSON.parse(JSON.stringify(g[0])))}),[g]),(0,l.useEffect)((function(){if(Le&&0===ue.length&&ye){var e=ve.map((function(e){return e.trim()}));pe(e)}}),[Le,ye,ct.Duration]),(0,l.useEffect)((function(){p().get(te+"/CostMS/cost/getDepartments").then((function(e){var t=[],n=e.data;console.log(n),n.push({value:999,label:"Non-Revenue Units"}),n.length>0&&n.forEach((function(e){var n={label:e.label,value:e.value};t.push(n)})),P(t),null==qe&&G(t)})).catch((function(e){return console.log(e)})),p().get(te+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;console.log(n),n.length>0&&n.forEach((function(e){var n={label:e.country_name,value:e.id};t.push(n)})),I(t),null==qe&&R(t)})).catch((function(e){return console.log(e)}))}),[]);var mt=localStorage.getItem("resId"),pt=(0,l.useState)([]),ft=(0,s.Z)(pt,2),ht=ft[0],vt=ft[1];(0,l.useEffect)((function(){gt()}),[]);var gt=function(){p()({method:"GET",url:te+"/CommonMS/master/getMenus?loggedUserId=".concat(mt)}).then((function(e){e.data.forEach((function(e){"Fullfilment"===e.display_name&&vt([e])}))}))},xt=(0,l.useState)(null),jt=(0,s.Z)(xt,2);return jt[0],jt[1],(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Resource Trending"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsx)(M.Z,{routes:ht,currentScreenName:["Bench Metrics","Resource Trending"]}),Be?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsx)(L.CSE,{})," Please select valid values for highlighted fields"]}):"",q?(0,y.jsx)(j.Z,{handleAbort:function(){He.current&&He.current.abort(),X(!1)}}):"",(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(D.Z,{pdfname:"RMGResourceTrending.pdf",name:"Resource Trending Help"})}),(0,y.jsx)("div",{className:"saveBtn",children:(0,y.jsx)(b.Z,{setEditAddmsg:$e,pageurl:"http://10.11.12.149:3000/#/rmg/bench",page_Name:"Resource Trending",payload:ct})}),"\xa0",(0,y.jsx)("div",{onClick:function(){o(!n),_(n?d.UdN:d.NR5)},children:(0,y.jsx)("span",{children:C})})]}),(0,y.jsx)(u.V9,{visible:!n,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"businessUnit",children:"Business Unit"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(r.NU,{ArrowRenderer:at,valueRenderer:it,id:"BuIds",value:z,options:Y,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<<Please Select>>"},disabled:!1,onChange:function(e){G(e);var t=[];e.forEach((function(e){t.push(e.value)})),dt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"BuIds",t.toString()))}))}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"country",children:"Country"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 multiselect",children:(0,y.jsx)(r.NU,{ArrowRenderer:at,valueRenderer:it,id:"CountryIds",options:E,hasSelectAll:!0,value:B,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<<Please Select>>"},onChange:function(e){R(e);var t=[];e.forEach((function(e){t.push(e.value)})),dt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"CountryIds",t.toString()))}))}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"startweek",children:["Start Week",(0,y.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(c(),{showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:Ge,onChange:function(e){!function(e){var t=v()(e),n=v()(new Date).diff(t,"days"),s=Math.floor(n/7);s>11&&(s=11);for(var l=[],a=1;a<=s;a++)l.push(a);Ie(l),console.log("weeksDifference....",s)}(e);var t=v()(e),n=t.day();if(oe(""),6!==n){for(var s=t.clone().day(-1);6!==s.day();)s.subtract(1,"day");We(s.toDate()),dt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"FromDate",s.format("yyyy-MM-DD")))}))}else We(t.toDate()),dt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"FromDate",t.format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()},calendarStartDay:6,dateFormat:"dd-MMM-yy",maxDate:Ke})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"duration",children:["Duration\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"Duration",onChange:function(e){oe(e.target.value);var t=e.target,n=t.value,s=t.id;dt((0,i.Z)((0,i.Z)({},ct),{},(0,a.Z)({},s,n)))},value:re,ref:function(e){lt.current[0]=e},children:[(0,y.jsx)("option",{value:"",children:"<< Please Select >>"}),null===Ee||void 0===Ee?void 0:Ee.map((function(e){return(0,y.jsx)("option",{value:e,children:e},e)}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"resType",children:"Res. Type"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"resType",onChange:function(e){var t=e.target,n=t.value,s=t.id;dt((0,i.Z)((0,i.Z)({},ct),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"all",children:" <<ALL>>"}),(0,y.jsx)("option",{value:"1",children:"Employee"}),(0,y.jsx)("option",{value:"2",children:"Contractors"})]})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:(0,y.jsxs)("button",{className:"btn btn-primary ",onClick:function(){return ut()},children:[(0,y.jsx)(d.U41,{}),"Search"]})})]})})]}),Ze&&(0,y.jsx)(me.Z,{tableData:ye,column:ue})]})};n(41980),n(39122),n(31896),n(81975);var fe=n(73220),he=n(11087),ve=n(40071);var ge=function(){var e,t=f.N.baseUrl,n=(0,l.useState)([]),o=(0,s.Z)(n,2),m=o[0],h=o[1],N=(0,l.useRef)([]),b=(0,l.useState)(!1),S=(0,s.Z)(b,2),k=S[0],E=S[1],I=(0,l.useState)(new Date),A=(0,s.Z)(I,2),B=A[0],R=(A[1],(0,l.useState)(!1)),F=(0,s.Z)(R,2),O=F[0],Y=F[1],L=(0,l.useState)(d.UdN),P=(0,s.Z)(L,2),H=P[0],U=P[1],z=(0,l.useState)([]),G=(0,s.Z)(z,2),W=(G[0],G[1]),J=(0,l.useState)([]),q=(0,s.Z)(J,2),X=q[0],Q=q[1],$=(0,l.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,l.useState)([]),le=(0,s.Z)(se,2),ae=le[0],ie=le[1],re=(0,l.useState)([]),oe=(0,s.Z)(re,2),ce=oe[0],de=oe[1],ue=(0,l.useState)(new Date),me=(0,s.Z)(ue,2),pe=me[0],ge=me[1],xe=(0,l.useState)([]),je=(0,s.Z)(xe,2),ye=je[0],Ne=je[1],be=(0,l.useState)([]),De=(0,s.Z)(be,2),Se=De[0],Ce=De[1],_e=(0,l.useState)([]),Ze=(0,s.Z)(_e,2),ke=Ze[0],we=Ze[1],Me=(0,l.useState)([]),Ee=(0,s.Z)(Me,2),Ie=Ee[0],Te=Ee[1],Ae=(0,l.useState)([]),Be=(0,s.Z)(Ae,2),Re=Be[0],Fe=Be[1],Oe=(0,l.useState)(!1),Ye=(0,s.Z)(Oe,2),Le=Ye[0],Pe=Ye[1],He=(0,l.useState)(!1),Ue=(0,s.Z)(He,2),ze=Ue[0],Ge=Ue[1],We=(0,l.useRef)(null),Je=function(){var e=new Date,t=e.getDay(),n=e.getDate()-t+(0===t?-6:-1);return new Date(e.setDate(n))}(),Ke=(0,l.useState)(Je),Ve=(0,s.Z)(Ke,2),qe=Ve[0],Xe=Ve[1],Qe=v()(pe).startOf("month").format("yyyy-MM-DD"),$e=(v()(B).format("yyyy-MMM-DD"),(0,l.useState)(!1)),et=(0,s.Z)($e,2);et[0],et[1],(0,l.useEffect)((function(){h(["XLS"])}),[]);var tt=function(e){var t,n=null===(t=ke[0])||void 0===t?void 0:t.split(":");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(he.rU,{target:"_blank",to:n[0]+":"+e[n[1]],"data-toggle":"tooltip",title:e.project,children:e[Se[0]]})})},nt=function(e){var t,n=null===(t=ke[1])||void 0===t?void 0:t.split(":");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(he.rU,{target:"_blank",to:n[0]+":"+e[n[1]],"data-toggle":"tooltip",title:e.customer,children:e[Se[1]]})})},st=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.role_name,children:e.role_name})},lt=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.csl,children:e.csl})},at=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.dp,children:e.dp})},it=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.project_code,children:e.project_code})},rt=function(e){return console.log(e,"dataforicons"),(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.resource,children:(0,y.jsx)("div",{className:"legendContainer",title:e.resource,children:"fte1"==e.resStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon green ellipsis",title:"Active Employee",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("span",{title:e.resource,className:"ellipsis",children:e.resource})]}):"subk1"==e.resStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon amber ellipsis",title:"Active Contractor",children:[(0,y.jsx)(T.Lqe,{className:"icon"}),(0,y.jsx)("span",{title:e.resource,children:e.resource})]}):"subk0"==e.resStatus?(0,y.jsxs)("div",{className:"rollOffTableIcon amber",children:[(0,y.jsx)("img",{className:"rollOffTableIcon ",src:Z,alt:"(fte_inactive_icon)",style:{height:"12px",float:"left",marginTop:"3px",marginRight:"5px"},title:"Ex-Contractor"}),(0,y.jsx)("span",{title:e.resource,children:(0,y.jsx)("span",{children:e.resource})})]}):"fte0"==e.resStatus?(0,y.jsxs)("div",{className:"ellipsis",children:[(0,y.jsx)("img",{src:C,alt:"(fte_inactive_icon)",style:{height:"12px",float:"left",marginTop:"3px",marginRight:"5px"},title:"Ex-Employee"}),(0,y.jsx)("span",{title:e.resource,children:(0,y.jsx)("span",{children:e.resource})})]}):"fte2"==e.resStatus?(0,y.jsxs)("div",{className:"ellipsis",children:[(0,y.jsx)("img",{src:_,alt:"(fte_notice_icon)",style:{height:"12px",float:"left",marginTop:"3px",marginRight:"5px"},title:"Employee in notice period"}),(0,y.jsx)("span",{title:e.resource,children:(0,y.jsx)("span",{children:e.resource})})]}):""})})},ot=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.department,children:e.department})},ct=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.citizenship,children:e.citizenship})},dt=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.executive,children:e.executive})},ut=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.country,children:e.country})},mt=function(e){return(0,y.jsx)("div",{className:"ellipsis ",align:"left","data-toggle":"tooltip",title:v()(e.alloc_end_date).format("DD-MMM-yyyy"),children:null==e.alloc_end_date||""==e.alloc_end_date?"":"No Data Found^&1^&13"==e.alloc_end_date?"No Data Found":v()(e.alloc_end_date).format("DD-MMM-yyyy")})},pt=function(e){return(0,y.jsx)("div",{className:"ellipsis ",align:"left","data-toggle":"tooltip",title:v()(e.nxt_alloc_date).format("DD-MMM-yyyy"),children:null==e.nxt_alloc_date||""==e.nxt_alloc_date?"":"No Data Found^&1^&13"==e.nxt_alloc_date?"No Data Found":v()(e.nxt_alloc_date).format("DD-MMM-yyyy")})},ft=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.manager,children:e.manager})},ht=function(e){return(0,y.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.actionComments,children:e.actionComments})},vt=null===(e=Object.keys(ye))||void 0===e?void 0:e.map((function(e,t){return(0,y.jsx)(x.s,{sortable:!0,body:"project"==e?tt:"customer"==e?nt:"csl"==e?lt:"dp"==e?at:"project_code"==e?it:"resource"==e?rt:"department"==e?ot:"citizenship"==e?ct:"executive"==e?dt:"country"==e?ut:"alloc_end_date"==e?mt:"nxt_alloc_date"==e?pt:"manager"==e?ft:"actionComments"==e?ht:"role_name"==e&&st,field:e,header:ye[e]},e)}));(0,l.useEffect)((function(){Dt[0]&&Ne(JSON.parse(JSON.stringify(Dt[0])))}),[Dt]);var gt={BuIds:"170,211,123,82,168,207,212,18,213,49,149,208,243",CountryIds:"6,5,3,8,7,1,2",type:"1",FromDate:v()(qe).format("yyyy-MM-DD"),Duration:"1",FutureAlloc:"0"},xt=(0,l.useState)(gt),jt=(0,s.Z)(xt,2),yt=jt[0],Nt=jt[1];(0,l.useEffect)((function(){W([{allocends:"Alloc Ends",resource:"Resource",role:"Role",department:"Department",citizenship:"Citizenship",country:"Country",project:"Project",customer:"Customer",csl:"CSL",dp:"DP",projectcode:"Prject Code",projectmanager:"Project Manager",engexecutive:"Eng. Executive",recentactionitem:"Recent Action Item"},{allocends:"Alloc Ends",resource:"Resource",role:"Role",department:"Department",citizenship:"Citizenship",country:"Country",project:"Project",customer:"Customer",csl:"CSL",dp:"DP",projectcode:"Prject Code",projectmanager:"Project Manager",engexecutive:"Eng. Executive",recentactionitem:"Recent Action Item"}])}),[]),(0,l.useEffect)((function(){var e=[];X.forEach((function(t){e.push(t.value)})),Nt((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},"country",e.toString()))}))}),[X]);var bt=function(){var e=(0,V.Z)((0,K.Z)().mark((function e(){var n,s,l;return(0,K.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({url:t+"/CostMS/cost/getDepartments"});case 2:n=e.sent,s=n.data,ie(s),de(s.filter((function(e){return 0!=e.value}))),l=[],s.forEach((function(e){0!=e.value&&l.push(e.value)})),Nt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"BuIds",l.toString()))}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){bt(),p().get(t+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.country_name,value:e.id};"NM"!=e.country_name&&t.push(n)})),Q(t),ne(t)})).catch((function(e){return console.log(e)}))}),[]);var Dt={BuIds:yt.BuIds,CountryIds:yt.CountryIds,FromDate:v()(qe).format("yyyy-MM-DD"),Duration:yt.Duration,FutureAlloc:yt.FutureAlloc,isExport:"0",type:yt.type,monthVal:Qe},St=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(d.qL$,{className:"chevronIcon"})})},Ct=localStorage.getItem("resId"),_t=(0,l.useState)([]),Zt=(0,s.Z)(_t,2),kt=Zt[0],wt=Zt[1];(0,l.useEffect)((function(){Mt()}),[]);var Mt=function(){p()({method:"GET",url:t+"/CommonMS/master/getMenus?loggedUserId=".concat(Ct)}).then((function(e){e.data.forEach((function(e){"Fullfilment"===e.display_name&&wt([e])}))}))},Et=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Roll Offs"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsx)(M.Z,{routes:kt,currentScreenName:["Bench Metrics","Roll Offs"]}),(0,y.jsx)("div",{className:"col-md-12  mt-2",children:ze?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsxs)("span",{children:[" ",(0,y.jsx)(ve.SZZ,{})," Please select the valid values for highlighted fields"," "]})]}):""}),(0,y.jsxs)("div",{className:"group mb-5 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(D.Z,{pdfname:"RollOffs.pdf",name:"Roll Off Help"})}),(0,y.jsx)("div",{onClick:function(){Y(!O),U(O?d.UdN:d.NR5)},children:(0,y.jsx)("span",{children:H})})]}),(0,y.jsx)(u.V9,{visible:!O,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"BuIds",children:["Business Unit\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"multiselect",ref:function(e){N.current[0]=e},children:(0,y.jsx)(r.NU,{id:"BuIds",ArrowRenderer:St,options:ae,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:ce,valueRenderer:Et,disabled:!1,onChange:function(e){de(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"BuIds",t.toString()))}))}})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"CountryIds",children:["Country\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"multiselect",ref:function(e){N.current[1]=e},children:(0,y.jsx)(r.NU,{id:"CountryIds",options:X,ArrowRenderer:St,hasSelectAll:!0,value:te,disabled:!1,valueRenderer:Et,onChange:function(e){ne(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nt((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,a.Z)({},"CountryIds",t.toString()))}))}})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"type",children:["Type\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"type",name:"type",defaultValue:1,onChange:function(e){var t=e.target,n=t.value,s=t.id;Nt((0,i.Z)((0,i.Z)({},yt),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"1",selected:"selected",children:"Week"}),(0,y.jsx)("option",{value:"2",children:"Month"})]})})]})}),"2"==yt.type?(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("div",{className:"col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"StartDt",children:["Month\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(c(),{className:"monthval",id:"monthval",selected:pe,dateFormat:"MMM-yyyy",showMonthYearPicker:!0,onChange:function(e){return ge(e)}})})]})})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"week",children:["Week\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(c(),{className:"FromDate",id:"FromDate",selected:qe,onChange:function(e){Nt((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,a.Z)({},"FromDate",v()(e).format("yyyy-MM-DD")))})),Xe(e)},onKeyDown:function(e){e.preventDefault()},filterDate:function(e){return 6===e.getDay()},dateFormat:"dd-MMM-yy"})})]})})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"Duration",children:["Duration\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"Duration",name:"Duration",onChange:function(e){var t=e.target,n=t.value,s=t.id;Nt((0,i.Z)((0,i.Z)({},yt),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"1",children:"1"}),(0,y.jsx)("option",{value:"2",children:"2"}),(0,y.jsx)("option",{value:"3",children:"3"}),(0,y.jsx)("option",{value:"4",children:"4"}),(0,y.jsx)("option",{value:"5",children:"5"}),(0,y.jsx)("option",{value:"6",children:"6"}),(0,y.jsx)("option",{value:"7",children:"7"}),(0,y.jsx)("option",{value:"8",children:"8"}),(0,y.jsx)("option",{value:"9",children:"9"}),(0,y.jsx)("option",{value:"10",children:"10"}),(0,y.jsx)("option",{value:"11",children:"11"}),(0,y.jsx)("option",{value:"12",children:"12"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"FutureAlloc",children:"Future Alloc."}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text",id:"FutureAlloc",name:"FutureAlloc",defaultValue:0,onChange:function(e){var t=e.target,n=t.value,s=t.id;Nt((0,i.Z)((0,i.Z)({},yt),{},(0,a.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"-1",children:"<< Please Select >>"}),(0,y.jsx)("option",{value:"0",children:"No"}),(0,y.jsx)("option",{value:"1",children:"Yes"})]})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-1",children:(0,y.jsxs)("button",{type:"submit",className:"btn btn-primary",title:"Search",onClick:function(){Y(!O),Pe(!0);var e=(0,w.Z)(N);if((""==yt.BuIds||""==yt.CountryIds)&&e)return Ge(!0),setTimeout((function(){Ge(!1)}),3e3),void Pe(!1);E(!1),We.current=new AbortController,!e&&Y(!O),p().post(t+"/fullfilmentms/rolloffs/postRollOffs",Dt,{signal:We.current.signal}).then((function(e){var t="No Data Found^&1^&13"===e.data[1].alloc_end_date?e.data.slice(2):e.data.slice(1);(0,fe.Z)(N);Ce(["project","customer"]),we(["/project/Overview/:projectId","/search/customerSearch/customer/dashboard/:custId"]),Te([{alloc_end_date:"Alloc Ends",resource:"Resource",role_name:"Role",department:"Department",citizenship:"Citizenship",country:"Country",project:"Project",customer:"Customer",csl:"CSL",dp:"DP",project_code:"Project Code",manager:"Project Manager",executive:"Eng. Executive",actionComments:"Recent Action Item"}].concat(t)),Fe([{alloc_end_date:"Alloc Ends",nxt_alloc_date:"Next Alloc",resource:"Resource",role_name:"Role",department:"Department",citizenship:"Citizenship",country:"Country",project:"Project",customer:"Customer",csl:"CSL",dp:"DP",project_code:"Project Code",manager:"Project Manager",executive:"Eng. Executive",actionComments:"Recent Action Item"}].concat(t)),E(!1),Pe(!1),setTimeout((function(){E(!1)}),1e3),U(O?d.UdN:d.NR5)}))},children:[(0,y.jsx)(d.U41,{}),"Search"]})}),k?(0,y.jsx)(j.Z,{handleAbort:function(){We.current&&We.current.abort(),E(!1)}}):""]})})]}),(0,y.jsx)("div",{className:"col-md-12 resourceOverviewEmp",children:(0,y.jsx)(g.Z,{className:"primeReactDataTable",data:Ie,linkColumns:Se,linkColumnsRoutes:ke,dynamicColumns:vt,headerData:ye,setHeaderData:Ne,exportData:m,rows:10,fileName:"RollOffs"})}),"0"==yt.FutureAlloc&&Le?(0,y.jsx)("div",{className:"col-md-12 resourceOverviewEmp",children:(0,y.jsx)(g.Z,{className:"primeReactDataTable",data:Ie,linkColumns:Se,linkColumnsRoutes:ke,dynamicColumns:vt,headerData:ye,setHeaderData:Ne,exportData:m,rows:10,fileName:"RollOffs"})}):"0"!=yt.FutureAlloc&&Le?(0,y.jsx)("div",{className:"col-md-12 resourceOverviewEmp",children:(0,y.jsx)(g.Z,{className:"primeReactDataTable",data:Re,linkColumns:Se,linkColumnsRoutes:ke,dynamicColumns:vt,headerData:ye,setHeaderData:Ne,exportData:m,rows:10,fileName:"RollOffs"})}):""]})};var xe=function(){var e=(0,l.useState)("Bench Report"),t=(0,s.Z)(e,2),n=t[0],a=t[1],i=f.N.baseUrl,r=localStorage.getItem("resId"),o=(0,l.useState)([]),c=(0,s.Z)(o,2),d=c[0],u=c[1];return(0,l.useEffect)((function(){p().get(i+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(r,"&Cont=bench")).then((function(e){var t=e.data;u(t),console.log(t,"getData"),console.log(t)}))}),[]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{children:[(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"tabs",children:d.map((function(e){return(0,y.jsx)("button",{className:n===e.display_name.toString()?"buttonDisplayClick":"buttonDisplay",onClick:function(){a(e.display_name.toString()),console.log(e.display_name)},children:e.display_name},e.id)}))})}),"Bench Report"===n&&(0,y.jsx)(J,{}),"Resource Overview"===n&&(0,y.jsx)(ue,{permission:d}),"Resource Trending"===n&&(0,y.jsx)(pe,{}),"Roll Offs"===n&&(0,y.jsx)(ge,{})]})})}},20040:function(e,t,n){n(72791);var s=n(15473),l=n(20890),a=n(80184);t.Z=function(e){var t=e.anchorEl,n=e.handleClose,i=(e.name,e.popoverContent,e.message,e.handleInfoClick,e.infoMessage);console.log(i);var r=Boolean(t)?"my-popover":void 0;return(0,a.jsx)("div",{children:(0,a.jsx)(s.ZP,{className:"ResourceOverviewPopover",disablePortal:!0,arrow:!0,open:Boolean(t),id:r,anchorEl:t,onClose:n,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,a.jsx)(l.Z,{sx:{p:1},children:i})})})}},50541:function(e,t,n){n.d(t,{Z:function(){return u}});var s=n(1413),l=n(45987),a=n(29439),i=n(72791),r=n(20040),o=n(56355),c=n(80184),d=["kpi_id"];function u(e){var t,n=e.tableData,u=e.column,m=(0,i.useState)(""),p=(0,a.Z)(m,2),f=p[0],h=p[1],v=(0,i.useState)(null),g=(0,a.Z)(v,2),x=g[0],j=g[1],y=(0,i.useState)(null),N=(0,a.Z)(y,2),b=(N[0],N[1]),D=null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.map((function(e){var t=e.kpi_id,n=(0,l.Z)(e,d);return-1!==t&&"#"!==t?(0,s.Z)({},n):e}));return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"darkHeaders",children:[(0,c.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:" HC Overview "}),(0,c.jsx)("table",{style:{width:"25%"},className:"table table-bordered table-striped col-6 htmlTable RTHeading",children:(0,c.jsx)("tbody",{children:u.length>0&&(null===D||void 0===D?void 0:D.map((function(e,t){var n=[];return u.forEach((function(s,l){var a,i,r=e[s],d=null;if(-1!=r&&-1==e.kpi_id&&null!==r&&void 0!==r&&r.includes("^&")?d=e[s].split("^&"):"#"==r||0===e.kpi_id&&0===r?e[s]="":d=e[t],-1===e.kpi_id)n.push((null===(a=d)||void 0===a?void 0:a.length)>0?(0,c.jsxs)("th",{className:"monthClassName",style:{verticalAlign:"middle",textAlign:"center",minWidth:1!=l&&"90px"},colspan:1===l?1:2,rowspan:"Resource Category^&0^&2"===r?"2":"",children:[" ",(null===(i=d)||void 0===i?void 0:i.length)>0?d[0]:d]}):null);else if(""===e.kpi&&""!==e[s])n.push((0,c.jsx)("th",{className:"FteCntClsName",title:e[s],children:e[s]}));else if(e[s]){var u=t>1&&l>1&&(Math.floor(l/2)%2===0?l%2===0?"#F3D6D6 ":"#F3D6D6":"#BFF5F5");n.push((0,c.jsxs)("td",{style:{backgroundColor:u,textAlign:t>1&&l>1?"right":"left"},children:[(0,c.jsx)("span",{dangerouslySetInnerHTML:{__html:"NaN"==parseInt(e[s]).toLocaleString("en-US")?e[s]:parseInt(e[s]).toLocaleString("en-US")}}),(e.kpi.includes("Total Resources")||e.kpi.includes("Total Overhead")||e.kpi.includes("Total Billable Resources")||e.kpi.includes("Enablement")||e.kpi.includes("Serving Notice Period")||e.kpi.includes("Deployable Bench - Actual")||e.kpi.includes("Deployable Bench (Resource Type)"))&&1===l&&(0,c.jsx)(o.DAO,{className:"tableInfoIcon",onClick:function(t){!function(e){console.log(e);var t=e.replace(/<\/?span.*?>/gi,"");console.log(t);var n="";n=t.includes("Total Resources")?"=Sum(Employee+Contractors)":t.includes("Total Overhead")?"=Sum(Org Overhead+Delivery Overhead)":t.includes("Total Billable Resources ")?"=Total resources-(Total Overhead+Gardening leave)":t.includes("Enablement")?"*Head Count  is combination of Billable & Non Billable Resources":t.includes("Serving Notice Period")?"=Billable+NBL on projects+Bench (Zero Allocation)+Gardening Leave+Org Overhead+Delivery Overhead":t.includes("Deployable Bench - Actual")||t.includes("Deployable Bench (Resource Type)")?"= NBL on projects+Bench (Zero Allocation)+Innovation+Partial Bench":"No information available for this KPI.",h(n)}(e.kpi),b(e.kpi),j(t.currentTarget)}})]}))}})),(0,c.jsx)("tr",{children:n},t)})))})})]}),x&&(0,c.jsx)(r.Z,{handleClose:function(){j(!1)},anchorEl:x,infoMessage:f})]})}}}]);
//# sourceMappingURL=8955.e1b68c3d.chunk.js.map