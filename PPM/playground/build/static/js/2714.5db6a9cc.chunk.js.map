{"version":3,"file":"static/js/2714.5db6a9cc.chunk.js","mappings":"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","sources":["views/TimeAndExpenses/LockTimesheets.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  FaChevronCircleDown,\n  FaChevronCircleUp,\n  FaSearch,\n  FaCheck,\n  FaEdit,\n  FaSave,\n} from \"react-icons/fa\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { CCollapse } from \"@coreui/react\";\nimport axios from \"axios\";\nimport Loader from \"../Loader/Loader\";\nimport { environment } from \"../../environments/environment\";\nimport { BiSave } from \"react-icons/bi\";\nimport GlobalValidation from \"../ValidationComponent/GlobalValidation\";\nimport { AiFillWarning } from \"react-icons/ai\";\nimport { useRef } from \"react\";\nimport { DataTable } from \"primereact/datatable\";\nimport { Column } from \"primereact/column\";\nimport ScreenBreadcrumbs from \"../Common/ScreenBreadcrumbs\";\n\nfunction LockTimesheets() {\n  const baseUrl = environment.baseUrl;\n  const [visible, setVisible] = useState(false);\n  const [cheveronIcon, setCheveronIcon] = useState(FaChevronCircleUp);\n  const [tableValue, setTableValue] = useState([]);\n  const [searching, setSearching] = useState(false);\n  const [loader, setLoader] = useState(false);\n  const [year, setYear] = useState([]);\n  const [dataId, setDataId] = useState([]);\n  const [saveTab, SetSaveTab] = useState([]);\n  const [selectedVal, setSelectedVal] = useState([]);\n  const getYear = [\n    { id: 2017, value: \"2017\" },\n    { id: 2018, value: \"2018\" },\n  ];\n\n  const loggedUserId = localStorage.getItem(\"resId\");\n\n  const [routes, setRoutes] = useState([]);\n  let textContent = \"Time & Expenses\";\n  let currentScreenName = [\"Lock Timesheet\"];\n\n  const [validationmessage, setValidationMessage] = useState(false);\n  const ref = useRef([]);\n\n  const [successfulmessage, setSuccessfulmessage] = useState(false);\n\n  const [records, setRecords] = useState([]);\n  const [dataAccess, setDataAccess] = useState([]);\n  console.log(dataAccess);\n\n  const handleFilter = (e) => {\n    console.log(\"***************************\", e.target.value);\n    const newRecord = records.filter((item) => {\n      return item.Month.toLowerCase().includes(e.target.value.toLowerCase());\n    });\n    setTableValue(newRecord);\n  };\n\n  const getLockSheet = () => {\n    let valid = GlobalValidation(ref);\n\n    if (valid) {\n      setValidationMessage(true);\n      return;\n    }\n    !valid && setVisible(!visible);\n    visible\n      ? setCheveronIcon(FaChevronCircleUp)\n      : setCheveronIcon(FaChevronCircleDown);\n\n    axios\n      .get(baseUrl + `/timeandexpensesms/getLockTimesheet?yearValue=${year}`)\n      .then((res) => {\n        setTableValue(res.data);\n        console.log(res.data);\n        setRecords(res.data);\n        setSelectedVal(() =>\n          res?.data\n            ?.filter((value) => value.Locked === 1)\n            .map((value) => value.Month)\n        );\n      });\n\n    setValidationMessage(false);\n    setTimeout(() => {}, 3000);\n    setSearching(true);\n  };\n\n  const getSaveLock = () => {\n    axios\n      .post(\n        baseUrl +\n          `/timeandexpensesms/saveLockTimesheets?yearValue=${year}&lockedMonths=${selectedVal}&userId=${loggedUserId}`\n      )\n      .then((res) => {\n        SetSaveTab(res.data);\n      });\n    setSuccessfulmessage(true);\n\n    setTimeout(() => {\n      setSuccessfulmessage(false);\n    }, 3000);\n  };\n\n  const representMonth = (rowData) => {\n    return (\n      <React.Fragment>\n        <span className=\"vertical-align-middle ml-2\">{rowData.Month}</span>\n      </React.Fragment>\n    );\n  };\n\n  const getMenus = () => {\n    axios({\n      method: \"GET\",\n      url: baseUrl + `/CommonMS/master/getMenus?loggedUserId=${loggedUserId}`,\n    }).then((resp) => {\n      let data = resp.data;\n\n      data.forEach((item) => {\n        if (item.display_name === textContent) {\n          setRoutes([item]);\n        }\n      });\n      const TMExpensesSubMenu = data\n        .find((item) => item.display_name === \"Time & Expenses\")\n        .subMenus.find((subMenu) => subMenu.display_name === \"Lock Timesheets\");\n\n      const accessLevel = TMExpensesSubMenu\n        ? TMExpensesSubMenu.access_level\n        : null;\n      console.log(\"Access Level:\", accessLevel);\n\n      setDataAccess(accessLevel);\n    });\n  };\n\n  useEffect(() => {\n    getMenus();\n  }, []);\n\n  const representLocked = (rowData) => {\n    return (\n      <React.Fragment>\n        <span className=\"vertical-align-middle ml-2\">\n          <input\n            type=\"checkbox\"\n            id={rowData.Month}\n            onChange={(e) => {\n              console.log(e);\n              console.log(\"%%%%%%%%%%%%%%\", e.target.id === true ? 1 : 0);\n              console.log(rowData);\n              monthArray(e.target.id);\n              setSelectedVal((ps) => {\n                return ps.find((value) => value === e.target.id)\n                  ? ps.filter((value) => value !== e.target.id)\n                  : [...ps, e.target.id];\n              });\n            }}\n            defaultChecked={rowData.Locked ? true : false}\n            disabled={dataAccess === 500 || dataAccess === 250}\n          ></input>\n        </span>\n      </React.Fragment>\n    );\n  };\n\n  const monthArray = (e) => {\n    console.log(e);\n    const arr = [e];\n    console.log(arr);\n    let dt = dataId;\n\n    arr.map((node) => {\n      console.log(node);\n      dt.push(node);\n    });\n    setDataId(dt);\n  };\n\n  useEffect(() => {\n    console.log(selectedVal);\n  }, [selectedVal]);\n  return (\n    <div>\n      {validationmessage ? (\n        <div className=\"statusMsg error\">\n          {\" \"}\n          &nbsp;\n          <span className=\"error-block\">\n            <AiFillWarning /> &nbsp; Please Select the valid values for\n            highlighted fields\n          </span>\n        </div>\n      ) : (\n        \"\"\n      )}\n      <>\n        {successfulmessage ? (\n          <div className=\"statusMsg success\">Data Saved Succesfully!!</div>\n        ) : (\n          \"\"\n        )}\n      </>\n\n      <div className=\"col-md-12\">\n        <div className=\"pageTitle\">\n          <div className=\"childOne\"></div>\n          <div className=\"childTwo\">\n            <h2>Lock Timesheet</h2>\n          </div>\n          <div className=\"childThree\"></div>\n        </div>\n      </div>\n      <ScreenBreadcrumbs\n        routes={routes}\n        currentScreenName={currentScreenName}\n      />\n\n      <div className=\"group mb-3 customCard\">\n        <div className=\"col-md-12 collapseHeader\">\n          <h2>Search Filters</h2>\n          <div\n            onClick={() => {\n              setVisible(!visible);\n              visible\n                ? setCheveronIcon(FaChevronCircleUp)\n                : setCheveronIcon(FaChevronCircleDown);\n            }}\n          >\n            <span>{cheveronIcon}</span>\n          </div>\n        </div>\n        <CCollapse visible={!visible}>\n          <div className=\"group-content row \">\n            <div className=\"col-md-4 mb-2\">\n              <div className=\"form-group row\">\n                <label className=\"col-5\" htmlFor=\"email-input\">\n                  Year<span style={{ color: \"red\" }}>*</span>\n                </label>\n                <span className=\"col-1 p-0\">:</span>\n                <div className=\"col-6\">\n                  <select\n                    ref={(ele) => {\n                      ref.current[0] = ele;\n                    }}\n                    className=\"error enteredDetails cancel text\"\n                    id=\"year-select\"\n                    name=\"year\"\n                    onChange={(e) => {\n                      setYear(e.target.value);\n                      setTableValue(null);\n                    }}\n                  >\n                    <option value=\"\">&lt;&lt;Please Select&gt;&gt;</option>\n                    {getYear.map((e) => {\n                      return <option value={e.id}>{e.value}</option>;\n                    })}\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"align center mt-3\">\n              <button\n                type=\"button\"\n                className=\"btn btn-primary\"\n                title=\"Search\"\n                onClick={getLockSheet}\n              >\n                <FaSearch /> Search{\" \"}\n              </button>\n            </div>\n          </div>\n        </CCollapse>\n        {loader ? <Loader /> : \"\"}\n      </div>\n      {tableValue?.length > 0 ? (\n        <>\n          <div\n            id=\"myDatatable_filter\"\n            class=\"dataTables_filter\"\n            style={{ height: \"25px\", width: \"165px\", float: \"right\" }}\n          >\n            <label>\n              Search:&nbsp;\n              <input\n                type=\"search\"\n                className=\"col-7\"\n                placeholder\n                aria-controls=\"myDatatable\"\n                onChange={(e) => handleFilter(e)}\n              />\n            </label>\n          </div>\n          <div className=\"darkHeader\">\n            <div className=\"col-md-12 mt-4\">\n              <DataTable\n                className=\"lockDataTable \"\n                value={tableValue}\n                showGridlines\n                highlightOnHover\n              >\n                <Column\n                  field=\"Month\"\n                  header=\"Month\"\n                  body={representMonth}\n                ></Column>\n\n                <Column\n                  field=\"Locked\"\n                  header=\"Locked\"\n                  body={representLocked}\n                ></Column>\n              </DataTable>\n            </div>\n          </div>\n          <div className=\"align center mt-3\">\n            {dataAccess === 1000 && (\n              <button\n                className=\"btn btn-primary\"\n                type=\"submit\"\n                onClick={getSaveLock}\n              >\n                <FaSave /> Save\n              </button>\n            )}\n          </div>\n        </>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n\nexport default LockTimesheets;\n"],"names":["baseUrl","environment","useState","visible","setVisible","FaChevronCircleUp","cheveronIcon","setCheveronIcon","tableValue","setTableValue","setSearching","loader","year","setYear","dataId","setDataId","SetSaveTab","selectedVal","setSelectedVal","loggedUserId","localStorage","getItem","routes","setRoutes","validationmessage","setValidationMessage","ref","useRef","successfulmessage","setSuccessfulmessage","records","setRecords","dataAccess","setDataAccess","console","log","useEffect","axios","method","url","then","resp","data","forEach","item","display_name","TMExpensesSubMenu","find","subMenus","subMenu","accessLevel","access_level","monthArray","e","arr","dt","map","node","push","className","currentScreenName","onClick","FaChevronCircleDown","htmlFor","style","color","ele","current","id","name","onChange","target","value","type","title","valid","GlobalValidation","res","filter","Locked","Month","setTimeout","length","class","height","width","float","placeholder","newRecord","toLowerCase","includes","handleFilter","showGridlines","highlightOnHover","field","header","body","rowData","ps","defaultChecked","disabled"],"sourceRoot":""}