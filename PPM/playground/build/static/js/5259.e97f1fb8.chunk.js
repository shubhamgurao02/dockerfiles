"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5259,4205],{35259:function(e,s,t){t.r(s),t.d(s,{default:function(){return ne}});var a=t(29439),n=t(72791),l=t(4942),o=t(1413),i=t(24205),r=t(74569),c=t.n(r),d=t(34831),u=t(72572),m=t(47477),h=t(78983),p=t(56355),f=t(16856),g=t(72426),j=t.n(g),x=t(7692),v=t(78820),N=t(93433),S=t(1063),y=t(40091),b=t(70828),Z=t(80184);var _=function(e){var s,t=e.buttonPopup,l=e.setButtonPopup,o=e.formData,i=(e.setFormData,e.checkValidation),r=e.defaultRole,p=(e.setCheckValidation,e.openState),f=e.setOpenState,g=e.handleRoles,j=e.setSuccessfullymsg,x=(e.successfullymsg,(0,n.useState)([])),v=(0,a.Z)(x,2),y=v[0],_=v[1],C=(0,n.useState)([]),D=(0,a.Z)(C,2),R=D[0],M=D[1];console.log(R);var k=(0,n.useState)([]),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=(0,n.useState)(!1),A=(0,a.Z)(E,2),I=(A[0],A[1],(0,n.useState)([])),U=(0,a.Z)(I,2),F=U[0],B=U[1],L=(0,n.useState)([]),O=(0,a.Z)(L,2),H=O[0];O[1],console.log(r);var G=(0,n.useState)(!0),Y=(0,a.Z)(G,2),J=Y[0],z=Y[1],V=(0,n.useState)([]),q=(0,a.Z)(V,2),K=q[0],X=q[1];console.log(H);var Q=(0,n.useState)([]),W=(0,a.Z)(Q,2),$=W[0],ee=W[1],se=(0,n.useState)([]),te=(0,a.Z)(se,2),ae=te[0],ne=te[1],le=(0,n.useState)([]),oe=(0,a.Z)(le,2),ie=oe[0],re=oe[1],ce=(0,n.useState)([]),de=(0,a.Z)(ce,2),ue=(de[0],de[1],(0,n.useState)([])),me=(0,a.Z)(ue,2),he=me[0],pe=(me[1],d.N.baseUrl);console.log(y,r,ae),console.log(ae),console.log(y,r),(0,n.useEffect)((function(){c()({method:"post",url:pe+"/administrationms/updatetask/roles",data:{res_id:o.assigned_to}}).then((function(e){var s=e.data;console.log(s);var t=s.filter((function(e){return"Finance Admin"===e.display_name||"Acc Executive"===e.display_name||"Project Coordinator"===e.display_name||"Executive Management"===e.display_name||"RMG Full Access"===e.display_name||"Finance"===e.display_name||"Project Manager"===e.display_name||"CSL"===e.display_name||"DP,CL,CSL Access"===e.display_name&&"DP"||"PPM Admin access"===e.display_name||"Software Engineer"===e.display_name}));console.log(t[0].display_name),_(t[0].display_name);for(var a=t.map((function(e){return"DP,CL,CSL Access"===e.display_name?e.display_name="DP":"RMG Full Access"===e.display_name?e.display_name="RMG":"PPM Admin access"===e.display_name?e.display_name="Admin":"Acc Executive"===e.display_name&&(e.display_name="Account Executive"),e})),n=0;n<a.length;n++)a[n].SNO=n+1;var l=[].concat([{SNO:"S.No",display_name:"Profiles"}],(0,N.Z)(a));console.log(s),console.log(l),console.log(a),T(l)}))}),[o.assigned_to]),console.log(R),(0,n.useEffect)((function(){}),[R]),(0,n.useEffect)((function(){console.log(R),c()({method:"post",url:pe+"/administrationms/updatetask/menusandsubmenus",data:{res_id:o.assigned_to}}).then((function(e){console.log(e);var s=e.data;console.log(s);var t=[{mainmenu:"Menus",submenu:"Sub Menus"}];console.log(t.concat(s)),X(t.concat(s)),console.log(e.data)}))}),[]),console.log(he),(0,n.useEffect)((function(){}),[]);var fe=function(e){return(0,Z.jsx)("div",{style:{color:"#15a7ea",textDecoration:"underLine",cursor:"pointer",textAlign:"left"},onClick:function(){var s;console.log(e.id),s=e.id,console.log(R),c()({method:"post",url:pe+"/administrationms/updatetask/getmenuroles",data:{roleId:s}}).then((function(e){console.log(e);for(var s=e.data,t=0;t<s.length;t++)console.log(s[t].mainmenu),s[t].mainmenu=null==s[t].mainmenu?"Reports":s[t].mainmenu,s[t].submenu="Reports"==s[t].submenu?"":s[t].submenu;B([{mainmenu:"Menus",submenu:"Sub Menus"}].concat(s)),X(s[0]),console.log(e.data)})),ne(e.display_name),re(e.id),f(!1),z(!1)},children:e.display_name})},ge=function(e){return(0,Z.jsx)("div",{style:{textAlign:"center"},children:e.SNO})},je=null===(s=Object.keys($))||void 0===s?void 0:s.map((function(e,s){return(0,Z.jsx)(S.s,{sortable:!0,body:"display_name"==e?fe:"SNO"==e&&ge,field:e,header:$[e]},e)}));return console.log(r,ae),(0,Z.jsx)("div",{className:"col-md-12 ",children:(0,Z.jsxs)(h.Tk,{size:"lg",visible:t,onClose:function(){return l(!1)},children:[(0,Z.jsx)(h.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,Z.jsx)(h.fl,{children:(0,Z.jsx)("span",{className:"ft16",children:"List Of Profiles"})})}),(0,Z.jsxs)(h.sD,{children:[1==K.length?(0,Z.jsxs)("div",{className:"col-md-6 mt-4",children:[p&&(0,Z.jsx)("div",{className:" col-md-12",children:(0,Z.jsxs)("b",{className:"changing1",style:{color:"#317fb3",fontSize:"14px"},children:["Menus and Sub Menus for ",y]})}),(0,Z.jsx)(m.Z,{data:w,rows:10,dynamicColumns:je,headerData:$,setHeaderData:ee})]}):(0,Z.jsxs)("div",{className:"profilesListPopUp",children:[(0,Z.jsxs)("div",{className:"col-md-6",children:[(0,Z.jsx)("div",{className:" col-md-12",children:(0,Z.jsx)("b",{className:"changing1",style:{color:"#317fb3",fontSize:"14px"},children:"Roles to Assign"})}),(0,Z.jsx)(m.Z,{data:w,rows:10,dynamicColumns:je,headerData:$,setHeaderData:ee})]}),J&&(0,Z.jsxs)("div",{className:"col-md-6",children:[(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("b",{className:"changing2",style:{color:"#317fb3",fontSize:"14px"},children:["Menus and Sub Menus for ",r]})}),(0,Z.jsx)("div",{className:"default",style:{height:"400px",overflowY:"auto"},children:(0,Z.jsx)(u.Z,{data:K,rows:100,rowGroupMode:"rowspan",groupRowsBy:"mainmenu"})})]}),1==F.length?"":(0,Z.jsx)("div",{className:"col-md-6",children:(0,Z.jsxs)("div",{children:[0==J?(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("b",{className:"changing3",style:{color:"#317fb3",fontSize:"14px"},children:["Menus and Sub Menus for ",ae]})}):"",(0,Z.jsx)("div",{style:{width:"calc(100% - 13px)",height:"400px",overflowY:"auto"},children:(0,Z.jsx)(u.Z,{data:F,rows:100,rowGroupMode:"rowspan",groupRowsBy:"mainmenu",setCheckedData:M})})]})})]}),(0,Z.jsxs)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:[(0,Z.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(e){console.log("in line 331"),console.log(i),c()({method:"post",url:pe+"/administrationms/updatetask/assignnewroles?resId=".concat(o.assigned_to,"&roleId=").concat(ie)}).then((function(e){g(),j(!0),setTimeout((function(){j(!1)}),3e3)})),l(!1)},children:"Confirm"}),(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){l(!1)},children:[(0,Z.jsx)(b.sQZ,{}),"\xa0 Cancel"]})]})]})]})})},C=t(72920),D=t(38262);var R=function(){var e,s=d.N.baseUrl,t=(0,n.useState)([]),r=(0,a.Z)(t,2),g=r[0],j=r[1],N=(0,n.useState)({assigned_to:null,resRolesID:""}),y=(0,a.Z)(N,2),b=y[0],R=y[1],M=(0,n.useState)([]),k=(0,a.Z)(M,2),P=k[0],w=k[1],T=(0,n.useState)([]),E=(0,a.Z)(T,2),A=E[0],I=E[1],U=(0,n.useState)([]),F=(0,a.Z)(U,2),B=F[0],L=F[1],O=(0,n.useState)([]),H=(0,a.Z)(O,2),G=(H[0],H[1],(0,n.useState)(!1)),Y=(0,a.Z)(G,2),J=Y[0],z=Y[1],V=(0,n.useState)(!1),q=(0,a.Z)(V,2),K=(q[0],q[1],(0,n.useState)(p.UdN)),X=(0,a.Z)(K,2),Q=X[0],W=X[1],$=(0,n.useState)(!1),ee=(0,a.Z)($,2),se=ee[0],te=ee[1],ae=(0,n.useState)(!1),ne=(0,a.Z)(ae,2),le=ne[0],oe=ne[1],ie=(0,n.useState)([]),re=(0,a.Z)(ie,2),ce=re[0],de=re[1],ue=(0,n.useState)([]),me=(0,a.Z)(ue,2),he=(me[0],me[1]),pe=(0,n.useState)(!1),fe=(0,a.Z)(pe,2),ge=fe[0],je=fe[1],xe=(0,n.useState)(!1),ve=(0,a.Z)(xe,2),Ne=ve[0],Se=ve[1],ye=(0,n.useState)(!1),be=(0,a.Z)(ye,2),Ze=be[0],_e=be[1],Ce=(0,n.useState)([]),De=(0,a.Z)(Ce,2),Re=De[0],Me=De[1],ke=(0,n.useState)(!0),Pe=(0,a.Z)(ke,2),we=Pe[0],Te=Pe[1],Ee=(0,n.useState)(!1),Ae=(0,a.Z)(Ee,2),Ie=Ae[0],Ue=Ae[1],Fe=(0,n.useState)([]),Be=(0,a.Z)(Fe,2),Le=Be[0],Oe=Be[1],He=(0,n.useState)([]),Ge=(0,a.Z)(He,2),Ye=Ge[0],Je=Ge[1],ze=localStorage.getItem("resId"),Ve=(0,n.useState)([]),qe=(0,a.Z)(Ve,2),Ke=qe[0],Xe=qe[1];console.log(P),(0,n.useEffect)((function(){es()}),[]),(0,n.useEffect)((function(){c()({method:"get",url:s+"/ProjectMS/risks/getAssignedData"}).then((function(e){var s=e.data;j(s)}))}),[]),console.log(Le);var Qe=(0,n.useState)([]),We=(0,a.Z)(Qe,2),$e=(We[0],We[1],function(e){c()({method:"post",url:s+"/administrationms/updatetask/listofroles",data:{res_id:b.assigned_to}}).then((function(e){var s,t=e.data;console.log(t);for(var a=t.filter((function(e){return"Finance Admin"===e.display_name||"Acc Executive"===e.display_name||"Project Coordinator"===e.display_name||"Executive Management"===e.display_name||"RMG Full Access"===e.display_name||"Finance"===e.display_name||" Project Manager"===e.display_name||"CSL"===e.display_name||"DP,CL,CSL Access"===e.display_name||"PPM Admin access"===e.display_name||"Software Engineer"===e.display_name||"Project Manager"===e.display_name})).map((function(e){return"DP,CL,CSL Access"===e.display_name?e.display_name="DP":"RMG Full Access"===e.display_name?e.display_name="RMG":"PPM Admin access"===e.display_name?e.display_name="Admin":"Acc Executive"===e.display_name&&(e.display_name="Account Executive"),e})),n=0;n<a.length;n++)a[n].SNO=n+1;console.log(a);I([{SNO:"S.No",display_name:"Profiles",Action:"Action"}].concat(a)),Je(null===(s=a[0])||void 0===s?void 0:s.display_name),console.log(e.data),te(!1)}))});console.log(A),(0,n.useEffect)((function(){$e(),console.log("in line 98---"),console.log(b.assigned_to),console.log(b),null!=b.assigned_to&&Se(!0)}),[b.assigned_to]),console.log(b.assigned_to);var es=function(){c()({method:"GET",url:s+"/CommonMS/master/getMenus?loggedUserId=".concat(ze)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&Xe([e])}))}))};(0,n.useEffect)((function(){c()({method:"post",url:s+"/administrationms/updatetask/menusandsubmenus",data:{res_id:b.assigned_to}}).then((function(e){for(var s=e.data,t=0;t<s.length;t++)console.log(s[t].mainmenu),s[t].mainmenu=null==s[t].mainmenu?"Reports":s[t].mainmenu,s[t].mainmenu=(s[t].mainmenu,s[t].mainmenu,s[t].mainmenu);w([{mainmenu:"Menus",submenu:"Sub Menus"}].concat(s)),console.log(s)}))}),[b.assigned_to]),console.log(Re),console.log(g,"123456");var ss=function(e){return console.log(e),(0,Z.jsx)("div",{style:{color:"#15a7ea",textDecoration:"underLine",cursor:"pointer"},onClick:function(){var t;console.log(e),t=e.id,c()({method:"post",url:s+"/administrationms/updatetask/getmenuroles",data:{roleId:t}}).then((function(e){var s=e.data;w([{mainmenu:"Menus",submenu:"Sub Menus"}].concat(s)),Ue(!0)})),Me(e.display_name),Te(!1),console.log("bandhai---")},children:e.display_name})},ts=function(e){return console.log(e),(0,Z.jsx)("div",{style:{color:"orange",textAlign:"center",tittle:"delete"},children:"Software Engineer"==e.display_name?(0,Z.jsx)("div",{style:{cursor:"not-allowed"},children:(0,Z.jsx)(v.YK6,{})}):(0,Z.jsx)(v.YK6,{onClick:function(){var t;t=e.id,console.log(),c()({method:"delete",url:s+"/customersms/Customers/deleteRoleId?userId=".concat(Number(b.assigned_to)-1,"&roleId=").concat(t)}).then((function(e){console.log("success",e),e.data,_e(!0),Ue(!1),Te(!0),setTimeout((function(){_e(!1)}),3e3),$e()})),console.log(e.id)}})})},as=function(e){return(0,Z.jsx)("div",{style:{textAlign:"center"},children:e.SNO})},ns=(0,n.useState)([]),ls=(0,a.Z)(ns,2),os=(ls[0],ls[1],null===(e=Object.keys(B))||void 0===e?void 0:e.map((function(e,s){return(0,Z.jsx)(S.s,{sortable:!0,body:"display_name"==e?ss:"Action"==e?ts:"SNO"==e&&as,field:e,header:B[e]},e)})));return console.log(P),(0,Z.jsxs)("div",{children:[le?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{}),"\xa0 Role(s) Saved Successfully"]})}):"",Ze?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{}),"\xa0 Role(s) Deleted Successfully"]})}):"",(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Add User Role"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:Ke,currentScreenName:["Hammer Tool","Add User Role"]}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"Search Filters"}),(0,Z.jsx)("div",{className:"helpBtn",children:(0,Z.jsx)(C.Z,{pdfname:"AdduserrolesHammerAdministration.pdf",name:"Add User Role Help"})}),(0,Z.jsx)("div",{onClick:function(){z(!J),W(J?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:Q})})]}),(0,Z.jsx)(h.V9,{visible:!J,children:(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsx)("label",{className:"col-3",htmlFor:"Resources",children:"Resources *"}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"autoComplete-container",children:(0,Z.jsx)(i.Z,{id:"assigned_to",name:"assigned_to",riskDetails:g,setFormData:R,setUsername:Oe,onChange:function(){Ue(!1),function(e){var s=e.target,t=s.id;s.value,console.log("on Change Handler"),R((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,t))})),console.log("fck"),console.log(b),he(b),Ue(!1)}()}})})})]})})})]})]}),Ne?(0,Z.jsx)("div",{children:(0,Z.jsxs)("div",{className:"row",children:[(0,Z.jsxs)("div",{className:"col-md-6",children:[(0,Z.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{minHeight:"28px"},children:[(0,Z.jsxs)("b",{style:{color:"#317fb3",fontSize:"14px"},children:["List of Profiles for ",Le]}),(0,Z.jsxs)("button",{className:"btn btn-primary",onClick:function(){te(!0),je(!0)},children:[(0,Z.jsx)(f.fSq,{})," Assign New Profile"]})]}),(0,Z.jsx)("div",{className:"UserProfileTable",children:(0,Z.jsx)(m.Z,{data:A,rows:10,dynamicColumns:os,headerData:B,setHeaderData:L})})]}),Ie&&(0,Z.jsxs)("div",{className:"col-md-6",children:[(0,Z.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{minHeight:"28px"},children:(0,Z.jsxs)("b",{style:{color:"#317fb3",fontSize:"14px"},children:["Menus and Sub Menus for ",Re]})}),(0,Z.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:P.length>0?(0,Z.jsx)(u.Z,{data:P,rows:100,rowGroupMode:"rowspan",groupRowsBy:"mainmenu"}):""})]}),we&&(0,Z.jsxs)("div",{className:"col-md-6",children:[1==P.length?"":(0,Z.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",style:{minHeight:"28px"},children:(0,Z.jsxs)("b",{style:{color:"#317fb3",fontSize:"14px"},children:["Menus and Sub Menus for ",Ye]})}),1==P.length?"":(0,Z.jsx)("div",{style:{height:"400px",overflowY:"auto"},children:(0,Z.jsx)(u.Z,{data:P,rows:100,rowGroupMode:"rowspan",groupRowsBy:"mainmenu"})})]})]})}):"",se?(0,Z.jsx)(_,{buttonPopup:se,setButtonPopup:te,defaultRole:Ye,successfullymsg:le,setSuccessfullymsg:oe,formData:b,setFormData:R,checkValidation:ce,setCheckValidation:de,handleRoles:$e,setOpenState:je,openState:ge}):" "]})},M=t(32125),k=t(59962),P=t.n(k),w=t(73220);var T=function(){var e=d.N.baseUrl,s=(0,n.useState)({assigned_to:"",Projects:"",Roles:"",Allocations:"",CurrentBillingRate:"",BillingRate:"",fromDT:"",todate:"",Resname:""}),t=(0,a.Z)(s,2),r=t[0],u=t[1],m=(0,n.useState)([]),f=(0,a.Z)(m,2),g=f[0],N=f[1],S=(0,n.useState)([]),y=(0,a.Z)(S,2),_=y[0],C=y[1],R=(0,n.useState)([{}]),k=(0,a.Z)(R,2),T=k[0],E=k[1],A=(0,n.useState)({}),I=(0,a.Z)(A,2),U=I[0],F=I[1],B=(0,n.useState)({}),L=(0,a.Z)(B,2),O=L[0],H=L[1],G=(0,n.useState)([]),Y=(0,a.Z)(G,2),J=Y[0],z=Y[1],V=(0,n.useState)(!1),q=(0,a.Z)(V,2),K=q[0],X=q[1],Q=(0,n.useState)(!1),W=(0,a.Z)(Q,2),$=W[0],ee=W[1],se=(0,n.useState)(!1),te=(0,a.Z)(se,2),ae=te[0],ne=te[1],le=(0,n.useState)(!1),oe=(0,a.Z)(le,2),ie=oe[0],re=oe[1],ce=(0,n.useState)(p.UdN),de=(0,a.Z)(ce,2),ue=de[0],me=de[1],he=(0,n.useState)(!1),pe=(0,a.Z)(he,2),fe=pe[0],ge=pe[1],je=(0,n.useRef)([]),xe=localStorage.getItem("resId"),ve=(0,n.useState)([]),Ne=(0,a.Z)(ve,2),Se=Ne[0],ye=Ne[1],be=(0,n.useRef)([]),Ze=(0,n.useRef)([]),_e=function(e){var s=e.target.value,t=e.target,a=(t.id,t.value);/^[0-9.]*$/.test(s)||(e.target.value=""),u((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,a))}))},Ce=function(){c()({method:"get",url:e+"/ProjectMS/risks/getAssignedData"}).then((function(e){var s=e.data;z(s)}))},De=r.Allocations.split("--"),Re=j()(De[0]).format("yyyy-MM-DD"),Me=j()(De[1]).format("yyyy-MM-DD");(0,n.useEffect)((function(){Ce(),Pe()}),[]),(0,n.useEffect)((function(){c()({method:"post",url:e+"/administrationms/UpdateBillingRate/getProjectdata?ResId=".concat(r.assigned_to)}).then((function(e){var s=e.data;N(s)}))}),[r.assigned_to]),(0,n.useEffect)((function(){c()({method:"post",url:e+"/administrationms/UpdateBillingRate/getRolesdata?ResId=".concat(r.assigned_to,"&ProjectId=").concat(r.Projects)}).then((function(e){var s=e.data;C(s)}))}),[r.Projects]),(0,n.useEffect)((function(){c()({method:"post",url:e+"/administrationms/UpdateBillingRate/getAllocationsdata?prjId=".concat(r.Projects,"&roleId=").concat(r.Roles,"&resId=").concat(r.assigned_to)}).then((function(e){var s=e.data;E(s)})).catch((function(e){}))}),[r.Roles]),(0,n.useEffect)((function(){c()({method:"post",url:e+"/administrationms/UpdateBillingRate/getCurrentBillingRate?resId=".concat(r.assigned_to,"&prjId=").concat(r.Projects,"&roleId=").concat(r.Roles,"&fromDT=").concat(Re,"&toDt=").concat(Me)}).then((function(e){var s=e.data[0];if(F(s),void 0==(null===s||void 0===s?void 0:s.hourly_rate)||null==(null===s||void 0===s?void 0:s.hourly_rate))return re(!0),void setTimeout((function(){re(!1)}),3e3);re(!1)}))}),[r.Allocations]);var ke=function(e){var s=document.getElementsByClassName("cancel"),t=(0,w.Z)(Ze),a=(0,w.Z)(je);(t||a)&&((0,w.Z)(je),ne(!1)),F("");for(var n=0;n<s.length;n++)s[n].value="",s[n].classList.contains("autocomplete")&&s[n].children[0].children[0].children[0].children[0].children[1].click()},Pe=function(){c()({method:"GET",url:e+"/CommonMS/master/getMenus?loggedUserId=".concat(xe)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&ye([e])}))}))};function we(e){var s=e.postBillingRate,t=e.buttonPopup,a=e.setButtonPopup,n=e.currentBillingRate;e.BillingRate,e.setBillingRate;return(0,Z.jsx)("div",{children:(0,Z.jsx)(P(),{children:(0,Z.jsxs)(h.Tk,{size:"sm",visible:t,backdrop:"static",className:"ui-dialog ",onClose:function(){a(!1)},children:[(0,Z.jsx)(h.p0,{style:{cursor:"all-scroll"},children:(0,Z.jsx)(h.fl,{children:(0,Z.jsx)("span",{children:"Confirmation"})})}),(0,Z.jsxs)(h.sD,{children:[(0,Z.jsx)("span",{children:"Are You Sure..you are updating ".concat(null===r||void 0===r?void 0:r.Resname," bill rate from ").concat(void 0==n?n:null===n||void 0===n?void 0:n.hourly_rate," to ").concat(void 0==r.BillingRate?null===n||void 0===n?void 0:n.hourly_rate:r.BillingRate," ?.")}),(0,Z.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,Z.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(e){s(e),u((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},children:[(0,Z.jsx)(v.bzc,{}),"Yes"]}),(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){a(!1)},children:[(0,Z.jsx)(v.oHP,{}),"No"]})]})]})]})})})}return(0,Z.jsxs)("div",{className:"col-md-12",children:[$?(0,Z.jsxs)("div",{className:"statusMsg success",children:[(0,Z.jsx)(x.hXj,{size:"1.4em",color:"green",strokeWidth:{width:"100px"}}),"\xa0","Billing Rate per Hour Updated successfully"]}):"",ie?(0,Z.jsxs)("div",{className:"statusMsg error",children:[(0,Z.jsx)(v.CSE,{})," ","You are not Billable"]}):"",ae?(0,Z.jsxs)("div",{className:"statusMsg error",children:[(0,Z.jsx)(v.CSE,{})," ","Please select the valid values for highlighted fields"]}):"",(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Update Billing Rate"})}),(0,Z.jsx)("div",{className:"childThree"})]}),(0,Z.jsx)(D.Z,{routes:Se,currentScreenName:["Hammer Tool","Update Billing Rate"]}),(0,Z.jsxs)("div",{className:"group my-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{style:{marginLeft:"6px"},children:"Update Billing Rate"}),(0,Z.jsx)("div",{style:{marginRight:"6px"},onClick:function(){ge(!fe),me(fe?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:ue})})]}),(0,Z.jsx)(h.V9,{visible:!fe,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsx)("div",{className:" col-md-8",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Resource",children:["Resource \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"autoComplete-container cancel error autocomplete reactautocomplete",id:"autocomplete reactautocomplete",ref:function(e){je.current[0]=e},onChange:function(){var e=document.getElementsByClassName("cancel");F("");for(var s=0;s<e.length;s++)e[s].value=""},children:(0,Z.jsx)(i.Z,{name:"assigned_to",id:"assigned_to",value:"UpdateBillingRate",riskDetails:J,getData:Ce,setFormData:u,onChangeHandler:_e})})})]})})}),(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsxs)("div",{className:" col-md-8",children:[(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Projects",children:["Projects\xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",id:"Projects",name:"Projects",onChange:function(e){be.current[0].value="",F({}),Ze.current[0].value="",H({}),u((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){je.current[1]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),g.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.project_name},e.id)}))]})})]})," "]})}),(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsx)("div",{className:" col-md-8",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Roles",children:["Roles\xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",id:"Roles",names:"Roles",onChange:function(e){be.current[0].value="",F({}),Ze.current[0].value="",u((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){je.current[2]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),_.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.display_name},e.id)}))]})})]})})}),(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsx)("div",{className:" col-md-8",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Allocations",children:["Allocations\xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",id:"Allocations",name:"Allocations",onChange:function(e){Ze.current[0].value="",u((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){je.current[3]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),T.map((function(e){return(0,Z.jsx)("option",{value:e.Allocations,children:e.Allocations},e.Allocations)}))]})})," "]})})}),console.log(null===U||void 0===U?void 0:U.hourly_rate),(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsxs)("div",{className:" col-md-8",children:[(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Current Billing Rate",children:["Current Billing Rate \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("input",{type:"text",value:null===U||void 0===U?void 0:U.hourly_rate,disabled:"disabled",className:"Current Billing Rate disableField cancel",name:"CurrentBillingRate",id:"CurrentBillingRate",placeholder:"",required:!0,ref:function(e){be.current[0]=e}})})]})," "]})}),(0,Z.jsxs)("div",{className:" col-md-6 mb-2",children:[(0,Z.jsx)("div",{className:" col-md-8",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5 error-text",htmlFor:"Billing Rate",children:["Billing Rate \xa0",(0,Z.jsx)("span",{className:"required error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 textfield error enteredDetails cancel",ref:function(e){Ze.current[0]=e},children:(0,Z.jsx)("input",{type:"text",className:"cancel",id:"BillingRate",name:"BillingRate",placeholder:"",required:!0,onChange:_e})})]})})," "]}),(0,Z.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){!function(){var e=(0,M.Z)(Ze);if((0,M.Z)(je)||e)return ne(!0),void setTimeout((function(){ne(!1)}),3e3);X(!0)}()},children:[(0,Z.jsx)(p.TvB,{})," Save"," "]}),(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:ke,children:[(0,Z.jsx)(b.sQZ,{})," Cancel"," "]})]})]})})]})]}),K?(0,Z.jsx)(we,{postBillingRate:function(s){c()({method:"post",url:e+"/administrationms/UpdateBillingRate/UpdateBillRate?resId=".concat(r.assigned_to,"&prjId=").concat(r.Projects,"&roleId=").concat(r.Roles,"&fromDT=").concat(Re,"&toDt=").concat(Me,"&curbillRate=").concat(null===U||void 0===U?void 0:U.hourly_rate,"&billRate=").concat(r.BillingRate)}).then((function(e){var s=e.data[0];F(s),X(!1),ee(!0),setTimeout((function(){ee(!1)}),3e3),u((function(e){return(0,o.Z)((0,o.Z)({},e),{},{assigned_to:"",Projects:"",Roles:"",Allocations:"",CurrentBillingRate:"",BillingRate:"",fromDT:"",todate:""})})),ke()}))},buttonPopup:K,setButtonPopup:X,setAddmsg:ee,setValidationMessage:ne,currentBillingRate:U,BillingRate:O,setBillingRate:H}):""]})};var E=function(){var e=(0,n.useState)([]),s=(0,a.Z)(e,2),t=s[0],r=s[1],u=(0,n.useState)({assigned_to:"",project_id:"",task_id:"",task_status:"",prj_id:"",statusId:""}),m=(0,a.Z)(u,2),f=m[0],g=m[1],j=(0,n.useState)([]),N=(0,a.Z)(j,2),S=N[0],y=N[1];console.log(f);var _=(0,n.useState)(0),C=(0,a.Z)(_,2),R=C[0],k=(C[1],(0,n.useState)([])),T=(0,a.Z)(k,2),E=T[0],A=T[1],I=(0,n.useState)([]),U=(0,a.Z)(I,2),F=U[0],B=U[1],L=d.N.baseUrl,O=(0,n.useState)(!1),H=(0,a.Z)(O,2),G=H[0],Y=H[1],J=(0,n.useState)(!1),z=(0,a.Z)(J,2),V=z[0],q=z[1],K=(0,n.useState)(!1),X=(0,a.Z)(K,2),Q=X[0],W=X[1],$=(0,n.useState)(""),ee=(0,a.Z)($,2),se=(ee[0],ee[1],(0,n.useState)([])),te=(0,a.Z)(se,2),ae=te[0],ne=te[1],le=(0,n.useState)([]),oe=(0,a.Z)(le,2),ie=oe[0],re=oe[1],ce=(0,n.useState)(!1),de=(0,a.Z)(ce,2),ue=de[0],me=de[1],he=(0,n.useState)(!1),pe=(0,a.Z)(he,2),fe=(pe[0],pe[1],(0,n.useState)(p.UdN)),ge=(0,a.Z)(fe,2),je=ge[0],xe=ge[1],ve=localStorage.getItem("resId"),Ne=(0,n.useState)([]),Se=(0,a.Z)(Ne,2),ye=Se[0],be=Se[1],Ze=(0,n.useRef)([]),_e=function(){c()({method:"get",url:L+"/ProjectMS/risks/getAssignedData"}).then((function(e){var s=e.data;r(s)}))};(0,n.useEffect)((function(){}),[]),(0,n.useEffect)((function(){_e(),Ce()}),[]);var Ce=function(){c()({method:"GET",url:L+"/CommonMS/master/getMenus?loggedUserId=".concat(ve)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&be([e])}))}))};console.log(f);var De=function(e){var s;console.log(null===e||void 0===e?void 0:e.target),c()({method:"post",url:L+"/administrationms/updatetask/getTaskList ",data:{res_id:f.assigned_to,prj_id:null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value}}).then((function(e){var s=e.data;A(s),console.log(s)}))};(0,n.useEffect)((function(){var e;console.log(null===e||void 0===e?void 0:e.target),c()({method:"post",url:L+"/administrationms/updatetask/getproject ",data:{res_id:f.assigned_to}}).then((function(e){var s=e.data;console.log("in line 104"),console.log(s),y(s),console.log(s.project_name)}))}),[f.assigned_to]),(0,n.useEffect)((function(){De()}),[R]);var Re=(0,n.useState)([]),Me=(0,a.Z)(Re,2),ke=Me[0],Pe=Me[1];(0,n.useEffect)((function(){c()({method:"get",url:L+"/administrationms/updatetask/getstatus"}).then((function(e){var s=e.data;Pe(s)}))}),[]);var we=function(e){var s=document.getElementsByClassName("cancel");y([]),A([]),B([]),console.log(Ze),(0,w.Z)(Ze),console.log(Ze);for(var t=0;t<s.length;t++)console.log(s[t]),console.log(s[t].id),console.log(s[t].value),s[t].value="",W(!1),q(!1),console.log(s[t].classList),console.log(s[t].classList.contains("reactautocomplete")),s[t].classList.contains("reactautocomplete")&&(console.log(s[t].children[0].children[0].children[0].children[0].children[0].children[0].value),s[t].children[0].children[0].children[0].children[0].children[0].children[1].click(),console.log(s[t].children[0].children[0].children[0].children[0].children[0].children[0]),console.log(s[t]))};function Te(e){var s,t,a,n,i=e.handleSaveClick,r=e.buttonPopup,c=e.setButtonPopup,d=e.sourceStatus,u=e.destinationStatus;return(0,Z.jsx)("div",{children:(0,Z.jsx)(P(),{children:(0,Z.jsxs)(h.Tk,{size:"Default",visible:r,className:"ui-dialog",onClose:function(){c(!1)},children:[(0,Z.jsx)(h.p0,{style:{cursor:"all-scroll"},children:(0,Z.jsx)("h6",{style:{color:"#297AB0"},children:"Confirmation"})}),(0,Z.jsxs)(h.sD,{children:[(0,Z.jsx)("span",{children:"Are You Sure...you are updating task status from ".concat(null===(s=d[0])||void 0===s?void 0:s.description," to ").concat(void 0==(null===(t=u[0])||void 0===t?void 0:t.description)?null===(a=d[0])||void 0===a?void 0:a.description:null===(n=u[0])||void 0===n?void 0:n.description," ?")}),(0,Z.jsxs)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:[(0,Z.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(e){i(e),g((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},children:[(0,Z.jsx)(v.bzc,{}),"Yes"]}),(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){c(!1)},children:[(0,Z.jsx)(v.oHP,{}),"No"]})]})]})]})})})}return(0,Z.jsx)("div",{children:(0,Z.jsxs)("div",{className:"",children:[V?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{size:"1.4em"})," ","\xa0 Task Status Updated Successfully"]})}):"",Q?(0,Z.jsx)("div",{className:"statusMsg error",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," \xa0 Please select valid values for highlighted fields"]})}):"",(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Update Task Status"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:ye,currentScreenName:["Hammer Tool","Update Task Status"]}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"Update Task Status"}),(0,Z.jsx)("div",{onClick:function(){me(!ue),xe(ue?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:je})})]}),(0,Z.jsx)(h.V9,{visible:!ue,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Resource Name",title:"Resource Name",children:["Resource Name\xa0 ",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"autoComplete-container cancel  reactautocomplete",ref:function(e){Ze.current[0]=e},children:(0,Z.jsx)(i.Z,{name:"assigned_to",id:"assigned_to",placeholder:"Type minimum 3 characters",value:"0",riskDetails:t,getData:_e,setFormData:g,onChangeHandler:function(e){console.log("onChange Handler");var s=e.target,t=s.id,a=s.value;console.log("in line 53"),console.log(t,a),g((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,a))})),y(),A()}})})})]})}),(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Projects",title:"Project",children:["Project\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",id:"project_id",onChange:function(e){De(e),g((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){Ze.current[1]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),S.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.project_name},e.id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Task List",title:"Task List",children:["Task List\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",name:"task_id",id:"task_id",onChange:function(e){!function(e){var s;c()({method:"post",url:L+"/administrationms/updatetask/getStatusID ",data:{res_id:f.assigned_to,prj_id:f.project_id,task_id:null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value}}).then((function(e){var s=e.data;B(s),console.log(s)}))}(e),g((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){Ze.current[2]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),E.map((function(e){return(0,Z.jsx)("option",{value:e.project_task_id,children:e.task_name},e.project_task_id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-3 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Task Status",title:"Task Status",children:["Task Status\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails  cancel text",name:"task_status",id:"task_status",onChange:function(e){g((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},e.target.id,e.target.value))}))},ref:function(e){Ze.current[3]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),ke.map((function(e){var s;return(0,Z.jsx)("option",{value:e.id,selected:(null===(s=F[0])||void 0===s?void 0:s.statusId)==e.id,children:e.lkup_name},e.id)}))]})})]})}),(0,Z.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,Z.jsxs)("button",{className:"btn btn-primary",onClick:function(){!function(){var e;console.log("in  line 286----"),console.log(Ze);var s=(0,M.Z)(Ze);if(console.log(s),s)W(!0);else{Y(!0),console.log(f),console.log(F),console.log();var t=null===(e=F[0])||void 0===e?void 0:e.statusId,a=f.task_status,n=JSON.parse(JSON.stringify(ke));console.log(n);var l=JSON.parse(JSON.stringify(ke));console.log(n);var o=n.filter((function(e){return e.id==t})),i=l.filter((function(e){return e.id==a}));console.log("in line 274-----"),console.log(o),console.log(i),console.log(i),ne(o),re(i)}}()},children:[(0,Z.jsx)(p.TvB,{})," Save"," "]}),(0,Z.jsxs)("button",{className:"btn btn-primary",type:"reset",onClick:we,children:[(0,Z.jsx)(b.sQZ,{})," Cancel"," "]})]})]})})]}),G?(0,Z.jsx)(Te,{handleSaveClick:function(e){var s,t,a;c()({method:"post",url:L+"/administrationms/updatetask/getresource?ResId=".concat(f.assigned_to,"&PrjId=").concat(f.project_id,"&PrjTaskId=").concat(f.task_id,"&StatusId=").concat(void 0==(null===(s=ie[0])||void 0===s?void 0:s.id)?null===(t=ae[0])||void 0===t?void 0:t.id:null===(a=ie[0])||void 0===a?void 0:a.id)}).then((function(e){Y(!1),q(!0),setTimeout((function(){q(!1)}),3e3)})),we()},buttonPopup:G,setButtonPopup:Y,setAddmsg:q,setValidationMessage:W,sourceStatus:ae,destinationStatus:ie}):""]})})},A=t(11167),I=t(83854),U=t(14651),F=t(59513),B=t.n(F),L=t(37145);var O=function(){var e=(0,n.useRef)([]),s=(0,n.useState)([{}]),t=(0,a.Z)(s,2),i=(t[0],t[1]),r=(0,n.useState)([]),u=(0,a.Z)(r,2),m=(u[0],u[1]),f=(0,n.useState)([]),g=(0,a.Z)(f,2),N=g[0],S=g[1],y=(0,n.useState)(!1),_=(0,a.Z)(y,2),R=_[0],k=_[1],P=(0,n.useState)(),T=(0,a.Z)(P,2),E=T[0],F=T[1],O=(0,n.useState)(),H=(0,a.Z)(O,2),G=(H[0],H[1]),Y=(0,n.useState)([]),J=(0,a.Z)(Y,2),z=(J[0],J[1],(0,n.useState)()),V=(0,a.Z)(z,2),q=V[0],K=(V[1],(0,n.useState)()),X=(0,a.Z)(K,2),Q=(X[0],X[1]),W=(0,n.useState)(),$=(0,a.Z)(W,2),ee=$[0],se=$[1],te=(0,n.useState)([]),ae=(0,a.Z)(te,2),ne=ae[0],le=ae[1],oe=(0,n.useState)([]),ie=(0,a.Z)(oe,2),re=ie[0],ce=ie[1],de=(0,n.useState)([]),ue=(0,a.Z)(de,2),me=ue[0],he=ue[1],pe=(0,n.useState)(!1),fe=(0,a.Z)(pe,2),ge=fe[0],je=fe[1],xe=(0,n.useState)(p.UdN),ve=(0,a.Z)(xe,2),Ne=ve[0],Se=ve[1],ye=(0,n.useState)(!1),be=(0,a.Z)(ye,2),Ze=be[0],_e=be[1],Ce=(0,n.useState)(!1),De=(0,a.Z)(Ce,2),Re=De[0],Me=De[1],ke=(0,n.useState)(!1),Pe=(0,a.Z)(ke,2),we=Pe[0],Te=Pe[1],Ee=(0,n.useState)(!1),Ae=(0,a.Z)(Ee,2),Ie=Ae[0],Ue=Ae[1],Fe=(0,n.useState)(!1),Be=(0,a.Z)(Fe,2),Le=Be[0],Oe=Be[1],He=(0,n.useState)(!1),Ge=(0,a.Z)(He,2),Ye=Ge[0],Je=Ge[1],ze=(0,n.useState)([{}]),Ve=(0,a.Z)(ze,2),qe=Ve[0],Ke=Ve[1],Xe=localStorage.getItem("resId"),Qe=(0,n.useState)([]),We=(0,a.Z)(Qe,2),$e=We[0],es=We[1],ss=(0,n.useState)({}),ts=(0,a.Z)(ss,2),as=ts[0],ns=ts[1],ls=(j()(q).format("yyyy-MM-DD"),function(e){var s=e.target,t=s.id,a=s.value;ms((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t,a))}))});(0,n.useEffect)((function(){is(),os()}),[]);var os=function(){c()({method:"GET",url:rs+"/CommonMS/master/getMenus?loggedUserId=".concat(Xe)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&es([e])}))}))},is=function(){c().get(rs+"/administrationms/timeSheet/postTimeSheet?res_id=".concat(us.res_id,"&prj_id=").concat(us.prj_id,"&FromDate=").concat(us.FromDate,"&ToDate=").concat(us.ToDate,"&task_id=").concat(us.task_id)).then((function(e){for(var s=e.data,t=0;t<s.length;t++)s[t].SNo=t+1,s[t].createdAt=null==s[t].createdAt?"":j()(s[t].createdAt).format("DD-MM-YYYY HH:mm:ss");i([{timesheet_dt:"Date",hours:"Hours"}].concat(s)),S(s),setTimeout((function(){Je(!1)}),2e3),ns()})).catch((function(e){}))};(0,n.useEffect)((function(){is(),S()}),[]);var rs=d.N.baseUrl,cs=(0,n.useState)({FromDate:"",ToDate:"",prj_id:"",res_id:"",task_id:""}),ds=(0,a.Z)(cs,2),us=ds[0],ms=ds[1];(0,n.useEffect)((function(){}),[null===us||void 0===us?void 0:us.FromDate,us.ToDate]),(0,n.useEffect)((function(){c().get(rs+"/timeandexpensesms/getResources?PrjId=".concat(us.prj_id)).then((function(e){var s=e.data;le(s)})).catch((function(e){return console.log(e)})),c().get(rs+"/administrationms/timeSheet/getProjectssss?FromDate=".concat(null===us||void 0===us?void 0:us.FromDate,"&ToDate=").concat(us.ToDate)).then((function(e){var s=e.data;ce(s)})).catch((function(e){return console.log(e)})),c()({method:"get",url:rs+"/administrationms/timeSheet/getTaskListTimeSheet?res_id=".concat(us.res_id,"&prj_id=").concat(us.prj_id,"&FromDate=").concat(us.FromDate)}).then((function(e){var s=e.data;he(s)}))}),[us.prj_id,us.task_id,us.res_id,null===us||void 0===us?void 0:us.FromDate,us.ToDate]);var hs=function(e,s){Ke(e),(""===e||e>=0&&e<=24)&&ns((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},s.timesheet_dt,e))}))};return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("div",{className:"col-md-12",children:[R?(0,Z.jsxs)("div",{className:"statusMsg success",children:[" ",(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{size:"1.4em"})," \xa0 Time Saved Successfully"]})]}):"",Re?(0,Z.jsx)("div",{className:"statusMsg error",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," \xa0 Please enter valid hours"]})}):"",Le?(0,Z.jsx)("div",{className:"statusMsg error",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," \xa0 Please select valid values for highlighted fields"]})}):"",we?(0,Z.jsx)("div",{className:"statusMsg error",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," \xa0 Please save the hours before reject"]})}):"",Ie?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," \xa0 Time Rejected Successfully"]})}):"",(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Timesheet"})}),(0,Z.jsx)("div",{className:"childThree"})]}),(0,Z.jsx)(D.Z,{routes:$e,currentScreenName:["Hammer Tool","Timesheet"]}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"TimeSheet"}),(0,Z.jsx)("div",{className:"helpBtn",children:(0,Z.jsx)(C.Z,{pdfname:"PMOTimesheet.pdf",name:"Timesheet Help"})}),(0,Z.jsx)("div",{onClick:function(){_e(!Ze),Se(Ze?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:Ne})})]}),(0,Z.jsx)(h.V9,{visible:!Ze,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"From Date",children:["From Date ",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"datepicker",ref:function(s){e.current[0]=s},children:(0,Z.jsx)(B(),{id:"FromDate",autoComplete:"off",selected:E,onChange:function(e){ms((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},"FromDate",j()(e).format("YYYY-MM-DD")))})),F(e)},showYearDropdown:!0,showMonthDropdown:!0,dateFormat:"dd-MMM-yyyy",placeholderText:"Begin Date",onKeyDown:function(e){e.preventDefault()}})})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"To Date",children:["To Date",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"datepicker",ref:function(s){e.current[1]=s},children:(0,Z.jsx)(B(),{id:"ToDate",autoComplete:"off",selected:ee,onChange:function(e){se(e),ms((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},"ToDate",j()(e).format("YYYY-MM-DD")))})),G(e)},showYearDropdown:!0,showMonthDropdown:!0,dateFormat:"dd-MMM-yyyy",placeholderText:"End Date",onKeyDown:function(e){e.preventDefault()},minDate:E})})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Projects",children:["Projects",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{ref:function(s){e.current[2]=s},className:" text",name:"prj_id",id:"prj_id",onChange:ls,children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),null===re||void 0===re?void 0:re.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.projectName},e.id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Resources",children:["Resources",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{ref:function(s){e.current[3]=s},className:" text",id:"res_id",onChange:ls,children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),null===ne||void 0===ne?void 0:ne.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Task List",children:["Task List",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{ref:function(s){e.current[4]=s},className:" text",name:"task_id",id:"task_id",onChange:function(e){ls(e)},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),me.map((function(e){return(0,Z.jsx)("option",{value:e.project_task_id,children:e.task_name},e.project_task_id)}))]})})]})}),(0,Z.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){return function(){if((0,w.Z)(e),""==us.FromDate||""==us.ToDate||""==us.res_id||""==us.prj_id||""==us.task_id){if((0,M.Z)(e))return void Oe(!0)}else je(!0),Oe(!1),Je(!0);is()}()},children:[(0,Z.jsx)(p.U41,{}),"Search"," "]})})]})})]})]}),ge?(0,Z.jsxs)("div",{className:"col-md-4 darkHeader",children:[(0,Z.jsxs)("div",{className:"legendContainer",children:[(0,Z.jsxs)("div",{className:"legend green",children:[(0,Z.jsx)("div",{className:"legendCircle "}),"Approved"]}),(0,Z.jsxs)("div",{className:"legend red",children:[(0,Z.jsx)("div",{className:"legendCircle "})," Rejected"]})]}),Ye?(0,Z.jsxs)(Z.Fragment,{children:[" ",(0,Z.jsx)(I.Z,{setsearching:Je})]}):(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{children:(0,Z.jsxs)(L.w,{className:"primeReactDataTable ",value:N,showGridlines:!0,rows:10,dataKey:"id",responsiveLayout:"scroll",emptyMessage:"No Records found.",children:[(0,Z.jsx)(A.sgG,{field:"timesheet_dt",header:"  Date",body:function(e){return m(e.typ_status),(0,Z.jsx)("span",{className:"vertical-align-middle ml-2",children:j()(e.timesheet_dt).format("DD-MMM-yyyy")})},style:{textAlign:"center"}}),(0,Z.jsx)(A.sgG,{field:"hours",header:"  Hours",body:function(e){return(0,Z.jsx)(Z.Fragment,{children:172==e.typ_status?(0,Z.jsx)("form",{children:(0,Z.jsx)("input",{className:"cancel",id:"hours",style:{backgroundColor:"red",textAlign:"center"},defaultValue:e.hours,"data-initial-value":e.hours,onChange:function(s){hs(s.target.value,e)}})}):173==e.typ_status&&0!==e.hours?(0,Z.jsx)("input",{id:"hours",defaultValue:e.hours,style:{backgroundColor:"rgb(79 167 116 / 85%)",textAlign:"center"},className:" cancel","data-initial-value":e.hours,onChange:function(s){hs(s.target.value,e)}}):(0,Z.jsx)("input",{id:"hours",style:{textAlign:"center"},className:" cancel",defaultValue:e.hours,"data-initial-value":e.hours,onChange:function(s){hs(s.target.value,e)}})})},style:{textAlign:"center"}})]})}),(0,Z.jsx)("div",{className:"row",children:(0,Z.jsxs)("div",{className:"col-md-12 btn-container center ",children:[(0,Z.jsxs)("button",{className:"btn btn-primary mt-2 mb-2",value:"Approved",onClick:function(e){!function(e){if(void 0==as||null==as||as=={}||""===qe||qe>=0&&qe>=25)Me(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){Me(!1)}),3e3);else{var s;Me(!1);var t=[];null===Object||void 0===Object||null===(s=Object.keys(as))||void 0===s||s.forEach((function(s){Q(as[s]);var a={};a.timesheetDt=s,a.enteredHours=as[s],a.projectId=us.prj_id,a.projectTaskId=us.task_id,a.resource_id=us.res_id,a.approver_notes="",a.typStatusId="Approved"==e.target.value?174:172,a.loggedId=us.res_id,a.updatedById=us.res_id,t.push(a)})),c()({method:"post",url:rs+"/administrationms/timeSheet/saveTimesheet",data:t}).then((function(e){e.data,is(),ns(),k(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){k(!1)}),2e3)}))}}(e)},children:[(0,Z.jsx)(U.CLo,{}),"Save"]}),(0,Z.jsxs)("button",{className:"btn btn-primary mt-2 mb-2",value:"Reject",onClick:function(e){!function(e){if(void 0==as||null==as||as=={}||""===qe||qe>=0&&qe>=25)Te(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){Te(!1)}),3e3);else{var s;Te(!1);var t=[];null===Object||void 0===Object||null===(s=Object.keys(as))||void 0===s||s.forEach((function(s){Q(as[s]);var a={};a.timesheetDt=s,a.enteredHours=as[s],a.projectId=us.prj_id,a.projectTaskId=us.task_id,a.resource_id=us.res_id,a.approver_notes="",a.typStatusId="Approved"==e.target.value?174:172,a.loggedId=us.res_id,a.updatedById=us.res_id,t.push(a)})),c()({method:"post",url:rs+"/administrationms/timeSheet/saveTimesheet",data:t}).then((function(e){e.data,is(),ns(),Ue(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){Ue(!1)}),2e3)}))}}(e)},children:[(0,Z.jsx)(U.CLo,{}),"Reject"]}),(0,Z.jsxs)("button",{className:"btn btn-secondary   mt-2 mb-2",onClick:function(e){return function(){for(var e=document.getElementsByClassName("cancel"),s=0;s<e.length;s++){var t=e[s].dataset.initialValue;e[s].value=t,Me(!1),k(!1)}}()},children:[(0,Z.jsx)(b.sQZ,{}),"Cancel"]})]})})," "]})]}):""]})};var H=function(e){var s=(0,n.useRef)([]),t=e.openPopup,i=e.setOpenPopup,r=e.type,u=e.editdata,m=e.status,p=e.handleTableData,f=e.setAddmsg,g=d.N.baseUrl,j=(0,n.useState)(!1),N=(0,a.Z)(j,2),S=N[0],y=N[1],_=(0,n.useState)([]),C=(0,a.Z)(_,2),D=C[0],R=C[1],k=(0,n.useState)({updateStatus:""}),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=(0,n.useState)(!1),A=(0,a.Z)(E,2),U=A[0],F=A[1],B=(0,n.useRef)(null);console.log(D);var L=u.id,O=w.updateStatus;return(0,n.useEffect)((function(){console.log("Status has changed")}),[m]),(0,Z.jsxs)("div",{className:"col-md-12",children:[(0,Z.jsxs)(h.Tk,{alignment:"center",backdrop:"static",visible:t,size:"lg",className:" ui-dialog",onClose:function(){return i(!1)},children:[(0,Z.jsx)(h.p0,{className:"",children:(0,Z.jsx)(h.fl,{children:"add"==r?(0,Z.jsx)("span",{className:""}):(0,Z.jsx)("span",{className:"",children:"Update Billing Status "})})}),(0,Z.jsxs)(h.sD,{children:[!0===S?(0,Z.jsx)("div",{className:"group-content row mb-2 ",children:(0,Z.jsx)("div",{className:"statusMsg error",children:(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{})," Please select the valid values for highlighted fields"]})})}):"",(0,Z.jsxs)("div",{className:"group-content row ",children:[(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsx)("label",{className:"col-5",htmlFor:"Current Status",children:"Current Status"}),(0,Z.jsx)("span",{className:"col-1 ",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("input",{type:"text",className:"disableField",id:"status",name:"status",defaultValue:u.status,disabled:!0})})]})}),(0,Z.jsx)("div",{className:" col-md-6 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Customer",children:["Update Status ",(0,Z.jsx)("span",{className:"error-text ml-1",children:" *"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{ref:function(e){s.current[0]=e},className:"cancel text",name:"updateStatus",id:"updateStatus",onChange:function(e){var s=e.target,t=s.name,a=s.value;T((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t,a))}))},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,Z.jsx)("option",{value:"In PM Review",children:"In PM Review"}),(0,Z.jsx)("option",{value:"PM Rejected",children:"PM Rejected"}),(0,Z.jsx)("option",{value:"In DM Review",children:"In DM Review"}),(0,Z.jsx)("option",{value:"DM Rejected",children:"DM Rejected"}),(0,Z.jsx)("option",{value:"In Finance Review",children:"In Finance Review"}),(0,Z.jsx)("option",{value:"Finance Accepted",children:"Finance Accepted"}),(0,Z.jsx)("option",{value:"Finance Rejected",children:"Finance Rejected"})]})})]})})]}),(0,Z.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center mb-2",children:[(0,Z.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){!function(){var e=(0,M.Z)(s);!0===e&&y(!0),e||(F(!0),B.current=new AbortController,c()({method:"put",url:g+"/administrationms/updatetask/updatingStatus?id=".concat(L,"&status=").concat(O),signal:B.current.signal}).then((function(e){var s=e.data;R(s),p(),i(!1),f(!0),F(!1),setTimeout((function(){f(!1),F(!1)}),3e3)})))}()},children:[(0,Z.jsx)(x.jC8,{size:"1.4em"})," Save"]}),(0,Z.jsxs)("button",{className:"btn btn-secondary",onClick:function(){y(!1),i(!1)},children:[(0,Z.jsx)(b.sQZ,{})," Cancel"]})]})]})]}),U?(0,Z.jsx)(I.Z,{handleAbort:function(){B.current&&B.current.abort(),F(!1)}}):""]})};var G=function(){var e,s=(0,n.useState)([]),t=(0,a.Z)(s,2),i=t[0],r=t[1],u=d.N.baseUrl,f=(0,n.useState)([{}]),g=(0,a.Z)(f,2),N=g[0],y=g[1],b=(0,n.useState)(!1),_=(0,a.Z)(b,2),C=_[0],R=_[1],k=(0,n.useState)(!1),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=(0,n.useState)(p.UdN),A=(0,a.Z)(E,2),U=A[0],F=A[1],L=(0,n.useState)([]),O=(0,a.Z)(L,2),G=O[0],Y=O[1],J=(0,n.useState)([]),z=(0,a.Z)(J,2),V=z[0],q=z[1];console.log(V);var K=(0,n.useState)(new Date),X=(0,a.Z)(K,2),Q=X[0],W=X[1],$=(0,n.useState)(!1),ee=(0,a.Z)($,2),se=ee[0],te=ee[1],ae=(0,n.useState)(!1),ne=(0,a.Z)(ae,2),le=ne[0],oe=ne[1],ie=(0,n.useState)([]),re=(0,a.Z)(ie,2),ce=re[0],de=re[1],ue=(0,n.useState)(!1),me=(0,a.Z)(ue,2),he=me[0],pe=me[1],fe=(0,n.useRef)(null),ge=(0,n.useState)({customer:"",project:"",month:""}),je=(0,a.Z)(ge,2),xe=je[0],ve=je[1],Ne=(0,n.useState)([]),Se=(0,a.Z)(Ne,2),ye=Se[0],be=Se[1],Ze=(0,n.useState)([]),_e=(0,a.Z)(Ze,2),Ce=_e[0],De=_e[1],Re=(0,n.useState)([]),Me=(0,a.Z)(Re,2),ke=Me[0],Pe=Me[1],we=(0,n.useState)([]),Te=(0,a.Z)(we,2),Ee=Te[0],Ae=(Te[1],xe.project),Ie=(0,n.useState)(!1),Ue=(0,a.Z)(Ie,2),Fe=Ue[0],Be=Ue[1],Le=(0,n.useRef)([]),Oe=xe.month;console.log(Oe);var He=xe.month.split("-"),Ge=(0,n.useState)(),Ye=(0,a.Z)(Ge,2),Je=Ye[0],ze=(Ye[1],(0,n.useState)()),Ve=(0,a.Z)(ze,2),qe=Ve[0],Ke=(Ve[1],new Date);console.log(Ke);var Xe=new Date(He[0],He[1]-1,1),Qe=j()(Xe).format("yyyy-MM-DD"),We=null==Je?Qe:j()(Je).format("MM-yyyy"),$e=new Date(He[0],He[1],0),es=j()($e).format("yyyy-MM-DD"),ss=null==qe?es:qe,ts=localStorage.getItem("resId"),as=(0,n.useState)([]),ns=(0,a.Z)(as,2),ls=ns[0],os=ns[1],is=xe.customer;(0,n.useEffect)((function(){c()({method:"get",url:u+"/administrationms/updatetask/getProjectName?cid=".concat(is)}).then((function(e){var s=e.data;y(s),q(s)}))}),[is]);var rs=function(){var e=(0,M.Z)(Le);!0===e&&Be(!0),e||(R(!C),Be(!1),te(!0),fe.current=new AbortController,c()({method:"get",url:u+"/administrationms/updatetask/getFilteredData?cid=".concat(is,"&prjid=").concat(Ae,"&fromDate=").concat(We,"&toDate=").concat(ss),signal:fe.current.signal}).then((function(e){for(var s=e.data,t=0;t<s.length;t++)s[t].SNo=t+1,s[t].from_date=null==s[t].from_date?" ":j()(s[t].from_date).format("DD-MMM-yyyy"),s[t].to_date=null==s[t].to_date?" ":j()(s[t].to_date).format("DD-MMM-yyyy");Pe(["Actions"]),T(!0),te(!1),be([{full_name:"Customer",project_name:"Project",status:"Current Status",from_date:"From Date",to_date:"To Date",Actions:"Actions"}].concat(s)),setTimeout((function(){te(!1)}),1e3)})))};(0,n.useEffect)((function(){ye[0]&&De(JSON.parse(JSON.stringify(ye[0])))}),[ye]),(0,n.useEffect)((function(){c()({method:"get",url:u+"/ProjectMS/Engagement/getCustomerName"}).then((function(e){var s=e.data;r(s)})),fs()}),[]);var cs=function(e){var s=ke[0];return console.log(s),(0,Z.jsx)("div",{align:"center",children:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.QML,{"data-toggle":"tooltip",title:"Edit",color:"orange",cursor:"pointer",type:"edit",size:"1.2em",onClick:function(){de(e),oe(!0)}})," ","\xa0"]})})},ds=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",title:e.status,children:e.status})},us=function(e){return(0,Z.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.project_name,children:e.project_name})},ms=function(e){return(0,Z.jsx)("div",{className:"custName ellipsis",title:e.full_name,children:e.full_name})},hs=function(e){return(0,Z.jsx)("div",{className:"custName ellipsis",title:e.from_date,children:e.from_date})},ps=function(e){return(0,Z.jsx)("div",{className:"custName ellipsis",title:e.to_date,children:e.to_date})},fs=function(){c()({method:"GET",url:u+"/CommonMS/master/getMenus?loggedUserId=".concat(ts)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&os([e])}))}))},gs=null===(e=Object.keys(Ce))||void 0===e?void 0:e.map((function(e,s){return(0,Z.jsx)(S.s,{sortable:!0,body:"Actions"==e?cs:"status"==e&&ds||"project_name"==e&&us||"full_name"==e&&ms||"from_date"==e&&hs||"to_date"==e&&ps,field:e,header:Ce[e]},e)}));return(0,Z.jsxs)("div",{children:[he?(0,Z.jsxs)("div",{className:"statusMsg success",children:[(0,Z.jsx)(x.hXj,{}),"Billing Status Updated Successfully."]}):"",Fe?(0,Z.jsxs)("div",{className:"  statusMsg error",children:[" ","\xa0",(0,Z.jsxs)("span",{className:"error-block",children:[(0,Z.jsx)(v.CSE,{size:"1.4em",strokeWidth:{width:"100px"}})," ","\xa0 Please select the valid values for highlighted fields."]})]}):"",(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Update Billing Status"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:ls,currentScreenName:["Hammer Tool","Update Billing Status"]}),(0,Z.jsxs)("div",{className:"group my-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{style:{marginLeft:"6px"},children:"Search Filters"}),(0,Z.jsx)("div",{style:{marginRight:"6px"},onClick:function(){R(!C),F(C?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:U})})]}),(0,Z.jsxs)(h.V9,{visible:!C,children:[(0,Z.jsxs)("div",{className:"group-content row ",children:[(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Customer",children:["Customer ",(0,Z.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{ref:function(e){Le.current[0]=e},className:"error enteredDetails cancel text",name:"customer",id:"customer_id",onChange:function(e){var s=e.target,t=s.name,a=s.value,n=G;y(n),Y(n),ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t,a))}))},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),null===i||void 0===i?void 0:i.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.full_name},e.id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Project",children:["Projects ",(0,Z.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text ellipsis",name:"project",id:"project_id",onChange:function(e){var s=e.target,t=s.name,a=s.value;ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t,a))}))},ref:function(e){Le.current[1]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),null===N||void 0===N?void 0:N.map((function(e){return(0,Z.jsx)("option",{value:e.id,children:e.project_name},e.id)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-3",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Month",children:["Month ",(0,Z.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)(B(),{name:"month",id:"StartDt",selected:Q,onChange:function(e){ve((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},"month",j()(e).format("yyyy-MM")))})),W(e)},dateFormat:"MMM-yyyy",showMonthYearPicker:!0})})]})}),(0,Z.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center ",children:(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",title:"Search",onClick:function(){rs()},children:[(0,Z.jsx)(p.U41,{}),"Search"]})})]}),se?(0,Z.jsx)(I.Z,{handleAbort:function(){fe.current&&fe.current.abort(),te(!1)}}):""]})]}),w&&(0,Z.jsxs)("div",{className:"group my-3 customCard updateBillingStatus card graph",style:{width:"100%",float:"left"},children:[(0,Z.jsx)(m.Z,{data:ye,linkColumns:ke,linkColumnsRoutes:Ee,dynamicColumns:gs,headerData:Ce,setHeaderData:De,rows:10}),le?(0,Z.jsx)(H,{openPopup:le,setOpenPopup:oe,editdata:ce,handleTableData:rs,addmsg:he,setAddmsg:pe}):""]})]})},Y=t(36167),J=t(40071),z=function(e){var s,t=e.data,l=(e.handleAbort,e.sortedAndHeader),o=(0,n.useState)([]),i=(0,a.Z)(o,2),r=i[0],c=i[1],d=(0,n.useState)([]),u=(0,a.Z)(d,2),h=u[0],p=u[1];(0,n.useEffect)((function(){t[0]&&c(JSON.parse(JSON.stringify(t[0])));p(["XLS"])}),[t]);var f=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.csl,children:e.csl})},g=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.resName,children:e.resName})},j=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.customer,children:e.customer})},x=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.dp,children:e.dp})},v=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.engName,children:e.engName})},N=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.project,children:e.project})},y=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.emailId,children:e.emailId})},b=function(e){return(0,Z.jsx)("div",{align:"center","data-toggle":"tooltip",title:e.resStDt,children:e.resStDt})},_=function(e){return(0,Z.jsx)("div",{align:"center","data-toggle":"tooltip",title:e.resEndDt,children:e.resEndDt})},C=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",title:e.industry,children:e.industry})},D=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.contractTerms,children:e.contractTerms})},R=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",title:e.resLocation,children:e.resLocation})},M=function(e){return(0,Z.jsx)("div",{align:"center","data-toggle":"tooltip",title:e.month,children:e.month})},k=function(e){var s=new Intl.NumberFormat,t=Math.round(parseFloat(e.revenue));return(0,Z.jsx)("div",{align:"right","data-toggle":"tooltip",title:s.format(t),children:s.format(t)})},P=null===(s=Object.keys(r))||void 0===s?void 0:s.map((function(e,s){return(0,Z.jsx)(S.s,{sortable:!0,body:"resName"==e?g:"customer"==e?j:"csl"==e?f:"revenue"==e?k:"dp"==e?x:"engName"==e?v:"project"==e?N:"resStDt"==e?b:"emailId"==e?y:"resEndDt"==e?_:"industry"==e?C:"contractTerms"==e?D:"resLocation"==e?R:"month"==e&&M,field:e,header:r[e]},e)}));return(0,Z.jsx)("div",{children:(0,Z.jsx)(m.Z,{fileName:" PPM GMA Report",data:l,dynamicColumns:P,headerData:r,setHeaderData:c,exportData:h,rows:10})})};var V=function(){var e=(0,n.useState)(p.UdN),s=(0,a.Z)(e,2),t=s[0],i=s[1],r=(0,n.useState)(!1),u=(0,a.Z)(r,2),m=u[0],f=u[1],g=(0,n.useState)([]),x=(0,a.Z)(g,2),v=(x[0],x[1]),S=(0,n.useState)(new Date),y=(0,a.Z)(S,2),b=(y[0],y[1],d.N.baseUrl),_=(0,n.useState)([]),C=(0,a.Z)(_,2),R=C[0],k=C[1],P=(0,n.useState)([]),T=(0,a.Z)(P,2),E=T[0],A=T[1],U=(0,n.useState)([]),F=(0,a.Z)(U,2),L=F[0],O=F[1],H=(0,n.useState)([]),G=(0,a.Z)(H,2),V=G[0],q=G[1],K=(0,n.useState)([]),X=(0,a.Z)(K,2),Q=X[0],W=X[1],$=(0,n.useState)(!1),ee=(0,a.Z)($,2),se=ee[0],te=ee[1],ae=(0,n.useState)(!1),ne=(0,a.Z)(ae,2),le=ne[0],oe=ne[1],ie=(0,n.useState)(),re=(0,a.Z)(ie,2),ce=re[0],de=re[1],ue=(0,n.useState)(!1),me=(0,a.Z)(ue,2),he=me[0],pe=me[1],fe=(0,n.useState)(12),ge=(0,a.Z)(fe,2),je=ge[0],xe=ge[1],ve=(0,n.useState)(!1),Ne=(0,a.Z)(ve,2),Se=(Ne[0],Ne[1],(0,n.useRef)([])),ye=new Date,be=ye.getFullYear(),Ze=ye.getMonth(),_e=(ye.getDate(),new Date(be+1,Ze)),Ce=(new Date(be-5,Ze),localStorage.getItem("resId")),De=(0,n.useState)([]),Re=(0,a.Z)(De,2),Me=Re[0],ke=Re[1],Pe=(0,n.useRef)(null),we=(0,n.useState)(""),Te=(0,a.Z)(we,2),Ee=Te[0],Ae=Te[1],Ie=(0,n.useState)({month:"",duration:"",businessUnit:"170,211,123,82,168,207,212,18,213,49,149,208,243",measure:"",location:"6,5,3,8,4,7,1,2"}),Ue=(0,a.Z)(Ie,2),Fe=Ue[0],Be=Ue[1],Le=(0,N.Z)(Q),Oe=Le[0],He=Le.slice(1);He.sort((function(e,s){return e.customer.localeCompare(s.customer)}));var Ge=[Oe].concat((0,N.Z)(He));console.log(Ge);var Ye=function(){Pe.current&&Pe.current.abort(),pe(!1)};(0,n.useEffect)((function(){c()({method:"get",url:b+"/administrationms/HammerTool/getMeasures"}).then((function(e){var s=e.data;v(s)})).catch((function(e){})),c().get(b+"/CostMS/cost/getCountries").then((function(e){var s=[],t=e.data;t.length>0&&t.forEach((function(e){var t={label:e.country_name,value:e.id};s.push(t)})),k(s),A(s)})).catch((function(e){return console.log(e)})),c().get(b+"/CostMS/cost/getDepartments").then((function(e){var s=[],t=e.data;t.length>0&&t.forEach((function(e){var t={label:e.label,value:e.value};s.push(t)})),O(s),q(s)})).catch((function(e){return console.log(e)})),c()({method:"GET",url:b+"/CommonMS/master/getMenus?loggedUserId=".concat(Ce)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&ke([e])}))}))}),[]);var Je=function(e,s){var t=e.map((function(e){return e.value})),a=s.map((function(e){return e.value}));return t.length===a.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},ze=function(e){e.expanded;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(p.qL$,{className:"chevronIcon"})})};return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"GMA Report"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:Me,currentScreenName:["Hammer Tool","GMA Report"]}),(0,Z.jsx)("div",{className:"col-md-12  mt-2",children:le?(0,Z.jsxs)("div",{className:"statusMsg error",children:[" ",(0,Z.jsxs)("span",{children:[" ",(0,Z.jsx)(J.SZZ,{})," Please select the valid values for highlighted fields"," "]})]}):""}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"Search Filters"}),(0,Z.jsx)("div",{onClick:function(){f(!m),i(m?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:t})})]}),(0,Z.jsx)(h.V9,{visible:!m,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",children:["Month\xa0",(0,Z.jsx)("span",{className:"error-text",children:" *"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsx)("div",{className:"datepicker",ref:function(e){Se.current[0]=e},children:(0,Z.jsx)(B(),{name:"month",id:"month",selected:ce,maxDate:_e,n:!0,onChange:function(e){Ae("");var s=new Date,t=12*(e.getFullYear()-s.getFullYear())+(e.getMonth()-s.getMonth());xe(t<0?12:12-t),Be((function(s){return(0,o.Z)((0,o.Z)({},s),{},(0,l.Z)({},"month",j()(e).format("yyyy-MM-DD")))})),de(e)},dateFormat:"MMM-yyyy",showMonthYearPicker:!0,placeholderText:"Start Month",onKeyDown:function(e){e.preventDefault()},autoComplete:"off"})})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"duration",children:["Duration\xa0 ",(0,Z.jsx)("span",{className:"error-text",children:" *"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"error enteredDetails cancel text",id:"duration",name:"duration",value:Ee,onChange:function(e){return Ae(e.target.value)},ref:function(e){Se.current[1]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,N.Z)(Array(je)).map((function(e,s){return(0,Z.jsx)("option",{value:s+1,children:s+1},s+1)}))]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",children:["Business Unit\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){Se.current[2]=e},children:(0,Z.jsx)(Y.NU,{id:"businessUnit",ArrowRenderer:ze,options:L,hasSelectAll:!0,valueRenderer:Je,value:V,disabled:!1,onChange:function(e){q(e);var s=[];e.forEach((function(e){s.push(e.value)})),Be((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"businessUnit",s.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",children:["Measures\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6",children:(0,Z.jsxs)("select",{className:"text",id:"measure",onChange:function(e){return function(e){var s=e.target,t=s.value,a=s.id;Be((0,o.Z)((0,o.Z)({},Fe),{},(0,l.Z)({},a,t)))}(e)},ref:function(e){Se.current[3]=e},children:[(0,Z.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,Z.jsx)("option",{value:"638",children:" Planned Revenue"}),(0,Z.jsx)("option",{value:"965",children:" Actual Revenue"}),(0,Z.jsx)("option",{value:"639",children:" Recognized Revenue"}),(0,Z.jsx)("option",{value:"640",children:" Resource Direct Cost"}),(0,Z.jsx)("option",{value:"641",children:" Other Direct Cost"})]})})]})}),(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",children:["Res. Location\xa0",(0,Z.jsx)("span",{className:"error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){Se.current[4]=e},children:(0,Z.jsx)(Y.NU,{id:"location",options:R,hasSelectAll:!0,value:E,disabled:!1,ArrowRenderer:ze,valueRenderer:Je,onChange:function(e){A(e);var s=[];e.forEach((function(e){s.push(e.value)})),Be((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"location",s.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center mb-2",children:(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",title:"Search",onClick:function(){return function(){(0,w.Z)(Se);var e=document.getElementById("searchInput");console.log(e),e&&(e.value=""),""==Fe.month||""==Ee||""==Fe.businessUnit||""==Fe.measure||""==Fe.location?(0,M.Z)(Se)&&oe(!0):(oe(!1),pe(!0),Pe.current=new AbortController,c()({method:"post",url:b+"/administrationms/HammerTool/getGmaReport",signal:Pe.current.signal,data:{month:Fe.month,duration:Ee,businessUnit:Fe.businessUnit,measure:Fe.measure,location:Fe.location},headers:{"Content-Type":"application/json"}}).then((function(e){var s=e.data,t=[{customer:"Customer",project:"Project",engName:"Eng Name",engCompany:"Eng Company",contractTerms:"Contract Terms",csl:"CSL",dp:"DP",industry:"Industry",resName:"Res Name",emailId:"Email Id",resLocation:"Res Location",resStDt:"Res StDt",resEndDt:"Res EndDt",month:"Month",revenue:s[0].revenue}],a=[],n=[],l=[];s.map((function(s,t){0==t?a.push(e.data[t]):(e.data.map((function(e){"id"==e&&l.push(e)})),n.push(e.data[t]))})),W(t.concat(n))})),setTimeout((function(){pe(!1),te(!0)}),7e3))}()},children:[(0,Z.jsx)(p.U41,{}),"Search"]})})]})})]})]}),he?(0,Z.jsx)("div",{className:"loaderBlock",children:(0,Z.jsx)(I.Z,{handleAbort:Ye})}):"",se?(0,Z.jsx)(z,{data:Q,sortedAndHeader:Ge,loaderState:he,handleAbort:Ye}):" "]})},q=t(63521),K=t(87890),X=(t(41980),t(39122),t(31896),t(81975),t(25103)),Q=t(11087);var W=function(e){var s,t=e.data,l=e.rows,i=(e.col,e.headerdatagroup,e.linkColumns),r=e.linkColumnsRoutes,c=e.rowGroupMode,d=e.groupRowsBy,u=(0,n.useState)([]),m=(0,a.Z)(u,2),h=m[0],p=m[1],f=(0,n.useState)([]),g=(0,a.Z)(f,2),j=g[0],x=g[1],v=(0,n.useState)([]),N=(0,a.Z)(v,2),y=N[0],b=N[1];(0,n.useEffect)((function(){p(JSON.parse(JSON.stringify(t)))}),[t]),(0,n.useEffect)((function(){h.length>0&&(x(h[0]),b(h.splice(1)))}),[h]);var _={contains:{value:null,matchMode:K.a6.CONTAINS}},C=(0,n.useState)({global:_.contains}),D=(0,a.Z)(C,2),R=D[0],M=D[1];(0,n.useEffect)((function(){M({global:_.contains})}),[j]),console.log("in line 61"),console.log(R),console.log("in line 45"),console.log(t);var k=(0,n.useState)(""),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=function(e){var s=e.target.value,t=(0,o.Z)({},R);console.log(t),console.log(t),t.global.value=s,M(t),T(s)},A=function(e){var s;console.log(e);var t=null===(s=r[0])||void 0===s?void 0:s.split(":");return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(Q.rU,{target:"_blank",to:t[0]+":"+e[t[1]],children:e[i]})})},I=function(e){return(0,Z.jsx)("div",{className:"ellipsis",title:e.ProjName,children:e.ProjName})},U=function(e){return(0,Z.jsx)("div",{className:"ellipsis",title:e.resource,children:e.resource})},F=function(e){return(0,Z.jsx)("div",{className:"ellipsis",align:"center",children:"-"==e.isActive?"NO":e.isActive})},B=(0,Z.jsxs)("div",{className:"flex justify-content-between",children:[(0,Z.jsx)("span",{}),(0,Z.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,Z.jsx)("i",{className:"pi pi-search"}),(0,Z.jsx)(X.o,{defaultValue:w,onChange:E,placeholder:"Keyword Search"})]})]}),O=null===(s=Object.keys(j))||void 0===s?void 0:s.map((function(e,s){return console.log(e),(0,Z.jsx)(S.s,{sortable:!0,body:null!==i&&void 0!==i&&i.includes(e)&&A||"isActive"==e?F:"ProjName"==e?I:"resource"==e?U:"",field:e,header:j[e]},e)}));return(0,Z.jsx)("div",{children:(0,Z.jsx)("div",{className:"card",children:Object.keys(j).length>0&&(0,Z.jsx)(L.w,{value:y,rowsPerPageOptions:[10,25,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",paginator:!0,showGridlines:!0,rows:l,dataKey:"id",filters:R,responsiveLayout:"scroll",header:B,emptyMessage:"No Records found.",className:"customerEngament primeReactDataTable",rowGroupMode:c,groupRowsBy:d,children:O})})})};var $=function(){var e=(0,n.useState)([{}]),s=(0,a.Z)(e,2),t=s[0],i=s[1],r=(0,n.useState)([]),u=(0,a.Z)(r,2),m=u[0],g=(u[1],(0,n.useState)(!1)),j=(0,a.Z)(g,2),N=j[0],S=j[1],y=localStorage.getItem("resId"),_=(0,n.useState)([]),R=(0,a.Z)(_,2),k=R[0],P=R[1],w=d.N.baseUrl,T=(0,n.useState)(!1),E=(0,a.Z)(T,2),A=E[0],I=E[1],U=function(){c().get(w+"/administrationms/getProjectAES").then((function(e){for(var s=e.data,a=0;a<s.length;a++)s[a].isActive=null==s[a].isActive?"-":s[a].isActive;i([{ProjName:"Projector Name",resource:"Resource",isActive:"Is Active"}].concat(s)),console.log(t)})).catch((function(e){console.log("Error :"+e)}))};return(0,n.useEffect)((function(){U(),c()({method:"GET",url:w+"/CommonMS/master/getMenus?loggedUserId=".concat(y)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&P([e])}))}))}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"col-md-12",children:[N?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," \xa0 Projector name added successfully"]})}):"",(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Projector AES"})}),(0,Z.jsx)("div",{className:"childThree"})]})]}),(0,Z.jsx)(D.Z,{routes:k,currentScreenName:["Hammer Tool","Projector AES"]}),(0,Z.jsx)("div",{className:"helpBtn",style:{float:"right",paddingTop:"5px"},children:(0,Z.jsx)(C.Z,{pdfname:"ProjectorAES.pdf",name:"Projector AES Help"})}),(0,Z.jsxs)("div",{className:"col-6 mt-2 ",children:[(0,Z.jsx)(W,{data:t,rows:25}),(0,Z.jsx)("center",{children:(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary my-2 btn-container  ",onClick:function(){console.log(t),I(!0)},children:[" ",(0,Z.jsx)(f.LkC,{}),"Add"]})})]}),A?(0,Z.jsx)(F,{buttonPopup:A,setButtonPopup:I,setSuccessMessage:S,data:t}):""]});function F(e){var s=e.buttonPopup,t=e.data,i=e.setSuccessMessage,r=(0,n.useState)({resourceFullName:"",userId:"",isActive:""}),d=(0,a.Z)(r,2),u=d[0],f=d[1],g=(0,n.useState)([]),j=(0,a.Z)(g,2),x=j[0],N=j[1],S=(0,n.useRef)([]),y=(0,n.useState)(!1),_=(0,a.Z)(y,2),C=_[0],D=_[1],R=(0,n.useState)(!1),k=(0,a.Z)(R,2),P=k[0],T=k[1];console.log(u);return(0,n.useEffect)((function(){}),[x]),(0,n.useEffect)((function(){c()({method:"get",url:w+"/ProjectMS/risks/getAssignedData"}).then((function(e){var s=e.data;N(s)}))}),[]),(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)(h.Tk,{visible:s,onClose:function(){return I(!1)},size:"xs",className:" ui-dialog",backdrop:"static",children:[(0,Z.jsx)(h.p0,{className:"hgt22",children:(0,Z.jsx)(h.fl,{children:(0,Z.jsx)("span",{className:"ft16",children:"Projector AES"})})}),(0,Z.jsxs)("div",{children:[C?(0,Z.jsxs)("div",{className:" ml-3 mr-4 statusMsg error",children:[(0,Z.jsx)(v.CSE,{}),"Please select valid values for highlighted fields"]}):"",P?(0,Z.jsxs)("div",{className:" ml-3 mr-4 statusMsg error",children:[(0,Z.jsx)(v.CSE,{})," Please select unique name"]}):"",(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-4 pl-5",children:["Projector Name"," ",(0,Z.jsx)("span",{className:"col-1 p-0 error-text",style:{marginLeft:"5px"},children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("span",{className:"col-6 pl-0",children:(0,Z.jsx)("div",{className:"textfield",ref:function(e){S.current[0]=e},children:(0,Z.jsx)("input",{type:"text",id:"resourceFullName",className:"validCheck unique",onKeyDown:function(e){"Space"!=e.code||u.resourceFullName||e.preventDefault()},onChange:function(e){f((0,o.Z)((0,o.Z)({},u),{},(0,l.Z)({},"resourceFullName",e.target.value))),console.log(e.target.value)}})})})]}),(0,Z.jsx)("br",{}),"\xa0",(0,Z.jsxs)("div",{className:"form-group row ",children:[(0,Z.jsxs)("label",{className:"col-4 pl-5 ",children:["Resource Name"," ",(0,Z.jsx)("span",{className:"col-1 p-0 error-text",style:{marginLeft:"5px"},children:"*"})]}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("div",{className:"col-6 autocomplete pl-0",name:"Assigned_To",id:"userId",ref:function(e){S.current[1]=e},children:(0,Z.jsxs)("div",{className:"autoComplete-container react mt-2 ",children:[(0,Z.jsx)(q.ReactSearchAutocomplete,{items:x,type:"Text",name:"Assigned_To",id:"userId",placeholder:"Enter Resource Name",riskDetails:x,getData:U,className:"AutoComplete",onSelect:function(e){f((function(s){return(0,o.Z)((0,o.Z)({},s),{},{userId:e.id})})),console.log(e)},showIcon:!1}),(0,Z.jsx)("span",{children:m.name})]})})]}),(0,Z.jsxs)("div",{className:"form-group row mt-2",children:[(0,Z.jsx)("label",{className:"col-4 pl-5",children:"Is Active"}),(0,Z.jsx)("span",{className:"col-1 p-0",children:":"}),(0,Z.jsx)("span",{className:"col-6  pl-0 align-self-center",children:(0,Z.jsx)("input",{type:"checkbox",onChange:function(e){f((0,o.Z)((0,o.Z)({},u),{},(0,l.Z)({},"isActive","on"===e.target.value?"1":"0"))),console.log("on"===e.target.value?"1":"0")},style:{marginTop:"5px"}})})]}),"\xa0 \xa0",(0,Z.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:["\xa0 \xa0",(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=(0,M.Z)(S);if(console.log(e),1==e&&D(!0),!e)if(t.some((function(e){return e.ProjName==u.resourceFullName}))){var s=document.getElementsByClassName("unique");console.log(s.length);for(var a=0;a<s.length;a++)s[a].classList.add("error-block");T(!0)}else T(!1),c()({method:"post",url:w+"/administrationms/createProjectAES",data:u}).then((function(e){var s=e.data;f(s),I(!1),i(!0),U(),setTimeout((function(){i(!1)}),3e3)}))},children:[(0,Z.jsx)(p.TvB,{})," Save"," "]}),(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){I(!1)},children:[" ",(0,Z.jsx)(b.sQZ,{}),"Cancel"," "]})]})]})]})]})})}},ee=function(e){var s,t=e.data,l=e.headerData,o=e.setHeaderData,i=(0,n.useState)([]),r=(0,a.Z)(i,2),c=r[0],d=r[1];(0,n.useEffect)((function(){t[0]&&o(JSON.parse(JSON.stringify(t[0])));d(["XLS"])}),[t]);var u=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e["Engagement Name"],children:e["Engagement Name"]})},h=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.customer,children:e.customer})},p=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e["Engagement Company"],children:e["Engagement Company"]})},f=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e["Sales Executive"],children:e["Sales Executive"]})},g=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.CSL,children:e.CSL})},j=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.DP,children:e.DP})},x=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e["Start Date"],children:e["Start Date"]})},v=function(e){return(0,Z.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e["End Date"],children:e["End Date"]})},N=null===(s=Object.keys(l))||void 0===s?void 0:s.map((function(e,s){return(0,Z.jsx)(S.s,{sortable:!0,body:"Engagement Name"==e?u:"customer"==e?h:"Engagement Company"==e?p:"Sales Executive"==e?f:"CSL"==e?g:"DP"==e?j:"Start Date"==e?x:"End Date"==e&&v,field:e,header:l[e]},e)}));return(0,n.useEffect)((function(){t[0]&&o(JSON.parse(JSON.stringify(t[0])))}),[t]),(0,Z.jsx)("div",{children:(0,Z.jsx)(m.Z,{fileName:"EngagementDetailsData",exportData:c,data:t,dynamicColumns:N,headerData:l,setHeaderData:o,rows:10})})};var se=function(){var e,s,t=(0,n.useState)([]),i=(0,a.Z)(t,2),r=i[0],u=i[1],m=(0,n.useState)([{}]),f=(0,a.Z)(m,2),g=f[0],j=f[1],x=d.N.baseUrl,v=(0,n.useState)([]),N=(0,a.Z)(v,2),S=N[0],y=N[1],b=(0,n.useState)([]),_=(0,a.Z)(b,2),C=_[0],R=_[1],k=(0,n.useState)([]),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=(0,n.useState)([]),A=(0,a.Z)(E,2),U=A[0],F=A[1],B=(0,n.useState)([]),L=(0,a.Z)(B,2),O=L[0],H=L[1],G=(0,n.useState)([]),z=(0,a.Z)(G,2),V=z[0],q=z[1],K=(0,n.useState)(!1),X=(0,a.Z)(K,2),Q=X[0],W=X[1],$=(0,n.useState)(!1),se=(0,a.Z)($,2),te=se[0],ae=se[1],ne=(0,n.useState)({customers:"-1",csl:"-1",Dp:"-1"}),le=(0,a.Z)(ne,2),oe=le[0],ie=le[1],re=(0,n.useRef)([]),ce=(0,n.useState)(!1),de=(0,a.Z)(ce,2),ue=de[0],me=de[1],he=(0,n.useState)(p.UdN),pe=(0,a.Z)(he,2),fe=pe[0],ge=pe[1],je=(0,n.useState)(!1),xe=(0,a.Z)(je,2),ve=xe[0],Ne=xe[1],Se=(0,n.useRef)(null),ye=localStorage.getItem("resId"),be=(0,n.useState)([]),Ze=(0,a.Z)(be,2),_e=Ze[0],Ce=Ze[1];(0,n.useEffect)((function(){}),[null===oe||void 0===oe?void 0:oe.customers]),(0,n.useEffect)((function(){c()({method:"get",url:x+"/ProjectMS/Engagement/getCustomerName"}).then((function(e){var s=[],t=e.data;t.length>0&&t.forEach((function(e){var t={label:e.full_name,value:e.id};s.push(t)})),y(s),R(s)})),c()({method:"get",url:x+"/SalesMS/MasterController/getCslDropDownData?userId=".concat("0")}).then((function(e){var s=[],t=e.data;t.length>0&&t.forEach((function(e){var t={label:e.PersonName,value:e.id};s.push(t)})),T(s),F(s)})),c()({method:"get",url:x+"/CommonMS/master/getDPDropDownData?userId=".concat("0")}).then((function(e){var s=[],t=e.data;t.length>0&&t.forEach((function(e){var t={label:e.PersonName,value:e.id};s.push(t)})),H(s),q(s)})),De()}),[]);var De=function(){c()({method:"GET",url:x+"/CommonMS/master/getMenus?loggedUserId=".concat(ye)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&Ce([e])}))}))};console.log(null===(e=oe.csl)||void 0===e?void 0:e.length),console.log(null===(s=oe.Dp)||void 0===s?void 0:s.length);var Re=function(e,s){var t=e.map((function(e){return e.value})),a=s.map((function(e){return e.value}));return t.length===a.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},Me=function(e){e.expanded;return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(p.qL$,{className:"chevronIcon"})})};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Engagements Details"})}),(0,Z.jsx)("div",{className:"childThree"})]})}),(0,Z.jsx)(D.Z,{routes:_e,currentScreenName:["Hammer Tool","Engagements Details"]}),(0,Z.jsx)("div",{className:"col-md-12  mt-2",children:ue?(0,Z.jsxs)("div",{className:"statusMsg error",children:[" ",(0,Z.jsxs)("span",{children:[" ",(0,Z.jsx)(J.SZZ,{})," Please select the valid values for highlighted fields"," "]})]}):""}),(0,Z.jsxs)("div",{className:"group mb-3 customCard",children:[(0,Z.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,Z.jsx)("h2",{children:"Search Filters"}),(0,Z.jsx)("div",{onClick:function(){Ne(!ve),ge(ve?p.UdN:p.NR5)},children:(0,Z.jsx)("span",{children:fe})})]}),(0,Z.jsx)(h.V9,{visible:!ve,children:(0,Z.jsxs)("div",{className:"group-content row",children:[(0,Z.jsx)("div",{className:" col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Customers",children:["Customers\xa0",(0,Z.jsx)("span",{className:"col-1 p-0 error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){re.current[0]=e},children:(0,Z.jsx)(Y.NU,{ArrowRenderer:Me,valueRenderer:Re,id:"customers",options:S,hasSelectAll:!0,value:C,shouldToggleOnHover:!1,selected:C,onChange:function(e){R(e);var s=[];e.forEach((function(e){s.push(e.value)})),console.log(s.length),ie((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"customers",s.toString()))})),console.log(null===oe||void 0===oe?void 0:oe.customers)}})})]})}),(0,Z.jsx)("div",{className:"col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"csl",children:["CSL\xa0",(0,Z.jsx)("span",{className:"col-1 p-0 error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){re.current[1]=e},children:(0,Z.jsx)(Y.NU,{ArrowRenderer:Me,valueRenderer:Re,id:"csl",options:w,hasSelectAll:!0,value:U,shouldToggleOnHover:!1,disableSearch:!1,selected:U,disabled:!1,onChange:function(e){F(e);var s=[];e.forEach((function(e){s.push(e.value)})),ie((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"csl",s.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:"col-md-4 mb-2",children:(0,Z.jsxs)("div",{className:"form-group row",children:[(0,Z.jsxs)("label",{className:"col-5",htmlFor:"Dp",children:["DP\xa0",(0,Z.jsx)("span",{className:"col-1 p-0 error-text",children:"*"})]}),(0,Z.jsx)("span",{className:"col-1",children:":"}),(0,Z.jsx)("div",{className:"col-6 multiselect",ref:function(e){re.current[2]=e},children:(0,Z.jsx)(Y.NU,{ArrowRenderer:Me,valueRenderer:Re,id:"Dp",options:O,hasSelectAll:!0,value:V,shouldToggleOnHover:!1,disableSearch:!1,selected:V,disabled:!1,onChange:function(e){q(e);var s=[];e.forEach((function(e){s.push(e.value)})),ie((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"Dp",s.toString()))}))}})})]})}),(0,Z.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 mt-2 btn-container center ",children:(0,Z.jsxs)("button",{type:"submit",className:"btn btn-primary",title:"Search",onClick:function(){var e,s,t,a=(0,M.Z)(re);1==a&&me(!0),a||(ae(!0),c()({method:"post",url:x+"/administrationms/getEngagementDetails?customers=".concat((null===(e=oe.customers)||void 0===e?void 0:e.length)>2304||void 0==oe.customers?-1:oe.customers,"&csl=").concat((null===(s=oe.csl)||void 0===s?void 0:s.length)>217||void 0==oe.csl?-1:oe.csl,"&Dp=").concat((null===(t=oe.Dp)||void 0===t?void 0:t.length)>248||void 0==oe.Dp?-1:oe.Dp)}).then((function(e){var s=e.data;j([{customer:"Customer","Engagement Name":"Engagement Name","Engagement Company":"Engagement Company","Sales Executive":"Sales Executive",CSL:"CSL",DP:" DP","Start Date":"Start Date","End Date":"End Date"}].concat(s)),setTimeout((function(){ae(!1),W(!0),me(!1)}),1e3)})))},children:[(0,Z.jsx)(p.U41,{}),"Search"]})})]})})]}),"\xa0",te?(0,Z.jsx)(I.Z,{handleAbort:function(){Se.current&&Se.current.abort(),ae(!1)}}):"",Q?(0,Z.jsx)(ee,{data:g,headerData:r,setHeaderData:u}):" "]})};var te=function(e){var s,t=e.data,l=e.rows,i=(e.col,e.headerdatagroup,e.linkColumns),r=e.linkColumnsRoutes,c=e.rowGroupMode,d=e.groupRowsBy,u=(0,n.useState)([]),m=(0,a.Z)(u,2),h=m[0],p=m[1],f=(0,n.useState)([]),g=(0,a.Z)(f,2),j=g[0],x=g[1],v=(0,n.useState)([]),N=(0,a.Z)(v,2),y=N[0],b=N[1];(0,n.useEffect)((function(){p(JSON.parse(JSON.stringify(t)))}),[t]),(0,n.useEffect)((function(){h.length>0&&(x(h[0]),b(h.splice(1)))}),[h]);var _={contains:{value:null,matchMode:K.a6.CONTAINS}},C=(0,n.useState)({global:_.contains}),D=(0,a.Z)(C,2),R=D[0],M=D[1];(0,n.useEffect)((function(){M({global:_.contains})}),[j]);var k=(0,n.useState)(""),P=(0,a.Z)(k,2),w=P[0],T=P[1],E=function(e){var s=e.target.value,t=(0,o.Z)({},R);console.log(t),console.log(t),t.global.value=s,M(t),T(s)},A=function(e){var s;console.log(e);var t=null===(s=r[0])||void 0===s?void 0:s.split(":");return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(Q.rU,{target:"_blank",to:t[0]+":"+e[t[1]],children:e[i]})})},I=function(e){return(0,Z.jsx)("div",{className:"ellipsis",title:e.screenName,children:e.screenName})},U=(0,Z.jsxs)("div",{className:"flex justify-content-between",children:[(0,Z.jsx)("span",{}),(0,Z.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,Z.jsx)("i",{className:"pi pi-search"}),(0,Z.jsx)(X.o,{defaultValue:w,onChange:E,placeholder:"Keyword Search"})]})]}),F=null===(s=Object.keys(j))||void 0===s?void 0:s.map((function(e,s){return console.log(e),(0,Z.jsx)(S.s,{sortable:!0,style:"S.No"===e?{width:"5%",textAlign:"center"}:{},body:null!==i&&void 0!==i&&i.includes(e)?A:"screenName"===e&&I,field:e,header:j[e]},e)}));return(0,Z.jsx)("div",{children:(0,Z.jsx)("div",{className:"card col-6",children:Object.keys(j).length>0&&(0,Z.jsx)(L.w,{rowsPerPageOptions:[10,20,30],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",value:y,paginator:!0,showGridlines:!0,rows:l,dataKey:"id",filters:R,responsiveLayout:"scroll",header:U,emptyMessage:"No Records found.",className:"customerEngament primeReactDataTable",rowGroupMode:c,groupRowsBy:d,children:F})})})};var ae=function(){var e=(0,n.useState)([{}]),s=(0,a.Z)(e,2),t=s[0],l=s[1],o=(0,n.useState)(!1),i=(0,a.Z)(o,2),r=i[0],u=i[1],m=(0,n.useState)({id:"",displayName:""}),g=(0,a.Z)(m,2),j=(g[0],g[1]),N=(0,n.useState)(!1),S=(0,a.Z)(N,2),_=S[0],C=S[1],R=d.N.baseUrl,k=localStorage.getItem("resId"),P=(0,n.useState)([]),w=(0,a.Z)(P,2),T=w[0],E=w[1],A=function(){c().get(R+"/administrationms/tracker/getTrackerScreens").then((function(e){var s=e.data;s.forEach((function(e,s){e["S.No"]=s+1,e.id=s})),console.log("in line 32--------"),console.log(s);l([{"S.No":"S.No",screenName:"Screen Names"}].concat(s)),console.log(t)})).catch((function(e){console.log("Error :"+e)}))};(0,n.useEffect)((function(){A(),I()}),[]);var I=function(){c()({method:"GET",url:R+"/CommonMS/master/getMenus?loggedUserId=".concat(k)}).then((function(e){e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Roles Permissions"!==e.display_name&&"Sales Permissions"!==e.display_name&&"Jobs Daily Status"!==e.display_name&&"Error Logs"!==e.display_name&&27!=e.id&&"Tracker"!==e.display_name&&"Role Costs"!==e.display_name&&"Upload Role Costs"!==e.display_name&&"Contract Documents"!==e.display_name}))),e})).forEach((function(e){"Administration"===e.display_name&&E([e])}))}))};return console.log(t),(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{className:"col-md-12",children:[_?(0,Z.jsx)("div",{className:"statusMsg success",children:(0,Z.jsxs)("span",{className:"errMsg",children:[(0,Z.jsx)(x.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," \xa0 Tracker screen added successfully"]})}):"",(0,Z.jsxs)("div",{className:"pageTitle",children:[(0,Z.jsx)("div",{className:"childOne"}),(0,Z.jsx)("div",{className:"childTwo",children:(0,Z.jsx)("h2",{children:"Tracker Screen Adder"})}),(0,Z.jsx)("div",{className:"childThree"})]})]}),(0,Z.jsx)(D.Z,{routes:T,currentScreenName:["Hammer Tool","Tracker Screen Adder"]}),"\xa0",(0,Z.jsx)(te,{data:t,rows:20}),(0,Z.jsx)("div",{className:"col-md-6 my-3 btn-container center",children:(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){u(!0)},children:[" ",(0,Z.jsx)(f.LkC,{}),"Add"]})}),r?(0,Z.jsx)(U,{getData:A,buttonPopup:r,setButtonPopup:u,setSuccessMessage:C}):""]});function U(e){var s=(0,n.useState)([{}]),t=(0,a.Z)(s,2),l=t[0],o=t[1],i=e.buttonPopup,r=(e.setButtonpopup,e.setSuccessMessage),d=e.getData,m=(0,n.useState)([]),f=(0,a.Z)(m,2),g=f[0],x=f[1],N=(0,n.useState)(""),S=(0,a.Z)(N,2),_=S[0],C=S[1];(0,n.useEffect)((function(){c().get(R+"/administrationms/tracker/getTrackerScreensAdder").then((function(e){for(var s=e.data,t=0;t<s.length;t++)s[t].id=t+1;console.log(s),o([{display_name:"Screen Names"}].concat(s)),console.log("inline ----------------------"),console.log(l)})).catch((function(e){console.log("Error :"+e)}))}),[]);console.log(g);var D=(0,n.useRef)([]);return(0,Z.jsx)("div",{className:"col-md-12",children:(0,Z.jsxs)(h.Tk,{alignment:"center",visible:i,onClose:function(){return u(!1)},size:"xs",className:" ui-dialog",backdrop:"static",children:[(0,Z.jsx)(h.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,Z.jsx)(h.fl,{children:(0,Z.jsx)("span",{className:"ft16",children:"List of Screens"})})}),_,(0,Z.jsx)(h.sD,{children:(0,Z.jsx)(y.Z,{data:l,rows:[10],value:"trackerscreensadder",checkedData:g,setCheckedData:x})}),(0,Z.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){console.log(D),console.log(g);var e=(0,M.Z)(D);if(console.log(e),0!=g.length){C("");for(var s=[],t=0;t<g.length;t++){var a={};a.id=g[t].scrnId,a.displayName=g[t].display_name,s.push(a)}c()({method:"post",url:R+"/administrationms/tracker/insertUserActions",data:s}).then((function(e){var s=e.data;j(s),console.log(s),u(!1),r(!0),d(),setTimeout((function(){r(!1)}),3e3)}))}else C((0,Z.jsxs)("div",{className:" ml-3 mr-4 statusMsg error",children:[(0,Z.jsx)(v.CSE,{})," Please select atleast one Tracker Screen"]}))},children:[" ",(0,Z.jsx)(p.TvB,{})," Confirm"," "]}),(0,Z.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){u(!1)},children:[" ",(0,Z.jsx)(b.sQZ,{}),"Cancel"," "]})]})]})})}};var ne=function(){var e=d.N.baseUrl,s=localStorage.getItem("resId"),t=(0,n.useState)([]),l=(0,a.Z)(t,2),o=l[0],i=l[1],r=(0,n.useState)([]),u=(0,a.Z)(r,2),m=u[0],h=u[1],p=(0,n.useState)(908==m||m!=[]?"Add User Role":"Update Billing Rate"),f=(0,a.Z)(p,2),g=f[0],j=f[1];return console.log(m),(0,n.useEffect)((function(){c().get(e+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(s,"&Cont=HTool")).then((function(t){var a=t.data;console.log(a.filter((function(e){return"Add User Role"!=e.display_name}))),c()({method:"GET",url:e+"/CommonMS/master/getMenus?loggedUserId=".concat(s)}).then((function(e){var s=e.data.find((function(e){return"Administration"===e.display_name}));console.log(null===s||void 0===s?void 0:s.userRoles);var t=null!==s&&void 0!==s&&s.userRoles.includes("908")?908:null;console.log(t),h(t),i(908==t?a:a.filter((function(e){return"Add User Role"!=e.display_name})))}))}))}),[m]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"tabs",children:o.map((function(e,s){return(0,Z.jsx)("button",{className:g===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){j(e.display_name)},children:e.display_name},s)}))}),908==m&&"Add User Role"===g&&(0,Z.jsx)(R,{}),"Update Billing Rate"===g&&(0,Z.jsx)(T,{}),"Update Task Status"===g&&(0,Z.jsx)(E,{}),"Timesheet"===g&&(0,Z.jsx)(O,{}),"Update Billing Status"===g&&(0,Z.jsx)(G,{}),"GMA Report"===g&&(0,Z.jsx)(V,{}),"Projector AES"===g&&(0,Z.jsx)($,{}),"Enagagement Details"===g&&(0,Z.jsx)(se,{}),"Tracker Screens Adder"===g&&(0,Z.jsx)(ae,{})]})}},24205:function(e,s,t){var a=t(4942),n=t(1413),l=t(29439),o=t(72791),i=t(63521),r=t(80184);s.Z=function(e){var s=e.riskDetails,t=e.getData,c=e.setFormData,d=(e.editedData,e.formEditData),u=e.onChangeHandler,m=e.refArr,h=(e.setUsername,e.name),p=e.id,f=e.value,g=e.onClear,j=e.inputSearchString,x=(0,o.useState)([]),v=(0,l.Z)(x,2),N=v[0];return v[1],(0,o.useEffect)((function(){}),[N]),(0,o.useEffect)((function(){}),[s]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"autoComplete-container",children:"UpdateBillingRate"==f?(0,r.jsx)(i.ReactSearchAutocomplete,{items:s,type:"Text",name:h,inputSearchString:null===d||void 0===d?void 0:d.assigned_to,id:p,className:"err",riskDetails:s,getData:t,onClear:g,placeholder:"Type minimum 3 characters",onChange:function(e){u(e),console.log("789------------------------")},onSelect:function(e){c((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,a.Z)({},h,e.id))})),c((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,a.Z)({},"Resname",e.name))}))},showIcon:!1}):"EngagementS"==f?(0,r.jsx)(i.ReactSearchAutocomplete,{items:s,type:"Text",name:h,inputSearchString:null===d||void 0===d?void 0:d.assigned_to,id:p,className:"err",riskDetails:s,getData:t,onClear:function(e){c((function(e){return(0,n.Z)((0,n.Z)({},e),{},(0,a.Z)({},h,""))})),console.log(h)},placeholder:"Type minimum 3 characters",onChange:function(e){u(e)},onSelect:function(e){c((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,a.Z)({},h,e.id))}))},showIcon:!1,showNoResults:!0,showNoResultsText:"<<ALL>>"}):(0,r.jsx)("div",{className:"auto autocomplete",id:"auto",ref:function(e){void 0!=m&&(m.current[0]=e)},children:(0,r.jsx)(i.ReactSearchAutocomplete,{items:s,type:"Text",name:h,placeholder:"Type minimum 3 characters",inputSearchString:j,id:p,className:"err",onClear:g,riskDetails:s,getData:t,onChange:function(e){u(e),console.log("123---------------")},onSelect:function(e){c((function(s){return(0,n.Z)((0,n.Z)({},s),{},(0,a.Z)({},h,e.id))}))},showIcon:!1})})}),(0,r.jsx)("span",{children:N.name})]})}}}]);
//# sourceMappingURL=5259.e97f1fb8.chunk.js.map