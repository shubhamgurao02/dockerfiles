"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4460],{45810:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(4942),a=r(1413),o=r(93433),l=r(29439),i=r(74569),s=r.n(i),c=r(72426),u=r.n(c),d=r(1063),m=r(72791),v=r(47477),f=r(11683),h=(r(49177),r(34911),r(56637),r(53824),r(48462),r(59170),r(78983)),p=r(83854),g=(r(66770),r(25415),r(80184));function N(e){var t=e.reportIdNw,r=e.reportsData,i=(0,m.useState)([]),s=(0,l.Z)(i,2),c=s[0],u=s[1],d=(0,m.useState)(null),v=(0,l.Z)(d,2),h=v[0],p=v[1],N=(0,m.useState)({}),j=(0,l.Z)(N,2),x=(j[0],j[1],(0,m.useState)(!1)),y=(0,l.Z)(x,2),F=(y[0],y[1],(0,m.useState)([])),b=(0,l.Z)(F,2),S=(b[0],b[1]),D=(0,m.useState)(!1),Z=(0,l.Z)(D,2),M=(Z[0],Z[1],(0,m.useState)(!1)),k=(0,l.Z)(M,2),w=(k[0],k[1],(0,m.useState)([])),P=(0,l.Z)(w,2),T=(P[0],P[1],(0,m.useState)(!1)),C=(0,l.Z)(T,2),_=(C[0],C[1],(0,m.useState)(!1)),I=(0,l.Z)(_,2),E=(I[0],I[1],(0,m.useState)([])),O=(0,l.Z)(E,2),A=(O[0],O[1],(0,m.useState)(!1)),H=(0,l.Z)(A,2),R=(H[0],H[1],(0,m.useState)([])),V=(0,l.Z)(R,2);V[0],V[1],(0,m.useRef)(null);console.log(r,"reportsData"),console.log(t,"reportIdNw"),(0,m.useEffect)((function(){12==t?Y():25==t&&L()}),[r.tableData]);var Y=function(){var e,t,n,a,o,i,s,c,d,m=null===r||void 0===r?void 0:r.tableData;(null===(t=m=null===(e=m)||void 0===e?void 0:e.slice(1))||void 0===t?void 0:t.length)>0&&(m[0].hours="Hours"),console.log(m,"tableData");var v,f=null;null!==r&&void 0!==r&&null!==(n=r.columns)&&void 0!==n&&n.includes("'")?f=null===r||void 0===r||null===(v=r.columns)||void 0===v?void 0:v.replaceAll("'",""):f=null===r||void 0===r?void 0:r.columns;var h=null===(a=f)||void 0===a?void 0:a.split(",");null===h||void 0===h||h.push("hours"),console.log(h,"colArr");for(var N=[],j={},x=0;x<(null===h||void 0===h?void 0:h.length);x++){var y=h[x].trim(),F=m[0];j[y]=F[y]}console.log(j,"obj");var b=Object.entries(j);console.log(b,"headerArra");var D=["allocHrs","aprvHrs","leaveHrs","Approved-Hours","variance","reportedHrs"],Z=b.filter((function(e){return!D.includes(e[0])}));console.log("in line 69----"),S(Z);var M=null===(o=m)||void 0===o?void 0:o.filter((function(e){return-1==e.level}));console.log(M,"---------minusonerow"),console.log(Z,"filteredHeaders"),Z.map((function(e,t){var r=(0,l.Z)(e,2),n=r[0],a=r[1];N.push({id:n,accessorKey:n,header:a,enableColumnActions:!1,enableHiding:!0,Header:function(e){e.column;return(0,g.jsx)("div",{className:"",children:a})}})})),console.log(N,"newHeaders");var k=M&&Object.entries(M[0]);null===(i=k)||void 0===i||i.sort();var w=["id","level","uniqueId","parent"];k=null===(s=k)||void 0===s?void 0:s.filter((function(e){return!w.includes(e[0])})),console.log(k,"subHeaders"),N.map((function(e){var t,r=N.indexOf(e);console.log(r,"isahid");var n=[];null===(t=k)||void 0===t||t.map((function(t,a){var o=(0,l.Z)(t,2),i=o[0],s=o[1];if("allocHrs"==i||"aprvHrs"==i||"leaveHrs"==i||"variance"==i){if("hours"==e.accessorKey){var c={id:i,header:null==s||0==s?"":(0,g.jsx)("div",{className:"",children:s}),accessorKey:i,Cell:function(e){var t=e.cell;return(0,g.jsx)("div",{className:"",children:t.getValue()})}};n.push(c),console.log(n,"subArry"),N[r].columns=n}}else if(i==e.accessorKey){var u={id:i,header:"-"==s||null==s?"":(0,g.jsx)("div",{children:s}),accessorKey:i,Cell:function(e){var t=e.cell;return(0,g.jsx)("div",{className:"",children:t.getValue()})}};N[r].columns=[u]}}))})),p(N);var P=[];null===(c=m)||void 0===c||c.findIndex((function(e){return"-1"===e.level}));null===(d=m)||void 0===d||d.map((function(e){return-2!=e.level&&-3!=e.level?P.push(e):""})),console.log(P,"-------values");var T=W(P,{children:"subRows"});u(T.slice(1,T.length)),console.log(W(P,{children:"subRows"}),"nodes")},W=function(e,t){t=(0,a.Z)({id:"id",parentId:"parent",children:"subRows"},t);var r={},l=[],i=t.children;return e.forEach((function(e){var o=e[t.id],l=e[t.parentId];r[o]=(0,a.Z)((0,a.Z)((0,n.Z)({},i,[]),e),r[o]),r[l]=r[l]||(0,n.Z)({},i,[]),r[l][i].push(r[o])})),Object.values(r).forEach((function(e){"undefined"===typeof e[t.id]&&l.push.apply(l,(0,o.Z)(e[i]))})),l},L=function(){var e,t,n,a=r.tableData;console.log(a,"tableData");var i,s=null;null!==r&&void 0!==r&&null!==(e=r.columns)&&void 0!==e&&e.includes("'")?s=null===r||void 0===r||null===(i=r.columns)||void 0===i?void 0:i.replaceAll("'",""):s=null===r||void 0===r?void 0:r.columns;var c=null===(t=s)||void 0===t?void 0:t.split(","),d=null;void 0!=c&&(d=(0,o.Z)(c)),console.log(d,"colArr");for(var m=[],v={},f=0;f<(null===(h=d)||void 0===h?void 0:h.length);f++){var h,N=d[f].trim(),j=a[0];v[N]=j[N]}var x=Object.entries(v),y=["project_id","resource_id","lvl","project_rowspan","contract_term_rowspan","resource_rowspan","country_rowspan"],F=x.filter((function(e){return!y.includes(e[0])}));console.log(F,"filteredHeaders"),S(F);var b=/^[0-9]+$/,D=null===a||void 0===a?void 0:a.filter((function(e){return"0"==e.lvl}));console.log(D,"Csahid"),F.map((function(e,t){var r=(0,l.Z)(e,2),n=r[0],a=r[1];b.test(a);m.push({accessorKey:n,header:a,enableColumnActions:!1,enableHiding:!0,Header:function(e){e.column;return(0,g.jsx)("div",{children:a})}})}));var Z=D&&(null===(n=Object.entries(D[0]))||void 0===n?void 0:n.filter((function(e){return!(null!==y&&void 0!==y&&y.includes(e[0]))})));m.map((function(e){var t=m.indexOf(e);Z.map((function(r,n){var a=(0,l.Z)(r,2),o=a[0],i=a[1];if(o==e.accessorKey){var s={id:o,header:(0,g.jsx)("div",{className:"",children:"-"==i?"":i}),accessorKey:o,Cell:function(e){var t=e.cell;return(0,g.jsx)("div",{children:null!=t.getValue()&&"leave"==t.getValue().split("_")[1]||"overalloc"==t.getValue().split("_")[1]?(0,g.jsx)("span",{className:"pink align right datesColumn",title:t.getValue().split("_")[0],children:t.getValue().split("_")[0]}):"0_holday"==t.getValue()||"0.00_holday"==t.getValue()?(0,g.jsx)("span",{className:"blue align right datesColumn",title:t.getValue().split("_")[0],children:t.getValue().split("_")[0]}):t.getValue().includes("_w")?(0,g.jsx)("span",{className:"disabledDatesColumn datesColumn",title:t.getValue(),children:""}):"Total"==t.column.id?(0,g.jsxs)("div",{class:"align right ",title:t.getValue(),children:[" ",t.getValue()]}):"country"==t.column.id||"dept_name"==t.column.id||"measure_name"==t.column.id||"project_name"==t.column.id||"contract_term"==t.column.id||"resource_name"==t.column.id?(0,g.jsxs)("div",{class:"align left ",title:t.getValue(),children:[" ","-"==t.getValue()?"":t.getValue()]}):(0,g.jsxs)("div",{class:"align right datesColumn",title:t.getValue(),children:[" ",t.getValue()]})})}};m[t].columns=[s]}}))})),console.log(m,"newHeaders"),p(m);var M=null===a||void 0===a?void 0:a.filter((function(e){return"-1"!==e.lvl&&"0"!==e.lvl}));u(M)};return(0,g.jsx)("div",{children:(0,g.jsx)("div",{className:"materialReactExpandableTable  darkHeader",children:null!==h&&void 0!==h&&h.length?(0,g.jsx)(f.ZP,{columns:h,data:c,enableExpandAll:!0,enableExpanding:!0,enablePagination:!1,enableBottomToolbar:!1,enableTopToolbar:!0,enableColumnActions:!1,enableSorting:!1,defaultColumn:{minSize:40,maxSize:1e3,size:40},muiTableBodyProps:{sx:{"&":{borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc"},"& td":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",fontSize:"12px"},"& td:nth-of-type(2)":{minWidth:"280px",maxWidth:"280px"},"& tr:first-of-type td":{background:"#f5d5a7 "}}},muiTableHeadProps:{sx:{"& th":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",background:"#f4f4f4 ",fontSize:"12px"},"& th:nth-of-type(2)":{minWidth:"280px",maxWidth:"280px"}}}}):null})})}var j=r(34831),x=r(4560),y=r(7792),F=r(71652),b=r(94950),S=r(749),D=r(32125),Z=r(7692),M=r(56355),k=r(63521);var w=function(e){var t,r=window.location.href,i=localStorage.getItem("resId"),c=(0,m.useState)({}),f=(0,l.Z)(c,2),w=(f[0],f[1]),P=(0,m.useState)({}),T=(0,l.Z)(P,2),C=(T[0],T[1],(0,m.useState)([])),_=(0,l.Z)(C,2),I=_[0],E=_[1],O=(0,m.useState)(!1),A=(0,l.Z)(O,2),H=A[0],R=A[1],V=(0,m.useState)(!1),Y=(0,l.Z)(V,2),W=(Y[0],Y[1],(0,m.useState)([])),L=(0,l.Z)(W,2),J=L[0],K=L[1],B=(0,m.useState)(0),U=(0,l.Z)(B,2),z=U[0],$=U[1],G=(0,m.useState)([]),q=(0,l.Z)(G,2),X=q[0],Q=q[1],ee=(0,m.useState)(null),te=(0,l.Z)(ee,2),re=te[0],ne=te[1],ae=(0,m.useState)(null),oe=(0,l.Z)(ae,2),le=oe[0],ie=oe[1],se=j.N.baseUrl,ce=(0,m.useState)({}),ue=(0,l.Z)(ce,2),de=ue[0],me=ue[1],ve=(0,m.useState)(null),fe=(0,l.Z)(ve,2),he=fe[0],pe=fe[1],ge=(0,m.useState)(!1),Ne=(0,l.Z)(ge,2),je=Ne[0],xe=Ne[1],ye=(0,m.useState)(!1),Fe=(0,l.Z)(ye,2),be=Fe[0],Se=Fe[1],De=(0,m.useState)(M.UdN),Ze=(0,l.Z)(De,2),Me=Ze[0],ke=Ze[1],we=(0,m.useRef)([]),Pe=(0,m.useRef)([]),Te=(0,m.useState)([]),Ce=(0,l.Z)(Te,2),_e=Ce[0],Ie=Ce[1],Ee=(0,m.useState)([]),Oe=(0,l.Z)(Ee,2),Ae=Oe[0],He=Oe[1],Re=(0,m.useState)(!1),Ve=(0,l.Z)(Re,2),Ye=Ve[0],We=Ve[1],Le=(0,m.useState)(!1),Je=(0,l.Z)(Le,2),Ke=Je[0],Be=Je[1],Ue=(0,m.useState)([!0,!1]),ze=(0,l.Z)(Ue,2),$e=ze[0],Ge=ze[1],qe=(0,m.useState)(null),Xe=(0,l.Z)(qe,2),Qe=Xe[0],et=Xe[1],tt=(0,m.useState)(null),rt=(0,l.Z)(tt,2),nt=rt[0],at=rt[1],ot=(0,m.useState)(!1),lt=(0,l.Z)(ot,2),it=lt[0],st=lt[1],ct=(0,m.useState)([]),ut=(0,l.Z)(ct,2),dt=ut[0],mt=ut[1],vt=(0,m.useState)([]),ft=(0,l.Z)(vt,2),ht=ft[0],pt=ft[1],gt=(0,m.useState)(!1),Nt=(0,l.Z)(gt,2),jt=Nt[0],xt=Nt[1],yt=(0,m.useState)(!1),Ft=(0,l.Z)(yt,2),bt=Ft[0],St=Ft[1],Dt=(0,m.useState)(!1),Zt=(0,l.Z)(Dt,2),Mt=Zt[0],kt=Zt[1],wt=(0,m.useState)(!1),Pt=(0,l.Z)(wt,2),Tt=Pt[0],Ct=Pt[1],_t=(0,m.useState)(""),It=(0,l.Z)(_t,2),Et=It[0],Ot=It[1],At=(0,m.useRef)(null);(0,m.useEffect)((function(){_e[0]&&E(JSON.parse(JSON.stringify(_e[0])))}),[_e]),(0,m.useEffect)((function(){Ht();var e=r.split("/");$(e[e.length-1])}),[]),(0,m.useEffect)((function(){14==z&&qt()}),[z]),(0,m.useEffect)((function(){K(["XLS","PDF"])}),[]);var Ht=function(){s()({method:"get",url:se+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data,r=[].concat((0,o.Z)(t),[{employee_number:"",id:"-1",name:"<<ALL>>",userId:""}]);mt(r),pt(t)}))};(0,m.useEffect)((function(){0!=z&&(s()({method:"get",url:se+"/reportms/report/getReportName?reportId=".concat(z)}).then((function(e){var t=e.data;pe(t)})).catch((function(e){})),Rt(),xe(!0))}),[z]);var Rt=function(){s()({method:"post",url:se+"/reportms/report/getfiltersData",data:{notifyReportId:z,userId:i}}).then((function(e){xe(!1);var t=e.data;Q(t)}))};(0,m.useEffect)((function(){Vt(),Gt()}),[X,dt,he,ht]),(0,m.useEffect)((function(){25==z&&(Vt(),Gt())}),[jt,de.resourcebu]),(0,m.useEffect)((function(){21!=z&&25!=z&&9!=z&&16!=z||(Vt(),Gt())}),[bt,Mt,Tt]);var Vt=function(){for(var e=0;e<X.length;e++){var t=X[e].filterType,r=X[e].values,n=[];if(null!=r)for(var a=0;a<r.length;a++){var o={};o.code=r[a][0],o.name=r[a][1],n.push(o)}X[e].FName;switch(t){case"Date Picker":de[X[e].FName]=void 0==de[X[e].FName]?""+u()().format("yyyy-MM-DD"):u()(de[X[e].FName]).format("yyyy-MM-DD");break;case"Month Picker":de[X[e].FName]=25==z?void 0==de[X[e].FName]?"":u()(de[X[e].FName]).format("MMMM yyyy"):void 0==de[X[e].FName]?""+u()().format("MMMM yyyy"):u()(de[X[e].FName]).format("MMMM yyyy");break;case"Radio":de[X[e].FName]=void 0==de[X[e].FName]?"date":de[X[e].FName];break;case"Multi Dropdown":var l=[],i=X[e].values;if(null!=i){for(var s=0;s<i.length;s++){var c={};c.code=i[s][0],c.name=i[s][1],l.push(c)}de[X[e].FName]=void 0==de[X[e].FName]?""!=l?l:"":de[X[e].FName]}break;case"AutoComplete":var d=de[X[e].FName],m=dt[dt.length-1];de[X[e].FName]=void 0==de[X[e].FName]?m:d;break;case"Drop Down":32==z&&"source"==X[e].FName?de[X[e].FName]=void 0==de[X[e].FName]?n.length>0&&n.map((function(e){return e.label})).toString():de[X[e].FName].toString():de[X[e].FName]=void 0==de[X[e].FName]?"":de[X[e].FName].toString()}}},Yt=function(e,t,r){if(32==z&&"source"==t.FName){var o=JSON.parse(JSON.stringify(r)).filter((function(t){return t.value==e.target.value})),l=null;l=0==o.length?JSON.parse(JSON.stringify(r)).map((function(e){return e.label})).toString():o[0].label,me((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.FName,l))}))}else 12==z?(238==e.target.value?(X[0].FilterName="From Month",X[0].filterType="Month Picker",X[1].FilterName="To Month",X[1].filterType="Month Picker"):239==e.target.value?(X[0].FilterName="From Week",X[0].filterType="Date Picker",X[1].FilterName="To Week",X[1].filterType="Date Picker"):240==e.target.value&&(X[0].FilterName="From Date",X[0].filterType="Date Picker",X[1].FilterName="To Date",X[1].filterType="Date Picker"),me((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},t.FName,e.target.value))})),Gt()):25==z?de[t.FName]=e.target.value:me((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},t.FName,e.target.value))}))},Wt=function(e,t){var r=e.target.value,o=$e;"date"==r?(o[0]=!0,o[1]=!1,Ge(o),X[0].FilterName="From Date",X[0].filterType="Date Picker",X[1].FilterName="To Date",X[1].filterType="Date Picker",me((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.FName,r))}))):(o[0]=!1,o[1]=!0,X[0].FilterName="From Month",X[0].filterType="Month Picker",X[1].FilterName="To Month",X[1].filterType="Month Picker",Ge(o),me((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.FName,r))}))),Gt()};(0,m.useEffect)((function(){var e=[];if(null!=Qe){for(var t=0;t<Qe.length;t++){var r=[];"contterms"==Et||"month"==Et?(r[0]=Qe[t].id,r[1]=Qe[t].full_name):"customerprj"==Et?(r[0]=Qe[t].id,r[1]=Qe[t].project_name):"projectrpt"!=Et&&"department"!=Et&&"customer"!=Et&&"project"!=Et||(r[0]=Qe[t].value,r[1]=Qe[t].text),e.push(r)}if(console.log(e,"optionsArr"),"month"==Et||"contterms"==Et?X[2].values=e:"customerprj"==Et||"department"==Et?9==z?X[5].values=e:X[3].values=e:"projectrpt"==Et?X[6].values=e:"customer"==Et?X[2].values=e:"project"==Et&&(X[4].values=e),25==z&&"projectrpt"==Et){var n=e,a=[];if(null!=n){for(var o=0;o<n.length;o++){var l={};l.code=n[o][0],l.name=n[o][1],a.push(l)}de.resourcebu=a}}Gt()}}),[Qe]),(0,m.useEffect)((function(){var e=[];if(null!=nt){for(var t=0;t<nt.length;t++){var r=[];r[0]=nt[t].value,r[1]=nt[t].text,e.push(r)}console.log(e,"optionsArrNew"),X[2].values=e,Gt()}}),[nt]);var Lt,Jt,Kt=function(e){Ot(e);var t=JSON.parse(JSON.stringify(de));Object.keys(t).forEach((function(e){var r;if(["contterms","projectrpt","department","customer","project"].includes(e))""!=t[e]&&(t[e]=null===(r=t[e])||void 0===r?void 0:r.map((function(e){return e.code})).toString());else if(["month"].includes(e)){var n=new Date("".concat(t.month," 1"));if(!isNaN(n.getTime())){var a=n.getFullYear(),o=(n.getMonth()+1).toString().padStart(2,"0"),l=new Date(a,n.getMonth()+1,0).getDate(),i="".concat(a,"-").concat(o,"-").concat(l.toString().padStart(2,"0"));t[e]=i}}})),t.userId=i,t.type=e,"month"==e||"contterms"==e?s()({method:"get",url:se+"/reportms/report/getCustOnContTermsMonthFilter?conttermID=".concat(t.contterms,"&plannedEndDt=").concat(t.month)}).then((function(e){var t=e.data;console.log(t,"rDatasahid"),et(t)})).catch((function(e){return console.log(e)})):"customerprj"==e?s()({method:"get",url:se+"/reportms/report/getProjectsByContTermsMonthCustomer?conttermID=".concat(t.contterms,"&plannedEndDt=").concat(t.month,"&custId=").concat(t.customerprj)}).then((function(e){var t=e.data;console.log(t,"responsecust"),et(t)})).catch((function(e){return console.log(e)})):"projectrpt"==e?s()({method:"get",url:se+"/reportms/report/getResourceBusinessUnits?projs=".concat(t[e])}).then((function(e){var t=e.data;console.log(t,"responsecust"),et(t)})).catch((function(e){return console.log(e)})):"project"==e?s()({method:"get",url:se+"/reportms/report/getUserProjectRes?userId=".concat(t.userId,"&prjIds=").concat(t[e])}).then((function(e){var t=e.data;console.log(t,"responsecust"),et(t)})).catch((function(e){return console.log(e)})):"department"!=e&&"customer"!=e||("customer"!=e&&s()({method:"get",url:se+"/reportms/report/getCustomers?userId=".concat(t.userId,"&deptIds=").concat(t.department)}).then((function(e){var t=e.data;et(t)})).catch((function(e){return console.log(e)})),("customer"==e||9==z&&"department"==e)&&(t[e]=t[e].split(","),t[e]=t[e].map((function(e){return parseInt(e)})),console.log(t[e],"tempData"),console.log(t.type,"type"),s()({method:"post",url:"http://10.11.12.149:8090/reportms/report/getProjects",data:{type:t.type,Ids:t[e],userId:null}}).then((function(e){var t=e.data;console.log(t,"responsecust"),at(t)})).catch((function(e){return console.log(e)}))))},Bt=function(e,t,r){"Date Picker"==r?me((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},t,u()(e.$d).format("yyyy-MM-DD")))})):de[t]=u()(e.$d).format("MMMM yyyy"),"frmDt"==t||"frmMonth"==t||"startMonth"==t?Lt=new Date(e):"toDt"!=t&&"toMonth"!=t&&"endMonth"!=t||(Jt=new Date(e))},Ut=new Date,zt=function(e){return function(t){if(29==z){if("startMonth"==e&&void 0!=Jt)return t>Jt;if("endMonth"==e&&void 0!=Lt)return t<Lt;if("actualsMonth"==e&&(void 0!=Jt||void 0!=Lt))return t<Lt||t>Jt}else{if(("frmDt"==e||"frmMonth"==e)&&void 0!=Jt)return t>=Jt;if(("toDt"==e||"toMonth"==e)&&void 0!=Lt){var r=Lt.getMonth()-1,n=Lt.getYear(),a=new Date(t),o=a.getMonth();return 21==z?-1==r?t<Lt&&!(a.getYear()==n-1&&11==o):t<Lt&&a.getYear()!=n||o<r&&a.getYear()==n:-1==r?t<Lt&&!(a.getYear()==n-1&&11==o)||t>Ut:t<Lt&&a.getYear()!=n||o<r&&a.getYear()==n||t>Ut}if(21!=z)return t>Ut}}},$t=function(e,t){var r=dt.slice(0,-1).filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())})),n=[].concat([{employee_number:"",id:"-1",name:"<<ALL>>",userId:""}],(0,o.Z)(r));pt(n)};(0,m.useEffect)((function(){ie((function(){return(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{align:"center",children:(0,g.jsx)("h4",{children:he})}),20==z?(0,g.jsx)("div",{className:"legendContainer",children:(0,g.jsxs)("div",{className:"legend green",children:[(0,g.jsx)("div",{className:"legendCircle"}),(0,g.jsxs)("div",{className:"legendTxt",children:[" ","Weekend"]})]})}):""]})}))}),[he]),console.log(X,"filtersDatasahid"),console.log(z,"reportId"),console.log(de,"formdata");var Gt=function e(){ne((function(){return null===X||void 0===X?void 0:X.map((function(t,r){var o,l,i=t.filterType,s=t.FilterName,c=t.values,u=[],d="";if(null!=c)for(var m=0;m<c.length;m++){var v={};v.code=c[m][0],v.name=c[m][1],u.push(v)}if(w((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t.FName,u))})),32==z&&"AutoComplete"==i){var f=de[t.FName];d=null===f||void 0===f?void 0:f.name}return(0,g.jsx)("div",{className:"col-md-3 mb-2 mb-2",children:(0,g.jsxs)("div",{className:"form-group row",children:[(0,g.jsxs)("label",{className:"col-5",htmlFor:"fromMonth",children:[t.FilterName,"BusinessUnits"!=t.FName?(0,g.jsx)("span",{className:"error-text",children:"*"}):""]}),(0,g.jsx)("span",{className:"col-1 p-0",children:":"}),(0,g.jsx)("div",{className:"col-6",children:"Date Picker"==i?(0,g.jsx)("div",{id:t.FName,className:"muidatepicker adv ".concat(t.FName," "),ref:function(e){we.current.push(e)},children:(0,g.jsx)(F._,{dateAdapter:y.y,children:(0,g.jsx)(x.C,{components:["DatePicker"],children:(0,g.jsx)(b.M,{sx:{"& > div":{},"& > div > div, & > div > div > div, & .MuiCalendarPicker-root":{},"& .MuiTypography-caption":{width:20,margin:0},"& .PrivatePickersSlideTransition-root":{minHeight:120},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0},"& .MuiPickersDay-dayWithMargin":{margin:0},"& .MuiPickersDay-root":{width:20,height:20}},format:"DD-MMM-YYYY",slotProps:{textField:{placeholder:s}},valueDefault:null,shouldDisableDate:(o=t.FName,l=s,function(e){if(l.includes("Week")){var t=new Date(e).getDay();return"frmDt"==o&&void 0!=Jt?e>=Jt||1!=t:"toDt"==o&&void 0!=Lt?e<Lt||5!=t:"frmDt"==o?1!=t:5!=t}return"frmDt"==o&&void 0!=Jt?e>=Jt:"toDt"==o&&void 0!=Lt?e<Lt:void 0}),onChange:function(e){Bt(e,t.FName,t.filterType)}})})})}):"Month Picker"==i?(0,g.jsx)("div",{className:"muidatepicker adv",ref:function(e){we.current.push(e)},children:(0,g.jsx)(F._,{dateAdapter:y.y,children:(0,g.jsx)(x.h,{children:(0,g.jsx)(b.M,{views:["year","month"],openTo:"month",sx:{"& > div":{},"& > div > div, & > div > div > div, & .MuiCalendarPicker-root":{},"& .MuiTypography-caption":{width:20,margin:0},"& .PrivatePickersSlideTransition-root":{minHeight:120},'& .PrivatePickersSlideTransition-root [role="row"]':{margin:0},"& .MuiPickersDay-dayWithMargin":{margin:0},"& .MuiPickersDay-root":{width:20,height:20}},format:"MMM YYYY",valueDefault:null,shouldDisableMonth:11!=z&&31!=z&&25!=z&&22!=z&&24!=z?zt(t.FName):"",slotProps:{textField:{placeholder:s}},onChange:function(e){var r;(Bt(e,t.FName,t.filterType),25==z)&&((null===(r=de.contterms)||void 0===r?void 0:r.length)>0&&(xt(!0),St(!0),Kt(t.FName)))}})})})}):"Drop Down"==i?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("select",{id:t.FName,className:"text",ref:function(e){we.current.push(e)},onChange:function(r){Yt(r,t,u),25==z&&"customerprj"==t.FName&&(St(!1),kt(!0),Ct(!1),""!=r.target.value&&Kt(t.FName)),e()},disabled:25==z&&0==jt,children:[(0,g.jsx)("option",{value:"",selected:bt,children:"<<Please Select>>"}),u.map((function(e,t){return(0,g.jsx)("option",{value:e.code,children:e.name},t)}))]})}):"Multi Dropdown"==i?(0,g.jsx)("div",{className:"primemultiselect",ref:function(e){we.current.push(e)},children:(0,g.jsx)(S.N,{value:21==z&&"customer"==t.FName&&1==bt||9==z&&"customer"==t.FName&&1==bt?"":9!=z&&16!=z||"project"!=t.FName||1!=Mt?16==z&&"resource"==t.FName&&1==bt||25==z&&"projectrpt"==t.FName&&1==Mt||25==z&&"resourcebu"==t.FName&&0==Tt?"":de[t.FName]:"",hasSelectAll:!0,onChange:function(r){de[t.FName]=""!=r.value?r.value:"",25==z?"contterms"==t.FName?(St(!0),"Invalid date"!=de.month&&""!=de.month&&(""!=r.value?(xt(!0),Kt(t.FName)):xt(!1))):"projectrpt"==t.FName&&(kt(!1),""!=r.value?(Ct(!0),Kt(t.FName)):Ct(!1)):21==z?"department"==t.FName&&""!=r.value&&r.value.length!=c.length?(St(!0),Kt(t.FName)):"customer"==t.FName&&St(!1):9==z?"department"==t.FName&&""!=r.value&&r.value.length!=c.length?(St(!0),kt(!0),Kt(t.FName)):"customer"==t.FName?(St(!1),""!=r.value&&r.value.length!=c.length&&(kt(!0),Kt(t.FName))):kt(!1):16==z&&("customer"==t.FName?""!=r.value&&r.value.length!=c.length&&(kt(!0),Kt(t.FName)):"project"==t.FName?(kt(!1),""!=r.value&&r.value.length!=c.length&&(St(!0),Kt(t.FName))):St(!1)),e()},options:u,optionLabel:"name",placeholder:"<<Please Select>>",maxSelectedLabels:2,disabled:25==z?""==de.customerprj&&"projectrpt"==t.FName||0==Tt&&"resourcebu"==t.FName:"",className:" w-full"})}):"Radio"==i?(0,g.jsxs)("div",{className:"radioContainer",onChange:function(e){Wt(e,t)},children:[(0,g.jsxs)("div",{className:"radioOption",children:[(0,g.jsx)("input",{checked:$e[0],type:"radio",value:"date",name:"Date"})," ","Date"]}),(0,g.jsxs)("div",{className:"radioOption",children:[(0,g.jsx)("input",{checked:$e[1],type:"radio",value:"month",name:"Month"})," ","Month"]})]}):"AutoComplete"==i?(0,g.jsx)("div",{className:"autoComplete-container react  autocomplete",ref:function(e){we.current.push(e)},children:(0,g.jsx)("div",{children:(0,g.jsx)(k.ReactSearchAutocomplete,{items:ht,id:"rNameId",name:"rNameId",type:"text",className:"err cancel nochange",inputSearchString:d,onSelect:function(e){me((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},t.FName,e))}))},fuseOptions:{minMatchCharLength:1,keys:["id","name"]},resultStringKeyName:"name",maxResults:1e3,onSearch:$t,showNoResults:!1,showClear:!1,showIcon:!1})})}):""})]})},r)}))}))},qt=function(){if(Vt(),Pe.current=we.current.filter((function(e){return null!=e})),(0,D.Z)(Pe))return st((0,g.jsxs)("div",{className:"statusMsg error",children:[(0,g.jsx)("span",{children:(0,g.jsx)(Z.I2T,{})}),"Please select the valid values for highlighted fields"]})),void setTimeout((function(){st("")}),3e3);st(""),R(!0);var e=JSON.parse(JSON.stringify(de));Object.keys(e).forEach((function(t){["department","project","BusinessUnits","projectSource","resource","country","appWFlow","expFor","expType","patWFlow","contterms","measures","projectrpt","resourcebu"].includes(t)||["customer"].includes(t)&&33!=z?e[t]=e[t].map((function(e){return e.code})).toString():["source"].includes(t)?e[t]=e[t].map((function(e){return e.name})).toString():["Resource"].includes(t)&&(e[t]=e[t].id)})),e.userId=i,e.notify_report_id=z,e.is_notification=0,We(!1),Be(!1),At.current=new AbortController,s()({method:"post",url:se+"/reportms/report/saveFilters",data:e,signal:At.current.signal}).then((function(e){var t=e.data;console.log(t,"Dataafridi");for(var r=t.tableData,n=function(){var e=r[l];Object.keys(e).forEach((function(t){[null,"null",void 0].includes(e[t])&&(e[t]="-")}))},l=0;l<r.length;l++)n();var i=[];if(20==z||9==z){var s={};Object.keys(r[0]).forEach((function(e){0==["level","children","colorLevel","isWeekend"].includes(e)&&(s[e]=e)})),i.push(s);for(var c=0;c<r.length;c++){var u=r[c].Resource,d=r[c].Project,m=r[c].Department,v=r[c]["Primary PM"],f=r[c]["Emp Id"];r[c]["Emp Id"]=u,r[c].Resource=d,r[c].Project=m,r[c].Department=v,r[c]["Primary PM"]=f}r=r.slice(1)}else if(23==z){var h=r[0];delete h["S.No"],delete h.Others,delete h["GM (True)"],delete h["Cost (True)"],delete h.Available,i.push(h),r=r.slice(2)}23!=z&&20!=z&&9!=z&&25!=z&&(r=r.slice(0,1).concat(r.slice(2)));var p=[].concat(i,(0,o.Z)(r)),g=(0,a.Z)({},t);25==z||12==z?(R(!1),Be(!0),He(g)):(null===p||void 0===p||p.forEach((function(e){Object.keys(e).forEach((function(t){if("Emp ID"!=t&&"Sl.No"!=t&&"Emp Id"!=t&&"EMP ID"!=t){var r=e[t];1==/^[0-9]*\.?[0-9]*$/.test(r)&&(r.includes(".")?e[t]=parseFloat(r):e[t]=parseInt(r))}}))})),Ie(p),We(!0))}))},Xt=function(e){var t=String(e);if(1==t.includes(".")){var r=Number(t),n=(null!=r&&(null===r||void 0===r?void 0:r.toFixed(1))).split(".");return n[0]=n[0].replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","),n.join(".")}return null!=t&&(null===t||void 0===t?void 0:t.replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","))},Qt=null===(t=Object.keys(I))||void 0===t?void 0:t.map((function(e,t){var r,n,a,o;if(20==z){if(/\d/.test(e)){var l=u()(e,"DD-MMM-YYYY").toDate().getDay();r=0===l||6===l,console.log(r,"isCurrentDateWeekend")}}return a=e,o=r,n=function(e){return(0,g.jsx)("div",{className:"number"==typeof e[a]?"numberCol":"",children:(0,g.jsx)("div",{className:1==o?"custom-column-class":"",children:(0,g.jsx)("div",{className:"ellipsis",title:"".concat(e[a]),children:"number"===typeof e[a]?Xt(e[a]):e[a]})})})},1==r&&20==z?(0,g.jsx)(d.s,{sortable:!0,field:e,body:n,header:I[e],title:"Edit",style:{background:"#f2f2f2"}},e):(0,g.jsx)(d.s,{sortable:!0,field:e,body:n,header:I[e],title:"Edit"},e)})),er=function(){At.current&&At.current.abort(),R(!1),xe(!1)};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"col-md-12 mb-3",children:(0,g.jsxs)("div",{className:"pageTitle",children:[(0,g.jsx)("div",{className:" col-md-12 childOne",children:(0,g.jsx)("h2",{})}),(0,g.jsx)("div",{className:"childTwo",children:(0,g.jsx)("h2",{children:he})}),(0,g.jsx)("div",{className:"childThree"})]})}),it,(0,g.jsxs)("div",{className:"sahid",children:[(0,g.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,g.jsx)("h2",{children:"Search Filters"}),(0,g.jsx)("div",{onClick:function(){Se(!be),ke(be?M.UdN:M.NR5)},children:(0,g.jsx)("span",{children:Me})})]}),(0,g.jsxs)("div",{className:"group-content row",children:[(0,g.jsx)(h.V9,{visible:!be,children:re}),je?(0,g.jsx)(p.Z,{handleAbort:er}):"",(0,g.jsx)("div",{className:"group-content row",children:(0,g.jsxs)("div",{className:"search f",children:[re,0==["14"].includes(z)?(0,g.jsx)("div",{className:"col-12",align:"center",children:(0,g.jsxs)("button",{className:"btn btn-primary mb-2",onClick:function(){qt()},children:[(0,g.jsx)(Z.Goc,{}),(0,g.jsx)("span",{children:"Search"})]})}):""]})})]}),H?(0,g.jsx)(p.Z,{handleAbort:er}):"",Ye?(0,g.jsx)(v.Z,{fileName:he[0],data:_e,dynamicColumns:Qt,headerData:I,setHeaderData:E,exportData:J,rows:10,reportsHeader:le,setLoader:R,reportId:z,reportName:he}):"",Ke?(0,g.jsx)(N,{reportIdNw:z,reportsData:Ae,reportsHeader:le}):""]})]})})}}}]);
//# sourceMappingURL=4460.76683807.chunk.js.map