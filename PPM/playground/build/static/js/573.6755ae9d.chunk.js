"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[573],{10573:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n=s(72791),a=s(74569),i=s.n(a),r=s(34831);s(43513);var o=s(4942),l=s(1413),c=s(29439),d=s(1063),u=s(37145),m=(s(46175),s(41310),s(81975),s(50919),s(59513)),v=s.n(m),g=s(72426),h=s.n(g),p=s(16856),x=s(78820),f=s(20860),j=s(70828),y=s(7692),N=s(80184);var b=function(){var e=(0,n.useState)([]),t=(0,c.Z)(e,2),s=t[0],a=t[1],m=(0,n.useState)([]),g=(0,c.Z)(m,2),b=(g[0],g[1]),_=(0,n.useState)(null),w=(0,c.Z)(_,2),S=w[0],Z=w[1],q=(0,n.useState)(!1),C=(0,c.Z)(q,2),k=C[0],P=C[1],T=(0,n.useState)(!1),E=(0,c.Z)(T,2),M=E[0],Q=E[1],D=(0,n.useState)([]),R=(0,c.Z)(D,2),B=R[0],F=R[1],L=(0,n.useState)(!1),Y=(0,c.Z)(L,2),A=Y[0],z=Y[1],H=(0,n.useState)(!1),O=(0,c.Z)(H,2),U=O[0],V=O[1],W=(0,n.useState)(),X=(0,c.Z)(W,2),G=X[0],I=X[1],J=(0,n.useState)(!1),K=(0,c.Z)(J,2),$=K[0],ee=K[1],te=(0,n.useState)(!1),se=(0,c.Z)(te,2),ne=se[0],ae=se[1],ie=(0,n.useState)(!1),re=(0,c.Z)(ie,2),oe=re[0],le=re[1],ce=(0,n.useState)(!0),de=(0,c.Z)(ce,2),ue=de[0],me=de[1],ve=(0,n.useState)(!0),ge=(0,c.Z)(ve,2),he=ge[0],pe=ge[1],xe=(0,n.useState)(""),fe=(0,c.Z)(xe,2),je=fe[0],ye=fe[1],Ne=(0,n.useState)(""),be=(0,c.Z)(Ne,2),_e=be[0],we=be[1],Se=(0,n.useState)(!1),Ze=(0,c.Z)(Se,2),qe=Ze[0],Ce=Ze[1],ke=(0,n.useState)(!1),Pe=(0,c.Z)(ke,2),Te=Pe[0],Ee=Pe[1],Me=(0,n.useState)(!1),Qe=(0,c.Z)(Me,2),De=Qe[0],Re=Qe[1],Be=(0,n.useState)(!0),Fe=(0,c.Z)(Be,2),Le=Fe[0],Ye=Fe[1],Ae=(0,n.useState)(!0),ze=(0,c.Z)(Ae,2),He=ze[0],Oe=ze[1],Ue=(0,n.useState)({survey_name:"",type:"NPV"}),Ve=(0,c.Z)(Ue,2),We=Ve[0],Xe=Ve[1],Ge=(0,n.useState)({pcqa_csat_survey_id:"",question:"",question_code:""}),Ie=(0,c.Z)(Ge,2),Je=Ie[0],Ke=Ie[1],$e=r.N.baseUrl;(0,n.useEffect)((function(){tt(),st(),et()}),[]),console.log(Je+"...................................addNestedFormData");var et=function(){i()({method:"get",url:$e+"/governancems/Csat/getNPVsurvey"}).then((function(e){var t=e.data;I(t)})).catch((function(e){}))},tt=function(){i()({method:"get",url:$e+"/governancems/Csat/getNPSques"}).then((function(e){var t=e.data;a(t)})).catch((function(e){}))},st=function(){i()({method:"get",url:$e+"/governancems/Csat/getQuestionRange"}).then((function(e){var t=e.data;F(t)})).catch((function(e){}))};console.log(Je),s.length;var nt=function(e){e.preventDefault();var t=e.target.getAttribute("name"),s=e.target.value.trim(),n=(0,l.Z)({},Je);n[t]=s,Ke(n),Ee(!0)},at=function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()},it=function(e){return(0,N.jsx)("div",{"data-toggle":"tooltip",title:e.question,children:e.question})},rt=function(e){return(0,N.jsx)("div",{style:{textAlign:"right"},"data-toggle":"tooltip",title:e.question_range,children:e.question_range})},ot=(0,N.jsx)("div",{className:"newEntryFields",children:(0,N.jsx)("form",{className:"col-md-12",children:(0,N.jsxs)("div",{className:"row px-1 py-2",children:[(0,N.jsx)("div",{className:"col-9",children:(0,N.jsx)("input",{type:"text",name:"survey_name",required:!0,onChange:function(e){e.preventDefault();var t=e.target.getAttribute("name"),s=e.target.value.trim(),n=(0,l.Z)({},We);n[t]=s,Xe(n),Ce(!0)},placeholder:"Enter Survey Question"})}),(0,N.jsx)("div",{className:"col-3",children:(0,N.jsx)(v(),{name:"date",id:"date",className:"disableField",selected:new Date,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,disabled:!0,showYearDropdown:!0})})]})})}),lt=(0,N.jsx)("div",{className:"newEntryFields",children:(0,N.jsx)("form",{className:"col-md-12",children:(0,N.jsxs)("div",{className:"row px-1 py-2",children:[(0,N.jsx)("div",{className:"col-9",children:(0,N.jsx)("input",{type:"text",name:"question",required:!0,onChange:nt,placeholder:"Enter Survey Question"})}),(0,N.jsx)("div",{className:"col-3",children:(0,N.jsx)("select",{name:"question_range",id:"question_range",onChange:nt,children:B.map((function(e){return(0,N.jsxs)("option",{value:e.val,children:[" ",e.lkup_name]})}))})})]})})});return(0,N.jsxs)(n.Fragment,{children:[(0,N.jsx)("div",{className:"col-md-12  ",children:ne?(0,N.jsxs)("div",{className:"statusMsg error",children:[" ",(0,N.jsx)(x.CSE,{})," Please give Unique name"]}):""}),qe&&(Ce(!1),Re(!0),Oe(!1),void Ye(!1)),Te&&(Ee(!1),le(!0),pe(!1),void me(!1)),(0,N.jsx)("div",{className:"col-md-12  ",children:$?(0,N.jsxs)("div",{className:"statusMsg error",children:[" ",(0,N.jsx)(x.CSE,{})," Please select the valid values for highlighted fields"]}):""}),(0,N.jsx)("div",{className:"col-md-12  ",children:A?(0,N.jsxs)("div",{className:"statusMsg success",children:[" ",(0,N.jsx)(y.hXj,{}),"Survey Question ",je," created successfully"]}):""}),(0,N.jsx)("div",{className:"col-md-12 ",children:U?(0,N.jsxs)("div",{className:"statusMsg success",children:[" ",(0,N.jsx)(y.hXj,{}),"Survey Question ",_e," created successfully."]}):""}),(0,N.jsxs)("div",{className:"npsSurveyTable darkHeader toHead",children:[(0,N.jsxs)(u.w,{value:s,className:"primeReactDataTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[15,25,50],showGridlines:!0,expandedRows:S,onRowToggle:function(e){return Z(e.data)},rowExpansionTemplate:function(e){return(0,N.jsxs)("div",{children:[(0,N.jsxs)(u.w,{value:e.subrows,responsiveLayout:"scroll",header:null,className:"p-grid innercsat ",pagination:e.subrows.length>0,paginator:e.subrows.length>0,rows:10,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},children:[(0,N.jsx)(d.s,{field:"question",body:it}),(0,N.jsx)(d.s,{field:"question_range",body:rt})]}),(0,N.jsx)(N.Fragment,{children:b(e.subrow)}),(0,N.jsx)("div",{className:"newTableEntry",children:(0,N.jsx)("div",{children:!0===M&&(0,N.jsx)("span",{children:lt})})}),(0,N.jsxs)("div",{className:"tableBottomButtons btn-container-events center",children:[(0,N.jsxs)("button",{className:"btn btn-primary p-1","data-toggle":"tooltip",title:"Add new row",disabled:oe,onClick:function(){Q(!0),le(!0),pe(!1),me(!1),Ke((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,o.Z)({},"pcqa_csat_survey_id",e.id))}))},children:[(0,N.jsx)(p.WZt,{size:"1.2em"})," Add"]}),(0,N.jsxs)("button",{className:"btn btn-primary p-1",disabled:ue,onClick:function(){!function(){if(""==Je.question||" "==Je.question||void 0==Je.question){for(var e=document.getElementsByName("question"),t=0;t<e.length;t++)e[t].classList.add("error-block");return ee(!0),me(!1),pe(!1),le(!0),void setTimeout((function(){ee(!1)}),3e3)}i()({method:"post",url:$e+"/governancems/Csat/saveNpvInnerSurveyQue",data:{pcqa_csat_survey_id:null===Je||void 0===Je?void 0:Je.pcqa_csat_survey_id,question:null===Je||void 0===Je?void 0:Je.question,question_code:"",question_range:void 0==(null===Je||void 0===Je?void 0:Je.question_range)?"0":null===Je||void 0===Je?void 0:Je.question_range,status:1}}).then((function(e){tt(),et(),Q(!1),we(Je.question),Ke((function(e){return(0,l.Z)((0,l.Z)({},e),{},{question_range:"0"})})),V(!0),setTimeout((function(){V(!1)}),3e3)})),me(!0),le(!1),pe(!0),Ke({})}(),at()},"data-toggle":"tooltip",title:"Save row",children:[(0,N.jsx)(f.UQg,{size:"0.7em"}),(0,N.jsx)("span",{className:"ml-1",children:" Save "})]}),(0,N.jsxs)("button",{className:"btn btn-primary p-1",onClick:function(){Q(!1),function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),le(!1),pe(!0),me(!0)}()},"data-toggle":"tooltip",disabled:he,title:"Cancel row editing",children:[(0,N.jsx)(j.sQZ,{size:"0.6em"}),(0,N.jsx)("span",{className:"ml-1",children:"Cancel"})]})]})]})},pagination:s.length>0,paginator:s.length>0,rows:15,children:[(0,N.jsx)(d.s,{expander:function(e){var t;return(null===(t=e.subrows)||void 0===t?void 0:t.length)>=0}}),(0,N.jsx)(d.s,{field:"survey_name",header:"Survey/Question",sortable:!0,body:function(e){return(0,N.jsx)("div",{"data-toggle":"tooltip",title:e.survey_name,children:e.survey_name})},alignHeader:"center"}),(0,N.jsx)(d.s,{field:"date",sortable:!0,header:"Created On",body:function(e){return(0,N.jsx)("div",{title:h()(e.date).format("DD-MMM-YYYY"),children:h()(e.date).format("DD-MMM-YYYY")})},alignHeader:"center"}),(0,N.jsx)(d.s,{header:"Question Range",sortable:!0,alignHeader:"center"})]}),(0,N.jsx)("div",{className:"newTableEntry",children:!0===k&&(0,N.jsx)("span",{children:ot})}),(0,N.jsxs)("div",{className:"tableBottomButtons btn-container-events center",children:[(0,N.jsxs)("button",{className:"btn btn-primary p-1","data-toggle":"tooltip",title:"Add new row",disabled:De,onClick:function(){P(!0),Re(!0),Oe(!1),Ye(!1)},children:[(0,N.jsx)(p.WZt,{size:"1.2em"})," Add"]}),(0,N.jsxs)("button",{className:"btn btn-primary p-1",disabled:Le,onClick:function(){!function(){var e=G.some((function(e){return e.survey_name==We.survey_name}));if(void 0!=s&&e){for(var t=document.getElementsByName("survey_name"),n=0;n<t.length;n++)t[n].classList.add("error-block");return ae(!0),Ye(!1),Oe(!1),Re(!0),void setTimeout((function(){ae(!1)}),3e3)}if(""==We.survey_name||" "==We.survey_name){for(var a=document.getElementsByName("survey_name"),r=0;r<a.length;r++)a[r].classList.add("error-block");return ee(!0),void setTimeout((function(){ee(!1)}),3e3)}i()({method:"post",url:$e+"/governancems/Csat/saveNpvSurvey",data:We}).then((function(e){tt(),et(),P(!1),ye(We.survey_name),z(!0),setTimeout((function(){z(!1)}),3e3),Ye(!0),Oe(!0),Re(!1)}))}(),at()},"data-toggle":"tooltip",title:"Save row",children:[(0,N.jsx)(f.UQg,{size:"0.7em"}),(0,N.jsx)("span",{className:"ml-1",children:" Save "})]}),(0,N.jsxs)("button",{className:"btn btn-primary p-1",disabled:He,onClick:function(){P(!1),function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),Oe(!0),Re(!1),Ye(!0)}()},"data-toggle":"tooltip",title:"Cancel row editing",children:[(0,N.jsx)(j.sQZ,{size:"0.6em"}),(0,N.jsx)("span",{className:"ml-1",children:"Cancel"})]})]})]})]})};var _=function(){return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"col-md-12",children:(0,N.jsxs)("div",{className:"pageTitle",children:[(0,N.jsx)("div",{className:"childOne"}),(0,N.jsx)("div",{className:"childTwo",children:(0,N.jsx)("h2",{children:"NPS Survey Questions"})}),(0,N.jsx)("div",{className:"childThree"})]})}),(0,N.jsx)(b,{})]})}}}]);
//# sourceMappingURL=573.6755ae9d.chunk.js.map