"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8915,5100],{53245:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var a=s(29439),i=s(72791),r=s(74569),n=s.n(r),o=s(34831),l=s(56355),c=s(80184);function d(e){var t=e.progressReportData,s=e.reportRunId,a=e.monthlyResourceData,r=e.setmonthlyResourceData,d=(e.popUpDate,e.popDate),u=e.typeSelector,p=t.split("^")[0];console.log(d);var h=null===p||void 0===p?void 0:p.split("_"),m="".concat(h[0],"-").concat(h[1],"-").concat(h[2]),v=o.N.baseUrl,f=t.split("^")[0],x=t.split("^")[1],g=t.split("^")[2],S=f.split("_")[f.split("_").length-1];u=f.split("_")[0];var y={1:(0,c.jsx)(l.gbA,{style:{color:"#9567c2"}}),0:(0,c.jsx)(l.gbA,{style:{color:"#539a71"}})};parseInt(x),f.includes("Closed"),f.includes("soft"),S.replace("soft","").replace("service","");(0,i.useEffect)((function(){n()({method:"GET",url:v+"/SalesMS/pipeLineTrending/getMonthlySalesResourceDataNew?executiveId=".concat(parseInt(x),"&reportRunId=").concat(s,"&dateVal=").concat("asofnow"===u||"total"==u?d:m,"&optType=").concat(f.includes("Closed")?"Closed":"Created","&optCat=").concat(f.includes("soft")?"Software":"Services","&target=").concat("asofnow"===u||"total"==u?1:0,"&optProb=").concat(S.replace("soft","").replace("service",""),"&asOfNow=").concat("asofnow"===u?1:0)}).then((function(e){var t=e.data,s=["id","opportunity","customer","isProspect","country","closeDate","amount","probability","grossMargin"],a=t.map((function(e){return JSON.parse(JSON.stringify(e,s,4))}));r(a)})),document.getElementById("prgReport").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),[t]);var b="",j=f.split("_")[0],w=["","January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(f.split("_")[1])];switch(f.split("_")[3],f.split("_")[3]){case"softCreated":"Software Created";break;case"serviceCreated":"Service Created";break;case"serviceClosed":"Service Closed";break;case"softClosed":"Software Closed";break;default:f.includes("soft")?"Software Created":"Services Created"}switch(S){case"serviceSevenFive":case"softSevenFive":b="(75-99)";break;case"serviceFifty":case"softFifty":b="(50-74)";break;case"serviceTwoFive":case"softTwoFive":b="(25-49)";break;case"serviceLessTwoFive":case"softLessTwoFive":b="(<25)";break;default:t.includes("soft")?"Software Created":"Services Created"}var N=null===a||void 0===a?void 0:a.map((function(e){var t=[];for(var s in e)"id"!==s&&"isProspect"!==s&&t.push(e.id<0?(0,c.jsxs)("th",{className:"childTableHead",style:{textAlign:"center"},children:[(0,c.jsx)("div",{className:"circle red"}),"__iconCust__ Customer __iconProsp__ Prospect"===e[s]?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(l.gbA,{style:{color:"#539a71",marginTop:"-2px"}}),e[s].split("_")[4],(0,c.jsx)(l.gbA,{style:{color:"#9567c2",marginTop:"-2px"}})," ",e[s].split("_")[8]]}):(0,c.jsx)(i.Fragment,{children:e[s]})]},s):(0,c.jsxs)("td",{className:s,title:e[s],children:["opportunity"==s?(0,c.jsx)("div",{children:(0,c.jsx)("a",{href:"https://d300000000qxieam.my.salesforce.com/?ec=302&startURL=%2Fvisualforce%2Fsession%3Furl%3Dhttps%253A%252F%252Fd300000000qxieam.lightning.force.com%252Flightning%252Fr%252FOpportunity%252F0061W00001UtIfyQAF%252Fview",target:"_blank",rel:"noopener noreferrer",children:(0,c.jsx)("span",{title:e[s],children:"".concat(e[s].slice(0,50),"...")})})}):"","amount"==s?parseInt(e[s]).toLocaleString("en-US"):"grossMargin"==s?Math.round(e[s]):"","customer"==s||"country"==s||"closeDate"==s||"probability"==s?e[s]:"","customer"===s&&" "!==e.customer&&(0,c.jsx)("span",{title:e,style:{float:"left",marginTop:"-2px",marginRight:"6px"},children:y[e.isProspect]})]},s));return(0,c.jsx)("tr",{children:t},e.id)}));return(0,c.jsxs)("div",{id:"prgReport",className:"col-lg-12 col-md-12 col-sm-12 mt10 no-padding",children:[(0,c.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:(0,c.jsx)("b",{children:"asofnow"===u?(0,c.jsxs)(c.Fragment,{children:["Total Progress ",b," of"," ",(0,c.jsxs)("span",{className:"proName",style:{color:"#297ab0",fontSize:"14px"},children:[g," "]})," ","As Of Now"]}):(0,c.jsxs)(c.Fragment,{children:["Progress of ",(0,c.jsx)("span",{children:g})," ",w+"-"+j=="undefined-total"?"":w+"-"+j]})})}),(0,c.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:(0,c.jsx)("b",{children:"serviceClosed"==f.split("_")[3]?"Service Closed":"serviceCreated"==f.split("_")[3]?"Service Created":"softClosed"==f.split("_")[3]?"Software Closed":"softCreated"==f.split("_")[3]?"Software Created":"serviceSevenFive"==f.split("_")[1]||"serviceFifty"==f.split("_")[1]||"serviceTwoFive"==f.split("_")[1]||"serviceLessTwoFive"==f.split("_")[1]?"Service Created":"softSevenFive"==f.split("_")[1]||"softFifty"==f.split("_")[1]||"softTwoFive"==f.split("_")[1]||"softLessTwoFive"==f.split("_")[1]?"Software Created":""})}),(0,c.jsx)("span",{}),(null===N||void 0===N?void 0:N.length)>1?(0,c.jsx)("div",{className:"darkHeader",children:(0,c.jsx)("table",{className:"table table-bordered table-striped progresstable customCard card graph",style:{width:"auto",margin:"0px auto",float:"left"},children:(0,c.jsx)("thead",{className:"graph",children:N})})}):(0,c.jsx)("div",{style:{marginTop:"10px"},children:"No Progress Found"})]})}var u=s(29718),p=s.n(u),h=s(12003),m=s.n(h),v=s(4189),f=s.n(v);function x(e){var t=e.yServClosed,s=e.ySwClosed,a=e.ySwSevenFive,i=e.ySwFifty,r=e.ySwTwoFive,n=e.ySwLessTwoFive,o=e.yServSevenFive,l=e.yServFifty,d=e.yServTwoFive,u=e.yServLessTwoFive,h=e.yServCreated,v=e.ySwCreated,f=e.execKey,x=e.xAxis,g=e.execName,S=a[f],y=i[f],b=r[f],j=n[f],w=o[f],N=l[f],D=d[f],C=u[f],F=h[f],Z=v[f],_=t[f],T=s[f],R=[],I=[],P=[];P.push("Services"),I.push({name:"75-99",color:"#2f7ed8",data:[parseFloat(w[0])]}),I.push({name:"50-74",color:"#1aadce",data:[parseFloat(N[0])]}),I.push({name:"25-49",color:"#8bbc21",data:[parseFloat(D[0])]}),I.push({name:"<25",color:"#910000",data:[parseFloat(C[0])]}),R.push({name:"75-99",color:"#2f7ed8",data:[S[0]]}),R.push({name:"50-74",color:"#1aadce",data:[y[0]]}),R.push({name:"25-49",color:"#8bbc21",data:[b[0]]}),R.push({name:"<25",color:"#910000",data:[j[0]]});var L={chart:{type:"column",width:600,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{useHTML:!0,text:'Services As Of Now for <b style="color:#297ab0;font-size: 14px;">'+g+"</b><span>"},xAxis:{categories:P,crosshair:!0,gridLineWidth:.2},yAxis:{allowDecimals:!1,gridLineWidth:.2,min:0,title:{text:"Amount ($)"},labels:{overflow:"justify"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y.toLocaleString("en-US")+" <br/>"}},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:I};(P=[]).push("Software");var k={chart:{type:"column",width:600,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{useHTML:!0,text:'Software As Of Now for <b style="color:#297ab0;font-size: 14px;">'+g+"</b><span>"},xAxis:{categories:P,crosshair:!0,gridLineWidth:.2},yAxis:{allowDecimals:!1,min:0,gridLineWidth:.2,title:{text:"Amount ($)"},labels:{overflow:"justify"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y.toLocaleString("en-US")+" <br/>"}},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:R},A=[],M=[];A.push({name:"Created",data:F,stack:"second",color:"#ffc966",legendIndex:1}),M.push({name:"Created",data:Z,stack:"second",color:"#ffc966",legendIndex:1}),A.push({name:"Closed",data:_,stack:"first",color:"#00ff00",legendIndex:1}),M.push({name:"Closed",data:T,stack:"first",color:"#00ff00",legendIndex:1});var E={lang:{thousandsSep:",",decimalPoint:"."},chart:{type:"column",width:900,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{useHTML:!0,text:'Service Progress for <b style="color:#297ab0;font-size: 14px;">'+g+"</b><span>"},xAxis:{categories:x,crosshair:!0,gridLineWidth:.2},yAxis:{allowDecimals:!1,gridLineWidth:.2,min:0,title:{text:"Amount ($)"},labels:{overflow:"justify"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y.toLocaleString("en-US")+" <br/>"}},plotOptions:{column:{pointPadding:.2,borderWidth:0,stacking:"normal"}},series:A},U={lang:{thousandsSep:",",decimalPoint:"."},chart:{type:"column",width:900,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{useHTML:!0,text:'Software Progress for <b style="color:#297ab0;font-size: 14px;">'+g+"</b><span>"},xAxis:{categories:x,crosshair:!0,gridLineWidth:.2},yAxis:{allowDecimals:!1,min:0,gridLineWidth:.2,title:{text:"Amount ($)"},labels:{overflow:"justify"}},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y.toLocaleString("en-US")+" <br/>"}},plotOptions:{column:{pointPadding:.2,borderWidth:0,stacking:"normal"}},series:M};return(0,c.jsxs)("div",{id:"chart",className:"col-md-12 no-padding",style:{marginTop:"2%"},children:[(0,c.jsx)("div",{className:"col-md-12 no-padding pipelineCharts customCard card graph",style:{width:"75%"},children:(0,c.jsx)(m(),{highcharts:p(),options:E})}),(0,c.jsx)("div",{className:"col-md-12 no-padding pipelineCharts customCard card graph",style:{width:"75%"},children:(0,c.jsx)(m(),{highcharts:p(),options:U})}),(0,c.jsxs)("div",{className:"col-md-12 row",children:[" ",(0,c.jsx)("div",{className:"col-5 no-padding customCard card graph thirdGraphPipelIne",style:{marginLeft:"2%"},children:(0,c.jsx)(m(),{highcharts:p(),options:L})}),(0,c.jsx)("div",{className:"col-5 no-padding customCard card graph fourthGraphPipeLine",children:(0,c.jsx)(m(),{highcharts:p(),options:k})})]})]})}s(6298)(p()),f()(p());var g=s(49177),S=s(34911),y=s(56637),b=s(53824),j=s(48462),w=s(59170);function N(e){var t=e.pipeLineTrendingData,s=e.reportRunId,r=e.setmonthlyResourceData,n=e.monthlyResourceData,o=e.popDate,l=e.viewDataNew,u=e.refresh,p=e.setRefresh,h=e.setProgressReportData,m=e.progressReportData,v=e.typeSelector,f=(0,i.useState)(""),N=(0,a.Z)(f,2),D=N[0],C=N[1],F=(0,i.useState)(""),Z=(0,a.Z)(F,2),_=Z[0],T=Z[1],R=(0,i.useState)([]),I=(0,a.Z)(R,2),P=I[0],L=I[1],k={fte0:(0,c.jsx)("img",{src:S,alt:"(fte_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Employee"}),fte1:(0,c.jsx)("img",{src:g,alt:"(fte_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Employee"}),fte2:(0,c.jsx)("img",{src:y,alt:"(fte_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Employee in notice period"}),subk0:(0,c.jsx)("img",{src:j,alt:"(subk_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Contractor"}),subk1:(0,c.jsx)("img",{src:b,alt:"(subk_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Contractor"}),subk2:(0,c.jsx)("img",{src:w,alt:"(subk_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Contractor in notice period"})},A=[],M={},E={},U={},O={},H={},J={},W={},Y={},z={},G={},B={},K={},V=t.map((function(e){var t=["Count","execStatus","id","isActive"],s=[];e.id in M||(M[e.id]=[]),e.id in E||(E[e.id]=[]),e.id in U||(U[e.id]=[]),e.id in O||(O[e.id]=[]),e.id in H||(H[e.id]=[]),e.id in J||(J[e.id]=[]),e.id in W||(W[e.id]=[]),e.id in Y||(Y[e.id]=[]),e.id in z||(z[e.id]=[]),e.id in G||(G[e.id]=[]),e.id in B||(B[e.id]=[]),e.id in K||(K[e.id]=[]);var a=function(a){var r,n,o,l,d,u,m,v,f,x,g=null===a||void 0===a?void 0:a.split("_"),S=g[g.length-1],y=g[0],b=e.id,j=e[a],w=g[0]+"-"+g[1]+"-"+g[2];switch(!A.includes(w)&&"0"==e.id&&"total"!=y&&"asofnow"!=y&&g.includes("serviceClosed")&&A.push(new Date(w).toLocaleDateString("en-us",{year:"numeric",month:"short"})),S){case"serviceClosed":"total"!=y&&"asofnow"!=y&&e.id>=0&&U[b].push(parseFloat(j));break;case"softClosed":"total"!=y&&"asofnow"!=y&&e.id>=0&&O[b].push(parseFloat(j));break;case"serviceCreated":"total"!=y&&"asofnow"!=y&&e.id>=0&&M[b].push(parseFloat(j));break;case"softCreated":"total"!=y&&"asofnow"!=y&&e.id>=0&&E[b].push(parseFloat(j));break;case"serviceSevenFive":"total"!=y&&e.id>=0&&z[b].push(parseFloat(j));break;case"serviceFifty":"total"!=y&&e.id>=0&&G[b].push(parseFloat(j));break;case"serviceTwoFive":"total"!=y&&e.id>=0&&B[b].push(parseFloat(j));break;case"serviceLessTwoFive":"total"!=y&&e.id>=0&&K[b].push(parseFloat(j));break;case"softSevenFive":"total"!=y&&e.id>=0&&H[b].push(parseFloat(j));break;case"softFifty":"total"!=y&&e.id>=0&&J[b].push(parseFloat(j));break;case"softTwoFive":"total"!=y&&e.id>=0&&W[b].push(parseFloat(j));break;case"softLessTwoFive":"total"!=y&&e.id>=0&&Y[b].push(parseFloat(j))}null!==e[a]&&!t.some((function(e){return a.includes(e)}))&&s.push(e.id<0?(0,c.jsx)("th",{className:(null===a||void 0===a?void 0:a.split("_")[0])+" pipeth",colSpan:null===(r=e[a])||void 0===r?void 0:r.split("^&")[2],rowSpan:null===(n=e[a])||void 0===n?void 0:n.split("^&")[1],children:null===(o=e[a])||void 0===o?void 0:o.split("^&")[0]},a):(0,c.jsx)("td",{className:(a.includes("service")?"service":"software")+" pipetd "+(null===a||void 0===a?void 0:a.split("_")[0]),colSpan:null===(l=e[a])||void 0===l?void 0:l.split("^&")[2],rowSpan:null===(d=e[a])||void 0===d?void 0:d.split("^&")[1],style:{backgroundColor:"0"===e.id?"#EADDCA":""},title:e[a],children:"executive"!==a?(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)("span",{title:parseInt(e[a]).toLocaleString("en-US"),children:parseInt(null===(u=e[a])||void 0===u?void 0:u.split("^&")[0]).toLocaleString("en-US")}),(0,c.jsxs)("span",{title:e[a],className:null!==(m=e[a+"Count"])&&void 0!==m&&m.split("^&")[0]?"linkSty":"",onClick:null!==(v=e[a+"Count"])&&void 0!==v&&v.split("^&")[0]?function(){h(a+"^"+e.id+"^"+e.executive),C(""),L(),p(!0)}:"No Data found",children:["(",null===(f=e[a+"Count"])||void 0===f?void 0:f.split("^&")[0],")"]})]}):(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)("span",{children:k[e.execStatus]}),(0,c.jsx)("span",{className:"linkSty",onClick:function(){C(e.id),T(e.executive),h(""),p(!0),window.scrollTo({top:3e3,behavior:"smooth"})},children:null===(x=e[a])||void 0===x?void 0:x.split("^&")[0]})]})},a))};for(var r in e)a(r);return(0,c.jsx)("tr",{children:s},e.id)}));return(0,c.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding darkHeader customCard",children:[(0,c.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding scrollit",style:{maxHeight:"76vh"},children:(0,c.jsx)("table",{className:"table table-bordered table-striped pipelinetable ",children:(0,c.jsx)("thead",{children:V})})}),""!==m&&!0===u?(0,c.jsx)(d,{progressReportData:m,reportRunId:s,setmonthlyResourceData:r,monthlyResourceData:n,viewDataNew:l,typeSelector:v,popUpDate:P,popDate:o}):"",""!==D&&1==u?(0,c.jsx)(x,{yServCreated:M,ySwCreated:E,yServClosed:U,ySwClosed:O,ySwSevenFive:H,ySwFifty:J,ySwTwoFive:W,ySwLessTwoFive:Y,yServSevenFive:z,yServFifty:G,yServTwoFive:B,yServLessTwoFive:K,execKey:D,xAxis:A,execName:_}):""]})}var D=s(4942),C=s(1413),F=s(59513),Z=s.n(F),_=(s(68639),s(36167)),T=s(3900),R=s(32125),I=s(78820),P=s(72426),L=s.n(P),k=s(83854),A=s(78983),M=(s(22804),s(57689)),E=s(38262),U=s(16030),O=s(49648),H=(s(27336),s(72920));function J(e){var t=e.setpipeLineTrendingData,s=e.setreportRunId,r=(e.setmonthlyResourceData,e.monthlyResourceData,e.popDate,e.refresh,e.setRefresh),d=e.setPopDate,u=(e.pipelinePermission,e.setProgressReportData,e.progressReportData,e.setExecId,e.execId,e.typeSelector,(0,i.useState)([])),p=(0,a.Z)(u,2),h=(p[0],p[1]),m=(0,i.useState)([]),v=(0,a.Z)(m,2),f=v[0],x=v[1],g=(0,i.useState)(0),S=(0,a.Z)(g,2),y=S[0],b=S[1],j=(0,i.useState)([]),w=(0,a.Z)(j,2),N=w[0],F=w[1],P=(0,i.useState)(!0),J=(0,a.Z)(P,2),W=(J[0],J[1]),Y=(0,i.useState)(-2),z=(0,a.Z)(Y,2),G=z[0],B=z[1],K=(0,i.useState)(!1),V=(0,a.Z)(K,2),$=(V[0],V[1],(0,i.useState)("-2")),q=(0,a.Z)($,2),Q=q[0],X=q[1],ee=(0,U.I0)(),te=(0,i.useState)([]),se=(0,a.Z)(te,2),ae=se[0],ie=se[1],re=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal")),ne=null!==localStorage.getItem("isIndividualCheckedLocal")&&JSON.parse(localStorage.getItem("isIndividualCheckedLocal")),oe=JSON.parse(localStorage.getItem("selectedSELocal")),le=(0,i.useState)([]),ce=(0,a.Z)(le,2),de=(ce[0],ce[1]),ue=re.findIndex((function(e){return e.key})),pe=(0,i.useState)(""),he=(0,a.Z)(pe,2),me=(he[0],he[1]),ve=(0,i.useState)(""),fe=(0,a.Z)(ve,2),xe=(fe[0],fe[1]),ge=(0,i.useState)(""),Se=(0,a.Z)(ge,2);Se[0],Se[1];(0,i.useEffect)((function(){if(-1!==ue){var e=re[ue].id,t=re[ue].text+" & Team";1==Q&&(xe(t),me(e))}}),[ue,Q]),(0,i.useEffect)((function(){ee((0,O.jz)(Q))}),[Q]);var ye=(0,U.v9)((function(e){return e.selectedSEState.directSETreeData}));(0,i.useEffect)((function(){n().get(_e+"/ProjectMS/project/getHirarchyAccesss?loggedUserId=".concat(hs)).then((function(e){var t=e.data;de(t)})).catch((function(e){console.log(e)}))}),[]),(0,i.useEffect)((function(){}),[y]);var be=(0,i.useState)([]),je=(0,a.Z)(be,2),we=(je[0],je[1]),Ne=re.map((function(e){if(Array.isArray(e)){var t=(0,a.Z)(e,1)[0];if(t&&t.id&&t.text&&"fte1"===t.type&&"id"===t.parent)return{salesPersonName:t.text,type:t.type,id:parseInt(t.id),status:JSON.parse(t.li_attr).sestatus||"empActive"}}return e})),De=Ne.filter((function(e,t){return t===Ne.findIndex((function(t){return e.id===t.id}))})).filter((function(e){return!Array.isArray(e)||0===e.length})),Ce=Ne.map((function(e){return e.id})).filter((function(e){return"number"===typeof e})),Fe=(Ce.map((function(e){return N})).flat(),De.map((function(e){return e.salesPersonName&&e.salesPersonName,"".concat(e.salesPersonName)})));var Ze=null===oe||void 0===oe?void 0:oe.map((function(e){return String(e.id)})),_e=(null===Ze||void 0===Ze||Ze.join(","),o.N.baseUrl),Te=(0,i.useState)(!1),Re=(0,a.Z)(Te,2),Ie=Re[0],Pe=Re[1],Le=(0,i.useState)(6),ke=(0,a.Z)(Le,2),Ae=ke[0],Me=ke[1],Ee=(0,i.useState)(l.UdN),Ue=(0,a.Z)(Ee,2),Oe=Ue[0],He=Ue[1],Je=(0,i.useState)(!1),We=(0,a.Z)(Je,2),Ye=We[0],ze=We[1],Ge=(0,i.useState)(!1),Be=(0,a.Z)(Ge,2),Ke=Be[0],Ve=Be[1],$e=(0,i.useState)([]),qe=(0,a.Z)($e,2),Qe=qe[0],Xe=qe[1],et=(0,i.useState)("se"),tt=(0,a.Z)(et,2),st=tt[0],at=tt[1],it=(0,i.useRef)(null),rt=(0,i.useState)([]),nt=(0,a.Z)(rt,2),ot=nt[0],lt=nt[1],ct=new AbortController,dt=(0,i.useState)({month:"",Duration:""}),ut=(0,a.Z)(dt,2),pt=ut[0],ht=ut[1],mt=(0,i.useState)((function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()-5;return new Date(t,s,1)})),vt=(0,a.Z)(mt,2),ft=(vt[0],vt[1],(0,i.useRef)([])),xt=(0,i.useState)(!1),gt=(0,a.Z)(xt,2),St=(gt[0],gt[1]),yt=(0,i.useState)(-1),bt=(0,a.Z)(yt,2),jt=bt[0],wt=bt[1],Nt=(0,i.useState)(0),Dt=(0,a.Z)(Nt,2),Ct=(Dt[0],Dt[1],(0,i.useState)([])),Ft=(0,a.Z)(Ct,2),Zt=Ft[0],_t=Ft[1],Tt=(0,i.useState)([]),Rt=(0,a.Z)(Tt,2),It=Rt[0],Pt=Rt[1],Lt=(0,i.useState)(!0),kt=(0,a.Z)(Lt,2),At=kt[0],Mt=kt[1],Et=(0,i.useState)(-1),Ut=(0,a.Z)(Et,2),Ot=Ut[0],Ht=Ut[1],Jt=(0,i.useState)([]),Wt=(0,a.Z)(Jt,2),Yt=Wt[0],zt=Wt[1],Gt=(0,i.useState)([]),Bt=(0,a.Z)(Gt,2),Kt=(Bt[0],Bt[1]),Vt=(0,i.useState)([]),$t=(0,a.Z)(Vt,2),qt=($t[0],$t[1]),Qt=(0,i.useState)([]),Xt=(0,a.Z)(Qt,2),es=Xt[0],ts=Xt[1],ss=(0,i.useState)(L()(L()().subtract(5,"months"))._d),as=(0,a.Z)(ss,2),is=as[0],rs=as[1],ns=(0,i.useState)(L()(L()(ot).format("yyyy-mm-dd"))),os=(0,a.Z)(ns,2),ls=(os[0],os[1]),cs=(0,i.useState)("2023-05-01"),ds=(0,a.Z)(cs,2),us=ds[0],ps=ds[1],hs=localStorage.getItem("resId"),ms=function(e){return Number(L()(e).format("MM"))+12*Number(L()(e).format("YYYY"))},vs=(0,i.useState)(),fs=(0,a.Z)(vs,2),xs=fs[0],gs=fs[1],Ss=(js=new Date).getFullYear(),ys=js.getMonth(),bs=new Date(ys),js=new Date(Ss,ys+11),ws=(0,M.TH)(),Ns=new URLSearchParams(ws.search).get("id"),Ds=(0,i.useState)(!1),Cs=(0,a.Z)(Ds,2),Fs=(Cs[0],Cs[1],(0,i.useState)([])),Zs=(0,a.Z)(Fs,2),_s=Zs[0],Ts=Zs[1],Rs=(0,i.useState)([]),Is=(0,a.Z)(Rs,2),Ps=Is[0],Ls=Is[1];(0,i.useEffect)((function(){ks()}),[]);var ks=function(){n()({method:"GET",url:_e+"/CommonMS/master/getMenus?loggedUserId=".concat(hs)}).then((function(e){var t=e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Project Timesheet (Deprecated)"!==e.display_name&&"Invoice Details"!==e.display_name&&"Accounting"!==e.display_name&&"Upload"!==e.display_name&&"Practice Calls [Deprecated]"!==e.display_name}))),e}));t.forEach((function(e){"Sales"===e.display_name&&Ls([e])}));var s=t.find((function(e){return"Sales"===e.display_name})).subMenus.find((function(e){return"Pipeline Trending"===e.display_name}));ie(s.access_level);var a=s?s.userRoles.includes("690")&&s.userRoles.includes("641")?600:s.userRoles.includes("690")?690:s.userRoles.includes("641")?641:s.userRoles.includes("932")?932:s.userRoles.includes("46")?46:s.userRoles.includes("126")?126:s.userRoles.includes("919")?919:s.userRoles.includes("686")?686:s.userRoles.includes("930")?930:s.userRoles.includes("307")&&307:null;x(a),Us((0,C.Z)((0,C.Z)({},Es),{},{executives:690==a||641==a||690==a||930==a?"":-2})),600==a||641==a?n()({method:"get",url:_e+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(hs)}).then((function(e){var t=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};t.push(s)})),Xe(t),ts(t)})):n()({method:"get",url:_e+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(hs)}).then((function(e){var t=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.PersonName,value:e.id};t.push(s)})),Xe(t),ts(t)}))}))};(0,i.useEffect)((function(){n()({method:"get",url:_e+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===Ns?0:Ns)}).then((function(e){var t=e.data;Ts(t)}))}),[]);L()(_s.from).format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ (z)");var As=(0,i.useState)({executives:"",from:is,duration:Ae,viewby:"se",cslIds:jt,Divisions:Ot}),Ms=(0,a.Z)(As,2),Es=Ms[0],Us=Ms[1];(0,i.useEffect)((function(){Us((function(){return null!=Ns?{executives:_s.executives,from:_s.from,duration:_s.duration,viewby:_s.viewby,cslIds:_s.cslIds,Divisions:_s.Divisions}:{executives:-2,from:is,duration:Ae,viewby:"se",cslIds:jt,Divisions:Ot}}))}),[_s]);var Os=(0,i.useState)(!1),Hs=(0,a.Z)(Os,2),Js=Hs[0],Ws=Hs[1],Ys=(0,i.useState)("<< All SE >>"),zs=(0,a.Z)(Ys,2),Gs=zs[0],Bs=zs[1],Ks=(0,i.useState)([{value:"1",label:"Germany"},{value:"2",label:"North America"},{value:"3",label:"Others"},{value:"4",label:"UK"},{value:"5",label:"UK Testing"},{value:"6",label:"Un Assigned"}]),Vs=(0,a.Z)(Ks,2),$s=(Vs[0],Vs[1],(0,i.useState)(-1)),qs=(0,a.Z)($s,2),Qs=(qs[0],qs[1],function(e){var t=e.id,s=e.value;Us((function(e){return(0,C.Z)((0,C.Z)({},e),{},(0,D.Z)({},t,s))})),"executives"===t&&"1"==s&&ze(!0)});console.log(f);var Xs=function(e){var t=ms(e),s=ms(L()())-t;s+=1;for(var a=[],i=1;i<=s;i++)i<13&&a.push(i);gs(a)};(0,i.useEffect)((function(){Xs(is),function(){var e=JSON.parse(localStorage.getItem("selectedSELocal")),t=[],s=[];null===e||void 0===e||e.forEach((function(e){var a={label:e.id};t.push(a),s.push(e.id)})),h(t),we(s)}()}),[]);var ea={executives:1==Q?ye:Q,from:us,duration:Ae,viewby:st,cslIds:641==f||600==f?Number(hs)+1:jt,divisions:""==Ot?-1:Ot},ta=function(){var e=ft.current.filter((function(e){return null!=e}));ft.current=e;var a=(0,R.Z)(ft);if(a)return St(!0),void Ws(!0);it.current=new AbortController,St(!1),Ws(!1),"1"==Es.executives&&(Es.executives=String(JSON.parse(localStorage.getItem("selectedSELocal")).map((function(e){return e.id}))));var i=setTimeout((function(){Pe(!0)}),2e3);n()((0,D.Z)({signal:ct.signal,method:"post",url:_e+"/SalesMS/pipeLineTrending/pipeLineTrendingData",data:ea},"signal",it.current.signal)).then((function(e){var r=e.data.data,n=e.data.columnNames.split(","),o=r.map((function(e){return JSON.parse(JSON.stringify(e,n,4))}));t(o),s(e.data.reportRunId),Pe(!1),clearTimeout(i),!a&&Ve(!Ke),He(Ke?l.UdN:l.NR5)})).catch((function(e){console.log(e)}))};(0,i.useEffect)((function(){n().get(_e+"/SalesMS/MasterController/salesExecutiveData").then((function(e){var t=e.data.filter((function(e){return 1==e.isActive})).map((function(e){return(0,c.jsx)("option",{value:e.val,children:e.lkupName},e.id)}));zt(t)})).catch((function(e){console.log(e)})),n().get(_e+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(hs)).then((function(e){var t=e.data.map((function(e){return obj={value:e.id,label:e.PersonName}}));Kt(t),qt(t)})).catch((function(e){console.log(e)})),n().get(_e+"/SalesMS/attainment/getOwnerDivision").then((function(e){var t=[],s=e.data;s.length>0&&s.forEach((function(e){var s={label:e.owner_division,value:e.id};t.push(s)})),_t(t),Pt(t)})).catch((function(e){return console.log(e)}))}),[]);var sa=function(e){e.expanded;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(l.qL$,{className:"chevronIcon"})})},aa=(Fe.join(","),De.map((function(e){return"Kirsten Craft"===e.salesPersonName?"".concat(e.salesPersonName," & team"):e.salesPersonName})).join(","),De.map((function(e){return e.id})).join(","),function(e,t){var s=e.map((function(e){return e.value})),a=t.map((function(e){return e.value}));return s.length===a.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")});return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{class:"col-md-12",children:(0,c.jsxs)("div",{class:"pageTitle",children:[(0,c.jsx)("div",{class:"childOne"}),(0,c.jsx)("div",{class:"childTwo",children:(0,c.jsx)("h2",{children:"Pipeline Trending"})}),(0,c.jsx)("div",{class:"childThree"})]})}),(0,c.jsx)(E.Z,{routes:Ps,currentScreenName:["Pipeline Trending"]}),Js?(0,c.jsxs)("div",{className:"statusMsg error",children:[" ",(0,c.jsx)(I.CSE,{})," Please select valid values for highlighted fields"]}):"",(0,c.jsxs)("div",{className:"group mb-3 customCard",children:[(0,c.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,c.jsx)("h2",{children:"Search Filters"}),(0,c.jsx)("div",{className:"helpBtn",children:(0,c.jsx)(H.Z,{pdfname:"PipelineTrending.pdf",name:"Pipeline Trending Help"})}),(0,c.jsx)("div",{onClick:function(){Ve(!Ke),He(Ke?l.UdN:l.NR5)},children:(0,c.jsx)("span",{children:Oe})})]}),(0,c.jsx)(A.V9,{visible:!Ke,children:(0,c.jsxs)("div",{className:"group-content row",children:[(0,c.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",children:[(0,c.jsx)("label",{className:"col-5",children:"View By"}),(0,c.jsx)("span",{className:"col-1 p-0",children:":"}),(0,c.jsx)("span",{className:"col-6",children:(0,c.jsxs)("select",{id:"viewby",className:"col-md-12 col-sm-12 col-xs-12  onLoadEmpty",onChange:function(e){"csl"===e.target.value?Mt(!1):Mt(!0),at(e.target.value)},children:[(0,c.jsx)("option",{value:"se",children:"Executive"}),(0,c.jsx)("option",{value:"csl",children:"CSL"})]})})]})]}),At&&"se"==st?(0,c.jsxs)("div",{className:"col-md-3 mb-2",id:"execSelDiv",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",children:[(0,c.jsxs)("label",{className:"col-5",children:["Sales Executive ",(0,c.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,c.jsx)("span",{className:"col-1 p-0",children:":"}),(0,c.jsx)("span",{span:!0,className:"col-6 ",style:{height:"23px"},children:1e3==ae||500==ae?(0,c.jsxs)("select",{ref:function(e){ft.current["se"==st?0:""]=e},id:"executives",className:"text",value:G,onChange:function(e){Qs(e.target),B(e.target.value),Bs(e.target.options[e.target.selectedIndex].text),X(e.target.value)},children:[(0,c.jsx)("option",{value:"",children:"<<Please select >>"}),Yt]}):(0,c.jsxs)("select",{ref:function(e){ft.current["se"==st?0:""]=e},id:"executives",className:"text",value:G,onChange:function(e){Qs(e.target),B(e.target.value),Bs(e.target.options[e.target.selectedIndex].text),X(e.target.value)},children:[(0,c.jsx)("option",{value:"null",children:"<< Please select>> "}),(0,c.jsx)("option",{value:"1",children:"Select SE"})]})})]})]}):"",!At&&(0,c.jsxs)("div",{className:"col-md-3 mb-2",id:"CSLDiv",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",children:[(0,c.jsxs)("label",{className:"col-4",children:["CSL ",(0,c.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,c.jsx)("span",{className:"col-1 p-0 ",children:":"}),(0,c.jsx)("div",{className:"col-6",children:(0,c.jsx)("div",{style:{height:"23px"},className:"multiselect",ref:function(e){ft.current["csl"==st?0:""]=e},children:(0,c.jsx)(_.NU,{ArrowRenderer:sa,id:"cslRes",name:"cslRes",options:Qe,hasSelectAll:!0,value:es,shouldToggleOnHover:!1,valueRenderer:aa,disableSearch:!1,selected:es,disabled:!1,onChange:function(e){ts(e);var t=[];e.forEach((function(e){t.push(e.value)})),wt(t.toString(),"xxx")}})})})]})]}),(0,c.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",id:"week-picker-wrapper",children:[(0,c.jsxs)("label",{className:"col-5",children:["Month ",(0,c.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,c.jsx)("span",{className:"col-1 p-0",children:":"}),(0,c.jsx)("div",{className:"col-6",children:(0,c.jsx)(Z(),{name:"month",id:"StartDt",minDate:bs,selected:is,onChange:function(e){var t=new Date(e);b((function(e){return e+1})),ps(L()(t).format("yyyy-MM-DD")),d(L()(t).format("yyyy-MM-DD")),lt(L()(e).format("yyyy-MM-DD")),Xs(e),ht((function(t){return(0,C.Z)((0,C.Z)({},t),{},{month:L()(e).format("yyyy-MM-DD")})})),rs(e),ls(e)},dateFormat:"MMM-yyyy",maxDate:new Date,showMonthYearPicker:!0})})]})]}),(0,c.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",children:[(0,c.jsxs)("label",{className:"col-5",children:["Duration ",(0,c.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,c.jsx)("span",{className:"col-1 p-0",children:":"}),(0,c.jsx)("div",{className:"col-6",children:(0,c.jsxs)("select",{ref:function(e){ft.current[1]=e},className:"text",id:"Duration",onChange:function(e){var t=e.target,s=t.value,a=t.id;ht((0,C.Z)((0,C.Z)({},pt),{},(0,D.Z)({},a,s))),Me(e.target.value)},children:[(0,c.jsx)("option",{value:"",children:" <<Please Select>>"}),null===xs||void 0===xs?void 0:xs.map((function(e){return(0,c.jsx)("option",{selected:0==y,value:e,children:e})}))]})})]})]}),(0,c.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,c.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,c.jsxs)("div",{className:"form-group row",children:[(0,c.jsx)("label",{className:"col-5",children:"Owner Division"}),(0,c.jsx)("span",{className:"col-1 p-0",children:":"}),(0,c.jsx)("span",{className:"col-6",style:{height:"23px"},children:(0,c.jsx)("div",{className:"multiselect",ref:function(e){ft.current[2]=e},children:(0,c.jsx)(_.NU,{ArrowRenderer:sa,id:"Divisions",options:Zt,hasSelectAll:!0,value:It,valueRenderer:aa,disabled:!1,onChange:function(e){Pt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Ht(t.toString(),"xxx")}})})})]})]}),At&&(0,c.jsx)("div",{className:"col-md-12 no-padding section",children:(0,c.jsx)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"},children:(0,c.jsxs)("span",{className:"selectedSE",children:[(0,c.jsx)("b",{children:"Selected SE : "}),(0,c.jsx)("span",{className:"dynText",children:"<< Select SE >>"===Gs?re.map((function(e,t){return(0,c.jsxs)("span",{children:[ne?e.salesPersonName?e.salesPersonName:e.text:e.salesPersonName?e.salesPersonName:e.text+" & Team",t===re.length-1?"":", "]},e.id)})):Gs})]})})}),(0,c.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center",style:{marginBottom:"15px"},children:Ie?"":(0,c.jsx)("center",{children:(0,c.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){ta(),r(!1)},style:{boxShadow:"none"},children:[(0,c.jsx)(l.U41,{})," Search"," "]})})}),(0,c.jsx)(T.default,{visible:Ye,setVisible:ze,accessData:ae,dataAccess:f,setGrpId:F,SetBulkIds:W})]})}),Ie&&(0,c.jsx)(k.Z,{handleAbort:function(){it.current&&it.current.abort(),Pe(!1)}})]})]})}function W(){o.N.baseUrl;var e=(0,i.useState)([]),t=(0,a.Z)(e,2),s=t[0],r=t[1],n=(0,i.useState)(0),l=(0,a.Z)(n,2),d=l[0],u=l[1],p=(0,i.useState)([]),h=(0,a.Z)(p,2),m=h[0],v=h[1],f=(0,i.useState)(""),x=(0,a.Z)(f,2),g=x[0],S=x[1],y=(localStorage.getItem("resId"),(0,i.useState)([])),b=(0,a.Z)(y,2),j=b[0],w=(b[1],(0,i.useState)(!1)),D=(0,a.Z)(w,2),C=D[0],F=D[1],Z=(0,i.useState)("2023-05-01"),_=(0,a.Z)(Z,2),T=_[0],R=_[1],I=(0,i.useState)("-2"),P=(0,a.Z)(I,2),L=P[0];P[1];return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:[(0,c.jsx)(J,{setpipeLineTrendingData:r,setreportRunId:u,setmonthlyResourceData:v,monthlyResourceData:m,typeSelector:"",setProgressReportData:S,pipelinePermission:j,progressReportData:g,popDate:T,setPopDate:R,refresh:C,setRefresh:F,viewDataNew:L}),(0,c.jsx)(N,{pipeLineTrendingData:s,reportRunId:d,setmonthlyResourceData:v,monthlyResourceData:m,pipelinePermission:j,typeSelector:"",setProgressReportData:S,progressReportData:g,popDate:T,refresh:C,setRefresh:F,viewDataNew:L,setPopDate:R})]})})}}}]);
//# sourceMappingURL=8915.894c69dc.chunk.js.map