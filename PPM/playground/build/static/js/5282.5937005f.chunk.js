"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5282,5100,1634],{15594:function(e,t,n){n.r(t),n.d(t,{default:function(){return le}});var s=n(29439),a=n(4942),r=n(1413),i=n(59513),l=n.n(i),o=(n(68639),n(72791)),c=n(74569),u=n.n(c),d=n(78820),p=n(56355),v=n(83854),f=n(78983),m=n(32125),h=n(72426),x=n.n(h),g=n(34831),S=n(3900),j=n(36167),y=n(7692),w=n(37762),b=n(93433),I=n(23853),N=n(49177),D=n(34911),k=n(56637),A=n(53824),Z=n(48462),C=n(59170),E=n(25415),_=n.n(E),M=n(16856),T=n(66770),O=n.n(T),P=n(70828),B=n(80184),Q=function(e){var t,n,a=e.openPopup,r=e.setOpenPopup,i=e.accessData,l=(e.Vdata,e.rowData),c=e.popupValue,d=(0,o.useState)({}),v=(0,s.Z)(d,2),m=v[0],h=v[1],x=(0,o.useState)(""),S=(0,s.Z)(x,2),j=S[0],y=S[1],w=g.N.baseUrl,b={toolbar:[[{header:[!1,1,2,3,4,5,6]},{font:[]},{color:[]},{bold:{tooltip:"Bold (Ctrl+B)"}},"italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","code-block","clean"]]};return(0,o.useEffect)((function(){u()({method:"get",url:w+"/SalesMS/services/getExecutiveNotes?rid=".concat(l.id)}).then((function(e){var t,n=e.data;h(n);var s=(null===(t=n[0])||void 0===t?void 0:t.notes)||"";y(s)}))}),[]),(0,B.jsx)("div",{children:(0,B.jsxs)(f.Tk,{visible:a,size:"xl",onClose:function(){return r(!1)},backdrop:"static",children:[(0,B.jsx)(f.p0,{className:"",style:{cursor:"all-scroll"},children:(0,B.jsx)(f.fl,{children:(0,B.jsxs)("span",{className:"",children:["Notes -"," ","ViewTable"===c?null===l||void 0===l?void 0:l.executive:null===l||void 0===l?void 0:l.name]})})}),(0,B.jsxs)(f.sD,{children:[1e3===i?(0,B.jsx)(O(),{className:"",theme:"snow",value:j,name:"notes",defaultValue:null===(t=m[0])||void 0===t?void 0:t.notes,id:"editor-container",onChange:function(e){y(e)},modules:b}):(0,B.jsx)(O(),{className:"",theme:"snow",value:j,name:"notes",defaultValue:null===(n=m[0])||void 0===n?void 0:n.notes,id:"editor-container",modules:b,readOnly:!0,style:{cursor:"not-allowed"}}),1e3===i&&(0,B.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=j.replace(/<\/?[^>]+(>|$)/g,""),t={resId:l.id,notes:e,loggedUserId:localStorage.getItem("resId")};u()({method:"POST",url:w+"/SalesMS/pmo/savenotes",data:t}).then((function(e){var t=e.data;h(t),r(!1)}))}()},children:[(0,B.jsx)(p.TvB,{}),"Save"," "]}),(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){r(!1)},children:[(0,B.jsx)(P.sQZ,{fontSize:"11px"}),"Cancel"," "]})]})]})]})})},F=n(17425);var R=function(e){e.selectedSe,e.reportId,e.selectedSE,e.setSelectedSE;var t,n=e.buttonAction,a=(e.setData,e.data,e.hirarchy,e.accessData),i=e.tableData,l=(e.loader,e.setTableData,e.headerData,e.setHeaderData,e.fdate,e.setLoader,e.setErrorMessage,e.getData1),c=(0,o.useState)(!1),d=(0,s.Z)(c,2),v=d[0],m=d[1],h=(0,o.useState)({}),x=(0,s.Z)(h,2),S=x[0],j=x[1],y=(0,o.useState)([]),E=(0,s.Z)(y,2),T=(E[0],E[1]),O=(0,o.useState)([]),P=(0,s.Z)(O,2),R=(P[0],P[1],(0,o.useState)([])),W=(0,s.Z)(R,2),Y=(W[0],W[1],(0,o.useState)([])),L=(0,s.Z)(Y,2),q=(L[0],L[1],(0,o.useState)([])),U=(0,s.Z)(q,2),z=U[0],$=U[1],V=0,H=(0,o.useState)(),J=(0,s.Z)(H,2),G=(J[0],J[1]),X=localStorage.getItem("resId"),K=(0,o.useState)([]),ee=(0,s.Z)(K,2),te=ee[0],ne=ee[1],se=(0,o.useState)(null),ae=(0,s.Z)(se,2),re=(ae[0],ae[1],(0,o.useState)(null)),ie=(0,s.Z)(re,2),le=(ie[0],ie[1],(0,o.useState)([])),oe=(0,s.Z)(le,2),ce=(oe[0],oe[1],(0,o.useState)([])),ue=(0,s.Z)(ce,2),de=(ue[0],ue[1],(0,o.useState)({})),pe=(0,s.Z)(de,2),ve=pe[0],fe=pe[1],me=(0,o.useState)({}),he=(0,s.Z)(me,2),xe=(he[0],he[1]),ge={fte0:(0,B.jsx)("img",{src:D,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,B.jsx)("img",{src:N,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,B.jsx)("img",{src:k,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,B.jsx)("img",{src:Z,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,B.jsx)("img",{src:A,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,B.jsx)("img",{src:C,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},Se=g.N.baseUrl,je=(0,o.useState)([]),ye=(0,s.Z)(je,2),we=(ye[0],ye[1],(0,o.useState)({})),be=(0,s.Z)(we,2),Ie=(be[0],be[1],"'".concat(i.GetSalesSWTargets,"'")),Ne=("'".concat(i.GetSalesSWTargets,"'"),null===Ie||void 0===Ie||null===(t=Ie.slice(1,-1))||void 0===t?void 0:t.split(",")),De=null===Ne||void 0===Ne?void 0:Ne.filter((function(e){return"id"!==e&&"execStatus"!==e&&"count"!==e&&"isActive"!==e&&"isEdit"!==e&&"keyAttr"!==e&&"lvl"!==e&&"parentAttr"!==e&&"targetCat"!==e&&"targetCatId"!==e&&"executive"!==e}));(0,o.useEffect)((function(){u().get(Se+"/CommonMS/master/getSalesRoleAcess?loggedUserId=".concat(X)).then((function(e){var t=e.data;T(t[0].is_create)}))}),[]);var ke=(0,o.useState)(),Ae=(0,s.Z)(ke,2),Ze=Ae[0],Ce=Ae[1];(0,o.useEffect)((function(){u().get(Se+"/SalesMS/software/getSalesWriteAccess?loggedUserId=".concat(X)).then((function(e){var t=e.data;G(t[0].result),Ce(t[0].result)}))}),[Ze]);var Ee=function(e,t){var n=e.target,s=n.value,a=(n.id,(0,b.Z)(prevState.data));a[t][keys]=s,ne((0,r.Z)((0,r.Z)({},te),{},{data:a}))},_e=function(e,t,n,s,a,i,l){!function(e,t,n,s,a,i,l){var o=(0,r.Z)({},te).data,c=e.target,u=c.value,d=c.id;u,e.target.getAttribute("data-qua");var p=d.split("_")[0],v=d.split("_")[1],f="Q1"===v||"Q2"===v||"Q3"===v||"Q4"===v?"quar":"month",m=(0,r.Z)({},o[n]);m[d]=u,o[n]=m;var h=("id,executive,execStatus,lvl,count,targetCat,targetCatId,name,isEdit,keyAttr,parentAttr,isActive,2023_Q2_target,2022_07_01_target,2022_08_01_target,2022_09_01_target,2023_Q3_target,2022_10_01_target,2022_11_01_target,2022_12_01_target,2023_Q4_target,2023_01_01_target,2023_02_01_target,2023_03_01_target,2024_Q1_target,2023_04_01_target,2023_05_01_target,2023_06_01_target,total_target,".split(",").findIndex((function(e){return e===d})),d.split("_")),x=null;switch(h[1]){case"Q1":x=[4,5,6];break;case"Q2":x=[7,8,9];break;case"Q3":x=[10,11,12];break;case"Q4":x=[1,2,3]}var g=Object.keys(o[n]),S=[];if(null!=x){for(var j=0;j<x.length;j++)1==(""+x[j]).length&&(x[j]="_0"+x[j]+"_01_"+h[2]);x.map((function(e){var t=g.filter((function(t){return t.includes(e)}));S.push(t)}))}var y=o.findIndex((function(e){return e.keyAttr===t}));if("quar"===f){var I=0;Object.keys(o[n]).forEach((function(e){e.includes("Q")&&(I+=parseInt(o[n][e]))})),o[n].total_target=I;var N=o[n].executive,D=o.filter((function(e){return e.executive==N})).filter((function(e,t){return t>0})).map((function(e){return e[d]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),k=o.filter((function(e){return e.executive==N})).filter((function(e,t){return t>0})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),A=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[d]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),Z=o.filter((function(e){return 2==e.lvl})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);o[y][d]=D,o[y].total_target=k,o[1].total_target=Z,o[1][d]=A;var C=Math.floor(u/3);o[n][S[0]]=C,o[n][S[1]]=C,o[n][S[2]]=C+u%3;var E=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[S[0]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),_=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[S[1]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),M=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[S[2]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);o[1][S[0]]=E,o[1][S[1]]=_,o[1][S[2]]=M;var T=o.filter((function(e){return e.executive==N})).filter((function(e,t){return t>0})).map((function(e){return e[S[0]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),O=o.filter((function(e){return e.executive==N})).filter((function(e,t){return t>0})).map((function(e){return e[S[1]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),P=o.filter((function(e){return e.executive==N})).filter((function(e,t){return t>0})).map((function(e){return e[S[2]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);o[y][S[0]]=T,o[y][S[1]]=O,o[y][S[2]]=P}else if("month"===f){var B,Q=[4,5,6],F=[7,8,9],R=[10,11,12],W=[1,2,3],Y=null,L=e.target.id.split("_")[1];Q.includes(+L)?(B="Q1",Y=Q):F.includes(+L)?(B="Q2",Y=F):R.includes(+L)?(B="Q3",Y=R):W.includes(+L)&&(B="Q4",Y=W);var q=0,U=null;Object.keys(o[n]).forEach((function(e){if((e.includes(0)||e.includes(1)||e.includes(2)||e.includes(3)||e.includes(4)||e.includes(5)||e.includes(6)||e.includes(7)||e.includes(8)||e.includes(9))&&!e.includes("Q")){var t,s=e.split("_")[1],a=s.startsWith(0)?s.substring(1):s;null!=a&&null!==(t=Y)&&void 0!==t&&t.includes(+a)&&(q+=parseInt(o[n][e]))}e.includes(B)&&(U=e)})),o[n][U]=q;var z=0;Object.keys(o[n]).forEach((function(e){e.includes("Q")&&(z+=parseInt(o[n][e]))})),o[n].total_target=z;var $=o[n].executive,V=o[n].executive.split("^&"),H=o.filter((function(e){return e.executive==$})).filter((function(e,t){return t>0})).map((function(e){return e[d]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),J=o.filter((function(e){return 2==e.lvl})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),G=o.filter((function(e){var t;return null===(t=e.executive)||void 0===t?void 0:t.includes(V[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),X=o.filter((function(e){return e.executive==$})).filter((function(e,t){return t>0})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),K=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[d]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);o[y][d]=H,o[y].total_target=X,o[1].total_target=J,o[1][d]=K,o[1][U]=o.filter((function(e){return 2==e.lvl})).map((function(e){return e[U]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),o[y][U]=o.filter((function(e){return e.executive==$})).filter((function(e,t){return t>0})).map((function(e){return e[U]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);for(var ee=o,se=0;se<ee.length;se++)ee[se].executive==V[0]+"^&  "&&(ee[se].total_target=G);console.log(ee)}(0,r.Z)((0,r.Z)({},te),{},{data:o}),ne((0,r.Z)((0,r.Z)({},te),{},{data:o}));var ae,re=[],ie=i.split("-"),le="",oe=(0,w.Z)(ie);try{for(oe.s();!(ae=oe.n()).done;){var ce=ae.value;if(!isNaN(parseInt(ce))){le=ce;break}}}catch(me){oe.e(me)}finally{oe.f()}var ue=function(e,t){return{executiveId:s,month:e,typ:"target",val:parseInt(t),targetCatId:parseInt(le),reportRunId:te.reportRunId}};if("quar"===f){var de={Q1:["".concat(parseInt(p)-1,"-04-01"),"".concat(parseInt(p)-1,"-05-01"),"".concat(parseInt(p)-1,"-06-01")],Q2:["".concat(parseInt(p)-1,"-07-01"),"".concat(parseInt(p)-1,"-08-01"),"".concat(parseInt(p)-1,"-09-01")],Q3:["".concat(parseInt(p)-1,"-10-01"),"".concat(parseInt(p)-1,"-11-01"),"".concat(parseInt(p)-1,"-12-01")],Q4:["".concat(parseInt(p),"-01-01"),"".concat(parseInt(p),"-02-01"),"".concat(parseInt(p),"-03-01")]}[v],pe=Math.floor(u/3);de.forEach((function(e,t){var n=pe+(t===de.length-1?u%3:0);re.push(ue(e,n))}))}else if("month"===f){var ve=p+"_"+d.split("_")[1]+"_01";re.push(ue(ve,u))}fe((function(e){return e&&e.data?(e.data=[].concat((0,b.Z)(e.data),re),e):{data:[].concat(re)}}))}(e,t,n,s,0,i)};(0,o.useEffect)((function(){ne(JSON.parse(JSON.stringify(i)))}),[i]);var Me=(0,o.useState)([]),Te=(0,s.Z)(Me,2),Oe=Te[0],Pe=Te[1];(0,o.useEffect)((function(){var e,t=["executive","name"],n=["target","call"],s=(0,r.Z)({},te),i=Object.keys(s).length>0&&(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.map((function(e,s){var i=[];return De.forEach((function(l){var c,u,d,v;l.includes("Q")&&(V=z.includes(l.split("_")[1])?1:0),i.push(e.id<0?(0,B.jsx)("th",{className:("targetFirstTh"===l.split("_")[3]?"":l.split("_")[2])+" targetth targetFirstTh",colSpan:null===(c=e[l])||void 0===c?void 0:c.split("^&")[2],rowSpan:null===(u=e[l])||void 0===u?void 0:u.split("^&")[1],style:{display:0===V&&null!==n&&void 0!==n&&n.some((function(e){return null===l||void 0===l?void 0:l.includes(e)}))&&!(null!==l&&void 0!==l&&l.includes("Q")||null!==l&&void 0!==l&&l.includes("total"))?"none":"",textAlign:"center"},title:e[l].split("^")[0],children:-2===e.id&&null!==(d=e[l])&&void 0!==d&&d.includes("Quart")?(0,B.jsx)("span",{onClick:function(){var e;e=l.split("_")[1],$((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,b.Z)(t),[e])}))},children:z.includes(l.split("_")[1])?(0,B.jsxs)("div",{title:e[l].split("^")[0],children:[(0,B.jsx)(p.ZCH,{size:"0.8em",title:"Hide Details",style:{cursor:"pointer",float:"right"}}),e[l].split("^")[0]]}):(0,B.jsxs)("div",{title:e[l].split("^")[0],children:[(0,B.jsx)(p.jS6,{size:"0.8em",title:"Show Details",style:{cursor:"pointer",float:"right"}}),e[l].split("^")[0]]})}):(0,B.jsxs)("span",{children:[" ",null===(v=e[l])||void 0===v?void 0:v.split("^")[0]]})},l):(0,B.jsx)("td",{className:l.includes("executive")?"executive":l.includes("Q")?l.split("_")[1][1]%2==0?"even":"odd":l.includes("total")?"total":l.includes("0")?l.split("_")[1]%2==0?"innereven":"innerodd":l.includes(!0)?"summer":"winter",title:e[l],style:{display:0!==V||!n.some((function(e){return l.includes(e)}))||l.includes("Q")||l.includes("total")?"":"none",textAlign:"number"===typeof e[l]?"right":""},children:t.includes(l)?(0,B.jsx)(o.Fragment,{children:2==e.lvl||"summary"===e.name?(0,B.jsx)("td",{className:"ellipsis oddd summaryTraget","data-toggle":"tooltip",style:{fontWeight:"bold"},title:e[l].toLocaleString("en-IN"),children:isNaN(parseFloat(e[l]))?e[l]:parseFloat(e[l]).toLocaleString("en-US")}):(0,B.jsxs)("div",{children:[(0,B.jsx)("span",{children:ge[e.execStatus]})," ","summary"!==e.keyAttr&&(0,B.jsx)(M.E49,{style:{float:"right",cursor:"pointer"},title:"Notes",size:"1.5em",onClick:function(){m(!0),j(e)}}),(0,B.jsx)("span",{className:"reddd",style:{fontWeight:"bold"},title:e[l].toLocaleString("en-IN"),children:isNaN(parseFloat(e[l]))?e[l]:parseFloat(e[l]).toLocaleString("en-US")})]})}):(0,B.jsx)(o.Fragment,{children:2===e.lvl&&"total_target"!==l&&1e3===a?(0,B.jsx)("input",{type:"text",id:l,value:te.data[s][l],onChange:function(t){var n=""===t.target.value.trim()?"0":t.target.value,a=(0,b.Z)(te.data);a[s][l]=n,ne((0,r.Z)((0,r.Z)({},te),{},{data:a})),xe(e.targetCatId)},onBlur:function(t){_e(t,e.parentAttr,s,e.id,e.targetCatId,e.keyAttr),Ee(t,s),xe(e.targetCatId)},style:{textAlign:"right"}}):(0,B.jsxs)("span",{children:[" ",isNaN(parseFloat(e[l]))?e[l]:parseFloat(e[l]).toLocaleString("en-US")]})})},l)),l})),(0,B.jsxs)("tr",{children:[i," "]},e.id)})));Pe(i)}),[te,z]),(0,o.useEffect)((function(){console.log(te)}),[te]),(0,o.useEffect)((function(){}),[Oe]);var Be=(0,o.useState)(!1),Qe=(0,s.Z)(Be,2),Fe=Qe[0],Re=Qe[1];function We(e){var t=e.openSave,n=e.setOpenSave,s=e.saveTargetDetails;return(0,B.jsx)("div",{className:"reviewLogDeletePopUp",children:(0,B.jsxs)(f.Tk,{size:"sm",visible:t,onClose:function(){return n(!1)},children:[(0,B.jsx)(f.p0,{className:"",children:(0,B.jsx)(f.fl,{children:(0,B.jsx)("span",{className:"",children:"Save Targets"})})}),(0,B.jsxs)(f.sD,{children:["Targets will change with new values provided, Are you sure ?",(0,B.jsxs)("div",{className:"row",style:{marginTop:"10px"},children:[(0,B.jsx)("button",{style:{marginLeft:"95px"},type:"submit",className:"btn btn-primary col-2",onClick:function(){s(),n(!1)},children:(0,B.jsx)("span",{style:{paddingLeft:"6px"},children:"Yes"})}),(0,B.jsx)("button",{style:{marginLeft:"20px"},type:"submit",className:"btn btn-primary col-2",onClick:function(){n(!1)},children:(0,B.jsx)("span",{style:{paddingLeft:"6px"},children:"No"})})]})]})]})})}return(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12  customCard",children:[(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding targetTablePrnt scrollit ",children:[(0,B.jsx)(F.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right",marginTop:"24px",fontSize:"16px"},cursor:"pointer",onClick:function(){var e=["id","execStatus","lvl","count","isEdit","keyAttr","parentAttr","isActive"],t=i.data,n=new(_().Workbook),a=n.addWorksheet("SalesTarget"),r=Object.keys(t[0]).filter((function(e){return e.includes("_target")})),l=["Q1","04","05","06","Q2","07","08","09","Q3","10","11","12","Q4","01","02","03"],o=r.sort((function(e,t){var n=e.split("_")[1].split("-"),a=(0,s.Z)(n,2),r=a[0],i=a[1],o=t.split("_")[1].split("-"),c=(0,s.Z)(o,2),u=c[0],d=c[1];return 100*l.indexOf(r)+l.indexOf(i)-(100*l.indexOf(u)+l.indexOf(d))})),c=o.indexOf("total_target");-1!==c&&(o.splice(c,1),o.push("total_target"));a.addRow(["Sales Executive"].concat((0,b.Z)(o)));for(var u=function(){for(var n=t[d],r=Object.fromEntries(Object.entries(n).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)}))),i=[r.name].concat((0,b.Z)(o.map((function(e){return r[e]})))),l=(a.addRow(i),2);l<=o.length+1;l++){a.getColumn(l).alignment={horizontal:"right"}}},d=1;d<t.length;d++)u();[1].forEach((function(e){a.getRow(e).font={bold:!0}})),n.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesTarget.xlsx")}))}}),(0,B.jsx)("span",{children:(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:"Targets"})}),(0,B.jsx)("div",{className:"mainTargetTable darkHeader",style:{width:"94%",maxHeight:"400px",overflow:"auto"},children:(0,B.jsx)("table",{className:"table table-bordered table-striped targetTable scrollit ",style:{width:"auto"},children:(0,B.jsx)("thead",{children:Oe})})})]}),(0,B.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"25px"}}),n&&1e3===a?(0,B.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding btn-container center my-3 mb-2",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return Re(!0)},children:[(0,B.jsx)(p.TvB,{}),"Save"," "]}),(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){for(var e=document.getElementsByClassName("empty"),t=0;t<e.length;t++){var n=e[t].id.split("__"),s=parseInt(n[1]),a=n[2];e[t].value=te.data[s][a]}ne(i),fe([])}()},children:[(0,B.jsx)(I.bxQ,{style:{color:"white"}}),"Reset"," "]})]}):""]}),v?(0,B.jsx)(Q,{openPopup:v,accessData:a,setOpenPopup:m,Vdata:i,rowData:S,popupValue:"TargetTable"}):"",Fe?(0,B.jsx)(We,{openSave:Fe,setOpenSave:Re,saveTargetDetails:function(){u().post(Se+"/SalesMS/software/saveSWTargets?loggedUserId=".concat(X,"&reportRunId=").concat(te.reportRunId),ve).then((function(e){l()})).catch((function(e){console.log(e)}))}}):""]})},W=n(38262),Y=n(16030),L=n(49648),q=n(72920),U=n(22804),z=n(57689);function $(e){var t=e.softwareData,n=(e.setTargetReviewsData,e.setTableFlag,e.setSelector),i=(e.showDetails,e.setShowDetails),c=e.setSoftwareData,h=e.setWowDisplay,w=(e.fdate,e.setFdate),b=(e.reportRunId,e.setreportRunId),I=e.setwowtype,N=(e.qdate,e.setQdate),D=e.setTargetDataKeys,k=(e.viewDisplay,e.setViewDisplay),A=(e.wowDate,e.setWOwDate),Z=e.setData,C=e.data,E=e.tableData,_=e.setTableData,M=e.headerData,T=e.setHeaderData,O=e.setViewSlesId,P=(0,z.TH)(),Q=new URLSearchParams(P.search).get("id"),F=(0,o.useState)([]),$=(0,s.Z)(F,2),V=$[0],H=$[1],J=(0,o.useState)([]),G=(0,s.Z)(J,2),X=G[0],K=G[1],ee=(0,o.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=(0,o.useState)("AllSight,AWS,Azure,BIGID,Blue Whale,Boomi,Breakwater,Cleanslate,Collibra,Cyberark,Data Bricks,Data Sentinel,Data.World,DataRobot,dbt Labs,Delinea,Denodo,DiscoverAlpha,EDB,Evolveware,HCL America Inc,IBM,IBM - IM&A,IBM - SI,IBM \u2013 AWS,IBM \u2013 Azure,IBM \u2013 SI,IM&A Other SW,IM&A-Data Fabric,ImageAccess,Informatica,Intellective/Vega,Jedox,Manta,Manta MS Purview Bridge,Mendix,Meta Integration (Miti),Microsoft,MongoDB,MQAttach,MuleSoft,myInvenio,New Relic,Okta,OneTrust,Prolifics - Effecta/SLA/BA360,Prolifics - PPMweb,Qlik,Quest,RedHat,Rocket,Senzing,SI - Other SW,Snowflake,SoftwareAG,SWOne,Talend,Testing Other (HP),Tricentis,UiPath,Unassigned"),re=(0,s.Z)(ae,2),ie=re[0],le=re[1],oe=(0,o.useState)([]),ce=(0,s.Z)(oe,2),ue=ce[0],de=ce[1];(0,o.useEffect)((function(){u()({method:"get",url:Ae+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===Q?0:Q)}).then((function(e){var t=e.data;de(t)}))}),[]);var pe=(0,o.useState)({}),ve=(0,s.Z)(pe,2),fe=ve[0],me=ve[1];(0,o.useEffect)((function(){me((function(){return null!=Q?{mode:null===ue||void 0===ue?void 0:ue.mode,from:ue.from,duration:null===ue||void 0===ue?void 0:ue.duration,vendors:ue.vendors,divisions:ue.divisions,executives:ue.executives,salesId:ue.salesId,isActive:ue.isActive,isIndividual:ue.isIndividual,type:null===ue||void 0===ue?void 0:ue.type,key:"1662974432015",selectExecs:ue.selectExecs,saveSE:"true",optType:ue.optType,quarter:ue.quarter,status:ue.status,duration2:ue.duration2,measures:ue.measures,monthsel:ue.monthsel,viewByTime:ue.viewByTime,fyear:ue.fyear,customers:ue.customers,prospects:ue.prospects,practices:ue.practices,countries:ue.countries,customerType:ue.customerType,summary:ue.summary,showBy:ue.showBy,aelocation:ue.aelocation,engComp:ue.engComp,Divisions:ue.Divisions,accOwner:ue.accOwner,newCust:ue.newCust,accType:ue.accType}:{mode:"view",from:x()(Cs).format("YYYY-MM-DD"),duration:nt,vendors:ie,divisions:Ne,executives:1==ye?_s:ye,salesId:xt,isActive:"true",isIndividual:0==Tt.length?"false":Tt,type:"view",key:"1662974432015",selectExecs:yt,saveSE:"true",optType:-1,quarter:-1,status:-1,duration2:-1,measures:-1,monthsel:-1,viewByTime:-1,fyear:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1}}))}),[ue]),console.log(ue),console.log(fe),(0,o.useEffect)((function(){if(null!=Q){var e=null===ue||void 0===ue?void 0:ue.type,t=null===ue||void 0===ue?void 0:ue.executives,n=null===ue||void 0===ue?void 0:ue.vendors,s=null===V||void 0===V?void 0:V.filter((function(e){return n.includes(e.value)})),a=ue.divisions,r=a?null===a||void 0===a?void 0:a.split(",").map(Number):[],i=Yn.filter((function(e){return null===r||void 0===r?void 0:r.includes(e.value)}));if(void 0!==ue.from&&""!==ue.from){var l=new Date(ue.from);l.setMonth(l.getMonth()-3),l.setFullYear(l.getFullYear()+1),en(l)}var o=fe.duration,c=(i.map((function(e){return parseInt(e.value)})),ue.divisions),u=ue.vendors,d=ue.from;"target"!=ue.type&&(le(u),De(c),st(o),K(s)),"view"==ue.type&&Es(d);var p=ue.showBy,v=null===ue||void 0===ue?void 0:ue.from,f=null===ue||void 0===ue?void 0:ue.from,m=x()(f).startOf("year").month(3).date(1);m.subtract(1,"years");var h=m.format("YYYY-MM-DD"),g=x()(v).format("ddd MMM DD YYYY"),S="".concat(g," 00:00:00 GMT+0530 (India Standard Time)"),j=x()(S).toDate(),y=x()(j).add(1,"year").toDate();if(console.log(j),console.log(h),"target"==ue.type&&(ds(h),we(t),is(y)),"-1"==ue.divisions?$n(Yn):$n(i),"-1"===ue.executives){On("<< Active SE >>")}else if("-3"===ue.executives){On("<< InActive SE >>")}else if("1"===ue.executives){On("<< Select SE >>")}else if("-2"===ue.executives){On("<< All SE >>")}xn(e),an(t),es(p)}}),[Q,null===ue||void 0===ue?void 0:ue.type,null===ue||void 0===ue?void 0:ue.executives,null===ue||void 0===ue?void 0:ue.vendors,ue.divisions,V,null===ue||void 0===ue?void 0:ue.from,null===ue||void 0===ue?void 0:ue.showBy]),(0,o.useEffect)((function(){if(null!=Q){var e=ue.type;xn(e)}}),[Q,ue.type]);var he=(0,o.useState)([]),xe=(0,s.Z)(he,2),ge=xe[0],Se=(xe[1],(0,o.useState)(-2)),je=(0,s.Z)(Se,2),ye=je[0],we=je[1],be=(0,o.useState)(-1),Ie=(0,s.Z)(be,2),Ne=Ie[0],De=Ie[1],ke=(0,o.useRef)(null),Ae=g.N.baseUrl,Ze=localStorage.getItem("resId"),Ce=(0,o.useState)(-2),Ee=(0,s.Z)(Ce,2),_e=(Ee[0],Ee[1],(0,o.useState)([])),Me=(0,s.Z)(_e,2),Te=Me[0],Oe=Me[1],Pe=(0,o.useState)("2023-04-01"),Be=(0,s.Z)(Pe,2),Qe=Be[0],Fe=(Be[1],(0,o.useState)([])),Re=(0,s.Z)(Fe,2),We=Re[0],Ye=Re[1],Le=(0,o.useState)([]),qe=(0,s.Z)(Le,2),Ue=qe[0],ze=qe[1],$e=(0,o.useState)([]),Ve=(0,s.Z)($e,2),He=Ve[0],Je=(Ve[1],(0,o.useState)(!1)),Ge=(0,s.Z)(Je,2),Xe=Ge[0],Ke=Ge[1],et=(0,o.useState)("4"),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],at=(new AbortController,(0,o.useRef)([])),rt=(0,Y.I0)(),it=(0,o.useState)(ye),lt=(0,s.Z)(it,2),ot=(lt[0],lt[1]);(0,o.useEffect)((function(){ot(Et)}),[ye]);var ct=(0,o.useState)(new Date(He)),ut=(0,s.Z)(ct,2),dt=ut[0],pt=(ut[1],(0,Y.v9)((function(e){return e.selectedSEState.directSETreeData}))),vt=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal")),ft=vt.findIndex((function(e){return e.key})),mt=(0,o.useState)(""),ht=(0,s.Z)(mt,2),xt=ht[0],gt=ht[1],St=(0,o.useState)(""),jt=(0,s.Z)(St,2),yt=jt[0],wt=jt[1],bt=(0,o.useState)(0),It=(0,s.Z)(bt,2),Nt=(It[0],It[1]),Dt=(0,o.useState)(""),kt=(0,s.Z)(Dt,2),At=(kt[0],kt[1]);(0,o.useEffect)((function(){if(-1!==ft){var e=vt[ft].id,t=vt[ft].text+" & Team";1==ye&&(wt(t),gt(e))}}),[ft,ye]);var Zt=vt.map((function(e){return e.id})),Ct=(vt.filter((function(e){return"directsalesEx"===e.key})).map((function(e){return e.id})),vt.filter((function(e){return!e.key||"directsalesEx"!==e.key})).map((function(e){return e.salesPersonName}))),Et=Zt.join(","),_t=Ct.join(","),Mt=yt+_t;(0,o.useEffect)((function(){1===ye&&(Nt(Et),ot(Et),At(Mt))}),[ye]),(0,o.useEffect)((function(){rt((0,L.jz)(ye))}),[ye]);var Tt=(0,Y.v9)((function(e){return e.selectedSEState.isIndividualChecked}));var Ot=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},Pt=vt.map((function(e){if(Array.isArray(e)){var t=(0,s.Z)(e,1)[0];if(t&&t.id&&t.text&&"fte1"===t.type&&"id"===t.parent)return{salesPersonName:t.text,type:t.type,id:parseInt(t.id),status:JSON.parse(t.li_attr).sestatus||"empActive"}}return e})),Bt=Pt.filter((function(e,t){return t===Pt.findIndex((function(t){return e.id===t.id}))})).filter((function(e){return!Array.isArray(e)||0===e.length})),Qt=Pt.map((function(e){return e.id})).filter((function(e){return"number"===typeof e})),Ft=(Qt.map((function(e){return We})),Bt.map((function(e){return e.salesPersonName&&e.salesPersonName,"".concat(e.salesPersonName)})).join(","),Bt.map((function(e){return"Kirsten Craft"===e.salesPersonName?"".concat(e.salesPersonName," & team"):e.salesPersonName})).join(","),Bt.map((function(e){return e.id})).join(","),(0,o.useState)(!1)),Rt=(0,s.Z)(Ft,2),Wt=Rt[0],Yt=Rt[1],Lt=(0,o.useState)(!1),qt=(0,s.Z)(Lt,2),Ut=qt[0],zt=qt[1],$t=(0,o.useState)(!1),Vt=(0,s.Z)($t,2),Ht=Vt[0],Jt=Vt[1],Gt=(0,o.useState)((function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e.setMonth(e.getMonth()-3),e})),Xt=(0,s.Z)(Gt,2),Kt=Xt[0],en=Xt[1],tn=(0,o.useState)(-2),nn=(0,s.Z)(tn,2),sn=nn[0],an=nn[1],rn=(0,o.useState)(!1),ln=(0,s.Z)(rn,2),on=ln[0],cn=ln[1],un=(0,o.useState)(!1),dn=(0,s.Z)(un,2),pn=dn[0],vn=dn[1],fn=(0,o.useState)("view"),mn=(0,s.Z)(fn,2),hn=mn[0],xn=mn[1],gn=(0,o.useState)([]),Sn=(0,s.Z)(gn,2),jn=(Sn[0],Sn[1]),yn=(0,o.useState)([]),wn=(0,s.Z)(yn,2),bn=(wn[0],wn[1]),In=(0,o.useState)(""),Nn=(0,s.Z)(In,2),Dn=(Nn[0],Nn[1],(0,o.useState)([])),kn=(0,s.Z)(Dn,2),An=(kn[0],kn[1]),Zn=(0,o.useState)([]),Cn=(0,s.Z)(Zn,2),En=(Cn[0],Cn[1]),_n=(0,o.useState)("<< All SE >>"),Mn=(0,s.Z)(_n,2),Tn=Mn[0],On=Mn[1];console.log(Tn);var Pn=(0,o.useState)([]),Bn=(0,s.Z)(Pn,2),Qn=Bn[0],Fn=Bn[1],Rn=(0,o.useState)([]),Wn=(0,s.Z)(Rn,2),Yn=Wn[0],Ln=Wn[1],qn=(0,o.useState)([]),Un=(0,s.Z)(qn,2),zn=Un[0],$n=Un[1],Vn=(0,o.useState)(!1),Hn=(0,s.Z)(Vn,2),Jn=(Hn[0],Hn[1]),Gn=(new Date,(0,o.useState)("week")),Xn=(0,s.Z)(Gn,2),Kn=Xn[0],es=Xn[1],ts=(x()(Kt).clone().add(1,"year").toDate(),new Date),ns=new Date(ts.getFullYear()+1,ts.getMonth(),ts.getDate());(0,o.useEffect)((function(){rt((0,L.FT)(ie)),rt((0,L.I5)(X)),rt((0,L._M)(zn))}),[ie,X,zn]);var ss=(0,o.useState)(ns),as=(0,s.Z)(ss,2),rs=as[0],is=as[1],ls=x()(Kt).format("yyyy-MM-DD").split("-")[0],os=(x()({year:ls,month:0}).startOf("month").format("YYYY-MM-DD"),(0,o.useState)("2023-04-01")),cs=(0,s.Z)(os,2),us=cs[0],ds=cs[1],ps=dt;ps.setDate(ps.getDate()-9);ps.setMonth(ps.getMonth()-4);ps.setFullYear(ps.getFullYear()-0);var vs=(0,o.useState)([]),fs=(0,s.Z)(vs,2),ms=(fs[0],fs[1]),hs=(0,o.useState)([]),xs=(0,s.Z)(hs,2),gs=(xs[0],xs[1]),Ss=(0,o.useState)([]),js=(0,s.Z)(Ss,2),ys=(js[0],js[1]),ws=function(e){e.expanded;return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(p.qL$,{className:"chevronIcon"})})},bs=(0,o.useState)([]),Is=(0,s.Z)(bs,2),Ns=Is[0],Ds=Is[1];(0,o.useEffect)((function(){ks()}),[]);var ks=function(){u()({method:"GET",url:Ae+"/CommonMS/master/getMenus?loggedUserId=".concat(Ze)}).then((function(e){var t=e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Project Timesheet (Deprecated)"!==e.display_name&&"Invoice Details"!==e.display_name&&"Accounting"!==e.display_name&&"Upload"!==e.display_name&&"Practice Calls [Deprecated]"!==e.display_name}))),e}));t.forEach((function(e){"Sales"===e.display_name&&Ds([e])}));var n=t.find((function(e){return"Sales"===e.display_name})).subMenus.find((function(e){return"S/W Plan & Review"===e.display_name}));ze(n.access_level)}))};(0,o.useEffect)((function(){u().get(Ae+"/SalesMS/software/getSalesVendors").then((function(e){var t=e.data,n=[];t.forEach((function(e){var t={label:e.vendor};n.push(t)})),bn(n),jn(n)})),u().get(Ae+"/SalesMS/software/getSalesVendors").then((function(e){var t=e.data,n=[];t.forEach((function(e){var t={label:e.vendor,value:e.vendor};n.push(t)}));var s=n.some((function(e){return"Prolifics - Jam/Panther/XMLink"===e.value}))?n.filter((function(e){return"Prolifics - Jam/Panther/XMLink"!==e.value})):n;H(n),K(s),se(s)}))}),[]);ge.join(","),ge.some((function(e){return e.user_id===+Ze}));var As=(0,o.useState)((function(){var e=new Date,t=e.getFullYear(),n=Math.floor((e.getMonth()+3)/3);return new Date(t,3*(n-1),1)})),Zs=(0,s.Z)(As,2),Cs=Zs[0],Es=Zs[1],_s=pt,Ms={mode:"edit",from:Qe,duration:"4",vendors:"-1",divisions:"-1",executives:"0",isActive:"true",isIndividual:0==Tt.length?"false":Tt,type:"target",key:"1662978029003",selectExecs:"-2",saveSE:"true",customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:-1,optType:-1,quarter:-1,status:-1,duration2:-1,monthsel:-1,viewByTime:-1,fyear:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1,measures:-1},Ts={mode:"wow",from:x()(Cs).format("YYYY-MM-DD"),duration:nt,vendors:ie,divisions:Ne,executives:1==ye?Et:ye,type:"wow",subType:"detail",isActive:"true",isIndividual:0==Tt.length?"false":Tt,saveSE:"false",selectExecs:"",showBy:Kn,optType:-1,quarter:-1,status:-1,duration2:-1,measures:-1,monthsel:-1,viewByTime:-1,fyear:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1},Os=(x()(Kt),{mode:"view",from:x()(Cs).format("YYYY-MM-DD"),duration:nt,vendors:ie,divisions:Ne,executives:1==ye?_s:ye,salesId:xt,isActive:"true",isIndividual:0==Tt.length?"false":Tt,type:"view",key:"1662974432015",selectExecs:yt,saveSE:"true",optType:-1,quarter:-1,status:-1,duration2:-1,measures:-1,monthsel:-1,viewByTime:-1,fyear:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1}),Ps=function(e){var t=e.id,n=e.value;N(n),w(n),me((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},t,n))}));var s=pt.slice(0,-1);switch(n){case"view":me((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"view",from:x()(Cs).format("YYYY-MM-DD"),duration:nt,vendors:ie,divisions:Ne,executives:1==ye?_s:ye,salesId:xt,isIndividual:0==Tt.length?"false":Tt,type:"view",selectExecs:yt})}));break;case"target":me((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"edit",from:us,duration:"4",vendors:"AllSight,AWS,Azure,BIGID,Breakwater,Cleanslate,Collibra,Data Bricks,Data Sentinel,Data.World,DataRobot,dbt Labs,Denodo,DiscoverAlpha,EDB,Evolveware,HCL America Inc,IBM,IBM - IM&A,IBM - SI,IBM \u2013 AWS,IBM \u2013 Azure,IBM \u2013 SI,IM&A Other SW,IM&A-Data Fabric,ImageAccess,Informatica,Intellective/Vega,Jedox,Manta,Manta MS Purview Bridge,Mendix,Meta Integration (Miti),Microsoft,MongoDB,MQAttach,MuleSoft,myInvenio,New Relic,Okta,OneTrust,Prolifics - Effecta/SLA/BA360,Prolifics - Jam/Panther/XMLink,Prolifics - PPMweb,Qlik,Quest,RedHat,Rocket,Senzing,SI - Other SW,Snowflake,SWOne,Talend,Testing Other (HP),Tricentis,UiPath,Unassigned",divisions:"-1",executives:1==ye?s:ye,isActive:"true",isIndividual:0==Tt.length?"false":Tt,type:"target",key:"1662978029003",selectExecs:Mt,salesId:xt})}));break;case"wow":me((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"wow",from:x()(Cs).format("YYYY-MM-DD"),duration:nt,vendors:ie,divisions:Ne,executives:1==ye?Et:ye,type:"wow",subType:"detail",isActive:"true",isIndividual:0==Tt.length?"false":Tt,saveSE:"false",selectExecs:"",showBy:Kn})}))}"executives"===t&&"1"===n&&Yt(!0)},Bs=function(){i(!1);var e=null!=Q?fe:Os,t=at.current.filter((function(e){return null!=e}));at.current=t;var n=(0,m.Z)(at);if(1==n&&(Jn(!1),vn(!0)),!n){switch(hn){case"target":e=Ms;break;case"view":e=Os;break;case"wow":e=Ts}"1"===e.executives&&(e.executives=String(JSON.parse(localStorage.getItem("selectedSELocal")).map((function(e){return e.id})))),"1"===e.executives&&(e.isActive=JSON.parse(localStorage.getItem("isIndividualCheckedLocal"))),"1"!==e.customers||null!==localStorage.getItem("selectedCust")&&void 0!==localStorage.getItem("selectedCust")&&"[]"!==localStorage.getItem("selectedCust")?Fs():vn(!0),i(!0)}},Qs={Q1:"04",Q2:"07",Q3:"10",Q4:"01"};var Fs=function(){var e=null!=Q?fe:Os;switch(hn){case"target":e=null!=Q?fe:Ms;break;case"view":e=null!=Q?fe:Os;break;case"wow":e=null!=Q?fe:Ts}Jn(!1),vn(!1),"1"===e.executives&&(e.executives=String(JSON.parse(localStorage.getItem("selectedSELocal")).map((function(e){return e.id})))),"1"===e.customers&&(e.customers=String(JSON.parse(localStorage.getItem("selectedCust")).map((function(e){return e.id})))),u().post(Ae+"/SalesMS/software/getSalesSoftwareData",e).then((function(e){var t;zt(!1);var n=e.data.data,s=e.data.reportRunId;if("view"==hn){var a,r=function(e){var t=new Date(e);t.setFullYear(t.getFullYear()-1);var n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(s,"-").concat(a)}(function(e){var t=null===e||void 0===e?void 0:e.match(/^(\d{4})-Q(\d)$/);if(t){var n=parseInt(t[1],10),s=parseInt(t[2],10);4===s&&n++;var a=Qs["Q".concat(s)];return"".concat(n,"-").concat(a,"-").concat("01")}return null}(null===(a=(null===n||void 0===n?void 0:n.filter((function(e){return 1===e.lvl})).map((function(e){return{quat:e.quarter,date:e.date}})))[0])||void 0===a?void 0:a.quat));rt((0,L.Gl)(r))}rt((0,L.YY)(s));var i=[];switch(hn){case"target":i=null===(t=e.data.swTargets)||void 0===t?void 0:t.split(",");break;case"view":i=["id","quarter","executive","execStatus","country","target","oppAmount","calls","upside","gap","lvl","closedAmount","isActive"];break;case"wow":i="week"===Ts.showBy?["id","weekno","date","executive","execStatus","supervisor","target","oppAmount","calls","upside","gap","closedAmount","lvl","count"]:["id","executive","weekno","date","execStatus","target","oppAmount","clls","upside","gap","closedAmount","lvl","count","supervisor"],I(Ts.showBy)}var l=n.map((function(e){return JSON.parse(JSON.stringify(e,i,4))}));c(l),b(s),Jn(!1),h(!0),k(!0),D(e.data.swTargets),qs(!Ls),Vs(Ls?p.UdN:p.NR5)})).catch((function(e){console.log(e)}))},Rs=function(){var e=(0,m.Z)(at);1==e&&(Jn(!1),vn(!0)),vn(!1),zt(!0),Jt(!1);var t=pt.slice(0,-1),n="";if(null!=Q){var s=null===ue||void 0===ue?void 0:ue.from,a=new Date(s);a.setFullYear(a.getFullYear());var r=a.getMonth();if(r<0||r>11)a.setMonth(0);else{var i=3*Math.ceil((r+1)/3);a.setMonth(i)}var l=a.toISOString().slice(0,10);console.log("Modified Date:",l),n=l}console.log(n),u()({method:"post",url:Ae+"/SalesMS/services/getSalesTargetsSW",data:{mode:"edit",from:null==Q?us:n,duration:"4",vendors:"AllSight,AWS,Azure,BIGID,Breakwater,Cleanslate,Collibra,Data Bricks,Data Sentinel,Data.World,DataRobot,dbt Labs,Denodo,DiscoverAlpha,EDB,Evolveware,HCL America Inc,IBM,IBM - IM&A,IBM - SI,IBM \u2013 AWS,IBM \u2013 Azure,IBM \u2013 SI,IM&A Other SW,IM&A-Data Fabric,ImageAccess,Informatica,Intellective/Vega,Jedox,Manta,Manta MS Purview Bridge,Mendix,Meta Integration (Miti),Microsoft,MongoDB,MQAttach,MuleSoft,myInvenio,New Relic,Okta,OneTrust,Prolifics - Effecta/SLA/BA360,Prolifics - Jam/Panther/XMLink,Prolifics - PPMweb,Qlik,Quest,RedHat,Rocket,Senzing,SI - Other SW,Snowflake,SWOne,Talend,Testing Other (HP),Tricentis,UiPath,Unassigned",divisions:Ne,executives:1==ye?t:ye,isActive:"true",isIndividual:0==Tt.length?"false":Tt,type:"target",key:"1662978029003",selectExecs:Mt,salesId:xt,saveSE:"true",customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:-1,optType:-1,quarter:-1,status:-1,duration2:-1,monthsel:-1,viewByTime:-1,fyear:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1,measures:-1},headers:{"Content-Type":"application/json"}}).then((function(t){var n=t.data;_(n),Oe(n.reportRunId),T(n.summary[0]),Z(n.data),Ke(!0),zt(!1),!e&&qs(!Ls),Vs(Ls?p.UdN:p.NR5),Jt(!0)}))};(0,o.useEffect)((function(){u().get(Ae+"/SalesMS/MasterController/salesExecutiveData").then((function(e){var t=e.data.filter((function(e){return 1===e.isActive})).map((function(e){return(0,B.jsx)("option",{value:e.val,children:e.lkupName},e.id)}));Fn(t)})).catch((function(e){console.log(e)})),u().get(Ae+"/SalesMS/MasterController/SFOwnerDivisions").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.owner_Division}}));Ln(t),$n(t),ms((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"divisions",String(t.map((function(e){return e.value})))))})),gs((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"divisions",String(t.map((function(e){return e.value})))))})),ys((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"divisions",String(t.map((function(e){return e.value})))))}))})).catch((function(e){console.log(e)})),u().get(Ae+"/CommonMS/master/getSalesVendors").then((function(e){var t=e.data.map((function(e){return{value:e,label:e}}));An(t),En(t),ms((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"vendors",String(t.map((function(e){return e.value})))))})),gs((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"vendors",String(t.map((function(e){return e.value})))))})),ys((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"vendors",String(t.map((function(e){return e.value})))))}))})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){n(hn)}),[t]);var Ws=(0,o.useState)(!1),Ys=(0,s.Z)(Ws,2),Ls=Ys[0],qs=Ys[1],Us=(0,o.useState)(p.UdN),zs=(0,s.Z)(Us,2),$s=zs[0],Vs=zs[1],Hs=(0,o.useState)(!1),Js=(0,s.Z)(Hs,2),Gs=Js[0],Xs=Js[1];return(0,o.useEffect)((function(){null!==Q&"target"!=fe.type&&setTimeout((function(){Bs()}),3e3)}),[fe]),(0,o.useEffect)((function(){null!=Q&&"target"===fe.type&&setTimeout((function(){Rs()}),3e3)}),[fe]),(0,B.jsxs)("div",{children:[Ut?(0,B.jsx)(v.Z,{handleAbort:function(){ke.current&&ke.current.abort(),zt(!1)}}):"",(0,B.jsx)("div",{className:"col-md-12",children:(0,B.jsxs)("div",{className:"pageTitle",children:[(0,B.jsx)("div",{className:"childOne"}),(0,B.jsx)("div",{className:"childTwo",children:(0,B.jsx)("h2",{children:"S/W Plan and Review"})}),(0,B.jsx)("div",{className:"childThree"})]})}),(0,B.jsx)(W.Z,{routes:Ns,currentScreenName:["S/W Plan and Review"]}),(0,B.jsx)("div",{}),pn?(0,B.jsxs)("div",{className:"statusMsg error",children:[" ",(0,B.jsx)(d.CSE,{})," Please select valid values for highlighted fields"]}):"",Gs?(0,B.jsxs)("div",{className:"statusMsg error",children:[" ",(0,B.jsx)(d.CSE,{}),"No Modifications to Save"]}):"",on?(0,B.jsx)("div",{className:"statusMsg success",children:(0,B.jsxs)("span",{className:"errMsg",children:[(0,B.jsx)(y.hXj,{size:"1.4em"})," \xa0 Search created successfully."]})}):"",(0,B.jsxs)("div",{className:"group customCard",children:[(0,B.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,B.jsx)("h2",{children:"Search Filters"}),(0,B.jsx)("div",{className:"helpBtn",children:(0,B.jsx)(q.Z,{pdfname:"SW Plan and Review.pdf",name:"S/W Plan and Review Help"})}),(0,B.jsx)("div",{className:"col-md-0 saveBtn",children:(0,B.jsx)(U.Z,{setEditAddmsg:cn,pageurl:"http://10.11.12.149:3000/#/pmo/salesSoftwares",page_Name:"Sales",payload:fe})})," ","\xa0\xa0",(0,B.jsx)("div",{onClick:function(){qs(!Ls),Vs(Wt?p.UdN:p.NR5)},children:(0,B.jsx)("span",{children:$s})})]}),(0,B.jsx)(f.V9,{visible:!Ls,children:(0,B.jsxs)("div",{className:"group-content row",children:[(0,B.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsx)("label",{className:"col-5",children:"Action"}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 ",style:{height:"23px"},children:(0,B.jsxs)("select",{id:"type",value:hn,className:"col-md-12 col-sm-12 col-xs-12 ",onChange:function(e){!function(){var e=new Date;e.setFullYear(e.getFullYear()+1),e.setMonth(e.getMonth()-3),en(e),is(ns),an(-2),K(ne),On("<< All SE >>"),we(-2),le("AllSight,AWS,Azure,BIGID,Boomi,Breakwater,Cleanslate,Collibra,Cyberark,Data Bricks,Data Sentinel,Data.World,DataRobot,dbt Labs,Delinea,Denodo,DiscoverAlpha,EDB,Evolveware,HCL America Inc,IBM,IBM - IM&A,IBM - SI,IBM \u2013 AWS,IBM \u2013 Azure,IBM \u2013 SI,IM&A Other SW,IM&A-Data Fabric,ImageAccess,Informatica,Intellective/Vega,Jedox,Manta,Manta MS Purview Bridge,Mendix,Meta Integration (Miti),Microsoft,MongoDB,MQAttach,MuleSoft,myInvenio,New Relic,Okta,OneTrust,Prolifics - Effecta/SLA/BA360,Prolifics - PPMweb,Qlik,Quest,RedHat,Rocket,Senzing,SI - Other SW,Snowflake,SoftwareAG,SWOne,Talend,Testing Other (HP),Tricentis,UiPath,Unassigned"),$n(Yn);var t=Yn.label;De(t)}(),Ps(e.target),xn(e.target.value),e.target.value},children:[(0,B.jsx)("option",{value:"target",children:"Targets"}),(0,B.jsx)("option",{value:"view",children:"View"}),(0,B.jsx)("option",{value:"wow",children:"WoW"})]})})]})}),(0,B.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5 ",children:["Sales Executive"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 textfield",children:1e3===Ue||500===Ue?(0,B.jsxs)("select",{id:"executives",className:"text",value:sn,onChange:function(e){Ps({id:"executives",value:e.target.value}),an(e.target.value),we(e.target.value),O(e.target.value),On(e.target.options[e.target.selectedIndex].text)},ref:function(e){at.current[0]=e},children:[(0,B.jsx)("option",{value:"",children:"<< Please select>> "}),Qn]}):(0,B.jsxs)("select",{id:"executives",className:"text",value:sn,onChange:function(e){Ps({id:"executives",value:e.target.value}),an(e.target.value),we(e.target.value),O(e.target.value),On(e.target.options[e.target.selectedIndex].text)},ref:function(e){at.current[0]=e},children:[(0,B.jsx)("option",{value:"",children:"<< Please select>> "}),(0,B.jsx)("option",{value:"1",children:"Select SE"})]})})]})}),"target"===hn&&(0,B.jsx)("div",{className:"col-md-4 mb-2",children:(0,B.jsxs)("div",{className:"form-group row",id:"week-picker-wrapper",children:[(0,B.jsxs)("label",{className:"col-5",children:["Financial Year"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 datepicker targetDatepicker",ref:function(e){at.current[1]=e},children:(0,B.jsx)(l(),{id:"startDate",selected:rs,onChange:function(e){var t=new Date(e.getFullYear()+1,e.getMonth(),e.getDate());en(e),is(t),function(e){var t=e.id,n=e.value,s=x()(n).format("yyyy-MM-DD").split("-")[0],i=x()({year:s,month:3}).startOf("month").format("YYYY-MM-DD");ds(i),A(i),me((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"from",x()(i).format("yyyy-MM-DD")))})),"executives"===t&&"1"===n&&Yt(!0)}({id:"from",value:e.toLocaleDateString("en-CA")}),Ps({id:"from",value:e.toLocaleDateString("en-CA")})},dateFormat:"'FY' yyyy",showYearPicker:!0,yearDropdownItemNumber:4})})]})}),("view"===hn||"wow"===hn)&&(0,B.jsx)("div",{className:"col-md-4 mb-2",children:(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Vendors ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 multiselect",style:{height:"23px"},ref:function(e){at.current[2]=e},children:(0,B.jsx)(j.NU,{ArrowRenderer:ws,id:"vendors",options:V,hasSelectAll:!0,value:X,disabled:!1,valueRenderer:Ot,onChange:function(e){K(e);var t=[];e.forEach((function(e){t.push(e.value)})),le(t.toString()),Ps({id:"vendors",value:t.toString()})}})})]})}),("view"===hn||"wow"===hn)&&(0,B.jsxs)("div",{className:"col-md-4 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"12px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Owner Division"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 multiselect",style:{height:"23px"},ref:function(e){at.current[3]=e},children:(0,B.jsx)(j.NU,{ArrowRenderer:ws,valueRenderer:Ot,options:Yn,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:zn,disabled:!1,onChange:function(e){$n(e);var t=[];e.forEach((function(e){t.push(e.value)})),De(t.toString()),Ps({id:"divisions",value:t.toString()})}})})]})]}),("view"===hn||"wow"===hn)&&(0,B.jsxs)("div",{className:"col-md-4 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,B.jsxs)("div",{className:"form-group row",id:"week-picker-wrapper",children:[(0,B.jsxs)("label",{className:"col-5",children:["From Quarter"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 datepicker",style:{height:"23px"},ref:function(e){at.current[4]=e},children:(0,B.jsx)(l(),{selected:Kt,onChange:function(e){en(e);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1),t.setMonth(t.getMonth()+3),Es(t),Ps({id:"from",value:t.toLocaleDateString("en-CA")})},dateFormat:"'FY' yyyy-QQQ",showQuarterYearPicker:!0})})]})]}),"view"===hn&&(0,B.jsxs)("div",{className:"col-md-4 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"12px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsx)("label",{className:"col-5",children:"Duration"}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6",style:{height:"23px"},children:(0,B.jsxs)("select",{id:"duration",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",value:null===fe||void 0===fe?void 0:fe.duration,onChange:function(e){st(e.target.value),Ps(e.target)},children:[(0,B.jsx)("option",{value:"1",children:"1"}),(0,B.jsx)("option",{value:"2",children:"2"}),(0,B.jsx)("option",{value:"3",children:"3"}),(0,B.jsx)("option",{value:"4",children:"4"})]})})]})]}),"wow"===hn&&(0,B.jsxs)("div",{className:"col-md-4 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"12px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsx)("label",{className:"col-5",children:"Show By"}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6",style:{height:"23px"},children:(0,B.jsxs)("select",{id:"showBy",name:"showBy",className:"col-md-12 col-sm-12 col-xs-12 ",value:Kn,onChange:function(e){es(e.target.value),Ps({id:"showBy",value:e.target.value})},children:[(0,B.jsx)("option",{value:"week",children:"Week"}),(0,B.jsx)("option",{value:"exec",children:"Sales Executive"})]})})]})]}),(0,B.jsx)("div",{className:"col-md-12 no-padding section",children:(0,B.jsxs)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"},children:[" ",(0,B.jsxs)("span",{className:"selectedSE",children:[(0,B.jsx)("b",{children:"Selected SE : "}),(0,B.jsx)("span",{className:"dynText",children:"<< Select SE >>"===Tn?vt.map((function(e,t){return(0,B.jsxs)("span",{children:[Tt?e.salesPersonName?e.salesPersonName:e.text:e.salesPersonName?e.salesPersonName:e.text+" & Team",t===vt.length-1?"":", "]},e.id)})):Tn})]}),(0,B.jsx)("div",{className:"clearfix ",style:{height:"5px"}})]})}),"target"==hn?(0,B.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 search btn-container center",children:(0,B.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){Rs(),Ke(!1),h(!1),i(!1)},children:[(0,B.jsx)(p.U41,{})," Search"," "]})}):(0,B.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 search btn-container center",children:(0,B.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){Bs(),h(!1),Ke(!1),k(!1)},children:[(0,B.jsx)(p.U41,{})," Search"," "]})}),(0,B.jsx)(S.default,{visible:Wt,setVisible:Yt,setGrpId:Ye,accessData:Ue})]})}),(0,B.jsx)("br",{}),Xe&&(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(R,{data:C,setData:Z,tableData:E,buttonAction:Ht,reportId:Te,setTableData:_,headerData:M,loader:Ut,setHeaderData:T,setErrorMessage:Xs,getData1:Rs,accessData:Ue})})]})]})}var V=n(11634);function H(e){e.docId;var t=e.sfDocs,n=(0,o.useState)(!1),a=(0,s.Z)(n,2),r=(a[0],a[1],g.N.baseUrl);(0,o.useRef)(null);return(0,B.jsx)("div",{className:"darkHeader",children:(0,B.jsxs)("table",{className:"table table-bordered table-striped attainTable ",style:{width:"50%"},children:[(0,B.jsx)("thead",{children:(0,B.jsxs)("tr",{className:"fs10",children:[(0,B.jsx)("th",{className:"",children:"Document Name"}),(0,B.jsx)("th",{style:{textAlign:"center"},children:"Action"})]})}),(0,B.jsx)("tbody",{children:null!==t&&void 0!==t&&t.data&&t.data.length>0?t.data.map((function(e){return(0,B.jsxs)("tr",{children:[(0,B.jsx)("td",{children:e.name}),(0,B.jsx)("td",{style:{textAlign:"center"},children:"DocLInk"==e.type?(0,B.jsx)("a",{href:r+"/SalesMS/sales/downloadDoc?docId=".concat(e.docId,"&type=").concat(e.docType),children:(0,B.jsx)("div",{title:"Download Document",children:(0,B.jsx)(V.Z,{style:{color:"#6c9842"}})})}):""})]},e.docId)})):(0,B.jsx)("tr",{children:(0,B.jsx)("td",{colSpan:"2",style:{textAlign:"center"},children:"No Document Found"})})})]})})}function J(e){var t,n=e.viewDetailsData,a=e.srchQuat,r=(e.executive,e.SalesExecutive,e.filterExectiveName),i=e.filtertrue,l=e.getviewDetailsData,c=(e.setCust,e.cust);console.log(c);var d=n.filter((function(e){return 1===e.lvl})).map((function(e){return e.customer})),f=(0,Y.v9)((function(e){return e.selectedSEState.actionData}));console.log(f),(0,o.useEffect)((function(){var e=null===c||void 0===c?void 0:c[0];S([e])}),[c]);var m=(0,o.useState)([]),h=(0,s.Z)(m,2),x=h[0],S=h[1],j=(p.gbA,p.gbA,null===(t=r[0])||void 0===t?void 0:t.label),y=(0,o.useState)([]),w=(0,s.Z)(y,2),I=w[0],E=w[1],T=g.N.baseUrl,O=(0,o.useState)(!1),P=(0,s.Z)(O,2),Q=P[0],R=P[1],W=(0,o.useState)(""),L=(0,s.Z)(W,2),q=L[0],U=L[1],z=(0,o.useState)([]),$=(0,s.Z)(z,2),V=$[0],J=$[1],G=(0,o.useState)(!1),X=(0,s.Z)(G,2),K=X[0],ee=X[1],te=(0,o.useRef)(null),ne=function(e){var t=setTimeout((function(){R(!0)}),2e3);te.current=new AbortController,u()({method:"post",url:T+"/SalesMS/sales/getSFOppDocs",data:{oppId:e}}).then((function(e){var n=e.data;J(n.data),ee(!0),R(!1),clearTimeout(t),window.scrollTo({top:1500,behavior:"smooth"})}))},se=function(e){S("Summary"===e?function(e){return e.length===d.length?[]:d}:function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,b.Z)(t),[e])})},ae=0,re={fte0:(0,B.jsx)("img",{src:D,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,B.jsx)("img",{src:N,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,B.jsx)("img",{src:k,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,B.jsx)("img",{src:Z,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,B.jsx)("img",{src:A,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,B.jsx)("img",{src:C,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},ie=n.map((function(e){var t=["lvl","execStatus","customerId","oppId","sfOppId","id","isActive","executive_division","supervisor","isProspect","count","isEdit","isDeleted","keyAttr","parentAttr","add_to_call"],n=["upside","oppAmount","calls","closedAmount"],s=["opportunity","vendor","probability","closeDate","week","comments"],a=["opportunity"],r=[];for(var i in ae=2===e.lvl||3===e.lvl?ae:null!==x&&void 0!==x&&x.includes(e.customer)?1:0,e)(null===t||void 0===t||!t.includes(i))&&((null===x||void 0===x?void 0:x.length)>0||(null===s||void 0===s||!s.includes(i)))&&r.push(e.id<0?(0,B.jsxs)("th",{className:i+" pipeth ",title:e[i],style:{textAlign:"opportunity"===i?"center":""},children:["Sales Executive /<br>__iconCust__ Customer __iconProsp__ Prospect"===e[i]?(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-1",children:[(0,B.jsx)("span",{title:e[i],children:e[i].split("/")[0]})," /",(0,B.jsx)(p.gbA,{style:{color:"#539a71"}}),e[i].split("_")[4],(0,B.jsx)(p.gbA,{style:{color:"#9567c2",marginLeft:"5px"}})," ",e[i].split("_")[8]]}):"",n.includes(i)?(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("div",{title:"Amount ($)"===e[i]?"Pipeline ($)":"Closed Amt ($)"===e[i]?"Closed ($)":e[i].split("/")[0],children:"Amount ($)"===e[i]?"Pipeline ($)":"Closed Amt ($)"===e[i]?"Closed ($)":e[i].split("/")[0]}),e[i].split("_")[4],e[i].split("_")[8]]}):"",a.includes(i)?(0,B.jsx)(o.Fragment,{children:"opportunity"===i?(0,B.jsxs)("div",{title:e[i],children:[e[i].split("<br>")[0],(0,B.jsx)("br",{}),(0,B.jsx)(p.gbA,{style:{color:"#539a71"}})," Add to Call"]}):(0,B.jsx)("div",{title:e[i],children:e[i]})}):"",s.includes(i)&&"opportunity"!==i?(0,B.jsx)(o.Fragment,{children:(0,B.jsx)("div",{title:e[i],children:e[i]})}):""]},i):(0,B.jsxs)("td",{style:{display:0!==ae||2!==e.lvl&&3!==e.lvl?"":"none",textAlign:"calls"===i||"closedAmount"===i||"gap"===i||"oppAmount"===i||"target"===i||"upside"===i||"probability"===i?"end":""},title:e[i],children:[n.includes(i)?(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("span",{title:parseInt(e[i]).toLocaleString("en-US"),style:{textAlign:"end"},children:" "===e[i]?e[i]:"NaN"===parseInt(e[i]).toLocaleString("en-US")?" ":parseInt(e[i]).toLocaleString("en-US")}),"\xa0"]}):(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("span",{onClick:function(){se(null===e||void 0===e?void 0:e.customer)},children:(1===e.lvl||0===e.lvl)&&"customer"===i&&(null!==x&&void 0!==x&&x.includes(e.customer)||"Summary"===e.customer&&(null===x||void 0===x?void 0:x.length)===(null===d||void 0===d?void 0:d.length)?(0,B.jsx)(p.qL$,{FaCaretDown:!0,style:{cursor:"pointer"},title:"Collapse all"}):(0,B.jsx)(p.PS5,{style:{cursor:"pointer"},title:"Expand all"}))}),"__iconCust__ Customer __iconProsp__ Prospect"===e[i]?(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)(p.gbA,{style:{color:"#539a71",marginTop:"-2px"}}),e[i].split("_")[4],(0,B.jsx)(p.gbA,{style:{color:"#9567c2",marginTop:"-2px"}})," ",e[i].split("_")[8]]}):"","customer"===i&&(2===e.lvl||3===e.lvl?2===e.lvl&&(0,B.jsxs)("span",{style:{paddingLeft:"20px",fontWeight:"100"},children:[(0,B.jsx)(p.gbA,{style:{color:1===e.isProspect?"#9567c2":"green"}}),"\xa0",e[i].split("^&")[1]]}):(0,B.jsxs)("span",{style:{textAlign:"end"},children:[re[e.execStatus]," \xa0",e[i]]}))]}),s.includes(i)&&"opportunity"!==i?(0,B.jsx)(o.Fragment,{children:"probability"===i&&3==e.lvl?"".concat(e[i]," %"):e[i]}):" ",a.includes(i)?(0,B.jsx)(o.Fragment,{children:" "===e.opportunity?(0,B.jsx)("span",{}):(0,B.jsxs)("span",{children:["1"===e.add_to_call&&"1"!==e.isProspect?(0,B.jsx)(p.gbA,{style:{color:"1"===e.isProspect?"":"green"}}):"","\xa0",(0,B.jsx)("a",{href:"https://login.salesforce.com/?ec=302&startURL=%2F0068Z00001dYQcTQAW",target:"_blank",title:e[i],children:e[i]}),(0,B.jsx)("i",{className:"cp float-right",title:"View SF Docs",style:{cursor:"pointer",float:"right"},onClick:function(){ne(e.sfOppId),E(null===e||void 0===e?void 0:e.sfOppId),U(e.opportunity)},children:(0,B.jsx)(M.aHI,{})}),(0,B.jsx)("i",{title:"Delete opportunity",onClick:function(){var t;t=e.oppId,R(!1),u()({method:"delete",url:T+"/SalesMS/software/deleteOpportunity?id=".concat(t)}).then((function(e){l(),R(!1)}))},children:"1"===e.isDeleted?(0,B.jsx)(F.w6k,{style:{cursor:"pointer",float:"right",marginTop:"5px"}}):""})]})}):" "]},i));return(0,B.jsx)("tr",{className:" "==e.opportunity&&1===e.lvl?"pink":"red ",children:r},e.id+e.oppId+e.customerId+e.sfOppId)}));return(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:[Q?(0,B.jsx)(v.Z,{handleAbort:function(){te.current&&te.current.abort(),R(!1)}}):"",void 0!==j&&1==(null===r||void 0===r?void 0:r.length)&&1==i&&(0,B.jsxs)("div",{className:"",style:{display:"flex",alignItems:"center"},children:[(0,B.jsxs)("span",{style:{margin:"0 5px"},children:["Calls Summary of \xa0",(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:j})]}),(0,B.jsx)("span",{style:{margin:"0 3px"},children:"for :"}),(0,B.jsx)("span",{children:(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:j})}),(0,B.jsx)("span",{style:{margin:"0 3px"},children:"for :"}),(0,B.jsx)("span",{children:(0,B.jsxs)("b",{style:{color:"#297ab0",fontSize:"15px"},children:[a.quat," "]})})]}),(null===r||void 0===r?void 0:r.length)>1&&1==i&&(0,B.jsxs)("div",{className:"",style:{display:"flex",alignItems:"center"},children:[(0,B.jsxs)("span",{style:{margin:"0 5px"},children:["Calls Summary of Selected Executives for :\xa0",(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:a.quat})]})," "]}),(0,B.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[0==i&&(0,B.jsxs)("div",{children:[(0,B.jsxs)("p",{children:["Details of SE :"," ",(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:"<<ALL>>"})," ","for :"," ",(0,B.jsx)("b",{style:{color:"#297ab0",fontSize:"15px"},children:a.quat})]}),(0,B.jsxs)("p",{className:"d-flex align-items-center",children:[(0,B.jsx)("span",{style:{color:"#ffcfcf"},className:"fa fa-circle me-1",title:"Leave",children:(0,B.jsx)(p.gbA,{fontSize:"10px"})}),"These opportunities can be deleted"]})]}),(0,B.jsx)(F.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",fontSize:"16px"},cursor:"pointer",onClick:function(){var e=[{key:"executive_division",headers:["Division"]},{key:"customer",headers:["Sales Executive","Customer"]},{key:"supervisor",headers:["Supervisor"]},{key:"opportunity",headers:["Opportunity Add To Call"]},{key:"isDeleted",headers:["Deletable"]},{key:"vendor",headers:["Vendor"]},{key:"probability",headers:["Prob %"]},{key:"closeDate",headers:["Close Date"]},{key:"oppAmount",headers:["Amount ($)"]},{key:"calls",headers:["Call ($)"]},{key:"upside",headers:["Upside ($)"]},{key:"closedAmount",headers:["Closed Amt ($)"]},{key:"week",headers:["Week Updated"]},{key:"comments",headers:["Comments"]}],t=Object.keys(n[0]),a={};e.forEach((function(e){var t=e.key;a[t]=n.slice(1).map((function(e){var n=e[t];return null===n||void 0===n?void 0:n.split("^&")}))}));for(var r=e.map((function(e){var t=e.key,n=e.headers;return"customer"===t?n.map((function(e,n){return{key:t,header:e,values:a[t].map((function(e){return e[n]}))}})):{key:t,header:n[0]}})).flat(),i=n.slice(1).filter((function(e){return 1!==e.lvl&&2!==e.lvl&&""!=e.opportunity})).map((function(e){var n=Object.fromEntries(Object.entries(e).filter((function(e){var n=(0,s.Z)(e,1)[0];return t.includes(n)})));return""!==n.oppAmount&&"0.00"!==n.oppAmount||(n.oppAmount=0)," "!==n.calls&&"0.00"!==n.calls||(n.calls=0),""!==n.upside&&"0.00"!=n.upside||(n.upside=0)," "!==n.closedAmount&&"0.00"!==n.closedAmount||(n.closedAmount=0),"0"===n.isDeleted&&(n.isDeleted="No"),"1"===n.isDeleted&&(n.isDeleted="Yes"),n})),l=new(_().Workbook),o=l.addWorksheet("SalesSoftware"),c=o.addRow(r.map((function(e){return e.header}))),u=function(){var e=r[d].key;if("customer"===e){var t=r[d].values;o.getColumn(d+1).values=[c.getCell(d+1).value].concat((0,b.Z)(t))}else{var n=i.map((function(t){return t[e]}));o.getColumn(d+1).values=[c.getCell(d+1).value].concat((0,b.Z)(n))}},d=0;d<r.length;d++)u();["oppAmount","calls","upside","closedAmount","probability"].forEach((function(e){var t=r.findIndex((function(t){return t.key===e}));-1!==t&&(o.getColumn(t+1).alignment={horizontal:"right"})}));[1].forEach((function(e){o.getRow(e).font={bold:!0}})),l.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesSoftware.xlsx")}))}})]}),(0,B.jsx)("div",{className:"darkHeader",style:{paddingRight:"0px !important",maxHeight:"400px",overflowY:"scroll",width:"100%"},children:(0,B.jsx)("table",{className:"table table-bordered viewSecondTable",style:{width:"100%"},children:(0,B.jsx)("thead",{children:ie})})}),K&&(0,B.jsx)("div",{className:"col-md-12 mt-2",children:(0,B.jsxs)("span",{children:[(0,B.jsx)("b",{style:{color:"black"},children:" Sf Documents -"}),(0,B.jsx)("b",{style:{color:"rgb(46, 136, 197)",fontSize:"13px"},children:q})]})}),1==K?(0,B.jsx)(H,{docId:I,sfDocs:V}):""]})}var G=n(29718),X=n.n(G),K=n(12003),ee=n.n(K);function te(e){var t=e.yAxisAmt,n=e.xAxis,s=e.executive,a=(e.WOW,{lang:{thousandsSep:",",decimalPoint:"."},chart:{type:"line",width:670},title:{text:"WoW Summary Analysis "+(""===s?"":"of ")+s},xAxis:{categories:n,crosshair:!0,title:{text:"Weeks"}},yAxis:{allowDecimals:!0,padding:1,title:{text:"Amount"}},tooltip:{formatter:function(){var e=X().numberFormat(this.y,0,".",",");return"".concat(this.x," <br/>").concat(this.series.name," ").concat(e," ")}},plotOptions:{series:{label:{connectorAllowed:!1}}},series:t});return(0,B.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:(0,B.jsx)(ee(),{highcharts:X(),options:a})})}var ne=n(39126),se=function(e){var t,n,a=e.openPopup,r=e.setOpenPopup,i=(e.WOW,e.rowData),l=(0,o.useState)([]),c=(0,s.Z)(l,2),d=(c[0],c[1],(0,o.useState)([])),v=(0,s.Z)(d,2),m=(v[0],v[1],(0,o.useState)([])),h=(0,s.Z)(m,2),x=(h[0],h[1],(0,o.useState)({})),S=(0,s.Z)(x,2),j=S[0],y=S[1],w=(0,o.useState)(""),b=(0,s.Z)(w,2),I=b[0],N=b[1],D=g.N.baseUrl;return(0,o.useEffect)((function(){u()({method:"get",url:D+"/SalesMS/services/getExecutiveNotes?rid=".concat(i.id)}).then((function(e){var t,n=e.data;y(n);var s=(null===(t=n[0])||void 0===t?void 0:t.notes)||"";N(s)}))}),[]),(0,B.jsxs)("div",{children:[console.log("in popup"),(0,B.jsxs)(f.Tk,{visible:a,size:"xl",onClose:function(){return r(!1)},backdrop:"static",children:[(0,B.jsx)(f.p0,{className:"",style:{cursor:"all-scroll"},children:(0,B.jsx)(f.fl,{children:(0,B.jsxs)("span",{className:"",children:[" Notes - ",i.executive," "]})})}),(0,B.jsxs)(f.sD,{children:[console.log(j),console.log(null===(t=j[0])||void 0===t?void 0:t.notes),(0,B.jsx)(O(),{className:"",theme:"snow",value:I,name:"notes",defaultValue:null===(n=j[0])||void 0===n?void 0:n.notes,id:"editor-container",onChange:function(e){N(e)},modules:{toolbar:[[{header:[!1,1,2,3,4,5,6]},{font:[]},{color:[]},{bold:{tooltip:"Bold (Ctrl+B)"}},"italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","code-block","clean"]]}}),(0,B.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=I.replace(/<\/?[^>]+(>|$)/g,""),t={resId:i.id,notes:e,loggedUserId:localStorage.getItem("resId")};u()({method:"POST",url:D+"/SalesMS/pmo/savenotes",data:t}).then((function(e){var t=e.data;y(t),r(!1)}))}()},children:[(0,B.jsx)(p.TvB,{}),"Save"," "]}),(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){r(!1)},children:[(0,B.jsx)(P.sQZ,{fontSize:"11px"}),"Cancel"," "]})]})]})]})]})};function ae(e){var t=e.WOW,n=e.wowtype,a=(e.wowDate,e.setWOwDate,g.N.baseUrl),r=t.filter((function(e){return 1===e.lvl})).map((function(e){return{week:e.weekno,date:e.date}})),i=t.filter((function(e){return 1===e.lvl})).map((function(e){return e.executive})),l=(0,o.useState)([]),c=(0,s.Z)(l,2),d=c[0],f=c[1],m=(0,o.useState)(!1),h=(0,s.Z)(m,2),x=h[0],S=h[1],j=(0,o.useState)({}),y=(0,s.Z)(j,2),w=y[0],I=y[1],E=(0,o.useState)([]),T=(0,s.Z)(E,2),O=T[0],P=T[1],Q=(0,o.useState)(""),R=(0,s.Z)(Q,2),W=R[0],Y=R[1],L=(0,o.useState)([]),q=(0,s.Z)(L,2),U=q[0],z=q[1],$=(0,o.useState)([]),V=(0,s.Z)($,2),H=V[0],G=V[1],X=(0,o.useState)([]),K=(0,s.Z)(X,2),ee=K[0],ae=K[1],re=(0,o.useState)(""),ie=(0,s.Z)(re,2),le=ie[0],oe=ie[1],ce=(0,o.useState)(""),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],ve=(0,o.useState)(!1),fe=(0,s.Z)(ve,2),me=fe[0],he=fe[1],xe=function(e){z("Week"===e?function(e){return e.length===r.length?[]:r.map((function(e){return e.week}))}:function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,b.Z)(t),[e])})},ge=function(e){G("Sales Executive"===e?function(e){return e.length===i.length?[]:i}:function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,b.Z)(t),[e])})},Se=0,je={fte0:(0,B.jsx)("img",{src:D,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,B.jsx)("img",{src:N,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,B.jsx)("img",{src:k,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,B.jsx)("img",{src:Z,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,B.jsx)("img",{src:A,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,B.jsx)("img",{src:C,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},ye={mode:"view",from:"2023-07-01",vendors:d,divisions:O,executives:de,type:"wow",detail:"true",saveSE:"false",reportRunId:"205010",optType:-1,quarter:-1,status:-1,duration2:-1,measures:-1,monthsel:-1,viewByTime:-1,fyear:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:"week",aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1},we=[],be=[],Ie=[],Ne=[],De=[],ke=[],Ae=t.map((function(e){W===e.executive&&e.id>0&&(we.push(parseInt(e.oppAmount)),be.push(parseInt(e.calls)),Ie.push(parseInt(e.closedAmount)),Ne.push(parseInt(e.upside)),De.push(parseInt(e.target)),ke.push(e.weekno));var t=["lvl","execStatus","id","count","date","supervisor"],n=["weekno","executive","executive"],s=["executive"],a=[];Se=2===e.lvl?Se:U.includes(e.weekno)?1:0;var i=function(i){!t.includes(i)&&(U.length>0||!s.includes(i))&&a.push(e.id<0?(0,B.jsxs)("th",{className:i+" pipeth wowFirstTh",title:e[i],children:[(0,B.jsx)("span",{onClick:function(){xe(e.weekno)},title:e[i],children:"weekno"===i&&(U.length===r.length?(0,B.jsx)(p.qL$,{style:{cursor:"pointer"},title:"Collapse all"}):(0,B.jsx)(p.PS5,{style:{cursor:"pointer"},title:"Expand all"}))}),e[i]]},i):(0,B.jsx)("td",{className:"wowdata",title:e[i],style:{display:0===Se&&2===e.lvl?"none":"",textAlign:"calls"===i||"closedAmount"===i||"gap"===i||"oppAmount"===i||"target"===i||"upside"===i?"end":""},children:n.includes(i)?(0,B.jsxs)(o.Fragment,{children:["executive"===i&&(0,B.jsx)("span",{children:je[e.execStatus]}),"\xa0",(0,B.jsx)("span",{className:"expanddata",onClick:function(){xe(e.weekno)},children:1===e.lvl&&"weekno"===i&&(U.includes(e.weekno)?(0,B.jsx)(p.qL$,{style:{cursor:"pointer"},title:"Collapse"}):(0,B.jsx)(p.PS5,{style:{cursor:"pointer"},title:"Expand"}))}),"weekno"!==i&&"executive"!==i||2!==e.lvl?(0,B.jsx)("span",{children:e[i]}):"","executive"===i&&2===e.lvl&&""!==e.executive&&(0,B.jsxs)("span",{className:"linkSty",onClick:function(){Y(e.executive),oe({quat:e.weekno,date:e.date}),pe(e.id)},children:[e[i],(0,B.jsx)(M.E49,{style:{float:"right",cursor:"pointer"},size:"1.5em",title:"Notes",onClick:function(){S(!0),I(e)}})]}),"executive"==i&&1===e.lvl&&""!==e.executive&&(0,B.jsx)(M.E49,{style:{float:"right",cursor:"pointer"},size:"1.5em",title:"Notes",onClick:function(){Y(e.executive),oe({quat:e.weekno,date:e.date}),pe(e.id),e[i]}})]}):(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("span",{children:parseInt(e[i]).toLocaleString("en-US")}),"\xa0"]})},i))};for(var l in e)i(l);return(0,B.jsx)("tr",{className:"wowtableData",style:{backgroundColor:e.executive?"":"#d4e7fb"},children:a},e.id+e.weekno+e.date+e.executive)})),Ze=t.map((function(e){var t=["lvl","execStatus","id","count","date","supervisor"],n=["weekno","executive","executive"],s=["weekno"],a=[];for(var r in Se=2===e.lvl?Se:H.includes(e.executive)?1:0,e)!t.includes(r)&&(H.length>0||!s.includes(r))&&a.push(e.id<0?(0,B.jsxs)("th",{className:r+" pipeth wowFirstTh",title:e[r],children:[(0,B.jsx)("span",{onClick:function(){ge(e.executive)},title:e[r],children:"executive"===r&&(H.length===i.length?(0,B.jsx)(p.qL$,{style:{cursor:"pointer"},title:"Collapse"}):(0,B.jsx)(p.PS5,{style:{cursor:"pointer"},title:"Expand"}))}),e[r]]},r):(0,B.jsx)("td",{title:e[r],style:{display:0===Se&&2===e.lvl?"none":"",textAlign:"calls"===r||"closedAmount"===r||"gap"===r||"oppAmount"===r||"target"===r||"upside"===r?"end":""},children:n.includes(r)?(0,B.jsxs)(o.Fragment,{children:["executive"===r&&2!==e.lvl&&(0,B.jsxs)("span",{children:[" ","\xa0",(0,B.jsx)("span",{children:(0,B.jsx)(M.E49,{style:{float:"right",cursor:"pointer"},size:"1.5em",title:"Notes",onClick:function(){S(!0),I(e)}})})]}),(0,B.jsx)("span",{children:" "}),(0,B.jsx)("span",{onClick:function(){ge(e.executive)},title:e[r],children:1===e.lvl&&"executive"===r&&(0,B.jsxs)(o.Fragment,{children:[H.includes(e.executive)?(0,B.jsx)(p.qL$,{style:{cursor:"pointer"},title:"Collapse"}):(0,B.jsx)(p.PS5,{style:{cursor:"pointer"},title:"Expand"}),"\xa0",(0,B.jsx)("span",{children:je[e.execStatus]})]})})," ","\xa0","executive"===r&&2===e.lvl?"":(0,B.jsx)("span",{children:(0,B.jsx)("span",{title:e[r],children:e[r]})})]}):(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("span",{children:parseInt(e[r]).toLocaleString("en-US")}),"\xa0"]})},r));return(0,B.jsx)("tr",{className:1==e.lvl?"pink":"red",style:{backgroundColor:e.executive?"":"#d4e7fb"},children:a},e.id+e.weekno+e.date+e.executive)})),Ce="week"===n?Ae:Ze,Ee=[];Ee.push({name:"Open Pipeline",data:we,description:we}),Ee.push({name:"Calls",data:be,description:be}),Ee.push({name:"Closed Amount",data:Ie,description:Ie}),Ee.push({name:"Upside",data:Ne,description:Ne}),Ee.push({name:"Target",data:De,description:De}),(0,o.useEffect)((function(){he(!1),u().post(a+"/SalesMS/software/getSalesSoftwareDataDetails",ye).then((function(e){var t=e.data.data;he(!1);var n=["id","executive_division","execStatus","supervisor","customerId","customer","isProspect","oppId","sfOppId","opportunity","vendor","probability","closeDate","oppAmount","calls","upside","closedAmount","week","comments","lvl","count","isEdit","isDeleted","keyAttr","parentAttr","add_to_call","isActive"],s=t.map((function(e){return JSON.parse(JSON.stringify(e,n,4))}));ae(s),setreportRunId(e.data.reportRunId)})).catch((function(e){})),he(!1)}),[le,W,de]),(0,o.useEffect)((function(){u().get(a+"/CommonMS/master/getSalesVendors").then((function(e){var t=e.data.map((function(e){return{value:e,label:e}}));f(t)})).catch((function(e){console.log(e)})),u().get(a+"/SalesMS/MasterController/SFOwnerDivisions").then((function(e){var t=e.data;P((function(){return String(t.map((function(e){return e.id})))}))})).catch((function(e){console.log(e)}))}),[]);var _e=(0,o.useRef)(null);return(0,B.jsxs)("div",{children:[me?(0,B.jsx)(v.Z,{handleAbort:function(){_e.current&&_e.current.abort(),he(!1)}}):"",(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){},children:[" ","Refresh SF Data"," "]}),(0,B.jsx)("div",{className:"col-md-12 clearfix",style:{height:"10px"}}),(0,B.jsx)("div",{children:(0,B.jsxs)("span",{children:[(0,B.jsxs)("span",{style:{color:"#9d7c42",fontStyle:"italic"},children:[(0,B.jsx)(ne.STs,{}),(0,B.jsxs)("span",{children:[" ","Note : Snapshot for the week is created every monday at 07:30 PM IST and Last day"," ",(0,B.jsxs)("span",{children:[" ","week"===n?(0,B.jsx)(F.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",marginLeft:"4%",fontSize:"16px"},cursor:"pointer",onClick:function(){var e=["date","lvl","count","execStatus","id"],n=["Week","Sales Executive","Supervisor","Target ($)","Open Pipeline ($)","Calls ($)","Upside ($)","Gap ($)","Closed Amt ($)"],a=null===t||void 0===t?void 0:t.slice(1).filter((function(e){return""!=e.executive})).map((function(t){var n=Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})));if(n.weekno){var a=n.weekno.split("-");if(3===a.length){var r=a[0],i=a[1],l=a[2];n.weekno="".concat(r,"-").concat(i,"-").concat(l)}}return n}));a.sort((function(e,t){return new Date(t.weekno)-new Date(e.weekno)}));for(var r=a.map((function(e){return Object.values(e)})),i=new(_().Workbook),l=i.addWorksheet("SalesSoftware"),o=(l.addRow(n),[3,4,5,6,7,8]),c=0;c<r.length;c++){l.addRow(r[c]);for(var u=1;u<=n.length;u++){var d=l.getColumn(u);o.includes(u-1)&&(d.alignment={horizontal:"right"})}}[1].forEach((function(e){l.getRow(e).font={bold:!0}})),i.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesSoftware.xlsx")}))}}):(0,B.jsx)(F.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",marginLeft:"4%",fontSize:"16px"},cursor:"pointer",onClick:function(){var e=["date","lvl","count","execStatus","id"],n=["Sales Executive","Supervisor","Week","Target ($)","Open Pipeline ($)","Calls ($)","Upside ($)","Gap ($)","Closed Amt ($)"],a=null===t||void 0===t?void 0:t.slice(1).filter((function(e){return""!=e.executive&&1!==e.lvl})).map((function(t){var n=Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})));if(n.weekno){var a=n.weekno.split("-");if(3===a.length){var r=a[0],i=a[1],l=a[2];n.weekno="".concat(r,"-").concat(i,"-").concat(l)}}return n}));a.sort((function(e,t){var n,s,a=null===(n=e.executive)||void 0===n?void 0:n.toLowerCase(),r=null===(s=t.executive)||void 0===s?void 0:s.toLowerCase();if(a<r)return-1;if(a>r)return 1;var i=new Date(t.weekno),l=new Date(e.weekno);return i<l?-1:i>l?1:0}));for(var r=a.map((function(e){return[e.executive,e.supervisor,e.weekno,e.target,e.oppAmount,e.calls,e.upside,e.gap,e.closedAmount]})),i=new(_().Workbook),l=i.addWorksheet("SalesSoftware"),o=(l.addRow(n),[3,4,5,6,7,8,9]),c=0;c<r.length;c++){l.addRow(r[c]);for(var u=1;u<=n.length;u++){var d=l.getColumn(u);o.includes(u-1)&&(d.alignment={horizontal:"right"})}}[1].forEach((function(e){l.getRow(e).font={bold:!0}})),i.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesSoftware.xlsx")}))}})]})," ",(0,B.jsx)("div",{children:"of the quarter updated to reflect final actuals."})]})]}),(0,B.jsxs)("span",{style:{color:"#9d7c42",fontStyle:"italic"},children:[(0,B.jsx)(ne.STs,{}),"Note : Data was accurate from FY 2021-Q2"]})]})}),(0,B.jsx)("div",{className:"col-md-12 clearfix",style:{height:"10px"}}),(0,B.jsx)("div",{className:"darkHeader",style:{maxWidth:"fit-content",paddingRight:"0px !important",maxHeight:"400px",overflowY:"scroll"},children:t.length>2?(0,B.jsx)("table",{className:"table table-bordered table-striped  ",style:{width:"auto"},children:(0,B.jsx)("thead",{children:Ce})}):(0,B.jsxs)("table",{className:"table table-bordered table-striped firstViewTable ",style:{width:"auto"},children:[" ",(0,B.jsxs)("thead",{children:[(0,B.jsx)("th",{title:"Week",children:"Week"}),(0,B.jsx)("th",{children:" Target ($)"}),(0,B.jsx)("th",{children:"Open Pipeline ($)"}),(0,B.jsx)("th",{children:"Calls ($)"}),(0,B.jsx)("th",{children:" Upside ($)"}),(0,B.jsx)("th",{children:"Gap ($)"}),(0,B.jsx)("th",{children:"Closed Amt ($)"})]}),(0,B.jsxs)("tbody",{children:[(0,B.jsx)("td",{}),(0,B.jsx)("td",{}),(0,B.jsx)("td",{}),(0,B.jsx)("td",{children:"No Data Found"}),(0,B.jsx)("td",{}),(0,B.jsx)("td",{}),(0,B.jsx)("td",{}),(0,B.jsx)("td",{})]})]})})]}),"week"===n&&0!=ke.length?(0,B.jsx)(te,{yAxisAmt:Ee,xAxis:ke,executive:W,WOW:t}):"",ee.length>0&&"week"===n&&(0,B.jsx)(J,{viewDetailsData:ee,srchQuat:le,executive:W}),x?(0,B.jsx)(se,{openPopup:x,setOpenPopup:S,WOW:t,rowData:w}):""]})}function re(e){var t=e.setreportRunId,n=e.SalesExecutive,i=e.setviewDetailsData,l=e.allQuarter,c=e.srchQuat,d=e.setsrchQuat,f=(e.executive,e.qdata,e.setQdata,e.reportRunId,e.viewsalesid,e.setFilterExectiveName),h=e.setFiltertrue,x=(e.cust,e.setCust),S=g.N.baseUrl,y=(0,o.useRef)([]),w=(0,o.useState)(!1),b=(0,s.Z)(w,2),I=(b[0],b[1]),N=(0,Y.v9)((function(e){return e.selectedSEState.vendorId})),D=(0,Y.v9)((function(e){return e.selectedSEState.vendorNamewithId})),k=(0,Y.v9)((function(e){return e.selectedSEState.ownerDivisions})),A=k.map((function(e){return e.value})).join(","),Z=(0,o.useState)(n),C=(0,s.Z)(Z,2),E=C[0],_=C[1],M=(0,o.useState)([]),T=(0,s.Z)(M,2),O=T[0],P=T[1],Q=(0,o.useState)(D),F=(0,s.Z)(Q,2),R=F[0],W=F[1],q=(0,o.useState)(A),U=(0,s.Z)(q,2),z=U[0],$=U[1],V=(0,o.useState)(N),H=(0,s.Z)(V,2),J=H[0],G=H[1],X=(0,Y.v9)((function(e){return e.selectedSEState.directSETreeData})),K=(0,Y.v9)((function(e){return e.selectedSEState.salesExectiveId})),ee=([X,K].join(","),(0,o.useState)(K)),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=(0,o.useState)([]),re=(0,s.Z)(ae,2),ie=re[0],le=re[1],oe=(0,o.useState)(k),ce=(0,s.Z)(oe,2),ue=ce[0],de=ce[1],pe=(0,o.useState)(!1),ve=(0,s.Z)(pe,2),fe=ve[0],me=ve[1],he=(0,o.useRef)(null),xe=(0,o.useState)(!1),ge=(0,s.Z)(xe,2),Se=ge[0],je=ge[1],ye=(0,Y.v9)((function(e){return e.selectedSEState.quaterDate})),we=(0,o.useState)(ye),be=(0,s.Z)(we,2),Ie=be[0],Ne=be[1],De=(0,Y.v9)((function(e){return e.selectedSEState.reportRunId})),ke=(0,o.useState)({executives:ne,from:Ie,type:"view",detail:!0,reportRunId:De,optType:"neglected",vendors:J,saveSE:!1,divisions:"109"}),Ae=(0,s.Z)(ke,2),Ze=(Ae[0],Ae[1]),Ce=(0,Y.I0)(),Ee=function(){var e=(0,m.Z)(y);if(1==e&&I(!1),!e){me(!1),je(!1),me(!1);var n=""==X?"2064731,139715916,123791883,3575,139,191,225,235,257,57997421,513,523,3617428,667,81525,2119701,76287764,57559815,825,2811358,2119741,881,905,120820778,981,57997419,4849403,20493348,116106000,2119787,2119795,88470523,128367163,1165,2639222,130391575,88998194,1375,1381,2119837,2119851,81587,1529,97925857,18910037,2640070,2119655,43972990,793,1675,2639520,70301986,1717,38380211,124117738,1785,97320362,114598022,106940587,2167,3007509,2227,2119945,47112354,46642168,2257,2119951,2249,4872942,2263,11651218,2119961,2607,2737,112208586,2596928,96657988,3129,658084,4452476,3283,846041,3495,2120031,3617,2120057,1495,2120063,2120069,3665,21505179,111399803,3737,3887,3977,2120091,4065,25313227,123558264,81825,111450,112875977,31161422,4095,81871,49413793,2120157,123454586,123558274,4937,2120161,2120163,117718248,30549612,2120177,5265,114159851,9999":X;u()({method:"post",url:S+"/SalesMS/software/getSalesSoftwareDataDetails",data:{executives:"1"==ne?n:ne,from:Ie,type:"view",detail:!0,reportRunId:De,optType:"neglected",vendors:J,saveSE:!1,divisions:z,mode:-1,duration:-1,measures:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:"-1",quarter:-1,status:-1,duration2:-1,monthsel:-1,viewByTime:-1,fyear:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1}}).then((function(e){je(!1);var n=e.data.data,s=["id","executive_division","execStatus","supervisor","customerId","customer","isProspect","oppId","sfOppId","opportunity","vendor","probability","closeDate","oppAmount","calls","upside","closedAmount","week","comments","lvl","count","isEdit","isDeleted","keyAttr","parentAttr","add_to_call","isActive"],a=n.map((function(e){return JSON.parse(JSON.stringify(e,s,4))})),r=a.filter((function(e){return 1===e.lvl})).map((function(e){return e.customer}));x(r),Ce((0,L.t)(r)),i(a),t(e.data.reportRunId),I(!1)})).catch((function(e){}))}};(0,o.useEffect)((function(){u().get(S+"/CommonMS/master/getSalesVendors").then((function(e){var t=e.data.map((function(e){return{value:e,label:e}}));t.some((function(e){return"Prolifics - Jam/Panther/XMLink"===e.value}))&&t.filter((function(e){return"Prolifics - Jam/Panther/XMLink"!==e.value})),P(t)})).catch((function(e){console.log(e)})),u().get(S+"/SalesMS/MasterController/SFOwnerDivisions").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.owner_Division}}));le(t)})).catch((function(e){console.log(e)}))}),[]),(0,o.useEffect)((function(){Ze((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},"from",c.date))}))}),[c]),(0,o.useEffect)((function(){Ee()}),[ye]);var _e=function(e){e.expanded;return(0,B.jsx)(B.Fragment,{children:(0,B.jsx)(p.qL$,{className:"chevronIcon"})})},Me=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard grayBg pb-2 mt-3",children:[fe&&(0,B.jsx)("div",{className:"alert alert-danger",children:(0,B.jsxs)("span",{children:[(0,B.jsx)("strong",{children:(0,B.jsx)("em",{className:"icon","data-icon":"\ue717"})}),"Please select valid values for highlighted fields"]})}),Se?(0,B.jsx)(v.Z,{handleAbort:function(){he.current&&he.current.abort(),je(!1)}}):"",(0,B.jsxs)("div",{className:"group-content row",children:[(0,B.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Quarter ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 textfield",children:(0,B.jsx)("select",{id:"from",value:c.quat,onChange:function(e){!function(e){var t=e.id,n=e.value;Ze((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,a.Z)({},t,n))})),"executives"===t&&"1"===n&&setVisible(!0)}(e.target),d(e.target);var t=e.target.value.split("-"),n=(0,s.Z)(t,2),i=n[0],l={Q1:"04",Q2:"07",Q3:"10",Q4:"01"}[n[1]],o="".concat(i-1,"-").concat(l,"-").concat("01");Ne(o)},ref:function(e){y.current[0]=e},children:l.map((function(e){return(0,B.jsx)("option",{value:e.date,children:e.quat},e.date)}))})})]})]}),(0,B.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Sales Executive"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 multiselect",ref:function(e){y.current[1]=e},children:(0,B.jsx)(j.NU,{id:"executives",ArrowRenderer:_e,valueRenderer:Me,options:n,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:E,disabled:!1,onChange:function(e){_(e);var t=[];e.forEach((function(e){t.push(e.value)})),se(t.toString()),f(e)}})})]})]}),(0,B.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Vendor ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1  p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 multiselect",ref:function(e){y.current[2]=e},children:(0,B.jsx)(j.NU,{ArrowRenderer:_e,valueRenderer:Me,id:"practiceId",options:O,hasSelectAll:!0,value:R,disabled:!1,onChange:function(e){W(e);var t=[];e.forEach((function(e){t.push(e.value)})),G(t.toString())}})})]})]}),(0,B.jsxs)("div",{className:"col-md-3 mb-2",children:[(0,B.jsx)("div",{className:"clearfix",style:{height:"10px"}}),(0,B.jsxs)("div",{className:"form-group row",children:[(0,B.jsxs)("label",{className:"col-5",children:["Owner Division"," ",(0,B.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,B.jsx)("span",{className:"col-1 p-0",children:":"}),(0,B.jsx)("span",{className:"col-6 multiselect",ref:function(e){y.current[3]=e},children:(0,B.jsx)(j.NU,{ArrowRenderer:_e,valueRenderer:Me,options:ie,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:ue,disabled:!1,onChange:function(e){de(e);var t=[];e.forEach((function(e){t.push(e.value)})),$(t.toString())}})})]})]})]}),(0,B.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 search btn-container center",children:(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){Ee(),h(!0)},children:[(0,B.jsx)(p.U41,{})," Search"," "]})})]})}function ie(e){var t=e.VT,n=e.qdata,a=e.setQdata,r=(e.viewDisplay,e.setViewDisplay,e.reportRunId),i=e.viewsalesid,l=(0,o.useState)([]),c=(0,s.Z)(l,2),d=c[0],f=(c[1],(0,o.useState)([])),m=(0,s.Z)(f,2),h=m[0],S=m[1],j=(0,o.useState)([]),y=(0,s.Z)(j,2),w=y[0],I=y[1],E=(0,o.useState)(""),_=(0,s.Z)(E,2),T=_[0],O=_[1],P=(0,o.useState)(!1),F=(0,s.Z)(P,2),R=F[0],W=F[1],q=null===t||void 0===t?void 0:t.filter((function(e){return 1===e.lvl})).map((function(e){return{quat:e.quarter,date:e.date}})),U=(0,Y.I0)(),z=(0,o.useState)(!1),$=(0,s.Z)(z,2),V=($[0],$[1]),H=(0,o.useState)([]),G=(0,s.Z)(H,2),X=G[0],K=G[1],ee=(0,o.useState)((function(){return q.length>0?q[0]:{}})),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=(0,o.useState)("-1"),ie=(0,s.Z)(ae,2),le=ie[0],oe=ie[1],ce=(0,o.useState)(!1),ue=(0,s.Z)(ce,2),de=ue[0],pe=ue[1],ve=(0,o.useState)([]),fe=(0,s.Z)(ve,2),me=fe[0],he=fe[1],xe=(0,o.useState)([]),ge=(0,s.Z)(xe,2),Se=ge[0],je=ge[1],ye=(0,o.useState)(!1),we=(0,s.Z)(ye,2),be=we[0],Ie=we[1],Ne=(0,o.useRef)(null),De=((0,Y.v9)((function(e){return e.selectedSEState.dateForSe})),(0,Y.v9)((function(e){return e.selectedSEState.salesExectiveId}))),ke=(0,o.useState)(De),Ae=(0,s.Z)(ke,2),Ze=(Ae[0],Ae[1],(0,Y.v9)((function(e){return e.selectedSEState.reportRunId}))),Ce=(0,o.useState)((function(){var e=new Date,t=e.getFullYear(),n=Math.floor((e.getMonth()+3)/3);return new Date(t,3*(n-1),1)})),Ee=(0,s.Z)(Ce,2),_e=(Ee[0],Ee[1],(0,Y.v9)((function(e){return e.selectedSEState.ownerDivisions}))),Me=null===_e||void 0===_e?void 0:_e.map((function(e){return e.value})).join(","),Te=(0,o.useState)(Me),Oe=(0,s.Z)(Te,2),Pe=Oe[0],Be=(Oe[1],(0,Y.v9)((function(e){return e.selectedSEState.vendorId}))),Qe=(0,o.useState)(Be),Fe=(0,s.Z)(Qe,2),Re=Fe[0],We=(Fe[1],g.N.baseUrl),Ye=function(e,t,n){Ie(!1),u()({method:"post",url:We+"/SalesMS/software/getSalesSoftwareDataDetails",data:{executives:void 0==e||"1"===e?-1:e,from:x()(t).format("YYYY-MM-DD"),type:"view",detail:!0,reportRunId:Ze,optType:n,vendors:Re,saveSE:!1,divisions:Pe,mode:-1,duration:-1,measures:-1,customers:-1,prospects:-1,practices:-1,countries:-1,customerType:-1,summary:-1,showBy:"-1",quarter:-1,status:-1,duration2:-1,monthsel:-1,viewByTime:-1,fyear:-1,aelocation:-1,engComp:-1,Divisions:-1,accOwner:-1,newCust:-1,accType:-1}}).then((function(e){var t=e.data.data,n=["id","executive_division","execStatus","supervisor","customerId","customer","isProspect","oppId","sfOppId","opportunity","vendor","probability","closeDate","oppAmount","calls","upside","closedAmount","week","comments","lvl","count","isEdit","isDeleted","keyAttr","parentAttr","add_to_call","isActive"],s=t.map((function(e){return JSON.parse(JSON.stringify(e,n,4))})),a=s.filter((function(e){return 1===e.lvl})).map((function(e){return e.customer}));K(a),I(s),Ie(!1)})).catch((function(e){}))},Le=t.filter((function(e){return 2===e.lvl})).map((function(e){return{label:e.executive,value:e.id}})),qe=0,Ue={fte0:(0,B.jsx)("img",{src:D,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,B.jsx)("img",{src:N,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,B.jsx)("img",{src:k,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,B.jsx)("img",{src:Z,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,B.jsx)("img",{src:A,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,B.jsx)("img",{src:C,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},ze=t.map((function(e){var t=["lvl","execStatus","isActive","country","date","id"],n=["quarter","summary"],a=["executive"],r=[];for(var i in qe=2===e.lvl?qe:Se.includes(e.quarter)?1:0,e)null!==e[i]&&!t.includes(i)&&i!==(Se.length>0?"":"executive")&&r.push(e.id<0?(0,B.jsx)("th",{className:i+" pipeth wowFirstTh",children:(0,B.jsxs)("b",{children:[" ","Amount ($)"===e[i]?"Pipeline ($)":"Closed Amt ($)"===e[i]?"Closed ($)":e[i]]})},i):(0,B.jsxs)("td",{style:{display:0===qe&&2===e.lvl?"none":"",textAlign:"calls"===i||"closedAmount"===i||"gap"===i||"oppAmount"===i||"target"===i||"upside"===i?"end":""},title:e[i],children:[a.includes(i)?(0,B.jsx)(o.Fragment,{children:"executive"===i&&""===e.executive?"":(0,B.jsxs)("span",{children:[Ue[e.execStatus],"\xa0",(0,B.jsx)(M.E49,{style:{float:"right",cursor:"pointer"},size:"1.5em",onClick:function(){pe(!0),S(e)},title:e[i]}),(0,B.jsx)("span",{style:{color:"#2e88c5",cursor:"pointer"},onClick:function(){var t=e.quarter,n=null===t||void 0===t?void 0:t.split("-"),a=(0,s.Z)(n,2),r=a[0],i=a[1],l={Q1:"04",Q2:"07",Q3:"10",Q4:"01"}[i],o=parseInt(r),c="".concat("Q3"===i||"Q1"===i||"Q2"===i?o-1:o,"-").concat(l,"-01");U((0,L.C2)(!0));var u=e.id;Ye(u,c,"neglected"),V(!0)},children:e[i]})]})}):" ",n.includes(i)?(0,B.jsxs)(o.Fragment,{children:[(0,B.jsxs)("span",{onClick:function(){var t;t=e.quarter,je("Summary"===t?function(e){return e.length===q.length?[]:q.map((function(e){return e.quat}))}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,b.Z)(e),[t])})},title:e[i],style:{fontWeight:"bold"},children:[0===e.lvl&&"quarter"===i&&(Se.includes(e.quarter)||Se.length===q.length?(0,B.jsxs)("span",{children:[" ",(0,B.jsx)(B.Fragment,{children:" "})," ",(0,B.jsx)(p.qL$,{style:{color:"#428bca",cursor:"pointer"}}),e[i]]}):(0,B.jsxs)("span",{style:{fontWeight:"bold"},children:[(0,B.jsx)(p.PS5,{style:{color:"#428bca",cursor:"pointer"},title:"Expand all"}),e[i]]})),1===e.lvl&&"quarter"===i&&(Se.includes(e.quarter)||Se.length===q.length?(0,B.jsxs)("span",{children:[" ",(0,B.jsx)(B.Fragment,{children:" "})," ",(0,B.jsx)(p.qL$,{style:{color:"#428bca",cursor:"pointer"},title:"Collapse all"})]}):(0,B.jsx)("span",{children:(0,B.jsx)(p.PS5,{style:{color:"#428bca",cursor:"pointer"},title:"Expand all"})}))]}),"quarter"===i&&"Summary"!==e.quarter?1===e.lvl&&(0,B.jsx)("span",{className:"linkSty",onClick:function(){oe(-1),se({quat:e.quarter,date:e.date});var t=e.quarter.split("-"),n=(0,s.Z)(t,2),a=n[0],r=n[1],i={Q1:"04",Q2:"07",Q3:"10",Q4:"01"}[r],l=parseInt(a),o="".concat("Q3"===r||"Q1"===r||"Q2"===r?l-1:l,"-").concat(i,"-01");U((0,L.C2)(!1)),U((0,L.m5)(o));Ye(e.id,o,-1)},title:e[i],children:e[i]}):""]}):(0,B.jsxs)(o.Fragment,{children:[(0,B.jsx)("span",{title:parseInt(e[i]).toLocaleString("en-US"),children:"NaN"==parseInt(e[i]).toLocaleString("en-US")?"":parseInt(e[i]).toLocaleString("en-US")}),"\xa0"]})]},i));return(0,B.jsx)("tr",{className:""==e.executive?"pink":"red ",children:r},e.id+e.quarter)}));return(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 customCard",children:[(0,B.jsxs)("button",{type:"button",className:"btn btn-primary",style:{marginBottom:"1%"},onClick:function(){!function(){var e=setTimeout((function(){Ie(!0)}),2e3);Ne.current=new AbortController,u()({method:"post",url:We+"/SalesMS/salesforce/refreshSalesForceData",signal:Ne.current.signal,data:{reportRunId:""+Ze,for:"Software"}}).then((function(t){t.data.data,Ie(!1),clearTimeout(e),Ye()})).catch((function(e){console.log(e)}))}()},children:[" ","Refresh SF Data"," "]}),be?(0,B.jsx)(v.Z,{handleAbort:function(){Ne.current&&Ne.current.abort(),Ie(!1)}}):"",(0,B.jsx)("div",{className:"darkHeader",style:{overflowY:"auto",maxWidth:"fit-content",paddingRight:"0px !important",maxHeight:"400px"},children:(0,B.jsx)("table",{className:"table table-bordered  firstViewTable",style:{width:"auto"},children:(0,B.jsx)("thead",{children:ze})})}),t.length>2&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(re,{setviewDetailsData:I,SalesExecutive:Le,allQuarter:q,setQuarterData:he,quarterData:me,srchQuat:ne,setsrchQuat:se,qdata:n,setQdata:a,executive:le,reportRunId:r,viewsalesid:i,setFilterExectiveName:O,setFiltertrue:W,setCust:K,cust:X}),(0,B.jsx)(J,{viewDetailsData:w,srchQuat:ne,executive:le,SalesExecutive:Le,filterExectiveName:T,filtertrue:R,getviewDetailsData:Ye,setCust:K,cust:X})]}),de?(0,B.jsx)(Q,{openPopup:de,setOpenPopup:pe,Vdata:d,rowData:h,popupValue:"ViewTable"}):""]})}function le(){g.N.baseUrl,localStorage.getItem("resId");var e=(0,o.useState)([]),t=(0,s.Z)(e,2),n=t[0],a=t[1],r=(0,o.useState)(0),i=(0,s.Z)(r,2),l=i[0],c=i[1],u=(0,o.useState)(),d=(0,s.Z)(u,2),p=(d[0],d[1]),v=(0,o.useState)(!1),f=(0,s.Z)(v,2),m=f[0],h=f[1],x=(0,o.useState)("target"),S=(0,s.Z)(x,2),j=S[0],y=S[1],w=(0,o.useState)(!1),b=(0,s.Z)(w,2),I=b[0],N=b[1],D=(0,o.useState)([]),k=(0,s.Z)(D,2),A=(k[0],k[1],(0,o.useState)([])),Z=(0,s.Z)(A,2),C=Z[0],E=Z[1],_=(0,o.useState)("week"),M=(0,s.Z)(_,2),T=M[0],O=M[1],P=(0,o.useState)(!1),Q=(0,s.Z)(P,2),F=Q[0],R=Q[1],W=(0,o.useState)([]),L=(0,s.Z)(W,2),q=(L[0],L[1]),U=(0,o.useState)([]),z=(0,s.Z)(U,2),V=z[0],H=z[1],J=(0,o.useState)([]),G=(0,s.Z)(J,2),X=G[0],K=G[1],ee=(0,o.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],re=(0,o.useState)("2023-04-01"),le=(0,s.Z)(re,2),oe=le[0],ce=le[1],ue=(0,o.useState)("2024-04-01"),de=(0,s.Z)(ue,2),pe=de[0],ve=de[1],fe=(0,o.useState)(""),me=(0,s.Z)(fe,2),he=me[0],xe=me[1],ge=(0,Y.v9)((function(e){return e.selectedSEState.reportRunId}));return(0,B.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:[(0,B.jsx)($,{setSoftwareData:a,setWowDisplay:N,setTableFlag:p,setSelector:y,setreportRunId:c,reportRunId:l,softwareData:n,setTableData:H,headerData:ne,setHeaderData:se,data:X,setData:K,wowDate:C,setWOwDate:E,tableData:V,showDetails:m,setShowDetails:h,setwowtype:O,setTargetDataKeys:q,qdate:oe,fdate:pe,setFdate:ve,setQdate:ce,setViewDisplay:R,viewDisplay:F,setViewSlesId:xe}),"wow"===j&&I&&(0,B.jsx)(ae,{WOW:n,wowtype:T,wowDate:C,setWOwDate:E}),"view"===j&&F&&0!=ge&&1==m?(0,B.jsx)(ie,{VT:n,qdate:oe,setQdate:ce,setViewDisplay:R,viewDisplay:F,showDetails:m,setShowDetails:h,reportRunId:l,viewsalesid:he}):""]})}},11634:function(e,t,n){var s=n(64836);t.Z=void 0;var a=s(n(45649)),r=n(80184),i=(0,a.default)((0,r.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm-1 8V7c0-.55.45-1 1-1s1 .45 1 1v3h1.79c.45 0 .67.54.35.85l-2.79 2.79c-.2.2-.51.2-.71 0l-2.79-2.79c-.31-.31-.09-.85.36-.85H11zm5 7H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"}),"DownloadForOfflineRounded");t.Z=i}}]);
//# sourceMappingURL=5282.5937005f.chunk.js.map