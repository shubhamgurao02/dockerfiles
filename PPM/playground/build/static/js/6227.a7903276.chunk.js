"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6227],{86227:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});var l=n(29439),a=n(72791),r=n(59513),c=n.n(r),s=n(56355),i=n(78983),o=n(66770),u=n.n(o),d=n(74569),m=n.n(d),h=n(72426),f=n.n(h),p=n(34831),v=n(80184);var x=function(e){var t=e.tableData,n=e.column,r=e.actual,c=e.selectType,s=e.column1,i=e.column2,o=e.compare,u=(0,a.useState)(),d=(0,l.Z)(u,2),m=d[0],h=d[1],f=function(e){return null===e||void 0===e?void 0:e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")};(0,a.useEffect)((function(){p()}),[t]);var p=function(){h((function(){return((null===t||void 0===t?void 0:t.tableData)||[]).map((function(e,t){var l=n.map((function(t,n){var l,a=-1===e.id,r=null!==(l=e[t]||"")&&void 0!==l&&l.includes("^&1")?e[t].replaceAll("^&1",""):e[t];return a?(0,v.jsx)("th",{style:{textAlign:"center"},children:r},n):2==e.id?(0,v.jsx)("td",{style:{textAlign:0===n?"left":"right",backgroundColor:1===n||3===n?"#F3D6D6":2===n||4===n?"#BFF5F5":"none"},children:r.includes("GM")?r:r+" %"},n):(0,v.jsx)("td",{style:{textAlign:0===n?"left":"right",backgroundColor:1===n||3===n?"#F3D6D6":2===n||4===n?"#BFF5F5":"none"},children:f(r)},n)}));return(0,v.jsx)("tr",{children:l},t)}))}))};(0,a.useEffect)((function(){h(null)}),[c]),(0,a.useEffect)((function(){N()}),[r]);var x=(0,a.useState)(),j=(0,l.Z)(x,2),g=j[0],b=j[1],N=function(){b((function(){return((null===r||void 0===r?void 0:r.tableData)||[]).map((function(e,t){var n=null===s||void 0===s?void 0:s.map((function(t,n){var l;if("string"!==typeof e[t])return null;var a=-1===e.id,c=null;if(t.includes("_")){var s=null===r||void 0===r?void 0:r.tableData[0][t],i=null===s||void 0===s?void 0:s.split("^")[0],o=null===i||void 0===i?void 0:i.split("-")[1];c=(null===o||void 0===o?void 0:o.split("")[1])%2==0?"even":"odd"}var u=null!==(l=e[t])&&void 0!==l&&l.includes("^&1")?e[t].replaceAll("^&1",""):e[t];return a?(0,v.jsx)("th",{style:{textAlign:"center"},children:u},n):2==e.id?(0,v.jsx)("td",{style:{textAlign:1===n?"left":"right"},children:(0,v.jsxs)("div",{className:c,children:[u.includes("GM")?u:u+" %"," "]})},n):(0,v.jsx)("td",{style:{textAlign:1===n?"left":"right"},children:(0,v.jsx)("div",{className:c,children:f(u)})},n)}));return(0,v.jsx)("tr",{children:n},t)}))}))};(0,a.useEffect)((function(){b()}),[c]),(0,a.useEffect)((function(){Y()}),[o]);var F=(0,a.useState)(),y=(0,l.Z)(F,2),D=y[0],S=y[1],Y=function(){S((function(){var e;return null===o||void 0===o||null===(e=o.tableData)||void 0===e?void 0:e.map((function(e,t){var n=[];return null===i||void 0===i||i.forEach((function(l,a){var r=e[l],c=null,s=1,i=1;null!==r&&void 0!==r&&r.includes("^&")&&(s=(c=e[l].split("^&"))[1],i=c[2]);var o=t>0&&a>0&&(Math.floor(a/2)%2===0?a%2===0?"#F3D6D6":"#BFF5F5":a%2===0?"#BFF5F5":"#F3D6D6");if(r){var u=r.replaceAll("^&1^&2","").replaceAll("^&1^&1","").replaceAll("^&2^&1","");-1==e.id||-2==e.id?n.push((0,v.jsx)("th",{style:{textAlign:"center"},colSpan:i,rowSpan:s,children:u})):n.push(2==e.id?(0,v.jsx)("td",{align:"left",style:{backgroundColor:o,textAlign:0===a?"left":"right"},colSpan:i,rowSpan:s,children:u.includes("GM")?u:u+" %"}):(0,v.jsx)("td",{align:"left",style:{backgroundColor:o,textAlign:0===a?"left":"right"},colSpan:i,rowSpan:s,children:f(u)}))}})),(0,v.jsx)("tr",{children:n},t)}))}))};return(0,a.useEffect)((function(){S(null)}),[c]),(0,v.jsxs)("div",{className:"accountPlanTable darkHeader",children:["plan"===c&&(0,v.jsx)("table",{className:"table table-bordered table-striped",children:(0,v.jsx)("thead",{children:m})}),"actual"===c&&(0,v.jsx)("table",{className:"table table-bordered table-striped",children:(0,v.jsx)("thead",{children:g})}),"compare"===c&&(0,v.jsx)("table",{className:"table table-bordered table-striped",children:(0,v.jsx)("thead",{children:D})})]})},j=n(83854),g=(n(68639),n(38262));var b=function(e){var t=e.customerId,n=(0,a.useState)([]),r=(0,l.Z)(n,2),o=r[0],d=r[1],h=localStorage.getItem("resId"),b=(0,a.useState)(!1),N=(0,l.Z)(b,2),F=N[0],y=N[1],D=(0,a.useRef)(null),S=(0,a.useState)((function(){var e=new Date,t=new Date(e.getFullYear(),3,1);return t.setFullYear(e.getFullYear()+1),t})),Y=(0,l.Z)(S,2),w=Y[0],C=Y[1],Z=(0,a.useState)((function(){var e=new Date,t=new Date(e.getFullYear(),2,0);return t.setFullYear(e.getFullYear()+1),t})),A=(0,l.Z)(Z,2),k=(A[0],A[1],(0,a.useState)()),E=(0,l.Z)(k,2);E[0],E[1],new Date,(0,a.useEffect)((function(){m().get(Ce+"/customersms/Customers/getCustomersdashboard?cid=".concat(t)).then((function(e){var t=e.data;d(t)})).catch((function(e){}))}),[]);var M=(0,a.useState)(new Date),P=(0,l.Z)(M,2),_=(P[0],P[1],(0,a.useState)(!1)),T=(0,l.Z)(_,2),I=T[0],Q=T[1],U=(0,a.useState)(s.UdN),B=(0,l.Z)(U,2),G=B[0],R=B[1],V=(0,a.useState)("plan"),H=(0,l.Z)(V,2),O=H[0],q=H[1],z=(0,a.useState)(!1),J=(0,l.Z)(z,2),K=J[0],L=J[1],W=(0,a.useState)([]),X=(0,l.Z)(W,2),$=X[0],ee=X[1],te=(0,a.useState)([]),ne=(0,l.Z)(te,2),le=ne[0],ae=ne[1],re=(0,a.useState)([]),ce=(0,l.Z)(re,2),se=ce[0],ie=ce[1],oe=(0,a.useState)(!1),ue=(0,l.Z)(oe,2),de=(ue[0],ue[1]),me=(0,a.useState)(!0),he=(0,l.Z)(me,2),fe=he[0],pe=he[1];(0,a.useEffect)((function(){Be(),pe(!0)}),[]);var ve=(0,a.useState)(),xe=(0,l.Z)(ve,2),je=xe[0],ge=xe[1],be=(0,a.useState)(),Ne=(0,l.Z)(be,2),Fe=Ne[0],ye=Ne[1],De=(0,a.useState)(),Se=(0,l.Z)(De,2),Ye=Se[0],we=Se[1],Ce=p.N.baseUrl;(0,a.useEffect)((function(){}),[]),(0,a.useEffect)((function(){}),[]);var Ze=(0,a.useState)(null),Ae=(0,l.Z)(Ze,2),ke=(Ae[0],Ae[1]),Ee=(0,a.useState)(null),Me=(0,l.Z)(Ee,2),Pe=(Me[0],Me[1]);(0,a.useEffect)((function(){_e()}),[]),(0,a.useEffect)((function(){Te()}),[le]);var _e=function(){ke((function(){var e;return null===(e=$.data)||void 0===e?void 0:e.map((function(e,t){var n=[];return Ue.forEach((function(t,l){n.push((0,v.jsx)("td",{align:"right",children:e[t]}))})),(0,v.jsx)("tr",{children:n},t)}))}))},Te=function(){Pe((function(){var e;return null===(e=le.data)||void 0===e?void 0:e.map((function(e,t){var n=[];return Ue.forEach((function(t,l){n.push((0,v.jsx)("td",{align:"right",children:e[t]}))})),(0,v.jsx)("tr",{children:n},t)}))}))},Ie=(0,a.useState)([]),Qe=(0,l.Z)(Ie,2),Ue=Qe[0],Be=(Qe[1],function(){if(pe(!0),y(!1),D.current=new AbortController,"plan"==O){var e=f()(w).subtract(1,"year").add(0,"days").format("YYYY-MM-DD");m()({method:"post",url:Ce+"/customersms/Accountplan/getaccountplanGoals?SrcType=plan&CustomerId=".concat(t,"&CountryId=1&FromDate=").concat(e,"&Duration=4&reqPage=customer&isProspect=1&UserId=").concat(h)}).then((function(e){var t=e.data,n=t.columns.split(",").map((function(e){return e.replaceAll("'","")}));t.tableData;ge(n),ee(t),de(!0),y(!1),Q(!I),R(I?s.UdN:s.NR5)}))}else if("actual"==O){y(!1);var n=f()(w).subtract(1,"year").add(3,"month").format("YYYY-MM-DD");m()({method:"post",url:Ce+"/customersms/Accountplan/getaccountplanning?CustomerId=".concat(t,"&FromDate=").concat(f()(n).format("yyyy-MM-DD"),"&UserId=").concat(h)}).then((function(e){var t=(e=e.data).columns.split(",").map((function(e){return e.replaceAll("'","")}));ye(t),ae(e),y(!1),Q(!I),R(I?s.UdN:s.NR5)}))}if("compare"==O){var l=f()(w).subtract(1,"year").add(3,"month").format("YYYY-MM-DD");y(!1),m()({method:"post",url:Ce+"/customersms/Accountplan/getaccountplanCompare?CustomerId=".concat(t,"&FromDate=").concat(f()(l).format("yyyy-MM-DD"),"&Duration=4&UserId=").concat(h)}).then((function(e){var t=(e=e.data).columns.split(",").map((function(e){return e.replaceAll("'","")}));y(!1),we(t),ie(e)}))}});function Ge(e){var t=e.buttonPopup,n=e.setButtonPopup;return(0,v.jsx)("div",{className:"col-md-12 mb-2 ",children:(0,v.jsxs)(i.Tk,{size:"lg",visible:t,className:" u",onClose:function(){return n(!1)},children:[(0,v.jsx)(i.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,v.jsx)(i.fl,{children:(0,v.jsxs)("span",{className:"ft16",children:["Notes of"," ",(0,v.jsxs)("span",{children:[" ",o.map((function(e){return(0,v.jsx)("span",{children:e.customerName})}))]})]})})}),(0,v.jsx)(i.sD,{children:(0,v.jsx)("div",{className:"col-md-12",children:(0,v.jsx)(u(),{className:"err",theme:"snow",name:"description",id:"description",modules:{toolbar:[[{header:[!1,1,2,3,4,5,6]},{color:[]},"bold","italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","image","code-block","clean"]]},readOnly:!0})})})]})})}var Re=(0,a.useState)([]),Ve=(0,l.Z)(Re,2),He=Ve[0],Oe=Ve[1];(0,a.useEffect)((function(){qe()}),[]);var qe=function(){m()({method:"GET",url:Ce+"/CommonMS/master/getMenus?loggedUserId=".concat(h)}).then((function(e){e.data.forEach((function(e){"Customers"===e.display_name&&Oe([e])}))}))};return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{className:"col-md-12",children:(0,v.jsxs)("div",{className:"pageTitle",children:[(0,v.jsxs)("div",{className:"childOne",children:[" ",(0,v.jsx)("h2",{children:o.map((function(e){return(0,v.jsx)("span",{children:e.customerName})}))})]}),(0,v.jsx)("div",{className:"childTwo",children:(0,v.jsx)("h2",{children:"Account Plan"})}),(0,v.jsx)("div",{className:"childThree"})]})}),(0,v.jsx)(g.Z,{routes:He,currentScreenName:["Customer Search","Account Plan"]}),(0,v.jsxs)("div",{className:"group mb-3 customCard",children:[(0,v.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,v.jsx)("h2",{children:"Search Filters"}),(0,v.jsx)("div",{onClick:function(){Q(!I),R(I?s.UdN:s.NR5)},children:(0,v.jsx)("span",{children:G})})]}),(0,v.jsx)(i.V9,{visible:!I,children:(0,v.jsxs)("div",{className:"group-content row",children:[(0,v.jsx)("div",{className:" col-md-3 mb-2",children:(0,v.jsxs)("div",{className:"form-group row",children:[(0,v.jsx)("label",{className:"col-5",htmlFor:"viewtype",children:"View Type"}),(0,v.jsx)("span",{className:"col-1 p-0",children:":"}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsxs)("select",{id:"select",defaultValue:"plan",name:"SelectType",onChange:function(e){pe(!0);var t=e.target.value;q(t),C((function(){var e=new Date,t=new Date(e.getFullYear(),3,1);return t.setFullYear(e.getFullYear()+1),t}))},children:[(0,v.jsx)("option",{value:"plan",children:"Planning"}),(0,v.jsx)("option",{value:"actual",children:"Actuals"}),(0,v.jsx)("option",{value:"compare",children:"Compare"})]})})]})}),"plan"==O?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:" col-md-3 mb-2",children:(0,v.jsxs)("div",{className:"form-group row",children:[(0,v.jsx)("label",{className:"col-5",htmlFor:"fy",children:"Quarter"}),(0,v.jsx)("span",{className:"col-1 p-0",children:":"}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsx)(c(),{id:"FY",selected:w,placeholderText:"Please select a date",onChange:function(e){var t=new Date(e),n=new Date(t.getFullYear(),3,1);n.setFullYear(t.getFullYear()+1),C(n)},showYearPicker:!0,dateFormat:"'FY' yyyy"})})]})})}):"actual"==O?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:" col-md-3 mb-2",children:(0,v.jsxs)("div",{className:"form-group row",children:[(0,v.jsx)("label",{className:"col-5",htmlFor:"fy",children:"Quarter"}),(0,v.jsx)("span",{className:"col-1 p-0",children:":"}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsx)(c(),{id:"FY",selected:w,onChange:function(e){C(e);var t=new Date(e.getFullYear(),3,1);t.setFullYear(t.getFullYear()-1)},dateFormat:" 'FY' yyyy-QQQ",showQuarterYearPicker:!0})})]})})}):"compare"==O?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:" col-md-3 mb-2",children:(0,v.jsxs)("div",{className:"form-group row",children:[(0,v.jsx)("label",{className:"col-5",htmlFor:"fy",children:"Quarter"}),(0,v.jsx)("span",{className:"col-1 p-0",children:":"}),(0,v.jsx)("div",{className:"col-6",children:(0,v.jsx)(c(),{id:"FY",selected:w,onChange:function(e){C(e);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1),t.setMonth(t.getMonth()+3)},showQuarterYearPicker:!0,dateFormat:"'FY' yyyy-QQQ"})})]})})}):"",(0,v.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:(0,v.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:Be,children:[(0,v.jsx)(s.U41,{})," Search"," "]})}),F?(0,v.jsx)(j.Z,{handleAbort:function(){D.current&&D.current.abort(),y(!1)}}):""]})})]}),(0,v.jsx)("button",{className:"btn btn-primary",onClick:function(){L(!0)},children:"Notes"}),K?(0,v.jsx)(Ge,{buttonPopup:K,setButtonPopup:L,custData:o}):" ",(0,v.jsx)("br",{}),fe&&(0,v.jsx)("div",{children:(0,v.jsx)(x,{tableData:$,column:je,column1:Fe,actual:le,compare:se,column2:Ye,selectType:O})})]})}}}]);
//# sourceMappingURL=6227.a7903276.chunk.js.map