"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2714],{22714:function(e,s,t){t.r(s);var n=t(93433),a=t(29439),l=t(72791),c=t(56355),i=(t(68639),t(78983)),r=t(74569),o=t.n(r),d=t(83854),u=t(34831),h=t(32125),m=t(78820),f=t(37145),x=t(1063),v=t(38262),g=t(80184);s.default=function(){var e=u.N.baseUrl,s=(0,l.useState)(!1),t=(0,a.Z)(s,2),r=t[0],j=t[1],p=(0,l.useState)(c.UdN),N=(0,a.Z)(p,2),S=N[0],b=N[1],k=(0,l.useState)([]),y=(0,a.Z)(k,2),Z=y[0],_=y[1],T=(0,l.useState)(!1),C=(0,a.Z)(T,2),L=(C[0],C[1]),M=(0,l.useState)(!1),w=(0,a.Z)(M,2),E=w[0],F=(w[1],(0,l.useState)([])),U=(0,a.Z)(F,2),D=U[0],I=U[1],H=(0,l.useState)([]),R=(0,a.Z)(H,2),V=R[0],G=R[1],O=(0,l.useState)([]),P=(0,a.Z)(O,2),A=(P[0],P[1]),B=(0,l.useState)([]),Y=(0,a.Z)(B,2),q=Y[0],z=Y[1],J=localStorage.getItem("resId"),K=(0,l.useState)([]),Q=(0,a.Z)(K,2),W=Q[0],X=Q[1],$=(0,l.useState)(!1),ee=(0,a.Z)($,2),se=ee[0],te=ee[1],ne=(0,l.useRef)([]),ae=(0,l.useState)(!1),le=(0,a.Z)(ae,2),ce=le[0],ie=le[1],re=(0,l.useState)([]),oe=(0,a.Z)(re,2),de=oe[0],ue=oe[1],he=(0,l.useState)([]),me=(0,a.Z)(he,2),fe=me[0],xe=me[1];console.log(fe),(0,l.useEffect)((function(){o()({method:"GET",url:e+"/CommonMS/master/getMenus?loggedUserId=".concat(J)}).then((function(e){var s=e.data;s.forEach((function(e){"Time & Expenses"===e.display_name&&X([e])}));var t=s.find((function(e){return"Time & Expenses"===e.display_name})).subMenus.find((function(e){return"Lock Timesheets"===e.display_name})),n=t?t.access_level:null;console.log("Access Level:",n),xe(n)}))}),[]);var ve=function(e){console.log(e);var s=[e];console.log(s);var t=V;s.map((function(e){console.log(e),t.push(e)})),G(t)};return(0,l.useEffect)((function(){console.log(q)}),[q]),(0,g.jsxs)("div",{children:[se?(0,g.jsxs)("div",{className:"statusMsg error",children:[" ","\xa0",(0,g.jsxs)("span",{className:"error-block",children:[(0,g.jsx)(m.CSE,{})," \xa0 Please Select the valid values for highlighted fields"]})]}):"",(0,g.jsx)(g.Fragment,{children:ce?(0,g.jsx)("div",{className:"statusMsg success",children:"Data Saved Succesfully!!"}):""}),(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsxs)("div",{className:"pageTitle",children:[(0,g.jsx)("div",{className:"childOne"}),(0,g.jsx)("div",{className:"childTwo",children:(0,g.jsx)("h2",{children:"Lock Timesheet"})}),(0,g.jsx)("div",{className:"childThree"})]})}),(0,g.jsx)(v.Z,{routes:W,currentScreenName:["Lock Timesheet"]}),(0,g.jsxs)("div",{className:"group mb-3 customCard",children:[(0,g.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,g.jsx)("h2",{children:"Search Filters"}),(0,g.jsx)("div",{onClick:function(){j(!r),b(r?c.UdN:c.NR5)},children:(0,g.jsx)("span",{children:S})})]}),(0,g.jsx)(i.V9,{visible:!r,children:(0,g.jsxs)("div",{className:"group-content row ",children:[(0,g.jsx)("div",{className:"col-md-4 mb-2",children:(0,g.jsxs)("div",{className:"form-group row",children:[(0,g.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Year",(0,g.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,g.jsx)("span",{className:"col-1 p-0",children:":"}),(0,g.jsx)("div",{className:"col-6",children:(0,g.jsxs)("select",{ref:function(e){ne.current[0]=e},className:"error enteredDetails cancel text",id:"year-select",name:"year",onChange:function(e){I(e.target.value),_(null)},children:[(0,g.jsx)("option",{value:"",children:"<<Please Select>>"}),[{id:2017,value:"2017"},{id:2018,value:"2018"}].map((function(e){return(0,g.jsx)("option",{value:e.id,children:e.value})}))]})})]})}),(0,g.jsx)("div",{className:"align center mt-3",children:(0,g.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",onClick:function(){var s=(0,h.Z)(ne);s?te(!0):(!s&&j(!r),b(r?c.UdN:c.NR5),o().get(e+"/timeandexpensesms/getLockTimesheet?yearValue=".concat(D)).then((function(e){_(e.data),console.log(e.data),ue(e.data),z((function(){var s;return null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.filter((function(e){return 1===e.Locked})).map((function(e){return e.Month}))}))})),te(!1),setTimeout((function(){}),3e3),L(!0))},children:[(0,g.jsx)(c.U41,{})," Search"," "]})})]})}),E?(0,g.jsx)(d.Z,{}):""]}),(null===Z||void 0===Z?void 0:Z.length)>0?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{id:"myDatatable_filter",class:"dataTables_filter",style:{height:"25px",width:"165px",float:"right"},children:(0,g.jsxs)("label",{children:["Search:\xa0",(0,g.jsx)("input",{type:"search",className:"col-7",placeholder:!0,"aria-controls":"myDatatable",onChange:function(e){return function(e){console.log("***************************",e.target.value);var s=de.filter((function(s){return s.Month.toLowerCase().includes(e.target.value.toLowerCase())}));_(s)}(e)}})]})}),(0,g.jsx)("div",{className:"darkHeader",children:(0,g.jsx)("div",{className:"col-md-12 mt-4",children:(0,g.jsxs)(f.w,{className:"lockDataTable ",value:Z,showGridlines:!0,highlightOnHover:!0,children:[(0,g.jsx)(x.s,{field:"Month",header:"Month",body:function(e){return(0,g.jsx)(l.Fragment,{children:(0,g.jsx)("span",{className:"vertical-align-middle ml-2",children:e.Month})})}}),(0,g.jsx)(x.s,{field:"Locked",header:"Locked",body:function(e){return(0,g.jsx)(l.Fragment,{children:(0,g.jsx)("span",{className:"vertical-align-middle ml-2",children:(0,g.jsx)("input",{type:"checkbox",id:e.Month,onChange:function(s){console.log(s),console.log("%%%%%%%%%%%%%%",!0===s.target.id?1:0),console.log(e),ve(s.target.id),z((function(e){return e.find((function(e){return e===s.target.id}))?e.filter((function(e){return e!==s.target.id})):[].concat((0,n.Z)(e),[s.target.id])}))},defaultChecked:!!e.Locked,disabled:500===fe||250===fe})})})}})]})})}),(0,g.jsx)("div",{className:"align center mt-3",children:1e3===fe&&(0,g.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){o().post(e+"/timeandexpensesms/saveLockTimesheets?yearValue=".concat(D,"&lockedMonths=").concat(q,"&userId=").concat(J)).then((function(e){A(e.data)})),ie(!0),setTimeout((function(){ie(!1)}),3e3)},children:[(0,g.jsx)(c.TvB,{})," Save"]})})]}):""]})}}}]);
//# sourceMappingURL=2714.5db6a9cc.chunk.js.map