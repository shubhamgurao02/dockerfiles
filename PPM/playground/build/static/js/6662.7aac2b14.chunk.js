"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6662,4205],{93762:function(e,t,n){n.d(t,{Z:function(){return w}});var s=n(29439),a=n(78983),l=n(74569),i=n.n(l),o=n(72791),r=n(34831),c=n(93433),d=n(4942),u=n(1413),m=n(6748),p=n(99259),h=n(66934),v=n(12065),f=n(99651),j=n(41523),x=n(56125),g=n(27336),y=n(73728),N=n(80184);function b(e){return(0,N.jsx)(p.Z,(0,u.Z)((0,u.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,N.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function _(e){return(0,N.jsx)(p.Z,(0,u.Z)((0,u.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,N.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function S(e){var t=(0,g.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,N.jsx)(g.q.div,{style:t,children:(0,N.jsx)(x.Z,(0,u.Z)({},e))})}var D=(0,h.ZP)((function(e){var t,n,s,a,l;return(0,N.jsx)("div",{children:(0,o.createElement)(f.Z,(0,u.Z)((0,u.Z)({},e),{},{key:String(null===e||void 0===e||null===(t=e.node)||void 0===t?void 0:t.id),nodeId:String(null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.id),label:null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.folder_name,TransitionComponent:S}),Array.isArray(null===e||void 0===e||null===(a=e.node)||void 0===a?void 0:a.subRows)?null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.subRows.map((function(e){return C(e)})):"")})}))((function(e){var t,n=e.theme;return t={},(0,d.Z)(t,"& .".concat(j.Z.iconContainer),{"& .close":{opacity:.3}}),(0,d.Z)(t,"& .".concat(j.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,v.Fq)(n.palette.text.primary,.4))}),t})),C=function(e){return(0,N.jsx)("div",{children:(0,N.jsx)(D,{node:e})},String(null===e||void 0===e?void 0:e.id))};function Z(e){var t=e.defaultExpandedRows,n=e.data,s=e.projectId,a=e.popDocFolderId,l=e.setPopDocFolderId;(0,o.useEffect)((function(){}),[a]);var i=function(e,t){var n=e.filter((function(e){return"SOW"!==e.folder_name}));return n.sort((function(e,n){var s=t.indexOf(e.folder_name),a=t.indexOf(n.folder_name);return-1!==s&&-1!==a?s-a:-1!==s?-1:-1!==a?1:e.folder_name.localeCompare(n.folder_name)})),n.filter((function(e){return e.folder_name==s?e.folder_name="Expense":""})),n}(function(e,t){t=(0,u.Z)({id:"id",parentId:"parent_id",children:"subRows"},t);var n={},s=[],a=t.children;return e.forEach((function(e){var s=e[t.id],l=e[t.parentId];n[s]=(0,u.Z)((0,u.Z)((0,d.Z)({},a,[]),e),n[s]),n[l]=n[l]||(0,d.Z)({},a,[]),n[l][a].push(n[s])})),Object.values(n).forEach((function(e){"undefined"===typeof e[t.id]&&s.push.apply(s,(0,c.Z)(e[a]))})),s}(n),["IA Support","PPM Development and Implementation","Expense","Expenses"]),r={display:"flex",alignItems:"center",gap:"4px"};return(0,N.jsx)(m.Z,{"aria-label":"customized",defaultExpanded:[t],defaultCollapseIcon:(0,N.jsxs)("div",{style:r,children:[(0,N.jsx)(b,{}),(0,N.jsx)("span",{children:" "}),(0,N.jsx)(y.FYx,{})," "]}),defaultExpandIcon:(0,N.jsxs)("div",{style:r,children:[(0,N.jsx)(_,{}),(0,N.jsx)("span",{children:" "}),(0,N.jsx)(y.FYx,{})," "]}),defaultEndIcon:(0,N.jsx)(y.FYx,{}),defaultParentIcon:(0,N.jsx)(y.FYx,{}),sx:{"& .css-1g86id8-MuiTreeItem-content .MuiTreeItem-label":{width:"auto",minwidth:0}},className:"hierarchyTree",onNodeSelect:function(e,t){l(t)},children:i.map((function(e){return C(e)}))})}var w=function(e){var t=e.openPopup,n=e.setOpenPopup,l=e.projectId,c=e.hierarchydata,d=e.SetDocFolderId,u=e.selectedIds,m=e.setSelectedIds,p=e.setCopySuccessmsg,h=e.setMoveSuccessmsg,v=e.getapiData,f=e.setCheckboxSelect,j=localStorage.getItem("resId"),x=r.N.baseUrl,g=(0,o.useState)([]),y=(0,s.Z)(g,2),b=(y[0],y[1]),_=(0,o.useState)([]),S=(0,s.Z)(_,2),D=(S[0],S[1]),C=(0,o.useState)(null),w=(0,s.Z)(C,2),M=w[0],k=w[1];return(0,N.jsx)("div",{children:(0,N.jsx)("div",{className:"col-md-12",children:(0,N.jsxs)(a.Tk,{visible:t,size:"xs",onClose:function(){return n(!1)},backdrop:"static",children:[(0,N.jsx)(a.p0,{className:"",children:(0,N.jsx)(a.fl,{children:(0,N.jsx)("span",{className:"",children:" Folders"})})}),(0,N.jsxs)(a.sD,{children:[(0,N.jsxs)("div",{className:"col-md-9 customCard",children:[(0,N.jsx)("div",{className:"col-md-12 collapseHeader",children:(0,N.jsx)("h2",{children:"Document Folders"})}),(0,N.jsx)(Z,{defaultExpandedRows:String(l),data:c,SetDocFolderId:d,projectId:l,popDocFolderId:M,setPopDocFolderId:k})]}),(0,N.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-1 btn-container center my-2",children:[(0,N.jsx)("button",{className:"btn btn-primary",type:"Add",title:"Add",onClick:function(){!function(){p(!0);var e=Array.isArray(u)?u.map((function(e){return parseInt(e)})):[];i()({method:"post",url:x+"/ProjectMS/ContractDocuments/copyDocsToFolder",data:{loggedUserId:j,docIds:e,docFolderId:M}}).then((function(e){var t=e.data;b(t),v(),m([])})).catch((function(e){})).finally((function(){setTimeout((function(){p(!1)}),2e3)}))}(),n(!1),f(!1)},children:"Copy"}),(0,N.jsx)("button",{className:"btn btn-primary",type:"Move/Copy Files",title:"Add",onClick:function(){!function(){h(!0);var e=Array.isArray(u)?u.map((function(e){return parseInt(e)})):[];i()({method:"post",url:x+"/ProjectMS/ContractDocuments/moveDocsToFolder",data:{loggedUserId:j,docIds:e,docFolderId:M}}).then((function(e){var t=e.data;m([]),D(t),v()})).catch((function(e){})).finally((function(){setTimeout((function(){h(!1)}),2e3)}))}(),n(!1),f(!1)},children:"Move"})]})]})]})})})}},30374:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ut}});var s=n(29439),a=n(72791),l=n(4942),o=n(1413),r=(n(5636),n(56355)),c=n(34831),d=n(63521),u=n(80184);var m=function(e){var t=e.issueDetails,n=e.getData,l=e.setFormData,i=(0,a.useState)([]),r=(0,s.Z)(i,2),c=r[0],m=(r[1],(0,a.useRef)(null));return(0,a.useEffect)((function(){console.log(c)}),[c]),(0,a.useEffect)((function(){}),[t]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"autoComplete-container ",children:(0,u.jsx)("span",{className:"auto",id:"auto",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:t,type:"Text",ref:m,name:"assignedto",id:"assignedto",issueDetails:t,getData:n,className:"AutoComplete",onSelect:function(e){l((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assignedto:e.id})})),console.log(e)},onClear:function(){l((function(e){return(0,o.Z)((0,o.Z)({},e),{},{assignedto:null})}))},showIcon:!1})})}),(0,u.jsx)("span",{children:c.name})]})},p=n(78983),h=n(74569),v=n.n(h),f=n(66770),j=n.n(f),x=(n(86009),n(59513)),g=n.n(x),y=(n(68639),n(72426)),N=n.n(y),b=n(78820),_=n(32125);var S=function(e){var t=e.openPopup,n=e.setOpenPopup,m=(e.projectIssueDetails,e.type),h=(e.editId,e.setEditedData,e.editedData),f=e.getTableData,x=(e.addmsg,e.setAddmsg),y=e.setEditmsg,S=e.projectData,D=e.projectId,C=localStorage.getItem("resId"),Z=localStorage.getItem("resName");console.log(h.Due_Date);var w=(0,a.useState)(new Date(null===h||void 0===h?void 0:h.Due_Date)),M=(0,s.Z)(w,2),k=(M[0],M[1],(0,a.useState)([])),I=(0,s.Z)(k,2),P=(I[0],I[1]),T=(0,a.useState)([]),A=(0,s.Z)(T,2),E=A[0],R=A[1],F=(0,a.useState)([]),Y=(0,s.Z)(F,2),O=Y[0],H=Y[1],L=(0,a.useState)([]),B=(0,s.Z)(L,2),U=B[0],q=B[1],V=(0,a.useState)([]),z=(0,s.Z)(V,2),G=z[0],K=z[1],W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)(null),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(""),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(),re=(0,s.Z)(oe,2),ce=(re[0],re[1]),de=(0,a.useState)(),ue=(0,s.Z)(de,2),me=(ue[0],ue[1]),pe=(0,a.useState)(!1),he=(0,s.Z)(pe,2),ve=he[0],fe=he[1],je=(0,a.useState)(""),xe=(0,s.Z)(je,2),ge=(xe[0],xe[1],c.N.baseUrl),ye={projectid:D,criticality:"",source:"",status:426,name:"",duedate:"",RCA_Done:null,assignedto:null,createdbyid:C,createdbyname:Z,description:"",comments:""},Ne=void 0==h.RCA_Done||null==h.RCA_Done||""==h.RCA_Done?(0,o.Z)((0,o.Z)({},ye),{},{rca:0}):(0,o.Z)((0,o.Z)({},ye),{},{rca:h.RCA_Done?0:1}),be=(0,a.useState)(Ne),_e=(0,s.Z)(be,2),Se=_e[0],De=_e[1];console.log(Se.rca);var Ce=(0,a.useState)(!1),Ze=(0,s.Z)(Ce,2),we=(Ze[0],Ze[1],(0,a.useState)(h)),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)(h),Te=(0,s.Z)(Pe,2),Ae=Te[0],Ee=(Te[1],(0,a.useState)(!0)),Re=(0,s.Z)(Ee,2),Fe=Re[0],Ye=Re[1];console.log(Fe);var Oe=(0,a.useState)([]),He=(0,s.Z)(Oe,2),Le=He[0],Be=He[1],Ue=(0,a.useState)([]),qe=(0,s.Z)(Ue,2),Ve=qe[0],ze=qe[1],Ge=(0,a.useState)([]),Ke=(0,s.Z)(Ge,2),We=Ke[0],Qe=Ke[1],Je=(0,a.useState)([]),Xe=(0,s.Z)(Je,2),$e=Xe[0],et=Xe[1],tt=(0,a.useState)([]),nt=(0,s.Z)(tt,2),st=nt[0],at=nt[1],lt=(0,a.useState)([]),it=(0,s.Z)(lt,2),ot=it[0],rt=it[1],ct=(0,a.useState)([]),dt=(0,s.Z)(ct,2),ut=(dt[0],dt[1]),mt=(0,a.useState)([]),pt=(0,s.Z)(mt,2),ht=pt[0],vt=pt[1],ft=(0,a.useState)([]),jt=(0,s.Z)(ft,2),xt=jt[0],gt=jt[1],yt=(0,a.useState)([]),Nt=(0,s.Z)(yt,2),bt=(Nt[0],Nt[1],(0,a.useState)([])),_t=(0,s.Z)(bt,2),St=_t[0],Dt=_t[1];console.log(h);var Ct=(0,a.useRef)([]),Zt=(N()(N()().toString()).format("yyyy-MM-DD"),(0,a.useState)([])),wt=(0,s.Z)(Zt,2),Mt=wt[0];wt[1],(0,a.useEffect)((function(){console.log(Mt)}),[Mt]),(0,a.useEffect)((function(){kt(),It(),Pt(),Tt(),Et(),Rt(),Ft(),Yt(),Ot(),Ht(),Lt(),Bt(),Ut(),qt(),Vt()}),[]);var kt=function(e){console.log("popup criticality"),v()({method:"get",url:ge+"/ProjectMS/Issues/getCriticality"}).then((function(e){var t=e.data;R(t)}))},It=function(e){v()({method:"get",url:ge+"/ProjectMS/Issues/getIssueSource"}).then((function(e){var t=e.data;H(t)}))},Pt=function(e){v()({method:"get",url:ge+"/ProjectMS/Issues/getEditStatus"}).then((function(e){var t=e.data;q(t),console.log(t)}))},Tt=function(e){v()({method:"get",url:ge+"/ProjectMS/Issues/getEditNewStatus"}).then((function(e){var t=e.data;K(t),console.log(t)}))},At=function(){console.log("line no 106"),v()({method:"get",url:ge+"/ProjectMS/Issues/getAssignedData"}).then((function(e){var t=e.data;X(t),console.log("assigned data"),console.log(t)}))};(0,a.useEffect)((function(){}),[J]),(0,a.useEffect)((function(){At()}),[]);var Et=function(e){v()({method:"get",url:ge+"/ProjectMS/Issues/getProjectName"}).then((function(e){var t=e.data;P(t)}))},Rt=function(e){v()({method:"get",url:ge+"/ProjectMS/Issues/getIssueName?project_id=".concat(D)}).then((function(e){var t=e.data;Be(t)}))},Ft=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusdeferrred"}).then((function(e){var t=e.data;ze(t)}))},Yt=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusresolved"}).then((function(e){var t=e.data;Qe(t)}))},Ot=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusreview"}).then((function(e){var t=e.data;et(t)}))},Ht=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusInwaiting"}).then((function(e){var t=e.data;at(t)}))},Lt=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatuswithdraw"}).then((function(e){var t=e.data;rt(t)}))},Bt=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusNew"}).then((function(e){var t=e.data;ut(t)}))},Ut=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusassigned"}).then((function(e){var t=e.data;vt(t)}))},qt=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusInprogress"}).then((function(e){var t=e.data;gt(t)}))},Vt=function(){v()({method:"get",url:ge+"/ProjectMS/Issues/getStatusFollowup"}).then((function(e){var t=e.data;Dt(t)}))},zt={toolbar:[[{header:[!1,1,2,3,4,5,6]},{font:[]},{color:[]},{bold:{tooltip:"Bold (Ctrl+B)"}},"italic","underline",{list:"ordered",tooltip:"Numbered List"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","code-block","clean"]]},Gt=function(e){var t=e.target,n=t.id,s=t.value;De((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))}))},Kt=(0,a.useState)(!1),Wt=(0,s.Z)(Kt,2),Qt=Wt[0],Jt=Wt[1],Xt=function(e){/^[0-9a-zA-Z]+$/.test(e.key)||e.preventDefault()};return console.log(null===h||void 0===h?void 0:h.status_id),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)(p.Tk,{visible:t,size:"xl",onClose:function(){return n(!1)},backdrop:"static",children:[(0,u.jsx)(p.p0,{className:"",style:{cursor:"all-scroll"},children:(0,u.jsxs)(p.fl,{children:[" ","","add"==m?(0,u.jsx)("span",{className:"",children:"Add Issue"}):(0,u.jsx)("span",{className:"",children:" Edit Issue "})]})}),(0,u.jsx)(p.sD,{children:(0,u.jsxs)("div",{className:"group-content row ",children:[(0,u.jsxs)("div",{children:[Qt?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{size:"1.4em"}),(0,u.jsx)("span",{children:"Please select unique name"})]}):"",ve?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{size:"1.4em"}),(0,u.jsx)("span",{children:"Please select the valid values for highlighted fields"})]}):""]}),S.map((function(e){return(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"project",children:[(0,u.jsx)("label",{className:"col-5",children:"Project"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(null===h||void 0===h||h.status_id,(0,u.jsx)("input",{type:"Text",className:"disableField",name:"project",id:D,disabled:!0,value:e.projectName,onChange:function(e){return Gt(e)}}))})]})})})),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"name",children:[(0,u.jsxs)("label",{className:"col-5",children:["Issue Name",(0,u.jsx)("span",{className:" error-text ml-1",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 textfield",ref:function(e){Ct.current[0]=e},children:"add"==m?(0,u.jsx)("input",{className:"error unique",type:"text",id:"name",placeholder:"Max 50 characters",maxLength:50,onKeyDown:function(e){"Space"!=e.code||Se.name||e.preventDefault()},name:"name",required:!0,onChange:function(e){return Gt(e)}}):(0,u.jsxs)(u.Fragment,{children:[" ",432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("input",{className:"error unique ",type:"Text",name:"name",id:"name",defaultValue:null===h||void 0===h?void 0:h.Issue_Name,onChange:function(e){Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Issue_Name",e.target.value))})),Ye(!1)}}):(0,u.jsx)("input",{type:"Text",disabled:!0,placeholder:"max 50 characters",defaultValue:null===h||void 0===h?void 0:h.Issue_Name})]})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"criticality",children:[(0,u.jsxs)("label",{className:"col-5 ",children:["Criticality",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:"add"==m?(0,u.jsxs)("select",{className:"error  col-md-12 p0",name:"criticality",id:"criticality",onChange:function(e){return Gt(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),E.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsxs)("select",{className:"error  col-md-12 p0 ",name:"criticality",id:"criticality",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"priority_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),E.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.priority_id),children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"  col-md-12 p0 ",disabled:!0,name:"criticality",id:"criticality",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"priority_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),E.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.priority_id),children:[" ",e.lkup_name]})}))]})})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"source",children:[(0,u.jsxs)("label",{className:"col-5",children:["Issue Source",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:"add"==m?(0,u.jsxs)("select",{className:"error col-md-12 p0 ",name:"source",id:"source",onChange:function(e){return Gt(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsxs)("select",{className:"error col-md-12 p0 ",name:"source",id:"source",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"source_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.source_id),children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:" col-md-12 p0 ",disabled:!0,name:"source",id:"source",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"source_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.source_id),children:[" ",e.lkup_name]})}))]})})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"status",children:[(0,u.jsx)("label",{className:"col-5",children:"Status"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:"add"==m?(0,u.jsx)("select",{className:"col-md-12 disableField",name:"status",id:"status",onChange:function(e){return Gt(e)},disabled:!0,children:(0,u.jsxs)("option",{value:"{426}",id:"{426}",children:[" ","New"]})}):426==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:G.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):430==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:Ve.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):810==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:$e.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):811==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:st.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):429==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:ot.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):427==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:ht.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):812==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:St.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):428==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:xt.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):431==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:We.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):432==(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("select",{className:"col-md-12 ",disabled:!0,name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:U.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))}):(0,u.jsx)("select",{className:"col-md-12 ",name:"status",id:"status",onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:U.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"duedate",children:[(0,u.jsx)("label",{className:"col-5",children:"Due Date"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 ",children:(0,u.jsx)("div",{className:"datepicker",children:"add"==m?(0,u.jsx)(g(),{name:"duedate",id:"duedate",selected:te,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",minDate:new Date,onChange:function(e){De((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"duedate",N()(e).format("yyyy-MM-DD")))})),console.log(e),ne(e)},onKeyDown:function(e){e.preventDefault(),8!=e.keyCode&&e.preventDefault()}}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)(g(),{name:"duedate",id:"duedate",selected:void 0==ke.Due_Date?"":N()(ke.Due_Date)._d,dateFormat:"dd-MMM-yyyy",openToDate:N()().toDate(),showMonthDropdown:!0,showYearDropdown:!0,minDate:new Date,dropdownMode:"select",onChange:function(e){Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Due_Date",N()(e).format("yyyy-MM-DD")))})),console.log(e)},onKeyDown:function(e){e.preventDefault()}}):(0,u.jsx)(g(),{name:"duedate",id:"duedate",selected:void 0==ke.Due_Date?"":N()(ke.Due_Date)._d,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,disabled:!0,showYearDropdown:!0,minDate:new Date,dropdownMode:"select",onChange:function(e){Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Due_Date",N()(e).format("yyyy-MM-DD")))})),console.log(e)},onKeyDown:function(e){e.preventDefault()}})})})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Assigned To"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6",children:"add"==m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:J,type:"Text",name:"assignedto",id:"assignedto",placeholder:"Type minimum 3 characters",className:"AutoComplete",onKeyDown:Xt,issueDetails:J,getData:At,onSelect:function(e){De((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assignedto:e.id})})),De((function(e){return(0,o.Z)((0,o.Z)({},e),{},{status:427})}))},showIcon:!1})}),(0,u.jsx)("span",{children:Mt.name})]}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:J,type:"Text",name:"assignedto",id:"assignedto",className:"wrapperauto",issueDetails:J,getData:At,onKeyDown:Xt,onSelect:function(e){console.log(e),Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"owner_id",e.id))})),ce(e.id)},onChange:function(e){Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"owner_id",e.id))}))},showIcon:!1,inputSearchString:null===h||void 0===h?void 0:h.Assigned_To})}):(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)("div",{className:"autocomplete-wrapper disabled",children:(0,u.jsx)("input",{defaultValue:null===h||void 0===h?void 0:h.Assigned_To,items:J,type:"Text",disabled:!0,name:"assignedto",id:"assignedto"})})})})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"rca",children:[(0,u.jsx)("label",{className:"col-5",children:"RCA Done"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 ",children:(0,u.jsx)("div",{className:"row",children:"add"==m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-6",onChange:function(e){me("1"),De((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"rca","1"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"1",name:"rca",id:"rca",checked:"1"==Se.rca}),"\xa0",(0,u.jsx)("span",{className:"form-check-label",children:"Yes"})," "]}),(0,u.jsxs)("div",{className:"col-6",onChange:function(e){me("0"),De((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"rca","0"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"no",type:"radio",name:"rca",id:"rca",value:"0",checked:"1"!=Se.rca}),"\xa0",(0,u.jsx)("span",{className:"form-check-label",children:"No"})]})]}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-6 ",onChange:function(e){Ie((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"RCA_Done","1"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"1",name:"RCA_Done",id:"RCA_Done",checked:"1"==ke.RCA_Done}),"\xa0",(0,u.jsx)("span",{children:"Yes"})," "]}),(0,u.jsxs)("div",{className:"col-6 ",onChange:function(e){Ie((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"RCA_Done","0"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"no",type:"radio",name:"RCA_Done",id:"RCA_Done",value:"0",checked:"0"==ke.RCA_Done}),"\xa0",(0,u.jsx)("span",{children:"No"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-6 ",disabled:!0,children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"1",name:"RCA_Done",id:"RCA_Done",checked:"1"==ke.RCA_Done}),"\xa0",(0,u.jsx)("span",{children:"Yes"})]}),(0,u.jsxs)("div",{className:"col-6 ",disabled:!0,children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"no",type:"radio",name:"RCA_Done",id:"RCA_Done",value:"0",checked:"0"==ke.RCA_Done}),"\xa0",(0,u.jsx)("span",{children:"No"})]})]})})})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2 ",children:(0,u.jsxs)("div",{className:"form-group row",id:"createdby",children:[(0,u.jsx)("label",{className:"col-5",children:"Created By"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:"add"==m?(0,u.jsx)("input",{className:"disableField",type:"Text",id:"createdby",readOnly:!0,defaultValue:Z,disabled:!0}):(0,u.jsx)("input",{type:"Text",className:"disableField",name:"createdby",id:"createdby",readOnly:!0,defaultValue:null===h||void 0===h?void 0:h.Created_By,disabled:!0})})]})}),(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsx)("div",{className:"col-md-3 mb-2 ",children:(0,u.jsx)("div",{className:"form-group row",id:"description",children:(0,u.jsxs)("label",{className:"col-md-12 p0 ",children:["Issue Description",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]})})})}),(0,u.jsx)("div",{className:"col-md-12 mb-2 text error",ref:function(e){Ct.current[1]=e},children:"add"==m?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(j(),{className:"",theme:"snow",value:le,name:"description",id:"editor-container",onChange:function(e){ie(e),De((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"description",le))}))},modules:zt})}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("div",{children:(0,u.jsx)(j(),{className:"",theme:"snow",defaultValue:null===h||void 0===h?void 0:h.description,name:"description",id:"editor-container",onChange:function(e){ie(e),Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"description",e))}))},modules:zt})}):(0,u.jsx)("div",{disabled:!0,children:(0,u.jsx)(j(),{className:"",theme:"snow",disabled:!0,readOnly:!0,name:"description",id:"description",defaultValue:null===h||void 0===h?void 0:h.description,modules:zt})})})}),(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsx)("div",{className:"col-md-3 ",children:(0,u.jsx)("div",{className:"form-group row",id:"comments",children:(0,u.jsx)("label",{className:"col-md-12 ",children:"Comments"})})})}),(0,u.jsx)("div",{className:"col-md-12 p0",children:"add"==m?(0,u.jsx)("textarea",{maxLength:500,rows:"4",cols:180,name:"comments",id:"comments",placeholder:"Max 500 characters",onChange:function(e){return Gt(e)}}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsx)("textarea",{maxLength:500,rows:"4",cols:180,name:"comments",id:"comments",placeholder:"Max 500 characters",defaultValue:null===h||void 0===h?void 0:h.Comments,onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Comments",e.target.value))}))}}):(0,u.jsx)("textarea",{maxLength:500,rows:"4",cols:180,name:"comments",id:"comments",placeholder:"Max 500 characters",disabled:!0,defaultValue:null===h||void 0===h?void 0:h.Comments,onChange:function(e){return Ie((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Comments",e.target.value))}))}})})}),(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:"add"==m?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){console.log(Se);var e=Le.some((function(e){return e.name==Se.name}));if(console.log(e),e){console.log("1234567");var t=document.getElementsByClassName("unique");console.log(t.length);for(var s=0;s<t.length;s++)t[s].classList.add("error-block");return console.log(t),Jt(!0),fe(!1),void setTimeout((function(){}),3e3)}if(!e){for(var a=document.getElementsByClassName("error"),l=0;l<a.length;l++)console.log(a[l].value),""==a[l].value||"null"==a[l].value||"All"==a[l].value||void 0==a[l].value?(a[l].classList.add("error-block"),fe(!0),Jt(!1)):(a[l].classList.remove("error-block"),fe(!1));var o=Se.name,r=Se.criticality,c=Se.source,d=Se.description;if(Object.values({name:o,criticality:r,source:c,description:d}).includes(""))return fe(!0),void a[i].classList.remove("error-block");fe(!1);var u=(0,_.Z)(Ct);fe(!1),console.log(u),u?fe(!0):(fe(!1),v()({method:"post",url:ge+"/ProjectMS/Issues/postProjectIssuesData",data:Se}).then((function(e){fe(!1),console.log("success",e),n(!1),f(),x(!0),setTimeout((function(){x(!1)}),3e3)})))}}()},children:[(0,u.jsx)(r.TvB,{}),"Save"," "]}):(0,u.jsx)(u.Fragment,{children:432!=(null===h||void 0===h?void 0:h.status_id)?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){console.log(ke);var e=Le.some((function(e){return e.name==ke.Issue_Name}));if(console.log(e&&0==Fe&&ke.Issue_Name!=Ae.Issue_Name,Fe),e&&0==Fe&&ke.Issue_Name!=Ae.Issue_Name){for(var t=document.getElementsByClassName("unique"),s=0;s<t.length;s++)t[s].classList.add("error-block");return Jt(!0),void setTimeout((function(){}),3e3)}console.log(ke),console.log(D);for(var a=document.getElementsByClassName("error"),l=0;l<a.length;l++)console.log(a[l].value),""==a[l].value||"null"==a[l].value||"All"==a[l].value||void 0==a[l].value?(a[l].classList.add("error-block"),fe(!0)):(a[l].classList.remove("error-block"),fe(!1));var i=ke.name,o=ke.criticality,r=ke.source,c=ke.description;if(Object.values({name:i,criticality:o,source:r,description:c}).includes("")||"<p><br></p>"===c)fe(!0);else{fe(!1);var d=(0,_.Z)(Ct);console.log(d),d?fe(!0):(fe(!1),v()({method:"post",url:ge+"/ProjectMS/Issues/postProjectIssuesData",data:{id:ke.id,projectid:D,createdbyname:ke.Created_By,duedate:ke.Due_Date,name:ke.Issue_Name,rca:!0===ke.RCA_Done?"1":!1===ke.RCA_Done?"0":ke.RCA_Done,comments:ke.Comments,createdbyid:ke.created_by_id,description:ke.description,assignedto:ke.owner_id,criticality:ke.priority_id,source:ke.source_id,status:426==ke.status_id&&null!=ke.owner_id?427:ke.status_id}}).then((function(e){console.log("success",e),n(!1),f(),y(!0),setTimeout((function(){y(!1)}),3e3)})))}}()},children:[(0,u.jsx)(r.TvB,{}),"Save"," "]}):(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",style:{cursor:"no-drop"},children:[(0,u.jsx)(r.TvB,{}),"Save"," "]})})})]})})]})})},D=n(83854),C=n(11167),Z=n(7692),w=n(24745),M=n(70828),k=n(38262);var I=function(e){var t,n,i=e.projectId,h=e.grp4Items;console.log(h),console.log(null===(t=h[5])||void 0===t?void 0:t.is_write);var f=c.N.baseUrl,j=(0,a.useState)(0),x=(0,s.Z)(j,2),g=x[0],y=x[1],_=(0,a.useState)(!1),I=(0,s.Z)(_,2),P=I[0],T=I[1],A=(0,a.useState)(!1),E=(0,s.Z)(A,2),R=E[0],F=E[1],Y=(0,a.useState)(!1),O=(0,s.Z)(Y,2),H=O[0],L=O[1],B=(0,a.useState)(""),U=(0,s.Z)(B,2),q=(U[0],U[1],(0,a.useState)("")),V=(0,s.Z)(q,2),z=V[0],G=(V[1],(0,a.useState)("ASC")),K=(0,s.Z)(G,2),W=(K[0],K[1],(0,a.useState)([])),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)([]),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)([]),re=(0,s.Z)(oe,2),ce=(re[0],re[1]),de=(0,a.useState)([]),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(!1),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=(0,a.useState)(!1),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=ge[1],be=(0,a.useState)(!1),_e=(0,s.Z)(be,2),Se=_e[0],De=_e[1],Ce=(0,a.useState)(!1),Ze=(0,s.Z)(Ce,2),we=Ze[0],Me=Ze[1],ke=(0,a.useState)(r.UdN),Ie=(0,s.Z)(ke,2),Pe=Ie[0],Te=Ie[1],Ae=(0,a.useState)([]),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1],Ye=(0,a.useState)([]),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=Oe[1];console.log(He);var Be=(0,a.useState)([]),Ue=(0,s.Z)(Be,2),qe=(Ue[0],Ue[1]),Ve=(0,a.useState)("add"),ze=(0,s.Z)(Ve,2),Ge=ze[0],Ke=ze[1],We=(0,a.useState)([]),Qe=(0,s.Z)(We,2),Je=Qe[0],Xe=Qe[1],$e={projectid:i,criticality:null,source:null,status:null,name:null,rca:null,assignedto:null,createdby:null,duedate:null},et=(0,a.useState)($e),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],at=(0,a.useState)($e),lt=(0,s.Z)(at,2),it=lt[0],ot=lt[1],rt=(0,a.useState)(),ct=(0,s.Z)(rt,2),dt=ct[0],ut=ct[1],mt=(localStorage.getItem("resName"),(0,a.useState)([])),pt=(0,s.Z)(mt,2),ht=pt[0],vt=pt[1],ft=(0,a.useState)([]),jt=(0,s.Z)(ft,2),xt=jt[0],gt=jt[1],yt=(0,a.useState)([]),Nt=(0,s.Z)(yt,2),bt=Nt[0],_t=Nt[1],St=(0,a.useState)([]),Dt=(0,s.Z)(St,2),Ct=Dt[0],Zt=(Dt[1],(0,a.useState)([])),wt=(0,s.Z)(Zt,2),Mt=wt[0],kt=(wt[1],localStorage.getItem("resId")),It=(0,a.useState)([]),Pt=(0,s.Z)(It,2),Tt=Pt[0],At=Pt[1];(0,a.useEffect)((function(){Et()}),[]);var Et=function(){v()({method:"GET",url:f+"/CommonMS/master/getMenus?loggedUserId=".concat(kt)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&At([e])}))}))};console.log(Tt);var Rt=h.find((function(e){return"Issues"===e.display_name}));console.log(null===Rt||void 0===Rt?void 0:Rt.is_write,"****");var Ft=(0,a.useRef)(null),Yt=function(e){return(0,u.jsx)("div",{align:"center",children:e.SNo})},Ot=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Issue_Name,children:e.Issue_Name})},Ht=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Criticality,children:e.Criticality})},Lt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Status,children:e.Status})},Bt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Issue_Source,children:e.Issue_Source})},Ut=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Assigned_To,children:e.Assigned_To})},qt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.RCA_Done,children:1==e.RCA_Done?"Yes":"No"})},Vt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Created_By,children:e.Created_By})},zt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.Comments,children:e.Comments})},Gt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:N()(e.Due_Date).format("DD-MMM-yyyy"),children:null==e.Due_Date?"":N()(e.Due_Date).format("DD-MMM-yyyy")})};(0,a.useEffect)((function(){}),[Mt]),(0,a.useEffect)((function(){Kt()}),[]),(0,a.useEffect)((function(){}),[nt]);var Kt=function(){v()({method:"get",url:f+"/ProjectMS/issues/getDetails"}).then((function(e){e=e.data;Xe(e)})).catch((function(e){}))};(0,a.useEffect)((function(){}),[Je]),(0,a.useEffect)((function(){Jt(),Xt(),$t(),Qt(),sn()}),[]);var Wt=function(){v()({method:"get",url:f+"/ProjectMS/Issues/getAssignedData"}).then((function(e){var t=e.data;Fe(t)}))};(0,a.useEffect)((function(){}),[Re]),(0,a.useEffect)((function(){Wt()}),[]),(0,a.useEffect)((function(){v()({method:"get",url:f+"/ProjectMS/Issues/getAssignedData1"}).then((function(e){var t=e.data;Le(t)}))}),[]);var Qt=function(){je(!1),v()({method:"post",url:f+"/ProjectMS/Issues/getIssuesTableData",data:it}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].SNo=n+1;_t(["Action"]),pe([{SNo:"S.No",Issue_Name:"Issue Name",Criticality:"Criticality",Status:"Status",Due_Date:"Due Date",Issue_Source:"Issue Source",Assigned_To:"Assigned To",RCA_Done:"RCA Done",Created_By:"Created By",Comments:"Comments",Action:"Action"}].concat(t)),ce(e.data),qe(e.data),je(!1),Me(!we),Te(we?r.UdN:r.NR5)})).then((function(e){}))},Jt=function(){v()({method:"get",url:f+"/ProjectMS/Issues/getCriticality"}).then((function(e){var t=e.data;X(t)}))},Xt=function(){v()({method:"get",url:f+"/ProjectMS/Issues/getIssueSource"}).then((function(e){var t=e.data;ne(t)}))},$t=function(){v()({method:"get",url:f+"/ProjectMS/Issues/getStatus"}).then((function(e){var t=e.data;ie(t)}))},en=function(e){var t=e.target,n=t.id,s=t.value;ot((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,"null"==s?null:s))}))},tn=function(e){var t;bt[0];return(0,u.jsx)("div",{align:"center",children:1==(null===(t=h[5])||void 0===t?void 0:t.is_write)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.QML,{color:"orange",type:"edit",size:"1.2em",align:"center",onClick:function(){st(e),ut(e.id),Ne(!0),Ke("edit")}}),"\xa0",(0,u.jsx)(b.YK6,{color:"orange",title:"Delete",onClick:function(){an(e.id)}})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.QML,{color:"orange",type:"edit",size:"1.2em",align:"center",style:{cursor:"not-allowed"}}),"\xa0",(0,u.jsx)(b.YK6,{color:"orange",title:"Delete",className:"pointerCursor disableField",disabled:!0,style:{cursor:"not-allowed",opacity:"0.35"}})]})})},nn=null===(n=Object.keys(xt))||void 0===n?void 0:n.map((function(e,t){return(0,u.jsx)(C.sgG,{sortable:!0,body:"SNo"==e?Yt:"RCA_Done"==e&&qt||"Criticality"==e&&Ht||"Status"==e&&Lt||"Criticality"==e&&Ht||"Issue_Source"==e&&Bt||"Created_By"==e&&Vt||"Comments"==e&&zt||"Assigned_To"==e&&Ut||"Issue_Name"==e&&Ot||"Due_Date"==e&&Gt||"Action"==e&&tn,field:e,header:xt[e]},e)}));(0,a.useEffect)((function(){me[0]&&gt(JSON.parse(JSON.stringify(me[0])))}),[me]);var sn=function(){v()({method:"get",url:f+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(i)}).then((function(e){var t=e.data;vt(t)})).catch((function(e){}))},an=function(e){De(!0),y(e)},ln=(0,a.useState)([]),on=(0,s.Z)(ln,2),rn=on[0],cn=on[1];function dn(e){var t=e.deleteIssue,n=e.deletePopup,s=e.setDeletePopup;return(0,u.jsx)("div",{children:(0,u.jsxs)(p.Tk,{visible:n,size:"xs",className:"ui-dialog",onClose:function(){return s(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Project Issue"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("h6",{children:"Are you sure you want to delete Issue ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){t()},children:[(0,u.jsx)(b.YK6,{})," Delete"," "]})," ","\xa0 \xa0",(0,u.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){s(!1)},children:[" ",(0,u.jsx)(M.sQZ,{})," Cancel"," "]})]})]})]})})}return(0,a.useEffect)((function(){cn(["XLS"])}),[]),(0,u.jsxs)("div",{children:[P?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Issue Deleted Successfully"]}):"",R?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Issue added Successfully"]}):"",H?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Issue edited Successfully"]}):"",(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[ht.map((function(e){return(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:e.projectName})})})),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Issues"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:Tt,currentScreenName:["Projects","Open","Monitoring","Issues"]}),(0,u.jsxs)("div",{className:"col-md-12 customCard",children:[(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,u.jsx)("h2",{children:"Search Filters"}),(0,u.jsx)("div",{onClick:function(){Me(!we),Te(we?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:Pe})})]}),(0,u.jsxs)(p.V9,{visible:!we,children:[(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:" form-group row",id:"criticality",children:[(0,u.jsx)("label",{className:"col-5",children:"Criticality "}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{className:"col-md-12 p0",id:"criticality",onChange:function(e){return en(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),J.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"source",children:[(0,u.jsx)("label",{className:"col-5",children:"Issue Source"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{className:"col-md-12 p0",id:"source",onChange:function(e){return en(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),te.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:" form-group row",id:"status",children:[(0,u.jsx)("label",{className:"col-5",children:"Status "}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{className:"col-md-12 p0",id:"status",onChange:function(e){return en(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),le.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"name",children:[(0,u.jsx)("label",{className:"col-5",children:"Issue Name"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsx)("input",{type:"Text",name:"name",id:"name",onChange:function(e){var t=e.target,n=(t.id,t.value);ot((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"name",""==n?null:n))}))}})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"rca",children:[(0,u.jsx)("label",{className:"col-5",children:"RCA Done"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{className:"col-md-12 p0",id:"rca",onChange:function(e){return en(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),(0,u.jsxs)("option",{value:"1",id:"1",children:[" ","Yes"," "]}),(0,u.jsxs)("option",{value:"0",id:"0",children:[" ","No"," "]})]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"assignedto",children:[(0,u.jsx)("label",{className:"col-5",children:"Assigned To"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 ",children:(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(m,{id:"assignedto",name:"assignedto",issueDetails:Re,setFormData:ot,getData:Wt,onChange:function(e){var t=e.target,n=t.id;t.value;ot((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"assignedto",""==n?null:n))}))}})})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"createdby",children:[(0,u.jsx)("label",{className:"col-5",children:"Created By "}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:He,id:"createdby",name:"createdby",onSelect:function(e){ot((function(t){return(0,o.Z)((0,o.Z)({},t),{},{createdby:e.id})}))},showIcon:!1,onClear:function(){ot((function(e){return(0,o.Z)((0,o.Z)({},e),{},{createdby:null})}))}})})})]})}),(0,u.jsx)("div",{className:"my-2 btn-container center",children:(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",value:z,onClick:function(){Qt()},children:[(0,u.jsx)(r.U41,{})," Search"," "]})})]}),fe?(0,u.jsx)(D.Z,{handleAbort:function(){Ft.current&&Ft.current.abort(),je(!1)}}):""]})]}),(0,u.jsx)("div",{className:"customCard",children:(0,u.jsx)("div",{className:"",children:(0,u.jsxs)("div",{className:"col-md-12 no-padding",children:[(0,u.jsx)(w.Z,{data:me,rows:25,linkColumns:bt,linkColumnsRoutes:Ct,dynamicColumns:nn,headerData:xt,setHeaderData:gt,exportData:rn,fileName:"Project Issues"}),!0===(null===Rt||void 0===Rt?void 0:Rt.is_write)?(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){Ne(!0),Ke("add")},children:[(0,u.jsx)(r.wEH,{}),"Add"]})}):""]})})}),ye?(0,u.jsx)(S,{openPopup:ye,setOpenPopup:Ne,projectIssueDetails:Je,type:Ge,getTableData:Qt,editId:dt,addmsg:R,setAddmsg:F,editmsg:H,setEditmsg:L,setEditedData:st,editedData:nt,projectData:ht,projectId:i}):"",Se?(0,u.jsx)(dn,{deleteIssue:function(){v()({method:"delete",url:f+"/ProjectMS/Issues/deleteIssueDetails?id=".concat(g),data:g}).then((function(e){y(0),Qt(),De(!1),T(!0),setTimeout((function(){T(!1)}),3e3)}))},deletePopup:Se,setDeletePopup:De}):""]})]})};var P=n(16856);var T=function(e){var t,n=localStorage.getItem("resId"),m=(localStorage.getItem("resName"),(0,a.useState)(0)),h=(0,s.Z)(m,2),f=h[0],x=h[1],g=c.N.baseUrl,y=(0,a.useState)(""),N=(0,s.Z)(y,2),S=N[0],D=N[1],C=e.openPopup,Z=e.setOpenPopup,w=e.getTableData,M=e.tableData,k=e.type,I=e.editedData,T=e.setAddmsg,A=e.setEditmsg,E=e.projectId,R=(e.editId,e.projectData),F=(0,a.useState)([]),Y=(0,s.Z)(F,2),O=Y[0],H=Y[1],L=(0,a.useState)([]),B=(0,s.Z)(L,2),U=B[0],q=B[1],V=(0,a.useState)([]),z=(0,s.Z)(V,2),G=z[0],K=z[1],W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)([]),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)({project:"",title:"",defect_project_task_id:"",defect_project_injected_task_id:"",requirement:"",severity_id:"",priority_id:"",status_id:"",assigned_to:"",description:"",review_method_id:""}),re=(0,s.Z)(oe,2),ce=(re[0],re[1],(0,a.useState)([])),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=(0,a.useState)([]),he=(0,s.Z)(pe,2),ve=(he[0],he[1]),fe=(0,a.useState)(!1),je=(0,s.Z)(fe,2),xe=(je[0],je[1],(0,a.useState)(!1)),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=ge[1],be=(0,a.useState)(!1),_e=(0,s.Z)(be,2),Se=_e[0],De=_e[1],Ce=(0,a.useState)([]),Ze=(0,s.Z)(Ce,2),we=Ze[0],Me=Ze[1],ke=(0,a.useRef)([]),Ie=(0,a.useState)([]),Pe=(0,s.Z)(Ie,2),Te=Pe[0],Ae=(Pe[1],(0,a.useState)(!1)),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1],Ye=(0,a.useState)(I),Oe=(0,s.Z)(Ye,2),He=Oe[0];Oe[1],(0,a.useEffect)((function(){console.log(Te)}),[Te]);var Le=(0,a.useState)([]),Be=(0,s.Z)(Le,2),Ue=Be[0],qe=Be[1];(0,a.useEffect)((function(){console.log("line no 106"),v()({method:"get",url:g+"/ProjectMS/defectphases/getresourceid?id=".concat(n)}).then((function(e){var t=e.data;x(t)}))}),[f]);var Ve=(t={projectid:E,title:"",priority_id:"",severity_id:"",status_id:"",assigned_to:"",description:"",defect_project_task_id:"",defect_project_injected_task_id:"",review_method_id:"",reported_by:""},(0,l.Z)(t,"description",""),(0,l.Z)(t,"comment",""),t),ze=(0,a.useState)(Ve),Ge=(0,s.Z)(ze,2),Ke=Ge[0],We=Ge[1],Qe=(0,a.useState)(I),Je=(0,s.Z)(Qe,2),Xe=Je[0],$e=Je[1];(0,a.useEffect)((function(){}),[Xe]);var et=function(){v()({method:"post",url:g+"/ProjectMS/defectphases/autocomplete?projectId=".concat(E,"&searchKey=&isAll=0")}).then((function(e){var t=e.data;ie(t),console.log(t)}))};(0,a.useEffect)((function(){}),[we]),(0,a.useEffect)((function(){console.log("line no 106"),v()({method:"get",url:g+"/ProjectMS/Issues/getAssignedData"}).then((function(e){var t=e.data;Me(t),console.log("assigned data"),console.log(t)}))}),[]);var tt={toolbar:[[{header:[!1,1,2,3,4,5,6]},{color:[]},"bold","italic","underline",{list:"ordered",title:"ordered"},{list:"bullet",title:"Bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","image","code-block","clean"]]},nt=(0,a.useState)(!0),st=(0,s.Z)(nt,2),at=st[0],lt=st[1],it=function(e){var t=e.target,n=t.id,s=t.value;We((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))})),We((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"reported_by",f))})),$e((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"reported_by",f))}))};(0,a.useEffect)((function(){}),[le]),(0,a.useEffect)((function(){et()}),[]),(0,a.useEffect)((function(){v()({method:"get",url:g+"/ProjectMS/defectphases/getDefectPhases"}).then((function(e){var t=e.data;H(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getSeverity"}).then((function(e){var t=e.data;q(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getPriority"}).then((function(e){var t=e.data;K(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getStatus"}).then((function(e){var t=e.data;X(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getPhaseInjected"}).then((function(e){var t=e.data;ne(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getProject"}).then((function(e){var t=e.data;ve(t)})),v()({method:"get",url:g+"/ProjectMS/defectphases/getReviewMethod"}).then((function(e){var t=e.data;me(t)}))}),[]),console.log(I.assignedTo),console.log(Xe);var ot=function(e){return(0,u.jsx)("div",{className:"result-wrapper",children:(0,u.jsxs)("span",{className:"result-span",children:[e.ResName," (",(0,u.jsx)("span",{children:e.employeeNumber}),")"]})})};return(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)(p.Tk,{visible:C,size:"xl",onClose:function(){return Z(!1)},backdrop:"static",children:[(0,u.jsx)(p.p0,{children:(0,u.jsx)(p.fl,{children:"add"==k?(0,u.jsx)("span",{children:"Create Defect"}):(0,u.jsx)("span",{children:"Edit Defect"})})}),(0,u.jsx)(p.sD,{children:(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsxs)("div",{children:[Re?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{size:"1.4em"}),(0,u.jsx)("span",{children:"Please select unique name"})]}):"",ye?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[" ",(0,u.jsx)(b.CSE,{})," Please select the valid values for highlighted fields"]})}):""]}),R.map((function(e){return(0,u.jsx)("div",{className:" col-md-2 mb-2",children:(0,u.jsxs)("div",{className:"form-group row ",id:"project",children:[(0,u.jsx)("label",{htmlFor:"col-5 ",children:"Project"}),(0,u.jsx)("label",{className:" ",children:(0,u.jsx)("input",{type:"Text",className:"disableField",id:E,disabled:!0,value:e.projectName,onChange:function(e){return it(e)}})})]})})})),(0,u.jsxs)("div",{className:"form-group col-md-2 ",id:"title",children:[(0,u.jsxs)("label",{htmlFor:"form-label",children:[" ","Defect Title\xa0",(0,u.jsx)("span",{className:"required",children:" *"})]}),"add"==k?(0,u.jsx)("input",{className:"error unique ",type:"Text",name:"title",id:"title",placeholder:"Title",onChange:function(e){return it(e)}}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsx)("input",{className:"error ",type:"Text",defaultValue:null===I||void 0===I?void 0:I.title,onChange:function(e){$e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"title",e.target.value))})),lt(!1)}}):(0,u.jsx)("input",{className:"error ",disabled:!0,type:"Text",defaultValue:null===I||void 0===I?void 0:I.title,onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"title",e.target.value))}))}})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 ",id:"defect_project_task_id",children:[(0,u.jsxs)("label",{htmlFor:"form-label",children:["Phase\xa0",(0,u.jsx)("span",{className:"error-text",children:" *"})]}),(0,u.jsx)("label",{htmlFor:"col-md-12 ",children:"add"==k?(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("select",{className:"error enteredDetails cancel text",name:"defect_project_task_id",id:"defect_project_task_id",onChange:function(e){return it(e)},ref:function(e){ke.current[0]=e},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.task_name]})}))]})," "]}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsxs)("select",{className:"error",id:"defect_project_task_id",name:"defect_project_task_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"defect_project_task_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.defect_project_task_id),children:[" ",e.task_name]})}))]}):(0,u.jsxs)("select",{className:"error",disabled:!0,id:"defect_project_task_id",name:"defect_project_task_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"defect_project_task_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),O.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.defect_project_task_id),children:[" ",e.task_name]})}))]})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Phase Injected"}),(0,u.jsx)("label",{htmlFor:"form-label",children:"add"==k?(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("select",{className:"col-md-12",id:"defect_project_injected_task_id",onChange:function(e){return it(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),te.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.task_name]})}))]})}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsxs)("select",{className:"col-md-12",name:"defect_project_injected_task_id",id:"defect_project_injected_task_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"defect_project_injected_task_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),te.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.defect_project_injected_task_id),children:[" ",e.task_name]})}))]}):(0,u.jsxs)("select",{className:"col-md-12",disabled:!0,name:"defect_project_injected_task_id",id:"defect_project_injected_task_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"defect_project_injected_task_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),te.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.defect_project_injected_task_id),children:[" ",e.task_name]})}))]})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"review_method_id",children:[(0,u.jsxs)("label",{htmlFor:"form-label",children:["Review/Testing Method\xa0",(0,u.jsx)("span",{className:"required",children:" *"})]}),(0,u.jsx)("label",{htmlFor:"form-label",children:"add"==k?(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("select",{className:" error col-md-12",name:"review_method_id",id:"review_method_id",onChange:function(e){return it(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),ue.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})," "]}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsxs)("select",{className:" error col-md-12",name:"review_method_id",id:"review_method_id",defaultValue:null===I||void 0===I?void 0:I.review_method_id,onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"review_method_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),ue.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.review_method_id),children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"  error col-md-12",disabled:!0,name:"review_method_id",id:"review_method_id",defaultValue:null===I||void 0===I?void 0:I.review_method_id,onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"review_method_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),ue.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.review_method_id),children:[" ",e.lkup_name]})}))]})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"severity_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Severity "}),(0,u.jsx)("label",{htmlFor:"form-label",children:"add"==k?(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("select",{className:"col-md-12",name:"severity_id",id:"severity_id",onChange:function(e){return it(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),U.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})," "]}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsxs)("select",{className:"col-md-12",name:"severity_id",id:"severity_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"severity_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),U.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.severity_id),children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"col-md-12",disabled:!0,name:"severity_id",id:"severity_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"severity_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),U.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.severity_id),children:[" ",e.lkup_name]})}))]})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"priority_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Priority "}),(0,u.jsx)("label",{htmlFor:"form-label",children:"add"==k?(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("select",{className:"col-md-12",name:"priority_id",id:"priority_id",onChange:function(e){return it(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),G.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsxs)("select",{className:"col-md-12",id:"priority_id",name:"priority_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"priority_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),G.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.priority_id),children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"col-md-12",disabled:!0,id:"priority_id",name:"priority_id",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"priority_id",e.target.value))}))},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),G.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.priority_id),children:[" ",e.lkup_name]})}))]})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"status_id",children:[(0,u.jsxs)("label",{htmlFor:"form-label",children:["Status\xa0",(0,u.jsx)("span",{className:"required",children:" *"})]}),(0,u.jsx)("label",{htmlFor:"form-label",id:"status_id",children:"add"==k?(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("select",{className:" error col-md-12 ",name:"status_id",id:"status_id",onChange:function(e){return it(e)},children:[(0,u.jsxs)("option",{value:"All",children:[" ","<<Please Select>>"]}),J.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})," "]}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsx)("select",{className:"error col-md-12",onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:J.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.status_id),children:[" ",e.lkup_name]})}))}):(0,u.jsx)("select",{className:"error col-md-12",disabled:!0,onChange:function(e){return $e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:J.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===I||void 0===I?void 0:I.status_id),children:[" ",e.lkup_name]})}))})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"assigned_to",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Assigned To"}),"add"==k?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)("div",{children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:le,type:"Text",name:"assigned_to",id:"assigned_to",className:"AutoComplete",assigneTo:le,handleAssigneToChange:et,fuseOptions:{keys:["id","ResName","employeeNumber"]},resultStringKeyName:"ResName",formatResult:ot,onSelect:function(e){We((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assigned_to:e.id})}))},showIcon:!1})})}),(0,u.jsx)("span",{children:Te.ResName})," "]}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:le,type:"Text",name:"assigned_to",id:"assigned_to",className:"wrapperauto",assigneTo:le,handleAssigneToChange:et,fuseOptions:{keys:["id","ResName","employeeNumber"]},resultStringKeyName:"ResName",formatResult:ot,onSelect:function(e){$e((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assigned_to:e.id})})),console.log(e.id)},onChange:function(e){$e((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assigned_to:e.id})}))},showIcon:!1,inputSearchString:null==(null===I||void 0===I?void 0:I.assignedTo)?"":null===I||void 0===I?void 0:I.assignedTo})}):(0,u.jsx)("div",{className:"autocomplete-wrapper",children:(0,u.jsx)("input",{items:le,type:"Text",name:"assigned_to",id:"assigned_to",defaultValue:null==(null===I||void 0===I?void 0:I.assignedTo)?"":null===I||void 0===I?void 0:I.assignedTo,className:"wrapperauto",assigneTo:le,disabled:!0})})})]}),(0,u.jsxs)("div",{className:"form-group col-md-12",children:[(0,u.jsx)("div",{className:"Space"}),(0,u.jsx)("div",{className:"col-md-3 mt-1",id:"description",children:(0,u.jsxs)("label",{htmlFor:"form-label",children:["Defect Description\xa0",(0,u.jsx)("span",{class:"error-text required",children:" *"})]})})]}),(0,u.jsx)("div",{className:"col-md-12 text error ",ref:function(e){ke.current[1]=e},children:"add"==k?(0,u.jsx)("div",{children:(0,u.jsx)(j(),{className:"",theme:"snow",id:"description",value:S,name:"description",onChange:function(e){D(e),We((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"description",S))}))},modules:tt})}):(0,u.jsx)(u.Fragment,{children:345!=I.status_id?(0,u.jsx)("div",{children:(0,u.jsx)(j(),{className:"",theme:"snow",defaultValue:null===I||void 0===I?void 0:I.description,name:"description",id:"editor-container",onChange:function(e){D(e),$e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"description",e))}))},modules:tt})}):(0,u.jsx)("div",{style:{cursor:"no-drop"},children:(0,u.jsx)(j(),{className:"",theme:"snow",disabled:!0,readOnly:!0,defaultValue:null===I||void 0===I?void 0:I.description,name:"description",id:"editor-container",onChange:function(e){D(e),$e((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"description",e))}))},modules:tt})})})}),(0,u.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding",children:[(0,u.jsx)("div",{className:"col-sm-12",children:(0,u.jsx)("div",{className:"uploadFiles customCard",children:(0,u.jsxs)("h2",{children:[(0,u.jsx)(b.SD$,{}),"Attachments"]})})}),(0,u.jsxs)("div",{className:"col-md-12 left",children:[345!=I.status_id?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Add",onClick:function(){return De(!0)},children:[" ",(0,u.jsx)(r.wEH,{}),"Add"," "]}):(0,u.jsxs)("button",{type:"button",style:{cursor:"no-drop"},className:"btn btn-primary",title:"Add",children:[" ",(0,u.jsx)(r.wEH,{}),"Add"," "]}),Se&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{children:"Note: You can select 10 files at max."}),(0,u.jsx)("label",{children:"Browse Document"}),(0,u.jsx)("input",{type:"file",multiple:!0,name:"docId",id:"docId",accept:".jpg,.jpeg,.xlsx,.pdf,.docx,.txt",onChange:function(e){var t=e.target.files,n=Array.from(t);n.length<=10?qe(n):(alert("You can only upload a maximum of 10 files."),e.target.value=null)}}),(0,u.jsx)("ul",{children:Ue.map((function(e){return(0,u.jsx)("li",{children:e.name},e.name)}))}),(0,u.jsx)("label",{className:"documenttypes col-md-12",children:(0,u.jsxs)("p",{className:"error-text",children:["Supported file types .pdf,.doc,.csv,.txt,.xlsx,.html,.png"," "]})})]}),(0,u.jsx)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:"add"==k?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){console.log(Ke),console.log(I),console.log(M);var e=document.getElementsByClassName("error"),t=M.some((function(e){return e.title===Ke.title}));if(console.log(t),t){console.log("1234567");var n=document.getElementsByClassName("unique");console.log(n.length);for(var s=0;s<n.length;s++)n[s].classList.add("error-block");return console.log(n),Fe(!0),Ne(!1),void setTimeout((function(){}),3e3)}if(!t){for(var a=0;a<e.length;a++)""==e[a].value||"null"==e[a].value||"All"==e[a].value||void 0==e[a].value?(e[a].classList.add("error-block"),Ne(!0),Fe(!1)):(e[a].classList.remove("error-block"),Ne(!1));var l=Ke.title,o=Ke.defect_project_task_id,r=Ke.review_method_id,c=Ke.description,d=Ke.status_id;if(Object.values({name:l,Phase:o,Review:r,description:c,status:d}).includes(""))return Ne(!0),void e[i].classList.remove("error-block");var u=(0,_.Z)(ke);console.log(u),u?Ne(!0):(Ne(!1),v()({method:"post",url:g+"/ProjectMS/defectphases/postDefectsData",data:Ke}).then((function(e){Ne(!1),console.log("success",e),Z(!1),w(),T(!0),setTimeout((function(){T(!1)}),3e3)})))}}()},children:[(0,u.jsx)(P.Pfl,{}),"\xa0Create"," "]}):(0,u.jsxs)(u.Fragment,{children:[" ",345!=I.status_id?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){console.log(I);var e=document.getElementsByClassName("error"),t=M.some((function(e){return e.title===Xe.title}));if(console.log(t),t&&0==at&&Xe.title!=He.title){console.log("1234567");var n=document.getElementsByClassName("unique");console.log(n.length);for(var s=0;s<n.length;s++)n[s].classList.add("error-block");return console.log(n),Fe(!0),Ne(!1),void setTimeout((function(){}),3e3)}for(var a=0;a<e.length;a++)""==e[a].value||"null"==e[a].value||"All"==e[a].value||void 0==e[a].value?(e[a].classList.add("error-block"),Ne(!0),Fe(!1)):(e[a].classList.remove("error-block"),Ne(!1));var l=Xe.title,i=Xe.defect_project_task_id,o=Xe.review_method_id,r=(Xe.descriptionClear,Xe.description);Object.values({name:l,Phase:i,Review:o,description1:r}).includes("")||(console.log(Xe),console.log(Xe.projectId),Ne(!1),v()({method:"post",url:g+"/ProjectMS/defectphases/postDefectsData",data:{id:Xe.id,projectid:E,title:Xe.title,defect_project_task_id:Xe.defect_project_task_id,defect_project_injected_task_id:Xe.defect_project_injected_task_id,priority_id:Xe.priority_id,severity_id:Xe.severity_id,status_id:Xe.status_id,assigned_to:""===Xe.assigned_to?null===I||void 0===I?void 0:I.assignedTo:Xe.assigned_to,reported_by:f,description:""==Xe.description?S:Xe.description,defect_age:Xe.defect_age,review_method_id:Xe.review_method_id}}).then((function(e){Ne(!1),Z(!1),console.log("success",e),Z(!1),w(),A(!0),setTimeout((function(){A(!1)}),3e3)})))},children:[(0,u.jsx)(P.Pfl,{}),"Update"," "]}):(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",style:{cursor:"no-drop"},children:[(0,u.jsx)(P.Pfl,{}),"Update"," "]})]})})]})]})]})})]})})},A=(n(96048),n(47477));var E=function(e){localStorage.getItem("resName");var t,n=e.projectId,i=e.grp4Items,m=c.N.baseUrl,h=(0,a.useState)(""),f=(0,s.Z)(h,2),j=(f[0],f[1],(0,a.useState)("ASC")),x=(0,s.Z)(j,2),g=(x[0],x[1],(0,a.useState)([])),y=(0,s.Z)(g,2),N=(y[0],y[1]),_=(0,a.useState)([]),S=(0,s.Z)(_,2),w=S[0],M=S[1];console.log(w.reported_res_id);var I=(0,a.useState)(!1),P=(0,s.Z)(I,2),E=P[0],R=P[1],F=(0,a.useState)([]),Y=(0,s.Z)(F,2),O=(Y[0],Y[1]),H=(0,a.useState)(),L=(0,s.Z)(H,2),B=L[0],U=L[1],q=(0,a.useState)(!1),V=(0,s.Z)(q,2),z=V[0],G=V[1],K=(0,a.useState)(""),W=(0,s.Z)(K,2),Q=W[0],J=(W[1],(0,a.useState)(!1)),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=(0,a.useState)(r.UdN),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)([]),ie=(0,s.Z)(le,2),oe=ie[0],re=ie[1],ce=(0,a.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=(0,a.useState)([]),he=(0,s.Z)(pe,2),ve=he[0],fe=he[1],je=(0,a.useState)([]),xe=(0,s.Z)(je,2),ge=xe[0],ye=xe[1],Ne=(0,a.useState)([]),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=(0,a.useState)([]),Ce=(0,s.Z)(De,2),Ze=Ce[0],we=Ce[1],Me=(0,a.useState)([]),ke=(0,s.Z)(Me,2),Ie=(ke[0],ke[1],(0,a.useState)([])),Pe=(0,s.Z)(Ie,2),Te=Pe[0],Ae=Pe[1],Ee=(0,a.useState)([]),Re=(0,s.Z)(Ee,2),Fe=Re[0],Ye=Re[1],Oe={projectid:n,title:null,defect_project_task_id:null,defect_project_injected_task_id:null,severity_id:null,priority_id:null,status_id:null,assigned_to:null,reported_by:null,defect_age:null,description:null},He=(0,a.useState)(Oe),Le=(0,s.Z)(He,2),Be=Le[0],Ue=Le[1],qe=(0,a.useState)(Oe),Ve=(0,s.Z)(qe,2),ze=Ve[0],Ge=Ve[1],Ke=(0,a.useState)("add"),We=(0,s.Z)(Ke,2),Qe=We[0],Je=We[1],Xe=(0,a.useState)(!1),$e=(0,s.Z)(Xe,2),et=$e[0],tt=$e[1],nt=(0,a.useState)(!1),st=(0,s.Z)(nt,2),at=st[0],lt=st[1],it=(0,a.useState)([]),ot=(0,s.Z)(it,2),rt=ot[0],ct=ot[1],dt=(0,a.useState)("create"),ut=(0,s.Z)(dt,2),mt=(ut[0],ut[1],(0,a.useState)([])),pt=(0,s.Z)(mt,2),ht=pt[0],vt=pt[1],ft=(0,a.useState)([]),jt=(0,s.Z)(ft,2),xt=jt[0],gt=jt[1],yt=(0,a.useState)([]),Nt=(0,s.Z)(yt,2),bt=Nt[0],_t=(Nt[1],(0,a.useState)([])),St=(0,s.Z)(_t,2),Dt=St[0],Ct=St[1],Zt=(0,a.useState)(),wt=(0,s.Z)(Zt,2),Mt=(wt[0],wt[1]),kt=(0,a.useRef)(null);(0,a.useEffect)((function(){}),[ze]),(0,a.useEffect)((function(){}),[Te]),console.log(w);var It=function(e){return(0,u.jsx)("div",{align:"center",children:e.SNo})},Pt=i.find((function(e){return"Defects"===e.display_name})),Tt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.title,children:e.title})},At=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.phase,children:e.phase})},Et=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.phaseInjected,children:e.phaseInjected})},Rt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.severity,children:e.severity})},Ft=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.priority,children:e.priority})},Yt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.status,children:e.status})},Ot=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.assignedTo,children:e.assignedTo})},Ht=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.reportedBy,children:e.reportedBy})},Lt=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.descriptionClear,children:e.descriptionClear})},Bt=function(e){return(0,u.jsx)("div",{className:"result-wrapper",children:(0,u.jsxs)("span",{className:"result-span",children:[e.ResName," (",(0,u.jsx)("span",{children:e.employeeNumber}),")"]})})},Ut=function(){v()({method:"post",url:m+"/ProjectMS/defectphases/autocomplete?projectId=".concat(n,"&searchKey=&isAll=0")}).then((function(e){var t=e.data;we(t),console.log(e.data)}))};(0,a.useEffect)((function(){}),[Ze]),(0,a.useEffect)((function(){}),[rt]);var qt=localStorage.getItem("resId"),Vt=(0,a.useState)([]),zt=(0,s.Z)(Vt,2),Gt=zt[0],Kt=zt[1];(0,a.useEffect)((function(){Wt()}),[]);var Wt=function(){v()({method:"GET",url:m+"/CommonMS/master/getMenus?loggedUserId=".concat(qt)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Kt([e])}))}))};(0,a.useEffect)((function(){}),[Dt]),(0,a.useEffect)((function(){console.log("line no 106"),v()({method:"get",url:m+"/ProjectMS/Issues/getAssignedData"}).then((function(e){var t=e.data;Ct(t),console.log("assigned data"),console.log(t)}))}),[]);var Qt=(0,a.useState)([]),Jt=(0,s.Z)(Qt,2),Xt=Jt[0],$t=Jt[1];(0,a.useEffect)((function(){$t(["XLS"])}),[]),(0,a.useEffect)((function(){v()({method:"get",url:m+"/ProjectMS/defectphases/getDefectPhases"}).then((function(e){var t=e.data;re(t)})),v()({method:"get",url:m+"/ProjectMS/defectphases/getSeverity"}).then((function(e){var t=e.data;me(t)})),v()({method:"get",url:m+"/ProjectMS/defectphases/getPriority"}).then((function(e){var t=e.data;fe(t)})),v()({method:"get",url:m+"/ProjectMS/defectphases/getStatus"}).then((function(e){var t=e.data;ye(t)})),v()({method:"get",url:m+"/ProjectMS/defectphases/getPhaseInjected"}).then((function(e){var t=e.data;Se(t)})),v()({method:"get",url:m+"/ProjectMS/defectphases/getProject"}).then((function(e){var t=e.data;Ae(t)})).catch((function(e){})),en(),Ut(),v()({method:"post",url:m+"/ProjectMS/Engagement/getMnagerNameAndId"}).then((function(e){var t=e.data;ct(t),console.log(rt)})),an()}),[]);var en=function(){R(!1),v()({method:"post",url:m+"/ProjectMS/defectphases/getDefectsDetails",data:Be}).then((function(e){var t=e.data;console.log(e.data);for(var n=0;n<t.length;n++)t[n].SNo=n+1,t[n].descriptionClear=t[n].description.replace(/<\/?[^>]+(>|$)/g,"");gt(["Action"]),console.log(t),M([{SNo:"S.No",title:"Defect Title",phase:"Phase",phaseInjected:"Phase Injected",severity:"Severity",priority:"Priority",status:"Status",assignedTo:"Assigned To",reportedBy:"Reported By",descriptionClear:"Defect Description",defect_age:"Defect Age",Action:"Action"}].concat(t)),console.log(e.data),N(e.data),O(e.data),Mt(t.reported_res_id),console.log(t.reported_res_id),R(!1),ee(!$),ae($?r.UdN:r.NR5)})).then((function(e){console.log("success",e)}))},tn=function(e){var t=e.target,n=t.id,s=t.value;Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,"null"==s?null:s))})),console.log(Be)},nn=function(e){var t;xt[0];return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{align:"center",children:1==(null===(t=i[6])||void 0===t?void 0:t.is_write)?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(b.QML,{title:"edit",color:"orange",cursor:"pointer",type:"edit",size:"1.2em",onClick:function(){Ge(e),U(e.id),G(!0),Je("edit")}})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(b.QML,{color:"orange",type:"edit",size:"1.2em",align:"center",style:{cursor:"not-allowed"}})})})})},sn=null===(t=Object.keys(ht))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(C.sgG,{sortable:!0,body:"SNo"==e&&It||"title"==e&&Tt||"phase"==e&&At||"phaseInjected"==e&&Et||"severity"==e&&Rt||"priority"==e&&Ft||"status"==e&&Yt||"assignedTo"==e&&Ot||"reportedBy"==e&&Ht||"descriptionClear"==e&&Lt||"Action"==e&&nn,field:e,header:ht[e]},e)})),an=function(){v()({method:"get",url:m+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(n)}).then((function(e){var t=e.data;console.log(t),Ye(t)})).catch((function(e){console.log(e)}))},ln=function(){Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},{reported_by:null})})),Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},{assigned_to:null})}));var e=document.getElementById("title").value,t=""!==e.trim()?e:null;Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},{title:t})}))};return(0,u.jsxs)("div",{children:[at?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{size:"1.5em",color:"green"})," ","Defect saved Successfully"]}):"",et?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{size:"1.5em",color:"green"})," ","Defect edited Successfully"]}):"",(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsxs)("div",{className:"pageTitle",children:[Fe.map((function(e){return(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:e.projectName})})})),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Defect Details"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:Gt,currentScreenName:["Projects","Open","Monitoring","Defect Details"]}),(0,u.jsxs)("div",{className:"col-md-12  customCard",children:[(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,u.jsx)("h2",{children:"Search Filters"}),(0,u.jsx)("div",{onClick:function(){ee(!$),ae($?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:se})})]}),(0,u.jsxs)(p.V9,{className:"group-content row",visible:!$,children:[(0,u.jsxs)("div",{className:"form-group col-md-2",id:"title",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Defect Title"}),(0,u.jsxs)("label",{htmlFor:"col-md-3 ",children:[(0,u.jsx)("input",{type:"text",name:"title",id:"title",onChange:function(e){var t=e.target,n=(t.id,t.value);Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"title",""==n?null:n))}))}})," "]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"defect_project_task_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Phase"}),(0,u.jsxs)("select",{className:" ",id:"defect_project_task_id",name:"defect_project_task_id",onChange:function(e){return tn(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<Please Select>>"}),oe.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.task_name]})}))]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"defect_project_injected_task_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Phase Injected"}),(0,u.jsxs)("select",{className:" ",id:"defect_project_injected_task_id",name:"defect_project_injected_task_id",onChange:function(e){return tn(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<Please Select>>"}),_e.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.task_name]})}))]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"severity_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Severity"}),(0,u.jsxs)("select",{className:"",id:"severity_id",name:"severity",onChange:function(e){return tn(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<Please Select>>"}),ue.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"priority_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Priority"}),(0,u.jsxs)("select",{className:" ",id:"priority_id",name:"priority",onChange:function(e){return tn(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<Please Select>>"}),ve.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2",id:"status_id",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Status"}),(0,u.jsxs)("select",{className:" ",id:"status",name:"status",onChange:function(e){return tn(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<Please Select>>"}),ge.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mt-1",id:"assigned_to",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Assigned To"}),(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:Ze,type:"Text",name:"assigned_to",id:"assigned_to",assigneTo:Ze,handleAssigneToChange:Ut,onChange:function(e){return tn(e)},fuseOptions:{keys:["id","ResName","employeeNumber"]},resultStringKeyName:"ResName",formatResult:Bt,onClear:ln,onSelect:function(e){Ue((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assigned_to:""==e.id?null:e.id})}))},showIcon:!1})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mt-1",id:"reported_by",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Reported By"}),(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:Ze,type:"Text",name:"reported_by",id:"reported_by",className:"err",assigneTo:Ze,onClear:ln,handleAssigneToChange:Ut,fuseOptions:{keys:["id","ResName","employeeNumber"]},resultStringKeyName:"ResName",formatResult:Bt,onSelect:function(e){Ue((function(t){return(0,o.Z)((0,o.Z)({},t),{},{reported_by:""==e.id?null:e.id})})),console.log(e.id)},showIcon:!1})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mt-1",id:"description",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Defect Description"}),(0,u.jsx)("label",{htmlFor:"col-md-12 ",children:(0,u.jsx)("input",{type:"text",name:"description",id:"description",onChange:function(e){var t=e.target,n=(t.id,t.value);Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"description",""==n?null:n))}))}})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mt-1",id:"defect_age",children:[(0,u.jsx)("label",{htmlFor:"form-label",children:"Defect Age"}),(0,u.jsx)("label",{className:"col-md-12 ",children:(0,u.jsx)("input",{type:"text",name:"defect_age",id:"defect_age",onChange:function(e){var t=e.target,n=(t.id,t.value);Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"defect_age",""==n?null:n))}))}})})]}),(0,u.jsx)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",value:Q,onClick:function(){return console.log(Be),void en()},children:[(0,u.jsx)(r.U41,{})," Search"," "]})}),E?(0,u.jsx)(D.Z,{handleAbort:function(){kt.current&&kt.current.abort(),R(!1)}}):""]})]}),(0,u.jsx)("div",{className:"group mb-3 customCard",children:(0,u.jsx)("div",{className:"",children:(0,u.jsx)("div",{className:"col-md-12 no-padding",children:(0,u.jsx)(A.Z,{data:w,linkColumns:xt,linkColumnsRoutes:bt,dynamicColumns:sn,headerData:ht,rows:10,setHeaderData:vt,exportData:Xt,fileName:"Project Defects"})})})})]}),(0,u.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[console.log(Pt),!0===(null===Pt||void 0===Pt?void 0:Pt.is_write)?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){G(!0),Je("add")},children:[(0,u.jsx)(r.wEH,{}),"Add"]}):""]}),z?(0,u.jsx)(T,{openPopup:z,editId:B,setOpenPopup:G,setEditedData:Ge,getTableData:en,editedData:ze,type:Qe,editmsg:et,setEditmsg:tt,addmsg:at,tableData:w,setAddmsg:lt,projectIssueDetails:Te,projectId:n,projectData:Fe}):""]})};var R=function(e){var t=e.openPopup,n=e.setOpenPopup,i=e.projectId,m=e.type,h=(e.editId,e.setEditedData,e.editedData),f=e.getTableData,x=(e.addmsg,e.setAddmsg),y=e.setEditmsg,_=(e.tableData,e.projectData),S=localStorage.getItem("resId"),D=localStorage.getItem("resName"),C=c.N.baseUrl,Z=(0,a.useState)(""),w=(0,s.Z)(Z,2),M=w[0],k=w[1],I=(0,a.useState)(null),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(null),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=(0,a.useState)([]),H=(0,s.Z)(O,2),L=H[0],B=H[1],U=(0,a.useState)([]),q=(0,s.Z)(U,2),V=q[0],z=q[1],G=(0,a.useState)([]),K=(0,s.Z)(G,2),W=K[0],Q=K[1],J=(0,a.useState)([]),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=(0,a.useState)([]),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)("0"),ie=(0,s.Z)(le,2),oe=(ie[0],ie[1]),re=(0,a.useState)(!1),ce=(0,s.Z)(re,2),de=ce[0],ue=ce[1],me=(0,a.useState)([]),pe=(0,s.Z)(me,2),he=pe[0],ve=pe[1],fe={projectid:i,risk_occured_date:"",assigned_to:"",occurence_prob_id:"",risk_value:"",risk_source:" ",risk_type:"",is_risk_occured:"0",created_by_id:S,created_by_name:D,risk_impact:"",mitigation_plan:"",mitigation_date:""},je=(0,a.useState)(fe),xe=(0,s.Z)(je,2),ge=xe[0],ye=xe[1],Ne=(0,a.useState)(h),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=(0,a.useState)(),Ce=(0,s.Z)(De,2),Ze=(Ce[0],Ce[1]),we=(0,a.useState)(0),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)(0),Te=(0,s.Z)(Pe,2),Ae=Te[0],Ee=Te[1],Re=(0,a.useRef)([]),Fe=(0,a.useRef)(null),Ye=(0,a.useRef)(null),Oe=(0,a.useState)([]),He=(0,s.Z)(Oe,2),Le=He[0];He[1],(0,a.useEffect)((function(){}),[Le]);var Be={toolbar:[[{header:[!1,1,2,3,4,5,6]},{color:[]},"bold","italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","image","code-block","clean"]]};(0,a.useEffect)((function(){qe(),Ve(),ze(),Ge(),Ke()}),[]);var Ue=function(e){var t=e.target,n=t.id,s=t.value;ye((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))})),Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))}))};(0,a.useEffect)((function(){var e=null,t=null;W.map((function(t){t.id==ge.risk_impact&&(e=t.lkup_name.split("-")[0])})),$.map((function(e){e.id==ge.occurence_prob_id&&(t=e.lkup_name.split("-")[0])})),null!=e&&null!=t&&Ie(parseInt(e)*parseInt(t))}),[ge]),(0,a.useEffect)((function(){"add"!=m&&Ee(_e.risk_value)}),[_e]),(0,a.useEffect)((function(){}),[_e.riskValue]);var qe=function(){v()({method:"get",url:C+"/ProjectMS/risks/getRiskType"}).then((function(e){var t=e.data;B(t)}))},Ve=function(){v()({method:"get",url:C+"/ProjectMS/risks/getRiskSource"}).then((function(e){var t=e.data;z(t)}))},ze=function(){v()({method:"get",url:C+"/ProjectMS/risks/getRiskImpact"}).then((function(e){var t=e.data;Q(t)}))},Ge=function(){v()({method:"get",url:C+"/ProjectMS/risks/getProbabilityOfOccurrence"}).then((function(e){var t=e.data;ee(t)}))},Ke=function(){v()({method:"get",url:C+"/ProjectMS/risks/getRiskStatus"}).then((function(e){var t=e.data;ae(t)}))},We=function(){v()({method:"get",url:C+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;ve(t)}))};return(0,a.useEffect)((function(){We()}),[]),(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsxs)(p.Tk,{visible:t,size:"xl",className:" u",onClose:function(){return n(!1)},backdrop:"static",children:[(0,u.jsx)(p.p0,{className:"",style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:"add"==m?(0,u.jsx)("span",{className:"",children:"Add Risk"}):(0,u.jsx)("span",{className:"",children:" Edit Risk "})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsxs)("div",{className:"group-content row",children:[de?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{size:"1.4em"}),(0,u.jsx)("span",{children:"Please select the valid values for highlighted fields"})]}):"",_.map((function(e){return(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"project",children:[(0,u.jsx)("label",{className:"col-5",children:"Project"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsx)("input",{type:"Text",className:"disableField",name:"project_id",id:i,disabled:!0,value:e.projectName,onChange:function(e){return Ue(e)},style:{cursor:"not-allowed"}})})]})})})),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"name",children:[(0,u.jsxs)("label",{className:"col-5",children:["Risk Name\xa0",(0,u.jsx)("span",{class:"required",children:" *"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 textfield",ref:function(e){Re.current[0]=e},children:"add"==m?(0,u.jsx)("input",{className:"text error unique ".concat(ge.risk_name&&ge.risk_name.length>=50?"error":""),type:"Text",name:"risk_name",id:"risk_name",placeholder:"Max 50 characters",maxLength:50,value:ge.risk_name||"",onKeyDown:function(e){"Space"!==e.code||ge.risk_name||e.preventDefault()},onChange:function(e){return Ue(e)}}):(0,u.jsx)("input",{className:"text ".concat(ge.risk_name&&ge.risk_name.length>=50?"error":""),type:"Text",name:"risk_name",id:"risk_name",placeholder:"Max 50 characters",maxLength:50,onKeyDown:function(e){"Space"!==e.code||ge.risk_name||e.preventDefault()},defaultValue:null===h||void 0===h?void 0:h.risk_name,onChange:function(e){return Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"risk_name",e.target.value))}))}})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",children:["Risk Type\xa0",(0,u.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:"add"==m?(0,u.jsxs)("select",{className:"text error",name:"risk_type",id:"risk_type",onChange:function(e){return Ue(e)},ref:function(e){Re.current[1]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),L.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"text error",name:"risk_type",id:"risk_type",onChange:function(e){return Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"type_id",e.target.value))}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),L.map((function(e){return(0,u.jsx)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.type_id),children:e.lkup_name})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 p0",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5 p0",children:["Risk Source\xa0",(0,u.jsx)("span",{class:"required",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:"add"==m?(0,u.jsxs)("select",{className:"text error",name:"risk_source",id:"risk_source",onChange:function(e){return Ue(e)},ref:function(e){Re.current[2]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),V.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"text error",name:"risk_source",id:"risk_source",onChange:function(e){return Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"source_id",e.target.value))}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),V.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.source_id),children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",name:"risk_impact",id:"risk_impact",children:[(0,u.jsxs)("label",{className:"col-5",children:["Risk Impact\xa0",(0,u.jsx)("span",{class:"required",children:" *"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:"add"==m?(0,u.jsxs)("select",{className:"text error",name:"risk_impact",id:"risk_impact",onChange:function(e){return Ue(e)},ref:function(e){Re.current[3]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),W.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"text error",ref:Fe,name:"risk_impact",id:"risk_impact",onChange:function(e){for(var t=Fe.current.children,n=null,s=function(s){t[s].value==e.target.value&&(n=t[s].innerText.split("-")[0],Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"risk_impact",t[s].innerText))})))},a=0;a<t.length;a++)s(a);Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"impact_id",e.target.value))})),Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"risk_value",_e.occurence_prob_name.split("-")[0]*n))}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),W.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.impact_id),children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 p0",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",children:["Probability of Occurrence\xa0",(0,u.jsx)("span",{class:"required",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:"add"==m?(0,u.jsxs)("select",{className:"text error",name:" occurence_prob_id",id:"occurence_prob_id",onChange:function(e){return Ue(e)},ref:function(e){Re.current[4]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),$.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"text error",name:" occurence_prob_id",id:"occurence_prob_id",ref:Ye,onChange:function(e){Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"occurence_prob_id",e.target.value))}));for(var t=Ye.current.children,n=null,s=function(s){t[s].value==e.target.value&&(n=t[s].innerText.split("-")[0],Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"occurence_prob_name",t[s].innerText))})))},a=0;a<t.length;a++)s(a);Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"risk_value",_e.risk_impact.split("-")[0]*n))}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),$.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.occurence_prob_id),children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",children:["Risk Value\xa0",(0,u.jsx)("span",{class:"required",children:" *"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsx)("input",{type:"Text",className:"error",name:"risk_value",id:"risk_value",value:"add"==m?ke:Ae,disabled:!0,style:{cursor:"not-allowed"}})})]})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5 ",children:["Risk Status\xa0",(0,u.jsx)("span",{class:"required",children:" *"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:"add"==m?(0,u.jsxs)("select",{className:"text error",name:"risk_status",id:"risk_status",onChange:function(e){return Ue(e)},ref:function(e){Re.current[5]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),se.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]}):(0,u.jsxs)("select",{className:"error col-md-12",name:"risk_status",id:"risk_status",onChange:function(e){return Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"status_id",e.target.value))}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),se.map((function(e){return(0,u.jsxs)("option",{value:e.id,selected:e.id==(null===h||void 0===h?void 0:h.status_id),children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2 ",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Assigned To"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 p0",children:"add"==m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:he,type:"Text",name:"assigned_to",id:"assigned_to",riskDetails:he,getData:We,onSelect:function(e){ye((function(t){return(0,o.Z)((0,o.Z)({},t),{},{assigned_to:e.id})}))},showIcon:!1})}),(0,u.jsx)("span",{children:Le.name})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:he,type:"Text",name:"assigned_to",inputSearchString:null===_e||void 0===_e?void 0:_e.assigned_to,id:"assigned_to",riskDetails:he,getData:We,onSelect:function(e){Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"owner_id",e.id))})),Ze(e.id)},onChange:function(e){Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"owner_id",e.id))}))},showIcon:!1})}),(0,u.jsx)("span",{children:Le.name})]})})]})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5 ",children:"Risk Occurred"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:"add"==m?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-6",onChange:function(e){oe("1"),ye((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"is_risk_occured","1"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"1",name:"is_risk_occured",id:"is_risk_occured",checked:"1"==ge.is_risk_occured}),"\xa0",(0,u.jsx)("span",{className:"form-check-label",children:"Yes"})," "]}),(0,u.jsxs)("div",{className:"col-6",onChange:function(e){oe("0"),ye((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"is_risk_occured","0"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"no",type:"radio",name:"is_risk_occured",id:"is_risk_occured",value:"0",checked:"1"!=ge.is_risk_occured}),"\xa0",(0,u.jsx)("span",{className:"form-check-label",children:"No"})]})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-6 ",onChange:function(e){Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"is_risk_occured","1"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"1",name:"is_risk_occured",id:"is_risk_occured",checked:"1"==_e.is_risk_occured}),"\xa0",(0,u.jsx)("span",{children:"Yes"})," "]}),(0,u.jsxs)("div",{className:"col-6 ",onChange:function(e){Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"is_risk_occured","0"))}))},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"no",type:"radio",name:"is_risk_occured",id:"is_risk_occured",value:"0",checked:"0"==_e.is_risk_occured}),"\xa0",(0,u.jsx)("span",{children:"No"})]})]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",classname:"Space",id:"risk_occured_date",children:[(0,u.jsx)("label",{className:"col-5",children:"Occured Date"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-md-6",children:"add"==m?(0,u.jsx)(g(),{name:"risk_occured_date",id:"risk_occured_date",selected:T,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){ye((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"risk_occured_date",N()(e).format("yyyy-MM-DD")))})),A(e)}}):(0,u.jsx)(g(),{name:"risk_occured_date",id:"risk_occured_date",selected:void 0==_e.risk_occured_date?"":N()(_e.risk_occured_date)._d,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"risk_occured_date",N()(e).format("yyyy-MM-DD")))})),A(e)}})})]})}),(0,u.jsx)("div",{className:"col-md-3",id:"created_by_name",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Created By"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:(0,u.jsx)("div",{className:"col-md-12 p0 ",children:"add"==m?(0,u.jsx)("input",{type:"Text",className:"disableField",name:"created_by_name",id:"created_by_name",readOnly:!0,defaultValue:D,style:{cursor:"not-allowed"},disabled:!0}):(0,u.jsx)("input",{type:"Text",name:"created_by_name",id:"created_by_name",readOnly:!0,defaultValue:D,style:{cursor:"not-allowed"},disabled:!0})})})]})})]}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group row",id:"Risk Description",children:(0,u.jsxs)("label",{className:"col-md-12 p0",children:["Risk Description\xa0",(0,u.jsx)("span",{class:"error-text ml-1",children:" *"})]})})})}),(0,u.jsxs)("div",{className:"col-md-12 mb-2 text error",ref:function(e){Re.current[6]=e},children:[" ","add"==m?(0,u.jsx)("div",{className:"",children:(0,u.jsx)(j(),{className:"error",theme:"snow",value:M,name:"description",id:"description",onChange:function(e){k(e),ye((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"description",M))}))},modules:Be})}):(0,u.jsxs)(u.Fragment,{children:[" ",(0,u.jsx)(j(),{className:"error",theme:"snow",defaultValue:null===h||void 0===h?void 0:h.description,name:"description",id:"description",onChange:function(e){k(e),Se((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"description",M))}))},modules:Be})]})]}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"col-md-3",id:"mitigation_plan",children:(0,u.jsx)("label",{className:"col-md-12",children:"Mitigation Plan"})})}),(0,u.jsxs)("div",{className:"col-md-12 p0",children:["add"==m?(0,u.jsx)("textarea",{maxLength:500,rows:"4",cols:175,id:"mitigation_plan",style:{padding:"0px"},placeholder:"Max 500 characters",onChange:function(e){return Ue(e)}}):(0,u.jsx)("textarea",{maxLength:500,rows:"4",cols:175,id:"mitigation_plan",style:{padding:"0px"},placeholder:"Max 500 characters",defaultValue:null===h||void 0===h?void 0:h.mitigation_plan,onChange:function(e){return Ue(e)}})," "]}),(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center",children:(0,u.jsx)("div",{className:"clearfix",style:{height:"10px"}})}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsx)("div",{className:"Space",id:"mitigation_date",style:{height:"2px"}}),(0,u.jsxs)("div",{className:"col-md-3",id:"mitigation_date",children:[(0,u.jsx)("label",{className:"col-md-6 p0",children:"Mitigation Date"}),"add"==m?(0,u.jsx)(g(),{name:"mitigation_date",id:"mitigation_date",selected:F,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){ye((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"mitigation_date",N()(e).format("yyyy-MM-DD")))})),Y(e)}}):(0,u.jsx)(g(),{name:"mitigation_date",id:"mitigation_date",selected:void 0==_e.mitigation_date?"":N()(_e.mitigation_date)._d,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){Se((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"mitigation_date",N()(e).format("yyyy-MM-DD")))})),Y(e)}})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:"add"==m?(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){for(var e=document.getElementsByClassName("error"),t=0;t<e.length;t++)""==e[t].value||"null"==e[t].value||"All"==e[t].value||void 0==e[t].value?(e[t].classList.add("error-block"),ue(!0)):(e[t].classList.remove("error-block"),ue(!1));var s=ge.risk_name,a=ge.risk_value,l=ge.risk_source,i=ge.risk_type,o=ge.risk_impact,r=ge.occurence_prob_id,c=ge.description;Object.values({name:s,rsiktype:i,source:l,Value:a,riskimpact:o,occurence:r,description1:c}).includes(" ")?ue(!0):(ue(!1),ge.risk_value=ke,v()({method:"post",url:C+"/ProjectMS/risks/postProjectRiskData",data:ge}).then((function(e){n(!1),f(),ue(!1),x(!0),setTimeout((function(){x(!1)}),3e3)})))},children:[(0,u.jsx)(r.TvB,{}),"Save "]}):(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){for(var e=document.getElementsByClassName("error"),t=0;t<e.length;t++)""==e[t].value||"null"==e[t].value||"All"==e[t].value||void 0==e[t].value?(e[t].classList.add("error-block"),ue(!0)):(e[t].classList.remove("error-block"),ue(!1));var s=_e.risk_name,a=_e.source_id,l=_e.status_id,o=_e.type_id,r=_e.impact_id,c=_e.occurence_prob_id,d=_e.description,u=_e.risk_value;Object.values({name:s,source:a,status:l,riskValue1:u,rsiktype:o,riskimpact:r,occurence:c,description1:d}).includes("")?ue(!0):(ue(!1),v()({method:"post",url:C+"/ProjectMS/risks/postProjectRiskData",data:{id:_e.id,projectid:i,assigned_to:_e.owner_id,risk_impact:_e.impact_id,risk_name:_e.risk_name,risk_source:_e.source_id,risk_status:_e.status_id,risk_type:_e.type_id,description:""===_e.description?M:_e.description,is_risk_occured:!0===(null===_e||void 0===_e?void 0:_e.is_risk_occured)?"1":!1===(null===_e||void 0===_e?void 0:_e.is_risk_occured)?"0":null===_e||void 0===_e?void 0:_e.is_risk_occured,created_by_id:S,created_by_name:D,mitigation_date:_e.mitigation_date,mitigation_plan:_e.mitigation_plan,risk_value:_e.risk_value,occurence_prob_id:_e.occurence_prob_id,last_updated:_e.last_updated,last_updated_by_id:_e.last_updated_by_id,date_created:_e.date_created,risk_occured_date:_e.risk_occured_date}}).then((function(e){n(!1),f(),y(!0),setTimeout((function(){y(!1)}),3e3)})))},children:[(0,u.jsx)(r.TvB,{}),"Save "]})})]})]})})},F=n(24205);var Y=function(e){var t,n=e.projectId,i=e.grp4Items,d=i.find((function(e){return"Risks"===e.display_name})),m=c.N.baseUrl,h=(0,a.useState)(!1),f=(0,s.Z)(h,2),j=f[0],x=f[1],g=(0,a.useState)(!1),y=(0,s.Z)(g,2),_=y[0],S=y[1],w=(0,a.useState)(!1),M=(0,s.Z)(w,2),I=M[0],P=M[1],T=(0,a.useState)(!1),E=(0,s.Z)(T,2),Y=E[0],O=E[1],H=(0,a.useState)(r.UdN),L=(0,s.Z)(H,2),B=L[0],U=L[1],q=(0,a.useState)([]),V=(0,s.Z)(q,2),z=V[0],G=V[1],K=(0,a.useState)([]),W=(0,s.Z)(K,2),Q=W[0],J=W[1],X=(0,a.useState)([]),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,a.useState)([]),se=(0,s.Z)(ne,2),ae=se[0],le=se[1],ie=(0,a.useState)([]),oe=(0,s.Z)(ie,2),re=oe[0],ce=oe[1],de=(0,a.useState)([]),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(""),ve=(0,s.Z)(he,2),fe=(ve[0],ve[1],(0,a.useState)([])),je=(0,s.Z)(fe,2),xe=(je[0],je[1]),ge=(0,a.useState)("ASC"),ye=(0,s.Z)(ge,2),Ne=(ye[0],ye[1],(0,a.useState)([])),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=(0,a.useState)("add"),Ce=(0,s.Z)(De,2),Ze=Ce[0],we=Ce[1],Me=(0,a.useState)([]),ke=(0,s.Z)(Me,2),Ie=ke[0],Pe=ke[1],Te=(0,a.useState)([]),Ae=(0,s.Z)(Te,2),Ee=Ae[0],Re=Ae[1],Fe={projectid:n,risk_type:null,risk_source:null,risk_impact:null,occurence_prob_id:null,risk_status:null,assigned_to:null,created_by_name:null,risk_name:null,is_risk_occured:null},Ye=(0,a.useState)(""),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=(Oe[1],(0,a.useState)(Fe)),Be=(0,s.Z)(Le,2),Ue=Be[0],qe=Be[1],Ve=(0,a.useState)([]),ze=(0,s.Z)(Ve,2),Ge=(ze[0],ze[1]),Ke=(0,a.useState)(),We=(0,s.Z)(Ke,2),Qe=We[0],Je=We[1],Xe=(0,a.useState)(!1),$e=(0,s.Z)(Xe,2),et=$e[0],tt=$e[1],nt=(0,a.useState)([]),st=(0,s.Z)(nt,2),at=st[0],lt=st[1],it=(0,a.useState)([]),ot=(0,s.Z)(it,2),rt=ot[0],ct=ot[1],dt=(0,a.useState)([]),ut=(0,s.Z)(dt,2),mt=ut[0],pt=(ut[1],(0,a.useState)([])),ht=(0,s.Z)(pt,2),vt=ht[0],ft=ht[1],jt=(0,a.useState)([]),xt=(0,s.Z)(jt,2),gt=xt[0],yt=xt[1],Nt=localStorage.getItem("resId"),bt=(0,a.useState)([]),_t=(0,s.Z)(bt,2),St=_t[0],Dt=_t[1];(0,a.useEffect)((function(){Ct()}),[]);var Ct=function(){v()({method:"GET",url:m+"/CommonMS/master/getMenus?loggedUserId=".concat(Nt)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Dt([e])}))}))};(0,a.useEffect)((function(){}),[vt]),(0,a.useEffect)((function(){}),[_e]),(0,a.useEffect)((function(){}),[Ee]),(0,a.useEffect)((function(){}),[Ie]);var Zt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;Pe(t)}))};(0,a.useEffect)((function(){v()({method:"get",url:m+"/ProjectMS/risks/getDetails"}).then((function(e){e=e.data,Re(e)})).catch((function(e){})),Vt(),zt(),Gt(),Kt(),Wt(),Zt(),Mt(),kt()}),[]),(0,a.useEffect)((function(){wt()}),[]);var wt=function(){v()({method:"post",url:m+"/ProjectMS/risks/getRiskTableData",data:Ue}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].S_No=n+1;ct(["Action"]),pe([{S_No:"S.No",risk_name:"Risk Name",risk_type:"Risk Type",risk_source:"Risk Source",risk_impact:"Risk Impact",occurence_prob_name:"Probability Of Occurrence",risk_value:"Risk Value ",assigned_to:" Assigned To",is_risk_occured:"Risk Occured",risk_status:"Risk Status",risk_occured_date:"Occurred Date",mitigation_date:"Mitigation Date",created_by_name:"Created By",Action:"Action"}].concat(t)),xe(e.data),Ge(e.data),tt(!1),setTimeout((function(){tt(!1)}),100),x(!j),U(j?r.UdN:r.NR5)})).then((function(e){}))},Mt=function(){v()({method:"get",url:m+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(n)}).then((function(e){var t=e.data;ft(t)})).catch((function(e){}))},kt=function(){v()({method:"get",url:m+"/ProjectMS/Audit/getProjectName?projectId=".concat(n)}).then((function(e){var t=e.data;yt(t)})).catch((function(e){}))},It=function(e){return(0,u.jsx)("div",{align:"center",children:1==i[3].is_write?(0,u.jsx)("div",{children:(0,u.jsx)(b.QML,{title:"edit",color:"orange",cursor:"pointer",type:"edit",size:"1.2em",onClick:function(){Se(e),Je(e.id),S(!0),we("edit")}})}):""})},Pt=function(e){return(0,u.jsx)("div",{align:"center",title:e.S_No,children:e.S_No})},Tt=function(e){return(0,u.jsx)("div",{align:"center",title:e.risk_value,children:e.risk_value})},At=function(e){return(0,u.jsxs)("div",{align:"center",className:"ellipsis",title:N()(e.risk_occured_date).format("DD-MMM-yyyy"),children:[" ",null==e.risk_occured_date?"":N()(e.risk_occured_date).format("DD-MMM-yyyy")]})},Et=function(e){return(0,u.jsx)("div",{align:"center",className:"ellipsis",title:N()(e.mitigation_date).format("DD-MMM-yyyy"),children:null==e.mitigation_date?"":N()(e.mitigation_date).format("DD-MMM-yyyy")})},Rt=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.is_risk_occured,children:1==e.is_risk_occured?(0,u.jsx)("span",{title:"Yes",children:" Yes"}):(0,u.jsx)("span",{title:"No",children:" No"})})},Ft=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.risk_name,children:e.risk_name})},Yt=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.risk_type,children:e.risk_type})},Ot=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.risk_source,children:e.risk_source})},Ht=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.risk_impact,children:e.risk_impact})},Lt=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.occurence_prob_name,children:e.occurence_prob_name})},Bt=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.risk_status,children:e.risk_status})},Ut=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.created_by_name,children:e.created_by_name})},qt=null===(t=Object.keys(at))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(C.sgG,{sortable:!0,body:"Action"==e?It:"S_No"==e?Pt:"risk_value"==e?Tt:"risk_occured_date"==e?At:"mitigation_date"==e?Et:"is_risk_occured"==e?Rt:"risk_name"==e?Ft:"risk_type"==e?Yt:"risk_source"==e?Ot:"risk_impact"==e?Ht:"occurence_prob_name"==e?Lt:"risk_status"==e?Bt:"created_by_name"==e&&Ut,field:e,header:at[e]},e)}));(0,a.useEffect)((function(){me[0]&&lt(JSON.parse(JSON.stringify(me[0])))}),[me]);var Vt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getRiskType"}).then((function(e){var t=e.data;G(t)}))},zt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getRiskSource"}).then((function(e){var t=e.data;J(t)}))},Gt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getRiskImpact"}).then((function(e){var t=e.data;te(t)}))},Kt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getProbabilityOfOccurrence"}).then((function(e){var t=e.data;le(t)}))},Wt=function(){v()({method:"get",url:m+"/ProjectMS/risks/getRiskStatus"}).then((function(e){var t=e.data;ce(t)}))},Qt=function(e){var t=e.target,n=t.id,s=t.value;qe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,"null"==s?null:s))}))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{children:[I?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Risk added Successfully"]}):"",Y?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Risk edited Successfully"]}):"",(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:gt})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Risks"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:St,currentScreenName:["Projects","Open","Monitoring","Risks"]}),(0,u.jsxs)("div",{className:" col-mid-12 customCard",children:[(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,u.jsx)("h2",{children:"Search Filters"}),(0,u.jsx)("div",{onClick:function(){x(!j),U(j?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:B})})]}),(0,u.jsx)(p.V9,{visible:!j,children:(0,u.jsxs)("div",{className:"group-content row ",children:[(0,u.jsx)("div",{className:" col-md-3 ",children:(0,u.jsxs)("div",{className:"form-group row",id:"risk_type",children:[(0,u.jsx)("label",{className:"col-5",children:"Risk Type"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"risk_type",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),z.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:" col-md-3  ",id:"risk_source",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",htmlFor:"Type-select",children:"Risk Source"}),(0,u.jsx)("label",{className:"col-1 p-0 ",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"risk_source",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),Q.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3  ",id:"risk_impact",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",htmlFor:"Type-select",children:"Risk Impact"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"risk_impact",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),ee.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3",children:(0,u.jsxs)("div",{className:"form-group row mb-2",id:"occurence_prob_id",children:[(0,u.jsx)("label",{className:"col-5",children:"Probability Of Occurrence"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"occurence_prob_id",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),ae.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 ",id:"risk_name",children:(0,u.jsxs)("div",{className:"form-group row mb-2",children:[(0,u.jsx)("label",{className:"col-5",children:"Risk Name"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsx)("input",{type:"Text",name:"Risk Name To",id:"risk_name",onChange:function(e){var t=e.target,n=(t.id,t.value);qe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"risk_name",""==n?null:n))}))}})})]})}),(0,u.jsx)("div",{className:"col-md-3 ",id:"is_risk_occured",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Risk Occurred"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"is_risk_occured",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),(0,u.jsxs)("option",{value:"1",id:"1",children:[" ","Yes"," "]}),(0,u.jsxs)("option",{value:"0",id:"0",children:[" ","No"," "]})]})})]})}),(0,u.jsx)("div",{className:"col-md-3 ",id:"risk_status",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Risk Status"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6",children:(0,u.jsxs)("select",{class:"col-md-12 p0",id:"risk_status",onChange:function(e){return Qt(e)},children:[(0,u.jsx)("option",{value:"null",children:" <<ALL>>"}),re.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",id:"assigned_to",children:[(0,u.jsx)("label",{className:"col-5 form-label",children:"Assigned To"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(F.Z,{id:"assigned_to",name:"assigned_to",riskDetails:Ie,getData:Zt,setFormData:qe,onChange:function(e){var t=e.target,n=t.id;t.value;qe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"assigned_to",""==n?null:n))}))},editedData:_e,onClear:function(){qe((function(e){return(0,o.Z)((0,o.Z)({},e),{},{assigned_to:null})}))}})})})]})}),(0,u.jsx)("div",{className:"col-md-3 ",id:"created_by_name",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-5",children:"Created By"}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("label",{className:"col-6 ",children:(0,u.jsx)("input",{type:"Text",name:"created_by_name",id:"created_by_name",onChange:function(e){var t=e.target,n=(t.id,t.value);qe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"created_by_name",""==n?null:n))}))}})})]})}),(0,u.jsxs)("div",{class:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",value:He,onClick:function(){wt()},children:[(0,u.jsx)(r.U41,{})," Search"," "]})," "]})]})}),et?(0,u.jsx)(D.Z,{}):""]}),(0,u.jsxs)("div",{className:"body col-xs-12 col-sm-12 col-md-12 col-lg-12 customCard",children:[(0,u.jsx)("div",{className:"",children:(0,u.jsxs)("div",{class:"col-md-12 no-padding",children:[(0,u.jsx)(A.Z,{data:me,linkColumns:rt,linkColumnsRoutes:mt,dynamicColumns:qt,headerData:at,setHeaderData:lt,rows:10}),1==(null===d||void 0===d?void 0:d.is_write)?(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){S(!0),we("add")},children:[(0,u.jsx)(r.wEH,{}),"Add"]})}):""]})}),_?(0,u.jsx)(R,{openPopup:_,setOpenPopup:S,projectRiskDetails:Ee,type:Ze,getTableData:wt,editId:Qe,addmsg:I,setAddmsg:P,editmsg:Y,setEditmsg:O,setEditedData:Se,editedData:_e,projectId:n,tableData:me,projectData:vt}):""]})]})})},O=n(93433),H=n(59962),L=n.n(H),B=n(37145),U=n(20860);var q=function(e){var t=e.setMessage,n=e.setPlannedAddMessage,i=e.projectId,d=e.validation,m=e.setValidation,h=e.grp4Items;console.log(h[1].is_write);var f=h.find((function(e){return"Planned Activities"===e.display_name})),j=(0,a.useState)([]),x=(0,s.Z)(j,2),g=x[0],y=x[1],_=(0,a.useState)(!1),S=(0,s.Z)(_,2),D=S[0],Z=S[1],w=(0,a.useState)(0),k=(0,s.Z)(w,2),I=k[0],P=k[1],T=(0,a.useState)(""),A=(0,s.Z)(T,2),E=A[0],R=A[1],F=(0,a.useState)(!1),Y=(0,s.Z)(F,2),H=Y[0],q=Y[1],V=(0,a.useState)(!0),z=(0,s.Z)(V,2),G=z[0],K=z[1],W=(0,a.useState)(!0),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)(""),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(!1),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(!1),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue={fromDate:N()().startOf("week").add("days",8).format("YYYY-MM-DD"),toDate:N()().startOf("week").add("days",14).format("YYYY-MM-DD")},me=(0,a.useState)(ue),pe=(0,s.Z)(me,2),he=pe[0],ve=pe[1],fe=c.N.baseUrl,je=function(){v()({url:fe+"/ProjectMS/PlannedActivities/getProjectPlannedActivities?pid=".concat(i,"&fromDate=").concat(he.fromDate,"&toDate=").concat(he.toDate)}).then((function(e){y(e.data)}))};(0,a.useEffect)((function(){je()}),[he]);var xe=function(e,t){var n,s,a=function(e){if(32===e.keyCode){var t=e.target.value,n=e.target.selectionStart;if(0===n)return void e.preventDefault();if(" "!==t[n-1])return;e.preventDefault()}};return(0,u.jsxs)(u.Fragment,{children:[(null===e||void 0===e?void 0:e.id)===te&&!0===le?(0,u.jsx)("input",{className:!0===d?"error-block ellipsis":"ellipsis",type:"text",id:"plannedActivities",name:"plannedActivities",title:e.plannedActivities,defaultValue:null===e||void 0===e?void 0:e.plannedActivities,onChange:function(e){R(e.target.value)},onKeyDown:a}):""!==(null===e||void 0===e?void 0:e.plannedActivities)&&(0,u.jsx)("p",{className:"ellipsis",title:null===e||void 0===e?void 0:e.plannedActivities,children:null===e||void 0===e?void 0:e.plannedActivities}),""===(null===e||void 0===e?void 0:e.plannedActivities)&&(0,u.jsx)("input",{className:"error ".concat(!d||null!==e&&void 0!==e&&null!==(n=e.rowData)&&void 0!==n&&n.accomplishment?"ellipsis":"error-block ellipsis"),type:"text",id:"plannedActivities",name:"plannedActivities",title:e.plannedActivities,value:null===(s=e.rowData)||void 0===s?void 0:s.plannedActivities,onChange:function(e){return R(e.target.value)},onKeyDown:a})]})};(0,a.useEffect)((function(){var e,t;""==(null===(e=g[0])||void 0===e?void 0:e.plannedActivities)&&(null===(t=document.getElementsByClassName("p-row-editor-init p-link")[0])||void 0===t||t.click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=g[0])||void 0===t?void 0:t.plannedActivities)&&(R(g.slice(2,g.length)),m(!1))}),!0)}),200))}),[g]);var ge=function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click(),function(){if(""===E)return m(!0),void(!0===d?(X(!0),K(!0),q(!1)):(X(!1),K(!1),q(!0)));var e;e=g.find((function(e){return e.id===te}))?{id:te,ProjectId:i,plannedActivity:E,fromDate:N()(he.fromDate).format("YYYY-MM-DD")}:{ProjectId:i,plannedActivity:E,fromDate:N()(he.fromDate).format("YYYY-MM-DD")},v()({method:"post",url:fe+"/ProjectMS/PlannedActivities/postProjectPlannedActivities",data:e}).then((function(e){je(),m(!1),q(!1),K(!0),X(!0),n(!0),setTimeout((function(){n(!1)}),3e3),R("")})),ie(!1)}(),!0===d?(X(!0),K(!0),q(!1)):(X(!1),K(!1),q(!0))};function ye(e){var t=e.plannedactivitiesdelete,n=e.buttonPopup,s=e.setButtonPopup;return(0,u.jsx)("div",{children:(0,u.jsx)(L(),{children:(0,u.jsxs)(p.Tk,{alignment:"center",backdrop:"static",size:"default",visible:n,className:"ui-dialog",onClose:function(){return s(!1)},children:[(0,u.jsx)(p.p0,{style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Planned Activity"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("h6",{children:"Are you sure to delete Planned Activity ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{type:"button",title:"Delete",className:"btn btn-primary",onClick:function(){t()},children:[(0,u.jsx)(U.UQg,{}),"Delete"]}),(0,u.jsxs)("button",{type:"button",title:"Cancel",className:"btn btn-secondary",onClick:function(){s(!1)},children:[(0,u.jsx)(M.sQZ,{}),"Cancel"]})]})]})]})})})}return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{style:{fontWeight:"600"},children:[N()(he.fromDate).format("DD-MMM-YYYY")," to \xa0",N()(he.toDate).format("DD-MMM-YYYY")]}),(0,u.jsxs)("span",{className:"float-end",children:[(0,u.jsx)(b.euR,{cursor:"pointer",size:"2em",onClick:function(){ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(he.fromDate).subtract("days",7).format("YYYY-MM-DD")))})),ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(he.toDate).subtract("days",7).format("YYYY-MM-DD")))})),X(!0),K(!0),q(!1)}}),(0,u.jsx)(b.EnJ,{cursor:"pointer",size:"2em",onClick:function(){ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(he.fromDate).add("days",7).format("YYYY-MM-DD")))})),ve((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(he.fromDate).add("days",13).format("YYYY-MM-DD")))})),X(!0),K(!0),q(!1)}})]})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"darkHeader",children:[(0,u.jsxs)(B.w,{value:g,editMode:"row",showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",paginator:!0,stripedRows:!0,rows:25,onRowEditComplete:function(e){var t=[g],n=e.newData;t[e.index]=n,y(t),postData(e.newData),q(!0)},className:"primeReactDataTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],children:[(0,u.jsx)(C.sgG,{className:"ellipsis",body:xe,field:"plannedActivities",header:"Planned Activities",editor:function(e){return xe(e)},sortable:!0}),1==h[1].is_write&&(0,u.jsx)(C.sgG,{body:function(e){return(0,u.jsx)("div",{style:{paddingLeft:"40px"},children:1!=h[1].is_write?"":(0,u.jsxs)("label",{cursor:"pointer",children:[(0,u.jsx)(b.QML,{title:"Edit",style:{backgroundColor:ce?"#eee":"",cursor:ce?"not-allowed":"pointer",opacity:ce?".7":""},className:"mr-1",color:"orange",onClick:function(){ne(e.id),K(!1),X(!1),q(!0),xe(),ie(!0)}}),"\xa0",(0,u.jsx)(b.YK6,{title:"Delete",style:{backgroundColor:ce?"#eee":"",cursor:ce?"not-allowed":"pointer",opacity:ce?".7":""},color:"orange",onClick:function(){Z(!0),P(e.id)}})]})})},header:"Action",bodyStyle:{textAlign:"align center"},sortable:!0,style:{width:" 135px"}})]}),1!=(null===f||void 0===f?void 0:f.is_write)?"":(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",disabled:H,onClick:function(){!function(){document.getElementsByClassName("p-paginator-first p-paginator-element p-link")[1].click();var e=[];e.push({plannedActivities:"",Actions:""}),y([].concat(e,(0,O.Z)(g))),q(!0),X(!1),K(!1)}(),de(!0)},variant:"contained",children:[(0,u.jsx)(r.wEH,{})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:G,variant:"contained",onClick:function(){ge(),1==d&&(q(!0),X(!1),K(!1)),de(!1)},children:[(0,u.jsx)(r.TvB,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:J,onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),je(),ie(!1),q(!1),X(!0),K(!0),m(!1),de(!1)}(),q(!1),R("")},variant:"contained",children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]})]}),D?(0,u.jsx)(ye,{plannedactivitiesdelete:function(){v()({method:"delete",url:fe+"/ProjectMS/PlannedActivities/deleteProjectPlannedActivities?id=".concat(I),data:I}).then((function(e){P(0),je(),Z(!1),t(!0),setTimeout((function(){t(!1)}),3e3)}))},buttonPopup:D,setButtonPopup:Z}):""]})})};var V=function(e){var t=e.projectId,n=e.grp4Items;console.log(n[1].is_write);var i=n.find((function(e){return"Accomplishments"===e.display_name})),d=localStorage.getItem("resId"),m=(0,a.useState)([]),h=(0,s.Z)(m,2),f=h[0],j=h[1],x=(0,a.useState)(""),g=(0,s.Z)(x,2),y=g[0],_=g[1],S=(0,a.useState)(!1),D=(0,s.Z)(S,2),w=D[0],I=D[1],P=(0,a.useState)(0),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)(!1),F=(0,s.Z)(R,2),Y=F[0],H=F[1],V=(0,a.useState)(!1),z=(0,s.Z)(V,2),G=z[0],K=z[1],W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)(!1),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(!1),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(!1),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue=(0,a.useState)(!0),me=(0,s.Z)(ue,2),pe=me[0],he=me[1],ve=(0,a.useState)(!0),fe=(0,s.Z)(ve,2),je=fe[0],xe=fe[1],ge=(0,a.useState)(""),ye=(0,s.Z)(ge,2),Ne=ye[0],be=ye[1],_e=(0,a.useState)(!1),Se=(0,s.Z)(_e,2),De=Se[0],Ce=Se[1],Ze=(0,a.useState)(!1),we=(0,s.Z)(Ze,2),Me=we[0],ke=we[1],Ie=(0,a.useState)(!1),Pe=(0,s.Z)(Ie,2),Te=Pe[0],Ae=Pe[1],Ee=(0,a.useState)(!1),Re=(0,s.Z)(Ee,2),Fe=Re[0],Ye=Re[1],Oe={fromDate:N()().startOf("week").add("days",1).format("YYYY-MM-DD"),toDate:N()().startOf("week").add("days",7).format("YYYY-MM-DD")},He=(0,a.useState)(Oe),Le=(0,s.Z)(He,2),Be=Le[0],Ue=Le[1],qe=(0,a.useState)([]),Ve=(0,s.Z)(qe,2),ze=Ve[0],Ge=Ve[1];(0,a.useEffect)((function(){Ke()}),[]);var Ke=function(){v()({method:"GET",url:We+"/CommonMS/master/getMenus?loggedUserId=".concat(d)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Ge([e])}))}))},We=c.N.baseUrl,Qe=function(){v()({url:We+"/ProjectMS/Accomplishments/getProjectDateAccomplishments?fromDate=".concat(Be.fromDate,"&toDate=").concat(Be.toDate,"&pid=").concat(t)}).then((function(e){j(e.data)}))};function Je(e){var t=e.accomplishmentDelete,n=e.buttonPopup,s=e.setButtonPopup;return(0,u.jsx)("div",{children:(0,u.jsx)(L(),{children:(0,u.jsxs)(p.Tk,{alignment:"center",backdrop:"static",size:"default",visible:n,className:"ui-dialog",onClose:function(){return s(!1)},children:[(0,u.jsx)(p.p0,{style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Accomplishments"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("h6",{children:"Are you sure to delete Accomplishments ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{type:"button",title:"Delete",className:"btn btn-primary",onClick:function(){t()},children:[(0,u.jsx)(U.UQg,{}),"Delete"]}),(0,u.jsxs)("button",{type:"button",title:"Cancel",className:"btn btn-primary",onClick:function(){s(!1)},children:[(0,u.jsx)(M.sQZ,{}),"Cancel"]})]})]})]})})})}(0,a.useEffect)((function(){Qe()}),[Be]),(0,a.useEffect)((function(){v()({method:"get",url:We+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(t)}).then((function(e){var t=e.data;X(t)})).catch((function(e){}))}),[]);var Xe=function(e,t){var n,s,a=function(e){if(32===e.keyCode){var t=e.target.value,n=e.target.selectionStart;if(0===n)return void e.preventDefault();if(" "!==t[n-1])return;e.preventDefault()}};return(0,u.jsxs)(u.Fragment,{children:[(null===e||void 0===e?void 0:e.id)===Ne&&!0===De?(0,u.jsx)("input",{className:!0===Me?"error-block ellipsis":"ellipsis",type:"text",id:"accomplishment",name:"accomplishment",title:e.accomplishment,defaultValue:null===e||void 0===e?void 0:e.accomplishment,onChange:function(e){_(e.target.value),de(!0)},onKeyDown:a}):""!==(null===e||void 0===e?void 0:e.accomplishment)&&(0,u.jsx)("p",{className:"ellipsis",title:null===e||void 0===e?void 0:e.accomplishment,children:null===e||void 0===e?void 0:e.accomplishment}),""===(null===e||void 0===e?void 0:e.accomplishment)&&(0,u.jsx)("input",{className:"error ".concat(!Me||null!==e&&void 0!==e&&null!==(n=e.rowData)&&void 0!==n&&n.accomplishment?"ellipsis":"error-block ellipsis"),type:"text",id:"accomplishment",name:"accomplishment",title:e.accomplishment,value:null===(s=e.rowData)||void 0===s?void 0:s.accomplishment,onChange:function(e){return _(e.target.value)},onKeyDown:a})]})};(0,a.useEffect)((function(){var e,t;""==(null===(e=f[0])||void 0===e?void 0:e.accomplishment)&&(null===(t=document.getElementsByClassName("p-row-editor-init p-link")[0])||void 0===t||t.click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=f[0])||void 0===t?void 0:t.accomplishment)&&(_(f.slice(2,f.length)),ke(!1))}),!0)}),200))}),[f]);var $e=function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click(),function(){var e;""===y?(ke(!0),xe(!0),he(!0),de(!1)):(xe(!1),he(!1),de(!0),e=f.find((function(e){return e.id===Ne}))?{id:Ne,projectId:t,accomplishment:y,createdDate:N()(Be.fromDate).format("YYYY-MM-DD")}:{projectId:t,accomplishment:y,createdDate:N()(Be.fromDate).format("YYYY-MM-DD")},v()({method:"post",url:We+"/ProjectMS/Accomplishments/postAccomplishmentsDetails",data:e}).then((function(e){Qe(),K(!0),de(!1),he(!0),xe(!0),ke(!1),setTimeout((function(){K(!1)}),3e3),_("")})),Ce(!1))}(),!0===Me?(xe(!0),he(!0),de(!1)):(xe(!1),he(!1),de(!0))};return(0,u.jsxs)("div",{children:[J.map((function(e){return(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsxs)("h2",{children:[e.projectName,"(",e.projectCode,")"]})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Accomplishments and Planned Activities"})}),(0,u.jsx)("div",{className:"childThree"})]})})),(0,u.jsx)(k.Z,{routes:ze,currentScreenName:["Projects","Open","Monitoring","Accomplishments and Planned Activities"]}),(0,u.jsxs)("div",{className:"customCard",children:[Y?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Accomplishment Deleted Successfully"]}):"",G?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Accomplishment saved successfully."]}):"",te?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Planned Activity Deleted successfully"]}):"",le?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Planned Activity saved successfully."]}):"",Me?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{})," ","Please Enter the highlighted field"]}):" ",Te?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{})," ","Please Enter the highlighted field"]}):" ",(0,u.jsxs)("div",{className:"row mt-2",children:[(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("span",{style:{fontWeight:"600"},children:[N()(Be.fromDate).format("DD-MMM-YYYY")," to \xa0",N()(Be.toDate).format("DD-MMM-YYYY")]}),(0,u.jsxs)("span",{className:"float-end",children:[(0,u.jsx)(b.euR,{cursor:"pointer",size:"2em",onClick:function(){Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Be.fromDate).subtract("days",7).format("YYYY-MM-DD")))})),Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Be.toDate).subtract("days",7).format("YYYY-MM-DD")))})),xe(!0),he(!0),de(!1)}}),(0,u.jsx)(b.EnJ,{cursor:"pointer",size:"2em",onClick:function(){Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Be.fromDate).add("days",7).format("YYYY-MM-DD")))})),Ue((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Be.toDate).add("days",7).format("YYYY-MM-DD")))})),xe(!0),he(!0),de(!1)}})]})]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{div:!0,className:"darkHeader",children:[(0,u.jsxs)(B.w,{value:f,editMode:"row",showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",paginator:!0,stripedRows:!0,rows:25,onRowEditComplete:function(e){var t=[f],n=e.newData;t[e.index]=n,j(t),postData(e.newData),de(!0)},className:"primeReactDataTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],children:[(0,u.jsx)(C.sgG,{body:Xe,field:"accomplishment",header:"Accomplishments",title:y,editor:function(e){return Xe(e)},sortable:!0}),1==n[1].is_write&&(0,u.jsx)(C.sgG,{body:function(e){return(0,u.jsx)("div",{style:{paddingLeft:"40px"},children:1==n[1].is_write?(0,u.jsxs)("label",{cursor:"pointer",children:[(0,u.jsx)(b.QML,{title:"Edit",style:{backgroundColor:Fe?"#eee":"",cursor:Fe?"not-allowed":"pointer",opacity:Fe?".7":""},disabled:Fe,className:"mr-1",color:"orange",onClick:function(){he(!1),xe(!1),de(!0),Xe(),Ce(!0),be(e.id)}}),"\xa0",(0,u.jsx)(b.YK6,{title:"Delete",style:{backgroundColor:Fe?"#eee":"",cursor:Fe?"not-allowed":"pointer",opacity:Fe?".7":""},color:"orange",onClick:function(){I(!0),E(e.id)}})]}):""})},header:"Action",bodyStyle:{textAlign:"align center"},sortable:!0,style:{width:" 135px"}})]}),1==(null===i||void 0===i?void 0:i.is_write)?(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",disabled:ce,onClick:function(){!function(){document.getElementsByClassName("p-paginator-first p-paginator-element p-link")[0].click();var e=[];e.push({accomplishment:"",Actions:""}),j([].concat(e,(0,O.Z)(f))),!0===Me?(xe(!0),he(!0),de(!1)):(xe(!1),he(!1),de(!0))}(),Ye(!0)},variant:"contained",children:[(0,u.jsx)(r.wEH,{})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:pe,variant:"contained",onClick:function(){$e(),1==Me&&(de(!0),xe(!1),he(!1)),Ye(!1)},children:[(0,u.jsx)(r.TvB,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:je,onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),Qe(),Ce(!1),de(!1),xe(!0),he(!0),ke(!1),Ye(!1)}(),de(!1),_("")},variant:"contained",children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]}):""]}),w?(0,u.jsx)(Je,{accomplishmentDelete:function(){v()({method:"delete",url:We+"/ProjectMS/Accomplishments/deleteAccomplishmentsDetails?id=".concat(A),data:A}).then((function(e){E(0),Qe(),I(!1),H(!0),setTimeout((function(){H(!1)}),3e3)}))},buttonPopup:w,setButtonPopup:I}):""]}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)(q,{setMessage:ne,setPlannedAddMessage:ie,projectId:t,validation:Te,setValidation:Ae,grp4Items:n})})]})]})]})},z=n(1063),G=n(25103),K=n(87890);var W=function(e){var t,n,i=(0,a.useState)([{}]),m=(0,s.Z)(i,2),p=m[0],h=m[1],f=(0,a.useState)(!1),j=(0,s.Z)(f,2),x=j[0],y=j[1],_=(0,a.useState)(!1),S=(0,s.Z)(_,2),C=S[0],w=S[1],I=(0,a.useState)(!1),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(!0),R=(0,s.Z)(E,2),F=R[0],Y=R[1],H=(0,a.useState)(!0),L=(0,s.Z)(H,2),U=L[0],q=L[1],V=(0,a.useState)(!1),W=(0,s.Z)(V,2),Q=W[0],J=W[1],X=c.N.baseUrl,$=(0,a.useRef)(null),ee=(0,a.useRef)(null),te=(0,a.useState)([]),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)([]),ie=(0,s.Z)(le,2),oe=ie[0],re=ie[1],ce=(0,a.useState)(""),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=(0,a.useState)(),he=(0,s.Z)(pe,2),ve=he[0],fe=he[1],je=(0,a.useState)(),xe=(0,s.Z)(je,2),ge=xe[0],ye=xe[1],Ne=(0,a.useState)(),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=(0,a.useState)(null),Ce=(0,s.Z)(De,2),Ze=Ce[0],we=Ce[1],Me=(0,a.useState)([]),ke=(0,s.Z)(Me,2),Ie=ke[0],Pe=ke[1],Te=localStorage.getItem("resName"),Ae=localStorage.getItem("resId"),Ee=e.projectId,Re=e.grp1Items.find((function(e){return"Stakeholders"===e.display_name})),Fe=(0,a.useState)([]),Ye=(0,s.Z)(Fe,2),Oe=(Ye[0],Ye[1],(0,a.useState)([])),He=(0,s.Z)(Oe,2),Le=He[0],Be=He[1];(0,a.useEffect)((function(){v()({method:"GET",url:X+"/CommonMS/master/getMenus?loggedUserId=".concat(Ae)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Be([e])}))}))}),[]);var Ue=(0,a.useState)({global:{value:null,matchMode:K.a6.CONTAINS},name:{operator:K.pg.AND,constraints:[{value:null,matchMode:K.a6.STARTS_WITH}]},representative:{value:null,matchMode:K.a6.IN},status:{operator:K.pg.OR,constraints:[{value:null,matchMode:K.a6.EQUALS}]}}),qe=(0,s.Z)(Ue,2),Ve=qe[0],ze=qe[1],Ge={project_id:Ee,Role:"",Userid:"",FromDate:"",ToDate:"",comments:""},Ke=(0,a.useState)(Ge),We=(0,s.Z)(Ke,2),Qe=We[0],Je=We[1];(0,a.useEffect)((function(){}),[Qe,ue,null===Qe||void 0===Qe?void 0:Qe.Role,null===Qe||void 0===Qe?void 0:Qe.Userid,ve]);var Xe=(0,a.useState)(),$e=(0,s.Z)(Xe,2),et=$e[0],tt=$e[1],nt=function(e,t){void 0!=e.id?function(){var t={id:et,LastUpdatedBy:Te,LastUpdatedById:Ae,Version:"0",assignedBy:Ae,IsActive:"1",CreatedBy:Te,ObjectTypeCode:"ObjectRole",IsResolved:"1",IsManualAssignment:"0",ObjectId:Ee,Role:""==ue?_e:ue,User:""==(null===Qe||void 0===Qe?void 0:Qe.Userid)?ve:null===Qe||void 0===Qe?void 0:Qe.Userid,FromDate:""==(null===Qe||void 0===Qe?void 0:Qe.FromDate)?N()(null===e||void 0===e?void 0:e.FromDate).format("yyyy-MM-DD"):null===Qe||void 0===Qe?void 0:Qe.FromDate,ToDate:""===(null===Qe||void 0===Qe?void 0:Qe.ToDate)?N()(null===e||void 0===e?void 0:e.ToDate).format("yyyy-MM-DD"):null===Qe||void 0===Qe?void 0:Qe.ToDate,object_type_id:3,role_type_id:""==(null===Qe||void 0===Qe?void 0:Qe.Role)?ge:null===Qe||void 0===Qe?void 0:Qe.Role};v()({method:"post",url:X+"/ProjectMS/stakeholders/postDetailsinBaseDomainobjectroles",data:t}).then((function(e){A(!1),y(!0),setTimeout((function(){y(!1),A(!1)}),3e3),w(!1),rt(),Je(Ge)})),q(!0),J(!1)}():function(){var e,t,n={LastUpdatedBy:Te,LastUpdatedById:Ae,Version:"0",assignedBy:Ae,IsActive:"1",CreatedBy:Te,ObjectTypeCode:"ObjectRole",IsResolved:"1",IsManualAssignment:"0",ObjectId:Ee,Role:ue,User:Qe.Userid,FromDate:""==Qe.FromDate?null===(e=Ie[0])||void 0===e?void 0:e.plandStartDate:Qe.FromDate,ToDate:""==Qe.ToDate?null===(t=Ie[0])||void 0===t?void 0:t.plandEndDate:null===Qe||void 0===Qe?void 0:Qe.ToDate,object_type_id:3,role_type_id:Qe.Role,ObjectTypeRoleTypeId:1};""===Qe.Role||""===Qe.Userid?w(!0):""==Qe.Role&&""===Qe.Userid||(v()({method:"post",url:X+"/ProjectMS/stakeholders/postDetailsinBaseDomainobjectroles",data:n}).then((function(e){w(!1),Y(!1),Je(Ge),A(!1),y(!0),setTimeout((function(){y(!1),A(!1),Y(!0),rt()}),1e3)})),q(!0),J(!1))}()};(0,a.useEffect)((function(){var e;v()({method:"get",url:X+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(Ee)}).then((function(e){var t=e.data;Pe(t)})).catch((function(e){}));p[0];if(""==(null===(e=p[0])||void 0===e?void 0:e.Role)){var t=document.getElementsByClassName("p-row-editor-init p-link")[0];null===t||void 0===t||t.setAttribute("title","Edit selected row"),null===t||void 0===t||t.click(),setTimeout((function(){var e=document.getElementsByClassName("p-row-editor-save p-link")[0];null===e||void 0===e||e.setAttribute("title","Save row");var t=document.getElementsByClassName("p-row-editor-cancel p-link")[0];null===t||void 0===t||t.setAttribute("title","Cancel row editing"),null===t||void 0===t||t.addEventListener("click",(function(e){var t,n;""===(null===(t=p[0])||void 0===t?void 0:t.Role)&&(h(p.slice(1,p.length)),q(!0),w(!1),J(!1),null===(n=ee.current)||void 0===n||n.forceUpdate())}),!0)}),200)}}),[p]),(0,a.useEffect)((function(){var e=document.getElementsByClassName("p-row-editor-init p-link"),t=JSON.parse(JSON.stringify(p.filter((function(e){return void 0!=e.id}))));T||void 0==e||setTimeout((function(){for(var n=0;n<e.length;n++){var s;"System"==(null===(s=t[n])||void 0===s?void 0:s.AssignmentType)&&e[n].classList.add("disableRow"),e[n].setAttribute("title","Edit")}}),1e3)}),[p,T]),(0,a.useEffect)((function(){}),[null===(t=Ie[0])||void 0===t?void 0:t.plandStartDate,null===(n=Ie[0])||void 0===n?void 0:n.plandEndDate]);var st=(0,a.useState)(""),at=(0,s.Z)(st,2),lt=at[0],it=at[1];(0,a.useEffect)((function(){}),[ve,lt]);var ot=function(){v()({method:"get",url:X+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;ae(t)}))};(0,a.useEffect)((function(){}),[se]),(0,a.useEffect)((function(e){ot(),v()({url:X+"/ProjectMS/stakeholders/getRoles"}).then((function(e){re(e.data)})),v()({url:X+"/ProjectMS/stakeholders/getObjectTypeId?id=".concat(null===Qe||void 0===Qe?void 0:Qe.Role)}).then((function(e){me(e.data)}))}),[null===Qe||void 0===Qe?void 0:Qe.Role]);var rt=function(){A(!1),$.current=new AbortController,v()({url:X+"/ProjectMS/stakeholders/getStakeHolderDetails?ObjectId=".concat(Ee)}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].date_created=null==t[n].date_created?"":N()(t[n].date_created).format("DD-MMM-YYYY"),t[n].FromDate=null==t[n].FromDate?"":N()(t[n].FromDate).format("DD-MMM-YYYY"),t[n].ToDate=null==t[n].ToDate?"":N()(t[n].ToDate).format("DD-MMM-YYYY"),t[n].AssignmentType=null==t[n].AssignmentType?"":1==t[n].AssignmentType?"System":"Manual",t[n].IsActive=null==t[n].IsActive?"":1==t[n].IsActive?"YES":"NO",t[n].User=null===t[n].User?"":t[n].User;h(t),setTimeout((function(){A(!1)}),1e3)}))};(0,a.useEffect)((function(){rt()}),[]);var ct=(0,a.useState)(""),dt=(0,s.Z)(ct,2),ut=dt[0],mt=dt[1],pt=(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("span",{className:"p-input-icon-left stakeTableSearch",children:[(0,u.jsx)("i",{className:"pi pi-search"}),(0,u.jsx)(G.o,{type:"search",style:{float:"right"},value:ut,onChange:function(e){mt(e.target.value)},placeholder:"Keyword Search"})]})}),ht=p.filter((function(e){return Object.values(e).some((function(e){return String(e).toLowerCase().includes(ut.toLowerCase())}))}));return(0,u.jsxs)(u.Fragment,{children:[C?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(b.CSE,{}),"\xa0","Please provide the valid values for highlighted fields"]})}):"",x?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Role saved successfully."]}):"",Ie.map((function(e){return(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsxs)("h2",{children:[e.projectName,"(",e.projectCode,")"]})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Stakeholders"})}),(0,u.jsx)("div",{className:"childThree"})]})})})),(0,u.jsx)(k.Z,{routes:Le,currentScreenName:["Projects","Open","Project","Stakeholders"]}),T?(0,u.jsx)("div",{className:"loaderBlock",children:(0,u.jsx)(D.Z,{handleAbort:function(){$.current&&$.current.abort(),A(!1)}})}):"",F?(0,u.jsx)("div",{className:"customercard darkHeader mt-2",children:(0,u.jsxs)(B.w,{className:"primeReactDataTable invoicingSearchTable   projectStakeholderTable",value:ht,onRowEditComplete:function(e){var t=(0,O.Z)(p),n=e.newData;t[e.index]=n,h(t),nt(e.newData)},paginator:!0,editMode:"row",rows:1500,header:pt,filters:Ve,onFilter:function(e){return ze(e.filters)},selection:Ze,onSelectionChange:function(e){return we(e.value)},dataKey:"id",showGridlines:!0,stripedRows:!0,scrollHeight:"480px",responsiveLayout:"scroll",emptyMessage:"No Records found.",children:[(0,u.jsx)(z.s,{field:"Role",header:"Role",sortable:!0,body:function(e){return(0,u.jsxs)("div",{title:e.Role,children:[" ",e.Role]})},editor:function(e){return function(e){var t;return Se(null===(t=e.rowData)||void 0===t?void 0:t.ObjectRoleTypeId),(0,u.jsx)("div",{children:(0,u.jsx)("div",{children:(0,u.jsxs)("select",{id:"Role",name:"Role",className:"error".concat(C&&!e.rowData.Roleid?" error-block":""),onChange:function(e){Je((function(t){return(0,o.Z)((0,o.Z)({},t),{},{Role:e.target.value})}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===oe||void 0===oe?void 0:oe.map((function(t){return(0,u.jsx)("option",{value:t.id,selected:t.id===e.rowData.Roleid,children:t.display_name},t.id)}))]})})})}(e)}}),(0,u.jsx)(z.s,{field:"User",header:"User",sortable:!0,body:function(e){return(0,u.jsx)("div",{title:e.User,children:e.User})},editor:function(e){return function(e){return tt(e.rowData.id),(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)("div",{className:" ".concat(C&&!e.rowData.User?"error-block":""),children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:se,type:"Text",name:"Userid",id:"Userid",value:e.rowData.User,fuseOptions:{keys:["id","name","employee_number"]},resultStringKeyName:"name",issueDetails:se,inputSearchString:null==e.rowData.User?"":e.rowData.User,getUser:ot,onSelect:function(t){e.editorCallback(t.name),Je((function(e){return(0,o.Z)((0,o.Z)({},e),{},{Userid:t.userId})}))},showIcon:!1})})})}(e)}}),(0,u.jsx)(z.s,{field:"FromDate",header:(0,u.jsx)("span",{children:"From Date"}),sortable:!0,body:function(e){return(0,u.jsx)("div",{title:e.FromDate,children:e.FromDate})},editor:function(e){return function(e){var t,n,s;return fe(null===(t=e.rowData)||void 0===t?void 0:t.user_id),new Date,(0,u.jsx)(g(),{className:"error ".concat(C&&!e.rowData.FromDate?"error-block":""),name:"FromDate",id:"FromDate",selected:e.FromDate,showMonthDropdown:!0,showYearDropdown:!0,autoComplete:"off",dropdownMode:"select",value:e.rowData.FromDate,dateFormat:"DD-MMM-yyyy",onChange:function(t){var n=N()(t).format("DD-MMM-yyyy");e.editorCallback(n),Je((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"FromDate",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()},minDate:N()(null===(n=Ie[0])||void 0===n?void 0:n.plandStartDate).toDate(),maxDate:N()(null===(s=Ie[0])||void 0===s?void 0:s.plandEndDate).toDate()})}(e)}}),(0,u.jsx)(z.s,{field:"ToDate",header:(0,u.jsx)("span",{children:"To Date"}),sortable:!0,body:function(e){return(0,u.jsx)("div",{title:e.ToDate,children:e.ToDate})},editor:function(e){return function(e){var t,n;return(0,u.jsx)(g(),{className:"error ".concat(C&&!e.rowData.ToDate?"error-block":""),name:"ToDate",id:"ToDate",autoComplete:"off",selected:e.ToDate,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",value:e.rowData.ToDate,dateFormat:"DD-MMM-yyyy",onChange:function(t){var n=N()(t).format("yyyy-MM-DD");e.editorCallback(n),Je((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"ToDate",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()},minDate:N()(null===(t=Ie[0])||void 0===t?void 0:t.plandStartDate).toDate(),maxDate:N()(null===(n=Ie[0])||void 0===n?void 0:n.plandEndDate).toDate()})}(e)}}),(0,u.jsx)(z.s,{field:"AssignmentType",header:"Assignment Type",sortable:!0,body:function(e){var t=e.AssignmentType;return it(t),(0,u.jsx)("div",{title:e.AssignmentType,children:e.AssignmentType})}}),(0,u.jsx)(z.s,{field:"assignedBy",header:"Assigned By",sortable:!0,body:function(e){return ye(e.Roleid),(0,u.jsx)("div",{title:e.assignedBy,children:e.assignedBy})}}),(0,u.jsx)(z.s,{field:"date_created",header:"Assigned Date",sortable:!0,body:function(e){return(0,u.jsx)("div",{title:e.date_created,children:e.date_created})}}),(0,u.jsx)(z.s,{field:"IsActive",header:"IsActive",sortable:!0}),!0===Re.is_write&&(0,u.jsx)(z.s,{field:"Actions",style:{textAlign:"center"},header:"Actions",rowEditor:!0,sortable:!0})]})}):"",(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[!0===(null===Re||void 0===Re?void 0:Re.is_write)?(0,u.jsxs)("button",{className:"btn btn-primary",disabled:Q,title:"Add new row",onClick:function(){var e,t;Q||(J(!0),q(!1));var n={Role:"",FromDate:N()(null===(e=Ie[0])||void 0===e?void 0:e.plandStartDate).format("DD-MMM-yyyy"),ToDate:N()(null===(t=Ie[0])||void 0===t?void 0:t.plandEndDate).format("DD-MMM-yyyy"),User:""},s=[];s.push(n),h([].concat(s,(0,O.Z)(p)))},children:[(0,u.jsx)(r.wEH,{})," Add"]}):null,!0===(null===Re||void 0===Re?void 0:Re.is_write)?(0,u.jsxs)("button",{id:"isShow",className:"btn btn-primary",disabled:U,title:"Save row",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()}()},children:[(0,u.jsx)(r.TvB,{})," Save"]}):null,!0===(null===Re||void 0===Re?void 0:Re.is_write)?(0,u.jsxs)("button",{className:"btn btn-secondary",disabled:U,title:"Cancel row editing",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),w(!1)}()},children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]}):null]})]})},Q=(n(93867),n(96907));var J=function(e){var t,n=(0,a.useState)([{}]),l=(0,s.Z)(n,2),i=l[0],o=l[1],r=e.pid,d=e.sd,m=e.ed,p=(0,a.useState)(!1),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)(!0),g=(0,s.Z)(x,2),y=(g[0],g[1],c.N.baseUrl);console.log(N()(d).format("yyyy-MM-DD")),console.log(m);var b=document.createElement("div"),_=function(){j(!1),v().get(y+"/ProjectMS/project/kpidata?ProjectId=".concat(r)).then((function(e){var t=e.data;o(t),j(!1)})).catch((function(e){j(!1)}))};return b.innerHTML=null===(t=i[0])||void 0===t?void 0:t.currency_id,(0,a.useEffect)((function(){_()}),[d]),(0,a.useEffect)((function(){_()}),[m]),(0,u.jsxs)("div",{className:"darkHeader",children:[f?(0,u.jsx)(D.Z,{}):"",(0,u.jsxs)("table",{className:"table  table-bordered  display",children:[(0,u.jsx)("thead",{className:"grayBg",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{width:"5%",height:"10px",children:i.map((function(e){return e.var_dc<-6||e.var_dur<-6||e.var_efforts<-6||e.var_margin<-6||e.var_oc<-6||e.var_rev<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"Atleast one indicator is red"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"All indicators are green or Just one indicator is yellow and others are being green"})]})}))}),(0,u.jsx)("th",{width:"15%",style:{textAlign:"center",verticalAlign:"middle"},children:"KPI"}),(0,u.jsx)("th",{width:"8%",style:{textAlign:"center",verticalAlign:"middle"},children:"Contracted Value"}),(0,u.jsx)("th",{width:"13%",style:{textAlign:"center",verticalAlign:"middle"},children:"Latest Total Planned (LTP)"}),(0,u.jsx)("th",{width:"11%",style:{textAlign:"center",verticalAlign:"middle"},children:"Planned to Date (PTD)"}),(0,u.jsx)("th",{width:"11%",style:{textAlign:"center",verticalAlign:"middle"},children:"Actual to Date (ATD)"}),(0,u.jsx)("th",{width:"13%",style:{textAlign:"center",verticalAlign:"middle"},children:"Estimate To Complete (ETC)"}),(0,u.jsx)("th",{width:"13%",style:{textAlign:"center",verticalAlign:"middle"},children:"Estimate At Completion (EAC)"}),(0,u.jsx)("th",{width:"12%",style:{textAlign:"center",verticalAlign:"middle"},children:"Variance At Completion(%)"})]})}),(0,u.jsxs)("tbody",{className:"openTable",children:[(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_efforts<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_efforts<=-4&&e.var_efforts>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_efforts>-4?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"variance > -4 %"})]}):""]}),(0,u.jsx)("td",{width:"8%",children:"Efforts (Hrs)"}),(0,u.jsx)("td",{width:"13%",id:"cont_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(t=e.cont_efforts)||void 0===t?void 0:t.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"13%",id:"pln_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(n=e.pln_efforts)||void 0===n?void 0:n.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"11%",id:"ptd_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(s=e.ptd_efforts)||void 0===s?void 0:s.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"11%",id:"atd_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(a=e.atd_efforts)||void 0===a?void 0:a.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"13%",id:"etc_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(l=e.etc_efforts)||void 0===l?void 0:l.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"13%",id:"eac_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(i=e.eac_efforts)||void 0===i?void 0:i.toLocaleString("en-IN")})}),(0,u.jsx)("td",{width:"12%",id:"var_efforts",children:(0,u.jsx)("span",{style:{float:"right"},children:e.var_efforts})})]})}))}),(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_rev<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_rev<=-4&&e.var_rev>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_rev>-4?(0,u.jsxs)("div",{className:"projectStatus",title:"variance > -4 %",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green"})]}):""]}),(0,u.jsx)("td",{children:"Revenue"}),(0,u.jsx)("td",{id:"cont_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:["undefined"==b.textContent?"":b.textContent," ",null===(t=e.cont_rev)||void 0===t?void 0:t.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"pln_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:["undefined"==b.textContent?"":b.textContent,null===(n=e.pln_rev)||void 0===n?void 0:n.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"ptd_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(s=e.ptd_rev)||void 0===s?void 0:s.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"atd_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(a=e.atd_rev)||void 0===a?void 0:a.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"etc_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(l=e.etc_rev)||void 0===l?void 0:l.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"eac_rev",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",e.eac_rev]})}),(0,u.jsx)("td",{id:"var_rev",children:(0,u.jsx)("span",{style:{float:"right"},children:e.var_rev})})]})}))}),(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_dc<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_dc<=-4&&e.var_dc>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_dc>-4?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"variance > -4 %"})]}):""]}),(0,u.jsx)("td",{children:"Resource Direct Cost"}),(0,u.jsx)("td",{id:"cont_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(t=e.cont_dc)||void 0===t?void 0:t.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"pln_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(n=e.pln_dc)||void 0===n?void 0:n.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"ptd_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(s=e.ptd_dc)||void 0===s?void 0:s.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"atd_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(a=e.atd_dc)||void 0===a?void 0:a.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"etc_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(l=e.etc_dc)||void 0===l?void 0:l.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"eac_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(i=e.eac_dc)||void 0===i?void 0:i.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"var_dc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ",e.var_dc]})})]})}))}),(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_oc<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_oc<=-4&&e.var_oc>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_oc>-4?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"variance > -4 %"})]}):""]}),(0,u.jsx)("td",{children:"Other Direct Cost"}),(0,u.jsxs)("td",{id:"cont_oc",children:[" ",(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(t=e.cont_oc)||void 0===t?void 0:t.toLocaleString("en-IN")]})]}),(0,u.jsxs)("td",{id:"pln_oc",children:[" ",(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(n=e.pln_oc)||void 0===n?void 0:n.toLocaleString("en-IN")]})]}),(0,u.jsxs)("td",{id:"ptd_oc",children:[" ",(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(s=e.ptd_oc)||void 0===s?void 0:s.toLocaleString("en-IN")]})]}),(0,u.jsx)("td",{id:"atd_oc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(a=e.atd_oc)||void 0===a?void 0:a.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"etc_oc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(l=e.etc_oc)||void 0===l?void 0:l.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"eac_oc",children:(0,u.jsxs)("span",{style:{float:"right"},children:[" ","undefined"==b.textContent?"":b.textContent," ",null===(i=e.eac_oc)||void 0===i?void 0:i.toLocaleString("en-IN")]})}),(0,u.jsx)("td",{id:"var_oc",children:(0,u.jsx)("span",{style:{float:"right"},children:e.var_oc})})]})}))}),(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_margin<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_margin<=-4&&e.var_margin>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_margin>-4?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"variance > -4 %"})]}):""]}),(0,u.jsx)("td",{children:"Project Margin (%)"}),(0,u.jsx)("td",{id:"cont_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(t=e.cont_margin)||void 0===t?void 0:t.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"pln_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(n=e.pln_margin)||void 0===n?void 0:n.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"ptd_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(s=e.ptd_margin)||void 0===s?void 0:s.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"atd_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(a=e.atd_margin)||void 0===a?void 0:a.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"etc_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(l=e.etc_margin)||void 0===l?void 0:l.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"eac_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(i=e.eac_margin)||void 0===i?void 0:i.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"var_margin",children:(0,u.jsx)("span",{style:{float:"right"},children:e.var_margin})})]})}))}),(0,u.jsx)("tr",{children:i.map((function(e){var t,n,s,a,l,i;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("td",{height:"10px",children:[e.var_dur<-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle red",title:"variance < -6 %"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_dur<=-4&&e.var_dur>=-6?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle amber",title:"variance lies between -4 to -6 %"}),(0,u.jsx)("span",{className:"circle"})]}):"",e.var_dur>-4?(0,u.jsxs)("div",{className:"projectStatus",children:[(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle"}),(0,u.jsx)("span",{className:"circle green",title:"variance > -4 %"})]}):""]}),(0,u.jsx)("td",{children:"Duration (Days)"}),(0,u.jsx)("td",{id:"cont_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(t=e.cont_dur)||void 0===t?void 0:t.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"pln_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(n=e.pln_dur)||void 0===n?void 0:n.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"ptd_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(s=e.ptd_dur)||void 0===s?void 0:s.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"atd_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(a=e.atd_dur)||void 0===a?void 0:a.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"etc_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(l=e.etc_dur)||void 0===l?void 0:l.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"eac_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:null===(i=e.eac_dur)||void 0===i?void 0:i.toLocaleString("en-IN")})}),(0,u.jsx)("td",{id:"var_dur",children:(0,u.jsx)("span",{style:{float:"right"},children:e.var_dur})})]})}))})]})]})]})};var X=function(e){var t,n=e.pid,i=(0,a.useState)([{}]),r=(0,s.Z)(i,2),d=r[0],m=r[1],p=(0,a.useState)([]),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],_=(g[1],c.N.baseUrl),S={fromDate:N()().startOf("week").add("days",1).format("YYYY-MM-DD"),toDate:N()().startOf("week").add("days",7).format("YYYY-MM-DD")};console.log(N()().format("YYYY-MM-DD"));var D=(0,a.useState)(S),C=(0,s.Z)(D,2),Z=C[0],w=C[1];(0,a.useEffect)((function(){v().get(_+"/ProjectMS/Accomplishments/getProjectDateAccomplishments?fromDate=".concat(Z.fromDate,"&toDate=").concat(Z.toDate,"&pid=").concat(n)).then((function(e){var t=e.data,n=[].concat([{accomplishment:"Accomplishments"}],(0,O.Z)(t));console.log(n),m(n)})).catch((function(e){}))}),[Z]);var M=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.accomplishment,children:e.accomplishment})},k=null===(t=Object.keys(f))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"accomplishment"==e?M:null,field:e,header:f[e]},e)}));return(0,a.useEffect)((function(){d[0]&&j(JSON.parse(JSON.stringify(d[0])))}),[d]),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("strong",{children:[N()(Z.fromDate).format("DD-MMM-YYYY")," to"," ",N()(Z.toDate).format("DD-MMM-YYYY")]}),(0,u.jsxs)("span",{style:{float:"right"},children:[(0,u.jsx)(b.euR,{cursor:"pointer",size:"2em",onClick:function(){w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Z.fromDate).subtract("days",7).format("YYYY-MM-DD")))})),w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Z.toDate).subtract("days",7).format("YYYY-MM-DD")))}))}}),(0,u.jsx)(b.EnJ,{cursor:"pointer",size:"2em",onClick:function(){w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Z.fromDate).add("days",7).format("YYYY-MM-DD")))})),w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Z.toDate).add("days",7).format("YYYY-MM-DD")))}))}})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)(A.Z,{rows:5,data:d,dynamicColumns:k,headerData:f,setHeaderData:j,exportData:y})]})};var $=function(e){var t,n=e.pid,i=(0,a.useState)([{}]),r=(0,s.Z)(i,2),d=r[0],m=r[1],p=(0,a.useState)([]),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],_=(g[1],c.N.baseUrl),S={fromDate:N()().startOf("week").add("days",8).format("YYYY-MM-DD"),toDate:N()().startOf("week").add("days",14).format("YYYY-MM-DD")},D=(0,a.useState)(S),C=(0,s.Z)(D,2),Z=C[0],w=C[1];console.log(Z.fromDate),console.log(Z.toDate),console.log(Z.toDate),console.log(Z.fromDate),console.log(Z.toDate),(0,a.useEffect)((function(){v().get(_+"/ProjectMS/project/getProjectDatePlannedActivities?pid=".concat(n,"&createdDate=").concat(Z.fromDate,"&modifiedDate=").concat(Z.toDate)).then((function(e){var t=e.data,n=[].concat([{planned_activity:"Planned Activity"}],(0,O.Z)(t));console.log(n),m(n)})).catch((function(e){}))}),[Z]);var M=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.planned_activity,children:e.planned_activity})},k=null===(t=Object.keys(f))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"planned_activity"==e?M:null,field:e,header:f[e]},e)}));return(0,a.useEffect)((function(){d[0]&&j(JSON.parse(JSON.stringify(d[0])))}),[d]),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{children:[(0,u.jsxs)("strong",{children:[N()(Z.fromDate).format("DD-MMM-YYYY")," to"," ",N()(Z.toDate).format("DD-MMM-YYYY")]}),(0,u.jsxs)("span",{style:{float:"right"},children:[(0,u.jsx)(b.euR,{cursor:"pointer",size:"2em",onClick:function(){w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Z.fromDate).subtract("days",7).format("YYYY-MM-DD")))})),w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Z.toDate).subtract("days",7).format("YYYY-MM-DD")))}))}}),(0,u.jsx)(b.EnJ,{cursor:"pointer",size:"2em",onClick:function(){w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"fromDate",N()(Z.fromDate).add("days",7).format("YYYY-MM-DD")))})),w((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"toDate",N()(Z.fromDate).add("days",13).format("YYYY-MM-DD")))}))}})]})]}),(0,u.jsx)("br",{}),(0,u.jsx)(A.Z,{rows:5,data:d,dynamicColumns:k,headerData:f,setHeaderData:j,exportData:y})]})};var ee=function(e){var t,n=e.pid,l=(0,a.useState)([{}]),i=(0,s.Z)(l,2),o=i[0],r=i[1],d=(0,a.useState)([]),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=(j[1],c.N.baseUrl);(0,a.useEffect)((function(){v().get(g+"/ProjectMS/project/risks?pid=".concat(n)).then((function(e){var t=e.data,n=[].concat([{riskName:"Risk Name",riskType:"Risk Type",riskSource:"Risk Source",riskImpact:"Risk Impact",probabOcc:"Probability of Occurrence",riskValue:"Risk Value",assignedTo:"Assigned To",riskOccurred:"Risk Occurred",riskStatus:"Risk Status",occuredDate:"Occurred Date",createdBy:"Created By"}],(0,O.Z)(t));console.log(n),r(n)})).catch((function(e){}))}),[]);var y=function(e){return(0,u.jsx)("div",{className:"ellipsis",style:{textAlign:"right"},children:e.riskValue})},N=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.riskName,children:e.riskName})},b=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.assignedTo,children:e.assignedTo})},_=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.createdBy,children:e.createdBy})},S=null===(t=Object.keys(p))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"riskValue"==e?y:"riskName"==e?N:"assignedTo"==e?b:"createdBy"==e?_:null,field:e,header:p[e]},e)}));return(0,a.useEffect)((function(){o[0]&&h(JSON.parse(JSON.stringify(o[0])))}),[o]),(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{rows:5,data:o,dynamicColumns:S,headerData:p,setHeaderData:h,exportData:x})})};var te=function(e){var t,n=e.pid,l=(0,a.useState)([{}]),i=(0,s.Z)(l,2),o=i[0],r=i[1],d=(0,a.useState)([]),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=(j[1],c.N.baseUrl);(0,a.useEffect)((function(){v().get(g+"/ProjectMS/project/issue?pid=".concat(n)).then((function(e){var t=e.data,n=[].concat([{issueName:"Issue Name",criticality:"Criticality",status:"Status",dueDate:"Due Date",issueSource:"Issue Source",assignedTo:"Assigned To",rcaDone:"RCA Done",createdBy:"Created By",comments:"Comments"}],(0,O.Z)(t));console.log(n),r(n)})).catch((function(e){}))}),[]);var y=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.comments,children:e.comments})},N=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.issueName,children:e.issueName})},b=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.assignedTo,children:e.assignedTo})},_=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.createdBy,children:e.createdBy})},S=null===(t=Object.keys(p))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"comments"===e?y:"issueName"===e?N:"assignedTo"===e?b:"createdBy"===e?_:null,field:e,header:p[e]},e)}));return(0,a.useEffect)((function(){o[0]&&h(JSON.parse(JSON.stringify(o[0])))}),[o]),(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{rows:5,data:o,dynamicColumns:S,headerData:p,setHeaderData:h,exportData:x})})};var ne=function(e){var t,n=e.pid,l=(0,a.useState)([{}]),i=(0,s.Z)(l,2),o=i[0],r=i[1],d=(0,a.useState)([]),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=(j[1],c.N.baseUrl);(0,a.useEffect)((function(){v().get(g+"/ProjectMS/project/dependency?pid=".concat(n)).then((function(e){var t=e.data,n=[].concat([{dependency:"Dependency / Constraints",type:"Type",priority:"Priority",raisedBy:"Raised By",raisedDate:"Raised Date",targetDate:"Target Date",assignedTo:"Assigned To",phaseAffected:"Phase / Area affected",Status:"Status"}],(0,O.Z)(t));console.log(n),r(n)})).catch((function(e){}))}),[]);var y=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.phaseAffected,children:e.phaseAffected})},N=null===(t=Object.keys(p))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"phaseAffected"===e?y:null,field:e,header:p[e]},e)}));return(0,a.useEffect)((function(){o[0]&&h(JSON.parse(JSON.stringify(o[0])))}),[o]),(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{rows:5,data:o,dynamicColumns:N,headerData:p,setHeaderData:h,exportData:x})})};var se=function(e){var t,n=e.pid,l=(0,a.useState)([{}]),i=(0,s.Z)(l,2),o=i[0],r=i[1],d=(0,a.useState)([]),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=(j[1],c.N.baseUrl);(0,a.useEffect)((function(){v().get(g+"/ProjectMS/project/scopechanges?pid=".concat(n)).then((function(e){var t=e.data;console.log(t);var n=[].concat([{description:"Description of Change",change_req_date:"Change Request Date",financial_impact:"Financial Impact"}],(0,O.Z)(t));console.log(n),r(n)})).catch((function(e){}))}),[]);var y=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.description,children:e.description})},N=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.financial_impact,children:e.financial_impact})},b=function(e){return(0,u.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},children:e.change_req_date})},_=null===(t=Object.keys(p))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"description"===e?y:"financial_impact"==e?N:"change_req_date"==e?b:null,field:e,header:p[e]},e)}));return(0,a.useEffect)((function(){o[0]&&h(JSON.parse(JSON.stringify(o[0])))}),[o]),(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{rows:5,data:o,dynamicColumns:_,headerData:p,setHeaderData:h,exportData:x})})};var ae=function(e){var t,n=e.pid,l=(0,a.useState)([{}]),i=(0,s.Z)(l,2),o=i[0],r=i[1],d=(0,a.useState)([]),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=(j[1],c.N.baseUrl);(0,a.useEffect)((function(){v().get(g+"/ProjectMS/project/events?pid=".concat(n)).then((function(e){var t=e.data,n=[].concat([{event:"Event",date:"Date",comments:"Comments"}],(0,O.Z)(t));console.log(n),r(n)})).catch((function(e){}))}),[]);var y=function(e){return(0,u.jsx)("div",{className:"ellipsis",style:{textAlign:"center"},children:e.date})},N=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.event,children:e.event})},b=function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.comments,children:e.comments})},_=null===(t=Object.keys(p))||void 0===t?void 0:t.map((function(e,t){return console.log(e),(0,u.jsx)(z.s,{sortable:!0,body:"date"==e?y:"event"==e?N:"comments"==e?b:null,field:e,header:p[e]},e)}));return(0,a.useEffect)((function(){o[0]&&h(JSON.parse(JSON.stringify(o[0])))}),[o]),(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{rows:5,data:o,dynamicColumns:_,headerData:p,setHeaderData:h,exportData:x})})};var le=function(e){var t=e.projectId,n=(0,a.useState)(!0),l=(0,s.Z)(n,2),i=l[0],o=l[1],d=(0,a.useState)(!0),m=(0,s.Z)(d,2),h=m[0],f=m[1],j=(0,a.useState)(!0),x=(0,s.Z)(j,2),g=x[0],y=x[1],N=(0,a.useState)(!0),b=(0,s.Z)(N,2),_=b[0],S=b[1],C=(0,a.useState)(!0),Z=(0,s.Z)(C,2),w=Z[0],M=Z[1],I=(0,a.useState)(!0),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(r.NR5),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=(0,a.useState)(r.NR5),H=(0,s.Z)(O,2),L=H[0],B=H[1],U=(0,a.useState)(r.NR5),q=(0,s.Z)(U,2),V=q[0],z=q[1],G=(0,a.useState)(r.NR5),K=(0,s.Z)(G,2),W=K[0],le=K[1],ie=(0,a.useState)(r.NR5),oe=(0,s.Z)(ie,2),re=oe[0],ce=oe[1],de=(0,a.useState)(r.NR5),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(!1),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=(0,a.useState)(),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=(ge[1],t),be=localStorage.getItem("resId"),_e=(0,a.useState)([]),Se=(0,s.Z)(_e,2),De=Se[0],Ce=Se[1];(0,a.useEffect)((function(){Ze()}),[]);var Ze=function(){v()({method:"GET",url:He+"/CommonMS/master/getMenus?loggedUserId=".concat(be)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Ce([e])}))}))},we=(0,a.useState)([{}]),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)(""),Te=(0,s.Z)(Pe,2),Ae=Te[0],Ee=Te[1];console.log(Ae);var Re=(0,a.useState)(""),Fe=(0,s.Z)(Re,2),Ye=Fe[0],Oe=Fe[1];console.log(Ye);var He=c.N.baseUrl;(0,a.useEffect)((function(){v().get(He+"/ProjectMS/project/projectinfo?ProjectId=".concat(t)).then((function(e){var t=e.data;Ie(t),je(!1),console.log(e.data),Ee(e.data[0].planned_start_dt),Oe(e.data[0].planned_end_dt)})).catch((function(e){}))}),[Ye]);var Le=(0,a.useState)([{}]),Be=(0,s.Z)(Le,2),Ue=Be[0],qe=Be[1];return console.log(Ue.projectCode),(0,a.useEffect)((function(){v().get(He+"/ProjectMS/project/projectCode?ProjectId=".concat(t)).then((function(e){var t=e.data;qe(t)})).catch((function(e){}))}),[]),console.log(ye+"line no 7"),(0,u.jsxs)("div",{children:[fe?(0,u.jsx)(D.Z,{}):"",ke.map((function(e){return(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:e.project_name})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Global Dashboard"})}),(0,u.jsx)("div",{className:"childThree"})]})})),(0,u.jsx)(k.Z,{routes:De,currentScreenName:["Projects","Open","Monitoring","Global Dashboard"]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:" my-3",children:(0,u.jsxs)("button",{className:"btn btn-primary float-end ",children:[(0,u.jsx)(r.veA,{})," Download as PDF"]})}),(0,u.jsx)("div",{className:"col-md-12 no-padding ",id:"fullPrjInfo",children:ke.map((function(e){return(0,u.jsx)("div",{className:"projGlance",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Project Name"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"pname",children:e.project_name})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Business Unit"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"bunit",children:e.business_unit})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Customer"}),(0,u.jsx)("span",{className:"col-1  p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"cmer",children:e.customer})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Sub Practice"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"spractice",children:e.sub_practice})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Architect"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"troles",children:e.role})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Project Manager"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7",id:"prjManager",children:e.prj_manager})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4 no-padding",children:"Delivery Manager"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7",id:"delManager",children:e.del_manager})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Unit Head"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7",id:"uhead",children:e.unit_head})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Current Phase"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"currPhase",children:e.curr_phase})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Billing Model"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"bilModel",children:e.cont_terms})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Project Type"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"pType",children:e.category})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Execution Methodology"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"emethods",children:e.prj_exe})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Start Date"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"sDate",children:e.planned_start_dt})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"End Date- Contracted"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"eDate",children:e.planned_end_dt})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"End Date- Estimated"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"eeDate",children:e.est_planned_end_dt})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"% Complete"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7",id:"pComplete",children:e.pComplete})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Billable Utilization %"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"bUtil",children:e.billable_utilized})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4 no-padding",children:"Planned FTE"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"pFte",children:e.planned_team_size})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Actual FTE"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-7 ",id:"aFte",children:e.actual_team_size})]})})}),(0,u.jsx)("div",{className:"col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-4  no-padding",children:"Expense Billable"}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("span",{className:"col-7",id:"eBillable",children:e.ebillable})]})})})]})})}))}),(0,u.jsx)("br",{}),ke.map((function(e){return(0,u.jsx)("div",{className:"col-md-12 my-1",children:(0,u.jsxs)("div",{className:"statusMsg warning",children:[(0,u.jsx)("span",{className:"bold",children:(0,u.jsx)(Q.BrF,{})}),"Note: Values in the table are between",(0,u.jsx)("span",{className:"",children:e.planned_start_dt})," and"," ",(0,u.jsxs)("span",{className:"",children:[" ",e.planned_end_dt]})," except contracted value."]})})})),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)(J,{pid:Ne,sd:Ae,ed:Ye})}),(0,u.jsx)("div",{className:"group mb-1 customCard ",children:(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",onClick:function(){o(!i),Y(i?r.UdN:r.NR5)},children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Accomplishments and Planned Activities"}),(0,u.jsx)("div",{onClick:function(){o(!i),Y(i?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:F})})]})}),(0,u.jsx)(p.V9,{visible:!i,children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)(X,{pid:Ne})}),(0,u.jsx)("div",{className:"col-md-6",children:(0,u.jsx)($,{pid:Ne})})]})}),(0,u.jsx)("div",{className:"group mb-1 customCard",children:(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",onClick:function(){f(!h),B(h?r.UdN:r.NR5)},children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Risks"}),(0,u.jsx)("div",{onClick:function(){f(!h),B(h?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:L})})]})}),(0,u.jsx)(p.V9,{visible:!h,children:(0,u.jsx)(ee,{pid:Ne})}),(0,u.jsx)("div",{className:"group mb-1 customCard",children:(0,u.jsxs)("div",{onClick:function(){y(!g),z(g?r.UdN:r.NR5)},className:"col-md-12 collapseHeader",children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Issues"}),(0,u.jsx)("div",{onClick:function(){y(!g),z(g?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:V})})]})}),(0,u.jsx)(p.V9,{visible:!g,children:(0,u.jsx)(te,{pid:Ne})}),(0,u.jsx)("div",{className:"group mb-1 customCard",children:(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",onClick:function(){S(!_),le(_?r.UdN:r.NR5)},children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Dependencies"}),(0,u.jsx)("div",{onClick:function(){S(!_),le(_?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:W})})]})}),(0,u.jsx)(p.V9,{visible:!_,children:(0,u.jsx)(ne,{pid:Ne})}),(0,u.jsx)("div",{className:"group mb-1 customCard",children:(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",onClick:function(){M(!w),ce(w?r.UdN:r.NR5)},children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Scope Change History and Indicator"}),(0,u.jsx)("div",{onClick:function(){M(!w),ce(w?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:re})})]})}),(0,u.jsx)(p.V9,{visible:!w,children:(0,u.jsx)(se,{pid:Ne})}),(0,u.jsx)("div",{className:"group mb-1 customCard",children:(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",onClick:function(){A(!T),pe(T?r.UdN:r.NR5)},children:[(0,u.jsx)("h2",{className:"chevron-icon",children:"Events"}),(0,u.jsx)("div",{onClick:function(){A(!T),pe(T?r.UdN:r.NR5)},children:(0,u.jsx)("span",{className:"chevron-icon",children:me})})]})}),(0,u.jsx)(p.V9,{visible:!T,children:(0,u.jsx)(ae,{pid:Ne})})]})]})},ie=n(11087),oe=n(29718),re=n.n(oe),ce=n(12003),de=n.n(ce);n(6298)(re());var ue=function(e){var t,n=e.getGraphData,s=e.openIQA,l=e.setOpenIQA,i=e.graphData,o=e.dat,r=N()(null===(t=i[0])||void 0===t?void 0:t.actual_start_date).format("MMM,YY");console.log(o),(0,a.useEffect)((function(){n()}),[]);var c=[];i.map((function(e){c.push({name:"Total",color:"#7cb5ec",data:[parseFloat(e.total+". 0")]}),c.push({name:"Major",color:"#434348",data:[parseFloat(e.major)]}),c.push({name:"Minor",color:"#90ed7d",data:[parseFloat(e.minor)]}),c.push({name:"Observations",color:"#f7a35c",data:[parseFloat(e.medium)]}),c.push({name:"Recommendations",color:"#8085e9",data:[parseFloat(e.recommendations)]})}));var d=[];d.push(r),d.push(null===i||void 0===i?void 0:i.medium);var m={chart:{type:"column",width:750},title:{useHTML:!0,text:477===o?"QCR":478===o?"IQA":1272===o?"ISMS":1285===o?"CMMI":1284===o?"ISO":""},xAxis:{categories:d,crosshair:!0},yAxis:{allowDecimals:!1,min:0,title:{text:"Score"},labels:{overflow:"justify"}},tooltip:{formatter:function(){var e="<b>"+this.x+"</b><br/>";return this.points.forEach((function(t){e+='<span style="color:'.concat(t.series.color,'">').concat(t.series.name,"</span> : ").concat(t.y,"<br/>")})),e},shared:!0},credits:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:c};return(0,u.jsx)("div",{children:(0,u.jsxs)(p.Tk,{visible:s,size:"lg",className:"ui-dialog",onClose:function(){return l(!1)},children:[(0,u.jsx)(p.p0,{children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{children:"Project Details"})})}),(0,u.jsx)(p.sD,{children:(0,u.jsx)(de(),{highcharts:re(),options:m})})]})})};n(6298)(re());var me=function(e){var t,n=e.getGraphData,s=e.openQCR,l=e.setOpenQCR,i=e.graphData,o=e.Auditname;console.log("QCR chart will display");var r=N()(null===(t=i[0])||void 0===t?void 0:t.actual_start_date).format("MMM,YY");(0,a.useEffect)((function(){n()}),[]);var c=[];i.map((function(e){c.push({name:"Series 1",color:"#7cb5ec",data:[parseFloat(e.percentage)]})}));var d=[];d.push(r);var m={chart:{type:"line",width:700},title:{useHTML:!0,text:477===o?"QCR - Audit Chart":478===o?"IQA - Audit Chart":1272===o?"ISMS - Audit Chart":1285===o?"CMMI - Audit Chart":1284===o?"ISO - Audit Chart":""},xAxis:{categories:d,crosshair:!0},yAxis:{allowDecimals:!1,min:0,title:{text:"Percentage"},labels:{overflow:"justify"}},tooltip:{formatter:function(){return"<b>"+this.series.name+"</b><br/>QCR% = "+this.y+" <br/>"}},credits:{enabled:!1},plotOptions:{column:{pointPadding:.2,borderWidth:1}},series:c};return(0,u.jsx)("div",{children:(0,u.jsxs)(p.Tk,{visible:s,size:"lg",className:"ui-dialog",onClose:function(){return l(!1)},children:[(0,u.jsx)(p.p0,{children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"ft16",children:"Project Details"})})}),(0,u.jsx)(p.sD,{children:(0,u.jsx)("div",{className:"align center",children:(0,u.jsx)(de(),{highcharts:re(),options:m})})})]})})},pe=n(3479),he=n(46175),ve=n(41310);var fe=function(e){var t=(0,a.useState)([]),n=(0,s.Z)(t,2),l=n[0],i=n[1],o=(0,a.useState)(!1),r=(0,s.Z)(o,2),d=r[0],m=r[1],p=(0,a.useState)(!1),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)(0),g=(0,s.Z)(x,2),y=g[0],b=g[1],_=(0,a.useState)([]),S=(0,s.Z)(_,2),D=S[0],C=S[1],Z=(0,a.useState)(""),w=(0,s.Z)(Z,2),M=w[0],I=w[1],P=(0,a.useState)(""),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)([]),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=(0,a.useState)([]),L=(0,s.Z)(H,2),U=(L[0],L[1]),q=(0,a.useState)(null),V=(0,s.Z)(q,2),W=V[0],Q=V[1],J=e.projectId,X=(e.grp4Items,c.N.baseUrl),$=(0,a.useState)({global:{value:null,matchMode:K.a6.CONTAINS},representative:{value:null,matchMode:K.a6.IN},status:{operator:K.pg.OR,constraints:[{value:null,matchMode:K.a6.EQUALS}]}}),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=function(e){var t=X+"/VendorMS/vendor/downloadFile?documentId=".concat(null===e||void 0===e?void 0:e.documentId,"&svnRevision=").concat(null===e||void 0===e?void 0:e.svn_revision);v()({url:t,method:"GET",responseType:"blob"}).then((function(t){var n=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=n,s.setAttribute("download",e.filename),document.body.appendChild(s),s.click()}))};(0,a.useEffect)((function(){se()}),[]);var ae=localStorage.getItem("resId"),le=(0,a.useState)([]),oe=(0,s.Z)(le,2),re=oe[0],ce=oe[1];(0,a.useEffect)((function(){de()}),[]);var de=function(){v()({method:"GET",url:X+"/CommonMS/master/getMenus?loggedUserId=".concat(ae)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&ce([e])}))}))};(0,a.useEffect)((function(){v()({method:"get",url:X+"/ProjectMS/Audit/getAuditLogDetails?projectId=".concat(J)}).then((function(e){i(e.data)})).then((function(e){})),v()({method:"get",url:X+"/ProjectMS/Audit/getProjectName?projectId=".concat(J)}).then((function(e){var t=e.data;O(t)})).catch((function(e){})),v()({method:"get",url:X+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(J)}).then((function(e){var t=e.data;U(t)})).catch((function(e){}))}),[]);var fe=function(){v()({method:"get",url:X+"/ProjectMS/Audit/getGraphDetails?gid=".concat(y)}).then((function(e){var t=e.data;C(t),b(0)})).then((function(e){}))},je=function(e){return(0,u.jsxs)(u.Fragment,{children:[" ",e.auditType]})},xe=function(e){return(0,u.jsxs)(u.Fragment,{children:[" ",null===e.plandStartDate?"":N()(e.plandStartDate).format("DD-MMM-yyyy")]})},ge=(0,u.jsxs)(he.E,{children:[(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{header:"Last Audit Details",colSpan:6,style:{textAlign:"center"}}),(0,u.jsx)(z.s,{header:"Schedule Details",colSpan:1})]}),(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{header:"Audit Type",field:"pastAuditType",body:je}),(0,u.jsx)(z.s,{header:"Planned Date",field:"plandStartDate",body:xe}),(0,u.jsx)(z.s,{header:"Auditor Name",field:"auditName"}),(0,u.jsx)(z.s,{header:"Trend",field:"Result"}),(0,u.jsx)(z.s,{header:"Reports",field:"documentId"}),(0,u.jsx)(z.s,{header:"Audit Status",field:"status"}),(0,u.jsx)(z.s,{header:"Date",field:"scheduledDate"})]})]}),ye=(0,a.useState)(""),Ne=(0,s.Z)(ye,2),be=Ne[0],_e=Ne[1],Se=function(){te.global&&te.global.value;return(0,u.jsx)("div",{style:{marginLeft:"85%"},children:(0,u.jsxs)("span",{className:"p-input-icon-left",children:[(0,u.jsx)("i",{className:"pi pi-search"}),(0,u.jsx)(G.o,{type:"search",style:{float:"right"},value:be,onChange:function(e){_e(e.target.value)},placeholder:"Keyword Search"})]})})}(),De=l.filter((function(e){return Object.values(e).some((function(e){return String(e).toLowerCase().includes(be.toLowerCase())}))}));return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:Y})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Audit Log"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:re,currentScreenName:["Projects","Open","Monitoring","Audit Log"]}),(0,u.jsx)("div",{className:"customercard darkHeader mt-2",children:(0,u.jsxs)(B.w,{className:"primeReactDataTable invoicingSearchTable ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:De,paginator:!0,rows:25,header:Se,filters:te,onFilter:function(e){return ne(e.filters)},selection:W,onSelectionChange:function(e){return Q(e.value)},dataKey:"id",showGridlines:!0,stateStorage:"session",stateKey:"dt-state-demo-local",responsiveLayout:"scroll",emptyMessage:"No Records found.",headerColumnGroup:ge,children:[(0,u.jsx)(z.s,{header:"Audit Type",field:"pastAuditType",body:je}),(0,u.jsx)(z.s,{header:"Planned Date",field:"plandStartDate",body:xe}),(0,u.jsx)(z.s,{header:"Auditor Name",field:"auditName"}),(0,u.jsx)(z.s,{header:"Trend",field:"Result",body:function(e){return(0,u.jsx)(u.Fragment,{children:477===e.pastAuditType?(0,u.jsx)("b",{children:(0,u.jsx)(ie.rU,{style:{textDecoration:"underline"},onClick:function(){!function(e,t){j(!0),b(e),E(t)}(e.id,e.pastAuditType)},children:e.Result+"%"})}):(0,u.jsx)("b",{children:(0,u.jsx)(ie.rU,{style:{textDecoration:"underline"},onClick:function(){!function(e,t){I(t),m(!0),b(e)}(e.id,e.pastAuditType)},children:e.Result})})})},align:"right"}),(0,u.jsx)(z.s,{header:"Reports",field:"documentId",body:function(e){return(0,u.jsx)(u.Fragment,{children:null==e.documentId?(0,u.jsx)(pe.vrJ,{className:"disableField",size:"2em",disabled:!0}):(0,u.jsx)("a",{children:(0,u.jsx)(pe.vrJ,{onClick:function(){se(e)},size:"2em",style:{color:"#2e88c5"}})})})},align:"center"}),(0,u.jsx)(z.s,{header:"Audit Status",field:"status"}),(0,u.jsx)(z.s,{header:"Date",body:function(e){return(0,u.jsx)(u.Fragment,{children:null===e.scheduledDate?"":N()(e.scheduledDate).format("DD-MMM-yyyy")})}})]})}),d?(0,u.jsx)(ue,{getGraphData:fe,openIQA:d,setOpenIQA:m,graphData:D,setGraphData:C,dat:M}):"",f?(0,u.jsx)(me,{getGraphData:fe,openQCR:f,setOpenQCR:j,graphData:D,setGraphData:C,Auditname:A}):""]})},je=n(12860);var xe=function(e){var t=(0,a.useRef)([]),n=e.addAndEditPopup,i=e.setaddAndEditPopup,d=e.type,m=e.editId,h=e.editedData,f=e.getScopeChanges,j=e.projectId,x=e.setAddmsg,y=e.setEditAddmsg,S=(0,a.useState)(h),D=(0,s.Z)(S,2),C=D[0],Z=D[1],w=(0,a.useState)(0),M=(0,s.Z)(w,2),k=(M[0],M[1]),I=(0,a.useState)(!1),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(null),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=c.N.baseUrl;return(0,a.useEffect)((function(){Y("add"==d?null:N()(h.change_req_date)._d)}),[h],[C]),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)(p.Tk,{alignment:"center",backdrop:"static",size:"xs",visible:n,onClose:function(){return i(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:"add"==d?(0,u.jsx)("span",{className:"",children:" Add/Edit New Project Scope"}):(0,u.jsx)("span",{className:"",children:" Add/Edit Project Scope"})})}),(0,u.jsx)("div",{children:T?(0,u.jsxs)("div",{className:" ml-2 mr-2 statusMsg error",children:[" ",(0,u.jsxs)("span",{className:"error-block",children:[(0,u.jsx)(b.CSE,{}),"\xa0Please enter valid value for highlighted fields."]})]}):""}),(0,u.jsx)(p.sD,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group row mb-2",children:[(0,u.jsx)("label",{className:"col-5",children:"Description of Changes"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 textfield",ref:function(e){t.current[0]=e},children:"add"==d?(0,u.jsx)("input",{type:"text",placeholder:"Description of Change",style:{fontStyle:"normal"},name:"description",onKeyDown:function(e){"Space"!==e.code||C.description||e.preventDefault()},required:!0,onChange:function(e){return Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"description",e.target.value.trim()))}))}}):(0,u.jsx)("input",{type:"text",placeholder:"Description of Change",style:{fontStyle:"normal"},name:"description",onKeyDown:function(e){"Space"!==e.code||C.description||e.preventDefault()},required:!0,defaultValue:h.description,onChange:function(e){return Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"description",e.target.value.trim()))}))}})})]})}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group row mb-2",children:[(0,u.jsx)("label",{className:"col-5",children:"Change Requested Date"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 datepicker",ref:function(e){t.current[1]=e},children:"add"==d?(0,u.jsx)(g(),{name:"change_req_date",selected:F,showMonthDropdown:!0,dateFormat:"dd-MMM-yyyy",showYearDropdown:!0,dropdownMode:"select",defaultValue:"",onChange:function(e){Y(e),Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"change_req_date",N()(e).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()}}):(0,u.jsx)(g(),{name:"change_req_date",dateFormat:"dd-MMM-yyyy",selected:F,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",defaultValue:N()(h.change_req_date)._d,onChange:function(e){Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"change_req_date",N()(e).format("yyyy-MM-DD")))})),Y(e)},onKeyDown:function(e){e.preventDefault()}})})]})}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"form-group row mb-2",children:[(0,u.jsx)("label",{className:"col-5",children:"Financial Impact"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6 textfield",ref:function(e){t.current[2]=e},children:"add"==d?(0,u.jsx)("input",{type:"text",placeholder:"Financial Impact",style:{fontStyle:"normal"},name:"financial_impact",onKeyDown:function(e){"Space"!==e.code||C.financial_impact||e.preventDefault()},required:!0,onChange:function(e){return Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"financial_impact",e.target.value.trim()))}))}}):(0,u.jsx)("input",{type:"text",placeholder:"Financial Impact",style:{fontStyle:"normal"},name:"financial_impact",onKeyDown:function(e){"Space"!==e.code||C.financial_impact||e.preventDefault()},required:!0,defaultValue:h.financial_impact,onChange:function(e){return Z((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"financial_impact",e.target.value.trim()))}))}})})]})}),(0,u.jsx)("div",{className:"col-md-12",align:"center",children:"add"==d?(0,u.jsxs)("button",{type:"button",title:"Save",className:"btn btn-primary",onClick:function(){var e=(0,_.Z)(t);!0===e&&A(!0),e||v()({method:"post",url:O+"/ProjectMS/ProjectScopeChange/postScopeChanges",data:{id:null,projectId:j,description:C.description,changeReqDate:C.change_req_date,financialImpact:C.financial_impact},headers:{"Content-Type":"application/json"}}).then((function(){k(),i(!1),f(),x(!0),setTimeout((function(){x(!1)}),1e3)}))},children:[(0,u.jsx)(r.TvB,{}),"Save"]}):(0,u.jsxs)("button",{type:"button",title:"Save",className:"btn btn-primary",onClick:function(){var e=(0,_.Z)(t);!0===e&&A(!0),e||(v()({method:"post",url:O+"/ProjectMS/ProjectScopeChange/postScopeChanges",data:{id:m,projectId:j,description:C.description,changeReqDate:N()(C.change_req_date).format("yyyy-MM-DD"),financialImpact:C.financial_impact}}).then((function(e){f(),k(),i(!1),y(!0),(0,je.Z)("type")})),setTimeout((function(){y(!1)}),1e3))},children:[(0,u.jsx)(r.TvB,{}),"Save"]})})]})})]})})};var ge=function(e){var t,n=e.projectId,i=e.grp4Items,d=i.find((function(e){return"Scope Changes"===e.display_name})),m=(0,a.useState)([]),h=(0,s.Z)(m,2),f=h[0],j=h[1],x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],_=g[1],S=(0,a.useState)([]),w=(0,s.Z)(S,2),I=w[0],P=w[1],T=c.N.baseUrl,E=(0,a.useState)(!1),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=(0,a.useState)(" "),H=(0,s.Z)(O,2),B=H[0],q=H[1],V=(0,a.useState)(!1),z=(0,s.Z)(V,2),G=z[0],K=z[1],W=(0,a.useState)(!1),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)("add"),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(!1),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue=(0,a.useState)(!1),me=(0,s.Z)(ue,2),pe=me[0],he=me[1],ve=(0,a.useState)(),fe=(0,s.Z)(ve,2),je=fe[0],ge=fe[1],ye=(0,a.useState)([]),Ne=(0,s.Z)(ye,2),be=Ne[0],_e=Ne[1],Se=(0,a.useState)(!1),De=(0,s.Z)(Se,2),Ce=De[0],Ze=De[1],we=(0,a.useState)(!1),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useRef)(null),Te=localStorage.getItem("resId"),Ae=(0,a.useState)([]),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1];(0,a.useEffect)((function(){Ye()}),[]);var Ye=function(){v()({method:"GET",url:T+"/CommonMS/master/getMenus?loggedUserId=".concat(Te)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Fe([e])}))}))},Oe={id:null,description:"",change_req_date:"",financial_impact:""},He=(0,a.useState)(),Le=(0,s.Z)(He,2),Be=(Le[0],Le[1]),Ue=(0,a.useState)(Oe),qe=(0,s.Z)(Ue,2),Ve=qe[0],ze=qe[1];(0,a.useEffect)((function(){}),[te]);var Ge=(0,a.useState)(localStorage.getItem("selectedValue")||""),Ke=(0,s.Z)(Ge,2),We=Ke[0],Qe=Ke[1],Je=function(){Ie(!1),Pe.current=new AbortController,v()({method:"get",url:T+"/ProjectMS/ProjectScopeChange/getProjectScopeChanges?pid=".concat(n),signal:Pe.current.signal}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].SNo=n+1,t[n].change_req_date=null==t[n].change_req_date?" ":N()(t[n].change_req_date).format("DD-MMM-yyyy");P(["Actions"]),Ie(!1),1==i[12].is_write?j([{description:"Description Of Change",change_req_date:"Date",financial_impact:"Financial Impact",Actions:"Actions"}].concat(t)):j([{description:"Description Of Change",change_req_date:"Date",financial_impact:"Financial Impact"}].concat(t)),setTimeout((function(){Ie(!1)}),1e3)}))};(0,a.useEffect)((function(){Je()}),[]);var Xe=function(e){I[0];return(0,u.jsx)("div",{align:"center",children:(0,u.jsxs)(u.Fragment,{children:[1==i[12].is_write?(0,u.jsx)(b.QML,{className:"disabled ellipsis","data-toggle":"tooltip",title:"Edit Scope",color:"orange",type:"edit",style:{pointerEvents:"none"},size:"1.2em",onClick:function(){ne(e),ge(e.id),X(!0),ie("edit")}}):""," ","\xa0",1==i[12].is_write?(0,u.jsx)(b.YK6,{className:"ellipsis ","data-toggle":"tooltip",title:"Delete Scope",color:"orange",type:"delete",cursor:"pointer",onClick:function(){Y(!0),q(e.id),ie("delete")}}):""]})})},$e=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.change_req_date,children:e.change_req_date})},et=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.description,children:e.description})},tt=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.financial_impact,children:e.financial_impact})},nt=null===(t=Object.keys(y))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(C.sgG,{sortable:!0,body:"Actions"==e?Xe:"change_req_date"==e&&$e||"description"==e&&et||"financial_impact"==e&&tt,field:e,header:y[e]},e)}));(0,a.useEffect)((function(){f[0]&&_(JSON.parse(JSON.stringify(f[0])))}),[f]);var st=function(){v()({method:"delete",url:T+"/ProjectMS/ProjectScopeChange/deleteProjectScopeChanges?id=".concat(B)}).then((function(e){Je(),Y(!1),K(!0),setTimeout((function(){K(!1)}),1e3)}))};function at(e){var t=e.deletePopup,n=e.setDeletePopup;return(0,u.jsx)("div",{children:(0,u.jsx)(L(),{children:(0,u.jsxs)(p.Tk,{alignment:"center",backdrop:"static",visible:t,size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Scope"})})}),(0,u.jsxs)(p.sD,{children:["Are you sure to delete Scope Change ?",(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{className:"btn btn-primary",title:"Delete",onClick:function(){st()},children:[(0,u.jsx)(U.UQg,{})," Delete"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",title:"Cancel",onClick:function(){n(!1)},children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"," "]})]})]})]})})})}return(0,a.useEffect)((function(){v()({method:"get",url:T+"/ProjectMS/Audit/getProjectName?projectId=".concat(n)}).then((function(e){var t=e.data;_e(t)}))}),[]),(0,u.jsxs)("div",{children:[ke?(0,u.jsx)(D.Z,{handleAbort:function(){Pe.current&&Pe.current.abort(),Ie(!1)}}):"",G?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{})," Project Scope Deleted successfully"]}):"",ce?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{})," Project Scope Saved successfully"]}):"",pe?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{})," Project Scope Updated successfully"]}):"",Ce?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{})," Project Scope Updated successfully"]}):"",(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:be})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Scope Change and History Indicator"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:Re,currentScreenName:["Projects","Open","Monitoring","Scope Changes"]}),(0,u.jsx)("div",{className:"group mb-3 customCard",children:(0,u.jsx)("div",{className:"group-content row",children:(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsx)("label",{htmlFor:"name",children:"Project Scope Indicator"}),(0,u.jsxs)("select",{value:We,onChange:function(e){var t=e.target.value;Qe(t),localStorage.setItem("selectedValue",t),Be(e.target.value),Ie(!1),setTimeout((function(){Ie(!1),Ze(!0)}),1e3),setTimeout((function(){Ze(!1)}),2e3)},children:[(0,u.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,u.jsx)("option",{value:"Green",children:"Green"}),(0,u.jsx)("option",{value:"Orange",children:"Orange"}),(0,u.jsx)("option",{value:"Red",children:"Red"})]})]})})}),(0,u.jsxs)("div",{className:"group mb-3 customCard",children:[(0,u.jsx)(A.Z,{data:f,linkColumns:I,dynamicColumns:nt,headerData:y,setHeaderData:_,rows:10}),(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:1==(null===d||void 0===d?void 0:d.is_write)?(0,u.jsxs)("button",{type:"Add",title:"Add",className:"btn btn-primary",onClick:function(){X(!0),ie("add")},children:[(0,u.jsx)(r.wEH,{}),"Add"]}):""}),J?(0,u.jsx)(xe,{addAndEditPopup:J,handleChange:function(e){var t=e.target,n=t.id,s=t.value;ze((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))}))},setaddAndEditPopup:X,type:le,editedData:te,setEditedData:ne,getScopeChanges:Je,editId:je,data1:Oe,data:f,setAddmsg:de,setEditAddmsg:he,formData:Ve,setFormData:Ve,projectId:n}):"",F?(0,u.jsx)(at,{deletePopup:F,setDeletePopup:Y,editId:je}):""]})]})},ye=n(43648),Ne=n(38596);var be=function(e){var t,n=e.openPopup,l=e.setOpenPopup,i=(e.data,e.updateId),o=(e.reviewerId,e.getData),r=(e.statusId,e.grp4Items),d=(0,a.useState)([]),m=(0,s.Z)(d,2),h=(m[0],m[1]),f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=j[1],y=(0,a.useState)([]),_=(0,s.Z)(y,2),S=(_[0],_[1]),D=(0,a.useState)([]),C=(0,s.Z)(D,2),w=C[0],M=(C[1],(0,a.useState)([])),k=(0,s.Z)(M,2),I=k[0],P=k[1],T=(localStorage.getItem("resId"),(0,a.useState)([])),E=(0,s.Z)(T,2),R=(E[0],E[1]),F=c.N.baseUrl,Y=(0,a.useState)(!1),O=(0,s.Z)(Y,2),H=O[0],L=(O[1],(0,a.useState)([])),B=(0,s.Z)(L,2),U=(B[0],B[1],(0,a.useState)(!1)),q=(0,s.Z)(U,2),V=q[0],G=q[1],K=(0,a.useState)([]),W=(0,s.Z)(K,2),Q=(W[0],W[1],(0,a.useState)(!1)),J=(0,s.Z)(Q,2),X=J[0],$=(J[1],(0,a.useState)([])),ee=(0,s.Z)($,2),te=(ee[0],ee[1]),ne=(0,a.useState)({id:"",action_status:"",updated_by_id:""}),se=(0,s.Z)(ne,2),ae=se[0],le=se[1],ie=(0,a.useState)(ae),oe=(0,s.Z)(ie,2),re=(oe[0],oe[1]),ce=(0,a.useState)([]),de=(0,s.Z)(ce,2),ue=(de[0],de[1],(0,a.useState)([])),me=(0,s.Z)(ue,2),pe=(me[0],me[1],(0,a.useState)([])),he=(0,s.Z)(pe,2),ve=(he[0],he[1],(0,a.useState)(!1)),fe=(0,s.Z)(ve,2),je=fe[0],xe=(fe[1],(0,a.useState)(!1)),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=ge[1],be=(0,a.useState)([{}]),_e=(0,s.Z)(be,2),Se=(_e[0],_e[1]),De=(0,a.useState)([]),Ce=(0,s.Z)(De,2),Ze=(Ce[0],Ce[1],function(){v().get(F+"/ProjectMS/project/projectreviewlogTableInfo?ProjectId=".concat(i)).then((function(e){var t=e.data,n=[];t.forEach((function(e){var t={value:e.id};n.push(t),h(n)}));for(var s=0;s<t.length;s++)t[s].SNo=s+1;var a=[{SNo:"S.No",action:"Action",date_created:"Created Date",due_date:"Due Date",completed_date:"Completed Date",reviewer_comments:"Reviewer Comments",Name:"Created By"}];te(t[0].action_status),r[11].is_write,g(a.concat(t)),Se(t),le(t)}))});(0,a.useEffect)((function(){Ze()}),[]);var we=(0,a.useState)([]),Me=(0,s.Z)(we,2);Me[0],Me[1],(0,a.useEffect)((function(){x[0]&&P(JSON.parse(JSON.stringify(x[0])))}),[x]);var ke=function(e){return(0,u.jsx)(u.Fragment,{children:1==r[11].is_write?(0,u.jsx)("div",{style:{textAlign:"center",cursor:"not-allowed"},children:(0,u.jsx)(b.YK6,{"data-toggle":"tooltip",title:"Delete"})}):""})},Ie=function(e){return(0,u.jsx)(u.Fragment,{children:1==r[11].is_write?(0,u.jsxs)("select",{id:"action_status",onChange:function(t){re(t.target.value),R(e.id)},defaultValue:e.action_status,disabled:!0,children:[(0,u.jsx)("option",{value:"1058",selected:"1058"==re.action_status,children:"New"}),(0,u.jsx)("option",{value:"1059",selected:"1059"==re.action_status,children:"In Progress"}),(0,u.jsx)("option",{value:"1060",selected:"1060"==re.action_status,children:"Completed"})]}):(0,u.jsxs)("select",{id:"action_status",defaultValue:e.action_status,disabled:!0,children:[(0,u.jsx)("option",{value:"1058",selected:"1058"==re.action_status,children:"New"}),(0,u.jsx)("option",{value:"1059",selected:"1059"==re.action_status,children:"In Progress"}),(0,u.jsx)("option",{value:"1060",selected:"1060"==re.action_status,children:"Completed"})]})})},Pe=function(e){return(0,u.jsx)("div",{title:e.Name,children:e.Name})},Te=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.reviewer_comments,children:e.reviewer_comments})},Ae=function(e){return(0,u.jsx)("div",{title:N()(e.date_created).format("DD-MMM-YYYY"),children:N()(e.date_created).format("DD-MMM-YYYY")})},Ee=function(e){return(0,u.jsx)("div",{title:N()(e.due_date).format("DD-MMM-YYYY"),children:N()(e.due_date).format("DD-MMM-YYYY")})},Re=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.action,children:e.action})},Fe=function(e){return(0,u.jsx)("span",{style:{textAlign:"center",marginLeft:"45%"},children:e.SNo})},Ye=null===(t=Object.keys(I))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(z.s,{sortable:!0,body:"id"==e?ke:"action_status"==e?Ie:"Name"==e?Pe:"date_created"==e?Ae:"due_date"==e?Ee:"action"==e?Re:"reviewer_comments"==e?Te:"SNo"==e&&Fe,field:e,header:I[e]},e)}));function Oe(e){var t=e.deletePopup,n=e.setDeletePopup,s=e.deleteAction;return(0,u.jsx)("div",{className:"deletePopUpReviewLog",children:(0,u.jsxs)(p.Tk,{visible:t,size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Confirmation"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("p",{children:"Are you sure you want to delete the Action Item ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{style:{border:"1px solid black"},type:"delete",className:"btn",onClick:function(){s(),n(!1)},children:[" ","Yes"," "]}),(0,u.jsxs)("button",{style:{border:"1px solid black"},type:"button",className:"btn",onClick:function(){n(!1)},children:[" ","No"," "]})]})]})]})})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)(p.Tk,{visible:n,size:"xl",className:" ui-dialog",onClose:function(){return l(!1)},children:[(0,u.jsx)(p.p0,{className:"",style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:" Review Details "})})}),(0,u.jsx)(p.sD,{children:(0,u.jsxs)("div",{children:[je?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(Z.hXj,{}),"\xa0 Action status saved successfully"]})}):"",!0===X?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(b.CSE,{}),"\xa0 please change the status before Saving"]})}):"",H?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(b.CSE,{}),"\xa0 Action status saved successfully"]})}):"",ye?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(Z.I2T,{}),"\xa0 Action status Deleted successfully"]})}):"",(0,u.jsx)("div",{children:(0,u.jsx)(A.Z,{data:x,rows:10,dynamicColumns:Ye,headerData:I,setHeaderData:P})}),(0,u.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:" "})]})})]}),V?(0,u.jsx)(Oe,{deletePopup:V,setDeletePopup:G,deleteAction:function(){Ne(!1),v().delete(F+"/ProjectMS/project/deleteStatusItem?id=".concat(w)).then((function(e){var t=e.data;S(t),Ze(),o(),Ne(!0),setTimeout((function(){Ne(!1)}),3e3)}))}}):""]})};n(41980),n(39122),n(31896),n(81975);var _e=function(e){var t,n=(0,a.useState)(!1),l=(0,s.Z)(n,2),i=l[0],o=l[1],r=(0,a.useState)(!1),d=(0,s.Z)(r,2),m=(d[0],d[1],(0,a.useState)([])),h=(0,s.Z)(m,2),f=h[0],j=h[1],x=(0,a.useState)(),g=(0,s.Z)(x,2),y=g[0],N=g[1],b=(0,a.useState)([]),_=(0,s.Z)(b,2),S=_[0],D=_[1],C=(0,a.useState)([]),Z=(0,s.Z)(C,2),w=Z[0],M=Z[1],I=(0,a.useState)([]),P=(0,s.Z)(I,2),T=P[0],E=P[1],R=(0,a.useState)([]),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=c.N.baseUrl,L=(0,a.useState)([]),B=(0,s.Z)(L,2),U=B[0],q=B[1],V=(0,a.useState)(!1),G=(0,s.Z)(V,2),K=G[0],W=G[1],Q=e.projectId,J=e.grp4Items,X=(0,a.useState)([{}]),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,a.useState)([{}]),se=(0,s.Z)(ne,2),ae=(se[0],se[1],(0,a.useState)([])),le=(0,s.Z)(ae,2),oe=(le[0],le[1]),re=localStorage.getItem("resId"),ce=(0,a.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],me=de[1];(0,a.useEffect)((function(){pe()}),[]);var pe=function(){v()({method:"GET",url:H+"/CommonMS/master/getMenus?loggedUserId=".concat(re)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&me([e])}))}))},he=function(){v().get(H+"/ProjectMS/project/projectreviewloginfo?ProjectId=".concat(Q)).then((function(e){var t=e.data;t.forEach((function(e,t){e.sno=t+1}));te([{sno:"S.No",review_dt:"Review Date",rev_type:"Type",reviewer:"Reviewer",actItems:"Action Items",docCount:"Report",comments:"Comments"}].concat(t))})).catch((function(e){console.log("Error :"+e)}))};(0,a.useEffect)((function(){he(),v()({method:"get",url:H+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(Q)}).then((function(e){var t=e.data;E(t)})).catch((function(e){}))}),[]);var ve=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.docCount,style:{cursor:"pointer",textAlign:"center",color:"#2E88C5"},onClick:function(){ye(),j(e.docId),N(e.svn_revision)},children:(0,u.jsx)("div",{style:{textAlign:"center",textDecoration:"underLine"},children:e.docCount})})})},fe=function(e){return(0,u.jsx)("span",{style:{textAlign:"center",marginLeft:"45%",width:"10px"},children:e.sno})},je=function(e){return(0,u.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.comments,children:e.comments})},xe=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.actItems,style:{cursor:"pointer",textAlign:"center",color:"#2E88C5"},onClick:function(){o(!0),D(e.prhId),M(e.reviewer),O(e.review_st)},children:(0,u.jsx)("div",{style:{textAlign:"center",textDecoration:"underLine"},children:0!=e.actItems?e.actItems:""})})})},ge=null===(t=Object.keys(U))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(z.s,{sortable:!0,body:"actItems"==e?xe:"docCount"==e?ve:"sno"==e?fe:"comments"==e&&je,field:e,header:U[e]},e)})),ye=function(){W(!0)};function _e(e){var t;var n=function(e){var t=H+"/VendorMS/vendor/downloadFile?documentId=".concat(r[0][0],"&svnRevision=").concat(y);v()({url:t,method:"GET",responseType:"blob"}).then((function(t){var n=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=n,s.setAttribute("download",e.file_name),document.body.appendChild(s),s.click()}))};(0,a.useEffect)((function(){n()}),[]);var s=(0,Ne.Z)({dialog:{position:"absolute",top:"250px",minHeight:"18%"},textField:{border:"1px solid rgb(159 13 13)"}})(),l=e.deletePopup,i=e.setDeletePopup,o=e.docId,r=null===o||void 0===o||null===(t=o.split(","))||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.split(":")}));return null===r||void 0===r||r.map((function(e){oe(e[1])})),(0,u.jsx)("div",{className:"reviewLogDeletePopUp",children:(0,u.jsxs)(p.Tk,{visible:l,size:"xs",className:"reviewLogDeletePopUp",onClose:function(){return i(!1)},maxWidth:"md",classes:{paper:s.dialog},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Documents"})})}),(0,u.jsx)(p.sD,{children:null==r?(0,u.jsx)(ie.rU,{"data-toggle":"tooltip",to:"/document/downloadFile?docume",target:"_blank",children:"undefined"}):null===r||void 0===r?void 0:r.map((function(e){return(0,u.jsxs)(ie.rU,{style:{cursor:"pointer"},onClick:function(){n(ee)},title:ee.file_name,"data-toggle":"tooltip",children:[" ",(0,u.jsx)("ul",{style:{textDecoration:"underLine",marginBottom:"0px"},children:e[1]},e[1])]})}))})]})})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:T.map((function(e){return(0,u.jsx)("div",{children:(0,u.jsx)("h2",{children:e.projectName})})}))}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Review Log"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:ue,currentScreenName:["Projects","Open","Monitoring","Review Log"]}),(0,u.jsx)(A.Z,{data:ee,rows:25,dynamicColumns:ge,headerData:U,setHeaderData:q}),i?(0,u.jsx)(be,{openPopup:i,setOpenPopup:o,headerdata:U,setHeaderdata:q,rows:25,getData:he,updateId:S,reviewerId:w,statusId:Y,grp4Items:J}):"",K?(0,u.jsx)(_e,{deletePopup:K,setDeletePopup:W,docId:f}):""]})},Se=n(11634),De=n(14651),Ce=n(93762),Ze=n(39126),we=n(40071),Me=n(41578);n(31052);var ke=function(e){var t,n=e.data,l=e.rows,i=e.value,r=e.dynamicColumns,c=e.headerData,d=e.setHeaderData,m=e.setCheckedData,p=e.setSelectedIds,h=e.checkboxSelect,v=e.setCheckboxSelect,f=(e.permissions,e.grp1Items),j=(e.selectedIds,(0,a.useState)([])),x=(0,s.Z)(j,2),g=x[0],y=x[1],N=(0,a.useState)([]),b=(0,s.Z)(N,2),_=b[0],S=b[1],D=(0,a.useState)([]),C=(0,s.Z)(D,2),Z=(C[0],C[1]);(0,a.useEffect)((function(){if(h&&h.length>0)h.map((function(e){return e.id}))}),[h]),(0,a.useRef)(null),(0,a.useEffect)((function(){y(JSON.parse(JSON.stringify(n)))}),[n]),(0,a.useEffect)((function(){if(g.length>0){d(g[0]),S(g.splice(1));var e=[],t=g[0];Object.keys(t).forEach((function(n){"StatusId"!=n&&e.push({title:t[n],dataKey:n})})),Z(e)}}),[g]);var w={contains:{value:null,matchMode:K.a6.CONTAINS}},M=(0,a.useState)({global:w.contains}),k=(0,s.Z)(M,2),I=k[0],P=k[1];(0,a.useEffect)((function(){P({global:w.contains})}),[c]);var T=(0,a.useState)(""),A=(0,s.Z)(T,2),E=A[0],R=A[1],F=function(e){var t=e.target.value,n=(0,o.Z)({},I);n.global.value=t,P(n),R(t)},Y=(0,u.jsx)("div",{className:"flex  flex-row-reverse",children:(0,u.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,u.jsx)("i",{className:"pi pi-search"}),(0,u.jsx)(G.o,{defaultValue:E,onChange:F,placeholder:"Keyword Search"})]})}),O=0===(null===h||void 0===h?void 0:h.length);return(0,u.jsx)("div",{className:"darkHeader",children:Object.keys(c).length>0&&(0,u.jsxs)(B.w,{paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],paginationrowsperpageoptions:[5,15,25,50],paginationcomponentoptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},value:_,paginator:!0,showGridlines:!0,rows:l,dataKey:"id",filters:I,selectionMode:"checkbox",selection:h,responsiveLayout:"scroll",header:Y,onSelectionChange:function(e){return function(e){var t=e.value;t.length>0&&v(t);var n=e.value,s=n.map((function(e){return e.id}));m("trackerscreensadder"==i?n:s[0]);var a=String(n.map((function(e){return e.id}))).replace(/,/g,";");m(a),v(e.value);var l=e.value.map((function(e){return e.id}));p(l)}(e)},className:" primeReactDataTable checkboxselect",children:[!0===(null===(t=f[4])||void 0===t?void 0:t.is_write)&&(0,u.jsx)(z.s,{selectionMode:(null===n||void 0===n?void 0:n.length)>0?"multiple":"",style:{paddingRight:"7px"},disabled:O}),r]})})},Ie=n(6748),Pe=n(99259),Te=n(66934),Ae=n(12065),Ee=n(99651),Re=n(41523),Fe=n(56125),Ye=n(27336),Oe=n(73728),He=(n(97931),n(63509));function Le(e){return(0,u.jsx)(Pe.Z,(0,o.Z)((0,o.Z)({fontSize:"inherit",className:"hierarchyCollapseIcon"},e),{},{children:(0,u.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function Be(e){return(0,u.jsx)(Pe.Z,(0,o.Z)((0,o.Z)({fontSize:"inherit",className:"hierarchyExpandIcon"},e),{},{children:(0,u.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function Ue(e){var t=(0,Ye.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,u.jsx)(Ye.q.div,{style:t,children:(0,u.jsx)(Fe.Z,(0,o.Z)({},e))})}var qe=(0,Te.ZP)((function(e){var t,n,s,l,i,r;return(0,u.jsx)("div",{children:(0,a.createElement)(Ee.Z,(0,o.Z)((0,o.Z)({},e),{},{key:String(null===e||void 0===e||null===(t=e.node)||void 0===t?void 0:t.id),nodeId:String(null===e||void 0===e||null===(n=e.node)||void 0===n?void 0:n.id),label:(0,u.jsx)(He.ZP,{title:null===e||void 0===e||null===(s=e.node)||void 0===s?void 0:s.folder_name,children:(0,u.jsx)("span",{children:null===e||void 0===e||null===(l=e.node)||void 0===l?void 0:l.folder_name})}),TransitionComponent:Ue}),Array.isArray(null===e||void 0===e||null===(i=e.node)||void 0===i?void 0:i.subRows)?null===e||void 0===e||null===(r=e.node)||void 0===r?void 0:r.subRows.map((function(e){return Ve(e)})):"")})}))((function(e){var t,n=e.theme;return t={},(0,l.Z)(t,"& .".concat(Re.Z.iconContainer),{"& .close":{opacity:.3}}),(0,l.Z)(t,"& .".concat(Re.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,Ae.Fq)(n.palette.text.primary,.4))}),t})),Ve=function(e){return(0,u.jsx)("div",{children:(0,u.jsx)(qe,{node:e})},String(null===e||void 0===e?void 0:e.id))};function ze(e){var t=e.defaultExpandedRows,n=e.data,s=e.SetDocFolderId,i=e.setLabel,r=e.projectId,c=(e.label,e.setAddVisible);(0,a.useEffect)((function(){setTimeout((function(){document.getElementsByClassName("MuiTreeItem-root")[0].children[0].click()}),1e3)}),[]);var d=function(e,t){var n=e.filter((function(e){return"SOW"!==e.folder_name}));return n.sort((function(e,n){var s=t.indexOf(e.folder_name),a=t.indexOf(n.folder_name);return-1!==s&&-1!==a?s-a:-1!==s?-1:-1!==a?1:e.folder_name.localeCompare(n.folder_name)})),n.filter((function(e){return e.folder_name==r?e.folder_name="Expense":""})),n}(function(e,t){t=(0,o.Z)({id:"id",parentId:"parent_id",children:"subRows"},t);var n={},s=[],a=t.children;return e.forEach((function(e){var s=e[t.id],i=e[t.parentId];n[s]=(0,o.Z)((0,o.Z)((0,l.Z)({},a,[]),e),n[s]),n[i]=n[i]||(0,l.Z)({},a,[]),n[i][a].push(n[s])})),Object.values(n).forEach((function(e){"undefined"===typeof e[t.id]&&s.push.apply(s,(0,O.Z)(e[a]))})),s}(n),["IA Support","PPM Development and Implementation","Expense","Expenses"]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Ie.Z,{"aria-label":"rich object",defaultExpanded:[t],defaultCollapseIcon:(0,u.jsxs)("div",{className:"iconContainer",children:[(0,u.jsx)(Le,{className:"hierarchyIcons"}),(0,u.jsx)(Oe.FYx,{className:"hierarchyIcons folder"})]}),defaultExpandIcon:(0,u.jsxs)("div",{className:"iconContainer",children:[(0,u.jsx)(Be,{className:"hierarchyIcons"}),(0,u.jsx)(Oe.FYx,{className:"hierarchyIcons folder"})]}),defaultEndIcon:(0,u.jsx)(Oe.FYx,{className:"hierarchyIcons folder"}),defaultParentIcon:(0,u.jsx)(Oe.FYx,{className:"hierarchyIcons folder"}),className:"hierarchyTree",onNodeSelect:function(e,t){s(t),c(!1),i(""),e.target.innerHTML.trim().startsWith("<path")?i(""):i(e.target.innerHTML)},children:d.map((function(e){return Ve(e)}))})})}var Ge=function(e){var t,n,i,d=c.N.baseUrl,m=(0,a.useState)([]),h=(0,s.Z)(m,2),f=(h[0],h[1]),j=(0,a.useState)([]),x=(0,s.Z)(j,2),g=(x[0],x[1]),y=(0,a.useState)(!1),_=(0,s.Z)(y,2),S=_[0],w=_[1],I=(0,a.useState)(!1),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(r.UdN),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=(0,a.useState)([]),H=(0,s.Z)(O,2),L=H[0],B=H[1],U=(0,a.useState)(!1),q=(0,s.Z)(U,2),V=q[0],z=q[1],G=(0,a.useState)([]),K=(0,s.Z)(G,2),W=K[0],Q=K[1],J=(0,a.useState)(!1),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=(0,a.useState)(!1),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)(!1),oe=(0,s.Z)(le,2),re=oe[0],ce=oe[1],de=(0,a.useState)(!1),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(" "),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=(0,a.useState)([]),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=ge[1],be=(0,a.useState)(""),_e=(0,s.Z)(be,2),Ie=_e[0],Pe=_e[1],Te=(0,a.useState)(""),Ae=(0,s.Z)(Te,2),Ee=Ae[0],Re=Ae[1],Fe=(0,a.useState)(!1),Ye=(0,s.Z)(Fe,2),Oe=Ye[0],He=Ye[1],Le=(0,a.useState)(!1),Be=(0,s.Z)(Le,2),Ue=Be[0],qe=Be[1],Ve=(0,a.useState)(!1),Ge=(0,s.Z)(Ve,2),Ke=Ge[0],We=Ge[1],Qe=(0,a.useState)(!1),Je=(0,s.Z)(Qe,2),Xe=Je[0],$e=Je[1],et=(0,a.useState)([]),tt=(0,s.Z)(et,2),nt=(tt[0],tt[1]),st=(0,a.useState)([{}]),at=(0,s.Z)(st,2),lt=at[0],it=at[1],ot=(0,a.useState)([]),rt=(0,s.Z)(ot,2),ct=(rt[0],rt[1]),dt=(0,a.useState)(!1),ut=(0,s.Z)(dt,2),mt=ut[0],pt=ut[1],ht=(0,a.useState)(!1),vt=(0,s.Z)(ht,2),ft=vt[0],jt=vt[1],xt=(0,a.useState)(!1),gt=(0,s.Z)(xt,2),yt=gt[0],Nt=gt[1],bt=(0,a.useState)(!1),_t=(0,s.Z)(bt,2),St=_t[0],Dt=_t[1],Ct=(0,a.useState)(!1),Zt=(0,s.Z)(Ct,2),wt=Zt[0],Mt=Zt[1],kt=(0,a.useState)(),It=(0,s.Z)(kt,2),Pt=(It[0],It[1]),Tt=(0,a.useState)([]),At=(0,s.Z)(Tt,2),Et=At[0],Rt=At[1],Ft=(0,a.useState)([]),Yt=(0,s.Z)(Ft,2),Ot=(Yt[0],Yt[1]),Ht=(0,a.useState)(""),Lt=(0,s.Z)(Ht,2),Bt=Lt[0],Ut=Lt[1],qt=(0,a.useState)(""),Vt=(0,s.Z)(qt,2),zt=Vt[0],Gt=Vt[1],Kt=(0,a.useState)([]),Wt=(0,s.Z)(Kt,2),Qt=Wt[0],Jt=Wt[1],Xt=(0,a.useState)(""),$t=(0,s.Z)(Xt,2),en=($t[0],$t[1]),tn=(0,a.useState)(!1),nn=(0,s.Z)(tn,2),sn=nn[0],an=nn[1],ln=(0,a.useState)(!1),on=(0,s.Z)(ln,2),rn=on[0],cn=on[1],dn=(0,a.useState)([]),un=(0,s.Z)(dn,2),mn=un[0],pn=un[1],hn=(0,a.useState)(!1),vn=(0,s.Z)(hn,2),fn=vn[0],jn=vn[1],xn=(0,a.useRef)(null),gn=(0,a.useState)(0),yn=(0,s.Z)(gn,2),Nn=yn[0],bn=yn[1],_n=localStorage.getItem("resId"),Sn=e.projectId,Dn=e.grp1Items,Cn=(0,a.useState)([]),Zn=(0,s.Z)(Cn,2),wn=Zn[0],Mn=Zn[1];(0,a.useEffect)((function(){v()({method:"GET",url:d+"/CommonMS/master/getMenus?loggedUserId=".concat(_n)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Mn([e])}))}))}),[]);var kn=zt,In="".concat(" Create Folder Under","  ").concat(kn),Pn=function(){v().get(d+"/VendorMS/vendor/getProjectDocuments?DocFolderId=".concat(Bt)).then((function(e){for(var t=e.data.map((function(e){return""===e.last_updated_by?(0,o.Z)((0,o.Z)({},e),{},{last_updated_by:"NA"}):e})),n=0;n<t.length;n++)t[n].file_name=null==t[n].file_name?"":t[n].file_name.split(".")[0],t[n].date_created=null==t[n].date_created?"":N().utc(t[n].date_created).format("DD-MMM-yyyy hh:mm:ss A"),t[n].last_updated=null==t[n].last_updated?"":N().utc(t[n].last_updated).format("DD-MMM-yyyy hh:mm:ss A"),t[n].app_revision=null==t[n].app_revision?"":parseFloat(t[n].app_revision).toFixed(1);var s=["app_revision"];ee(s),ae([""]),B([{file_name:"File Name",file_size:"File Size",app_revision:"Version",file_type:"File Type",date_created:"Created On",created_by:"Created By",last_updated:"Updated On",last_updated_by:"Updated By",Action:"Action"}].concat(t));var a=[],l=[];null===s||void 0===s||s.forEach((function(e){var t={label:e.id};a.push(t),f(a)})),null===s||void 0===s||s.forEach((function(e){var t={label:e.svn_revision};l.push(t),g(l)})),Ot(t)}))};(0,a.useEffect)((function(){Pn()}),[Bt,Ie]);var Tn=function(){return""!==Ie.trim()||(He(!0),setTimeout((function(){He(!1)}),3e3),!1)};(0,a.useEffect)((function(){v()({method:"get",url:d+"/ProjectMS/Audit/getProjectName?projectId=".concat(Sn)}).then((function(e){var t=e.data;Ne(t)})),Rn(),En(),Fn()}),[]);var An=function(){Nt(!0),v()({method:"delete",url:d+"/VendorMS/vendor/deleteDocumentById?id=".concat(fe)}).then((function(e){Pn(),ce(!1),setTimeout((function(){Nt(!1)}),1e3)}))},En=function(){an(!1),xn.current=new AbortController,v()({method:"get",url:d+"/customersms/Customers/getProjectDocumentshierarchy?objectId=".concat(Sn),signal:xn.current.signal}).then((function(e){var t=e.data;bn(t[0].id),it(t),an(!1),setTimeout((function(){an(!1)}),1e3)}))},Rn=function(){v()({method:"get",url:d+"/ProjectMS/ContractDocuments/getUploadSuccessFileNames?projectId=".concat(Sn)}).then((function(e){var t=e.data;Pt(t)})).catch((function(e){}))},Fn=function(){v()({method:"get",url:d+"/ProjectMS/ContractDocuments/getDocumentFileNames?projectId=".concat(Sn)}).then((function(e){var t=e.data;pn(t)}))},Yn=(0,a.useState)([]),On=(0,s.Z)(Yn,2),Hn=On[0],Ln=On[1],Bn=(0,a.useState)([]),Un=(0,s.Z)(Bn,2),qn=(Un[0],Un[1]);(0,a.useEffect)((function(){}),[]),(0,a.useEffect)((function(){f(L.id),g(L.svn_revision),Rt(L.file_name)}),[L]),(0,a.useEffect)((function(){}),[Qt]);var Vn=function(e){var t;f(e.id),g(e.svn_revision),Rt(e.file_name);null===(t=se[0])||void 0===t||t.split(":");return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(ie.rU,{"data-toggle":"tooltip",title:e.app_revision,style:{float:"right",color:"#428bca",textDecorationLine:"underline"},onClick:function(){pe(!0)},children:e[$[0]]})})},zn=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{align:"center","data-toggle":"tooltip",title:e.file_type,children:".pdf"==e.file_type?(0,u.jsx)(Ze.DWq,{size:"1.5em",style:{color:"#428bca"}}):".xlsx"==e.file_type?(0,u.jsx)(b.BXA,{size:"1.8em",style:{color:"#428bca"}}):".html"==e.file_type?(0,u.jsx)(we.UuI,{size:"2.0em",style:{color:"#428bca"}}):".pptx"==e.file_type?(0,u.jsx)(Ze.pvk,{size:"1.5em",style:{color:"#428bca"}}):".txt"==e.file_type?(0,u.jsx)(Me.RxU,{size:"2.0em",style:{color:"#428bca"}}):".zip"==e.file_type?(0,u.jsx)(Ze.au2,{size:"1.8em",style:{color:"#428bca"}}):".xml"==e.file_type?(0,u.jsx)(Me.RxU,{size:"1.8em",style:{color:"#428bca"}}):".jpeg"==e.file_type||".PNG"==e.file_type||".jpg"==e.file_type||".png"==e.file_type||".4"==e.file_type?(0,u.jsx)(b.opy,{size:"2.0em",style:{color:"#428bca"}}):".xls"==e.file_type?(0,u.jsx)(b.BXA,{size:"1.8em",style:{color:"#428bca"}}):".md"==e.file_type||".csv"==e.file_type||".docx"==e.file_type?(0,u.jsx)(Me.RxU,{size:"2.0em",style:{color:"#428bca"}}):""})})},Gn=function(e){return(0,u.jsxs)("div",{align:"center ","data-toggle":"tooltip",title:"Download Document",children:[(0,u.jsx)(Se.Z,{className:"linkSty",style:{cursor:"pointer",color:"#86b558"},onClick:function(){return function(e,t){var n=document.createElement("a");n.href=d+"/CommonMS/document/downloadFile?documentId=".concat(e,"&svnRevision=").concat(t),n.click()}(e.id,e.svn_revision,e.file_name)}}),!0===Dn[4].is_write?(0,u.jsx)(b.YK6,{"data-toggle":"tooltip",title:"Delete",size:"1.3em",style:{cursor:"pointer",color:"orange"},onClick:function(){ce(!0),je(e.id)}}):null]})},Kn=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.file_name,children:e.file_name})},Wn=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.file_size,style:{fontStyle:"italic"},children:e.file_size})},Qn=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.created_by,children:e.created_by})},Jn=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.date_created,children:e.date_created})},Xn=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.last_updated,children:e.last_updated})},$n=function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.last_updated_by,children:e.last_updated_by})},es=null===(t=Object.keys(W))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(C.sgG,{sortable:!0,body:"file_name"==e?Kn:"file_type"==e?zn:"app_revision"==e?Vn:"Action"==e&&Gn||"file_size"==e&&Wn||"created_by"==e&&Qn||"date_created"==e&&Jn||"last_updated"==e&&Xn||"last_updated_by"==e&&$n,field:e,header:W[e]},e)}));function ts(e){var t=e.deletePopup,n=e.setDeletePopup;return(0,u.jsx)("div",{children:(0,u.jsxs)(p.Tk,{visible:t,backdrop:"static",size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("h6",{children:"Are you sure you want to permanently remove this item ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{className:"btn btn-primary",onClick:function(){An()},children:["Ok"," "]}),(0,u.jsxs)("button",{className:"btn btn-secondary",onClick:function(){n(!1)},children:["Cancel"," "]})]})]})]})})}function ns(e){var t=e.versPopup,n=e.setVersPopup;return(0,u.jsx)("div",{children:(0,u.jsxs)(p.Tk,{visible:t,size:"xs",backdrop:"static",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Version History"})})}),(0,u.jsx)(p.sD,{children:(0,u.jsx)("div",{className:"col-12 p-0",children:(0,u.jsx)("table",{className:"table table-bordered table-striped",role:"grid",children:(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Older Versions"}),(0,u.jsx)("th",{children:"Updated By"})]}),(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"2",children:(0,u.jsx)("center",{children:"No Older Versions"})})})]})})})})]})})}return(0,a.useEffect)((function(){L[0]&&Q(JSON.parse(JSON.stringify(L[0])))}),[L]),(0,u.jsxs)("div",{children:[sn?(0,u.jsx)(D.Z,{handleAbort:function(){xn.current&&xn.current.abort(),an(!1)}}):"",Oe?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please enter document name to search"]}):"",Ke?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please select a file"]}):"",mt?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"\xa0 Project ",Et," uploaded Successfully"]}):"",Xe?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please Select Documents"]}):"",yt?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"\xa0 document deleted Successfully"]}):"",(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsxs)("h2",{children:[ye," "]})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Documents"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:wn,currentScreenName:["Projects","Open","Project","Documents"]}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("div",{className:"col-md-3 customCard ",children:[(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("h2",{children:"Document Folders"})}),Ue?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please enter the folder name to be created"]}):"",ft?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Document Copied Successfully"]}):"",St?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Document Moved Successfully"]}):"",wt?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"\xa0Folder ","::"+Ee," Successfully Created"]}):"",rn?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," Folder is already exist with this name"]}):"",!0===(null===(n=Dn[4])||void 0===n?void 0:n.is_write)?(0,u.jsxs)("div",{className:"inline-form singleFeild left",children:[(0,u.jsx)("input",{type:"text",id:"Document",placeholder:""+In,className:"unique",value:Ee,onChange:function(e){return Re(e.target.value)}}),(0,u.jsxs)("button",{type:"button",title:"Create Folder",className:"btn btn-primary",onClick:function(){!function(){if(""===Ee.trim())qe(!0),Mt(!1),setTimeout((function(){qe(!1)}),3e3)}(),Re(""),function(){if(0!==Ee.length)if(Ee.length>0&&(qe(!1),Mt(!0)),mn.filter((function(e){return null!==e})).some((function(e){return e.folder_name==Ee}))){for(var e=document.getElementsByClassName("unique"),t=0;t<e.length;t++)e[t].classList.add("error-block");cn(!0),Mt(!1),setTimeout((function(){cn(!1)}),3e3)}else{for(var n=document.getElementsByClassName("unique"),s=0;s<n.length;s++)n[s].classList.remove("error-block");cn(!1),v()({method:"post",url:d+"/ProjectMS/ContractDocuments/createFolder?parentId=".concat(Bt,"&loggedUserId=").concat(_n,"&folderName=").concat(Ee)}).then((function(e){var t=e.data;en(t),En(),Mt(!0),setTimeout((function(){Mt(!1)}),1e3)})).catch((function(e){}))}}()},children:[(0,u.jsx)(De.lzg,{}),"New"]})]}):null,(0,u.jsx)(ze,{defaultExpandedRows:String(Nn),data:lt,SetDocFolderId:Ut,setLabel:Gt,projectId:Sn,setAddVisible:A})]}),(0,u.jsxs)("div",{className:"col-md-9 customCard",children:[(0,u.jsxs)("div",{className:"collapseHeader",children:[(0,u.jsx)("h2",{children:"Search Filters"}),(0,u.jsx)("div",{onClick:function(){w(!S),Y(S?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:F})})]}),(0,u.jsxs)(p.V9,{visible:!S,children:[(0,u.jsx)("div",{className:"col-md-12 my-1",children:(0,u.jsxs)("div",{className:"statusMsg warning",style:{fontStyle:"italic",color:"#746d26",fontSize:"12px"},children:[(0,u.jsx)("b",{children:"Note :"})," Search will be applied for complete project documents..."]})}),(0,u.jsxs)("div",{className:"inline-form singleFeild",children:[(0,u.jsx)("label",{htmlFor:"Document",children:"Document Name:"}),(0,u.jsx)("input",{type:"text",value:Ie,onChange:function(e){Pe(e.target.value)},id:"Document",placeholder:"",className:"textfield"}),(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){Tn()&&(Tn()&&w(!S),v().get(d+"/VendorMS/vendor/getFilteredDocuments?ProjectId=".concat(Sn,"&SearchVal=").concat(Ie)).then((function(e){for(var t=e.data.map((function(e){return""===e.last_updated_by?(0,o.Z)((0,o.Z)({},e),{},{last_updated_by:"NA"}):e})),n=0;n<t.length;n++)t[n].file_name=null==t[n].file_name?"":t[n].file_name.split(".")[0],t[n].date_created=null==t[n].date_created?"":N().utc(t[n].date_created).format("DD-MMM-yyyy hh:mm:ss A"),t[n].last_updated=null==t[n].last_updated?"":N().utc(t[n].last_updated).format("DD-MMM-yyyy hh:mm:ss A"),t[n].app_revision=null==t[n].app_revision?"":parseFloat(t[n].app_revision).toFixed(1);ee(["app_revision"]),ae([""]),B([{file_name:"File Name",file_size:"File Size",app_revision:"Version",file_type:"File Type",date_created:"Created On",created_by:"Created By",last_updated:"Updated On",last_updated_by:"Updated By",Action:"Action"}].concat(t))})))},children:[(0,u.jsx)(r.U41,{})," Search"]})]})]}),(0,u.jsx)("h2",{className:"mt-2",children:"Document Repository"}),(0,u.jsx)(ke,{data:L,rows:25,linkColumns:$,linkColumnsRoutes:se,dynamicColumns:es,headerData:W,setHeaderData:Q,setCheckedData:nt,selectedIds:Qt,setSelectedIds:Jt,checkboxSelect:fn,setCheckboxSelect:jn,grp1Items:Dn}),(0,u.jsxs)("div",{className:" form-group col-12 btn-container center my-3",children:[!0===(null===(i=Dn[4])||void 0===i?void 0:i.is_write)?(0,u.jsxs)("button",{className:"btn btn-primary",type:"Add",onClick:function(){return A(!0)},disabled:T,children:[(0,u.jsx)(r.wEH,{})," Add"]}):null,(0,u.jsxs)("button",{className:"btn btn-primary",type:"Move/Copy Files",onClick:function(){0===Qt.length?($e(!0),setTimeout((function(){$e(!1)}),1e3)):(z(!0),setTimeout((function(){$e(!1)}),1e3))},children:[(0,u.jsx)(M.UiL,{})," Move/Copy Files"]})]}),V?(0,u.jsx)(Ce.Z,{openPopup:V,setOpenPopup:z,projectId:Sn,hierarchydata:lt,docFolderId:Bt,selectedIds:Qt,setSelectedIds:Jt,SetDocFolderId:Ut,setCopySuccessmsg:jt,setMoveSuccessmsg:Dt,getapiData:Pn,setCheckboxSelect:jn}):"",re?(0,u.jsx)(ts,{deletePopup:re,setDeletePopup:ce}):"",me?(0,u.jsx)(ns,{versPopup:me,setVersPopup:pe}):"",T&&(0,u.jsx)("div",{children:(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12 my-1",children:(0,u.jsxs)("div",{className:"statusMsg warning",style:{fontStyle:"italic",color:"#746d26",fontSize:"12px"},children:[(0,u.jsx)("b",{children:"Note :"})," You can select 10 files at max."]})}),(0,u.jsx)("div",{className:"col-12 p-0",children:(0,u.jsx)("table",{className:"table table-bordered table-striped",role:"grid",children:(0,u.jsxs)("tbody",{children:[(0,u.jsx)("tr",{children:(0,u.jsx)("th",{style:{color:"#297AB0"},children:"Browse Document"})}),(0,u.jsx)("tr",{children:(0,u.jsxs)("td",{children:[(0,u.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){var t;Ln(e.target.files[0]),Rt(null===(t=e.target.files[0])||void 0===t?void 0:t.name),qn((function(t){var n;return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},e.target.id,null===(n=e.target.files[0])||void 0===n?void 0:n.name))}))},accept:".jpg,.jpeg,.xlsx,.pdf,.docx,.txt,.png,.html"}),(0,u.jsx)("label",{className:"documenttypes col-md-12",children:(0,u.jsxs)("p",{className:"error-text",children:["Supported file types .pdf,.doc,.csv,.txt,.xlsx,.html,.png"," "]})})]})})]})})})]})}),T&&(0,u.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:[(0,u.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){!function(){if(0==Hn.length)We(!0),A(!0),setTimeout((function(){We(!1)}),3e3),pt(!1);else{var e=new FormData;e.append("file",Hn),v()({method:"post",url:d+"/ProjectMS/ContractDocuments/uploadFile?docFolderId=".concat(Bt,"&loggedUserId=").concat(_n,'&commitMessage="uploaded"'),data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;ct(t),Pn(),pt(!0),A(!1),We(!1),setTimeout((function(){pt(!1)}),1e3)}))}}()},children:[(0,u.jsx)(Z.jC8,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",type:"cancel",onClick:function(){A(!T),function(e){for(var t=document.getElementsByClassName("cancel"),n=0;n<t.length;n++)t[n].value=""}()},children:[(0,u.jsx)(M.sQZ,{})," Cancel"]})]})]})]})]})},Ke=n(74165),We=n(15861),Qe=n(92080);var Je=function(e){var t=(0,a.useState)([]),n=(0,s.Z)(t,2),l=n[0],i=n[1],o=(0,a.useState)(null),r=(0,s.Z)(o,2),d=r[0],m=r[1],h=(0,a.useState)([]),f=(0,s.Z)(h,2),j=(f[0],f[1]),x=(0,a.useState)(!1),g=(0,s.Z)(x,2),y=g[0],b=g[1],_=(0,a.useState)({}),S=(0,s.Z)(_,2),C=S[0],Z=S[1],w=(0,a.useState)([]),M=(0,s.Z)(w,2),k=M[0],I=M[1],P=(0,a.useState)(!1),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)(!1),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=(0,a.useState)(!1),L=(0,s.Z)(H,2),U=(L[0],L[1]),q=c.N.baseUrl,V=e.projectId,G=(e.handleAbort,localStorage.getItem("resId")),K=a.useState(null),W=(0,s.Z)(K,2),J=W[0],X=W[1],$=(0,a.useState)(!1),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=function(){X(!1)};(0,a.useEffect)((function(){v()({method:"get",url:q+"/ProjectMS/defectphases/getresourceid?id=".concat(G)}).then((function(e){var t=e.data;v().get(q+"/ProjectMS/projectExpenses/resourceExpenses?resourceid=".concat(t,"&projectid=").concat(V)).then((function(e){i(e.data),O(!1),ne(!0)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}),[]);var ae=function(e){var t=String(e);if(t.includes(".")){var n=t.split(".");return n[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"."+n[1].padEnd(2,"0")}return t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+".00"},le=function(e){var t=document.createElement("div");return t.innerHTML=e.clientCurrencyCode,t.innerHTML};(0,a.useEffect)((function(){v()({method:"get",url:q+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(V)}).then((function(e){var t=e.data;j(t)})).catch((function(e){return console.log(e)}))}),[]);var ie=function(e){return e.includes("Submitted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#ccc"}})}):e.includes("PM Approved")||e.includes("Pending")||e.includes("IT Approved")||e.includes("HR Approved")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#CDE6FE"}})}):e.includes("PM Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):e.includes("Drafted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#EDD4A2"}})}):e.includes("Paid")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#D9FBB3"}})}):e.includes("Approved To Pay")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#0080ff"}})}):e.includes("FM Rejected")||e.includes("IT Rejected")||e.includes("HR Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):(0,u.jsx)("span",{})},oe=(0,a.useState)(""),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{onMouseOver:function(t){X(null===t||void 0===t?void 0:t.currentTarget),de(e.approvalFlow.split(",").join(" >> ").slice(0,-4))},onMouseLeave:se,className:"ellipsis",children:[ie(e.Approval)," ",e.Approval]})})},me=function(e){return(0,u.jsx)("a",{className:"linkSty",onClick:function(){E(!0),pe(e.expense_id),b(!0),Z(e)},children:"View"})},pe=function(e){v().get(q+"/ProjectMS/projectExpenses/expenseHistory?expenseId=".concat(e)).then((function(e){I(e.data),E(!1)})).catch((function(e){return console.log(e)}))};function he(e){var t=e.popUp,n=e.setPopUp,s=e.data,a=e.totalData,l=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t,n,s){var a;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=document.createElement("a")).href=q+"/CommonMS/document/downloadFile?documentId=".concat(t,"&svnRevision=").concat(n),a.click();case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}();return(0,u.jsxs)("div",{children:[A?(0,u.jsx)(D.Z,{handleAbort:function(){E(!1)}}):"",(0,u.jsxs)(p.Tk,{visible:t,backdrop:"static",size:"lg",onClose:function(){return n(!t)},children:[(0,u.jsx)(p.p0,{style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"ft16",children:"Expense Details"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"form-group content",children:(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Project"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:a[0].projectName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Resource"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.fullName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense Category"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.Expense_Type})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Description"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.description})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Incurred Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:le(s)+" "+ae(s.Incurred)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:le(s)+" "+ae(s.disbursed_amount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Paid By"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.Payee})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Status"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:null==s.Payment||""==s.Payment?s.Approval:s.Payment})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Receipt(s)"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5 ellipsis",children:(0,u.jsx)("a",{className:"linkSty",onClick:function(e){return l(s.document_id,s.svn_revision,s.file_name)},title:s.file_name,children:s.file_name})})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Approval Workflow"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.approvalFlow.split(",").join(" >> ").slice(0,-4)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense History"})}),(0,u.jsx)("div",{className:"col-1",children:":"})]})]})})}),(0,u.jsx)("div",{style:{backgroundColor:"#eee",border:"1px solid #ddd",minHeight:"40px",maxHeight:"100px",padding:"5px 7px",overflowY:"auto"},className:"row h-50",children:k.filter((function(e){return"Drafted"!=e.state})).map((function(e){return(0,u.jsxs)("div",{children:[(0,u.jsxs)("strong",{children:[e.state," by ",e.firstName," ",e.lastName," on"," ",N()(e.dateCreated).format("DD-MMM-YYYY")]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:le(s)+" "+ae(e.disbursedAmount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Comment"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:""==e.comments||null==e.comments?"NA":e.comments})]})]})]})}))})]}),(0,u.jsx)(p.Ym,{children:(0,u.jsx)("button",{className:"btn btn-outline-secondary mx-auto",onClick:function(){return n(!1)},children:"Close"})})]})]})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"customCard",children:[Y?(0,u.jsx)(D.Z,{handleAbort:function(){O(!1)}}):"",(0,u.jsxs)("div",{className:"statusMsg warning",children:[(0,u.jsx)("span",{className:"bold",children:(0,u.jsx)(Q.BrF,{})}),"Note : If you want to edit/create expenses, please navigate to screen Expenses -> Open/Create."]}),1==te?(0,u.jsx)("div",{className:"darkHeader",children:(0,u.jsxs)(B.w,{value:l,showGridlines:!0,className:"primeReactDataTable",stripedRows:!0,expandedRows:d,onRowToggle:function(e){return m(e.data)},onRowExpand:function(e){var t=setTimeout((function(){U(!0)}),100);v().get(q+"/ProjectMS/projectExpenses/stackExpenses?stackId=".concat(e.data.stackId,"&userId=").concat(G,"&raisedBy=").concat(-1,"&projectId=").concat(V,"&statusId=").concat(e.data.stackStatusId)).then((function(n){l.find((function(t){return t.stackId===e.data.stackId})).subrows=n.data,U(!1),clearTimeout(t)})).catch((function(e){return console.log(e)}))},rowExpansionTemplate:function(e){return(0,u.jsxs)("div",{className:"darkHeader",children:["",(0,u.jsxs)(B.w,{value:e.subrows,className:"primeReactDataTable",stripedRows:!0,sortOrder:1,children:[(0,u.jsx)(z.s,{sortable:!0,field:"Expense_Type",header:"Expense Type",body:function(e){return(0,u.jsx)("div",{title:e.Expense_Type,children:e.Expense_Type})}}),(0,u.jsx)(z.s,{sortable:!0,field:"expense_date",header:"Date",body:function(e){return(0,u.jsx)("div",{title:N()(e.expense_date).format("DD-MMM-YYYY"),children:N()(e.expense_date).format("DD-MMM-YYYY")})}}),(0,u.jsx)(z.s,{sortable:!0,field:"Payee",header:"Payee",body:function(e){return(0,u.jsx)("div",{title:e.Payee,children:e.Payee})}}),(0,u.jsx)(z.s,{sortable:!0,field:"is_billable",header:"Billable",body:function(e){return e.is_billable?"Yes":"No"}}),(0,u.jsx)(z.s,{sortable:!0,field:"Incurred",header:"Incurred",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:le(e)+" "+ae(e.Incurred),children:le(e)+" "+ae(e.Incurred)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"disbursed_amount",header:"Disbursed",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:le(e)+" "+ae(e.disbursed_amount),children:le(e)+" "+ae(e.disbursed_amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"client_amount",header:"Client",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:le(e)+" "+ae(e.client_amount),children:le(e)+" "+ae(e.client_amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"Approval",header:"Approval",body:ue}),(0,u.jsx)(z.s,{sortable:!0,field:"Payment",header:"Payment",body:function(e){return(0,u.jsxs)("div",{title:e.Payment,children:[ie(e.Payment),e.Payment]})}}),(0,u.jsx)(z.s,{sortable:!0,field:"comments",header:"Comments",body:function(e){return(0,u.jsx)("div",{title:e.comments,children:e.comments})}}),(0,u.jsx)(z.s,{header:"Details",body:me})]})]})},paginator:!0,rows:25,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[10,25,50],sortMode:"multiple",children:[(0,u.jsx)(z.s,{expander:function(e){return e.subrows.length>=0},style:{width:"5rem"}}),(0,u.jsx)(z.s,{sortable:!0,field:"stackName",header:"Expense",body:function(e){return(0,u.jsx)("div",{title:e.stackName,children:e.stackName})}}),(0,u.jsx)(z.s,{sortable:!0,field:"dateCreated",header:"Expense Date",body:function(e){return(0,u.jsx)("div",{title:N()(e.minDt).format("DD-MMM-YYYY"),children:N()(e.minDt).format("DD-MMM-YYYY")})}}),(0,u.jsx)(z.s,{sortable:!0,field:"lastUpdated",header:"Modified Date",body:function(e){return(0,u.jsx)("div",{title:N()(e.lastUpdated).format("DD-MMM-YYYY"),children:N()(e.lastUpdated).format("DD-MMM-YYYY")})}}),(0,u.jsx)(z.s,{sortable:!0,field:"amount",header:"Due Amount",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:le(e)+" "+ae(e.amount),children:le(e)+" "+ae(e.amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"stackStatus",header:"Status",body:function(e){return(0,u.jsx)("div",{title:e.stackStatus,children:e.stackStatus})}})]})}):""]}),y?(0,u.jsx)(he,{setPopUp:b,data:C,popUp:y,totalData:l}):"",J&&(0,u.jsx)(Qe.Z,{handleClose:se,anchorEl:J,rowData:ce})]})};var Xe=function(e){var t,n=(0,a.useState)([]),l=(0,s.Z)(n,2),i=l[0],o=l[1],r=(0,a.useState)(null),d=(0,s.Z)(r,2),m=d[0],h=d[1],f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=j[1],y=(0,a.useState)(!1),b=(0,s.Z)(y,2),_=b[0],S=b[1],C=(0,a.useState)({}),Z=(0,s.Z)(C,2),w=Z[0],M=Z[1],k=(0,a.useState)(0),I=(0,s.Z)(k,2),P=I[0],T=I[1],A=(0,a.useState)([]),E=(0,s.Z)(A,2),R=E[0],F=E[1],Y=(0,a.useState)(!1),O=(0,s.Z)(Y,2),H=O[0],L=O[1],U=(0,a.useState)(!1),q=(0,s.Z)(U,2),V=q[0],G=q[1],K=(0,a.useState)(!1),W=(0,s.Z)(K,2),Q=(W[0],W[1]),J=(0,a.useState)(!1),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=c.N.baseUrl,ne=e.projectId,se=(e.handleAbort,localStorage.getItem("resId")),ae=a.useState(null),le=(0,s.Z)(ae,2),ie=le[0],oe=le[1],re=function(){oe(!1)};(0,a.useEffect)((function(){v()({method:"get",url:te+"/ProjectMS/defectphases/getresourceid?id=".concat(se)}).then((function(e){var t=e.data;T(t)}))}),[]),(0,a.useEffect)((function(){ce(),0!==P&&me()}),[P]);var ce=function(){v()({method:"get",url:te+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(ne)}).then((function(e){var t=e.data;g(t)})).catch((function(e){console.log(e)}))},de=function(e){var t=document.createElement("div");return t.innerHTML=e.clientCurrencyCode,t.innerHTML},ue=(null===(t=x[0])||void 0===t||t.projectName,function(e){var t=String(e);if(t.includes(".")){var n=t.split(".");return n[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"."+n[1].padEnd(2,"0")}return t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+".00"}),me=function(){G(!1),v().get(te+"/ProjectMS/projectExpenses/teamExpenses?resourceid=".concat(P,"&projectid=").concat(ne)).then((function(e){o(e.data),G(!1),ee(!0)})).catch((function(e){console.log(e)}))},pe=function(e){return e.includes("Submitted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#ccc"}})}):e.includes("PM Approved")||e.includes("Pending")||e.includes("IT Approved")||e.includes("HR Approved")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#CDE6FE"}})}):e.includes("PM Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):e.includes("Drafted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#EDD4A2"}})}):e.includes("Paid")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#D9FBB3"}})}):e.includes("Approved To Pay")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#0080ff"}})}):e.includes("FM Rejected")||e.includes("IT Rejected")||e.includes("HR Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):(0,u.jsx)("span",{})},he=(0,a.useState)(""),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{onMouseOver:function(t){oe(null===t||void 0===t?void 0:t.currentTarget),je(e.approvalFlow.split(",").join(" >> ").slice(0,-4))},onMouseLeave:re,className:"ellipsis",children:[pe(e.Approval)," ",e.Approval]})})},ge=function(e){return(0,u.jsx)("a",{className:"linkSty",onClick:function(){L(!0),ye(e.expense_id),S(!0),M(e)},children:"View"})},ye=function(e){v().get(te+"/ProjectMS/projectExpenses/expenseHistory?expenseId=".concat(e)).then((function(e){F(e.data),L(!1)})).catch((function(e){return console.log(e)}))};function Ne(e){var t=e.popUp,n=e.setPopUp,s=e.data,a=e.totalData,l=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t,n,s){var a;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=document.createElement("a")).href=te+"/CommonMS/document/downloadFile?documentId=".concat(t,"&svnRevision=").concat(n),a.click();case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{children:H?(0,u.jsx)(D.Z,{handleAbort:function(){L(!1)}}):(0,u.jsxs)(p.Tk,{visible:t,backdrop:"static",size:"lg",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"ft16",children:"Expense Details"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("div",{className:"container",children:(0,u.jsx)("div",{className:"form-group content",children:(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Project"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:a[0].projectName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Resource"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.fullName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense Category"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.Expense_Type})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Description"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.description})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Incurred Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:de(s)+" "+ue(s.Incurred)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:de(s)+" "+ue(s.disbursed_amount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Paid By"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.Payee})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Status"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:null==s.Payment||""==s.Payment?s.Approval:s.Payment})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Receipt(s)"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5 ellipsis",children:(0,u.jsx)("a",{className:"linkSty",onClick:function(e){return l(s.document_id,s.svn_revision,s.file_name)},title:s.file_name,children:s.file_name})})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Approval Workflow"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:s.approvalFlow.split(",").join(" >> ").slice(0,-4)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense History"})}),(0,u.jsx)("div",{className:"col-1",children:":"})]})]})})}),(0,u.jsx)("div",{style:{backgroundColor:"#eee",border:"1px solid #ddd",minHeight:"40px",maxHeight:"100px",padding:"5px 7px",overflowY:"auto"},className:"row h-50",children:R.filter((function(e){return"Drafted"!=e.state})).map((function(e){return(0,u.jsxs)("div",{children:[(0,u.jsxs)("strong",{children:[e.state," by ",e.firstName," ",e.lastName," on"," ",N()(e.dateCreated).format("DD-MMM-YYYY")]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:de(s)+" "+ue(e.disbursedAmount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Comment"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:""==e.comments||null==e.comments?"NA":e.comments})]})]})]})}))})]}),(0,u.jsx)(p.Ym,{children:(0,u.jsx)("button",{className:"btn btn-outline-secondary mx-auto",onClick:function(){return n(!1)},children:"Close"})})]})})}return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"customCard darkHeader",children:[V?(0,u.jsx)(D.Z,{handleAbort:function(){return G(!1)}}):"","\xa0",(0,u.jsx)("div",{class:"form-group",children:1==$?(0,u.jsxs)(B.w,{value:i,showGridlines:!0,stripedRows:!0,className:"primeReactDataTable",expandedRows:m,onRowToggle:function(e){return h(e.data)},onRowExpand:function(e){var t=setTimeout((function(){Q(!0)}),100);v().get(te+"/ProjectMS/projectExpenses/stackExpenses?stackId=".concat(e.data.stackId,"&userId=").concat(se,"&raisedBy=").concat(e.data.raised_by,"&projectId=").concat(ne,"&statusId=").concat(e.data.status_id)).then((function(n){i.find((function(t){return t.stackId===e.data.stackId})).subrows=n.data,Q(!1),clearTimeout(t)})).catch((function(e){return console.log(e)}))},rowExpansionTemplate:function(e){return(0,u.jsxs)("div",{className:"darkHeader",children:["",(0,u.jsxs)(B.w,{value:e.subrows,className:"primeReactDataTable",stripedRows:!0,sortOrder:1,children:[(0,u.jsx)(z.s,{sortable:!0,field:"Expense_Type",header:"Expense Type",body:function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.Expense_Type,children:e.Expense_Type})}}),(0,u.jsx)(z.s,{sortable:!0,field:"expense_date",header:"Date",body:function(e){return(0,u.jsx)("div",{title:N()(e.expense_date).format("DD-MMM-YYYY"),children:N()(e.expense_date).format("DD-MMM-YYYY")})}}),(0,u.jsx)(z.s,{sortable:!0,field:"Payee",header:"Payee",body:function(e){return(0,u.jsx)("div",{title:e.Payee,children:e.Payee})}}),(0,u.jsx)(z.s,{sortable:!0,field:"is_billable",header:"Billable",body:function(e){return e.is_billable?"Yes":"No"}}),(0,u.jsx)(z.s,{sortable:!0,field:"Incurred",header:"Incurred",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:de(e)+" "+ue(e.Incurred),children:de(e)+" "+ue(e.Incurred)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"disbursed_amount",header:"Disbursed",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:de(e)+" "+ue(e.disbursed_amount),children:de(e)+" "+ue(e.disbursed_amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"client_amount",header:"Client",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:de(e)+" "+ue(e.client_amount),children:de(e)+" "+ue(e.client_amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"Approval",header:"Approval",body:xe}),(0,u.jsx)(z.s,{sortable:!0,field:"Payment",header:"Payment",body:function(e){return(0,u.jsxs)("div",{title:e.Payment,children:[pe(e.Payment),e.Payment]})}}),(0,u.jsx)(z.s,{sortable:!0,field:"comments",header:"Comments",body:function(e){return(0,u.jsx)("div",{title:e.comments,children:e.comments})}}),(0,u.jsx)(z.s,{header:"Details",body:ge})]})]})},paginator:!0,rows:25,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[10,25,50],sortMode:"multiple",children:[(0,u.jsx)(z.s,{expander:function(e){return e.subrows.length>=0},style:{width:"5rem"}}),(0,u.jsx)(z.s,{sortable:!0,field:"stackName",header:"Expense",body:function(e){return(0,u.jsx)("div",{title:e.stackName,children:e.stackName})}}),(0,u.jsx)(z.s,{sortable:!0,field:"resource",header:"Created By",body:function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.resource,children:e.resource})}}),(0,u.jsx)(z.s,{sortable:!0,field:"createdOn",header:"Expense Date",body:function(e){return function(e){return N()(e.minDt).format("DD-MMM-YYYY")!==N()(e.maxDt).format("DD-MMM-YYYY")?(0,u.jsx)("div",{title:"".concat(N()(e.minDt).format("DD-MMM-YYYY")," - ").concat(N()(e.maxDt).format("DD-MMM-YYYY")),children:"".concat(N()(e.minDt).format("DD-MMM-YYYY")," - ").concat(N()(e.maxDt).format("DD-MMM-YYYY"))}):(0,u.jsx)("div",{title:N()(e.minDt).format("DD-MMM-YYYY"),children:N()(e.minDt).format("DD-MMM-YYYY")})}(e)}}),(0,u.jsx)(z.s,{sortable:!0,field:"lastUpdated",header:"Modified Date",body:function(e){return(0,u.jsxs)("div",{title:N()(e.lastUpdated).format("DD-MMM-YYYY"),children:[" ",N()(e.lastUpdated).format("DD-MMM-YYYY")]})}}),(0,u.jsx)(z.s,{sortable:!0,field:"amount",header:"Due Amount",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:de(e)+" "+ue(e.amount),children:de(e)+" "+ue(e.amount)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"approval",header:"Status",body:function(e){return(0,u.jsx)("div",{title:e.approval,children:e.approval})}})]}):""})]}),_?(0,u.jsx)(Ne,{setPopUp:S,data:w,popUp:_,totalData:i}):"",ie&&(0,u.jsx)(Qe.Z,{handleClose:re,anchorEl:ie,rowData:fe})]})},$e=n(63014);var et=function(e){var t,n=(0,a.useState)([]),l=(0,s.Z)(n,2),i=l[0],d=l[1],m=(0,a.useState)(null),h=(0,s.Z)(m,2),f=h[0],j=h[1],x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],_=g[1],S=(0,a.useState)([]),C=(0,s.Z)(S,2),w=C[0],k=C[1],I=(0,a.useState)(!1),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)({}),R=(0,s.Z)(E,2),F=R[0],Y=R[1],H=(0,a.useState)(0),L=(0,s.Z)(H,2),U=L[0],q=L[1],V=(0,a.useState)(!1),G=(0,s.Z)(V,2),K=G[0],W=G[1],Q=(0,a.useState)([]),J=(0,s.Z)(Q,2),X=J[0],$=J[1],ee=(0,a.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=(0,a.useState)(null),le=(0,s.Z)(ae,2),ie=(le[0],le[1],(0,a.useState)([])),oe=(0,s.Z)(ie,2),re=oe[0],ce=oe[1],de=(0,a.useState)({}),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(null),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=(0,a.useState)(!1),ge=(0,s.Z)(xe,2),ye=ge[0],Ne=ge[1],be=(0,a.useState)(!0),_e=(0,s.Z)(be,2),Se=_e[0],De=_e[1],Ce=(0,a.useState)([]),Me=(0,s.Z)(Ce,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)(!1),Te=(0,s.Z)(Pe,2),Ae=(Te[0],Te[1]),Ee=(0,a.useState)(!1),Re=(0,s.Z)(Ee,2),Fe=(Re[0],Re[1],(0,a.useState)([])),Ye=(0,s.Z)(Fe,2),Oe=(Ye[0],Ye[1],(0,a.useState)(!0)),He=(0,s.Z)(Oe,2),Le=(He[0],He[1]),Be=(0,a.useState)(!1),Ue=(0,s.Z)(Be,2),qe=(Ue[0],Ue[1],(0,a.useState)(!1)),Ve=(0,s.Z)(qe,2),ze=(Ve[0],Ve[1],(0,a.useState)(!1)),Ge=(0,s.Z)(ze,2),Je=Ge[0],Xe=Ge[1],$e=(0,a.useState)(0),et=(0,s.Z)($e,2),tt=et[0],nt=et[1],st=c.N.baseUrl,at=e.projectId,lt=(e.handleAbort,e.grp3Items),it=lt.find((function(e){return"Expenses"===e.display_name}));console.log("projectId:",at),console.log(lt);var ot=localStorage.getItem("resId"),rt=a.useState(null),ct=(0,s.Z)(rt,2),dt=ct[0],ut=ct[1],mt=function(){ut(!1)},pt=(null===(t=y[0])||void 0===t||t.projectName,function(e){var t=String(e);if(t.includes(".")){var n=t.split(".");return n[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"."+n[1].padEnd(2,"0")}return t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+".00"});(0,a.useEffect)((function(){v()({method:"get",url:st+"/ProjectMS/defectphases/getresourceid?id=".concat(ot)}).then((function(e){var t=e.data;q(t)}))}),[]),(0,a.useEffect)((function(){v()({method:"get",url:st+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(at)}).then((function(e){var t=e.data;_(t)})).catch((function(e){return console.log(e)})),0!==U&&ht()}),[U]),console.log("resourceid: ",U);var ht=function(){W(!1),v().get(st+"/ProjectMS/projectExpenses/expenseApprovals?resourceid=".concat(U,"&projectid=").concat(at)).then((function(e){d(e.data),W(!1),Xe(!0)})).catch((function(e){return console.log(e)}))},vt=function(e){var t=document.createElement("div");return t.innerHTML=e.clientCurrencyCode,t.innerHTML},ft=function(e){return e.includes("Submitted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#ccc"}})}):e.includes("PM Approved")||e.includes("Pending")||e.includes("IT Approved")||e.includes("HR Approved")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#CDE6FE"}})}):e.includes("PM Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):e.includes("Drafted")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#EDD4A2"}})}):e.includes("Paid")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#D9FBB3"}})}):e.includes("Approved To Pay")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#0080ff"}})}):e.includes("FM Rejected")||e.includes("IT Rejected")||e.includes("HR Rejected")?(0,u.jsx)("span",{children:(0,u.jsx)(Ze.rJz,{style:{color:"#e54c53"}})}):(0,u.jsx)("span",{})},jt=(0,a.useState)(""),xt=(0,s.Z)(jt,2),gt=xt[0],yt=xt[1],Nt=(0,a.useState)([]),bt=(0,s.Z)(Nt,2),_t=bt[0],St=bt[1];(0,a.useEffect)((function(){var e=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(){var t,n;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v().get(st+"/ProjectMS/projectExpenses/paymentUsers");case 3:t=e.sent,n=t.data,St(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Dt=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)&&!_t.includes(parseInt(ot))?(0,u.jsx)("div",{children:(0,u.jsx)("select",{onChange:function(t){return kt(t,e)},id:"dropDown",children:e.drop_down.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,u.jsx)("option",{value:t,children:n})}))})}):(0,u.jsxs)("div",{onMouseOver:function(t){ut(null===t||void 0===t?void 0:t.currentTarget),yt(e.approvalFlow.split(",").join(" >> ").slice(0,-4))},onMouseLeave:mt,className:"ellipsis",children:[ft(e.Approval)," ",e.Approval]})},Ct=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,u.jsx)("input",{type:"checkbox",id:"billable",defaultChecked:e.is_billable,onChange:function(t){return kt(t,e)}}):0==e.is_billable?"No":"Yes"},Zt=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,u.jsx)("input",{type:"text",id:"disbursed",defaultValue:e.disbursed_amount,onChange:function(t){return kt(t,e)},onKeyDown:function(e){var t=e.key;/^[0-9]$/.test(t)||"."===t||"Backspace"===t||e.preventDefault()}}):vt(e)+" "+pt(e.disbursed_amount)},wt=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,u.jsx)("input",{type:"text",id:"client",defaultValue:e.client_amount,onChange:function(t){return kt(t,e)},onKeyDown:function(e){var t=e.key;/^[0-9]$/.test(t)||"."===t||"Backspace"===t||e.preventDefault()}}):vt(e)+" "+pt(e.client_amount)},Mt=function(e){return me.stackId==e.stackId?(0,u.jsx)("div",{children:(0,u.jsx)("select",{onChange:function(e){return je(e.target.value)},children:e.dropDown.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,u.jsx)("option",{value:t,children:n},t)}))})}):e.payment};(0,a.useEffect)((function(){ce((function(e){return w}))}),[w]);var kt=function(e,t){var n=re.findIndex((function(e){return e.expense_id===t.expense_id})),s=(0,O.Z)(re);s[n]=(0,o.Z)((0,o.Z)({},s[n]),{},{disbursed_amount:"disbursed"===e.target.id?e.target.value:s[n].disbursed_amount,client_amount:"client"===e.target.id?e.target.value:s[n].client_amount,comments:"comment"===e.target.id?e.target.value:s[n].comments,is_billable:"billable"===e.target.id?!s[n].is_billable:s[n].is_billable,Payment:"dropDown"===e.target.id?e.target.value:s[n].Payment}),ce(s)},It=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)&&_t.includes(parseInt(ot))?(0,u.jsx)("div",{children:(0,u.jsx)("select",{onChange:function(t){return kt(t,e)},id:"dropDown",children:e.drop_down.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,u.jsx)("option",{value:t,children:n})}))})}):"string"===typeof e.Payment&&e.Payment.trim().length>0&&/[a-zA-Z]/.test(e.Payment)?(0,u.jsxs)("span",{title:e.Payment,className:"ellipsis",children:[ft(e.Payment)," ",e.Payment]}):""},Pt=function(e,t){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{children:(0,u.jsx)("input",{className:"form-check-input",type:"checkbox",id:e.id,style:{height:"20px",width:"20px",marginLeft:"5px"},checked:w.some((function(t){return t.expense_id===e.expense_id})),onChange:function(n){var s=(0,O.Z)(ke);s[t]=n.target.checked,Ie(s),e.Payment=Object.keys(e.drop_down[0])[0];var a=(0,O.Z)(w);if(n.target.checked)a.push(e);else{var l=a.findIndex((function(t){return t.expense_id===e.expense_id}));-1!==l&&a.splice(l,1)}!function(e){k((function(){return e}))}(a)},disabled:Qt(e)})})})},Tt=(0,a.useState)([]),At=(0,s.Z)(Tt,2),Et=At[0],Rt=At[1],Ft=function(e){return w.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,u.jsx)("textarea",{id:"comment",style:{resize:"none"},defaultValue:e.comments,onChange:function(t){return kt(t,e)}}):(0,u.jsx)("div",{title:e.comments,children:e.comments})},Yt=function(e){return(0,u.jsx)("a",{className:"linkSty",onClick:function(){se(!0),Ot(e.expense_id),A(!0),Y(e)},children:"View"})},Ot=function(e){v().get(st+"/ProjectMS/projectExpenses/expenseHistory?expenseId=".concat(e)).then((function(e){$(e.data),se(!1)})).catch((function(e){return console.log(e)}))},Ht=(0,a.useState)(!1),Lt=(0,s.Z)(Ht,2),Bt=Lt[0],Ut=Lt[1],qt=(0,a.useState)(!1),Vt=(0,s.Z)(qt,2),zt=Vt[0],Gt=Vt[1],Kt=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t){var n;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("a")).href=st+"/ProjectMS/projectExpenses/downloadStack?stackId=".concat(t),n.download="Expense.pdf",Gt(!0),e.next=6,v().get(n.href).then((function(e){200===e.status&&n.click()})).catch((function(e){console.error("An error occurred:",e),Ut(!0),setTimeout((function(){Ut(!1)}),3e3)}));case 6:Gt(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Wt(e){var t=e.popUp,n=e.setPopUp,l=e.data,i=e.totalData,o=(0,a.useState)(!1),r=(0,s.Z)(o,2),c=r[0],d=r[1],m=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t,n,s){var a;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("a")).href=st+"/CommonMS/document/downloadFile?documentId=".concat(t,"&svnRevision=").concat(n),e.prev=2,e.next=5,v().get(a.href);case 5:200===e.sent.status&&a.click(),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),d(!0),setTimeout((function(){d(!1)}),3e3),console.error("An error occurred:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,s){return e.apply(this,arguments)}}();return(0,u.jsx)("div",{children:ne?(0,u.jsx)(D.Z,{handleAbort:function(){se(!1)}}):(0,u.jsxs)(p.Tk,{visible:t,backdrop:"static",size:"lg",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{style:{cursor:"all-scroll"},children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"ft16",children:"Expense Details"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsxs)("div",{className:"container",children:[c?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(we.SZZ,{})," Document is not available."]})}):"",(0,u.jsx)("div",{className:"form-group content",children:(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Project"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:i[0].projectName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Resource"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:l.fullName})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense Category"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:l.Expense_Type})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Description"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:l.description})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Incurred Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:vt(l)+" "+pt(l.Incurred)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:vt(l)+" "+pt(l.disbursed_amount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Paid By"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:l.Payee})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Status"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:null==l.Payment||""==l.Payment?l.Approval:l.Payment})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Receipt(s)"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5 ellipsis",children:(0,u.jsx)("a",{className:"linkSty",onClick:function(e){return m(l.document_id,l.svn_revision,l.file_name)},title:l.file_name,children:l.file_name})})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Approval Workflow"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:l.approvalFlow.split(",").join(" >> ").slice(0,-4)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("strong",{children:"Expense History"})}),(0,u.jsx)("div",{className:"col-1",children:":"})]})]})})]}),(0,u.jsx)("div",{style:{backgroundColor:"#eee",border:"1px solid #ddd",minHeight:"40px",maxHeight:"100px",padding:"5px 7px",overflowY:"auto"},className:"row h-50",children:X.filter((function(e){return"Drafted"!=e.state})).map((function(e){return(0,u.jsxs)("div",{children:[(0,u.jsxs)("strong",{children:[e.state," by ",e.firstName," ",e.lastName," on"," ",N()(e.dateCreated).format("DD-MMM-YYYY")]}),(0,u.jsx)("br",{}),(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Disbursed Amount"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:vt(l)+" "+pt(e.disbursedAmount)})]}),(0,u.jsxs)("div",{className:"col-6 row",children:[(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("span",{children:"Comment"})}),(0,u.jsx)("div",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-5",children:""==e.comments||null==e.comments?"NA":e.comments})]})]})]})}))})]}),(0,u.jsx)(p.Ym,{children:(0,u.jsx)("button",{className:"btn btn-outline-secondary mx-auto",onClick:function(){return n(!1)},children:"Close"})})]})})}var Qt=function(e){return!e.isEdit};return(0,u.jsxs)("div",{children:["\xa0",zt?(0,u.jsx)(D.Z,{handleAbort:function(){return Gt(!1)}}):"",ye?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(Z.hXj,{}),"Expense(s) Saved successfully"]})}):"",Bt?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(we.SZZ,{})," Document is not available."]})}):"",1==Je?(0,u.jsxs)("div",{className:"customCard darkHeader",children:[(0,u.jsxs)(B.w,{value:i,className:"primeReactDataTable",showGridlines:!0,stripedRows:!0,expandedRows:f,onRowToggle:function(e){return j(e.data)},onRowExpand:function(e){var t=setTimeout((function(){Ae(!0)}),100);v().get(st+"/ProjectMS/projectExpenses/stackExpenses?stackId=".concat(e.data.stackId,"&userId=").concat(ot,"&raisedBy=").concat(e.data.raised_by,"&projectId=").concat(at,"&statusId=").concat(e.data.status_id)).then((function(n){i.find((function(t){return t.stackId===e.data.stackId})).subrows=n.data,Ae(!1),clearTimeout(t)})).catch((function(e){return console.log(e)}))},rowExpansionTemplate:function(e){return(0,u.jsxs)("div",{className:"darkHeader",children:[(0,u.jsxs)(B.w,{value:e.subrows,className:"primeReactDataTable",stripedRows:!0,sortOrder:1,children:[(0,u.jsx)(z.s,{style:{textAlign:"center"},header:function(t,n){return s=e.subrows,(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"form-check pl-4",children:(0,u.jsx)("input",{className:"form-check-input",type:"checkbox",id:s.filter((function(e){return e.isEdit})).map((function(e){return e.id})).toString(),style:{height:"20px",width:"20px"},checked:re.filter((function(e){var t;return e.id===(null===(t=s[0])||void 0===t?void 0:t.id)})).filter((function(e){return 1==e.isEdit})).length===s.filter((function(e){return 1==e.isEdit})).length&&0!==s.filter((function(e){return 1==e.isEdit})).length,onChange:function(e){var t=e.target.checked;Le(t);var n=e.target.id;if(t){var a=s.filter((function(e){return e.isEdit})),l=Et;if(0!=a.length)for(var i=0;i<a.length;i++)a[i].Payment=Object.keys(a[i].drop_down[0])[0],l.push(a[i]),Rt(l);var o=l.map((function(e){return""+e.id}));if(tt>0)if(n.includes(","))for(var r=n.split(","),c=0;c<r.length;c++)document.getElementById(r[c]).checked=o.includes(""+r[c]);else document.getElementById(n).checked=o.includes(""+n);k((function(){return Et}))}else{var d=w.filter((function(e){return!s.includes(e)}));Rt(d),k((function(){return d}))}nt((function(e){return e+1}))},disabled:s.every(Qt)})})});var s},body:function(e,t){return Pt(e,t)}}),(0,u.jsx)(z.s,{sortable:!0,field:"Expense_Type",header:"Expense Type",body:function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.Expense_Type,children:e.Expense_Type})}}),(0,u.jsx)(z.s,{sortable:!0,field:"expense_date",header:"Date",body:function(e){return N()(e.expense_date).format("DD-MMM-YYYY")}}),(0,u.jsx)(z.s,{sortable:!0,field:"Payee",header:"Payee"}),(0,u.jsx)(z.s,{sortable:!0,field:"is_billable",header:"Billable",style:{textAlign:"center"},body:Ct}),(0,u.jsx)(z.s,{sortable:!0,field:"Incurred",header:"Incurred",style:{textAlign:"right"},body:function(e){return vt(e)+" "+pt(e.Incurred)}}),(0,u.jsx)(z.s,{sortable:!0,field:"disbursed_amount",header:"Disbursed",style:{textAlign:"right"},body:Zt}),(0,u.jsx)(z.s,{sortable:!0,field:"client_amount",style:{textAlign:"right"},header:"Client",body:wt}),(0,u.jsx)(z.s,{sortable:!0,field:"Approval",header:"Approval",body:Dt}),(0,u.jsx)(z.s,{sortable:!0,field:"Payment",header:"Payment",body:It}),(0,u.jsx)(z.s,{sortable:!0,field:"comments",header:"Comments",body:Ft}),(0,u.jsx)(z.s,{header:"Details",body:Yt})]}),1==(null===it||void 0===it?void 0:it.is_write)?(0,u.jsxs)("div",{style:{display:"flex",border:"1px solid #ECF0F1"},children:[(0,u.jsx)("button",{style:{height:"25px"},className:"btn btn-primary ms-1 p-1","data-toggle":"tooltip",title:"Save row",disabled:0===re.filter((function(t){return t.id===e.stackId})).length,onClick:function(){return function(e){var t=re.filter((function(t){return t.id===e.stackId})).map((function(e){return{expenseId:e.expense_id,isBillable:0==e.is_billable?0:1,disbursedAmount:parseFloat(e.disbursed_amount),clientAmmount:parseFloat(e.client_amount),payment:parseInt(e.Payment),comments:e.comments,resId:U,stackId:e.id}}));v().post(st+"/ProjectMS/projectExpenses/saveExpenses",t,{headers:{"Content-Type":"application/json"}}).then((function(e){Ne(!0),setTimeout((function(){Ne(!1)}),3e3),k([]),ht()})).catch((function(e){return console.log(e)}))}(e)},children:(0,u.jsx)(r.TvB,{})}),(0,u.jsx)("button",{style:{height:"25px"},className:"btn btn-primary ms-1 p-1 cancel","data-toggle":"tooltip",title:"Cancel row editing",disabled:0===re.filter((function(t){return t.id===e.stackId})).length,onClick:function(){return function(e){var t=w.filter((function(t){return t.id!==e.stackId}));k(t),Rt(t)}(e)},children:(0,u.jsx)(M.sQZ,{})})]}):"",""]})},paginator:!0,rows:25,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[10,25,50],children:[(0,u.jsx)(z.s,{expander:function(e){return e.subrows.length>=0},style:{width:"5rem"}}),(0,u.jsx)(z.s,{sortable:!0,field:"stackName",header:"Stack",body:function(e){return(0,u.jsx)("div",{title:e.stackName,children:e.stackName})}}),(0,u.jsx)(z.s,{sortable:!0,field:"resource",header:"Resource",body:function(e){return(0,u.jsx)("div",{className:"ellipsis",title:e.resource,children:e.resource})}}),(0,u.jsx)(z.s,{sortable:!0,field:"approval",header:"Approval Status",body:function(e){return(0,u.jsx)("div",{title:e.approval,children:e.approval})}}),(0,u.jsx)(z.s,{sortable:!0,field:"payment",header:"Payment Status",body:Mt}),(0,u.jsx)(z.s,{sortable:!0,field:"amt",header:"Incurred",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:vt(e)+" "+pt(e.amt),children:vt(e)+" "+pt(e.amt)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"disbursedAmt",header:"Disbursed",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:vt(e)+" "+pt(e.disbursedAmt),children:vt(e)+" "+pt(e.disbursedAmt)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"clientAmt",header:"Client",style:{textAlign:"right"},body:function(e){return(0,u.jsx)("div",{title:vt(e)+" "+pt(e.clientAmt),children:vt(e)+" "+pt(e.clientAmt)})}}),(0,u.jsx)(z.s,{sortable:!0,field:"createdOn",header:"Created On",body:function(e){return(0,u.jsx)("div",{title:N()(e.createdOn).format("DD-MMM-YYYY"),children:N()(e.createdOn).format("DD-MMM-YYYY")})}}),(0,u.jsx)(z.s,{field:"",header:"Actions",style:{textAlign:"center"},body:function(e){var t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Ze.DWq,{size:"1.8em",style:{color:"#428bca",cursor:"pointer",marginRight:"20px"},onClick:function(){return Kt(e.stackId)}}),1==(null===(t=lt[3])||void 0===t?void 0:t.is_write)?(0,u.jsx)(u.Fragment,{children:("PM Approved"==e.approval||"Approved To Pay"==e.approval)&&(0,u.jsx)(b.QML,{size:"1.5em",style:{cursor:"pointer",marginRight:"-20px"},color:"orange",onClick:function(t){De(!1),pe(e),Mt(e),je(Object.keys(e.dropDown[0])[0])}})}):""]})}})]}),1==(null===it||void 0===it?void 0:it.is_write)?(0,u.jsxs)("div",{style:{display:"flex",border:"1px solid #ECF0F1"},children:[(0,u.jsxs)("button",{className:"btn btn-primary ms-1 p-1","data-toggle":"tooltip",title:"Save row",onClick:function(){var e={stackId:me.stackId,newStatusId:parseInt(fe)};v().post(st+"/ProjectMS/projectExpenses/saveStackExpenses",e,{headers:{"Content-Type":"application/json"}}).then((function(e){Ne(!0),setTimeout((function(){Ne(!1)}),3e3),pe({}),ht()})).catch((function(e){return console.log(e)}))},disabled:Se,children:[(0,u.jsx)(r.TvB,{}),"Save"]}),(0,u.jsxs)("button",{className:"btn btn-primary ms-1 p-1","data-toggle":"tooltip",title:"Cancel row editing",onClick:function(){De(!0),pe({})},disabled:Se,children:[(0,u.jsx)(M.sQZ,{size:"11px"}),"Cancel"]})]}):""]}):"",T?(0,u.jsx)(Wt,{setPopUp:A,data:F,popUp:T,totalData:i}):"",dt&&(0,u.jsx)(Qe.Z,{handleClose:mt,anchorEl:dt,rowData:gt}),K?(0,u.jsx)(D.Z,{handleAbort:function(){return W(!1)}}):""]})};var tt=function(e){var t=e.projectId,n=e.grp3Items,l=(n.find((function(e){return"Expenses"===e.display_name})),c.N.baseUrl),i=(0,a.useState)("My Approval Requests"),o=(0,s.Z)(i,2),r=o[0],d=o[1],m=(0,a.useState)([]),p=(0,s.Z)(m,2),h=p[0],f=p[1],j=localStorage.getItem("resId"),x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],N=g[1];(0,a.useEffect)((function(){b()}),[]);var b=function(){v()({method:"GET",url:l+"/CommonMS/master/getMenus?loggedUserId=".concat(j)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&N([e])}))}))};(0,a.useEffect)((function(){v()({method:"get",url:l+"/ProjectMS/Audit/getProjectName?projectId=".concat(t)}).then((function(e){var t=e.data;f(t)})).catch((function(e){}))}),[]);var _=(0,a.useRef)(null),S=function(){_.current&&_.current.abort()};return(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:h})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Expenses"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:y,currentScreenName:["Projects","Open","Monitoring","Expenses"]}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"tabs",children:[(0,u.jsx)("button",{className:"My Requests"===r?"buttonDisplayClick":"buttonDisplay",onClick:function(){d("My Requests")},children:"My Requests"}),(0,u.jsx)("button",{className:"Team Requests"===r?"buttonDisplayClick":"buttonDisplay",onClick:function(){d("Team Requests")},children:"Team Requests"}),(0,u.jsx)("button",{className:"My Approval Requests"===r?"buttonDisplayClick":"buttonDisplay",onClick:function(){d("My Approval Requests")},children:"My Approval Requests"})]}),"My Requests"===r?(0,u.jsx)(Je,{projectId:t,handleAbort:S}):"","Team Requests"===r?(0,u.jsx)(Xe,{projectId:t,handleAbort:S}):"","My Approval Requests"===r?(0,u.jsx)(et,{projectId:t,handleAbort:S,grp3Items:n}):""]})]})},nt=n(96739);var st=function(e){var t=e.projectId,n=(0,a.useState)([]),i=(0,s.Z)(n,2),d=i[0],m=i[1],p=(0,a.useState)([]),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)([]),g=(0,s.Z)(x,2),y=g[0],_=g[1],S=(0,a.useState)([]),D=(0,s.Z)(S,2),C=D[0],Z=D[1],w=(0,a.useState)(!1),M=(0,s.Z)(w,2),k=M[0],I=M[1],P=(0,a.useState)("Approved"),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)(!1),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=(0,a.useState)(!1),L=(0,s.Z)(H,2),U=L[0],q=L[1],V=(0,a.useState)(!1),G=(0,s.Z)(V,2),K=G[0],W=G[1],Q=c.N.baseUrl,J=function(){v().get(Q+"/customersms/Customers/getResourdceApproval?cid=".concat(t)).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].from_dt=null==t[n].from_dt?"":N()(t[n].from_dt).format("DD-MMM-yyyy"),t[n].to_dt=null==t[n].to_dt?"":N()(t[n].to_dt).format("DD-MMM-yyyy");m([{employee_number:"Employee ID",Resource:"Resource",RoleName:"Role Name",from_dt:"From Date",to_dt:"To Date",effort_hours:"Effort  Hours",AllocationType:"Allocation Type",BookingStatus:"Booking Status",comments:"Comments"}].concat(t)),j(t)}))},X=function(e){if(E(e.target.value),0==K)O(!0);else{O(!1);var t=[];Object.keys(d).forEach((function(n){if("object"!=typeof d[n]&&"undefined"!=n){var s={};s.id=n,s.comments=d[n].includes([null,""])?null:d[n],s.status_id="Approved"==e.target.value?475:476,t.push(s)}})),v()({method:"post",url:Q+"/ProjectMS/Audit/updatecomments",data:t}).then((function(e){e.data;J(),I(!0),q(!0),setTimeout((function(){I(!1),q(!1)}),3e3)}))}};(0,a.useEffect)((function(){J(),j(),$()}),[]);var $=function(){v()({method:"get",url:Q+"/ProjectMS/Audit/getProjectName?projectId=".concat(t)}).then((function(e){var t=e.data;_(t)}))},ee=function(e,t){m((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},t.id,e.target.value))}))};return(0,u.jsxs)("div",{children:[k&&"Approved"==A?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsx)("span",{className:"errMsg",children:"\xa0 Successfully booked resources"})}):"",U&&"Rejected"==A?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsx)("span",{className:"errMsg",children:"\xa0 Rejected booked resources"})}):"",Y?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"error",children:[(0,u.jsx)(b.CSE,{}),"\xa0 Please Select atleast one resource"]})}):"",(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:y})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Resource Approvals"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)("br",{}),(0,u.jsx)("div",{className:"darkHeader",children:(0,u.jsxs)(B.w,{className:"customerEngament body",value:f,paginator:!0,selection:K,selectAll:!0,rows:10,showGridlines:!0,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},responsiveLayout:"scroll",onSelectionChange:function(e){return function(e){W(e.value);var t=e.value.map((function(e){return m((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},e.id,""))})),e.id}));Z(t)}(e)},children:[(0,u.jsx)(z.s,{alignHeader:"center",style:{textAlign:"center"},selectionMode:(null===f||void 0===f?void 0:f.length)>0?"multiple":""}),(0,u.jsx)(z.s,{field:"EmployeeID",header:" Employee ID",body:function(e){return(0,u.jsx)("span",{title:e.employee_number,children:e.employee_number})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"Resource",header:"  Resource",body:function(e){return(0,u.jsx)(u.Fragment,{children:1122==e.rmg_bench_type_id?(0,u.jsx)("span",{className:"vertical-align-middle ml-2",style:{color:"red"},title:"Overallocated",children:e.Resource}):(0,u.jsx)("span",{className:"vertical-align-middle ml-2",style:{color:"black"},title:e.Resource,children:e.Resource})})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"Role Name",header:" Role Name",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("span",{title:e.RoleName,children:e.RoleName})})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"From Date",header:" From Date",body:function(e){return(0,u.jsx)("span",{title:e.from_dt,children:e.from_dt})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"To Date",header:" To Date",body:function(e){return(0,u.jsx)("span",{title:e.to_dt,children:e.to_dt})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"Effort  Hours",header:" Effort  Hours",body:function(e){return(0,u.jsx)("div",{title:e.effort_hours,children:e.effort_hours})},alignHeader:"center",style:{textAlign:"left"}}),(0,u.jsx)(z.s,{field:"Allocation Type",header:" Allocation Type",body:function(e){return(0,u.jsx)("span",{title:e.AllocationType,children:e.AllocationType})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"Booking Status",header:" Booking Status",body:function(e){return(0,u.jsx)("span",{title:e.BookingStatus,children:e.BookingStatus})},alignHeader:"center"}),(0,u.jsx)(z.s,{field:"comments",id:"comments",header:" Comments",body:function(e){return(0,u.jsx)(u.Fragment,{children:C.includes(e.id)?(0,u.jsx)("input",{type:"text",id:"comments",onChange:function(t){ee(t,e)}}):(0,u.jsx)("span",{title:e.comments,children:e.comments})})},alignHeader:"center"})]})}),(0,u.jsxs)("div",{class:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[0===(null===f||void 0===f?void 0:f.length)?(0,u.jsxs)("button",{type:"submit",value:"Approved",disabled:"disabled",className:"btn btn-primary",children:[" ",(0,u.jsx)(r.TvB,{}),"Approve"]}):(0,u.jsxs)("button",{type:"submit",value:"Approved",onClick:function(e){X(e)},className:"btn btn-primary",children:[" ",(0,u.jsx)(r.TvB,{}),"Approve"]}),0===(null===f||void 0===f?void 0:f.length)?(0,u.jsxs)("button",{type:"submit",className:"btn btn-secondary",value:"Rejected",disabled:!0,style:{cursor:"not - allowed"},children:[" ",(0,u.jsx)(nt.Z,{}),"Reject"]}):(0,u.jsxs)("button",{type:"submit",className:"btn btn-secondary",onClick:function(e){X(e)},value:"Rejected",children:[" ",(0,u.jsx)(nt.Z,{}),"Reject"]})]})]})},at=n(73220);n(50919),n(35125);n(31052);var lt=function(e){var t=e.data,n=e.rows,l=(e.col,e.headerdatagroup,e.linkColumns,e.linkColumnsRoutes,e.dynamicColumns),i=e.headerData,o=e.setHeaderData,r=(e.exportData,e.customFilters,e.customFilterValue,e.setCustomFilterValue,(0,a.useState)([])),c=(0,s.Z)(r,2),d=c[0],m=c[1],p=(0,a.useState)([]),h=(0,s.Z)(p,2),v=h[0],f=h[1],j=(0,a.useState)([]),x=(0,s.Z)(j,2),g=(x[0],x[1]),y=(0,a.useRef)(null);(0,a.useEffect)((function(){m(JSON.parse(JSON.stringify(t)))}),[t]),(0,a.useEffect)((function(){if(d.length>0){o(d[0]),f(d.splice(1));var e=[],t=d[0];Object.keys(t).forEach((function(n){"StatusId"!=n&&e.push({title:t[n],dataKey:n})})),g(e)}}),[d]);var N={contains:{value:null,matchMode:K.a6.CONTAINS}},b=(0,a.useState)({global:N.contains}),_=(0,s.Z)(b,2),S=(_[0],_[1]);(0,a.useEffect)((function(){S({global:N.contains})}),[i]);var D=(0,a.useState)(""),C=(0,s.Z)(D,2);return C[0],C[1],(0,u.jsx)("div",{children:Object.keys(i).length>0&&(0,u.jsx)(B.w,{value:v,showGridlines:!0,rows:n,dataKey:"id",responsiveLayout:"scroll",emptyMessage:"No Older Versions",ref:function(e){y.current=e},className:"customerEngament primeReactDataTable",children:l})})};var it=function(e){var t,n,i=(0,a.useState)([]),d=(0,s.Z)(i,2),m=d[0],h=d[1],f=(0,a.useState)(0),j=(0,s.Z)(f,2),x=j[0],y=j[1],S=e.projectId,D=e.grp3Items,C=D.find((function(e){return"Contract Documents"===e.display_name}));console.log(D[1].is_write);var w=c.N.baseUrl,I=(0,a.useState)([]),P=(0,s.Z)(I,2),T=P[0],E=P[1],R=(0,a.useState)(),Y=(0,s.Z)(R,2),O=Y[0],H=Y[1],L=(0,a.useState)(),B=(0,s.Z)(L,2),U=B[0],q=B[1],V=(0,a.useState)([]),G=(0,s.Z)(V,2),K=G[0],W=G[1],Q=(0,a.useState)([]),J=(0,s.Z)(Q,2),X=(J[0],J[1],(0,a.useState)([])),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,a.useState)([]),se=(0,s.Z)(ne,2),ae=(se[0],se[1]),le=(0,a.useRef)([]),ie=(0,a.useState)(!1),oe=(0,s.Z)(ie,2),re=oe[0],ce=oe[1],de=(0,a.useState)([]),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)(!1),ve=(0,s.Z)(he,2),fe=ve[0],je=ve[1],xe=(0,a.useState)(!1),ge=(0,s.Z)(xe,2),ye=ge[0],be=ge[1],_e=(0,a.useState)(),Se=(0,s.Z)(_e,2),De=Se[0],Ce=Se[1],Ze=(0,a.useState)(),Me=(0,s.Z)(Ze,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)([]),Te=(0,s.Z)(Pe,2),Ae=Te[0],Ee=Te[1],Re=localStorage.getItem("resId"),Fe=localStorage.getItem("resName"),Ye=(0,a.useState)([]),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=Oe[1],Be=(0,a.useState)(""),Ue=(0,s.Z)(Be,2),qe=(Ue[0],Ue[1]),Ve=(0,a.useState)([]),ze=(0,s.Z)(Ve,2),Ge=(ze[0],ze[1],(0,a.useState)(!1)),Qe=(0,s.Z)(Ge,2),Je=Qe[0],Xe=Qe[1],$e=(0,a.useState)(!1),et=(0,s.Z)($e,2),tt=et[0],nt=et[1],st=(0,a.useState)([]),it=(0,s.Z)(st,2),ot=it[0],rt=it[1],ct=(0,a.useState)([]),dt=(0,s.Z)(ct,2),ut=dt[0],mt=dt[1],pt=(0,a.useState)([]),ht=(0,s.Z)(pt,2),vt=(ht[0],ht[1]),ft=(0,a.useState)(!1),jt=(0,s.Z)(ft,2),xt=jt[0],gt=jt[1],yt=(0,a.useState)(!1),Nt=(0,s.Z)(yt,2),bt=Nt[0],_t=Nt[1],St=(0,a.useState)([]),Dt=(0,s.Z)(St,2),Ct=Dt[0],Zt=Dt[1];(0,a.useEffect)((function(){wt()}),[]);var wt=function(){v()({method:"GET",url:w+"/CommonMS/master/getMenus?loggedUserId=".concat(Re)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Zt([e])}))}))};(0,a.useEffect)((function(){Mt()}),[]);var Mt=function(){v().get(w+"/ProjectMS/ContractDocuments/getFolderId?projectId=".concat(S)).then((function(e){var t=e.data;h(t)})).catch((function(e){return console.log(e)}))},kt={projectId:S,frmDt:"",toDt:"",amount:"",documentType:"",legalEntityType:"",poNumber:"",docSignedBy:"",ObjectTypeCode:"ProjectSow",isActive:"1",CreatedBy:Fe,CreatedById:Re,lastUpdatedBy:""},It=(0,a.useState)(kt),Pt=(0,s.Z)(It,2),Tt=Pt[0],At=Pt[1],Et=function(){v().get(w+"/ProjectMS/ContractDocuments/getContractDocuments?projectId=".concat(S)).then((function(e){var t=e.data;E([{lkup_name:"Document Type",sow_name:"Document Name",date_created:"Created Date",created_by:"Uploaded By",frm_dt:"Start Date",to_dt:"End Date",amount:"Amount",po_number:"PO Number"}].concat(t)),rt(t)})).catch((function(e){console.log("Error :"+e)}))},Rt=document.createElement("div");Rt.innerHTML=null===(t=me[0])||void 0===t?void 0:t.currency;var Ft=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(){return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:w+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;W(t)})).catch((function(e){console.log("error :"+e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Yt=function(e){var t=e.target,n=t.id,s=(t.name,t.value);At((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},n,s))}))},Ot=function(){v()({method:"get",url:w+"/ProjectMS/ContractDocuments/getFileNames?projectId=".concat(S)}).then((function(e){var t=e.data;Ie(t)})).catch((function(e){console.log(e)}))};(0,a.useEffect)((function(){Ot()}),[S]);var Ht=function(e){return qe(null===e||void 0===e?void 0:e.document_id),vt(e.doc_folder_id),(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:N()(e.date_created).format("DD-MMM-yyyy-hh:mm:ss A"),children:null==e.date_created||""==e.date_created?"":N()(e.date_created).format("DD-MMM-yyyy-hh:mm:ss A")})},Lt=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.lkup_name,children:e.lkup_name})},Bt=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.created_by,children:e.created_by})},Ut=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:N()(e.frm_dt).format("DD-MMM-yyyy"),children:null==e.frm_dt||""==e.frm_dt?"":N()(e.frm_dt).format("DD-MMM-yyyy")})},qt=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:N()(e.to_dt).format("DD-MMM-yyyy"),children:null==e.to_dt||""==e.to_dt?"":N()(e.to_dt).format("DD-MMM-yyyy")})},Vt=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:null===e.amount?"":Rt.innerHTML+" "+e.amount.toLocaleString("en-IN"),children:(0,u.jsx)("span",{children:null===e.amount?"":Rt.innerHTML+" "+e.amount.toLocaleString("en-IN")})})},zt=function(e){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.po_number,children:e.po_number})},Gt=function(e,t){return(0,u.jsx)("div",{className:"ellipsis",align:"left","data-toggle":"tooltip",title:e.sow_name,style:{cursor:"pointer",color:"#2E88C5"},onClick:function(){nt(!0),rt(e),gt(!1),_t(!1)},children:e.sow_name})},Kt=null===(n=Object.keys(ee))||void 0===n?void 0:n.map((function(e,t){return(0,u.jsx)(z.s,{sortable:!0,body:"date_created"==e?Ht:"lkup_name"==e?Lt:"sow_name"==e?Gt:"created_by"==e?Bt:"frm_dt"==e?Ut:"to_dt"==e?qt:"amount"==e?Vt:"po_number"==e?zt:"",field:e,header:ee[e]},e)}));function Wt(e){var t,n=e.docId,l=e.deletePopup,i=e.setDeletePopup,o=e.tableData,r=e.isTableVisible,c=e.setIsTableVisible,d=e.fileVisible,m=e.setFileVisible,h=e.documnetFolderId,f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=j[1],y=(0,a.useState)([]),N=(0,s.Z)(y,2),_=N[0],S=N[1],M=(0,a.useState)([]),k=(0,s.Z)(M,2),I=k[0],P=k[1],T=(0,a.useState)([]),A=(0,s.Z)(T,2),E=A[0],R=A[1],F=(0,a.useState)([]),Y=(0,s.Z)(F,2),O=Y[0],H=Y[1],L=(0,a.useState)([]),B=(0,s.Z)(L,2),U=B[0],q=B[1],V=(0,a.useState)(!1),G=(0,s.Z)(V,2),K=G[0],W=G[1],Q=(0,a.useState)(0),J=(0,s.Z)(Q,2),X=J[0],$=J[1],ee=(0,a.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1];(0,a.useEffect)((function(){S(n.document_id),R(n.document_id),se(n.svn_revision),P(n.file_name)}),[n]);var ae=(0,Ne.Z)({dialog:{position:"absolute",top:"250px",minHeight:"18%"},textField:{border:"1px solid rgb(159 13 13)"}})(),le=function(e){return(0,u.jsx)("div",{align:"center",children:(0,u.jsx)("a",{className:"linkSty",onClick:function(){return function(e){var t=w+"/VendorMS/vendor/downloadFile?documentId=".concat(e.document_id,"&svnRevision=").concat(e.svn_revision);v()({url:t,method:"GET",responseType:"blob"}).then((function(t){var n=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=n,s.setAttribute("download",e.file_name),document.body.appendChild(s),s.click()}))}(e)},children:(0,u.jsx)("ul",{style:{textDecoration:"underLine",marginBottom:"0px"},children:e.app_revision.toFixed(1)})})})},ie=function(e){return(0,u.jsx)("div",{align:"center",children:e.updatedBy})},oe=null===(t=Object.keys(x))||void 0===t?void 0:t.map((function(e,t){return(0,u.jsx)(z.s,{body:"app_revision"==e?le:"updatedBy"==e?ie:"",field:e,header:x[e]},e)}));(0,a.useEffect)((function(){_&&_.length>0&&g(JSON.parse(JSON.stringify(_[0])))}),[_]);var re=(0,a.useState)(!1),ce=(0,s.Z)(re,2),de=ce[0],ue=ce[1],me=(0,a.useState)(!1),pe=(0,s.Z)(me,2),he=pe[0],ve=pe[1];return(0,u.jsx)("div",{className:"reviewLogDeletePopUp",children:(0,u.jsxs)(p.Tk,{backdrop:"static",visible:l,alignment:"center",size:"md",className:"reviewLogDeletePopUp",onClose:function(){return i(!1)},classes:{paper:ae.dialog},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Contract Document Details"})})}),(0,u.jsxs)(p.sD,{style:{border:"1px solid #ccc",padding:"5px 10px 20px"},children:[he?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please Select a file to update"]}):"",de?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please Select the same file to update"]}):"",K?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),U," ","updated successfully."]}):"",(0,u.jsxs)("div",{style:{border:"1px solid #cdcdcd"},children:[(0,u.jsx)("h3",{style:{fontSize:"initial",border:"1px solid #cdcdcd",color:"#297AB0",padding:"5px"},children:"Document"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("a",{className:"linkSty",onClick:function(){!function(e){var t=w+"/VendorMS/vendor/downloadFile?documentId=".concat(_,"&svnRevision=").concat(ne);v()({url:t,method:"GET",responseType:"blob"}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download",I),document.body.appendChild(n),n.click()}))}()},children:(0,u.jsxs)("ul",{style:{textDecoration:"underLine",marginBottom:"0px",padding:"5px"},children:[(0,u.jsx)(Z.yf7,{}),"\xa0",n.sow_name]},n.document_id)}),(0,u.jsxs)("div",{style:{padding:"5px",marginTop:"-14px"},children:[(0,u.jsx)("a",{className:"linkSty",children:(0,u.jsx)("ul",{style:{textDecoration:"underLine",marginBottom:"0px",display:"inline"},children:1==D[1].is_write?(0,u.jsxs)("span",{onClick:function(){c(!1),m(!0)},children:["Update"," "]}):""})}),1==(null===C||void 0===C?void 0:C.is_write)?(0,u.jsx)("span",{style:{color:"black"},children:" \xa0|\xa0"}):"",(0,u.jsx)("button",{onClick:function(){v().get(w+"/ProjectMS/ContractDocuments/getPopupData?docid=".concat(E)).then((function(e){mt([{app_revision:"Older Versions",updatedBy:"Updated By"}].concat(e.data)),c(!r)})).catch((function(e){console.error("Error fetching table data:",e)})),c(!1),m(!1)},style:{display:"inline",fontSize:"11px",padding:"0px 7px",borderRadius:"3px",textDecoration:"none !important",border:"1px solid black"},children:"Version History"})]}),r?(0,u.jsx)("div",{className:"document",children:(0,u.jsx)(lt,{rows:10,data:o,dynamicColumns:oe,headerData:x,setHeaderData:g})}):"",d&&(0,u.jsxs)("div",{className:"row mb-1",style:{border:"1px solid #cdcdcd",padding:"8px",marginLeft:"3px",marginRight:"3px",marginTop:"-1px"},children:[(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("input",{type:"file",name:"file",className:"contractDocument",id:"file",onChange:function(e){H(e.target.files[0]),q(e.target.files[0].name)}},X)}),(0,u.jsx)("div",{className:"col-2",children:(0,u.jsx)("input",{type:"text",style:{marginTop:"4px",marginLeft:"18px",width:"69px !important;"},placeholder:"version"})}),(0,u.jsx)("div",{className:"col-3",children:(0,u.jsx)("button",{type:"submit",className:"btn btn-primary",title:"Update",style:{marginLeft:"16px",height:"23px",marginTop:"4px"},onClick:function(){if(0===O.length)ue(!1),ve(!0),setTimeout((function(){ve(!1)}),3e3);else if(O&&I!==U)ue(!0),setTimeout((function(){ue(!1)}),3e3),ve(!1);else{var e;v().postForm(w+"/ProjectMS/ContractDocuments/upload?fileRevision=1.0&folderId=".concat(null===(e=h[0])||void 0===e?void 0:e.id,"&loggedUserId=").concat(Re),{files:O},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){W(!0),ue(!1),setTimeout((function(){W(!1)}),3e3),$((function(e){return e+1})),H([])}))}},children:"Update"})})]})]})]})]})]})})}(new FormData).append("file",He);var Qt=function(){y((function(e){return e+1})),At(""),Le(0),H(""),q("");for(var e=document.getElementsByClassName("cancel"),t=0;t<e.length;t++){var n;if(e[t].value="",e[t].classList.contains("reactautocomplete"))null===(n=e[t].children[0].children[0].children[0].children[0].children[0].children[1])||void 0===n||n.click()}(0,at.Z)(le)};return(0,a.useEffect)((function(){T[0]&&te(JSON.parse(JSON.stringify(T[0])))}),[T]),(0,a.useEffect)((function(){Et(),Ft(),v().get(w+"/ProjectMS/Audit/getloggeduser?loggedId=".concat(Re)).then((function(e){var t=e.data;ae(t)})).catch((function(e){return console.log(e)})),v()({method:"get",url:w+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(S)}).then((function(e){var t=e.data;pe(t)})).catch((function(e){})),v()({method:"get",url:w+"/ProjectMS/ContractDocuments/getPONumber?projectId=".concat(S)}).then((function(e){var t=e.data;Ce(t)})).catch((function(e){console.log(e)}))}),[]),(0,u.jsxs)("div",{children:[Je?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," ",Ae," already exists in Project/",S,"/SOW/"]}):"",re?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsxs)("span",{children:[" ",(0,u.jsx)(we.SZZ,{})," Please select the valid values for highlighted fields"," "]})]}):"",fe?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Project Contract Document saved successfully."]}):"",ye?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," Please Give Unique PO Number"]}):"",(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsxs)("div",{className:"pageTitle",children:[me.map((function(e){return(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:e.projectName})})})),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Contract Documents"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:Ct,currentScreenName:["Projects","Open","Financials","Contract Documents"]}),1==D[1].is_write?(0,u.jsxs)("div",{className:"group mb-3 customCard",children:[(0,u.jsx)("h2",{children:"Add Contract Document"}),(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsxs)("div",{className:"form-group col-md-8 mb-2",id:"UploadDocument",children:[(0,u.jsxs)("label",{htmlFor:"updateDocument",children:["Upload Document\xa0",(0,u.jsx)("span",{className:"required error-text",children:"*"})]}),(0,u.jsx)("input",{type:"file",name:"file",className:"fileUpload unique1 form-control",id:"file",onChange:function(e){var t;Le(e.target.files[0]),Ee(null===(t=e.target.files[0])||void 0===t?void 0:t.name),At((function(t){var n;return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},e.target.id,null===(n=e.target.files[0])||void 0===n?void 0:n.name))}))}},x)]}),(0,u.jsxs)("div",{className:"form-group col-md-4 mb-2",children:[(0,u.jsxs)("label",{htmlFor:"documentType",children:["Document Type\xa0",(0,u.jsx)("span",{className:"required error-text",children:"*"})]}),(0,u.jsxs)("select",{className:"text cancel",id:"documentType",name:"documentType",onChange:function(e){var t=e.target,n=t.value,s=t.id;("386"==n||"387"==n||"384"==n||"385"==n)&&(0,at.Z)(le),At((0,o.Z)((0,o.Z)({},Tt),{},(0,l.Z)({},s,n)))},ref:function(e){le.current[385==Tt.documentType?"":0]=e},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),(0,u.jsx)("option",{value:"386",children:"Email"}),(0,u.jsx)("option",{value:"387",children:"Others"}),(0,u.jsx)("option",{value:"385",children:"PO"}),(0,u.jsx)("option",{value:"384",children:"SOW"})]})]}),385==Tt.documentType?(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsxs)("label",{htmlFor:"startDate",children:["PO Number\xa0",(0,u.jsx)("span",{className:"required error-text",children:"*"})]}),(0,u.jsx)("div",{className:"textfield cancel",ref:function(e){le.current[385==Tt.documentType?0:""]=e},children:(0,u.jsx)("input",{type:"text",name:"poNumber",id:"poNumber",className:"unique cancel",onChange:Yt})})]}):"",(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsxs)("label",{htmlFor:"startDate",children:["Start Date"," ","384"==Tt.documentType||""==Tt.documentType||void 0==Tt.documentType||"385"==Tt.documentType?(0,u.jsx)("span",{className:"required error-text",children:"\xa0*"}):""]}),(0,u.jsx)("div",{className:"datepicker",ref:function(e){le.current[385==Tt.documentType?1:386==Tt.documentType||387==Tt.documentType?"":1]=e},children:(0,u.jsx)(g(),{name:"frmDt",selected:O,id:"frmDt",className:"err cancel",dateFormat:"dd-MMM-yyyy",placeholderText:"Start Date",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){At((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"frmDt",N()(e).format("yyyy-MM-DD")))})),H(e)},onKeyDown:function(e){},autoComplete:"false"})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsxs)("label",{htmlFor:"endDate",children:["End Date"," ","384"==Tt.documentType||""==Tt.documentType||void 0==Tt.documentType||"385"==Tt.documentType?(0,u.jsx)("span",{className:"required error-text",children:"\xa0*"}):""]}),(0,u.jsx)("div",{className:"datepicker cancel",ref:function(e){le.current[385==Tt.documentType?2:386==Tt.documentType||387==Tt.documentType?"":2]=e},children:(0,u.jsx)(g(),{name:"toDt",selected:U,id:"toDt",minDate:new Date(Tt.frmDt),className:"err cancel",dateFormat:"dd-MMM-yyyy",placeholderText:"End Date",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){At((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"toDt",N()(e).format("yyyy-MM-DD")))})),q(e)},onKeyDown:function(e){},autoComplete:"false"})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsxs)("label",{htmlFor:"amount",children:["Amount"," ","384"==Tt.documentType||""==Tt.documentType||void 0==Tt.documentType||"385"==Tt.documentType?(0,u.jsx)("span",{className:"required error-text",children:"\xa0*"}):""]}),(0,u.jsx)("div",{className:"textfield cancel",ref:function(e){le.current[385==Tt.documentType?3:386==Tt.documentType||387==Tt.documentType?"":3]=e},children:(0,u.jsx)("input",{name:"amount",type:"text",className:"cancel",id:"amount",placeholder:"Amount",required:!0,maxLength:10,onKeyDown:function(e){return e.keyCode&&(e.keyCode<=47||e.keyCode>=58)&&8!=e.keyCode&&e.preventDefault()},onChange:Yt})})]}),(0,u.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,u.jsx)("label",{htmlFor:"legalEntityType",children:"Legal Entity"}),(0,u.jsxs)("select",{id:"legalEntityType",name:"legalEntityType",className:"cancel",onChange:function(e){var t=e.target,n=t.value,s=t.id;At((0,o.Z)((0,o.Z)({},Tt),{},(0,l.Z)({},s,n)))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),(0,u.jsx)("option",{value:"3",children:"Prolifics Corporation Limited"}),(0,u.jsx)("option",{value:"4",children:"Prolifics Inc"}),(0,u.jsx)("option",{value:"5",children:"Prolifics Testing Inc."}),(0,u.jsx)("option",{value:"6",children:"Prolifics Canada Inc."}),(0,u.jsx)("option",{value:"7",children:"Prolifics Application Services Inc."})]})]}),(0,u.jsxs)("div",{className:"form-group col-md-4 mb-2",children:[(0,u.jsx)("label",{htmlFor:"signedBy",children:"Signed By [Company Side]"}),(0,u.jsx)("div",{className:"autoComplete-container cancel error autocomplete reactautocomplete",id:"autocomplete reactautocomplete",children:(0,u.jsx)(F.Z,{name:"docSignedBy",id:"docSignedBy",value:"0",riskDetails:K,getData:Ft,setFormData:At,onChangeHandler:function(e){var t=e.target,n=(t.id,t.value);At((function(e){return(0,o.Z)((0,o.Z)({},e),{},{docSignedBy:n})}))},onClear:function(){At((function(e){return(0,o.Z)((0,o.Z)({},e),{},{docSignedBy:null})}))}})})]})]})]}):"",1==(null===C||void 0===C?void 0:C.is_write)?(0,u.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){return function(e){var t;0!==He&&0!==He.length&&void 0!=He||(ce(!0),setTimeout((function(){ce(!1)}),5e3),be(!1),Xe(!1));var n=le.current.filter((function(e){return null!=e}));if(le.current=n,(0,_.Z)(le))return ce(!0),void setTimeout((function(){ce(!1)}),5e3);var s=De.filter((function(e){return null!==e})).some((function(e){return e.po_number==Tt.poNumber})),a=ke.filter((function(e){return null!==e})).some((function(e){return e.sow_name==Ae}));if(s){for(var l=document.getElementsByClassName("unique"),i=0;i<l.length;i++)l[i].classList.add("error-block");return be(!0),ce(!1),void setTimeout((function(){be(!1)}),3e3)}if(a){for(var o=document.getElementsByClassName("unique1"),r=0;r<o.length;r++)o[r].classList.add("error-block");return Xe(!0),ce(!1),void setTimeout((function(){Xe(!1)}),3e3)}v().postForm(w+"/ProjectMS/ContractDocuments/SaveAndUpload?docFolderId=".concat(null===(t=m[0])||void 0===t?void 0:t.id,"&loggedUserId=").concat(Re,"&commitMessage=projectDocuments"),{file:He,ProjectSow:JSON.stringify({projectId:S,sowName:Ae,frmDt:Tt.frmDt,toDt:Tt.toDt,amount:null==Tt.amount||""==Tt.amount?0:Tt.amount,documentType:Tt.documentType,poNumber:Tt.poNumber,legalEntityType:Tt.legalEntityType,docSignedBy:Tt.docSignedBy})},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){je(!0),ce(!1),Ot(),Le(Ae),setTimeout((function(){je(!1),be(!1)}),3e3),Et(),(0,at.Z)(le),H(""),q("")})),Qt(),y((function(e){return e+1}))}()},children:[(0,u.jsx)(r.TvB,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",onClick:Qt,children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]}):"",(0,u.jsxs)("div",{className:"row group mb-2 customCard",children:[(0,u.jsx)("h2",{className:"col-md-12 mx-3",children:"Contract Document List"}),(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)(A.Z,{data:T,dynamicColumns:Kt,headerData:ee,setHeaderData:te,rows:10})})]}),tt?(0,u.jsx)(Wt,{deletePopup:tt,setDeletePopup:nt,docId:ot,tableData:ut,isTableVisible:xt,setIsTableVisible:gt,fileVisible:bt,setFileVisible:_t,documnetFolderId:m}):""]})},ot=n(37762),rt=n(58218);var ct=function(e){var t=e.projectId,n=e.grp4Items,i=n.find((function(e){return"Defects"===e.display_name})),d=localStorage.getItem("resId"),m=(0,a.useState)([]),p=(0,s.Z)(m,2),h=p[0],f=p[1],j=(0,a.useState)([]),x=(0,s.Z)(j,2),y=x[0],_=x[1],S=(0,a.useState)(!1),C=(0,s.Z)(S,2),w=C[0],I=C[1],P=(0,a.useState)(null),T=(0,s.Z)(P,2),A=T[0],E=(T[1],(0,a.useState)([])),R=(0,s.Z)(E,2),F=(R[0],R[1]),Y=(0,a.useState)(!1),H=(0,s.Z)(Y,2),L=H[0],U=H[1],q=(0,a.useState)(!1),V=(0,s.Z)(q,2),G=V[0],W=V[1],Q=(0,a.useState)(!0),J=(0,s.Z)(Q,2),X=J[0],$=J[1],ee=(0,a.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],ae=c.N.baseUrl,le=(0,a.useRef)(null),ie=(0,a.useRef)(null),oe=(0,a.useState)({filters:{global:{value:null,matchMode:K.a6.CONTAINS},event_name:{value:null,matchMode:K.a6.CONTAINS},event_date:{value:null,matchMode:K.a6.CONTAINS},comments:{value:null,matchMode:K.a6.CONTAINS}}}),re=(0,s.Z)(oe,2),ce=re[0],de=(re[1],{project_id:t,event_name:"",event_date:"",comments:""}),ue=(0,a.useState)(de),me=(0,s.Z)(ue,2),pe=me[0],he=me[1],ve=(0,a.useState)([]),fe=(0,s.Z)(ve,2),je=fe[0],xe=fe[1];(0,a.useEffect)((function(){ge()}),[]);var ge=function(){v()({method:"GET",url:ae+"/CommonMS/master/getMenus?loggedUserId=".concat(d)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&xe([e])}))}))},ye=document.getElementsByClassName("p-paginator-next p-paginator-element p-link"),Ne=document.getElementsByClassName("p-paginator-last p-paginator-element p-link");(0,a.useEffect)((function(){}),[pe]);var be=function(e){Object.keys(e).forEach((function(t){if(["",null,void 0," "].includes(e[t]))return f(h.slice(1)),void se((function(e){return!e}))}))};(0,a.useEffect)((function(){var e,t,n,s=h[0];if(null===(e=ye[0])||void 0===e||e.addEventListener("click",(function(){be(s)})),null===(t=Ne[0])||void 0===t||t.addEventListener("click",(function(){be(s)})),""==(null===(n=h[0])||void 0===n?void 0:n.event_name)){var a=document.getElementsByClassName("p-row-editor-init p-link")[0];a.setAttribute("title","Edit selected row"),a.click(),setTimeout((function(){document.getElementsByClassName("p-row-editor-save p-link")[0].setAttribute("title","Save row");var e=document.getElementsByClassName("p-row-editor-cancel p-link")[0];e.setAttribute("title","Cancel row editing"),null===e||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=h[0])||void 0===t?void 0:t.event_name)&&(f(h.slice(1,h.length)),$(!0),U(!1),se(!1),ie.current.forceUpdate())}),!0)}),200)}}),[h]);var _e=function(){W(!1),le.current=new AbortController,v()({url:ae+"/ProjectMS/ProjectEvents/getProjectEvents?pid=".concat(t),signal:le.current.signal}).then((function(e){var t,n=e.data,s=(0,ot.Z)(n);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.event_date=null==a.event_date?"":N()(a.event_date).format("DD-MMM-YYYY")}}catch(l){s.e(l)}finally{s.f()}f((function(){return n})),W(!1),setTimeout((function(){W(!1)}),1e3)}))},Se=function(e){if(""===e.event_name.trim()||""===e.event_date.trim())U(!0);else{var n=N()(e.event_date).format("yyyy-MM-DD");v()({method:"post",url:ae+"/ProjectMS/ProjectEvents/postProjectEvents",data:{id:e.id,projectId:t,eventName:e.event_name,eventDate:n,comments:e.comments}}).then((function(){_e(),U(!1),I(!0),setTimeout((function(){I(!1)}),1e3)})),$(!0),se(!1)}};return(0,a.useEffect)((function(){_e(),v()({method:"get",url:ae+"/ProjectMS/Audit/getProjectName?projectId=".concat(t)}).then((function(e){var t=e.data;_(t)}))}),[]),(0,u.jsxs)(u.Fragment,{children:[L?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(b.CSE,{}),"\xa0","Please provide valid values for highlighted values"]})}):"",w?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Event saved successfully."]}):"",(0,u.jsx)("div",{className:"col-md-12 mb-4 ",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:y})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Events"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:je,currentScreenName:["Projects","Open","Monitoring","Events"]}),(0,u.jsx)("div",{className:" p-fluid darkHeader mb-2",children:(0,u.jsxs)(B.w,{className:"primeReactDataTable eventsTable ",value:h,editMode:"row",rows:25,showGridlines:!0,paginator:!0,rowHover:!0,filters:ce.filters,onRowEditComplete:function(e){var t=(0,O.Z)(h),n=e.newData;t[e.index]=n,f(t),Se(e.newData)},tableStyle:{minWidth:"auto",width:"auto"},filterDisplay:"row",globalFilterFields:["event_name","event_date","comments"],currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[10,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},children:[(0,u.jsx)(z.s,{field:"sNo",header:"S.No",body:function(e,t){var n=h.indexOf(e)+1;return(0,u.jsx)("span",{children:n})},headerStyle:{width:"50px",backgroundColor:"#eeecec"},bodyStyle:{textAlign:"center"}}),(0,u.jsx)(z.s,{field:"event_name",header:(0,u.jsxs)("span",{children:["Event ",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),sortable:!0,style:{minWidth:"300px"},body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"ellipsis",id:"event_name",title:e.event_name,value:e.event_name,type:"text",autoComplete:"off",required:!0,disabled:!0})})},editor:function(e){return function(e){return F(e.rowData.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"error ".concat(L&&!e.rowData.event_name?"error-block":""),id:"event_name",type:"text",value:e.rowData.event_name,onChange:function(t){e.editorCallback(t.target.value)}})})}(e)},filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"event_date",header:(0,u.jsxs)("span",{children:["Date ",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),sortable:!0,style:{minWidth:"200px",textAlign:"center"},body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"event_date",title:e.event_date,value:e.event_date,type:"text",autoComplete:"off",required:!0,disabled:!0})})},editor:function(e){return function(e){var t=new Date;return(0,u.jsx)(g(),{className:"error ".concat(L&&!e.rowData.event_date?"error-block":""),name:"event_date",id:"event_date",selected:A,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",value:e.rowData.event_date,dateFormat:"dd-MMM-yyyy",onChange:function(t){var n=N()(t).format("DD-MMM-yyyy");e.editorCallback(n),he((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"event_date",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()},maxDate:t})}(e)},filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"comments",header:"Comments",sortable:!0,style:{minWidth:"400px"},body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"ellipsis",id:"comments",title:e.comments,value:e.comments,type:"text",autoComplete:"off",required:!0,disabled:!0})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(rt.g,{id:"comments",value:e.rowData.comments,onChange:function(t){return e.editorCallback(t.target.value)},rows:4,cols:20})})}(e)},filter:!0,filterMatchMode:"notEquals"}),1==n[8].is_write&&(0,u.jsx)(z.s,{field:"Actions",header:"Actions",rowEditor:!0,headerStyle:{width:"100px",backgroundColor:"#eeecec"},bodyStyle:{textAlign:"center"}})]})}),1==(null===i||void 0===i?void 0:i.is_write)?(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",disabled:ne,title:"Add new row",onClick:function(){document.getElementsByClassName("p-paginator-first p-paginator-element p-link")[0].click(),ne||(se(!0),$(!1));var e=[];e.push({event_name:"",event_date:"",comments:""}),f([].concat(e,(0,O.Z)(h)))},children:[(0,u.jsx)(r.wEH,{})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:X,title:"Save row",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()}()},children:[(0,u.jsx)(r.TvB,{}),"Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",disabled:X,title:"Cancel row editing",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),U(!1)}()},children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]}):"",G?(0,u.jsx)(D.Z,{handleAbort:function(){le.current&&le.current.abort(),W(!1)}}):""]})},dt=n(63428),ut=n(95854),mt=n(69184);n(77201);function pt(e){var t=e.projectId,n=e.grp4Items,i=n.find((function(e){return"Milestones"===e.display_name})),d=c.N.baseUrl,m=(0,a.useState)([]),p=(0,s.Z)(m,2),h=p[0],f=p[1],j=(0,a.useState)(!1),x=(0,s.Z)(j,2),y=x[0],_=(x[1],(0,a.useState)(!1)),S=(0,s.Z)(_,2),C=S[0],w=S[1],I=(0,a.useState)([]),P=(0,s.Z)(I,2),T=(P[0],P[1]),A=(0,a.useState)(!1),E=(0,s.Z)(A,2),R=E[0],F=E[1],Y=(0,a.useState)(!1),H=(0,s.Z)(Y,2),L=H[0],U=H[1],q=((0,a.useRef)([]),(0,a.useRef)(null));(0,a.useEffect)((function(){ve()}),[]);var V=(0,a.useState)(!0),G=(0,s.Z)(V,2),W=G[0],Q=G[1],J=(0,a.useState)({filters:{global:{value:null,matchMode:K.a6.CONTAINS},project_milestone:{value:null,matchMode:K.a6.CONTAINS},due_date:{value:null,matchMode:K.a6.CONTAINS},lkup_name:{value:null,matchMode:K.a6.CONTAINS},is_invoiceable:{value:null,matchMode:K.a6.CONTAINS},amount:{value:null,matchMode:K.a6.CONTAINS},comments:{value:null,matchMode:K.a6.CONTAINS},completed_date:{value:null,matchMode:K.a6.CONTAINS},invoice_id:{value:null,matchMode:K.a6.CONTAINS},invoice_status:{value:null,matchMode:K.a6.CONTAINS}}}),X=(0,s.Z)(J,2),$=X[0],ee=(X[1],{id:"",project_id:t,project_milestone:"",Status:588,due_date:"",comments:"",is_invoiceable:1,completed_date:"",amount:0}),te=localStorage.getItem("resId"),ne=(0,a.useState)([]),se=(0,s.Z)(ne,2),ae=se[0],le=se[1];(0,a.useEffect)((function(){ie()}),[]);var ie=function(){v()({method:"GET",url:d+"/CommonMS/master/getMenus?loggedUserId=".concat(te)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&le([e])}))}))},oe=(0,a.useState)(ee),re=(0,s.Z)(oe,2),ce=re[0],de=re[1];(0,a.useEffect)((function(){}),[ce]);var ue=document.getElementsByClassName("p-paginator-next p-paginator-element p-link"),me=document.getElementsByClassName("p-paginator-last p-paginator-element p-link"),pe=function(e){Object.keys(e).forEach((function(t){if(["",null,void 0," "].includes(e[t]))return f(h.slice(1)),void Oe((function(e){return!e}))}))};(0,a.useEffect)((function(){var e,t,n,s=h[0];if(null===(e=ue[0])||void 0===e||e.addEventListener("click",(function(){pe(s)})),null===(t=me[0])||void 0===t||t.addEventListener("click",(function(){pe(s)})),""==(null===(n=h[0])||void 0===n?void 0:n.project_milestone)){var a=document.getElementsByClassName("p-row-editor-init p-link")[0];a.setAttribute("title","Edit selected row"),a.click(),setTimeout((function(){document.getElementsByClassName("p-row-editor-save p-link")[0].setAttribute("title","Save row");var e=document.getElementsByClassName("p-row-editor-cancel p-link")[0];e.setAttribute("title","Cancel row editing"),null===e||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=h[0])||void 0===t?void 0:t.project_milestone)&&(f(h.slice(1,h.length)),Q(!0),Oe(!1),U(!1),q.current.forceUpdate())}),!0)}),200)}}),[h]);var he=(0,a.useRef)(null),ve=function(){F(!1),he.current=new AbortController,v()({url:d+"/ProjectMS/stakeholders/getMilestonedata?project_id=".concat(t),signal:he.current.signal}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].due_date=null==t[n].due_date?"":N()(t[n].due_date).format("DD-MMM-YYYY"),t[n].amount=null==t[n].amount?"":t[n].amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),t[n].completed_date=null==t[n].completed_date?"":N()(t[n].completed_date).format("DD-MMM-YYYY");for(var s=0;s<t.length;s++)"null"!=t[s]&&t[s],t[s].SNo=s+1;f((function(){return t})),F(!1),setTimeout((function(){F(!1)}),1e3)}))},fe=(0,a.useState)([]),je=(0,s.Z)(fe,2),xe=je[0],ge=je[1],ye=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(){return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:d+"/ProjectMS/stakeholders/getStatus"}).then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),ge(n)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){ye()}),[]);var Ne=(0,a.useState)([]),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=function(e){if(""===e.project_milestone||""===e.due_date)U(!0);else{var t=N()(e.due_date).format("yyyy-MM-DD"),n=N()(e.completed_date).format("yyyy-MM-DD");N()(_e).format("yyyy-MM-DD");v()({method:"post",url:d+"/ProjectMS/stakeholders/postMilestones",data:{id:e.id,project_id:e.project_id,project_milestone:e.project_milestone,due_date:t,statusId:""==e.status_id||void 0==e.status_id||null==e.status_id?559:e.status_id,comments:""==e.comments?"":e.comments,is_invoiceable:1==e.is_invoiceable?1:0,completed_date:560==e.status_id?N()(_e).format("YYYY-MM-DD"):N()(n).isValid()&&"Invalid date"!==n?n:"",amount:e.amount}}).then((function(e){ve(),U(!1),w(!0),setTimeout((function(){w(!1)}),3e3),setTimeout((function(){F(!1)}),1e3)})),Q(!0),Oe(!1)}},Ce=(0,a.useState)([]),Ze=(0,s.Z)(Ce,2),we=Ze[0],Me=Ze[1],ke=(0,a.useState)([]),Ie=(0,s.Z)(ke,2),Pe=(Ie[0],Ie[1]);(0,a.useEffect)((function(){v()({method:"get",url:d+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(t)}).then((function(e){var t=e.data;Pe(t)})).catch((function(e){})),v()({method:"get",url:d+"/ProjectMS/Audit/getProjectName?projectId=".concat(t)}).then((function(e){var t=e.data;Me(t)})).catch((function(e){}))}),[]);var Te=(0,a.useState)(),Ae=(0,s.Z)(Te,2),Ee=Ae[0],Re=(Ae[1],(0,a.useState)(!1)),Fe=(0,s.Z)(Re,2),Ye=Fe[0],Oe=Fe[1];(0,a.useEffect)((function(){}),[_e]);(0,a.useEffect)((function(){}),[ce]);var He=(0,a.useState)([]),Le=(0,s.Z)(He,2),Be=(Le[0],Le[1]),Ue=(0,a.useState)(),qe=(0,s.Z)(Ue,2),Ve=(qe[0],qe[1],(0,a.useState)()),ze=(0,s.Z)(Ve,2),Ge=ze[0],Qe=(ze[1],function(e){switch(e){case"In Progress":return"In Progress";case"On Hold":return"On Hold";case"Completed":return"Completed";default:return""}}),Je=function(e){return(0,u.jsx)(dt.V,{value:e,style:{backgroundColor:"white",color:"black"},severity:Qe(e)})},Xe=(0,a.useState)("[All]"),et=(0,s.Z)(Xe,2),tt=et[0],nt=et[1],st=(0,a.useState)(["[All]","In Progress","Completed","On Hold"]),at=(0,s.Z)(st,1)[0],lt=(0,a.useState)(h),it=(0,s.Z)(lt,2),ot=it[0],rt=it[1],ct=(0,a.useState)({filters:{global:{value:null,matchMode:K.a6.CONTAINS},due_date:{value:null,matchMode:K.a6.CONTAINS}}}),pt=(0,s.Z)(ct,2),ht=(pt[0],pt[1],(0,a.useState)("")),vt=(0,s.Z)(ht,2),ft=vt[0],jt=(vt[1],(0,a.useMemo)((function(){return ft?h.filter((function(e){return new Date(e.due_date).getTime()===new Date(ft).getTime()})):[]}),[ft])),xt=(0,a.useMemo)((function(){return ft?jt:[]}),[ft,jt]),gt=(0,a.useState)(""),yt=(0,s.Z)(gt,2),Nt=yt[0],bt=yt[1];(0,a.useEffect)((function(){var e;ft&&0===xt.length?bt("not matched"):xt.length>0&&void 0!==(null===(e=xt[0])||void 0===e?void 0:e.due_date)?bt("matched"):bt("")}),[ft,xt]);var _t=(0,a.useState)({filters:{global:{value:null,matchMode:K.a6.CONTAINS},completed_date:{value:null,matchMode:K.a6.CONTAINS}}}),St=(0,s.Z)(_t,2),Dt=(St[0],St[1],(0,a.useState)("")),Ct=(0,s.Z)(Dt,2),Zt=Ct[0],wt=(Ct[1],(0,a.useMemo)((function(){return Zt?h.filter((function(e){return new Date(e.completed_date).getTime()===new Date(Zt).getTime()})):[]}),[Zt])),Mt=(0,a.useMemo)((function(){return Zt?wt:[]}),[Zt,wt]),kt=(0,a.useState)(""),It=(0,s.Z)(kt,2),Pt=It[0],Tt=It[1];return(0,a.useEffect)((function(){var e;Zt&&0===Mt.length?Tt("not matched ComDate"):Mt.length>0&&void 0!==(null===(e=Mt[0])||void 0===e?void 0:e.completed_date)?Tt("matched ComDate"):Tt("")}),[Zt,Mt]),(0,u.jsxs)(u.Fragment,{children:[C?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(Z.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," ","\xa0Milestone saved successfully"]})}):""," ",y?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(Z.hXj,{size:"1.4em",strokeWidth:{width:"100px"}})," \xa0 Milestone saved successfully"]})}):"",L?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(b.CSE,{})," \xa0Please provide valid values for highlighted values"]})}):"",(0,u.jsx)("div",{className:"col-md-12 ",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:we})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Milestones"})}),(0,u.jsx)("div",{className:"childThree"})]})}),(0,u.jsx)(k.Z,{routes:ae,currentScreenName:["Projects","Open","Monitoring","Milestones"]}),(0,u.jsx)("div",{className:"p-fluid  mb-2 darkHeader",children:(0,u.jsxs)(B.w,{className:"primeReactDataTable eventsTable ",value:ot.length>0?ot:"matched"===Nt||"not matched"===Nt||Nt.length<0?xt:"matched ComDate"===Pt||"not matched ComDate"===Pt||Pt.length<0?Mt:h,editMode:"row",onRowEditComplete:function(e){var t=(0,O.Z)(h),n=e.newData;t[e.index]=n,f(t),De(e.newData)},showGridlines:!0,emptyMessage:"No Data Found",scrollDirection:"both",paginator:!0,rows:25,tableStyle:{minWidth:"auto",width:"auto"},rowHover:!0,dataKey:"id",filters:$.filters,paginationPerPage:5,rowsPerPageOptions:[10,25,50],paginationRowsPerPageOptions:[5,15,25,50],filterDisplay:"row",globalFilterFields:["project_milestone","status_id","amount","comments","completed_date","due_date"],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",children:[(0,u.jsx)(z.s,{header:"S.No",field:"SNo",body:function(e,t){var n=h.indexOf(e)+1;return(0,u.jsx)("span",{children:n})}}),(0,u.jsx)(z.s,{field:"project_milestone",header:(0,u.jsxs)("span",{children:["Milestone ",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),sortable:!0,body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"project_milestone",title:e.project_milestone,value:e.project_milestone,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return Be(e.rowData.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"text",id:"project_milestone",className:"error ".concat(L&&!e.rowData.project_milestone?"error-block":""),value:e.rowData.project_milestone,onChange:function(t){e.editorCallback(t.target.value)}})})}(e)},alignHeader:"center",filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"due_date",header:(0,u.jsxs)("span",{children:["Due Date ",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),sortable:!0,alignHeader:"center",filter:!0,filterMatchMode:"contains",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"due_date",value:e.due_date,type:"text",title:e.due_date,autoComplete:"off",required:!0,disabled:!0})})},editor:function(e){return function(e,t){return(0,u.jsx)(g(),{name:"due_date",selected:Ee,id:"due_date",className:"error ".concat(L&&!e.rowData.due_date?"error-block":""),value:e.rowData.due_date,dateFormat:"dd-MMM-yyyy",autoComplete:"off",showMonthDropdown:!0,showYearDropdown:!0,onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy")),de((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"due_date",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()}})}(e)}}),(0,u.jsx)(z.s,{field:"status",header:"Status",filter:!0,alignHeader:"center",showFilterMenu:!1,filterValue:tt,sortable:!0,editor:function(e){return function(e,t){return(0,u.jsxs)("select",{id:"status_id",name:"Status",className:"cancel",onChange:function(t){e.editorCallback(t.target.value),Se(560==t.target.value?N()(new Date).format("DD-MMM-YYYY"):""),xe.map((function(n){n.id==t.target.value&&(e.rowData.Status=n.lkup_name,e.rowData.status_id=t.target.value)}))},children:[(0,u.jsx)("option",{value:"558",children:"<<Please Select>>"}),null===xe||void 0===xe?void 0:xe.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.status_id,children:t.lkup_name},n)}))]})}(e)},body:function(e){var t=e.Status;if(null===tt||"[All]"===tt)return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"Status",value:t,type:"text",title:t,required:!0,disabled:!0})});if(t===tt){h.filter((function(e){return e.Status===tt}));return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"Status",value:tt,type:"text",title:tt,required:!0,disabled:!0})})}return null},filterMenuStyle:{width:"14rem"},filterElement:function(e){return(0,u.jsx)($e.L,{value:tt,options:at,onChange:function(e){var t=e.value;if(nt(t),"[All]"===t)rt(h);else{var n=h.filter((function(e){return e.Status===t}));rt(n)}},itemTemplate:Je,className:"p-column-filter",showClear:!1,children:(0,u.jsx)("span",{className:"p-dropdown-trigger-icon"})})},value:ot}),(0,u.jsx)(z.s,{field:"is_invoiceable",header:"Invoiceable",sortable:!0,alignHeader:"center",dataType:"boolean",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,u.jsx)("i",{className:(0,ut.AK)("pi",{"true-icon pi-check-circle disableField":e.is_invoiceable,"false-icon pi-times-circle  disableField":!e.is_invoiceable})})})})},filter:!0,filterElement:function(e){return(0,u.jsx)(mt.I,{value:e.value,onChange:function(t){return e.filterApplyCallback(t.value)}})},editor:function(e){return function(e){var t=1==e.rowData.is_invoiceable?1:0;return(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,u.jsx)("input",{type:"checkbox",id:"is_invoiceable",name:"is_invoiceable",defaultChecked:t,onChange:function(t){return e.editorCallback(t.target.checked?1:0)}})})}(e)}}),(0,u.jsx)(z.s,{field:"amount",header:"Amount *",sortable:!0,alignHeader:"center",body:function(e){var t=e.amount;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"amount",value:t,type:"text",title:t,required:!0,disabled:!0})})},editor:function(e){return function(e){var t=e.rowData.amount;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"text",id:"amount",autoComplete:"off",value:t,onChange:function(t){return e.editorCallback(t.target.value)},onKeyPress:function(e){var t=e.keyCode||e.which,n=String.fromCharCode(t);/^[0-9]*$/.test(n)||e.preventDefault()}})})}(e)},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,u.jsx)(z.s,{field:"invoice_id",header:"Invoice",sortable:!0,alignHeader:"center",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"invoice_id",value:e.invoice_id,type:"text",autoComplete:"off",required:!0,disabled:!0})})},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,u.jsx)(z.s,{field:"invoice_status",header:"Invoice Status",sortable:!0,alignHeader:"center",body:function(e){return T(e.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"invoice_status",value:e.invoice_status,type:"text",title:e.invoice_status,autoComplete:"off",required:!0,disabled:!0})})},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),(0,u.jsx)(z.s,{field:"completed_date",header:"Completed Date",sortable:!0,alignHeader:"center",filter:!0,filterMatchMode:"contains",body:function(e){return T(e.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"completed_date",value:e.completed_date,type:"text",title:e.completed_date,autoComplete:"off",required:!0,disabled:!0})})},editor:function(e){return function(e,t){return(0,u.jsx)(g(),{name:"completed_date",selected:Ge,id:"completed_date",value:_e.length>0?_e:e.rowData.completed_date,dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy")),de((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"completed_date",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()}})}(e)}}),(0,u.jsx)(z.s,{field:"comments",header:"Comments",sortable:!0,alignHeader:"center",body:function(e){return T(e.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"comments",value:e.comments,type:"text",title:e.comments,autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("textarea",{type:"text",id:"comments",value:e.rowData.comments,onChange:function(t){return e.editorCallback(t.target.value)}})})}(e)},filter:!0,filterFunction:function(e,t){return!t||t.split(" ").every((function(t){return!(t.startsWith&&!e.startsWith(t.startsWith))&&(!(t.endsWith&&!e.endsWith(t.endsWith))&&!(t.contains&&!e.includes(t.contains)))}))}}),1==n[2].is_write&&(0,u.jsx)(z.s,{rowEditor:function(){return(0,u.jsx)("div",{children:"Edit"})},header:"Action",bodyStyle:{textAlign:"center"},style:{width:"40px"},title:"Edit selected item"})]})}),1==(null===i||void 0===i?void 0:i.is_write)?(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",disabled:Ye,title:"Add new row",onClick:function(){!function(){document.getElementsByClassName("p-paginator-first p-paginator-element p-link")[0].click(),Ye||(Oe(!0),Q(!1));var e={project_id:t,project_milestone:"",Status:"",due_date:"",comments:"",is_invoiceable:1,completed_date:"",amount:0},n=[];n.push(e),f([].concat(n,(0,O.Z)(h)))}()},children:[(0,u.jsx)(r.wEH,{}),"Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:W,title:"Save row",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()}()},children:[(0,u.jsx)(r.TvB,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",disabled:W,title:"Cancel row editing",onClick:function(){!function(){var e;U(!1),null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click()}()},children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]}):"",R?(0,u.jsx)(D.Z,{handleAbort:function(){he.current&&he.current.abort(),F(!1)}}):""]})}var ht=function(e){var t=e.projectId,n=e.grp4Items,i=n.find((function(e){return"Dependencies"===e.display_name})),m=c.N.baseUrl,p=(0,a.useState)([]),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)([]),y=(0,s.Z)(x,2),_=y[0],S=y[1],D=(0,a.useState)([]),C=(0,s.Z)(D,2),w=C[0],I=C[1],P=(0,a.useState)(),T=(0,s.Z)(P,2),A=T[0],E=(T[1],(0,a.useState)()),R=(0,s.Z)(E,2),F=R[0],Y=(R[1],(0,a.useState)("")),H=(0,s.Z)(Y,2),L=H[0],U=H[1],q=(0,a.useState)([]),V=(0,s.Z)(q,2),G=(V[0],V[1]),K=(0,a.useState)([]),W=(0,s.Z)(K,2),Q=W[0],J=W[1],X=(0,a.useState)([]),$=(0,s.Z)(X,2),ee=($[0],$[1]),te=(0,a.useState)([]),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)([]),ie=(0,s.Z)(le,2),oe=ie[0],re=ie[1],ce=(0,a.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=(0,a.useState)(!0),he=(0,s.Z)(pe,2),ve=he[0],fe=he[1],je=(0,a.useState)(!1),xe=(0,s.Z)(je,2),ge=xe[0],ye=xe[1],Ne=(0,a.useState)(!1),be=(0,s.Z)(Ne,2),_e=be[0],Se=be[1],De=(0,a.useState)(!1),Ce=(0,s.Z)(De,2),Ze=Ce[0],we=Ce[1],Me=(0,a.useState)(!1),ke=(0,s.Z)(Me,2),Ie=ke[0],Pe=ke[1],Te=localStorage.getItem("resId"),Ae=(0,a.useState)({id:"",dependency_name:"",Type:"",Priority:"",RaisedBy:"",raised_date:"",target_date:"",AssingedTo:"",phase_affected:"",Status:""}),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1],Ye=(0,a.useState)([]),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=Oe[1];(0,a.useEffect)((function(){Be()}),[]);var Be=function(){v()({method:"GET",url:m+"/CommonMS/master/getMenus?loggedUserId=".concat(Te)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Le([e])}))}))},Ue=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(){return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v()({method:"get",url:m+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;S(t)})).catch((function(e){console.log("error :"+e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){Ue(),v().get(m+"/ProjectMS/getAllStatus").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),ae(n)})).catch((function(e){return console.log(e)})),v().get(m+"/ProjectMS/getAllPriority").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),re(n)})).catch((function(e){return console.log(e)})),v().get(m+"/ProjectMS/getAllType").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.lkup_name,value:e.id};t.push(n)})),me(n)})).catch((function(e){return console.log(e)}))}),[]);var qe=function(){v()({url:m+"/ProjectMS/getDependencyData?projectId=".concat(t)}).then((function(e){for(var t=e.data,n=0;n<t.length;n++)t[n].raised_date=null==t[n].raised_date?"":N()(t[n].raised_date).format("DD-MMM-YYYY"),t[n].target_date=null==t[n].target_date?"":N()(t[n].target_date).format("DD-MMM-YYYY");j((function(){return t}))}))};(0,a.useEffect)((function(){qe()}),[]);var Ve=N()(new Date).format("YYYY-MM-DD"),ze=function(e){e.AssingedTo=void 0==L.name?e.AssingedTo:L.name,e.assigned_to_id=void 0==L.id?e.assigned_to_id:L.id,e.RaisedBy=void 0==w.name?e.RaisedBy:w.name,e.raised_by_id=void 0==w.id?e.raised_by_id:w.id,""==e.dependency_name||""==e.Type||""==e.Priority?Se(!0):(v()({method:"post",url:m+"/ProjectMS/postDependencyData",data:{id:e.id,projectId:t,isActive:1,dependencyName:e.dependency_name,typeId:e.type_id,priorityId:e.priority_id,raisedById:void 0==e.raised_by_id||""==e.raised_by_id||null==e.raised_by_id?parseInt(Te)+parseInt(1):e.raised_by_id,raisedDate:void 0==e.raised_date||""==e.raised_date||null==e.raised_date?Ve:N()(e.raised_date).format("YYYY-MM-DD"),targetDate:void 0==e.target_date||""==e.target_date?"":N()(e.target_date).format("YYYY-MM-DD"),assignedToId:void 0==e.assigned_to_id||""==e.assigned_to_id?"":e.assigned_to_id,phaseAffected:e.phase_affected,statusId:null==e.status_id?576:e.status_id}}).then((function(e){"Saved Successfully"==e.data.status?we(!0):Pe(!0),qe(),Se(!1),setTimeout((function(){we(!1),Pe(!1)}),1e3)})),fe(!0),ye(!1))},Ge=document.getElementsByClassName("p-paginator-next p-paginator-element p-link"),Qe=document.getElementsByClassName("p-paginator-last p-paginator-element p-link"),Je=function(e){Object.keys(e).forEach((function(t){if(["",null,void 0," "].includes(e[t]))return j(f.slice(1)),void ye((function(e){return!e}))}))};return(0,a.useEffect)((function(){var e,t,n,s=f[0];null===(e=Ge[0])||void 0===e||e.addEventListener("click",(function(){Je(s)})),null===(t=Qe[0])||void 0===t||t.addEventListener("click",(function(){Je(s)})),""==(null===(n=f[0])||void 0===n?void 0:n.dependency_name)&&(document.getElementsByClassName("p-row-editor-init p-link")[0].click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=f[0])||void 0===t?void 0:t.dependency_name)&&(j(f.slice(1,f.length)),fe(!0),ye(!1),Se(!1))}),!0)}),200))}),[f]),(0,a.useEffect)((function(){v()({method:"get",url:m+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(t)}).then((function(e){var t=e.data;ee(t)})).catch((function(e){})),v()({method:"get",url:m+"/ProjectMS/Audit/getProjectName?projectId=".concat(t)}).then((function(e){var t=e.data;J(t)})).catch((function(e){}))}),[]),(0,a.useEffect)((function(){}),[Re]),(0,u.jsxs)(u.Fragment,{children:[_e?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{children:[(0,u.jsx)(b.CSE,{}),"\xa0","Please provide valid values for highlighted values"]})}):"",Ze?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Dependency saved successfully."]}):"",Ie?(0,u.jsx)("div",{className:"statusMsg success",children:(0,u.jsxs)("span",{className:"errMsg",children:[(0,u.jsx)(Z.hXj,{size:"1.4em",strokeWidth:{width:"100px"}}),"Dependency updated successfully."]})}):"",(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:Q})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Dependencies"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:He,currentScreenName:["Projects","Open","Monitoring","Dependencies"]}),"\xa0",(0,u.jsx)("div",{className:" p-fluid darkHeader  mb-2",children:(0,u.jsxs)(B.w,{className:"primeReactDataTable projDependenciesTable",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",value:f,editMode:"row",onRowEditComplete:function(e){var t=(0,O.Z)(f),n=e.newData;t[e.index]=n,j(t),ze(e.newData)},tableStyle:{minWidth:"auto",width:"auto"},showGridlines:!0,emptyMessage:"No Data Found",paginator:!0,rows:25,rowHover:!0,dataKey:"id",rowsPerPageOptions:[10,25,50],filterDisplay:"row",globalFilterFields:["dependency_name","Type","Priority","RaisedBy","raised_date","target_date","AssingedTo","phase_affected","Status"],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",children:[(0,u.jsx)(z.s,{field:"sNo",header:"S.No",body:function(e,t){var n=f.indexOf(e)+1;return(0,u.jsx)("span",{children:n})},style:{textAlign:"center"}}),(0,u.jsx)(z.s,{field:"dependency_name",header:(0,u.jsxs)("span",{children:["Dependency/Constraint",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"dependency_name",title:e.dependency_name,value:e.dependency_name,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return G(e.rowData.id),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"error ".concat(_e&&!e.rowData.dependency_name?"error-block":""),type:"text",value:e.rowData.dependency_name,id:"dependency_name",onChange:function(t){e.editorCallback(t.target.value)}})})}(e)},sortable:!0,filter:!0}),(0,u.jsx)(z.s,{field:"Type",header:(0,u.jsxs)("span",{children:["Type",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"Type",title:e.Type,value:e.Type,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("select",{id:"type_id",className:"error".concat(_e&&!e.type_id?" error-block":""),name:"Type",onChange:function(t){e.editorCallback(t.target.value),ue.map((function(n){n.id==t.target.value&&(e.rowData.Type=n.lkup_name,e.rowData.type_id=t.target.value)}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===ue||void 0===ue?void 0:ue.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.type_id,children:t.lkup_name},n)}))]})})}(e)},sortable:!0,filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"Priority",header:(0,u.jsxs)("span",{children:["Priority",(0,u.jsx)("span",{className:"error-text",children:"*"})]}),body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"Priority",title:e.Priority,value:e.Priority,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("select",{id:"priority_id",className:"error".concat(_e&&!e.priority_id?" error-block":""),name:"Priority",onChange:function(t){e.editorCallback(t.target.value),oe.map((function(n){n.id==t.target.value&&(e.rowData.Priority=n.lkup_name,e.rowData.priority_id=t.target.value)}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===oe||void 0===oe?void 0:oe.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.priority_id,children:t.lkup_name},n)}))]})})}(e)},sortable:!0,filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"RaisedBy",header:"Raised By",sortable:!0,body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"RaisedBy",title:e.RaisedBy,value:e.RaisedBy,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:_,id:"raised_by_id",name:"Raised By",inputSearchString:null==e.rowData.RaisedBy?"":e.rowData.RaisedBy,onSelect:function(e){I(e)},showIcon:!1})})}(e)},filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"raised_date",header:"Raised Date",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"raised_date",title:e.raised_date,value:e.raised_date,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e,t){return(0,u.jsx)(g(),{name:"raised_date",selected:A,id:"raised_date",value:e.rowData.raised_date,dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy")),Fe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"raised_date",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()}})}(e)},sortable:!0,filterMatchMode:"contains",filter:!0}),(0,u.jsx)(z.s,{field:"target_date",header:"Target Date",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"target_date",title:e.target_date,value:e.target_date,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e,t){return(0,u.jsx)(g(),{name:"target_date",selected:F,id:"target_date",value:e.rowData.target_date,dateFormat:"dd-MMM-yyyy",onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy")),Fe((function(e){return(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},"target_date",N()(t).format("yyyy-MM-DD")))}))},onKeyDown:function(e){e.preventDefault()}})}(e)},sortable:!0,filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"AssingedTo",header:"Assinged To",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"AssingedTo",title:e.AssingedTo,value:e.AssingedTo,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},sortable:!0,editor:function(e){return function(e){return(0,u.jsx)("div",{className:"autoComplete-container",children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:_,id:"assigned_to_id",name:"AssingedTo",inputSearchString:null==e.rowData.AssingedTo?"":e.rowData.AssingedTo,onSelect:function(e){U(e)},showIcon:!1})})}(e)},filter:!0,filterMatchMode:"contains"}),(0,u.jsx)(z.s,{field:"phase_affected",header:"Phase/Area affected",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"phase_affected",title:e.phase_affected,value:e.phase_affected,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(rt.g,{value:e.rowData.phase_affected,id:"phase_affected",onChange:function(t){return e.editorCallback(t.target.value)},rows:4,cols:30})})}(e)},sortable:!0,style:{width:"150px"},filter:!0}),(0,u.jsx)(z.s,{field:"Status",header:"Status",body:function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{id:"Status",title:e.Status,value:e.Status,type:"text",autoComplete:"off",required:!0,disabled:!0,className:"ellipsis"})})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("select",{id:"status_id",className:"cancel",name:"Status",onChange:function(t){e.editorCallback(t.target.value),se.map((function(n){n.id==t.target.value&&(e.rowData.Status=n.lkup_name,e.rowData.status_id=t.target.value)}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===se||void 0===se?void 0:se.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.status_id,children:t.lkup_name},n)}))]})})}(e)},sortable:!0,filter:!0}),1==n[4].is_write&&(0,u.jsx)(z.s,{rowEditor:function(){return(0,u.jsx)("div",{children:"Edit"})},header:"Action",bodyStyle:{textAlign:"center"},style:{width:"40px"},title:"Edit selected item"})]})}),1==(null===i||void 0===i?void 0:i.is_write)?(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",disabled:ge,title:"Add new row",onClick:function(){!function(){ge||(ye(!0),fe(!1));var e=[];e.push({dependency_name:"",Type:"",Priority:"",RaisedBy:"",raised_date:"",target_date:"",AssingedTo:"",phase_affected:"",Status:""}),j([].concat(e,(0,O.Z)(f)))}()},children:[(0,u.jsx)(r.wEH,{}),"Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",disabled:ve,title:"Save row",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()}()},children:[(0,u.jsx)(r.TvB,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",disabled:ve,title:"Cancel row editing",onClick:function(){!function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),Se(!1)}()},children:[(0,u.jsx)(M.sQZ,{fontSize:"11px"})," Cancel"]})]}):""]})},vt=n(8072);var ft=function(e){var t,n,i,m,h,f,j,x,y,S,w,I,P,T,A,E,R,F,Y,H,L,U,q,V,z,G,K,W,J,X,$,ee,te,ne,se,ae,le,ie,oe,re,ce,de,ue,me,pe,he,ve,fe,je,xe,ge,ye,Ne,be,_e,Se,De,Ce,Ze,we,Me,ke,Ie,Pe,Te,Ae,Ee,Re,Fe,Ye,Oe,He,Le,Be,Ue,qe,Ve,ze=e.projectId,Ge=e.grp6Items;console.log(Ge[1].is_write);var Qe=localStorage.getItem("resId"),Je=(localStorage.getItem("resName"),c.N.baseUrl),Xe=(0,a.useState)(!1),$e=(0,s.Z)(Xe,2),et=$e[0],tt=$e[1],nt=(0,a.useState)(r.UdN),st=(0,s.Z)(nt,2),at=st[0],lt=st[1],it=new Date,ot=(0,a.useState)(new Date(it.getFullYear(),it.getMonth(),1)),rt=(0,s.Z)(ot,2),ct=rt[0],dt=rt[1],ut=(0,a.useState)([]),mt=(0,s.Z)(ut,2),pt=mt[0],ht=mt[1],vt=(0,a.useState)([]),ft=(0,s.Z)(vt,2),jt=ft[0],xt=ft[1],gt=(0,a.useState)(null),yt=(0,s.Z)(gt,2),Nt=(yt[0],yt[1],(0,a.useState)([])),bt=(0,s.Z)(Nt,2),_t=bt[0],St=bt[1],Dt=(0,a.useState)([]),Ct=(0,s.Z)(Dt,2),Zt=Ct[0],wt=Ct[1],Mt=(0,a.useState)([]),kt=(0,s.Z)(Mt,2),It=kt[0],Pt=kt[1],Tt=(0,a.useState)([]),At=(0,s.Z)(Tt,2),Et=At[0],Rt=At[1],Ft=(0,a.useState)([]),Yt=(0,s.Z)(Ft,2),Ot=Yt[0],Ht=Yt[1],Lt=(0,a.useState)([]),Bt=(0,s.Z)(Lt,2),Ut=Bt[0],qt=Bt[1],Vt=(0,a.useState)([]),zt=(0,s.Z)(Vt,2),Gt=zt[0],Kt=zt[1],Wt=(0,a.useState)(new Date),Qt=(0,s.Z)(Wt,2),Jt=Qt[0],Xt=(Qt[1],(0,a.useState)(!1)),$t=(0,s.Z)(Xt,2),en=($t[0],$t[1]),tn=(0,a.useState)(!1),nn=(0,s.Z)(tn,2),sn=(nn[0],nn[1]),an=(0,a.useState)(!1),ln=(0,s.Z)(an,2),on=ln[0],rn=ln[1],cn=(0,a.useState)(!1),dn=(0,s.Z)(cn,2),un=dn[0],mn=dn[1],pn=(0,a.useState)(!1),hn=(0,s.Z)(pn,2),vn=hn[0],fn=hn[1],jn=(0,a.useState)(!1),xn=(0,s.Z)(jn,2),gn=xn[0],yn=xn[1],Nn=N()(ct,"DD-MM-YYYY").format("YYYY-MM-DD"),bn=N()(Jt).format("YYYY-MM-DD HH:mm:ss"),_n=(0,a.useState)([]),Sn=(0,s.Z)(_n,2),Dn=Sn[0],Cn=Sn[1],Zn=(0,a.useState)(!1),wn=(0,s.Z)(Zn,2),Mn=wn[0],kn=wn[1],In=(0,a.useState)(!1),Pn=(0,s.Z)(In,2),Tn=Pn[0],An=Pn[1],En=(0,a.useState)(!1),Rn=(0,s.Z)(En,2),Fn=Rn[0],Yn=Rn[1],On=(0,a.useState)({}),Hn=(0,s.Z)(On,2),Ln=Hn[0],Bn=Hn[1],Un=(0,a.useState)({}),qn=(0,s.Z)(Un,2),Vn=qn[0],zn=qn[1],Gn=(0,a.useState)({}),Kn=(0,s.Z)(Gn,2),Wn=Kn[0],Qn=Kn[1];console.log(Wn);var Jn=(0,a.useState)({}),Xn=(0,s.Z)(Jn,2),$n=Xn[0],es=Xn[1],ts=(0,a.useState)([]),ns=(0,s.Z)(ts,2),ss=ns[0],as=ns[1],ls=(0,a.useState)([]),is=(0,s.Z)(ls,2),os=is[0],rs=is[1],cs=(0,a.useState)([]),ds=(0,s.Z)(cs,2),us=ds[0],ms=ds[1],ps=(0,a.useState)(!1),hs=(0,s.Z)(ps,2),vs=(hs[0],hs[1]),fs=(0,a.useState)(!0),js=(0,s.Z)(fs,2),xs=js[0],gs=(js[1],(0,a.useState)(!1)),ys=(0,s.Z)(gs,2),Ns=ys[0],bs=ys[1],_s=(0,a.useState)(!1),Ss=(0,s.Z)(_s,2),Ds=Ss[0],Cs=Ss[1],Zs=(0,a.useState)(!1),ws=(0,s.Z)(Zs,2),Ms=ws[0],ks=ws[1],Is=(0,a.useState)(!1),Ps=(0,s.Z)(Is,2),Ts=Ps[0],As=Ps[1],Es=(0,a.useState)(!1),Rs=(0,s.Z)(Es,2),Fs=Rs[0],Ys=Rs[1],Os=(0,a.useState)(!1),Hs=(0,s.Z)(Os,2),Ls=Hs[0],Bs=Hs[1],Us=(0,a.useState)(!1),qs=(0,s.Z)(Us,2),Vs=qs[0],zs=qs[1],Gs=(0,a.useState)(!0),Ks=(0,s.Z)(Gs,2),Ws=(Ks[0],Ks[1]),Qs=(0,a.useState)({}),Js=(0,s.Z)(Qs,2),Xs=Js[0],$s=Js[1],ea=(0,a.useState)((new Date).getMonth()),ta=(0,s.Z)(ea,2),na=(ta[0],ta[1],(0,a.useState)(!0)),sa=(0,s.Z)(na,2),aa=sa[0],la=sa[1],ia=it.getMonth()+1,oa=(0,a.useRef)(null);(0,a.useEffect)((function(){var e={month:(new Date).toISOString()},t=function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1;return new Date(t,n-1,1)}(),n=new Date(e.month),s=new Date,a=s.toISOString().split("-");if(n<t)en(!1),sn(!1);else if(s>t){var l={fromDate:5,toDate:30};parseInt(a[2])>=l.fromDate&&parseInt(a[2])<=l.toDate?en(!0):en(!1),0===Ot.length?sn(!0):sn(!1)}0===Ot.length&&en(!0)}),[]);var ra,ca=(0,a.useRef)([]),da=function(e){var t=N()(e).startOf("month"),n=N()(it).startOf("month");return t.isSame(n,"month")},ua=(0,a.useState)(null!==(t=Ot[0])&&void 0!==t&&t.audit_date?N()(null===(n=Ot[0])||void 0===n?void 0:n.audit_date,"YYYY-MM-DD").toDate():null),ma=(0,s.Z)(ua,2),pa=ma[0],ha=ma[1],va=function(e){(0,O.Z)(Ot).forEach((function(t){t.audit_date=e})),ha(e)},fa=function(e){var t=N()(e).startOf("month"),n=N()(it).startOf("month");return t.isBefore(n,"month")},ja={},xa={};console.log(Xs),console.log(null===Ot||void 0===Ot?void 0:Ot[0]),console.log(It),console.log(ja),(0,a.useEffect)((function(){if(0!==It.length){var e={};It.forEach((function(t){var n=t.audit_check_point_id.toString(),s=parseInt(t.weightage);e[n]={rowDataId:t.audit_check_point_id,fieldValue:isNaN(s)?0:s,targetValue:t.compliance_val.toString()}})),$s(e)}}),[It]),console.log(Xs),Object.values(Xs).forEach((function(e){var t=e.targetValue,n=e.fieldValue;["1205","1206","1207"].includes(t)&&(t in ja?ja[t]++:ja[t]=1,t in xa?xa[t]+=n:xa[t]=n)}));var ga=["1205","1206","1207"];ga.forEach((function(e){e in xa&&xa[e]})),Object.keys(ja).filter((function(e){return ga.includes(e)})).length,ra=Object.values(ja).reduce((function(e,t){return t!==ja[123]&&t!==ja[1208]&&t!==ja[1209]?e+t:e}),0);var ya=(0,a.useState)(0),Na=(0,s.Z)(ya,2),ba=(Na[0],Na[1]),_a=(0,a.useState)(0),Sa=(0,s.Z)(_a,2),Da=Sa[0],Ca=Sa[1],Za=(0,a.useState)(""),wa=(0,s.Z)(Za,2),Ma=(wa[0],wa[1]),ka=(0,a.useState)(""),Ia=(0,s.Z)(ka,2),Pa=(Ia[0],Ia[1]);console.log(Wn),console.log(It);var Ta=function(){var e=ja[1205]||0,t=ja[1206]||0,n=(ja[1207],{fullImpl:xa[1205]||0,partImpl:xa[1206]||0,notImpl:xa[1207]||0}),s=ra,a=parseInt(e)*n.fullImpl*5+parseInt(t)*n.partImpl*3,l=parseInt(n.fullImpl)+parseInt(n.partImpl)+parseInt(n.notImpl),i=parseInt(s)*parseInt(l),o=a/i===1/0?5:a/i,r=o===1/0?100:o/5*100;console.log(l),console.log("Numerator:",a),console.log("Denominator:",i),console.log("calculatedAdherence:",r),console.log("calculatedScore:",o),console.log("implSum:",s),console.log("targetCounts:",ja),console.log("targetSums:",xa),console.log("calculatedAdherence:",r),console.log("calculatedScore:",o);var c=r.toFixed(2),d=o.toFixed(2);ba(d),Ca(r);var u="",m="";r>80?(u="Green",m=1211):r>=70&&r<80?(u="Amber",m=1212):(r<70||isNaN(Da))&&(u="Red",m=1213),Ma(u),Pa(m),(0,O.Z)(Ot).forEach((function(e){e.process_adherence=c})),(0,O.Z)(Ot).forEach((function(e){e.weighted_score=d})),(0,O.Z)(Ot).forEach((function(e){e.status=m})),(0,O.Z)(Ot).forEach((function(e){e.status_name=u}))};(0,a.useEffect)((function(){Ta()}),[]),null!==(i=Ot[0])&&void 0!==i&&i.full_impl_compl&&(null===(m=Ot[0])||void 0===m||m.full_impl_compl),null!==(h=Ot[0])&&void 0!==h&&h.parti_impl_compl&&(null===(f=Ot[0])||void 0===f||f.parti_impl_compl),null!==(j=Ot[0])&&void 0!==j&&j.not_impl_compl&&(null===(x=Ot[0])||void 0===x||x.not_impl_compl),null!==(y=Ot[0])&&void 0!==y&&y.not_yet_compl&&(null===(S=Ot[0])||void 0===S||S.not_yet_compl),null!==(w=Ot[0])&&void 0!==w&&w.not_appl_compl&&(null===(I=Ot[0])||void 0===I||I.not_appl_compl);var Aa=(0,a.useState)({}),Ea=(0,s.Z)(Aa,2),Ra=(Ea[0],Ea[1],(0,a.useState)({})),Fa=(0,s.Z)(Ra,2),Ya=(Fa[0],Fa[1],pt.length>0&&pt.some((function(e){return e.userid==Qe})));(0,a.useEffect)((function(){v()({method:"get",url:Je+"/ProjectMS/QCR/getProjectMgrsByProject?object_id=".concat(ze)}).then((function(e){var t=e.data;ht(t)})),Oa()}),[Ya]);var Oa=function(){v()({method:"get",url:Je+"/ProjectMS/QCR/getComplianceTabledata?project_id=".concat(ze,"&audit_month=").concat(Nn)}).then((function(e){var t,n,s=e.data.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{weighted_score:"".concat(e.weighted_score.toFixed(2)),status_name:"".concat("N/A"==e.status_name?"":e.status_name)})}));Ht(s),v()({method:"get",url:Je+"/ProjectMS/QCR/getComments?project_audit_dtl_id=".concat(void 0==(null===(t=s[0])||void 0===t?void 0:t.id)?0:null===(n=s[0])||void 0===n?void 0:n.id)}).then((function(e){0==e.data.length&&Pt((function(e){return[]}));for(var t=e.data,n=0;n<t.length;n++)null===t[n].remarks&&(t[n].remarks="");Pt(t)}))}))},Ha=function(){rn(!1),tt(!et),lt(et?r.UdN:r.NR5),v()({method:"get",url:Je+"/ProjectMS/QCR/getProjecttype?id=".concat(ze)}).then((function(e){var t=e.data;Rt(t),ks(!0),v()({method:"post",url:Je+"/ProjectMS/QCR/getTabledata?prjtype=".concat(t[0].pcqa_type,"&prjPhase=-1&selMonth=").concat(Nn)}).then((function(e){var t=e.data;wt(t)}))}))};(0,a.useEffect)((function(){v()({method:"get",url:Je+"/ProjectMS/QCR/ReviewDoneBy"}).then((function(e){var t=e.data;xt(t)})),v()({method:"get",url:Je+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(ze)}).then((function(e){var t=e.data;St(t)})).catch((function(e){})),Ha(),Oa(),La(),Ga(),function(){var e,t,n,s,a,l,i,o;if(void 0!=Ot&&"undefined"!=Ot&&0!=Ot.length&&(null!==(e=Ot[0])&&void 0!==e&&e.is_pcqa_submit||null!==(t=Ot[0])&&void 0!==t&&t.is_pm_submit))if(null===(n=Ot[0])||void 0===n||!n.is_pcqa_submit||null!==(s=Ot[0])&&void 0!==s&&s.is_pm_submit){if(null!==(a=Ot[0])&&void 0!==a&&a.is_pcqa_submit&&null!==(l=Ot[0])&&void 0!==l&&l.is_pm_submit)Ya?(As(!1),Ys(!1),Ws(!1),Bs(!1),zs(!1)):(Ws(!1),As(!0),Ys(!0),Bs(!0),zs(!0),xs&&vs(!0));else if((null===(i=Ot[0])||void 0===i||!i.is_pcqa_submit)&&null!==(o=Ot[0])&&void 0!==o&&o.is_pm_submit){var r,c;Ya?(As(!1),Ys(!1),Ws(!1),Bs(!1),zs(!1)):(Ws(!1),As(!1),Ys(!1),Bs(!1),zs(!1),xs&&vs(!0)),Ya||1!=(null===(r=Ot[0])||void 0===r?void 0:r.is_pcqa_submit)||0!=(null===(c=Ot[0])||void 0===c?void 0:c.is_pm_submit)||Bs(!0),Ya&&0===Ot.length&&(en(!0),As(!0))}}else Ya?(As(!0),Ys(!0),Bs(!0),zs(!0),Ws(!0)):(Ws(!1),As(!1),Ys(!1),Bs(!1),zs(!1),xs&&vs(!0));else Ya?(As(!0),Ys(!0),Bs(!0),zs(!0),Ws(!0)):(Ws(!0),As(!1),Ys(!1),zs(!1),xs&&vs(!0))}()}),[]);var La=function(){v()({method:"get",url:Je+"/ProjectMS/QCR/ComplianceDropDowns"}).then((function(e){var t=e.data;Kt(t)}))},Ba=function(e){/^[0-9a-zA-Z]+$/.test(e.key)||e.preventDefault()},Ua=(0,a.useState)(!1),qa=(0,s.Z)(Ua,2),Va=(qa[0],qa[1]);(0,a.useEffect)((function(){var e=(new Date).getMonth();Va(Nn===e-1)}),[]),console.log($n);var za=function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t){var n,s,a,l,i,o,r,c,d,u,m,p,h,f,j,x,g,y,b,S,D,C,Z,w,M,k,I,P,T,A,E,R,F;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,_.Z)(ca)){e.next=7;break}return rn(!0),window.scrollTo({top:0,behavior:"smooth"}),mn(!1),fn(!1),e.abrupt("return");case 7:return l=parseFloat(null==(null===(n=Ot[0])||void 0===n?void 0:n.process_adherence)?0:null===(s=Ot[0])||void 0===s?void 0:s.process_adherence),kn(!0),i=N()(null===(a=Ot[0])||void 0===a?void 0:a.date_created).format("YYYY-MM-DD HH:mm:ss"),console.log(l),e.prev=11,e.next=14,v()({method:"post",url:Je+"/ProjectMS/QCR/UpdateProjectAudit",data:{id:null===(o=Ot[0])||void 0===o?void 0:o.id,project_id:ze,audit_date:N()(null===(r=Ot[0])||void 0===r?void 0:r.audit_date).format("YYYY-MM-DD HH:mm:ss"),audit_month:null==(null===(c=Ot[0])||void 0===c?void 0:c.audit_month)?Nn:null===(d=Ot[0])||void 0===d?void 0:d.audit_month,is_pcqa_submit:!0===(null===(u=Ot[0])||void 0===u?void 0:u.is_pcqa_submit)?1:(!1===(null===(m=Ot[0])||void 0===m?void 0:m.is_pcqa_submit)||null===(p=Ot[0])||void 0===p||p.is_pcqa_submit,0),is_pm_submit:!0===(null===(h=Ot[0])||void 0===h?void 0:h.is_pm_submit)?1:(!1===(null===(f=Ot[0])||void 0===f?void 0:f.is_pm_submit)||null===(j=Ot[0])||void 0===j||j.is_pm_submit,0),audit_state:null==(null===(x=Ot[0])||void 0===x?void 0:x.audit_state)?Ut:null===(g=Ot[0])||void 0===g?void 0:g.audit_state,prj_mgr_id:null==(null===(y=Ot[0])||void 0===y?void 0:y.prj_mgr_id)?ss:null===(b=Ot[0])||void 0===b?void 0:b.prj_mgr_id,review_by_id:null==(null===(S=Ot[0])||void 0===S?void 0:S.review_by_id)?os:null===(D=Ot[0])||void 0===D?void 0:D.review_by_id,effort_hrs:null==(null===(C=Ot[0])||void 0===C?void 0:C.effort_hrs)?us:null===(Z=Ot[0])||void 0===Z?void 0:Z.effort_hrs,proj_state_id:null==(null===(w=Ot[0])||void 0===w?void 0:w.proj_state_id)?1814:null===(M=Ot[0])||void 0===M?void 0:M.proj_state_id,full_impl_compl:null==ja[1205]?0:ja[1205],parti_impl_compl:null==ja[1206]?0:ja[1206],not_impl_compl:null==ja[1207]?0:ja[1207],not_yet_compl:null==(null===(k=Ot[0])||void 0===k?void 0:k.not_yet_compl)?0:null===(I=Ot[0])||void 0===I?void 0:I.not_yet_compl,not_appl_compl:null==(null===(P=Ot[0])||void 0===P?void 0:P.not_appl_compl)?0:null===(T=Ot[0])||void 0===T?void 0:T.not_appl_compl,weighted_score:null==(null===(A=Ot[0])||void 0===A?void 0:A.weighted_score)?0:null===(E=Ot[0])||void 0===E?void 0:E.weighted_score,process_adherence:l,status:null==(null===(R=Ot[0])||void 0===R?void 0:R.status)?1214:null===(F=Ot[0])||void 0===F?void 0:F.status,date_created:null==i?bn:i,last_updated:bn}}).then(function(){var e=(0,We.Z)((0,Ke.Z)().mark((function e(t){var n,s;return(0,Ke.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data,n=[],s=function(e){var s,a,l,i,o,r,c,d,u,m,p=It.find((function(t){return t.audit_check_point_id===+e}));console.log(null===p||void 0===p?void 0:p.weightage),console.log(null===(s=Wn[+e])||void 0===s?void 0:s.fieldValue);var h={};h.project_audit_dtl_id=null==(null===(a=Ot[0])||void 0===a?void 0:a.id)?null===t||void 0===t||null===(l=t.data)||void 0===l||null===(i=l.qcrdomain)||void 0===i?void 0:i.id:null===(o=Ot[0])||void 0===o?void 0:o.id,h.audit_check_point_id=+e,h.compliance_val=null===$n[e]||void 0===$n[e]?p.compliance_val:parseInt($n[e]),h.weightage=null===(null===(r=Wn[+e])||void 0===r?void 0:r.fieldValue)||void 0==(null===(c=Wn[+e])||void 0===c?void 0:c.fieldValue)||""==(null===(d=Wn[+e])||void 0===d?void 0:d.fieldValue)?null===p||void 0===p?void 0:p.weightage:null===(u=Wn[+e])||void 0===u?void 0:u.fieldValue,h.remarks=void 0===Ln[e]?null===p||void 0===p?void 0:p.remarks:Ln[e],h.pm_remarks=null!==(m=Vn[e])&&void 0!==m?m:"",n.push(h)},Object.keys(Ln).forEach((function(e){s(e)})),Object.keys($n).forEach((function(e){Ln[e]||s(e)})),Object.keys(Vn).forEach((function(e){Ln[e]||s(e)})),e.next=8,v()({method:"post",url:Je+"/ProjectMS/QCR/UpdateData",data:n});case 8:e.sent,Ha(),Oa(),kn(!1),An(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){An(!1),kn(!1)}),3e3);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(11),kn(!1);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){var e;0!==Ot.length||Ya?0===Ot.length&&Ya?(Cs(!0),bs(!1)):1==(null===(e=Ot[0])||void 0===e?void 0:e.is_pcqa_submit)&&Ya&&(Cs(!0),bs(!0)):bs(!0)}),[Ot,Ya]),console.log(Ot);var Ga=function(){v()({method:"get",url:Je+"/ProjectMS/QCR/getRecentAuditDate?project_id=".concat(ze)}).then((function(e){var t=e.data[0];Cn(t)}))},Ka=(0,a.useState)([]),Wa=(0,s.Z)(Ka,2),Qa=Wa[0],Ja=Wa[1];(0,a.useEffect)((function(){Xa()}),[]);var Xa=function(){v()({method:"GET",url:Je+"/CommonMS/master/getMenus?loggedUserId=".concat(Qe)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Ja([e])}))}))},$a=(0,a.useState)({}),el=(0,s.Z)($a,2),tl=el[0],nl=el[1],sl=(0,a.useState)(""),al=(0,s.Z)(sl,2),ll=al[0],il=al[1],ol=(0,a.useState)([]),rl=(0,s.Z)(ol,2);rl[0],rl[1],null===It||void 0===It||It.map((function(e){null===Zt||void 0===Zt||Zt.map((function(t){e.audit_check_point_id==t.id&&(t.compliance_val=e.compliance_val,t.remarks_id=e.id,t.pm_remarks=e.pm_remarks,t.project_audit_dtl_id=e.project_audit_dtl_id,t.remarks=e.remarks,t.weightage=e.weightage)}))}));var cl=[];(0,a.useEffect)((function(){Ta()}),[]);var dl=function(e,t,n){var s,a,i,r,c,d,u,m,p,h,v,f,j;console.log(null===(s=Ot[0])||void 0===s?void 0:s.audit_state),j=1184===(null===(a=Ot[0])||void 0===a?void 0:a.audit_state)?t.initiation_weightage:1185===(null===(i=Ot[0])||void 0===i?void 0:i.audit_state)?t.steady_state_weightage:1186===(null===(r=Ot[0])||void 0===r?void 0:r.audit_state)?t.closure_weightage:0,console.log(j),j=1184===(null===(c=Ot[0])||void 0===c?void 0:c.audit_state)?t.initiation_weightage:1185===(null===(d=Ot[0])||void 0===d?void 0:d.audit_state)?t.steady_state_weightage:1186===(null===(u=Ot[0])||void 0===u?void 0:u.audit_state)?t.closure_weightage:0,cl.push(j),Qn((function(n){var s=(0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},t.id,{rowDataId:t.id,fieldValue:j,targetValue:e.target.value}));return $s((function(e){return(0,o.Z)((0,o.Z)({},e),s)})),s})),console.log(JSON.stringify(Xs)+"in OnChange...."),es((function(n){var s;return(0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},t.id,null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}));var x=(0,O.Z)(Ot);if(rn(!1),"1205"==(null===e||void 0===e||null===(m=e.target)||void 0===m?void 0:m.value)){var g,y=(null===(g=x[0])||void 0===g?void 0:g.full_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{full_impl_compl:y+1})}if("1206"==(null===e||void 0===e||null===(p=e.target)||void 0===p?void 0:p.value)){var N,b=(null===(N=x[0])||void 0===N?void 0:N.parti_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{parti_impl_compl:b+1})}if("1207"===(null===e||void 0===e||null===(h=e.target)||void 0===h?void 0:h.value)){var _,S=(null===(_=x[0])||void 0===_?void 0:_.not_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_impl_compl:S+1})}if("1208"==(null===e||void 0===e||null===(v=e.target)||void 0===v?void 0:v.value)){var D,C=(null===(D=x[0])||void 0===D?void 0:D.not_yet_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_yet_compl:C+1})}if("1209"==(null===e||void 0===e||null===(f=e.target)||void 0===f?void 0:f.value)){var Z,w=(null===(Z=x[0])||void 0===Z?void 0:Z.not_appl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_appl_compl:w+1})}if("1205"==n){var M,k=(null===(M=x[0])||void 0===M?void 0:M.full_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{full_impl_compl:k-1})}if("1206"==n){var I,P=(null===(I=x[0])||void 0===I?void 0:I.parti_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{parti_impl_compl:P-1})}if("1207"==n){var T,A=(null===(T=x[0])||void 0===T?void 0:T.not_impl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_impl_compl:A-1})}if("1208"==n){var E,R=(null===(E=x[0])||void 0===E?void 0:E.not_yet_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_yet_compl:R-1})}if("1209"==n){var F,Y=(null===(F=x[0])||void 0===F?void 0:F.not_appl_compl)||0;x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},{not_appl_compl:Y-1})}x[0]=(0,o.Z)((0,o.Z)({},x[0]),{},(0,l.Z)({},t.id,e.target.value)),Ht(x),console.log(Ot[0]+"in line 1916.....")};console.log(Ot[0]+"in line 1918....."),(0,a.useEffect)((function(){Ta()}),[Xs]);var ul=function(e,t){Bn((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},t.id,e))}))},ml=function(e,t){zn((function(n){return(0,o.Z)((0,o.Z)({},n),{},(0,l.Z)({},t.id,e))}))};return(0,u.jsxs)("div",{children:[1==on?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"error-block",children:[(0,u.jsx)(b.CSE,{})," \xa0 Please select valid values for highlighted fields"]})}):"",1==un?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"error-block",children:[(0,u.jsx)(b.CSE,{})," \xa0Data copy failed/No Data for previous results. Please try again."]})}):"",1==vn?(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"error-block",children:[(0,u.jsx)(b.CSE,{})," \xa0Data submitting failed. Please try again."]})}):"",gn?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Data Copied successfully"]}):"",Tn?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Data saved Successfully"]}):"",Fn?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Data submitted successfully"]}):"",Mn?(0,u.jsx)(D.Z,{handleAbort:function(){oa.current&&oa.current.abort(),kn(!1)}}):"",(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:_t.map((function(e){return(0,u.jsxs)("h2",{children:["Quality Compliance Review - ",e.projectName]})}))}),(0,u.jsx)("div",{className:"childTwo"}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:Qa,currentScreenName:["Projects","Open","Monitoring","QCR"]}),Ms&&void 0==(null===(P=Et[0])||void 0===P?void 0:P.pcqa_type)?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{size:"1.4em"}),(0,u.jsx)("span",{children:"No Project Type selected, please update project type for Audit Check List"})]}):(0,u.jsxs)("div",{className:"group mb-3 customCard",children:[(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,u.jsx)("h2",{children:"Search Filters"}),(0,u.jsx)("div",{onClick:function(){tt(!et),lt(et?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:at})})]}),(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsx)("div",{className:" col-md-5 mb-0",children:(0,u.jsx)(p.V9,{visible:!et,children:(0,u.jsxs)("div",{className:"row mb-2",children:[(0,u.jsxs)("label",{className:"col-3",children:["Audit Month ",(0,u.jsx)("div",{className:"error-text",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("div",{className:"col-12",children:(0,u.jsx)("div",{className:"datepicker ",children:(0,u.jsx)(g(),{showMonthYearPicker:!0,selected:ct,onChange:function(e){dt(e)},dateFormat:"MMMM-yyyy",maxDate:new Date})})})}),(0,u.jsxs)("button",{className:"btn btn-primary col-2",type:"submit",onClickCapture:function(){!function(){var e=parseInt(Nn.split("-")[1]);la(ia===e)}(),Ha(),Oa(),rn(!1),fn(!1),mn(!1)},children:[(0,u.jsx)(M.Yfv,{})," Search"]})]})})}),(0,u.jsxs)("div",{className:"statusMsg warning",children:[(0,u.jsx)("span",{className:"bold",children:(0,u.jsx)(Q.BrF,{})}),"\xa0 Audit Details can be updated between 5 to 30 dates of every month."]}),0==Ge[1].is_write?"":(0,u.jsx)("div",{className:"col-12",children:(0,u.jsx)("div",{className:"btn-container right my-3",children:1==aa?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){v()({method:"post",url:Je+"/ProjectMS/QCR/copyPrevMonthPrjAuditChkLists?prjId=".concat(ze,"&cpMonth=").concat(Nn)}).then((function(e){var t;0==(null===(t=e.data[0])||void 0===t?void 0:t.dataExists)?(mn(!0),window.scrollTo({top:0,behavior:"smooth"}),rn(!1),fn(!1)):(mn(!1),v()({method:"get",url:Je+"/ProjectMS/QCR/getComplianceTabledata?project_id=".concat(ze,"&audit_month=").concat(Dn.recent_audit_month)}).then((function(e){var t,n=e.data.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{process_adherence:"".concat(e.process_adherence.toFixed(2)," %"),weighted_score:"".concat(e.weighted_score.toFixed(2)),status_name:"".concat("N/A"==e.status_name?"":e.status_name)})}));Ht(n),v()({method:"get",url:Je+"/ProjectMS/QCR/getComments?project_audit_dtl_id=".concat(null===(t=n[0])||void 0===t?void 0:t.id)}).then((function(e){var t=e.data;yn(!0),setTimeout((function(){yn(!1)}),3e3),Pt(t)}))})))}))},style:{display:null!==(T=Ot[0])&&void 0!==T&&T.is_pcqa_submit&&1==(null===(A=Ot[0])||void 0===A?void 0:A.is_pm_submit)||0==(null===(E=Ot[0])||void 0===E?void 0:E.is_pcqa_submit)&&Ot.length>0||1==(null===(R=Ot[0])||void 0===R?void 0:R.is_pcqa_submit)||Ya&&0===Ot.length?"none":"flex"},children:[(0,u.jsx)(r.TvB,{}),"Copy From Previous Results"]}),(0,u.jsxs)("button",{className:"btn btn-primary",type:"submit",id:"saveBtn",onClick:!(Ya||null===(F=Ot[0])||void 0===F||!F.is_pcqa_submit||null!==(Y=Ot[0])&&void 0!==Y&&Y.is_pm_submit)&&(null!==(H=Ot[0])&&void 0!==H&&H.is_pcqa_submit||null!==(L=Ot[0])&&void 0!==L&&L.is_pm_submit)?void 0:za,disabled:Ls||1==(null===(U=Ot[0])||void 0===U?void 0:U.is_pcqa_submit)&&1==(null===(q=Ot[0])||void 0===q?void 0:q.is_pm_submit),style:{cursor:Ls&&null!==(V=Ot[0])&&void 0!==V&&V.is_pcqa_submit&&null!==(z=Ot[0])&&void 0!==z&&z.is_pm_submit||!Ya&&null!==(G=Ot[0])&&void 0!==G&&G.is_pcqa_submit&&(null===(K=Ot[0])||void 0===K||!K.is_pm_submit)||Ya&&0===Ot.length||1==(null===(W=Ot[0])||void 0===W?void 0:W.is_pcqa_submit)&&1==(null===(J=Ot[0])||void 0===J?void 0:J.is_pm_submit)?"no-drop":"auto",opacity:Ls?1:"inherit"},children:[(0,u.jsx)(r.TvB,{}),"Save"]}),(0,u.jsxs)("button",{className:"btn btn-primary",type:"submit",id:"submitBtn",disabled:Vs||1==(null===(X=Ot[0])||void 0===X?void 0:X.is_pcqa_submit)&&1==(null===($=Ot[0])||void 0===$?void 0:$.is_pm_submit),style:{cursor:1==Vs||null!==(ee=Ot[0])&&void 0!==ee&&ee.is_pcqa_submit&&1==(null===(te=Ot[0])||void 0===te?void 0:te.is_pm_submit)||Ya&&0===Ot.length||1==(null===(ne=Ot[0])||void 0===ne?void 0:ne.is_pcqa_submit)&&1==(null===(se=Ot[0])||void 0===se?void 0:se.is_pm_submit)?"no-drop":"auto",opacity:1==Vs?1:"inherit"},onClick:function(){if(0==Ot.length)fn(!0),window.scrollTo({top:0,behavior:"smooth"}),rn(!1);else{var e,t,n,s,a,l,i,o,r,c,d,u,m,p,h,f,j,x,g,y,b,_,S=parseFloat(null==(null===(e=Ot[0])||void 0===e?void 0:e.process_adherence)?0:null===(t=Ot[0])||void 0===t?void 0:t.process_adherence);console.log(S),console.log(null===(n=Ot[0])||void 0===n?void 0:n.weighted_score);var D=N()(null===(s=Ot[0])||void 0===s?void 0:s.date_created).format("YYYY-MM-DD HH:mm:ss");console.log(Ot),v()({method:"post",url:Je+"/ProjectMS/QCR/UpdateProjectAudit",data:{id:null===(a=Ot[0])||void 0===a?void 0:a.id,project_id:ze,audit_date:N()(null===(l=Ot[0])||void 0===l?void 0:l.audit_date).format("YYYY-MM-DD HH:mm:ss"),audit_month:null==(null===(i=Ot[0])||void 0===i?void 0:i.audit_month)?Nn:null===(o=Ot[0])||void 0===o?void 0:o.audit_month,is_pcqa_submit:!0===Ns?1:!1===Ns?0:Ns,is_pm_submit:!0===Ds?1:!1===Ds?0:Ds,audit_state:null==(null===(r=Ot[0])||void 0===r?void 0:r.audit_state)?Ut:null===(c=Ot[0])||void 0===c?void 0:c.audit_state,prj_mgr_id:null==(null===(d=Ot[0])||void 0===d?void 0:d.prj_mgr_id)?ss:null===(u=Ot[0])||void 0===u?void 0:u.prj_mgr_id,review_by_id:null==(null===(m=Ot[0])||void 0===m?void 0:m.review_by_id)?os:null===(p=Ot[0])||void 0===p?void 0:p.review_by_id,effort_hrs:null==(null===(h=Ot[0])||void 0===h?void 0:h.effort_hrs)?us:null===(f=Ot[0])||void 0===f?void 0:f.effort_hrs,proj_state_id:null==(null===(j=Ot[0])||void 0===j?void 0:j.proj_state_id)?1814:null===(x=Ot[0])||void 0===x?void 0:x.proj_state_id,full_impl_compl:null==ja[1205]?0:ja[1205],parti_impl_compl:null==ja[1206]?0:ja[1206],not_impl_compl:null==ja[1207]?0:ja[1207],not_yet_compl:null==ja[1208]?0:ja[1208],not_appl_compl:null==ja[1209]?0:ja[1209],weighted_score:null==(null===(g=Ot[0])||void 0===g?void 0:g.weighted_score)?0:null===(y=Ot[0])||void 0===y?void 0:y.weighted_score,process_adherence:S,status:null==(null===(b=Ot[0])||void 0===b?void 0:b.status)?1214:null===(_=Ot[0])||void 0===_?void 0:_.status,date_created:null==D?bn:D,last_updated:bn}}).then((function(e){Ha(),Oa(),kn(!1),Yn(!0),window.scrollTo({top:0,behavior:"smooth"}),mn(!1),yn(!1),setTimeout((function(){Yn(!1),kn(!1)}),3e3)}))}},children:[(0,u.jsx)(r.l_A,{}),"Submit"]})]}):""})}),0==Ge[1].is_write?"":(0,u.jsx)("div",{className:"col-8 offset-2",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:" col-6 mb-2",children:(0,u.jsxs)("div",{className:"  row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"dateOfReview",children:["Date of Review\xa0",(0,u.jsx)("div",{className:"error-text",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("div",{className:"datepicker error",children:null!==(ae=Ot[0])&&void 0!==ae&&ae.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?(0,u.jsx)(g(),{selected:null!==(le=Ot[0])&&void 0!==le&&le.audit_date?N()(null===(ie=Ot[0])||void 0===ie?void 0:ie.audit_date,"YYYY-MM-DD").toDate():pa,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,disabled:!0,dropdownMode:"select",minDate:N()().startOf("month").toDate(),maxDate:N()().endOf("month").toDate(),filterDate:da,onChange:va,shouldDisableMonth:fa,shouldDisableYear:fa,onKeyDown:function(e){e.preventDefault()}}):(0,u.jsx)("div",{className:"datepicker cancel",ref:function(e){ca.current[0]=e},children:(0,u.jsx)(g(),{selected:null!==(oe=Ot[0])&&void 0!==oe&&oe.audit_date?N()(null===(re=Ot[0])||void 0===re?void 0:re.audit_date,"YYYY-MM-DD").toDate():pa,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",minDate:N()().startOf("month").toDate(),maxDate:N()().endOf("month").toDate(),filterDate:da,onChange:va,shouldDisableMonth:fa,shouldDisableYear:fa,onKeyDown:function(e){e.preventDefault()}})})})})]})}),(0,u.jsx)("div",{className:"col-6 mb-2",children:(0,u.jsxs)("div",{className:"  row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"projectManager ",children:["Project Manager\xa0",(0,u.jsx)("div",{className:"error-text",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("div",{children:null!==(ce=Ot[0])&&void 0!==ce&&ce.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?(0,u.jsx)("input",{items:pt,type:"Text",showIcon:!1,defaultValue:null===(de=Ot[0])||void 0===de?void 0:de.prj_mgr_name,placeholder:"Type/Press space to get the list",onKeyDown:Ba,disabled:!0}):(0,u.jsx)("div",{className:"autoComplete-container react  cancel  reactsearchautocomplete",ref:function(e){ca.current[1]=e},children:(0,u.jsx)(d.ReactSearchAutocomplete,{className:"wrapperauto",items:pt,type:"Text",showIcon:!1,inputSearchString:null===(ue=Ot[0])||void 0===ue?void 0:ue.prj_mgr_name,placeholder:"Type/Press space to get the list",onKeyDown:Ba,onSelect:function(e){as(e.id),(0,O.Z)(Ot).forEach((function(t){t.prj_mgr_id=e.id}))}})})})})]})}),(0,u.jsx)("div",{className:"col-6 mb-2",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"reviewDoneBy",children:["Review Done By\xa0",(0,u.jsx)("div",{className:"error-text",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("div",{className:"autoComplete-container error",children:null!==(me=Ot[0])&&void 0!==me&&me.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?(0,u.jsx)("input",{type:"Text",items:jt,showIcon:!1,defaultValue:null===(pe=Ot[0])||void 0===pe?void 0:pe.review_by_name,placeholder:"Type/Press space to get the list",disabled:!0}):(0,u.jsx)("div",{className:"autoComplete-container react  cancel  reactsearchautocomplete",ref:function(e){ca.current[2]=e},children:(0,u.jsx)(d.ReactSearchAutocomplete,{items:jt,type:"Text",showIcon:!1,inputSearchString:null===(he=Ot[0])||void 0===he?void 0:he.review_by_name,placeholder:"Type/Press space to get the list",onSelect:function(e){rs(e.id),(0,O.Z)(Ot).forEach((function(t){t.review_by_id=e.id}))}})})})})]})}),(0,u.jsx)("div",{className:"col-6 mb-2",children:(0,u.jsxs)("div",{className:"  row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"effortSpent",children:["Effort spent for Review (person hours)",(0,u.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:null!==(ve=Ot[0])&&void 0!==ve&&ve.is_pcqa_submit||Ya&&0===Ot.length||Ya&&0===Ot.length||1==Ts?(0,u.jsx)("input",{type:"text",disabled:(null===(fe=Ot[0])||void 0===fe?void 0:fe.is_pcqa_submit)||1==Ts,className:"form-control",id:"effortSpent ",required:!0,value:null===(je=Ot[0])||void 0===je?void 0:je.effort_hrs}):(0,u.jsx)("div",{className:"textfield cancel",ref:function(e){ca.current[3]=e},children:(0,u.jsx)("input",{type:"text",className:"form-control error",id:"effortSpent ",required:!0,value:null===(xe=Ot[0])||void 0===xe?void 0:xe.effort_hrs,onChange:function(e){ms(e.target.value),(0,O.Z)(Ot).forEach((function(t){t.effort_hrs=e.target.value}))}})})})]})})]})}),(0,u.jsx)("div",{className:"col-md-8 offset-2 mb-2 darkHeader",children:(0,u.jsxs)("table",{className:"table table-striped table-bordered htmlTable   ",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{style:{width:"60%",textAlign:"center"},children:"Type"}),(0,u.jsx)("th",{style:{width:"40%",textAlign:"center"},children:"Compliance"})]})}),(0,u.jsxs)("tbody",{children:[(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{height:"34px"},children:"State"}),(0,u.jsx)("td",{children:(0,u.jsx)("div",{className:"col-6",children:0==Ge[1].is_write?(0,u.jsx)("select",{disabled:!0,children:(0,u.jsx)("option",{value:!0,children:"<<Please Select>>"})}):(0,u.jsxs)("select",{id:"state",value:void 0==(null===(ge=Ot[0])||void 0===ge?void 0:ge.audit_state)?"":null===(ye=Ot[0])||void 0===ye?void 0:ye.audit_state,onChange:function(e){return function(e){var t=parseInt(e),n=(0,O.Z)(Ot);n[0]=(0,o.Z)((0,o.Z)({},n[0]),{},{audit_state:t}),qt(t),Ht(n)}(e.target.value)},className:"error  ".concat(!0===on?"error-block":""),disabled:1==!(null===(Ne=Ot[0])||void 0===Ne||!Ne.is_pcqa_submit)||1==Ya&&(null===(be=Ot[0])||void 0===be?void 0:be.is_pcqa_submit)&&0==(null===(_e=Ot[0])||void 0===_e?void 0:_e.is_pm_submit)||Ya&&0===Ot.length,children:[(0,u.jsx)("option",{value:!0,children:"<<Please Select>>"}),(0,u.jsx)("option",{value:"1184",children:"Initiation"}),(0,u.jsx)("option",{value:"1185",children:"Steady State"}),(0,u.jsx)("option",{value:"1186",children:"Closure"})]})})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Fully Implemented"}),(0,u.jsx)("td",{children:null!==(Se=Ot[0])&&void 0!==Se&&Se.full_impl_compl?null===(De=Ot[0])||void 0===De?void 0:De.full_impl_compl:0})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Partially Implemented"}),(0,u.jsx)("td",{children:null!==(Ce=Ot[0])&&void 0!==Ce&&Ce.parti_impl_compl?null===(Ze=Ot[0])||void 0===Ze?void 0:Ze.parti_impl_compl:0})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Not Implemented"}),(0,u.jsx)("td",{children:null!==(we=Ot[0])&&void 0!==we&&we.not_impl_compl?null===(Me=Ot[0])||void 0===Me?void 0:Me.not_impl_compl:0})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Not Yet"}),(0,u.jsx)("td",{children:null!==(ke=Ot[0])&&void 0!==ke&&ke.not_yet_compl?null===(Ie=Ot[0])||void 0===Ie?void 0:Ie.not_yet_compl:0})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Not Applicable"}),(0,u.jsx)("td",{children:null!==(Pe=Ot[0])&&void 0!==Pe&&Pe.not_appl_compl?null===(Te=Ot[0])||void 0===Te?void 0:Te.not_appl_compl:0})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Weighted score "}),(0,u.jsx)("td",{children:isNaN(null===(Ae=Ot[0])||void 0===Ae?void 0:Ae.weighted_score)?"0 %":null===(Ee=Ot[0])||void 0===Ee?void 0:Ee.weighted_score})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Overall Process Adherence"}),(0,u.jsx)("td",{children:isNaN(null===(Re=Ot[0])||void 0===Re?void 0:Re.process_adherence)?"0 %":"".concat(null===(Fe=Ot[0])||void 0===Fe?void 0:Fe.process_adherence," %")})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Status "}),(0,u.jsx)("td",{style:{backgroundColor:1211===(null===(Ye=Ot[0])||void 0===Ye?void 0:Ye.status)?"#00cc66":1213===(null===(Oe=Ot[0])||void 0===Oe?void 0:Oe.status)?"#FF0000":1214===(null===(He=Ot[0])||void 0===He?void 0:He.status)?"":1212===(null===(Le=Ot[0])||void 0===Le?void 0:Le.status)?"#ffd400":""},children:null!==(Be=Ot[0])&&void 0!==Be&&Be.status_name?null===(Ue=Ot[0])||void 0===Ue?void 0:Ue.status_name:""})]})]})]})})]}),(0,u.jsx)("div",{className:"darkHeader",children:(0,u.jsxs)(B.w,{value:Zt,showGridlines:!0,emptyMessage:"No Records To View",scrollDirection:"both",scrollHeight:"400px",frozen:!0,rows:10,className:"primeReactDataTable ",children:[(0,u.jsx)(C.sgG,{header:"S.No",field:"SNo",body:function(e,t){var n=Zt.indexOf(e)+1;return(0,u.jsx)("span",{title:n,children:n})},title:"SNo",alignHeader:"center",headerStyle:{width:"5%",minWidth:"8rem"},bodyStyle:{textAlign:"center"}}),(0,u.jsx)(C.sgG,{field:"proj_phase",header:"Phase",body:function(e){return(0,u.jsx)("div",{title:e.proj_phase,className:"ellipsis",children:e.proj_phase})},frozen:!0}),(0,u.jsx)(C.sgG,{field:"check_point",header:"Audit Checkpoints",body:function(e){return(0,u.jsx)("div",{title:e.check_point,className:"ellipsis",children:e.check_point})}}),(0,u.jsx)(C.sgG,{frozen:!0,field:"",header:"Compliance",filter:!0,body:function(e,t){var n,s,a,i,r,c,d,m,p,h;return(0,u.jsxs)(u.Fragment,{children:[0===Ot.length&&!0===Ge[1].is_write?(0,u.jsxs)("select",{id:"lkup_name",className:"cancel",name:"lkup_name",onFocus:function(t){il(t.target.value,e.compliance_val)},onChange:function(t){if(Array.isArray(Ot)&&0===Ot.length){rn(!0);var n=(0,o.Z)((0,o.Z)({},tl),{},(0,l.Z)({},e.id,"null"));nl(n),window.scrollTo({top:0,behavior:"smooth"})}else{rn(!1);e.id;dl(t,e,ll);var s=t.target.value;il(s);var a=(0,o.Z)((0,o.Z)({},tl),{},(0,l.Z)({},e.id,s));nl(a)}},value:tl[e.id]||"123",disabled:!0===(null===(n=Ot[0])||void 0===n?void 0:n.is_pcqa_submit)||Ya&&0===Ot.length||!0===Fs,style:{cursor:null!==(s=Ot[0])&&void 0!==s&&s.is_pcqa_submit||!0===Fs?"not-allowed":"auto",backgroundColor:null!==(a=Ot[0])&&void 0!==a&&a.is_pcqa_submit||!0===Fs?"#eee":"white",opacity:null!==(i=Ot[0])&&void 0!==i&&i.is_pcqa_submit||!0===Fs?1:"inherit",color:null!==(r=Ot[0])&&void 0!==r&&r.is_pcqa_submit||!0===Fs?"#999":"inherit"},children:[(0,u.jsx)("option",{value:"123",children:"<<Please Select>>"}),null===Gt||void 0===Gt?void 0:Gt.map((function(e){return(0,u.jsx)("option",{value:e.id,children:e.lkup_name},e.id)}))]}):(0,u.jsx)("select",{disabled:!0,children:(0,u.jsx)("option",{children:"<<Please Select>>"})}),(0,u.jsxs)("select",{id:"lkup_name",className:"cancel",name:"lkup_name",onFocus:function(t){il(t.target.value,e.compliance_val)},onChange:function(t){if(Array.isArray(Ot)&&0===Ot.length){rn(!0);var n=(0,o.Z)((0,o.Z)({},tl),{},(0,l.Z)({},e.id,"null"));nl(n),window.scrollTo({top:0,behavior:"smooth"})}else{rn(!1);e.id;dl(t,e,ll);var s=t.target.value;il(s);var a=(0,o.Z)((0,o.Z)({},tl),{},(0,l.Z)({},e.id,s));nl(a)}},value:tl[e.id]||e.compliance_val,disabled:!0===(null===(c=Ot[0])||void 0===c?void 0:c.is_pcqa_submit)||Ya&&0===Ot.length||1==Fs,style:{cursor:null!==(d=Ot[0])&&void 0!==d&&d.is_pcqa_submit||1==Fs?"no-drop":"auto",backgroundColor:null!==(m=Ot[0])&&void 0!==m&&m.is_pcqa_submit||1==Fs?"#eee":"white",opacity:null!==(p=Ot[0])&&void 0!==p&&p.is_pcqa_submit||1==Fs?1:"inherit",color:null!==(h=Ot[0])&&void 0!==h&&h.is_pcqa_submit||1==Fs?"#999":"inherit"},children:[(0,u.jsx)("option",{value:"123",children:"<<Please Select>>"}),null===Gt||void 0===Gt?void 0:Gt.map((function(e,t){return(0,u.jsx)("option",{value:e.id,children:e.lkup_name},t)}))]})]})},headerStyle:{width:"11%",minWidth:"8rem"}}),(0,u.jsx)(C.sgG,{field:"",body:function(e){var t,n,s;return 1184===(null===(t=Ot[0])||void 0===t?void 0:t.audit_state)?(0,u.jsx)("div",{title:e.initiation_weightage,children:e.initiation_weightage}):1185===(null===(n=Ot[0])||void 0===n?void 0:n.audit_state)?(0,u.jsx)("div",{title:e.steady_state_weightage,children:e.steady_state_weightage}):1186===(null===(s=Ot[0])||void 0===s?void 0:s.audit_state)?(0,u.jsx)("div",{title:e.closure_weightage,children:e.closure_weightage}):1184===Ut?(0,u.jsx)("div",{title:e.initiation_weightage,children:e.initiation_weightage}):1185===Ut?(0,u.jsx)("div",{title:e.steady_state_weightage,children:e.steady_state_weightage}):1186===Ut?(0,u.jsx)("div",{title:e.closure_weightage,children:e.closure_weightage}):(0,u.jsx)("div",{title:"0",children:"0"})},header:"Weightage",headerStyle:{width:"6%",minWidth:"8rem"}}),(0,u.jsx)(C.sgG,{field:"iso_details",header:"ISO 9001:2015",body:function(e){return(0,u.jsx)("div",{title:e.iso_details,className:"ellipsis",children:e.iso_details})}}),(0,u.jsx)(C.sgG,{field:"remarks",header:"PCQA Remarks",body:function(e){var t,n,s,a,l,i,o,r,c,d;return console.log(e.remarks+"in line 2144..."),(0,u.jsxs)(u.Fragment,{children:[0===Ot.length&&!0===Ge[1].is_write?(0,u.jsx)("textarea",{id:"remarks",name:"remarks",placeholder:"PCQA Remarks",type:"text",value:null==(null===e||void 0===e?void 0:e.remarks)?"":null===e||void 0===e?void 0:e.remarks,onChange:function(t){return ul(t.target.value,e)},disabled:(null===(t=Ot[0])||void 0===t?void 0:t.is_pcqa_submit)||Ya&&0===Ot.length||!0===Ts,style:{cursor:null!==(n=Ot[0])&&void 0!==n&&n.is_pcqa_submit||Ya&&0===Ot.length||!0===Ts?"no-drop":"auto",backgroundColor:null!==(s=Ot[0])&&void 0!==s&&s.is_pcqa_submit||Ya&&0===Ot.length||!0===Ts?"#eee":"white",opacity:null!==(a=Ot[0])&&void 0!==a&&a.is_pcqa_submit||Ya&&0===Ot.length||!0===Ts?1:"inherit",color:null!==(l=Ot[0])&&void 0!==l&&l.is_pcqa_submit||Ya&&0===Ot.length||!0===Ts?"#999":"inherit"}}):(0,u.jsx)("textarea",{disabled:!0,placeholder:"PCQA Remarks",style:{cursor:"not-allowed"}}),(0,u.jsx)("textarea",{id:"remarks",name:"remarks",placeholder:"PCQA Remarks",type:"text",defaultValue:"null"==(null===e||void 0===e?void 0:e.remarks)?"":null===e||void 0===e?void 0:e.remarks,onChange:function(t){return ul(t.target.value,e)},disabled:(null===(i=Ot[0])||void 0===i?void 0:i.is_pcqa_submit)||Ya&&0===Ot.length||1==Ts,style:{cursor:null!==(o=Ot[0])&&void 0!==o&&o.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?"no-drop":"auto",backgroundColor:null!==(r=Ot[0])&&void 0!==r&&r.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?"#eee":"white",opacity:null!==(c=Ot[0])&&void 0!==c&&c.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?1:"inherit",color:null!==(d=Ot[0])&&void 0!==d&&d.is_pcqa_submit||Ya&&0===Ot.length||1==Ts?"#999":"inherit"}})]})},disabled:!0===(null===(qe=Ot[0])||void 0===qe?void 0:qe.is_pcqa_submit)}),(0,u.jsx)(C.sgG,{field:"pm_remarks",header:"PM Remarks",body:function(e){var t,n,s,a,l,i,o,r,c,d,m,p,h,v,f,j,x,g,y,N,b,_,S,D,C,Z,w,M,k,I;return(0,u.jsxs)(u.Fragment,{children:[0==Ot.length&&(0,u.jsx)("textarea",{value:0==Ot.length?"":e.pm_remarks,disabled:!Ya||0==Ot.length||!1===(null===(t=Ot[0])||void 0===t?void 0:t.is_pcqa_submit)||1==(null===(n=Ot[0])||void 0===n?void 0:n.is_pcqa_submit)&&1==(null===(s=Ot[0])||void 0===s?void 0:s.is_pm_submit),style:{cursor:!Ya||0==Ot.length||!1===(null===(a=Ot[0])||void 0===a?void 0:a.is_pcqa_submit)||1==(null===(l=Ot[0])||void 0===l?void 0:l.is_pcqa_submit)&&1==(null===(i=Ot[0])||void 0===i?void 0:i.is_pm_submit)?"no-drop":"auto",backgroundColor:!Ya||0==Ot.length||!1===(null===(o=Ot[0])||void 0===o?void 0:o.is_pcqa_submit)||1==(null===(r=Ot[0])||void 0===r?void 0:r.is_pcqa_submit)&&1==(null===(c=Ot[0])||void 0===c?void 0:c.is_pm_submit)?"#eee":"white",opacity:!Ya||0==Ot.length||!1===(null===(d=Ot[0])||void 0===d?void 0:d.is_pcqa_submit)||1==(null===(m=Ot[0])||void 0===m?void 0:m.is_pcqa_submit)&&1==(null===(p=Ot[0])||void 0===p?void 0:p.is_pm_submit)?1:"inherit",color:!Ya||0==Ot.length||!1===(null===(h=Ot[0])||void 0===h?void 0:h.is_pcqa_submit)||1==(null===(v=Ot[0])||void 0===v?void 0:v.is_pcqa_submit)&&1==(null===(f=Ot[0])||void 0===f?void 0:f.is_pm_submit)?"#999":"inherit"},onChange:function(t){ml(t.target.value,e)},type:"text",placeholder:"PM Remarks"}),(0,u.jsx)("textarea",{defaultValue:e.pm_remarks,disabled:!Ya||0==Ot.length||!1===(null===(j=Ot[0])||void 0===j?void 0:j.is_pcqa_submit)||1==(null===(x=Ot[0])||void 0===x?void 0:x.is_pcqa_submit)&&1==(null===(g=Ot[0])||void 0===g?void 0:g.is_pm_submit),style:{cursor:!Ya||0==Ot.length||!1===(null===(y=Ot[0])||void 0===y?void 0:y.is_pcqa_submit)||1==(null===(N=Ot[0])||void 0===N?void 0:N.is_pcqa_submit)&&1==(null===(b=Ot[0])||void 0===b?void 0:b.is_pm_submit)?"no-drop":"auto",backgroundColor:!Ya||0==Ot.length||!1===(null===(_=Ot[0])||void 0===_?void 0:_.is_pcqa_submit)||1==(null===(S=Ot[0])||void 0===S?void 0:S.is_pcqa_submit)&&1==(null===(D=Ot[0])||void 0===D?void 0:D.is_pm_submit)?"#eee":"white",opacity:!Ya||0==Ot.length||!1===(null===(C=Ot[0])||void 0===C?void 0:C.is_pcqa_submit)||1==(null===(Z=Ot[0])||void 0===Z?void 0:Z.is_pcqa_submit)&&1==(null===(w=Ot[0])||void 0===w?void 0:w.is_pm_submit)?1:"inherit",color:!Ya||0==Ot.length||!1===(null===(M=Ot[0])||void 0===M?void 0:M.is_pcqa_submit)||1==(null===(k=Ot[0])||void 0===k?void 0:k.is_pcqa_submit)&&1==(null===(I=Ot[0])||void 0===I?void 0:I.is_pm_submit)?"#999":"inherit"},onChange:function(t){ml(t.target.value,e)},type:"text",placeholder:"PM Remarks"})]})},disabled:!0===(null===(Ve=Ot[0])||void 0===Ve?void 0:Ve.is_pcqa_submit)})]})})]})]})},jt=n(9365),xt=n(72680);var gt=function(e){var t=e.deletePopUp,n=e.setDeletePopUp,s=e.selectedTaskId,a=e.setDeletedSuccess,l=e.setDeletedFailed,i=c.N.baseUrl;return(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)(L(),{children:(0,u.jsxs)(p.Tk,{style:{cursor:"all-scroll"},alignment:"center",backdrop:"static",visible:t,size:"sm",className:" ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Task"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("span",{children:" Are you sure you want to delete Task ?"}),(0,u.jsxs)("div",{className:"btn-container center mb-1 mt-4",children:[(0,u.jsx)("button",{className:"btn btn-secondary",onClick:function(){console.log("hi..."),console.log("hello..."),v()({method:"delete",url:"".concat(i,"/ProjectMS/taskPlan/deletePrjTask?taskId=").concat(s),params:{taskId:s}}).then((function(e){if(console.log("Delete Clicked..."),n(!1),0==e.data)return l(!0),void setTimeout((function(){l(!1)}),3e3);a(!0),setTimeout((function(){a(!1)}),3e3)})).catch((function(e){console.error("Error deleting record:",e)}))},children:"Delete"}),(0,u.jsx)("button",{className:"btn btn-secondary",children:"Cancel"})]})]})]})})})};var yt=function(e){var t=e.deletePopUp,n=e.setDeletePopUp,s=e.roleId,a=e.setDeletedSuccess,l=e.setDeleteFailed,i=c.N.baseUrl;return(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)(L(),{children:(0,u.jsxs)(p.Tk,{style:{cursor:"all-scroll"},alignment:"center",backdrop:"static",visible:t,size:"sm",className:" ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Delete Task"})})}),(0,u.jsxs)(p.sD,{children:[(0,u.jsx)("span",{children:" Are you sure you want to delete resource ?"}),(0,u.jsxs)("div",{className:"btn-container center mb-1 mt-4",children:[(0,u.jsx)("button",{className:"btn btn-secondary",onClick:function(){console.log("hi..."),console.log("hello..."),v()({method:"delete",url:"".concat(i,"/ProjectMS/taskPlan/deleteTaskResource?id=").concat(s)}).then((function(e){if(console.log("Delete Clicked..."),0==e.data)return n(!1),l(!0),void setTimeout((function(){l(!1)}),3e3);n(!1),a(!0),setTimeout((function(){a(!1)}),3e3)})).catch((function(e){console.error("Error deleting record:",e),n(!1),a(!1)}))},children:"Delete"}),(0,u.jsx)("button",{className:"btn btn-secondary",children:"Cancel"})]})]})]})})})};var Nt=function(e){var t=e.selectedRow,n=e.taskList,l=e.setAssignedHrs,i=(e.assignedHrs,e.grp2Items),r=c.N.baseUrl,d=(0,a.useState)(!1),m=(0,s.Z)(d,2),p=m[0],h=m[1],f=(0,a.useRef)(null),j=(0,a.useState)(!1),x=(0,s.Z)(j,2),y=x[0],_=x[1],S=(0,a.useState)(0),C=(0,s.Z)(S,2),w=C[0],k=C[1];console.log("holidays>",w);var I=function(e,t,n,s){v().get(r+"/ProjectMS/taskPlan/holidays?resId=".concat(n,"&startDate=").concat(e,"&endDate=").concat(t)).then((function(e){var t=e.data;console.log(t.holidays),k(t.holidays)})).catch((function(e){console.error(e)}));for(var a=[],l=new Date(e);l<=new Date(t);){var i=l.getDay();i>=1&&i<=5&&a.push(new Date(l)),l.setDate(l.getDate()+1)}return(a.length-w)*s},T=(0,a.useState)([]),A=(0,s.Z)(T,2),E=A[0],R=A[1],F=(0,a.useState)(""),Y=(0,s.Z)(F,2),H=Y[0],L=Y[1],q=(0,a.useState)(!1),V=(0,s.Z)(q,2),G=V[0],K=V[1],W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(!1),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(!1),re=(0,s.Z)(oe,2),ce=(re[0],re[1]),de=(0,a.useState)(new Date),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],fe=(0,a.useState)(new Date),je=(0,s.Z)(fe,2),xe=je[0],ge=je[1],ye=(0,a.useState)(""),Ne=(0,s.Z)(ye,2),be=(Ne[0],Ne[1],(0,a.useState)(!1)),_e=(0,s.Z)(be,2),Se=_e[0],De=_e[1],Ce=(0,a.useState)(""),Ze=(0,s.Z)(Ce,2),we=Ze[0],Me=Ze[1],ke=(0,a.useState)(0),Ie=(0,s.Z)(ke,2),Pe=Ie[0],Te=Ie[1],Ae=(0,a.useState)(0),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1],Ye=(0,a.useState)([]),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=Oe[1],Be=(0,a.useState)(),Ue=(0,s.Z)(Be,2),qe=Ue[0],Ve=Ue[1],ze=(0,a.useState)(!1),Ge=(0,s.Z)(ze,2),Ke=Ge[0],We=Ge[1],Qe=(0,a.useState)(!1),Je=(0,s.Z)(Qe,2),Xe=Je[0],$e=Je[1],et=(0,a.useState)(!1),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],at=(0,a.useState)(!1),lt=(0,s.Z)(at,2),it=lt[0],ot=lt[1],rt=(0,a.useState)({roleId:"",resId:"",fromDt:N()(new Date).format("YYYY-MM-DD"),toDt:N()(new Date).format("YYYY-MM-DD"),newVal:"",taskId:""}),ct=(0,s.Z)(rt,2),dt=ct[0],ut=ct[1],mt=i.find((function(e){return"Task Plan"===e.display_name})),pt=(0,a.useState)({fromDt:N()(new Date).format("YYYY-MM-DD"),toDt:N()(new Date).format("YYYY-MM-DD"),taskId:"",taskRoleId:"",resId:"",dailyHrs:0,resource:""}),ht=(0,s.Z)(pt,2),vt=ht[0],ft=ht[1];(0,a.useEffect)((function(){!function(){var e=vt.resource.split("_");v().get(r+"/ProjectMS/taskPlan/resDates?taskId=".concat(n[t-1].taskId,"&roleId=").concat(e[0],"&resId=").concat(e[1])).then((function(e){var t=e.data;pe(t.toDt),ge(t.fromDt),ut((function(e){return(0,o.Z)((0,o.Z)({},e),{},{toDt:t.toDt,fromDt:t.fromDt})}))})).catch((function(e){console.error(e)}))}()}),[vt.resource]),console.log("taskList",n),console.log("taskResources>>",te),console.log("projectNewResource>>",E);var jt=function(){v().get(r+"/ProjectMS/taskPlan/taskResources?taskId=".concat(n[t-1].taskId)).then((function(e){var t=e.data;ne(t);var n=t.reduce((function(e,t){return e+t.totalHrs}),0);l(n),console.log("totalHrsSum>>",n),Le(t)})).catch((function(e){console.error(e)}))};(0,a.useEffect)((function(){jt()}),[G]),(0,a.useEffect)((function(){v().get(r+"/ProjectMS/taskPlan/projectResources?taskId=".concat(n[t-1].taskId)).then((function(e){var t=e.data;R(t.newOptions),X(t.editOptions)})).catch((function(e){console.error(e)}))}),[]);var xt=(0,u.jsxs)(he.E,{children:[(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{field:"resource",style:{width:"12rem"},header:"Resource",rowSpan:2}),(0,u.jsx)(z.s,{header:"Assignments : Task level",colSpan:3}),(0,u.jsx)(z.s,{header:"Project levels (Hrs)",colSpan:2}),(0,u.jsx)(z.s,{header:"Re-Assignments : Task level",colSpan:4}),(0,u.jsx)(z.s,{header:"Project levels (Hrs)",colSpan:2}),1==i[2].is_write&&(0,u.jsx)(z.s,{header:"Actions",style:{width:"6rem",textAlign:"center"},rowSpan:2})]}),(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{field:"fromDt",header:"From Dt"}),(0,u.jsx)(z.s,{field:"toDt",header:"To Dt"}),(0,u.jsx)(z.s,{field:"totalHrs",header:"Total Hrs"}),(0,u.jsx)(z.s,{field:"allocatedHrs",header:"Allocated"}),(0,u.jsx)(z.s,{field:"assgnedHrs",header:"Assigned"}),(0,u.jsx)(z.s,{header:"From Date"}),(0,u.jsx)(z.s,{header:"To Date"}),(0,u.jsx)(z.s,{header:"Daily Hrs"}),(0,u.jsx)(z.s,{header:"Total Hrs"}),(0,u.jsx)(z.s,{header:"Allocated"}),(0,u.jsx)(z.s,{header:"Assigned"})]})]}),gt=function(e,t){return(0,u.jsx)(g(),{name:"to_dt",id:"to_dt",dateFormat:"dd-MMM-yyyy",selected:vt.resource?new Date(me):"New"==e.resourceId?"":new Date(me),onKeyDown:function(e){e.preventDefault()},onSelect:function(e){ut((function(t){return(0,o.Z)((0,o.Z)({},t),{},{toDt:N()(e).format("YYYY-MM-DD")})})),pe(N()(e).format("YYYY-MM-DD"))},showMonthDropdown:!0,showYearDropdown:!0})},Nt=function(e){return(0,u.jsx)(g(),{name:"form_dt",id:"form_dt",selected:vt.resource?new Date(xe):new Date(e.toDt)>=new Date?new Date:"New"==e.resourceId?"":new Date(xe),dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},onSelect:function(e){ut((function(t){return(0,o.Z)((0,o.Z)({},t),{},{fromDt:N()(e).format("YYYY-MM-DD")})})),ge(N()(e).format("YYYY-MM-DD"))},showMonthDropdown:!0,showYearDropdown:!0})},bt=function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"text",onChange:function(e){ut((function(t){return(0,o.Z)((0,o.Z)({},t),{},{newVal:e.target.value})}))},id:"daily_hours"})})};return(0,u.jsxs)("div",{children:[Ke?(0,u.jsxs)("div",{className:"statusMsg success",children:[" ",(0,u.jsx)(Z.hXj,{})," Resource saved successfully."]}):"",it?(0,u.jsxs)("div",{className:"statusMsg success",children:[" ",(0,u.jsx)(Z.hXj,{})," Task Deleted Successfully"]}):"",y?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," you cannot delete resource."]}):"",(0,u.jsx)("div",{className:"darkHeader",children:(0,u.jsxs)(B.w,{value:te,showGridlines:!0,headerColumnGroup:xt,editMode:"row",dataKey:"id",className:" primeReactDataTable",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],paginator:!0,rows:25,children:[(0,u.jsx)(z.s,{field:"resource",header:"Resource",body:function(e){return le&&e.resourceId==we&&Se?(0,u.jsx)("select",{disabled:!0,children:J.filter((function(t){return t.label===e.resource})).map((function(e,t){return(0,u.jsx)("option",{value:e.label,children:e.label},t)}))}):"New"==e.resourceId&&Se?(0,u.jsx)("select",{onChange:function(e){ft((function(t){return(0,o.Z)((0,o.Z)({},t),{},{resource:e.target.value})}))},children:E.map((function(e,t){return(0,u.jsx)("option",{value:e.id,children:e.label},e)}))}):(0,u.jsx)(u.Fragment,{children:e.resource})}},"resource"),(0,u.jsx)(z.s,{field:"fromDt",style:{whiteSpace:"normal"}},"fromDt"),(0,u.jsx)(z.s,{field:"toDt",style:{whiteSpace:"normal"}},"toDt"),(0,u.jsx)(z.s,{field:"totalHrs",body:function(e){return(0,u.jsx)("span",{style:{display:"block",float:"right"},children:e.totalHrs.toFixed(2)})}},"totalHrs"),(0,u.jsx)(z.s,{field:"allocatedHrs",body:function(e){return(0,u.jsx)("span",{style:{display:"block",float:"right"},children:null==e.allocatedHrs?"0.00":e.allocatedHrs.toFixed(2)})}},"allocatedHrs"),(0,u.jsx)(z.s,{field:"assgnedHrs",body:function(e){return(0,u.jsx)("span",{style:{display:"block",float:"right"},children:null==e.assgnedHrs?"0.00":e.assgnedHrs.toFixed(2)})}},"assgnedHrs"),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we&&Se||"New"==e.resourceId&&Se?Nt(e):""}},""),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we&&Se||"New"==e.resourceId&&Se?gt(e):""}},""),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we&&Se||"New"==e.resourceId&&Se?bt():""}},""),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we?(0,u.jsx)("span",{style:{display:"block",float:"left"},children:0==parseInt(Re).toFixed(2)||null==parseInt(Pe).toFixed(2)?"":I(xe,me,e.resourceId,dt.newVal).toFixed(2)}):""}},""),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we?(0,u.jsx)("span",{style:{display:"block",float:"right"},children:0==parseInt(Re).toFixed(2)||null==parseInt(Pe).toFixed(2)?"":parseInt(Re).toFixed(2)}):""}},""),(0,u.jsx)(z.s,{field:"",body:function(e){return e.resourceId==we?(0,u.jsx)("span",{style:{display:"block",float:"right"},children:0==parseInt(Pe).toFixed(2)||null==parseInt(Pe).toFixed(2)?"":parseInt(Pe).toFixed(2)}):""}},""),1==i[2].is_write&&(0,u.jsx)(z.s,{bodyStyle:{textAlign:"align center"},body:function(e){return(0,u.jsx)("div",{style:{paddingLeft:"20px"},children:(0,u.jsxs)("label",{cursor:"pointer",children:[(0,u.jsx)(b.QML,{title:"Edit",className:"mr-1",color:"orange",onClick:function(){st(!0),ie(!0),dt.resId!=e.resourceId&&""==dt.newVal?(!function(e,t,n){v().get(r+"/ProjectMS/taskPlan/resDates?taskId=".concat(e,"&roleId=").concat(n,"&resId=").concat(t)).then((function(e){var t=e.data;pe(t.toDt),ge(t.fromDt),ut((function(e){return(0,o.Z)((0,o.Z)({},e),{},{toDt:t.toDt,fromDt:t.fromDt})}))})).catch((function(e){console.error(e)}))}(e.taskId,e.resourceId,e.roleId),De(!0),Me(e.resourceId),Ve(e),ut((function(t){return(0,o.Z)((0,o.Z)({},t),{},{roleId:e.roleId,resId:e.resourceId,taskId:e.taskId})}))):v().get("".concat(r,"/ProjectMS/taskPlan/resHours"),{params:dt}).then((function(e){var t=e.data;Fe(t[0].allocationHrs),Te(t[0].assignedHrs)})).catch((function(e){console.error(e)}))}}),"\xa0",(0,u.jsx)("span",{onClick:function(){K(!0),L(e.taskRoleId)},children:(0,u.jsx)(b.YK6,{title:"Delete",color:"orange"})})]})})}})]})}),1==(null===mt||void 0===mt?void 0:mt.is_write)?(0,u.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,u.jsxs)("button",{className:"btn btn-primary",onClick:function(){!function(){st(!0),$e(!0),De(!0),ce(!0);var e={resource:"",fromDt:"",toDt:"",totalHrs:0,allocatedHrs:0,assgnedHrs:0,resourceId:"New"};ne((function(t){return[e].concat((0,O.Z)(t))}))}()},variant:"contained",disabled:!!nt,children:[(0,u.jsx)(P.WZt,{size:"1.2em"})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary",variant:"contained",onClick:function(){!function(){var e=setTimeout((function(){h(!0)}),2e3);st(!1),De(!1),v().post("".concat(r,"/ProjectMS/taskPlan/saveTaskResource"),Xe?{fromDt:N()(xe).format("YYYY-MM-DD"),toDt:N()(me).format("YYYY-MM-DD"),taskId:n[t-1].taskId,taskRoleId:"null",resId:"null",dailyHrs:""==dt.newVal?0:dt.newVal,resource:vt.resource}:{fromDt:N()(qe.fromDt).format("YYYY-MM-DD"),toDt:N()(qe.toDt).format("YYYY-MM-DD"),taskId:qe.taskId,taskRoleId:qe.taskRoleId,resId:qe.resourceId,dailyHrs:""==dt.newVal?0:dt.newVal,resource:qe.roleId+"_"+qe.resourceId}).then((function(t){var n=t.data;if(clearTimeout(e),h(!1),null==n.id||""==n.id)return We(!1),void jt();$e(!1),De(!1),ce(!1),ie(!1),We(!0),setTimeout((function(){We(!1)}),3e3),jt()})).catch((function(e){console.error(e)}))}()},disabled:!nt,children:[(0,u.jsx)(U.UQg,{size:"0.9em"})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-primary",variant:"contained",onClick:function(){st(!1),De(!1),ne(He)},disabled:!nt,children:[(0,u.jsx)(M.sQZ,{})," Cancel"]})]}):"",G?(0,u.jsx)(yt,{setDeleteFailed:_,deletePopUp:G,setDeletePopUp:K,roleId:H,setDeletedSuccess:ot}):"",p?(0,u.jsx)(D.Z,{handleAbort:function(){f.current&&f.current.abort(),h(!1)}}):""]})};var bt=function(e){var t=e.resourcePopUp,n=e.setResourcePopUp,l=e.taskList,i=e.selectedRow,o=e.grp2Items,r=(0,a.useState)(0),d=(0,s.Z)(r,2),m=d[0],h=d[1];return c.N.baseUrl,(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)(p.Tk,{alignment:"center",backdrop:"static",visible:t,size:"xl",className:" ui-dialog",onClose:function(){return n(!1)},children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:"Resource Allocation"})})}),(0,u.jsxs)(p.sD,{style:{cursor:"auto"},children:[(0,u.jsx)("div",{className:"projGlance col-12 ",style:{backgroundColor:"#f8f9fa"},children:(0,u.jsxs)("div",{className:"col-12 row",children:[(0,u.jsxs)("div",{className:"col-md-8 row mb-2",children:[(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-3  no-padding",children:"Task Name"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-6 ",children:l[i-1].content})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-3  no-padding",children:"Task Start Date"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-6 ",children:N()(l[i-1].start).format("DD-MMM-YYYY")})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-3  no-padding",children:"Task End Date"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-6 ",children:N()(l[i-1].finish).format("DD-MMM-YYYY")})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("label",{className:"col-3  no-padding",children:"Role"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-6 ",children:null==l[i-1].roleName?"All":l[i-1].roleName})]})})]}),(0,u.jsxs)("div",{className:"col-4 row",children:[(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",style:{borderLeft:"1.5px solid #ddd"},children:[(0,u.jsx)("label",{className:"col-6  no-padding",children:"Estimated Hrs"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-5 ",children:l[i-1].estimatedHrs})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",style:{borderLeft:"1.5px solid #ddd"},children:[(0,u.jsx)("label",{className:"col-6  no-padding",children:"Assigned Hrs"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-5 ",children:m})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",style:{borderLeft:"1.5px solid #ddd"},children:[(0,u.jsx)("label",{className:"col-6  no-padding",children:"Unassigned Hrs"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsxs)("span",{className:"col-5 ",children:[" ",l[i-1].estimatedHrs-m]})]})}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsxs)("div",{className:"row",style:{borderLeft:"1.5px solid #ddd"},children:[(0,u.jsx)("label",{className:"col-6  no-padding",children:"Actual Hrs"}),(0,u.jsx)("span",{className:"col-1 p0",children:":"}),(0,u.jsx)("span",{className:"col-5 ",children:null==l[i-1].actualHrs?0:l[i-1].actualHrs})]})})]})]})}),(0,u.jsx)("div",{className:"mt-2",children:(0,u.jsx)(Nt,{setAssignedHrs:h,assignedHrs:m,taskList:l,selectedRow:i,grp2Items:o})})]})]})})};var _t=function(e){var t=e.projectId,n=e.grp2Items,i=n.find((function(e){return"Task Plan"===e.display_name})),r=localStorage.getItem("resId"),d=c.N.baseUrl,m=(0,a.useState)([]),p=(0,s.Z)(m,2),h=p[0],f=p[1],j=(0,a.useState)(!1),x=(0,s.Z)(j,2),y=x[0],_=x[1],S=(0,a.useState)(!1),D=(0,s.Z)(S,2),C=D[0],w=D[1],M=(0,a.useState)([]),I=(0,s.Z)(M,2),P=I[0],T=I[1],A=(0,a.useState)([]),E=(0,s.Z)(A,2),R=E[0],F=E[1],Y=(0,a.useState)([]),H=(0,s.Z)(Y,2),L=H[0],U=H[1],q=(0,a.useState)([]),V=(0,s.Z)(q,2),G=V[0],K=V[1],W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=Q[0],X=Q[1],$=(0,a.useState)(""),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(""),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)(!1),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue=(0,a.useState)([]),me=(0,s.Z)(ue,2),pe=me[0],he=me[1],ve=(0,a.useState)(!1),fe=(0,s.Z)(ve,2),je=fe[0],xe=fe[1],ge=(0,a.useState)(!1),ye=(0,s.Z)(ge,2),Ne=ye[0],be=ye[1],_e=(0,a.useState)(new Date),Se=(0,s.Z)(_e,2),Ce=Se[0],Ze=Se[1],we=(0,a.useState)(new Date),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1],Pe=(0,a.useState)(null),Te=(0,s.Z)(Pe,2),Ae=Te[0],Ee=Te[1],Re=(0,a.useState)(null),Fe=(0,s.Z)(Re,2),Ye=Fe[0],Oe=Fe[1],He=function(e,t){return(0,jt.Z)({start:e,end:t}).filter((function(e){return!(0,xt.Z)(e)})).length},Le=function(e,t){for(var n=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},s=new Date(e),a=t;a>0;)s=n(s,1),(0,xt.Z)(s)||a--;return s},Be=(0,a.useState)([]),Ue=(0,s.Z)(Be,2),qe=Ue[0],Ve=Ue[1];(0,a.useEffect)((function(){v()({method:"GET",url:d+"/CommonMS/master/getMenus?loggedUserId=".concat(r)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Ve([e])}))}))}),[]),(0,a.useEffect)((function(){v()({method:"get",url:d+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(t)}).then((function(e){var t=e.data;Ze(new Date(t[0].plandEndDate)),Ie(new Date(t[0].plandStartDate))})).catch((function(e){console.log(e)}))}),[]);var ze=function(){v().get(d+"/ProjectMS/taskPlan/projectTask?projectId=".concat(t,"&userId=").concat(r)).then((function(e){var t=e.data;t.spData.forEach((function(e){e.finish=N()(e.finish).subtract(1,"day").format("YYYY-MM-DD")})),K(t);var n=t.spData.map((function(e,t){return(0,o.Z)({sno:t+1,duration:He(new Date(e.start),new Date(e.finish)),finish:N()(e.finish).subtract(1,"day").format("YYYY-MM-DD")},e)}));F(n),X(n),T(t.taskTypes),f(t.roleTypes)})).catch((function(e){console.error(e)}))};(0,a.useEffect)((function(){ze()}),[ce,je]);var Ge=function(e,t,n){var s=(0,O.Z)(R),a=s.findIndex((function(t){return t===e}));s[a]=(0,o.Z)((0,o.Z)({},e),{},(0,l.Z)({},t,n)),F(s)};(0,a.useEffect)((function(){v().get(d+"/ProjectMS/project/projectinfo?ProjectId=".concat(t)).then((function(e){var t=e.data;U(t)})).catch((function(e){console.log(e)}))}),[]);var Ke=(0,a.useState)(!1),We=(0,s.Z)(Ke,2),Qe=We[0],Je=We[1],Xe=function(){Je(!0),""!=te&&he(R[te-1])};(0,a.useEffect)((function(){}),[te]);var $e=function e(t,n){for(var s=[],a=t;a<R.length;a++){var l=R[a];if(l.indentation===n+1)s.push(l),a+=e(a,n+1).length;else if(l.indentation<=n)break}return s},et=function(e){for(var t=e.indentation,n=e.sno;n<R.length;n++){var s=R[n];if(s.indentation>t)return!0;if(s.indentation<=t)break}return!1},tt=R.reduce((function(e,t){return null!==t.indentation?Math.min(e,t.indentation):null}),1/0);return(0,u.jsxs)("div",{className:"group-content ",children:[(0,u.jsxs)("div",{className:"pageTitle mb-2",children:[(0,u.jsx)("div",{className:"childOne",children:L.map((function(e){return(0,u.jsx)("h2",{children:e.project_name})}))}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Task Plan"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:qe,currentScreenName:["Projects","Open","Planning","Task Plan"]}),y?(0,u.jsxs)("div",{className:"statusMsg success",children:[" ",(0,u.jsx)(Z.hXj,{})," Task Deleted Successfully"]}):"",C?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," Task cannot be deleted as resources are assigned to this task."]}):"",Ne?(0,u.jsxs)("div",{className:"statusMsg success",children:[" ",(0,u.jsx)(Z.hXj,{})," Task Saved Successfully"]}):"",(0,u.jsx)("div",{className:"col-md-12 mb-2 grayBg",children:(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("div",{className:"col-9 mt-2",children:(0,u.jsx)("pre",{children:1==n[2].is_write?(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{src:"ia_support_icons/new_item.png",title:"Add new item"}),(0,u.jsxs)("span",{onClick:function(){var e={sno:R.length+1,content:"New Task",start:R[J.length-1].start,finish:N()(Ce).format("YYYY-MM-DD"),indentation:tt,duration:He(ke,Ce),roleName:null,estimatedHrs:0,assignmentsContent:"",actualHrs:R[J.length-1].actualHrs,approvedHrs:R[J.length-1].approvedHrs,status:"New",taskType:236};F((function(t){return[].concat((0,O.Z)(t),[e])}))},className:"newItem",style:{cursor:"pointer"},title:"Add new item",children:[" ","New item"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/insert_new.png",title:"Insert new item before selection"}),(0,u.jsxs)("span",{onClick:""==te?"":function(){function e(e){var t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(s)}var t={sno:te,content:"New Task",start:e(ke),indentation:R[parseInt(te)-1].indentation,finish:e(Ce),duration:He(ke,Ce),roleName:null,estimatedHrs:0,assignmentsContent:"",actualHrs:0,approvedHrs:0,status:"New",taskType:236};F((function(e){var n=(0,O.Z)(e);n.splice(parseInt(te)-1,0,t);for(var s=parseInt(te);s<n.length;s++)n[s].sno=s+1;return n}))},className:"Insert New",style:{cursor:"pointer"},title:"Insert new item before selection",children:[" ","Insert New"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/unindent_task.png"}),(0,u.jsxs)("span",{onClick:function(){return""===te?"":function(){if(null!==te&&0!==te){var e=(0,O.Z)(R),t=e[te-1];t&&(et(t)||(t.indentation-=1,F(e)))}}()},className:"Unindent Task",style:{cursor:"pointer"},title:"Decrease seleced item indentation",children:[" ","Unindent Task"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/indent_task.png"}),(0,u.jsxs)("span",{onClick:function(){return""===te?"":function(){if(null!==te&&0!==te){var e=(0,O.Z)(R),t=e[te-1],n=e[te-2];t&&(n.indentation<t.indentation||(t.indentation+=1,F(e)))}}()},className:"Indent Task",style:{cursor:"pointer"},title:"Increase seleced item indentation",children:[" ","Indent Task"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/delete.png",title:"Delete selected item"}),(0,u.jsxs)("span",{onClick:function(){return""==te?"":de(!0)},className:"Delete",style:{cursor:"pointer"},title:"Delete selected item",children:[" ","Delete"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/copy.png",title:"Copy selected item"}),(0,u.jsxs)("span",{onClick:""==te?"":Xe,className:"Copy",style:{cursor:"pointer"},title:"Copy selected item",children:[" ","Copy"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/paste.png",title:"Paste after selected item"}),(0,u.jsxs)("span",{onClick:""==te?"":1==Qe?function(){var e={sno:te,content:pe.content,start:pe.start,finish:pe.finish,indentation:R[te-1].indentation,duration:pe.duration,roleName:null,estimatedHrs:pe.estimatedHrs,assignmentsContent:"",actualHrs:0,approvedHrs:0,status:"New",taskType:pe.taskType};F((function(t){var n=(0,O.Z)(t);n.splice(parseInt(te),0,e);for(var s=parseInt(te);s<n.length;s++)n[s].sno=s+1;return n}))}:"",className:"Paste",style:{cursor:"pointer"},title:"Paste after selected item",children:[" ","Paste"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/move_up.png",title:"Move selected item up"}),(0,u.jsxs)("span",{onClick:""==te?"":function(){te>1&&(F((function(e){var t=e.map((function(e){return(0,o.Z)({},e)})),n=t[te-1];return t[te-1]=t[te-2],t[te-2]=n,t[te-1].sno=te-0,t[te-2].sno=te-1,t})),ne(te-1))},className:"Move Up",style:{cursor:"pointer"},title:"Move selected item up",children:[" ","Move Up"," "]}),(0,u.jsx)("img",{src:"ia_support_icons/move_down.png",title:"Move selected item down"}),(0,u.jsxs)("span",{onClick:""==te?"":function(){te<R.length&&(F((function(e){var t=e.map((function(e){return(0,o.Z)({},e)})),n=t[te-1];return t[te-1]=t[te],t[te]=n,t[te-1].sno=te,t[te].sno=te+1,t})),ne(te+1))},className:"Move Down",style:{cursor:"pointer"},title:"Move selected item down",children:[" ","Move Down"," "]})]}):""})})})}),(0,u.jsx)("div",{className:"group mb-3 customCard darkHeader",children:(0,u.jsxs)("div",{className:"col-md-12 no-padding",children:[(0,u.jsx)("div",{className:"card p-fluid mb-2 ",children:(0,u.jsxs)(B.w,{value:R.filter((function(e){return e.indentation===tt})),expandedRows:Ae,onRowToggle:function(e){return Ee(e.data)},rowExpansionTemplate:function e(t){var s=t.indentation,a=$e(t.sno,s);return(0,u.jsxs)(B.w,{expandAll:!0,value:a,showGridlines:!0,expandedRows:Ye,onRowToggle:function(e){return Oe(e.data)},rowExpansionTemplate:e,className:"primeReactDataTable taskPlanInnerTable",collapseAll:!0,emptyMessage:!0,children:[(0,u.jsx)(z.s,{feild:"expand",expander:et}),(0,u.jsx)(z.s,{field:"content",header:"Task",body:function(e){return(0,u.jsx)("input",{className:"lvl-".concat(e.indentation),style:{fontWeight:et(e)?"bolder":"normal"},disabled:1!=n[2].is_write,type:"text",value:e.content,onChange:function(t){Ge(e,"content",t.target.value)},onClick:function(){var t=e.sno;ne(t),ie(e.taskId)}})}},"content"),(0,u.jsx)(z.s,{field:"start",header:"Start",body:function(e){return(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:(0,u.jsx)(g(),{portalId:"root-portal",disabled:1!=n[2].is_write||et(e),dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},filterDate:function(e){return 0!==e.getDay()&&6!==e.getDay()},selected:N()(e.start).toDate(),showMonthDropdown:!0,showYearDropdown:!0,onChange:function(t){var n=(0,O.Z)(R),s=He(t,new Date(e.finish));n[e.sno-1]=(0,o.Z)((0,o.Z)({},e),{},{duration:s,start:N()(t).format("YYYY-MM-DD")}),F(n)}})})}},"start"),(0,u.jsx)(z.s,{field:"finish",header:"Finish",body:function(e){return(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:(0,u.jsx)(g(),{portalId:"root-portal",disabled:1!=n[2].is_write||et(e),dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},selected:N()(e.finish).toDate(),showMonthDropdown:!0,showYearDropdown:!0,filterDate:function(e){return 0!==e.getDay()&&6!==e.getDay()},onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){var n=(0,O.Z)(R),s=He(new Date(e.start),t);n[e.sno-1]=(0,o.Z)((0,o.Z)({},e),{},{duration:s,finish:N()(t).format("YYYY-MM-DD")}),F(n)}})})}},"finish"),(0,u.jsx)(z.s,{field:"duration",header:"Duration(d)",body:function(e){return(0,u.jsx)("input",{style:{fontWeight:et(e)?"bolder":"normal"},disabled:1!=n[2].is_write||et(e),type:"text",value:parseInt(e.duration),onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){Ge(e,"duration",t.target.value)},onBlur:function(t){var n=function(e){var t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(s)}(Le(e.start,t.target.value-1));Ge(e,"finish",n)}})}},"duration"),(0,u.jsx)(z.s,{field:"roleName",header:"Role",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)("select",{disabled:1!=n[2].is_write,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){var n=t.target.options[t.target.selectedIndex].getAttribute("selectedRoleName");Ge(e,"roleId",t.target.value,e.roleName=n)},children:[(0,u.jsx)("option",{value:null,children:"<<All>>"}),h.map((function(t){return(0,u.jsx)("option",{value:t.id,selected:e.roleId==t.id,selectedRoleName:t.name,children:t.name},t.id)}))]})}},"roleName"),(0,u.jsx)(z.s,{field:"estimatedHrs",header:"Estimated Hrs",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("input",{disabled:1!=n[2].is_write,type:"text",value:e.estimatedHrs,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"estimatedHrs",t.target.value)},style:{textAlign:"right"}})}},"estimatedHrs"),(0,u.jsx)(z.s,{field:"assignmentsContent",header:"Assignments",body:function(e){return(0,u.jsx)("input",{type:"text",value:e.assignmentsContent,style:{textDecoration:"underline"},onClick:function(){var t=e.sno,n=e.finish,s=N()(new Date).format("YYYY-MM-DD");xe(n>s),s>n&&(xe(!1),alert("Change the task end date for resource allocations")),0==e.estimatedHrs?(xe(!1),alert("Please enter Estimated Hrs")):""==e.assignmentsContent&&(xe(!1),alert("Please save Task")),ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"assignmentsContent",t.target.value)}})}},"assignmentsContent"),(0,u.jsx)(z.s,{field:"actualHrs",header:"Actual Hrs",body:function(e,t){var n=e[t.field],s=null==n?"0.0":n.toFixed(1);return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:s})}},"actualHrs"),(0,u.jsx)(z.s,{field:"approvedHrs",header:"Approved Hrs",body:function(e,t){var n=e[t.field],s=null==n?"0.0":n.toFixed(1);return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:s})}},"approvedHrs"),(0,u.jsx)(z.s,{field:"status",header:"Status",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(t){var n=e.sno;ne(n),ie(e.taskId)},style:{display:"block",textAlign:"center",margin:"0 auto"},children:e.status})}},"status"),(0,u.jsx)(z.s,{field:"taskType",header:"Task Type",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("select",{disabled:1!=n[2].is_write,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"taskType",t.target.value)},children:P.map((function(t){return(0,u.jsx)("option",{value:t.value,selected:e.taskType==t.value,children:t.name},t.value)}))})}},"taskType")]})},showGridlines:!0,className:"primeReactDataTable taskPlanTable",children:[(0,u.jsx)(z.s,{feild:"expand",expander:et}),(0,u.jsx)(z.s,{field:"content",header:"Task",body:function(e){return(0,u.jsx)("input",{className:"lvl-".concat(e.indentation),style:{fontWeight:et(e)?"bolder":"normal"},disabled:1!=n[2].is_write,type:"text",value:e.content,onChange:function(t){Ge(e,"content",t.target.value)},onClick:function(){var t=e.sno;ne(t),ie(e.taskId)}})}},"content"),(0,u.jsx)(z.s,{field:"start",header:"Start",body:function(e){return(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:(0,u.jsx)(g(),{portalId:"root-portal",disabled:1!=n[2].is_write||et(e),dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},filterDate:function(e){return 0!==e.getDay()&&6!==e.getDay()},selected:N()(e.start).toDate(),showMonthDropdown:!0,showYearDropdown:!0,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){var n=(0,O.Z)(R),s=He(t,new Date(e.finish));n[e.sno-1]=(0,o.Z)((0,o.Z)({},e),{},{duration:s,start:N()(t).format("YYYY-MM-DD")}),F(n)}})})}},"start"),(0,u.jsx)(z.s,{field:"finish",header:"Finish",body:function(e){return(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:(0,u.jsx)(g(),{portalId:"root-portal",disabled:1!=n[2].is_write||et(e),dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},selected:N()(e.finish).toDate(),showMonthDropdown:!0,showYearDropdown:!0,filterDate:function(e){return 0!==e.getDay()&&6!==e.getDay()},onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){var n=(0,O.Z)(R),s=He(new Date(e.start),t);n[e.sno-1]=(0,o.Z)((0,o.Z)({},e),{},{duration:s,finish:N()(t).format("YYYY-MM-DD")}),F(n)}})})}},"finish"),(0,u.jsx)(z.s,{field:"duration",header:"Duration(d)",body:function(e){return(0,u.jsx)("input",{style:{fontWeight:et(e)?"bolder":"normal"},disabled:1!=n[2].is_write||et(e),type:"text",value:parseInt(e.duration),onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){Ge(e,"duration",t.target.value)},onBlur:function(t){var n=function(e){var t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(s)}(Le(e.start,t.target.value-1));Ge(e,"finish",n)}})}},"duration"),(0,u.jsx)(z.s,{field:"roleName",header:"Role",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)("select",{disabled:1!=n[2].is_write,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){var n=t.target.options[t.target.selectedIndex].getAttribute("selectedRoleName");Ge(e,"roleId",t.target.value,e.roleName=n)},children:[(0,u.jsx)("option",{value:null,children:"<<All>>"}),h.map((function(t){return(0,u.jsx)("option",{value:t.id,selected:e.roleId==t.id,selectedRoleName:t.name,children:t.name},t.id)}))]})}},"roleName"),(0,u.jsx)(z.s,{field:"estimatedHrs",header:"Estimated Hrs",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("input",{disabled:1!=n[2].is_write,type:"text",value:e.estimatedHrs,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"estimatedHrs",t.target.value)},style:{textAlign:"right"}})}},"estimatedHrs"),(0,u.jsx)(z.s,{field:"assignmentsContent",header:"Assignments",body:function(e){return(0,u.jsx)("input",{type:"text",value:e.assignmentsContent,style:{textDecoration:"underline"},onClick:function(){var t=e.sno,n=e.finish,s=N()(new Date).format("YYYY-MM-DD");xe(n>s),s>n&&(xe(!1),alert("Change the task end date for resource allocations")),0==e.estimatedHrs?(xe(!1),alert("Please enter Estimated Hrs")):""==e.assignmentsContent&&(xe(!1),alert("Please save Task")),ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"assignmentsContent",t.target.value)}})}},"assignmentsContent"),(0,u.jsx)(z.s,{field:"actualHrs",header:"Actual Hrs",body:function(e,t){var n=e[t.field],s=null==n?"0.0":n.toFixed(1);return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:s})}},"actualHrs"),(0,u.jsx)(z.s,{field:"approvedHrs",header:"Approved Hrs",body:function(e,t){var n=e[t.field],s=null==n?"0.0":n.toFixed(1);return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},children:s})}},"approvedHrs"),(0,u.jsx)(z.s,{field:"status",header:"Status",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("span",{onClick:function(t){var n=e.sno;ne(n),ie(e.taskId)},style:{display:"block",textAlign:"center",margin:"0 auto"},children:e.status})}},"status"),(0,u.jsx)(z.s,{field:"taskType",header:"Task Type",body:function(e){return et(e)?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)("select",{disabled:1!=n[2].is_write,onClick:function(){var t=e.sno;ne(t),ie(e.taskId)},onChange:function(t){return Ge(e,"taskType",t.target.value)},children:P.map((function(t){return(0,u.jsx)("option",{value:t.value,selected:e.taskType==t.value,children:t.name},t.value)}))})}},"taskType")]})}),1==(null===i||void 0===i?void 0:i.is_write)?(0,u.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 btn-container center",children:[(0,u.jsxs)("button",{className:"btn btn-primary",name:"save",id:"save",type:"save",onClick:function(){!function(e){var n={Tasks:{Task:[]}};Object.keys(e).forEach((function(t){var s=e[t],a={rowIndex:s.sno,TaskId:""==s.taskId||null==s.taskId?1:s.taskId,TaskName:s.content,LeafId:""==s.indentation||null==s.indentation?0:s.indentation,Start:s.start,Finish:s.finish,Duration:s.duration,TaskType:""==s.taskType||null==s.taskType?"null":s.taskType,roleId:""==s.roleId||null==s.roleId||void 0==s.roleId||"<<All>>"==s.roleId?"null":s.roleId,EstimatedHours:s.estimatedHrs};n.Tasks.Task.push(a)}));var s=JSON.stringify(n),a=new FormData;a.append("taskParams",s),v().post(d+"/ProjectMS/taskPlan/saveTaskPlan?projectId=".concat(t),a).then((function(e){e.data,ze(),be(!0),setTimeout((function(){be(!1)}),3e3)})).catch((function(e){console.log(e)}))}(R),be(!0)},children:[(0,u.jsx)(De.CLo,{}),"Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",id:"cancel",type:"reset",onClick:function(){Je(!1),ne("");var e=G.spData.map((function(e,t){return(0,o.Z)({sno:t+1,duration:He(new Date(e.start),new Date(e.finish))},e)}));F((0,O.Z)(e))},children:[(0,u.jsx)(De.S1K,{}),"Cancel"]})]}):""]})}),ce?(0,u.jsx)(gt,{setDeletedSuccess:_,setDeletedFailed:w,deletePopUp:ce,setDeletePopUp:de,selectedTaskId:le}):"",je?(0,u.jsx)(bt,{resourcePopUp:je,setResourcePopUp:xe,taskList:R,selectedRow:te,grp2Items:n}):""]})},St=n(25763),Dt=n(36036);var Ct=function(e){var t=e.data,n=e.sendSelectedRowsData,s=e.overAllocation,a=e.setOverAllocation,l=(e.setSaveOverAlloc,e.setConfirmSave);return(0,u.jsxs)("div",{children:[console.log(t,"--resource_id"),(0,u.jsxs)(p.Tk,{visible:s,size:"sm",className:"ui-dialog",onClose:function(){return a(!1)},backdrop:"static",children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:"Resource Allocation"})}),(0,u.jsxs)(p.sD,{children:["Below Resource(s) will be overallocated: ",t.resourceData[0].resource,(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Do you still want to continue?",(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){console.log("yes clicked"),l(!0),a(!1),n(null,null,!0,!0)},children:[(0,u.jsx)(Dt.DqJ,{size:"1.5em"}),"Yes "]}),(0,u.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){a(!1)},children:[" ",(0,u.jsx)(M.sQZ,{})," No "]})]})]})]})]})};var Zt=function(e){var t,n,i=e.tableData,r=e.Data,d=e.setAddErrMsg,m=e.setErrData,p=e.addErrMsg,h=e.projectId,f=e.setSearchResource,j=e.loggedUserId,x=e.getTableData,y=(e.setEditMessage,e.setAddMessage,e.setAddResMessage),_=e.setDailyhrsRange,S=e.setEditResMessage,D=(e.validateproject,e.setValidateproject,e.dailyhrsRange),C=e.grp2Items;console.log(C);var Z=c.N.baseUrl,w=(0,a.useState)([]),k=(0,s.Z)(w,2),I=k[0],P=k[1],T=(0,a.useState)(!1),A=(0,s.Z)(T,2),E=A[0],R=(A[1],(0,a.useState)(!0)),F=(0,s.Z)(R,2),Y=(F[0],F[1]),H=(0,a.useState)([]),L=(0,s.Z)(H,2),q=L[0],V=L[1],G=(0,a.useState)(!1),K=(0,s.Z)(G,2),W=K[0],Q=K[1],J=(0,a.useState)(r.plannedStartDt),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=(0,a.useState)(r.plannedEndDt),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)(!1),ie=(0,s.Z)(le,2),oe=(ie[0],ie[1]),re=(0,a.useState)(""),ce=(0,s.Z)(re,2),de=ce[0],ue=ce[1],me=(0,a.useState)({}),pe=(0,s.Z)(me,2),he=pe[0],ve=pe[1],fe=(0,a.useState)(!1),je=(0,s.Z)(fe,2),xe=(je[0],je[1]),ge=(0,a.useState)(!1),ye=(0,s.Z)(ge,2),Ne=ye[0],be=ye[1],_e={id:"",projectRoleId:r.id,resourceId:null===(t=i.resourceData[0])||void 0===t?void 0:t.resourceId,allocationTypeId:"187",effortHours:"0",dailyHours:"0",hourlyRate:"0",hourlyCost:null===(n=i.resHourlyCost[0])||void 0===n?void 0:n.cost,countryId:"3",baselineVersionId:null,statusId:"474",comments:"",ss:"",isprojectTask:null,fromDate:r.plannedStartDt,toDate:r.plannedEndDt,isDelete:"",createdById:j,lastUpdatedById:j,ProjectId:h,baseUrl:Z},Se=(0,a.useState)(_e),De=(0,s.Z)(Se,2),Ce=De[0],Ze=De[1],we=(0,a.useState)([]),Me=(0,s.Z)(we,2),ke=Me[0],Ie=Me[1];console.log(r,"data in res");var Pe=(0,a.useRef)(null),Te=(0,a.useState)(!1),Ae=(0,s.Z)(Te,2),Ee=Ae[0],Re=Ae[1],Fe=[(0,o.Z)((0,o.Z)((0,o.Z)({},i.resourceData[0]),i.resHourlyCost[0]),r)];console.log(Fe,"----tabledata"),(0,a.useEffect)((function(){V((function(e){return I}))}),[I]),(0,a.useEffect)((function(){Ye()}),[]),(0,a.useEffect)((function(){(D||p)&&window.scrollTo({top:Pe.current.offsetTop,behavior:"smooth"})}),[D,p]);var Ye=function(){v()({method:"get",url:Z+"/ProjectMS/CapacityPlan/getAllocationDropdown"}).then((function(e){var t=e.data;Ie(t)}))},Oe=function(e){P(e.value),function(){var e,t,n;console.log(i),v()({method:"get",url:Z+"/ProjectMS/CapacityPlan/getHolidays?resId=".concat(null===(e=i.resourceData[0])||void 0===e?void 0:e.resourceId,"&frmDt=").concat(null===(t=Fe[0])||void 0===t?void 0:t.plannedStartDt,"&toDt=").concat(null===(n=Fe[0])||void 0===n?void 0:n.plannedEndDt)}).then((function(e){var t=e.data;ve(t)}))}(),console.log("table selected"),console.log(e.value,"e.value"),e.value&&Y(!1)};function He(e,t){for(var n=new Date(e),s=new Date(t),a=0;n<=s;)0!==n.getDay()&&6!==n.getDay()&&a++,n.setDate(n.getDate()+1);return a}function Le(e){var t=e.split("-").map(Number),n=(0,s.Z)(t,3),a=n[0],l=n[1],i=n[2];return new Date(a,l-1,i)}console.log(he,"-- holiday");var Be=function(e,t,n,s){console.log(W),console.log(Ce,"post data");var a=function(e,t){console.log(e,t);var n=e.subrows.filter((function(e){return e.resource_id==t.resourceId}));if(n.length>0){var s=new Date(t.fromDate),a=new Date(t.toDate);return n.some((function(e){var t=new Date(e.from_dt),n=new Date(e.to_dt);return console.log(t,n),s<=n&&a>=t}))?(console.log(s,a,"Date range overlaps with existing data. Show error message."),!0):(console.log("Date range does not overlap. Proceed with save."),!1)}return console.log("Resource not present. Proceed with save."),!1}(r,Ce);if(!function(){var e=Le(Ce.fromDate),t=Le(Ce.toDate),n=("".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),He(e,t));console.log(he.holidays,Ce.dailyHours,Fe[0].freeHours,"workDays");var s=n-he.holidays,a=s*Ce.dailyHours;console.log(s,"days");var l=a>Fe[0].freeHours?1:0;return console.log(l),l}()||s)return 0!=Ce.dailyHours&&null!=Ce.dailyHours&&""!=Ce.dailyHours||Re(!0),0==W?(ue((0,u.jsxs)("div",{children:[(0,u.jsx)(b.CSE,{style:{marginTop:"-3px"}}),"\xa0Please provide highlighted values"]})),void setTimeout((function(){ue(null)}),3e3)):a?(m((function(e){var t,n,s;return(0,o.Z)((0,o.Z)({},e),{},(s={},(0,l.Z)(s,"resName",null===(t=i.resourceData[0])||void 0===t?void 0:t.resource),(0,l.Z)(s,"roleType",null===(n=Fe[0])||void 0===n?void 0:n.roleType),(0,l.Z)(s,"fromDate",Ce.fromDate),(0,l.Z)(s,"toDate",Ce.toDate),s))})),d(!0),void setTimeout((function(){d(!1)}),5e3)):void((n||s)&&v()({method:"post",url:Z+"/ProjectMS/CapacityPlan/saveInnerTabResource",data:Ce}).then((function(e){console.log(e),"Saved Successfully"==e.data.status?y(!0):S(!0),x(),setTimeout((function(){y(!1),S(!1)}),2e3)})));be(!0)};return(0,u.jsxs)(u.Fragment,{children:[de&&(0,u.jsx)("div",{className:"statusMsg error",children:de}),(0,u.jsx)("div",{className:"tableHeader",children:(0,u.jsx)("div",{className:"leftSection",children:(0,u.jsx)("h2",{children:"Resource List"})})}),(0,u.jsxs)("div",{className:"p-fluid capacityPlanResTable darkHeader",style:{marginTop:"-2px"},children:[(0,u.jsxs)(B.w,{value:Fe,className:"primeReactDataTable",selectionMode:"checkbox",selection:I,editMode:"row",rows:10,showGridlines:!0,dataKey:"id",disabled:E,onSelectionChange:function(e){return Oe(e)},emptyMessage:"No Data Found",children:[1==C[1].is_write&&(0,u.jsx)(z.s,{selectionMode:"multiple",headerStyle:{width:"3rem",padding:"0px 22px"}}),(0,u.jsx)(z.s,{sortable:!0,field:"resource",header:"Resource",body:function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.resource,children:e.resource})}}),(0,u.jsx)(z.s,{sortable:!0,field:"designation",header:"Designation",body:function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.designation,children:e.designation})}}),(0,u.jsx)(z.s,{sortable:!0,field:"businessUnit",header:"Business Unit",body:function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.businessUnit,children:e.businessUnit})}}),(0,u.jsx)(z.s,{sortable:!0,field:"location",header:"Location",body:function(e){return(0,u.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.location,children:e.location})}}),(0,u.jsx)(z.s,{sortable:!0,field:"plannedStartDt",header:"From Date",body:function(e){return I.map((function(e){return e.resourceId})).includes(e.resourceId)?(0,u.jsx)("div",{className:"datepicker",children:(0,u.jsx)(g(),{name:"fromDt",id:"fromDt",selected:N()($)._d,dateFormat:"dd-MMM-yyyy",onChange:function(e){Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"fromDate",N()(e).format("yyyy-MM-DD")))})),console.log(e),ee(N()(e).format("yyyy-MM-DD")),Y(!1)},minDate:N()(e.plannedStartDt)._d,maxDate:N()(Ce.toDate)._d,onKeyDown:function(e){e.preventDefault()}})}):(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.plannedStartDt).format("DD-MMM-YYYY"),children:N()(e.plannedStartDt).format("DD-MMM-yyyy")})},onChange:function(e){return function(e,t){var n=q.findIndex((function(e){return e.id===t.id})),s=(0,O.Z)(q);s[n]=(0,o.Z)((0,o.Z)({},s[n]),{},{cslId:e.id}),V(s)}(e,rowData)}}),(0,u.jsx)(z.s,{sortable:!0,field:"plannedEndDt",header:"To Date",body:function(e){return I.map((function(e){return e.resourceId})).includes(e.resourceId)?(0,u.jsx)("div",{className:"datepicker",children:(0,u.jsx)(g(),{name:"toDate",id:"toDate",selected:N()(se)._d,dateFormat:"dd-MMM-yyyy",minDate:N()(Ce.fromDate)._d,maxDate:N()(e.plannedEndDt)._d,onKeyDown:function(e){e.preventDefault(),8!=e.keyCode&&e.preventDefault()},onChange:function(e){Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"toDate",N()(e).format("yyyy-MM-DD")))})),console.log(e),ae(N()(e).format("yyyy-MM-DD")),Y(!1)}})}):(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.plannedEndDt).format("DD-MMM-YYYY"),children:N()(e.plannedEndDt).format("DD-MMM-yyyy")})}}),(0,u.jsx)(z.s,{sortable:!0,field:"availPercentage",header:"Available %",body:function(e){return(0,u.jsx)("div",{style:{color:e.availPercentage<0&&"red",textAlign:"right"},"data-toggle":"tooltip",title:e.availPercentage,children:e.availPercentage})}}),(0,u.jsx)(z.s,{sortable:!0,field:"freeHours",header:"Available Hrs",body:function(e){return(0,u.jsx)("div",{style:{color:e.freeHours<0&&"red",textAlign:"right"},"data-toggle":"tooltip",title:e.freeHours,children:e.freeHours})}}),(0,u.jsx)(z.s,{sortable:!0,field:"hourRate",header:"Hourly Rate",body:function(e){return I.map((function(e){return e.resourceId})).includes(e.resourceId)?(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"text",id:"hourRate",defaultValue:"0",onChange:function(e){Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"hourlyRate",e.target.value))})),console.log(e.target.value)}})}):(0,u.jsx)("div",{style:{textAlign:"right"},"data-toggle":"tooltip",title:e.hourRate,children:e.hourRate})}}),(0,u.jsx)(z.s,{sortable:!0,field:"cost",header:"Hourly Cost",body:function(e){return(0,u.jsx)("div",{style:{textAlign:"right"},"data-toggle":"tooltip",title:e.cost,children:e.cost})}}),(0,u.jsx)(z.s,{sortable:!0,field:"revenue",header:"Daily Allocation Hrs",body:function(e){return console.log(W,"isModified"),I.map((function(e){return e.resourceId})).includes(e.resourceId)?(0,u.jsx)("div",{ref:Pe,children:(0,u.jsx)("input",{className:"error".concat(!Ee||null!=e.revenue&&""!=e.revenue?"":" error-block"),type:"text",id:"revenue",defaultValue:null==e.revenue||""==e.revenue?0:e.revenue,onChange:function(e){var t=e.target.value<=24;if(Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"dailyHours",e.target.value))})),console.log(e.target.value),Q(!0),t){var n=He(Le(Ce.fromDate),Le(Ce.toDate))-he.holidays;Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"effortHours",e.target.value*n))}))}else _(!0),setTimeout((function(){_(!1)}),3e3),e.target.value=""}})}):(0,u.jsx)("div",{style:{textAlign:"right"},"data-toggle":"tooltip",title:"0",children:null==e.revenue||""==e.revenue?0:e.revenue})}}),(0,u.jsx)(z.s,{sortable:!0,field:"revenue",header:"Allocation Hrs",body:function(e){return(0,u.jsx)("div",{style:{textAlign:"right"},"data-toggle":"tooltip",title:"0",children:"0"})}}),(0,u.jsx)(z.s,{sortable:!0,field:"",header:"Allocation Type",body:function(e){return I.map((function(e){return e.resourceId})).includes(e.resourceId)?(0,u.jsx)("div",{children:(0,u.jsx)("select",{className:"col-md-12 p0",name:"allocation",id:"allocation",defaultValue:"187",onChange:function(e){Ze((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"allocationTypeId",e.target.value))})),console.log(e.target.value)},onClick:function(e){e.stopPropagation()},children:ke.map((function(t){var n;return(0,u.jsxs)("option",{value:t.id,selected:t.id==(null===(n=e.subrows[0])||void 0===n?void 0:n.allocation_type_id),children:[" ",t.lkup_name]})}))})}):""}})]}),1==C[1].is_write?(0,u.jsxs)("div",{className:"col-12 my-3 align center",children:[(0,u.jsxs)("button",{className:"btn btn-primary mr-2",onClick:function(){Be(null,null,!0,!1)},"data-toggle":"tooltip",title:"Save",children:[(0,u.jsx)(U.UQg,{})," Save"]}),(0,u.jsxs)("button",{className:"btn btn-secondary",onClick:function(){f(!1)},"data-toggle":"tooltip",title:"Cancel ",children:[(0,u.jsx)(M.sQZ,{}),"Cancel"]})]}):""]}),Ne&&(0,u.jsx)(Ct,{data:i,sendSelectedRowsData:Be,overAllocation:Ne,setConfirmSave:xe,setOverAllocation:be,setSaveOverAlloc:oe})]})};var wt=function(e){var t=e.data,n=e.setSearchResource,l=e.setAddErrMsg,i=e.setErrData,o=e.addErrMsg,m=e.loggedUserId,h=e.projectId,f=e.getTableData,j=e.setEditMessage,x=e.setErrorMsg,y=e.dailyhrsRange,b=e.setDailyhrsRange,S=e.setAddMessage,D=e.setAddResMessage,C=e.validateproject,Z=e.setValidateproject,w=e.errorMsg,M=e.setEditResMessage,k=e.grp2Items,I=(0,a.useState)(!1),P=(0,s.Z)(I,2),T=P[0],A=P[1],E=(0,a.useState)(r.UdN),R=(0,s.Z)(E,2),F=R[0],Y=R[1],O=(0,a.useState)("0"),H=(0,s.Z)(O,2),L=H[0],B=H[1],U=(0,a.useState)([]),q=(0,s.Z)(U,2),V=q[0],z=(q[1],(0,a.useState)("null")),G=(0,s.Z)(z,2),K=G[0],W=G[1],Q=c.N.baseUrl,J=(0,a.useState)([]),X=(0,s.Z)(J,2),$=X[0],ee=X[1],te=(0,a.useState)([]),ne=(0,s.Z)(te,2),se=ne[0],ae=ne[1],le=(0,a.useState)(!1),ie=(0,s.Z)(le,2),oe=ie[0],re=ie[1],ce=(0,a.useState)([]),de=(0,s.Z)(ce,2),ue=de[0],me=de[1],pe=(0,a.useRef)([]);(0,a.useEffect)((function(){}),[$,V]),(0,a.useEffect)((function(){he(),v()({method:"get",url:Q+"/ProjectMS/CapacityPlan/getAssignedDataIsActive"}).then((function(e){var t=e.data;ee(t)}))}),[]),(0,a.useEffect)((function(){window.scrollTo(0,document.documentElement.scrollHeight),w&&window.scrollTo(0,0)}),[w]);var he=function(){v()({method:"get",url:Q+"/ProjectMS/CapacityPlan/getBusinessUnitDropdown"}).then((function(e){var t=e.data;me(t)}))},ve=function(e){B(e.target.value)};return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"col-md-12 customCard mt-2",children:[(0,u.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,u.jsxs)("h2",{children:["Search Resource - ",null===t||void 0===t?void 0:t.roleType]}),(0,u.jsx)("div",{onClick:function(){A(!T),Y(T?r.UdN:r.NR5)},children:(0,u.jsx)("span",{children:F})})]}),(0,u.jsxs)(p.V9,{visible:!T,children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:" col-md-3 ml-1",children:(0,u.jsx)("div",{className:" form-group row",children:(0,u.jsxs)("div",{className:"col-6",onChange:function(e){ve(e)},children:[(0,u.jsx)("input",{className:"form-check-input",htmlFor:"yes",type:"radio",value:"0",name:"Resource",id:"Resource",checked:"0"==L}),"\xa0",(0,u.jsx)("span",{className:"form-check-label",children:"Resource Search"})," "]})})}),(0,u.jsx)("div",{className:"col-6 mb-1",children:"0"==L?(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-2",children:["Resource ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("label",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4 autocomplete",ref:function(e){pe.current[0]=e},children:(0,u.jsxs)("div",{className:"autoComplete-container ",children:[(0,u.jsx)(d.ReactSearchAutocomplete,{items:$,type:"Text",name:"resourceId",id:"resourceId",className:"error AutoComplete",onSelect:function(e){W(e.id)},showIcon:!1,onClear:function(){W("null")},placeholder:"Type minimum 3 characters"}),(0,u.jsxs)("span",{children:[" ",V.name]})]})}),(0,u.jsx)("div",{className:"col",children:(0,u.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=(0,_.Z)(pe);console.log(e),1==e&&(x(!0),setTimeout((function(){x(!1)}),4e3)),v()({method:"post",url:Q+"/ProjectMS/CapacityPlan/GetRoleResourcesAvailability",data:{resid:K.toString(),fromDt:t.plannedStartDt,endDt:t.plannedEndDt}}).then((function(e){var t=e.data;console.log(t),ae(t),re(!0)})).catch((function(e){console.log(e)}))}()},children:[(0,u.jsx)(r.U41,{}),"Search"]})})]}):(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"bu",children:["Business Unit ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("select",{className:"error  col-md-12 p0",name:"busUnit",id:"busUnit",onChange:function(e){return ve(e)},children:[(0,u.jsxs)("option",{value:"0",children:[" ","<<Please Select>>"]}),ue.map((function(e){return(0,u.jsxs)("option",{value:e.id,children:[" ",e.name]})}))]})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"type",children:["Type ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsxs)("select",{className:"error  col-md-12 p0",name:"type",id:"type",onChange:function(e){return ve(e)},children:[(0,u.jsxs)("option",{value:"null",children:[" ","<<Please Select>>"]}),(0,u.jsx)("option",{value:"all",children:" All"}),(0,u.jsx)("option",{value:"customer",children:" Customer"}),(0,u.jsx)("option",{value:"supervisor",children:" Supervisor"})]})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group row"})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group row"})}),console.log(t.plannedEndDt,t.plannedStartDt,"dates"),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"fromDt",children:["From Date ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)(g(),{name:"fromDt",id:"fromDt",selected:N()(t.plannedStartDt)._d,dateFormat:"yyyy-MMM-dd",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",minDate:N()(t.plannedStartDt)._d,maxDate:N()(t.plannedEndDt)._d,onKeyDown:function(e){e.preventDefault(),8!=e.keyCode&&e.preventDefault()}})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"toDate",children:["To Date ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("input",{type:"text",className:"form-control",id:"toDate",placeholder:!0,required:!0})})]})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsxs)("label",{className:"col-5",htmlFor:"skillgroup",children:["Skill Group ",(0,u.jsx)("span",{className:"error-text ml-1",children:"*"})]}),(0,u.jsx)("span",{className:"col-1",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("input",{type:"text",className:"form-control",id:"skillgroup",placeholder:!0,required:!0})})]})})]})})]})," ",oe?(0,u.jsx)(Zt,{tableData:se,Data:t,projectId:h,setAddErrMsg:l,addErrMsg:o,setErrData:i,setSearchResource:n,loggedUserId:m,getTableData:f,setEditMessage:j,setAddMessage:S,setAddResMessage:D,validateproject:C,setValidateproject:Z,dailyhrsRange:y,setDailyhrsRange:b,setEditResMessage:M,grp2Items:k}):""]})]})})};var Mt=function(e){var t,n=e.deletePopup,s=e.setDeletePopup,a=e.deleteData,l=e.setUid,i=e.uid,o=e.getTableData,r=e.setStatus,d=e.setDeleteMessage,m=e.setDeleteResourceMessage,h=(e.permissions,Object.assign({},a),c.N.baseUrl),f=function(){null!==a&&void 0!==a&&a.hasOwnProperty("resource_id")?(console.log("Resource delet"),v()({method:"delete",url:h+"/ProjectMS/CapacityPlan/deleteInnerProjectRoleResource?ProjectRoleBookId=".concat(i),data:i}).then((function(e){console.log(e);var t=e.data.type;console.log(t),r(void 0!=t&&t),l(0),o(),s(!1),m(!0),setTimeout((function(){m(!1)}),3e3)}))):v()({method:"delete",url:h+"/ProjectMS/CapacityPlan/deleteOuterProjectRoleList?Roleid=".concat(i),data:i}).then((function(e){console.log(e);var t=e.data.type;console.log(t),r(t),l(0),o(),s(!1),d(!0),setTimeout((function(){d(!1)}),3e3)}))};return(0,u.jsxs)("div",{children:[console.log(null===a||void 0===a?void 0:a.hasOwnProperty("subrows"),null===(t=a.subrows)||void 0===t?void 0:t.length,"resource_id"),(0,u.jsxs)(p.Tk,{visible:n,size:"sm",className:"ui-dialog",onClose:function(){return s(!1)},backdrop:"static",children:[(0,u.jsx)(p.p0,{className:"",children:(0,u.jsx)(p.fl,{children:(0,u.jsx)("span",{className:"",children:null!==a&&void 0!==a&&a.hasOwnProperty("resource_id")?"Delete Role Resource":"Delete Project Role"})})}),(0,u.jsxs)(p.sD,{children:[null!==a&&void 0!==a&&a.hasOwnProperty("resource_id")?(0,u.jsx)("h6",{children:"Are you sure you want to delete Resource ?"}):(0,u.jsx)("h6",{children:"Are you sure you want to delete project role ?"}),(0,u.jsxs)("div",{className:"btn-container center my-2",children:[(0,u.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){f()},children:[(0,u.jsx)(Dt.DqJ,{size:"1.5em"}),"Delete "]})," \xa0 \xa0",(0,u.jsxs)("button",{type:"button",className:"btn btn-secondary",onClick:function(){s(!1)},children:[" ",(0,u.jsx)(M.sQZ,{})," Cancel "]})]})]})]})]})},kt=n(11683),It=n(49177),Pt=n(56637),Tt=n(53824);var At=function(e){var t=e.data,n=e.calenderPayload,l=(e.colExpandState,e.formData,e.setFormData,e.value,e.month,e.setMonth,(0,a.useState)([])),i=(0,s.Z)(l,2),r=(i[0],i[1],(0,a.useState)()),c=(0,s.Z)(r,2),d=(c[0],c[1],(0,a.useState)([])),m=(0,s.Z)(d,2),p=m[0],h=m[1],v=(0,a.useState)(null),f=(0,s.Z)(v,2),j=f[0],x=f[1],g=(0,a.useState)({}),y=(0,s.Z)(g,2),N=y[0],_=y[1],S=(0,a.useState)(!1),D=(0,s.Z)(S,2),C=D[0],Z=(D[1],(0,a.useState)([])),w=(0,s.Z)(Z,2),M=(w[0],w[1]),k=(0,a.useState)(!1),I=(0,s.Z)(k,2),P=(I[0],I[1],(0,a.useState)(!1)),T=(0,s.Z)(P,2),A=(T[0],T[1]),E=(0,a.useState)([]),R=(0,s.Z)(E,2),F=(R[0],R[1]),Y=(0,a.useState)(null),H=(0,s.Z)(Y,2),L=(H[0],H[1],{fteActive:(0,u.jsx)("img",{src:It,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fteNotice:(0,u.jsx)("img",{src:Pt,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subkActive:(0,u.jsx)("img",{src:Tt,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"})}),B=function(e){return null===e||void 0===e?void 0:e.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,",")};(0,a.useEffect)((function(){B(U())}),[t]),(0,a.useEffect)((function(){window.scrollTo(0,document.documentElement.scrollHeight)}),[]);var U=function(){var e,a,l,i,o=t.tableData,r=null;null!==t&&void 0!==t&&null!==(e=t.columns)&&void 0!==e&&e.includes("'")?r=null===t||void 0===t||null===(i=t.columns)||void 0===i?void 0:i.replaceAll("'",""):r=null===t||void 0===t?void 0:t.columns;var c=null===(a=r)||void 0===a?void 0:a.split(","),d=null;void 0!=c&&(d=(0,O.Z)(c));for(var m=[],p={},v=0;v<(null===(f=d)||void 0===f?void 0:f.length);v++){var f,j=d[v].trim(),g=o[0];p[j]=g[j]}var y=Object.entries(p),N=["Id","action_items"],S=y.filter((function(e){return!N.includes(e[0])}));M(S),_(Object.assign.apply(Object,[{}].concat([])));var D=null===o||void 0===o?void 0:o.filter((function(e){return-1==e.Id}));S.map((function(e,t){var n=(0,s.Z)(e,2),a=n[0],l=n[1];null===l||void 0===l||l.replace("<br>","");m.push({accessorKey:a,header:l,enableColumnActions:!1,enableHiding:!0,rowspan:5,Header:function(e){e.column;return(0,u.jsx)("div",{className:a.includes("AcGM")||a.includes("NAcGM")||a.includes("NAvgCost")||a.includes("AvgCost")?"mixer":null!==a&&void 0!==a&&a.includes("_L")||a.includes("_N")?"disabledDates":null!==a&&void 0!==a&&a.includes("Revenue")||null!==a&&void 0!==a&&a.includes("Cost")||null!==a&&void 0!==a&&a.includes("course_1")||null!==a&&void 0!==a&&a.includes("Name")||null!==a&&void 0!==a&&a.includes("emp_cadre")||null!==a&&void 0!==a&&a.includes("BusinessUnit")||null!==a&&void 0!==a&&a.includes("Supervisor")||null!==a&&void 0!==a&&a.includes("manager")||null!==a&&void 0!==a&&a.includes("capacity")||null!==a&&void 0!==a&&a.includes("billAppr")||null!==a&&void 0!==a&&a.includes("billApprNet")||null!==a&&void 0!==a&&a.includes("Total")||null!==a&&void 0!==a&&a.includes("Avg")||null!==a&&void 0!==a&&a.includes("GM")||null!==a&&void 0!==a&&a.includes("Role")||null!==a&&void 0!==a&&a.includes("Rate")?"mixer":a.includes("_W")?"WeekendDates":"",title:l,children:l})}})}));var C=D&&(null===(l=Object.entries(D[0]))||void 0===l?void 0:l.filter((function(e){return!(null!==N&&void 0!==N&&N.includes(e[0]))})));m.map((function(e){var t=m.indexOf(e);C.map((function(a,l){var i=(0,s.Z)(a,2),o=i[0],r=i[1];if(o==e.accessorKey){var c={id:o,header:(0,u.jsx)("div",{className:o.includes("_L")||o.includes("_N")?"disabledDates":o.includes("_W")?"WeekendDates":"",title:r,children:null==r||0==r?null:r}),accessorKey:o,Cell:function(e){var t,s,a=e.cell;return(0,u.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Name"==a.column.id&&null!=a.row.original?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("span",{title:a.getValue().split("_")[0],children:[L[a.row.original.Name.split("_")[1]]," ","Total"==a.row.original.Name?(0,u.jsx)("b",{className:"align right",children:" Total"}):"Avg"==a.row.original.Name?(0,u.jsx)("b",{className:"align right",children:" Avg"}):"res"==(null===n||void 0===n?void 0:n.Src)&&"Total"!=a.row.original.Name?(0,u.jsx)(ie.rU,{to:"/project/capacityPlan/:".concat(a.row.original.Id),target:"_blank",children:a.getValue().split("_")[0]}):a.getValue().split("_")[0]]})}):"course_1"==a.column.id&&"Total"!=a.row.original.Name&&"Avg"!=a.row.original.Name&&null!=a.row.original?(0,u.jsx)(u.Fragment,{children:"1"==a.getValue()?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"green legendCircle",title:"ISMS Certified"}),1==a.row.original.action_items&&null!=a.row.original?(0,u.jsx)("span",{className:"exclamation orange",title:"Action Items Exist",children:(0,u.jsx)(b.CSE,{})}):(0,u.jsx)("span",{className:"exclamation gray",title:"No Action Items",children:(0,u.jsx)(b.CSE,{})})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"red legendCircle",title:"ISMS Not Certified"}),0==a.row.original.action_items&&null!=a.row.original?(0,u.jsx)("span",{className:"exclamation gray",title:"No Action Items",children:(0,u.jsx)(b.CSE,{})}):(0,u.jsx)("span",{className:"exclamation orange",title:"Action Items Exist",children:(0,u.jsx)(b.CSE,{})})]})}):"Supervisor"==a.column.id&&"Total"!=a.row.original.Name&&"Avg"!=a.row.original.Name&&null!=a.row.original?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{className:"hierarchyIcon",onClick:function(){A(!0),F(a.row.original.Id)},title:"Hierarchy",children:(0,u.jsx)(De.DOT,{})}),(0,u.jsx)("span",{title:null===(t=a.getValue())||void 0===t?void 0:t.split("_")[0],children:""+a.getValue()!=""&&null!=a.getValue()?null===(s=a.getValue())||void 0===s?void 0:s.split("_")[0]:""})]}):"0_holday"==a.getValue()||"0.00_holday"==a.getValue()?(0,u.jsx)("span",{className:"blueHoliday align right",title:a.getValue().split("_")[0],children:a.getValue().split("_")[0]}):null!=a.getValue()&&"leave"==a.getValue().split("_")[1]||"0.00_leave_AV"==a.getValue()?(0,u.jsx)("span",{className:"pinkLeave align right",title:a.getValue().split("_")[0],children:a.getValue().split("_")[0]}):null!=a.getValue()&&a.getValue().includes("0.00")?(0,u.jsx)("span",{className:" align right ",title:a.getValue().split("_")[0],children:a.getValue().split("_")[0]}):null!=a.getValue()&&o.includes("_L")||o.includes("_W")?(0,u.jsx)("span",{className:"disabledDates",title:a.getValue(),children:a.getValue()}):o.includes("Revenue")?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{class:"align right",title:a.getValue(),children:["$ ",B(a.getValue())]})}):null!=a.getValue()&&(o.includes("GM")||o.includes("billApprNet"))?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{class:"align right",title:a.getValue(),children:[B(a.getValue())," %"]})}):"Name"==a.column.id||"course_1"==a.column.id||"Supervisor"==a.column.id||"manager"==a.column.id||"BusinessUnit"==a.column.id?(0,u.jsx)("span",{title:a.getValue(),children:a.getValue()}):null!=a.getValue()&&"emp_cadre"==a.column.id?(0,u.jsxs)("div",{class:"align center ",title:a.getValue(),children:[" ",a.getValue()]}):o.includes("Role")?(0,u.jsxs)("div",{className:"align left",style:{whiteSpace:"nowrap ",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px"},title:a.getValue(),children:[" ",a.getValue()]}):(0,u.jsxs)("div",{className:"Total"==a.row.original.Name?"totalRow align right":"align right",title:a.getValue(),children:[" ",a.getValue()]})})}};m[t].columns=[c]}}))})),x(m);var Z=null===o||void 0===o?void 0:o.filter((function(e){return-1!==e.Id&&-2!==e.Id}));h(Z)};(0,a.useEffect)((function(){C?_({}):q()}),[C]);var q=function(){_(Object.assign.apply(Object,[{}].concat([])))};return(0,u.jsx)("div",{className:"materialReactExpandableTable capacityPlanCalenderTable darkHeader",children:null!==p&&void 0!==p&&p.length?(0,u.jsx)(kt.ZP,{columns:j,data:p,enablePagination:!1,enableGlobalFilter:!0,enableDensityToggle:!1,enableFullScreenToggle:!1,enableHiding:!1,enableColumnFilters:!1,enableBottomToolbar:!1,enableTopToolbar:!0,enableColumnActions:!1,enableSorting:!1,filterFromLeafRows:!0,initialState:{showGlobalFilter:!0,expanded:!1,density:"compact",columnVisibility:(0,o.Z)({},N)},state:{columnVisibility:(0,o.Z)({},N)},defaultColumn:{minSize:30,maxSize:1e3,size:30},muiSearchTextFieldProps:{variant:"outlined"},muiTableContainerProps:{sx:{maxHeight:"50vh"}},muiTableBodyProps:{sx:{"&":{borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc"},"& td:first-of-type":{borderLeft:"1px solid #ccc",minWidth:"100px"},"& td":{borderRight:"1px solid #ccc",height:"22px",padding:"0px 5px",maxWidth:"150px"}}},muiTableHeadProps:{sx:{"& th":{borderTop:"1px solid #ccc",borderRight:"1px solid #ccc",background:"#f4f4f4 ",padding:"0 5px"},"& th:first-of-type":{borderLeft:"1px solid #ccc",minWidth:"100px"}}}}):null})};var Et=function(e){var t,n,i=e.Data,r=e.errorMsg,d=e.setAddErrMsg,m=e.setErrData,p=e.addErrMsg,h=e.setCalenderPayload,f=e.calenderPayload,j=e.calenderTableData,x=e.dispCalender,y=e.setDispCalender,_=e.projectData,S=e.setTableData,D=e.projectId,C=e.loggedUserId,Z=e.getTableData,w=e.setStatus,k=e.setDeleteMessage,I=e.setEditMessage,T=e.setAddMessage,A=e.setAddResMessage,E=e.setEditResMessage,R=e.setDeleteResourceMessage,F=e.dailyhrsRange,Y=e.setDailyhrsRange,H=e.setErrorMsg,L=e.validateproject,q=e.setValidateproject,V=e.setDupRoleName,G=e.setDupliRole,K=e.grp2Items,W=(0,a.useState)([]),Q=(0,s.Z)(W,2),J=(Q[0],Q[1]),X=(0,a.useState)(null),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ne=(0,a.useState)(!1),se=(0,s.Z)(ne,2),ae=(se[0],se[1]),le=null===K||void 0===K?void 0:K.find((function(e){return"Capacity Plan"===(null===e||void 0===e?void 0:e.display_name)})),ie=(0,a.useState)(!0),oe=(0,s.Z)(ie,2),re=oe[0],ce=oe[1],de=(0,a.useState)([]),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],fe=(0,a.useState)([]),je=(0,s.Z)(fe,2),xe=je[0],ge=je[1],ye={fromDate:N()().startOf("month").format("YYYY-MM-DD"),toDate:N()().startOf("month").add("month",0).format("YYYY-MM-DD")},Ne=(0,a.useState)(ye),be=(0,s.Z)(Ne,2),_e=be[0],Se=(be[1],(0,a.useState)(N()(_e.toDate).toDate())),De=(0,s.Z)(Se,2),Ce=(De[0],De[1],(0,a.useState)("")),we=(0,s.Z)(Ce,2),Me=(we[0],we[1],(0,a.useState)(!1)),ke=(0,s.Z)(Me,2),Ie=(ke[0],ke[1]),Pe=(0,a.useState)([]),Te=(0,s.Z)(Pe,2),Ae=(Te[0],Te[1],(0,a.useState)(0)),Ee=(0,s.Z)(Ae,2),Re=Ee[0],Fe=Ee[1],Ye=(0,a.useState)(0),Oe=(0,s.Z)(Ye,2),He=Oe[0],Le=Oe[1],Be=(0,a.useState)(!1),Ue=(0,s.Z)(Be,2),qe=Ue[0],Ve=Ue[1],ze=(0,a.useState)([]),Ge=(0,s.Z)(ze,2),Ke=Ge[0],We=Ge[1],Qe=(0,a.useState)(!1),Je=(0,s.Z)(Qe,2),Xe=Je[0],$e=Je[1],et=(0,a.useState)(0),tt=(0,s.Z)(et,2),nt=tt[0],st=tt[1],at=(0,a.useState)([]),lt=(0,s.Z)(at,2),it=lt[0],ot=lt[1],rt=(0,a.useState)([]),ct=(0,s.Z)(rt,2),dt=ct[0],ut=ct[1],mt=(0,a.useState)([]),pt=(0,s.Z)(mt,2),ht=pt[0],vt=pt[1],ft=(0,a.useState)(""),jt=(0,s.Z)(ft,2),xt=jt[0],gt=jt[1],yt=(0,a.useState)(!1),Nt=(0,s.Z)(yt,2),bt=Nt[0],_t=Nt[1],Dt=(0,a.useState)([]),Ct=(0,s.Z)(Dt,2),Zt=Ct[0],kt=Ct[1],It=(0,a.useRef)({}),Pt=document.createElement("div");Pt.innerHTML=null===(t=_[0])||void 0===t?void 0:t.currency;var Tt=(0,a.useState)(i),Et=(0,s.Z)(Tt,2),Rt=(Et[0],Et[1]),Ft=(0,a.useState)(i),Yt=(0,s.Z)(Ft,2),Ot=Yt[0],Ht=(Yt[1],(0,a.useState)(!1)),Lt=(0,s.Z)(Ht,2),Bt=Lt[0],Ut=(Lt[1],c.N.baseUrl);(0,a.useEffect)((function(){var e=0,t=0;i.forEach((function(n){e+=n.effortHours,t+=n.roleAllochrs})),Fe(e),Le(t)}),[]);var qt=function(e){var t=String(e);if(t.includes(".")){var n=Number(t),s=(null!=n&&n.toFixed(2)).split(".");return s[0]=s[0].replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,","),s.join(".")}return null!=t?t.replace(/(?<=\d)(?=(\d{3})+(?!\d|\.))/g,",")+".00":""},Vt=function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.click(),q(!1),_t(!1),ce(!0)},zt=function(){var e;null===(e=document.getElementsByClassName("p-row-editor-save-icon pi pi-fw pi-check")[0])||void 0===e||e.click()};(0,a.useEffect)((function(){Gt(),Wt(),Qt()}),[]);var Gt=function(){v()({method:"get",url:Ut+"/ProjectMS/CapacityPlan/getAllocationDropdown"}).then((function(e){var t=e.data;ut(t)}))},Kt=function(e,t){var n,s;v()({method:"get",url:Ut+"/ProjectMS/CapacityPlan/getRoleCountryRate?roleTypeId=".concat(e,"&customerId=").concat(null===(n=_[0])||void 0===n?void 0:n.customer_id,"&countryId=").concat(t,"&currencyId=").concat(null===(s=_[0])||void 0===s?void 0:s.currency_id)}).then((function(e){var t,n,s=e.data;console.log("in line 261--------"),It.current.hourCost=null===(t=s[0])||void 0===t?void 0:t.cost,It.current.hourRate=0,console.log(It.current,null===(n=s[0])||void 0===n?void 0:n.cost),vt(s)}))},Wt=function(){v()({method:"get",url:Ut+"/ProjectMS/stakeholders/getRoles"}).then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.display_name,value:e.id};t.push(n)})),kt(n)}))},Qt=function(){v().get(Ut+"/CostMS/cost/getCountries").then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.country_name,value:e.id};t.push(n)})),pe(n)})).catch((function(e){return console.log(e)}))},Jt=function(){var e,t,n,s,a;bt||(_t(!0),ce(!1)),console.log(_,"in add"),console.log(null===(e=_[0])||void 0===e?void 0:e.plandStartDate);var l={roleType:"",busUnit:"",country:"",countryId:"",hourRate:0,hourCost:void 0==(null===(t=ht[0])||void 0===t?void 0:t.cost)?0:null===(n=ht[0])||void 0===n?void 0:n.cost,plannedStartDt:N()(null===(s=_[0])||void 0===s?void 0:s.plandStartDate)._d,plannedEndDt:N()(null===(a=_[0])||void 0===a?void 0:a.plandEndDate)._d,effortHours:0,allocHrs:""},o=[];o.push(l),S([].concat(o,(0,O.Z)(i)))},Xt=(i.length,(0,u.jsxs)(he.E,{children:[(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{}),(0,u.jsx)(z.s,{header:"Role & Resource",alignHeader:"center"}),(0,u.jsx)(z.s,{}),(0,u.jsx)(z.s,{header:"Business Unit",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Country",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Work Location",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Billing Rate/Hr",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Cost/Hr",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"From Date",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"To Date",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Demand Hrs",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Alloc Hrs",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Daily Alloc Hrs",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Alloc Type",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Approval Status",alignHeader:"center"}),(0,u.jsx)(z.s,{header:"Actions",alignHeader:"center"}),(0,u.jsx)(z.s,{})]}),(0,u.jsx)(ve.X,{})]})),$t=document.getElementsByClassName("p-paginator-next p-paginator-element p-link"),en=document.getElementsByClassName("p-paginator-last p-paginator-element p-link"),tn=function(e){var t;null===(t=Object.keys(e))||void 0===t||t.forEach((function(t){if(["",null,void 0," "].includes(e[t]))return S(i.slice(1)),void _t((function(e){return!e}))}))};(0,a.useEffect)((function(){var e,t,n,s,a=i[0];(null===(e=$t[0])||void 0===e||e.addEventListener("click",(function(){tn(a)})),null===(t=en[0])||void 0===t||t.addEventListener("click",(function(){tn(a)})),""==(null===(n=i[0])||void 0===n?void 0:n.roleType))&&(null===(s=document.getElementsByClassName("p-row-editor-init p-link")[0])||void 0===s||s.click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=i[0])||void 0===t?void 0:t.roleType)&&(S(i.slice(1,i.length)),ce(!0),_t(!1),q(!1))}),!0)}),200))}),[i]);var nn=function(e){var t,n,s,a,l,o,r={roleTypeId:""==e.roleTypeId||null==e.roleTypeId?"345":e.roleTypeId,plannedStartDt:N()(e.plannedStartDt).format("yyyy-MM-DD"),plannedEndDt:N()(e.plannedEndDt).format("yyyy-MM-DD"),countryId:null===e||void 0===e?void 0:e.countryId,hourRate:"object"==typeof It.current.hourRate?It.current.hourRate.value:"string"==typeof It.current.hourRate?It.current.hourRate:e.hourRate,hourcost:""==It.current.hourCost?null===(t=ht[0])||void 0===t?void 0:t.cost:"object"==typeof It.current.hourCost?It.current.hourCost.value:0==(null===(n=ht[0])||void 0===n?void 0:n.cost)||""==(null===(s=ht[0])||void 0===s?void 0:s.cost)||0==It.current.hourCost||""!=It.current.hourCost?It.current.hourCost:null===(a=ht[0])||void 0===a?void 0:a.cost,effortHours:e.effortHours};if(console.log(e.hourRate,r,It.current.hourRate.value,It.current.hourCost,typeof It.current.hourRate,It.current.hourCost.value,It.current.hourRate,"checkdata"),console.log(""==e.countryId,""==(null===(l=ht[0])||void 0===l?void 0:l.cost),"object"==typeof It.current.hourCost?0==It.current.hourCost.value:0==It.current.hourCost,0==(null===(o=ht[0])||void 0===o?void 0:o.cost),""==e.effortHours,"validations"),""==e.countryId||("object"==typeof It.current.hourCost?0==It.current.hourCost.value:0==It.current.hourCost)||""==e.effortHours)return q(!0),void setTimeout((function(){q(!1)}),2e3);var c,d,u,m,p=null;if(i.map((function(e,t){var n=[];Object.keys(r).map((function(t){e[t]==r[t]?n.push(!0):n.push(!1)})),0!=n.includes(!1)||(p=!0)})),console.log(p),p)return V(null===e||void 0===e?void 0:e.roleType),G(!0),void setTimeout((function(){G(!1)}),5e3);v()({method:"post",url:Ut+"/ProjectMS/CapacityPlan/saveProjectRoleDetail",data:{id:""==e.id||null==e.id?"":e.id,projectId:D,RoleTypeId:""==e.roleTypeId||null==e.roleTypeId?"345":e.roleTypeId,RoleName:"",description:"",IsRoleBillable:"1",ProjectRolecol:"",BaseLineVersionId:null,RoleSite:null,LobId:null,PlannedStartDate:""==e.plannedStartDt?"":N()(e.plannedStartDt).format("yyyy-MM-DD"),PlannedEndDate:""==e.plannedStartDt?"":N()(e.plannedEndDt).format("yyyy-MM-DD"),countryId:null===e||void 0===e?void 0:e.countryId,hourRate:"object"==typeof It.current.hourRate?It.current.hourRate.value:"string"==typeof It.current.hourRate?It.current.hourRate:e.hourRate,hourcost:""==It.current.hourCost?null===(c=ht[0])||void 0===c?void 0:c.cost:"object"==typeof It.current.hourCost?It.current.hourCost.value:0==(null===(d=ht[0])||void 0===d?void 0:d.cost)||""==(null===(u=ht[0])||void 0===u?void 0:u.cost)||0==It.current.hourCost||""!=It.current.hourCost?It.current.hourCost:null===(m=ht[0])||void 0===m?void 0:m.cost,projectoruid:"",createdById:C,lastUpdatedById:C,locationId:null,actualStartDate:"",actualEndDate:"",effortHours:e.effortHours,CostCenterId:null}}).then((function(e){console.log(e),"Saved Successfully"==e.data.status?T(!0):I(!0),Z(),q(!1),setTimeout((function(){T(!1),I(!1)}),1e3)})),ce(!0),_t(!1)};(0,a.useEffect)((function(){Rt(Ot)}),[Ot]),(0,a.useEffect)((function(){console.log("in line 784---------"),console.log(It)}),[ht]);var sn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.resource,children:e.resource})},an=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.description,children:e.description})},ln=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.country,children:e.country})},on=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.name,children:e.name})},rn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.billingRate,style:{textAlign:"right"},children:Pt.textContent+" "+qt(e.billingRate)})},cn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.cost,style:{textAlign:"right"},children:Pt.textContent+" "+qt(e.cost)})},dn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.effort_hours,style:{textAlign:"right"},children:qt(e.effort_hours)})},un=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.daily_hours,style:{textAlign:"right"},children:qt(e.daily_hours)})},mn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.allocationType,children:e.allocationType})},pn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.status,children:e.status})},hn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.from_dt).format("DD-MMM-YYYY"),children:N()(e.from_dt).format("DD-MMM-YYYY")})},vn=function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.to_dt).format("DD-MMM-YYYY"),children:N()(e.to_dt).format("DD-MMM-YYYY")})},fn=function(e){var t,n=new Date,s=N()(n).format("yyyy-MM-DD")>e.to_dt;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(St.bgj,{color:"orange",title:"Assigned hrs",style:{cursor:"pointer"},onClick:function(t){y(!0),h((function(t){var n;return(0,o.Z)((0,o.Z)({},t),{},(n={},(0,l.Z)(n,"Src","res"),(0,l.Z)(n,"ObjectId",e.resource_id),n))})),gt(e.resource)}}),s||1!=(null===(t=K[1])||void 0===t?void 0:t.is_write)?null:(0,u.jsx)(b.YK6,{style:{cursor:"pointer"},title:"Delete row",size:"1.0em",color:"orange",onClick:function(){!function(e){$e(!0),st(e.id),ot(e)}(e)}})]})},jn=function(e){(0,O.Z)(xe);xn(e.newData)},xn=function(e){""==e.toDate?q(!0):v()({method:"post",url:Ut+"/ProjectMS/CapacityPlan/saveInnerTabResource",data:{id:e.id,projectRoleId:e.project_role_id,resourceId:e.resource_id,allocationTypeId:e.allocation_type_id,effortHours:e.effort_hours,dailyHours:e.daily_hours,hourlyRate:e.billingRate,hourlyCost:e.cost,countryId:e.country_id,baselineVersionId:null,statusId:e.status_id,comments:"",ss:"",isprojectTask:null,fromDate:e.from_dt,toDate:e.to_dt,isDelete:"",createdById:C,lastUpdatedById:C}}).then((function(e){console.log(e),"Saved Successfully"==e.data.status?T(!0):I(!0),Z(),q(!1),setTimeout((function(){T(!1),I(!1)}),1e3)}))};return(0,u.jsxs)(a.Fragment,{children:[Bt?(0,u.jsxs)("div",{className:"statusMsg error",children:[" ",(0,u.jsx)(b.CSE,{})," Please Give Unique Name"]}):"",console.log(ee,i,"expandedRows"),(0,u.jsxs)("div",{className:"p-fluid primeReactTable capacityPlanTable darkHeader toHead",children:[(0,u.jsxs)(B.w,{value:i,showGridlines:!0,editMode:"row",headerColumnGroup:Xt,expandedRows:ee,onRowToggle:function(e){return te(e.data)},onRowEditComplete:function(e){var t=(0,O.Z)(i),n=e;S(t),console.log(n.id,"--newdata"),nn(e.newData),""!=n.id?console.log("put"):console.log("post")},rowExpansionTemplate:function(e){var t;return ge(e.subrows),(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"innerTable",children:[(0,u.jsxs)(B.w,{value:e.subrows,responsiveLayout:"scroll",onRowEditComplete:jn,header:null,editMode:"row",dataKey:"id",className:"p-grid innercapacityPlanTable ",pagination:!0,paginator:!0,rows:5,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},children:[(0,u.jsx)(z.s,{}),(0,u.jsx)(z.s,{field:"resource",header:e.resource,body:sn}),(0,u.jsx)(z.s,{}),(0,u.jsx)(z.s,{field:"description",header:e.description,body:an}),(0,u.jsx)(z.s,{field:"country",header:e.country,body:ln}),(0,u.jsx)(z.s,{field:"name",header:e.name,body:on}),(0,u.jsx)(z.s,{field:"billingRate",header:e.billingRate,body:rn,editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{disabled:!0,type:"text",value:e.rowData.billingRate,id:"billingRate",onChange:function(t){e.editorCallback(t.target.value)}})})}(e)}}),(0,u.jsx)(z.s,{field:"cost",header:e.cost,body:cn}),(0,u.jsx)(z.s,{field:"from_dt",header:e.from_dt,body:hn,editor:function(e){return function(e,t){return(0,u.jsx)(g(),{name:"from_dt",selected:N()(e.rowData.from_dt)._d,id:"from_dt",value:N()(e.rowData.from_dt)._d,dateFormat:"dd-MMM-yyyy",disabled:!0,onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy"))},onKeyDown:function(e){e.preventDefault()}})}(e)}}),(0,u.jsx)(z.s,{field:"to_dt",header:e.to_dt,body:vn,editor:function(e){return function(e,t){var n,s;return console.log(i,ee,e,"---subrowdatepicker"),(0,u.jsx)(g(),{name:"to_dt",selected:N()(e.rowData.to_dt)._d,id:"to_dt",value:N()(e.rowData.to_dt)._d,dateFormat:"dd-MMM-yyyy",minDate:N()(null===(n=ee[0])||void 0===n?void 0:n.plannedStartDt)._d,maxDate:N()(null===(s=ee[0])||void 0===s?void 0:s.plannedEndDt)._d,onChange:function(t){e.editorCallback(N()(t).format("yyyy-MM-DD"))},portalId:"root-portal",onKeyDown:function(e){e.preventDefault()},shouldCloseOnBlur:!1,shouldCloseOnSelect:!1})}(e)}}),(0,u.jsx)(z.s,{}),(0,u.jsx)(z.s,{field:"effort_hours",header:e.effort_hours,body:dn}),(0,u.jsx)(z.s,{field:"daily_hours",header:e.daily_hours,body:un,editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{type:"text",disabled:!0,value:e.rowData.daily_hours,id:"daily_hours",onChange:function(t){e.editorCallback(t.target.value)}})})}(e)}}),(0,u.jsx)(z.s,{field:"allocationType",header:e.allocationType,body:mn,editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("select",{id:"allocationType",className:"error".concat(L&&!e.country?" error-block":""),name:"allocationType",disabled:!0,onChange:function(t){e.editorCallback(t.target.value),dt.map((function(n){n.id==t.target.value&&(e.rowData.allocationType=n.lkup_name,e.rowData.allocation_type_id=t.target.value)}))},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===dt||void 0===dt?void 0:dt.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.allocation_type_id,children:t.lkup_name},n)}))]})})}(e)}}),(0,u.jsx)(z.s,{field:"status",header:e.status,body:pn}),1==(null===(t=K[1])||void 0===t?void 0:t.is_write)?(0,u.jsx)(z.s,{rowEditor:!0}):(0,u.jsx)(z.s,{rowEditor:!0,style:{cursor:"not-allowed",pointerEvents:"none"}}),(0,u.jsx)(z.s,{body:fn})]}),(0,u.jsx)(u.Fragment,{children:J(null===i||void 0===i?void 0:i.subrows)})]})})},pagination:!0,paginator:!0,rows:10,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},children:[(0,u.jsx)(z.s,{feild:"expand",expander:function(e){var t;return(null===(t=e.subrows)||void 0===t?void 0:t.length)>=0}}),(0,u.jsx)(z.s,{field:"roleType",header:i.roleType,body:function(e){return(0,u.jsxs)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.roleType,children:[void 0==e.count?"":e.roleType+"("+e.count+")"," "]})},editor:function(e){return function(e){return console.log(e,"textEditorRoleType called"),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("select",{id:"roleType",name:"roleType",onChange:function(t){var n,s;Kt(t.target.value,null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n.countryId),e.editorCallback(t.target.value),Zt.map((function(n){n.id==t.target.value&&(e.rowData.roleType=n.display_name,e.rowData.roleTypeId=t.target.value)})),console.log(null===(s=ht[0])||void 0===s?void 0:s.cost,e.rowData.roleType,e.rowData.roleTypeId,t.target.value,"roleRateCost[0]?.cost")},children:null===Zt||void 0===Zt?void 0:Zt.map((function(t,n){return(0,u.jsxs)("option",{value:t.id,selected:t.id==e.rowData.roleTypeId,children:[t.id==e.rowData.roleTypeId&&console.log(t.id,"itemid"),t.display_name]},n)}))})})}(e)}}),(0,u.jsx)(z.s,{feild:"resIcon",body:function(e){var t;console.log(e,"--data in hanldebody");var n=new Date,s=N()(n).format("yyyy-MM-DD")>e.plannedEndDt;return(0,u.jsx)("div",{align:"center",children:""==e.resIcon||0==(null===(t=K[1])||void 0===t?void 0:t.is_write)?"":(0,u.jsx)(Ze.RYR,{size:"1.2em",color:"orange",title:"Add Resource",style:{cursor:s?"no-drop":"pointer",opacity:s&&"0.35"},onClick:function(){Ve(!0),We(e)}})})}}),(0,u.jsx)(z.s,{feild:"busUnit",body:function(e){return(0,u.jsx)("div",{})}}),(0,u.jsx)(z.s,{field:"country",header:i.country,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.country,children:e.country})},editor:function(e){return function(e){return console.log(e.rowData.countryId,"---country rowData"),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("select",{id:"countryId",className:"error".concat(L&&!e.country?" error-block":""),name:"country",onChange:function(t){var n,s;Kt(null===e||void 0===e||null===(n=e.rowData)||void 0===n?void 0:n.roleTypeId,t.target.value),e.editorCallback(t.target.value),Ie(!0),me.map((function(n){n.id==t.target.value&&(e.rowData.country=n.country_name,e.rowData.countryId=t.target.value)})),console.log(null===(s=ht[0])||void 0===s?void 0:s.cost,"roleRateCost[0]?.cost")},children:[(0,u.jsx)("option",{value:"",children:"<<Please Select>>"}),null===me||void 0===me?void 0:me.map((function(t,n){return(0,u.jsx)("option",{value:t.id,selected:t.id==e.rowData.countryId,children:t.country_name},n)}))]})})}(e)}}),(0,u.jsx)(z.s,{body:function(e){return(0,u.jsx)("div",{})},style:{width:"112px"}}),(0,u.jsx)(z.s,{field:"hourRate",header:i.hourRate,body:function(e){return(0,u.jsxs)("div",{"data-toggle":"tooltip",title:0==e.hourRate||null==e.hourRate||""==e.hourRate?Pt.textContent+" "+qt(0):" "==e.hourRate?"":Pt.textContent+" "+qt(e.hourRate),style:{textAlign:"right"},children:[" ",0==e.hourRate||null==e.hourRate||""==e.hourRate?Pt.textContent+" "+qt(0):" "==e.hourRate?"":Pt.textContent+" "+qt(e.hourRate)]})},editor:function(e){return function(e){var t,n,s;return console.log(null===(t=document.getElementsByName("hourRate"+(null===(n=e.rowData.id)||void 0===n?void 0:n.toString()))[0])||void 0===t?void 0:t.value,"docman"),console.log(e.rowData.hourRate,It.current.hourRate,"---hourrate"),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{name:"hourRate"+(null===(s=e.rowData.id)||void 0===s?void 0:s.toString()),ref:function(t){var n,s;console.log("in line 798------"),console.log(t),console.log(e.rowData.hourRate),null!=(null===t||void 0===t?void 0:t.value)&&(t.value=void 0==(null===(n=document.getElementsByName("hourRate"+(null===(s=e.rowData.id)||void 0===s?void 0:s.toString()))[0])||void 0===n?void 0:n.value)?e.rowData.hourRate:0==It.current.hourRate||0==e.rowData.hourRate||null==e.rowData.hourRate?0:e.rowData.hourRate,console.log("in line 809-------"),console.log(t.value),It.current[t.id]=t,console.log(It.current)),console.log(null===t||void 0===t?void 0:t.value)},type:"text",id:"hourRate",onChange:function(e){It.current.hourRate=e.target.value}})})}(e)}}),(0,u.jsx)(z.s,{field:"hourCost",header:i.hourCost,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:null==e.hourCost?"":0==e.hourCost?Pt.textContent+" "+qt(0):Pt.textContent+" "+qt(e.hourCost),style:{textAlign:"right"},children:null==e.hourCost?0:0==e.hourCost?Pt.textContent+" "+qt(0):Pt.textContent+" "+qt(e.hourCost)})},editor:function(e){return function(e,t){var n;return console.warn(e,"hourcost"),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"error ".concat(L&&!e.rowData.hourCost?"error-block":""),type:"text",ref:function(t){var n,s;console.log("in line 798------"),console.log(t),console.log(e.rowData.hourCost),null!=(null===t||void 0===t?void 0:t.value)&&(t.value=["",null,void 0].includes(null===(n=ht[0])||void 0===n?void 0:n.cost)?e.rowData.hourCost:null===(s=ht[0])||void 0===s?void 0:s.cost,console.log("in line 809-------"),console.log(t.value),It.current[t.id]=t,console.log(It.current)),console.log(null===t||void 0===t?void 0:t.value)},id:"hourCost",name:"hourCost"+(null===(n=e.rowData.id)||void 0===n?void 0:n.toString()),onChange:function(e){It.current.hourCost=e.target.value,console.log(e.target.value,"hourcost e.target.value")}})})}(e,i.hourCost)}}),(0,u.jsx)(z.s,{field:"plannedStartDt",header:i.plannedStartDt,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.plannedStartDt).format("DD-MMM-YYYY"),children:""==e.plannedStartDt||null==e.plannedStartDt?"":N()(e.plannedStartDt).format("DD-MMM-YYYY")})},editor:function(e){return function(e,t){var n,s,a,l;return console.log(_,e.rowData.plannedStartDt,"rowData for datepicker"),""!=e.rowData.plannedStartDt&&(0,u.jsx)(g(),{name:"plannedStartDt",selected:null==e.rowData.plannedStartDt?N()(null===(n=_[0])||void 0===n?void 0:n.plandStartDate)._d:N()(e.rowData.plannedStartDt)._d,id:"plannedStartDt",value:null==e.rowData.plannedStartDt?N()(null===(s=_[0])||void 0===s?void 0:s.plandStartDate)._d:N()(e.rowData.plannedStartDt)._d,dateFormat:"dd-MMM-yyyy",minDate:null==e.rowData.plannedStartDt?N()(null===(a=_[0])||void 0===a?void 0:a.plandStartDate)._d:N()(e.rowData.plannedStartDt)._d,maxDate:null==e.rowData.plandEndDate?N()(null===(l=_[0])||void 0===l?void 0:l.plandEndDate)._d:N()(e.rowData.plannedEndDt)._d,onChange:function(t){e.editorCallback(N()(t).format("DD-MMM-yyyy"))},onKeyDown:function(e){e.preventDefault()}})}(e)}}),(0,u.jsx)(z.s,{field:"plannedEndDt",header:i.plannedEndDt,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:N()(e.plannedEndDt).format("DD-MMM-YYYY"),children:""==e.plannedEndDt||null==e.plannedEndDt?"":N()(e.plannedEndDt).format("DD-MMM-YYYY")})},editor:function(e){return function(e,t){var n,s,a,l;return console.log(e.rowData.plannedEndDt,e.rowData.plandEndDate,"rowData for datepicker"),""!=e.rowData.plannedEndDt&&(0,u.jsx)(g(),{name:"plannedEndDt",selected:null==e.rowData.plannedEndDt?N()(null===(n=_[0])||void 0===n?void 0:n.plandEndDate)._d:N()(e.rowData.plannedEndDt)._d,id:"plannedEndDt",value:null==e.rowData.plannedEndDt?N()(null===(s=_[0])||void 0===s?void 0:s.plandEndDate)._d:N()(e.rowData.plannedEndDt)._d,dateFormat:"dd-MMM-yyyy",minDate:null==e.rowData.plannedStartDt?N()(null===(a=_[0])||void 0===a?void 0:a.plandStartDate)._d:N()(e.rowData.plannedStartDt)._d,maxDate:null==e.rowData.plannedEndDt?N()(null===(l=_[0])||void 0===l?void 0:l.plandEndDate)._d:N()(e.rowData.plannedEndDt)._d,onChange:function(t){console.log(N()(t).format("DD-MMM-yyyy")),e.editorCallback(N()(t).format("DD-MMM-yyyy"))},onKeyDown:function(e){e.preventDefault()}})}(e)}}),(0,u.jsx)(z.s,{field:"effortHours",header:i.effortHours,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:qt(e.effortHours),style:{textAlign:"right"},children:""==e.effortHours||0==e.effortHours||null==e.effortHours?qt(0):qt(e.effortHours)})},editor:function(e){return function(e){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("input",{className:"error ".concat(L&&!e.rowData.effortHours?"error-block":""),type:"text",value:e.rowData.effortHours,id:"effortHours",onChange:function(t){e.editorCallback(t.target.value)}})})}(e)}}),(0,u.jsx)(z.s,{field:"allocHrs",header:i.roleAllochrs,body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:0==e.roleAllochrs||null==e.roleAllochrs?qt(0):qt(e.roleAllochrs),style:{textAlign:"right"},children:0==e.roleAllochrs||null==e.roleAllochrs?qt(0):qt(e.roleAllochrs)})}}),(0,u.jsx)(z.s,{body:function(e){return(0,u.jsx)("div",{})}}),(0,u.jsx)(z.s,{body:function(e){return(0,u.jsx)("div",{})}}),(0,u.jsx)(z.s,{body:function(e){return(0,u.jsx)("div",{})}}),1==(null===(n=K[1])||void 0===n?void 0:n.is_write)?(0,u.jsx)(z.s,{rowEditor:!0}):(0,u.jsx)(z.s,{rowEditor:!0,style:{pointerEvents:"none",cursor:"not-allowed"}}),(0,u.jsx)(z.s,{body:function(e){var t;return" "==e.action?"":(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(St.bgj,{color:"orange",style:{cursor:"pointer"},title:"Assigned hrs",onClick:function(t){y(!0),h((function(t){var n;return(0,o.Z)((0,o.Z)({},t),{},(n={},(0,l.Z)(n,"Src","role"),(0,l.Z)(n,"ObjectId",e.id),n))})),gt(e.roleType)}}),1==(null===(t=K[1])||void 0===t?void 0:t.is_write)?(0,u.jsx)(b.YK6,{size:"1.0em",title:"Delete",style:{cursor:"pointer"},color:"orange",onClick:function(){!function(e){$e(!0),st(e.id),ot(e)}(e)}}):""]})}})]}),(0,u.jsxs)("div",{className:"capacityPlanTableBottom",children:[(0,u.jsxs)("div",{className:"p-1",children:[1==(null===le||void 0===le?void 0:le.is_write)?(0,u.jsxs)("div",{className:"btn-container-events center",children:[(0,u.jsxs)("button",{className:"btn btn-primary p-1","data-toggle":"tooltip",disabled:bt,title:"Add new row",onClick:function(){Jt()},variant:"contained",children:[(0,u.jsx)(P.WZt,{size:"1.2em"})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary p-1",disabled:re,onClick:function(){zt()},"data-toggle":"tooltip",title:"Save row",children:[(0,u.jsx)(U.UQg,{size:"0.7em"}),(0,u.jsx)("span",{className:"ml-1",children:" Save "})]}),(0,u.jsxs)("button",{className:"btn btn-primary p-1",disabled:re,onClick:function(){ae(!1),Vt()},"data-toggle":"tooltip",title:"Cancel row editing",variant:"contained",children:[(0,u.jsx)(M.sQZ,{size:"0.6em"}),(0,u.jsx)("span",{className:"ml-1",children:"Cancel"})]})]}):(0,u.jsxs)("div",{className:"btn-container-events center",children:[(0,u.jsxs)("button",{className:"btn btn-primary p-1","data-toggle":"tooltip",disabled:!0,title:"Add new row",onClick:function(){Jt()},variant:"contained",children:[(0,u.jsx)(P.WZt,{size:"1.2em"})," Add"]}),(0,u.jsxs)("button",{className:"btn btn-primary p-1",disabled:!0,onClick:function(){zt()},"data-toggle":"tooltip",title:"Save row",children:[(0,u.jsx)(U.UQg,{size:"0.7em"}),(0,u.jsx)("span",{className:"ml-1",children:" Save "})]}),(0,u.jsxs)("button",{className:"btn btn-primary p-1",disabled:!0,onClick:function(){ae(!1),Vt()},"data-toggle":"tooltip",title:"Cancel row editing",variant:"contained",children:[(0,u.jsx)(M.sQZ,{size:"0.6em"}),(0,u.jsx)("span",{className:"ml-1",children:"Cancel"})]})]}),(0,u.jsxs)("div",{children:["Total Demand hrs:",(0,u.jsx)("strong",{children:qt(Re)})]})]}),(0,u.jsxs)("div",{className:"p-1",children:["Total Allocation hrs:"," ",(0,u.jsx)("strong",{children:qt(He)})]})]})]}),qe?(0,u.jsx)(wt,{setErrorMsg:H,addErrMsg:p,setAddErrMsg:d,setErrData:m,data:Ke,projectId:D,errorMsg:r,setSearchResource:Ve,loggedUserId:C,getTableData:Z,setEditMessage:I,setAddMessage:T,setAddResMessage:A,setEditResMessage:E,validateproject:L,setValidateproject:q,dailyhrsRange:F,setDailyhrsRange:Y,grp2Items:K}):"",Xe?(0,u.jsx)(Mt,{getTableData:Z,setStatus:w,setDeleteResourceMessage:R,setDeleteMessage:k,setUid:st,uid:nt,deletePopup:Xe,setDeletePopup:$e,deleteData:it}):"",x&&(0,u.jsxs)("div",{className:"mt-2",children:[(0,u.jsxs)("div",{className:"collapseHeader revForcast",children:[(0,u.jsxs)("div",{className:"leftSection",children:[(0,u.jsx)("label",{style:{minWidth:"fit-content"},children:"prj"==f.Src?_[0].projectName:xt}),(0,u.jsxs)("select",{name:"Typ",id:"Typ",value:f.Typ,onChange:function(e){return h((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"Typ",e.target.value))}))},children:[(0,u.jsx)("option",{value:"allocations",children:"Allocation Hrs"}),(0,u.jsx)("option",{value:"assigned",children:"Assigned Hrs"}),(0,u.jsx)("option",{value:"actualHrs",children:"Actual Hrs"}),(0,u.jsx)("option",{value:"approvedHrs",children:"Approved Hrs"}),(0,u.jsx)("option",{value:"unapprovedHrs",children:"Unapproved Hrs"}),(0,u.jsx)("option",{value:"unassigned",children:"Allocation - Assigned Hrs"})]}),(0,u.jsxs)("select",{name:"AllocType",id:"AllocType",value:f.AllocType,onChange:function(e){return h((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"AllocType",e.target.value))}))},children:[(0,u.jsx)("option",{value:"all",children:"<< ALL >>"}),(0,u.jsx)("option",{value:"billable",children:"Billable"}),(0,u.jsx)("option",{value:"nonBillUtil",children:"Non Billable Utilized"}),(0,u.jsx)("option",{value:"nonBillShad",children:"Non Billable Shadow"}),(0,u.jsx)("option",{value:"nonBillEnb",children:"Non Billable Enabled"}),(0,u.jsx)("option",{value:"nonBillCliPrep",children:"Non Billable Client Prep"}),(0,u.jsx)("option",{value:"nonBillNonUtil",children:"Non Billable Non Utilized"}),(0,u.jsx)("option",{value:"nonBillInnov",children:"Non-billable Innovation"})]})]}),(0,u.jsxs)("div",{className:"rightSection",children:[(0,u.jsx)("label",{children:"Avg :"}),(0,u.jsxs)("select",{id:"Avg",children:[(0,u.jsx)("option",{value:"ge",children:"\u2265"}),(0,u.jsx)("option",{value:"le",children:"\u2264"}),(0,u.jsx)("option",{value:"gt",children:">"}),(0,u.jsx)("option",{value:"lt",children:"<"}),(0,u.jsx)("option",{value:"eq",children:"\u268c"})]}),(0,u.jsx)("input",{id:"avgtextvalue",name:"avgtextvalue",defaultValue:0,onChange:function(e){return h((function(t){return(0,o.Z)((0,o.Z)({},t),{},(0,l.Z)({},"avgtextvalue",e.target.value))}))}}),"%",(0,u.jsxs)("span",{className:"ml-2 chevronContainer",children:[(0,u.jsx)(b.euR,{cursor:"pointer",size:"2em",onClick:function(){var e=N()().subtract(1,"month").endOf("month").format("YYYY-MM-DD");h((function(t){return(0,o.Z)((0,o.Z)({},t),{},{FromDt:e})}));N()(_e.toDate).subtract("month",1).format("YYYY-MM-DD")}}),(0,u.jsx)("span",{children:N()(f.FromDt).format("MMM-YYYY")}),(0,u.jsx)(b.EnJ,{cursor:"pointer",size:"2em",onClick:function(){var e=N()(f.FromDt).add(1,"month").endOf("month").format("YYYY-MM-DD");N()(_e.toDate).add("month",1).format("YYYY-MM-DD");h((function(t){return(0,o.Z)((0,o.Z)({},t),{},{FromDt:e})}))}})]}),(0,u.jsx)(P.WZQ,{size:"1.8em",onClick:function(){y(!1)}})]})]}),(0,u.jsx)(At,{data:j,calenderPayload:f})]})]})};var Rt=function(e){var t,n,i,r=c.N.baseUrl,m=e.projectId,p=e.grp2Items,h=(p.find((function(e){return"Capacity Plan"===e.display_name})),(0,a.useRef)(null)),f=(0,a.useState)([]),j=(0,s.Z)(f,2),x=j[0],g=j[1],y=(0,a.useState)([]),_=(0,s.Z)(y,2),S=_[0],C=_[1],w=(0,a.useState)([]),M=(0,s.Z)(w,2),I=M[0],P=(M[1],(0,a.useState)([])),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)("active"),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=(0,a.useState)([]),L=(0,s.Z)(H,2),B=L[0],U=L[1],q=(0,a.useState)("null"),V=(0,s.Z)(q,2),z=V[0],G=V[1],K=(0,a.useState)([]),W=(0,s.Z)(K,2),Q=W[0],J=W[1],X=localStorage.getItem("resId"),$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1],se=(0,a.useState)(!1),ae=(0,s.Z)(se,2),le=ae[0],ie=ae[1],oe=(0,a.useState)([]),re=(0,s.Z)(oe,2),ce=re[0],de=re[1],ue=(0,a.useState)(""),me=(0,s.Z)(ue,2),pe=me[0],he=me[1],ve=(0,a.useState)(!1),fe=(0,s.Z)(ve,2),je=fe[0],xe=fe[1],ge=(0,a.useState)(!1),ye=(0,s.Z)(ge,2),Ne=ye[0],be=ye[1],_e=(0,a.useState)(!1),Se=(0,s.Z)(_e,2),De=Se[0],Ce=Se[1],Ze=(0,a.useState)(!1),we=(0,s.Z)(Ze,2),Me=we[0],ke=we[1],Ie=(0,a.useState)(!1),Pe=(0,s.Z)(Ie,2),Te=Pe[0],Ae=Pe[1],Ee=(0,a.useState)(!1),Re=(0,s.Z)(Ee,2),Fe=Re[0],Ye=Re[1],Oe=(0,a.useState)(!1),He=(0,s.Z)(Oe,2),Le=He[0],Be=He[1],Ue=(0,a.useState)(!1),qe=(0,s.Z)(Ue,2),Ve=qe[0],ze=qe[1],Ge=(0,a.useState)(!1),Ke=(0,s.Z)(Ge,2),We=Ke[0],Qe=Ke[1],Je=(0,a.useState)({resName:"",roleType:"",fromDate:"",toDate:""}),Xe=(0,s.Z)(Je,2),$e=Xe[0],et=Xe[1],tt=(0,a.useState)(!1),nt=(0,s.Z)(tt,2),st=nt[0],at=nt[1],lt=(0,a.useState)(!1),it=(0,s.Z)(lt,2),ot=it[0],rt=it[1],ct=(0,a.useState)(!1),dt=(0,s.Z)(ct,2),ut=dt[0],mt=dt[1],pt=(0,a.useState)(!1),ht=(0,s.Z)(pt,2),vt=ht[0],ft=ht[1],jt=(0,a.useState)(""),xt=(0,s.Z)(jt,2),gt=xt[0],yt=xt[1],Nt=(0,a.useState)({Src:"prj",Typ:"allocations",ObjectId:m.toString(),FromDt:N()(new Date).format("yyyy-MM-DD"),AllocType:"all",PrjSource:"-1",contTerms:"-1",engComps:"-1",cslIds:"-1",dpIds:"-1",avgtextvalue:"",userId:X.toString()}),bt=(0,s.Z)(Nt,2),_t=bt[0],Dt=bt[1],Ct=(0,a.useState)([]),Zt=(0,s.Z)(Ct,2),wt=Zt[0],Mt=Zt[1];(0,a.useEffect)((function(){v()({method:"GET",url:r+"/CommonMS/master/getMenus?loggedUserId=".concat(X)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&Mt([e])}))}))}),[]),(0,a.useEffect)((function(){At()}),[_t]),(0,a.useEffect)((function(){It(),Pt(),Tt()}),[Y,z]);var kt=function(e){v()({method:"get",url:r+"/ProjectMS/CapacityPlan/getProjectResource?pid=".concat(m,"&resource=").concat(e)}).then((function(e){var t=e.data;U(t)}))};(0,a.useEffect)((function(){}),[B,I]),(0,a.useEffect)((function(){v()({method:"get",url:r+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(m)}).then((function(e){var t=e.data;g(t)})).catch((function(e){console.log(e)}))}),[]);var It=function(){v()({method:"get",url:r+"/ProjectMS/CapacityPlan/getRolesCount?pid=".concat(m,"&isActive=").concat(Y)}).then((function(e){var t=e.data;C(t)})).catch((function(e){console.log(e)}))},Pt=function(){v()({method:"get",url:r+"/ProjectMS/CapacityPlan/getResourceCount?pid=".concat(m,"&isActive=").concat(Y)}).then((function(e){var t=e.data;E(t)})).catch((function(e){console.log(e)}))},Tt=function(){at(!1),Ce(!1),v()({method:"get",url:r+"/ProjectMS/CapacityPlan/getProjectRoleList?pid=".concat(m,"&resource=").concat(z,"&isActive=").concat(Y)}).then((function(e){var t=e.data;J(t),de(t),at(!0),Ce(!1)})).catch((function(e){console.log(e)}))},At=function(e){ne([]),Ce(!1),v()({method:"post",url:r+"/ProjectMS/CapacityPlan/getCalenders",data:_t}).then((function(e){var t=e.data;ne(t),Ce(!1)})).catch((function(e){console.log(e)}))};return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("div",{className:"pageTitle",children:[x.map((function(e){return(0,u.jsx)("div",{className:"childOne",children:(0,u.jsxs)("h2",{children:[e.projectName," (",e.projectCode,")"]})})})),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Capacity Plan"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:wt,currentScreenName:["Projects","Open","Planning","Capacity Plan"]}),We&&(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(Z.hXj,{}),"Resource ".concat($e.resName," is already booked for role ").concat($e.roleType,",for the period ").concat(N()($e.fromDate).format("DD-MMM-yyyy")," to ").concat(N()($e.toDate).format("DD-MMM-yyyy"))]}),vt&&(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Role Name ".concat(gt," is already exist for the project ").concat(null===(t=x[0])||void 0===t?void 0:t.projectName)]}),ut&&(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(Z.hXj,{}),"Daily Hours Can't be more than 24"]}),ot&&(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Please select the valid values for highlighted fields"]}),je&&1==pe?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Role Deleted Successfully"]}):Ne&&1==pe?(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Resource Deleted Successfully"]}):je&&0==pe?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"You cannot delete the role as resources are assigned to this role."]}):Ne&&0==pe?(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"You cannot delete resource."]}):"",Te&&(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Role added Successfully"]}),Fe&&(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Role edited Successfully"]}),Le&&(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Resource added Successfully"]}),Ve&&(0,u.jsxs)("div",{className:"statusMsg success",children:[(0,u.jsx)(Z.hXj,{}),"Resource edited Successfully"]}),Me&&(0,u.jsxs)("div",{className:"statusMsg error",children:[(0,u.jsx)(b.CSE,{}),"Select valid resources before searching."]}),(0,u.jsx)("div",{className:"customCard mt-2 mb-0",children:(0,u.jsx)("div",{className:"group container-fluid ",children:(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:" col-md-3 mb-2 px-0",children:(0,u.jsx)("div",{className:"form-group row",children:(0,u.jsxs)("p",{className:"col-12",htmlFor:"name-input-inline",children:["Total No. Of Resources : ",null===(n=A[0])||void 0===n?void 0:n.resCount]})})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsx)("div",{className:"form-group row",children:(0,u.jsxs)("p",{className:"col-7",htmlFor:"name-input-inline",children:["Total No. Of Roles :"," ",0==Q.length?0:null===(i=S[0])||void 0===i?void 0:i.rolesCount]})})}),(0,u.jsx)("div",{className:" col-md-3 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("p",{className:"col-7",htmlFor:"name-input-inline"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex"})})]})}),(0,u.jsx)("div",{className:"col-md-3 mb-2 px-0",children:(0,u.jsx)("div",{className:"align right",children:(0,u.jsxs)("div",{className:"legendContainer align right ",children:[(0,u.jsxs)("div",{className:"legend green",children:[(0,u.jsx)("div",{className:"legendCircle"}),(0,u.jsx)("div",{className:"legendTxt",children:"ISMS Certified"})]}),(0,u.jsxs)("div",{className:"legend red",children:[(0,u.jsx)("div",{className:"legendCircle"}),(0,u.jsx)("div",{className:"legendTxt",children:"ISMS Not Certified"})]})]})})})]})})}),(0,u.jsxs)("div",{className:"col-md-12",children:[(0,u.jsxs)("div",{className:"tableHeader",children:[(0,u.jsx)("div",{className:"leftSection",children:(0,u.jsx)("h2",{children:"Project Role List"})}),(0,u.jsxs)("div",{className:"rightSection",children:[(0,u.jsxs)("div",{className:"autoComplete-container capacityPlanAc",children:[(0,u.jsx)(d.ReactSearchAutocomplete,{items:B,type:"Text",name:"resourceId",id:"resourceId",className:"error AutoComplete",onSelect:function(e){G(e.id)},onSearch:function(e){kt(e)},showIcon:!1,onClear:function(){G("null")},placeholder:"Type minimum 3 characters"}),(0,u.jsxs)("span",{children:[" ",I.name]})]}),(0,u.jsx)("span",{className:"calender",children:(0,u.jsx)(St.bgj,{color:"orange",size:"1.3em",onClick:function(){ie(!0),Dt((function(e){var t;return(0,o.Z)((0,o.Z)({},e),{},(t={},(0,l.Z)(t,"Src","prj"),(0,l.Z)(t,"ObjectId",m.toString()),t))})),At()}})}),(0,u.jsxs)("select",{onChange:function(e){return function(e){O(e.target.value)}(e)},children:[(0,u.jsx)("option",{value:"active",id:"1",children:"Active"}),(0,u.jsx)("option",{value:"all",id:"0",children:"All"})]})]})]}),De?(0,u.jsx)(D.Z,{handleAbort:function(){h.current&&h.current.abort(),Ce(!1)}}):"",st&&(0,u.jsx)(Et,{setErrorMsg:ke,setAddErrMsg:Qe,addErrMsg:We,setErrData:et,errorMsg:Me,validateproject:ot,setValidateproject:rt,getTableData:Tt,Data:Q,setCalenderPayload:Dt,calenderPayload:_t,dispCalender:le,calenderTableData:te,setDispCalender:ie,projectData:x,setProducts:de,products:ce,setTableData:J,projectId:m,loggedUserId:X,setStatus:he,setAddMessage:Ae,setAddResMessage:Be,setEditResMessage:ze,setEditMessage:Ye,setDeleteMessage:xe,setDeleteResourceMessage:be,dailyhrsRange:ut,setDailyhrsRange:mt,setDupliRole:ft,setDupRoleName:yt,grp2Items:p})]})]})})},Ft=n(17425);var Yt=function(e){var t,n=c.N.baseUrl,l=e.projectId,i=e.grp1Items;console.log(i);var o=i.find((function(e){return"Project Overview"===e.display_name}));console.log(null===o||void 0===o?void 0:o.is_write,"****");var r=(0,a.useState)(""),d=(0,s.Z)(r,2),m=d[0],p=d[1],h=(0,a.useState)([]),f=(0,s.Z)(h,2),j=f[0],x=f[1],g=(0,a.useState)([]),y=(0,s.Z)(g,2),_=y[0],S=y[1],D=(0,a.useState)([]),C=(0,s.Z)(D,2),Z=C[0],w=C[1],M=(0,a.useState)([]),I=(0,s.Z)(M,2),P=I[0],T=I[1],A=(0,a.useState)([]),E=(0,s.Z)(A,2),R=E[0],F=E[1],Y=(0,a.useState)([]),O=(0,s.Z)(Y,2),H=O[0],L=O[1],B=(0,a.useState)([]),U=(0,s.Z)(B,2),q=U[0],V=U[1],z=(0,a.useState)([]),G=(0,s.Z)(z,2),K=G[0],W=G[1],Q=(0,a.useState)([]),J=(0,s.Z)(Q,2),X=J[0],$=J[1],ee=(0,a.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],se=te[1];console.log(H);var ae=document.createElement("div"),le=localStorage.getItem("resId"),oe=(0,a.useState)([]),re=(0,s.Z)(oe,2),ce=re[0],de=re[1];(0,a.useEffect)((function(){v()({method:"GET",url:n+"/CommonMS/master/getMenus?loggedUserId=".concat(le)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&de([e])}))}))}),[]),ae.innerHTML=null===(t=j[0])||void 0===t?void 0:t.currency,(0,a.useEffect)((function(){v()({method:"get",url:n+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),x(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getBusinessUnit?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),S(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getProjectManager?objectid=".concat(l)}).then((function(e){var t=e.data;console.log(t),w(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getDeliveryManager?objectid=".concat(l)}).then((function(e){var t=e.data;console.log(t),T(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getRiskFactorCharacteristics?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),F(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getProjectName?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),p(t)})).catch((function(e){console.log(e)})),ue(),v()({method:"get",url:n+"/ProjectMS/Audit/getEfforts?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),V(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getRevenue?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),W(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getDirectCost?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),$(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:n+"/ProjectMS/Audit/getOtherCost?projectId=".concat(l)}).then((function(e){var t=e.data;console.log(t),se(t)})).catch((function(e){console.log(e)}))}),[l]),console.log(j);var ue=function(){v()({method:"post",url:n+"/ProjectMS/Audit/getProjectKpidata",data:{businessUnitId:null,custName:null,prjName:m,prjId:l,prjComplexity:null,prjStage:null,source:null,gm:null}}).then((function(e){L(e.data),console.log(e.data)})).then((function(e){console.log("success",e)}))};return(0,u.jsxs)("div",{children:[console.log(l),(0,u.jsxs)("div",{children:[j.map((function(e){return(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:e.projectName})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Overview"})}),(0,u.jsx)("div",{className:"childThree"})]})})})),(0,u.jsx)(k.Z,{routes:ce,currentScreenName:["Projects","Open","Project","Overview"]}),j.map((function(e){return(0,u.jsx)("div",{className:"customCard mb-0",children:(0,u.jsx)("div",{className:"group container-fluid grayBg",children:(0,u.jsxs)("div",{className:"group-content row",children:[(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Code"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.projectCode,children:e.projectCode})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Name"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{"data-toggle":"tooltip",title:e.projectName,style:{fontSize:"13px"},children:e.projectName})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Category"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.projectCategory,children:e.projectCategory})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"PO Number"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.poNumber,children:null==e.poNumber?"":e.poNumber})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Customer"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),1==(null===o||void 0===o?void 0:o.is_write)?(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.customer,children:(0,u.jsxs)(ie.rU,{to:"/search/customerSearch/customer/dashboard/:".concat(e.customer_id),target:"_blank",children:[" ",e.customer]})})}):(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.customer,children:e.customer})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Division"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.division,children:null==e.division?"":e.division})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Engagement Type"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.engagementType,children:null==e.engagementType?"NA":e.engagementType})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Engagement Name"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),!0===(null===o||void 0===o?void 0:o.is_write)?(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.engagementName,children:(0,u.jsxs)(ie.rU,{to:"/engagement/Dashboard/:".concat(e.engagementId),target:"_blank",children:[" ",e.engagementName]})})}):(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.engagementName,children:e.engagementName})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Engagement Company"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.engagementCompany,children:e.engagementCompany})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Contract Terms"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.contractTerms,children:e.contractTerms})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Effort Type"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.effortType,children:null==e.effortType?"NA":e.effortType})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Execution Methodology"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.executionMethodology,children:e.executionMethodology})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Phase"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.projectPhase,children:e.projectPhase})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Complexity"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex ","data-toggle":"tooltip",title:e.projectComplexity,children:0==e.complexity_id?"":e.projectComplexity})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Stage"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.projectStage,children:e.projectStage})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Scheduling Mode"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-6",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.schedulingMode,children:e.schedulingMode})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Expenses Billable"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.expenseBillable,children:1==e.expenseBillable?"Yes":"No"})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Currency"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.currency,children:ae.textContent})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Time Entry Mode"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.timeEntryMode,children:e.timeEntryMode})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Scope"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.projectScope,children:e.projectScope})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Week Calendar"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.weekCalendar,children:e.weekCalendar})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Holiday Calendar"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.holidayCalendar,children:e.holidayCalendar})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Team Location"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.teamLocation,children:null==e.teamLocation?"NA":e.teamLocation})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Manager"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),Z.map((function(e){return(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.ProjectManager,children:null==e.ProjectManager||""==e.ProjectManager?"-":e.ProjectManager})})}))]})}),(0,u.jsxs)("div",{className:" col-md-4 mb-2",children:[(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Delivery Manager"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),P.map((function(e){return(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.DeliveryManager,children:0==P.length||" "==e.DeliveryManager?"-":e.DeliveryManager})})}))]}),console.log(P.length)]}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Deliverables"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.deliverables,children:e.deliverables})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Sub Practice"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.subPractice,children:e.subPractice})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"SF Engagement Type"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.sfEngagementType,children:e.sfEngagementType})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Health"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),498==e.project_health_id?(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsxs)("p",{className:" ellipsis tooltip-ex projectHealth green","data-toggle":"tooltip",title:e.projectHealth,children:[(0,u.jsx)(Dt.jbV,{size:"1.5em"}),e.projectHealth," "]})}):499==e.project_health_id?(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsxs)("p",{className:" ellipsis tooltip-ex projectHealth amber","data-toggle":"tooltip",title:e.projectHealth,children:[(0,u.jsx)(b.pHD,{size:"1.5em"}),e.projectHealth," "]})}):500==e.project_health_id?(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsxs)("p",{className:" ellipsis tooltip-ex projectHealth red","data-toggle":"tooltip",title:e.projectHealth,children:[(0,u.jsx)(Me.EZ0,{size:"1.5em"}),e.projectHealth," "]})}):""]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Facilitator"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.facilitator,children:e.facilitator})})]})}),25==e.contract||26==e.contract||27==e.contract||28==e.contract||606==e.contract||752==e.contract?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Client Email"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex",children:e.clientEmail})})]})}),(0,u.jsx)("div",{className:" col-md-4 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-4",htmlFor:"name-input-inline",children:"Project Type"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-7 ",children:(0,u.jsx)("p",{className:" ellipsis tooltip-ex",children:e.projectType})})]})})]}):""]})})})})),(0,u.jsx)("div",{className:"group container-fluid",children:(0,u.jsxs)("div",{className:"group-content row",children:[_.map((function(e){return(0,u.jsxs)("div",{className:"col-md-7 mb-2 mt-2 p-0",children:[(0,u.jsx)("label",{htmlFor:"name-input-inline",children:"Business Unit"}),(0,u.jsx)("div",{className:"grayBg",children:(0,u.jsx)("p",{children:e.bussinessUnit})})]})})),j.map((function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"col-md-5 mt-2",children:[(0,u.jsx)("label",{htmlFor:"name-input-inline",children:"Services Offered"}),(0,u.jsx)("div",{className:"grayBg",children:(0,u.jsx)("p",{children:e.servicesOffered})})]}),(0,u.jsxs)("div",{className:"col-md-7 mb-2 mt-2 p-0",children:[(0,u.jsx)("label",{htmlFor:"name-input-inline",children:"Project Description/Business Case"}),(0,u.jsx)("div",{className:"grayBg",children:(0,u.jsx)("p",{children:e.business_case})})]}),(0,u.jsxs)("div",{className:"col-md-5 mt-2 ",children:[(0,u.jsx)("label",{htmlFor:"name-input-inline",children:"Health Comments"}),(0,u.jsx)("div",{className:"grayBg",children:(0,u.jsx)("p",{children:e.prj_health_comments})})]}),(0,u.jsxs)("div",{className:"col-md-7 mb-2 p-0",children:[(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-3 ml-1",htmlFor:"name-input-inline",children:"SF Engagement Type \xa0:"}),(0,u.jsx)("p",{className:"col-7 ellipsis tooltip-ex","data-toggle":"tooltip",title:e.sfEngagementType,children:e.sfEngagementType})]}),(0,u.jsx)("div",{className:"col-12  mb-2 p-0",children:(0,u.jsx)("div",{class:"col-12 p-0",children:(0,u.jsx)("table",{id:"table-fields",class:"table",children:(0,u.jsxs)("tbody",{className:"table_Body",children:[(0,u.jsx)("tr",{children:(0,u.jsxs)("th",{colSpan:5,style:{color:"#187fde"},children:[(0,u.jsx)(Ft.t_2,{})," Project KPI's"]})}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:(0,u.jsx)("center",{children:"KPI"})}),(0,u.jsx)("th",{children:(0,u.jsx)("center",{children:"Preliminary"})}),(0,u.jsx)("th",{children:(0,u.jsx)("center",{children:"Contracted"})}),(0,u.jsx)("th",{children:(0,u.jsx)("center",{children:"Planned"})}),(0,u.jsx)("th",{children:(0,u.jsx)("center",{children:"Actual"})})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Schedule"}),(0,u.jsxs)("td",{children:[null==e.preStartDate?"-":N()(e.preStartDate).format("DD-MMM-yyyy")," ","to"," ",null==e.preEndDate?"-":N()(e.preEndDate).format("DD-MMM-yyyy")]}),(0,u.jsxs)("td",{children:[null==e.contStartDate?"-":N()(e.contStartDate).format("DD-MMM-yyyy")," ","to"," ",null==e.contEndDate?"-":N()(e.contEndDate).format("DD-MMM-yyyy")]}),(0,u.jsxs)("td",{children:[null==e.plandStartDate?"-":N()(e.plandStartDate).format("DD-MMM-yyyy")," ","to"," ",null==e.plandEndDate?"-":N()(e.plandEndDate).format("DD-MMM-yyyy")]}),(0,u.jsxs)("td",{children:[null==e.actStartDate?"NA":N()(e.actStartDate).format("DD-MMM-yyyy")," ","to"," ",null==e.actEndDate?"-":N()(e.actEndDate).format("DD-MMM-yyyy")]})]}),H.map((function(e){var t,n,s,a,l,i,o,r,c,d,m,p,h,v,f,x,g,y,N,b,_,S,D,C,Z,w,M,k,I,P,T,A,E,R,F,Y,O,H,L,B,U,V,z,G,W,Q,J,$,ee,te,se,le,ie,oe,re,ce,de,ue,me,pe,he,ve,fe,je,xe;return(0,u.jsxs)(u.Fragment,{children:[console.log(null===(t=e.planned_hours)||void 0===t?void 0:t.toLocaleString("en-US")),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Duration (Days)"}),(0,u.jsx)("td",{className:"text-right",children:e.preliminary_duration}),(0,u.jsx)("td",{className:"text-right",children:e.contracted_duration}),(0,u.jsx)("td",{className:"text-right",children:e.planned_duration}),(0,u.jsx)("td",{className:"text-right",children:e.actual_duration})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"FTE"}),(0,u.jsx)("td",{className:"text-right",children:null==e.preliminary_fte?"-":Math.round(null===(n=j[0])||void 0===n?void 0:n.fte)}),(0,u.jsx)("td",{className:"text-right",children:e.contracted_fte}),(0,u.jsx)("td",{className:"text-right",children:e.planned_fte}),(0,u.jsx)("td",{className:"text-right",children:null==e.employee_offshore?0:e.employee_offshore})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Efforts(Hrs)"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(s=q[0])||void 0===s?void 0:s.value)?0:null===(a=q[0])||void 0===a||null===(l=a.value)||void 0===l?void 0:l.toLocaleString("en-IN")}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(i=q[0])||void 0===i?void 0:i.value)?0:null===(o=q[1])||void 0===o||null===(r=o.value)||void 0===r?void 0:r.toLocaleString("en-IN")}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_hours?0:null===(c=e.planned_hours)||void 0===c?void 0:c.toLocaleString("en-IN")}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_hours?0:null===(d=e.actual_hours)||void 0===d?void 0:d.toLocaleString("en-IN")})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Revenue"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(m=K[0])||void 0===m?void 0:m.value)?ae.textContent+" 0":ae.textContent+" "+(null===(p=K[0])||void 0===p||null===(h=p.value)||void 0===h?void 0:h.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(v=K[1])||void 0===v?void 0:v.value)?ae.textContent+" 0":ae.textContent+" "+(null===(f=K[1])||void 0===f||null===(x=f.value)||void 0===x?void 0:x.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_revenue?ae.textContent+" 0":ae.textContent+" "+(null===(g=e.planned_revenue)||void 0===g?void 0:g.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_revenue?ae.textContent+" 0":ae.textContent+" "+(null===(y=e.actual_revenue)||void 0===y?void 0:y.toLocaleString("en-IN"))})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Resource Direct Cost"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(N=X[0])||void 0===N?void 0:N.value)?ae.textContent+" 0":ae.textContent+" "+(null===(b=X[0])||void 0===b||null===(_=b.value)||void 0===_?void 0:_.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(S=X[1])||void 0===S?void 0:S.value)?ae.textContent+" 0":ae.textContent+" "+(null===(D=X[1])||void 0===D||null===(C=D.value)||void 0===C?void 0:C.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_direct_cost?ae.textContent+" 0":ae.textContent+" "+(null===(Z=e.planned_direct_cost)||void 0===Z?void 0:Z.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_direct_cost?ae.textContent+" 0":ae.textContent+" "+(null===(w=e.actual_direct_cost)||void 0===w?void 0:w.toLocaleString("en-IN"))})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Other Cost"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(M=ne[0])||void 0===M?void 0:M.value)?ae.textContent+" 0":ae.textContent+" "+(null===(k=ne[0])||void 0===k||null===(I=k.value)||void 0===I?void 0:I.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(P=ne[1])||void 0===P?void 0:P.value)?ae.textContent+" 0":ae.textContent+" "+(null===(T=ne[1])||void 0===T||null===(A=T.value)||void 0===A?void 0:A.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_other_cost?ae.textContent+" 0":ae.textContent+" "+(null===(E=e.planned_other_cost)||void 0===E?void 0:E.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_other_cost?ae.textContent+" 0":ae.textContent+" "+(null===(R=e.actual_other_cost)||void 0===R?void 0:R.toLocaleString("en-IN"))})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"Gross Margin"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(F=K[0])||void 0===F?void 0:F.value)||null==(null===(Y=X[0])||void 0===Y?void 0:Y.value)?ae.textContent+" 0":ae.textContent+" "+(null===(O=(null===(H=K[0])||void 0===H?void 0:H.value)-((null===(L=X[0])||void 0===L?void 0:L.value)+(null===(B=ne[0])||void 0===B?void 0:B.value)))||void 0===O?void 0:O.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(U=K[1])||void 0===U?void 0:U.value)?ae.textContent+" 0":ae.textContent+" "+(null===(V=(null===(z=K[1])||void 0===z?void 0:z.value)-((null===(G=X[1])||void 0===G?void 0:G.value)+(null===(W=ne[1])||void 0===W?void 0:W.value)))||void 0===V?void 0:V.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_revenue?ae.textContent+" 0":ae.textContent+" "+(null===(Q=e.planned_revenue-(e.planned_direct_cost+e.planned_other_cost))||void 0===Q?void 0:Q.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_revenue?ae.textContent+" 0":ae.textContent+" "+(null===(J=e.actual_revenue-(e.actual_direct_cost+e.actual_other_cost))||void 0===J?void 0:J.toLocaleString("en-IN"))})]}),(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:"GM%"}),(0,u.jsx)("td",{className:"text-right",children:null==(null===($=K[0])||void 0===$?void 0:$.value)||0==(null===(ee=X[0])||void 0===ee?void 0:ee.value)||null==(null===(te=X[0])||void 0===te?void 0:te.value)?0:null===(se=Math.round(100*((null===(le=K[0])||void 0===le?void 0:le.value)-((null===(ie=X[0])||void 0===ie?void 0:ie.value)+(null===(oe=ne[0])||void 0===oe?void 0:oe.value)))/(null===(re=K[0])||void 0===re?void 0:re.value)*100)/100)||void 0===se?void 0:se.toLocaleString("en-IN")}),(0,u.jsx)("td",{className:"text-right",children:null==(null===(ce=K[1])||void 0===ce?void 0:ce.value)||0==(null===(de=X[1])||void 0===de?void 0:de.value)||null==(null===(ue=X[1])||void 0===ue?void 0:ue.value)?0:null===(me=Math.round(100*((null===(pe=K[1])||void 0===pe?void 0:pe.value)-((null===(he=X[1])||void 0===he?void 0:he.value)+(null===(ve=ne[1])||void 0===ve?void 0:ve.value)))/(null===(fe=K[1])||void 0===fe?void 0:fe.value)*100)/100)||void 0===me?void 0:me.toLocaleString("en-IN")}),(0,u.jsx)("td",{className:"text-right",children:null==e.planned_revenue||(null===(je=Math.round(100*(e.planned_revenue-(e.planned_direct_cost+e.planned_other_cost))/e.planned_revenue*100)/100)||void 0===je?void 0:je.toLocaleString("en-IN"))}),(0,u.jsx)("td",{className:"text-right",children:null==e.actual_revenue?"NA":null===(xe=Math.round(100*(e.actual_revenue-(e.actual_direct_cost+e.actual_other_cost))/e.actual_revenue*100)/100)||void 0===xe?void 0:xe.toLocaleString("en-IN")})]})]})}))]})})})})]}),17==e.projCat||18==e.projCat||19==e.projCat?(0,u.jsx)("div",{className:" col-md-5 mt-5 pt-2",children:(0,u.jsx)("div",{className:"customCard p-0",children:(0,u.jsx)("table",{className:"table table-bordered table-striped",role:"grid",children:(0,u.jsxs)("tbody",{children:[(0,u.jsx)("tr",{children:(0,u.jsxs)("th",{style:{color:"#187fde"},children:[(0,u.jsx)(Ft.t_2,{}),(0,u.jsx)("span",{className:"ml-1",children:"Risk Factor Characteristics"})]})}),(0,u.jsx)("tr",{children:(0,u.jsx)("td",{className:"p-0",children:R.map((function(e){return(0,u.jsx)("div",{className:"group mb-1 container-fluid",children:(0,u.jsxs)("div",{className:"group-content row ",children:[(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Technical Complexity"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("lable",{children:e.techComplexity})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Domain Specific Challenges"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.domSpecChallenge})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Skilled Resources Availability"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.skillResAvail})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Dependencies on Third Party Systems"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.depThirdPartySys})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Development Environment Availability"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.devEnvAvail})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Dependencies on customer/Customer Environment"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.custEnv})})]})}),(0,u.jsx)("div",{className:" col-md-12 mb-2",children:(0,u.jsxs)("div",{className:"form-group row",children:[(0,u.jsx)("label",{className:"col-7",htmlFor:"name-input-inline",children:"Margin/Profitability"}),(0,u.jsx)("span",{className:"col-1 p-0",children:":"}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("p",{children:e.profitability})})]})})]})})}))})})]})})})}):""]})}))]})})]})]})};var Ot=n(85628);function Ht(e){e.flag;var t=e.tableData,n=(c.N.baseUrl,(0,u.jsx)(he.E,{children:(0,u.jsxs)(ve.X,{children:[(0,u.jsx)(z.s,{sortable:!0,header:"Competency",alignHeader:"center"}),(0,u.jsx)(z.s,{sortable:!0,header:"Exp Rating",alignHeader:"center"}),(0,u.jsx)(z.s,{sortable:!0,header:"Act Rating",alignHeader:"center"}),(0,u.jsx)(z.s,{sortable:!0,header:"Make a Plan",alignHeader:"center"})]})}));return(0,u.jsx)("div",{className:" darkHeader",children:(0,u.jsxs)(B.w,{value:t,showGridlines:!0,headerColumnGroup:n,pagination:!0,paginator:!0,rows:15,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},children:[(0,u.jsx)(z.s,{field:"Competency",header:"Competency",body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.Competency,children:e.Competency})}}),(0,u.jsx)(z.s,{field:"ExpRating",header:"ExpRating",body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.ExpRating,children:e.ExpRating})}}),(0,u.jsx)(z.s,{field:"ActRating",header:"ActRating",body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.ActRating,children:e.ActRating})}}),(0,u.jsx)(z.s,{field:"Makeaplan",header:"Makeaplan",body:function(e){return(0,u.jsx)("div",{"data-toggle":"tooltip",title:e.Makeaplan,children:e.Makeaplan})}})]})})}var Lt=function(e){var t=e.projectId,n=(e.grp1Items.find((function(e){return"Hierarchy"===e.display_name})),(0,a.useState)([])),l=(0,s.Z)(n,2),i=l[0],o=l[1],r=c.N.baseUrl,d=(0,a.useState)(!1),m=(0,s.Z)(d,2),p=(m[0],m[1],(0,a.useState)([])),h=(0,s.Z)(p,2),f=h[0],j=h[1],x=(0,a.useState)(0),y=(0,s.Z)(x,2),N=y[0],b=y[1],_=(0,a.useState)("All"),S=(0,s.Z)(_,2),D=S[0],C=S[1],Z=(0,a.useState)(!1),w=(0,s.Z)(Z,2),M=w[0],I=w[1],P=(0,a.useState)(new Date),T=(0,s.Z)(P,2),A=T[0],E=T[1],R=(0,a.useState)(!1),F=(0,s.Z)(R,2),Y=F[0],O=F[1],H=(0,a.useState)([]),L=(0,s.Z)(H,2),B=L[0],U=L[1];console.log(D),console.log("flag",Y);var q=(0,a.useState)({typ:"roles",prjId:t,dat:"0000-00-00",state:D}),V=(0,s.Z)(q,2),z=V[0],G=(V[1],(0,a.useState)(z)),K=(0,s.Z)(G,2),W=K[0],Q=(K[1],localStorage.getItem("resId")),J=(0,a.useState)([]),X=(0,s.Z)(J,2),$=X[0],ee=X[1];(0,a.useEffect)((function(){v()({method:"GET",url:r+"/CommonMS/master/getMenus?loggedUserId=".concat(Q)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&ee([e])}))}))}),[]),(0,a.useEffect)((function(){te(),ne()}),[D]);var te=function(){v()({method:"get",url:r+"/ProjectMS/project/getProjectHierarchy?typ=".concat(W.typ,"&prjId=").concat(W.prjId,"&dat=").concat(W.dat,"&state=").concat(D)}).then((function(e){var t,n=e.data,s=(0,ot.Z)(n);try{for(s.s();!(t=s.n()).done;){var a=t.value;if("-1"===a.id&&"#"===a.parent){var l=a.text.replace(/<\/?[^>]+(>|$)/g,"");a.text=l}}}catch(i){s.e(i)}finally{s.f()}j(n),b((function(e){return e+1})),I(!0)}))},ne=function(){v()({method:"get",url:r+"/ProjectMS/Audit/getProjectHierarchyName?projectId=".concat(t)}).then((function(e){var t=e.data;o(t)})).catch((function(e){}))};return console.log("-------"+i),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"pageTitle",children:[(0,u.jsx)("div",{className:"childOne",children:(0,u.jsx)("h2",{children:i.projectName})}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{children:"Project Hierarchy"})}),(0,u.jsx)("div",{className:"childThree"})]}),(0,u.jsx)(k.Z,{routes:$,currentScreenName:["Projects","Open","Project","Project Hierarchy"]}),(0,u.jsx)("div",{className:"col-md-12 mt-2 p-1 customCard card ",style:{backgroundColor:"#f4f4f4"},children:(0,u.jsxs)("span",{style:{alignSelf:"flex-end",display:"flex",justifyContent:"space-between",alignItems:"center",whiteSpace:"nowrap"},children:[(0,u.jsxs)("label",{className:"mr-1",style:{fontWeight:"bold"},children:[" ","Date :"]}),(0,u.jsx)(g(),{className:"hierCalender",dropdownMode:"select",disabledKeyboardNavigation:!0,showMonthDropdown:!0,showYearDropdown:!0,selected:A,dateFormat:"dd-MMM-yyyy",onChange:function(e){return E(e)},style:{width:"70px"}})]})}),(0,u.jsxs)("div",{className:"col-md-12 group-content mr-0 ml-1 row",children:[(0,u.jsxs)("div",{className:"col-md-6 group mb-3 ",style:{backgroundColor:"#eeeeee38"},children:[(0,u.jsxs)("div",{className:"col-md-12",style:{borderBottom:"1px solid grey",background:"#f1eeee",height:"36px"},children:[(0,u.jsxs)("label",{style:{float:"right",paddingTop:"7px"},children:["Edit",(0,u.jsxs)("select",{style:{marginLeft:"10px"},id:"status",onChange:function(e){console.log(e.target.value),C(e.target.value),te()},children:[(0,u.jsx)("option",{value:"All",children:"All"}),(0,u.jsx)("option",{value:"Active",children:"Active"})]})]}),(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{style:{textAlign:"center",color:"#297AB0",fontSize:"14px",paddingTop:"7px"},children:"Project Hierarchy"})})]}),1==M?(0,u.jsx)(Ot.Z,{defaultExpandedRows:String(-1),data:f,setFlag:O,flag:Y,setTableData:U,projectName:i,hierarchyCount:N}):""]}),console.log(f),(0,u.jsxs)("div",{className:"col-md-6 group mb-3 customCard card",children:[(0,u.jsx)("div",{className:"childTwo",children:(0,u.jsx)("h2",{style:{textAlign:"center",backgroundColor:"#f4f4f4"},children:"Competencies"})}),Y?(0,u.jsx)(Ht,{tableData:B}):null]})]})]})};n(20989);var Bt=n(57689);var Ut=function(e){var t,n,l,i,o,r,d,m,p,h,f=(0,Bt.TH)(),j=(window.location.href.split(":"),c.N.baseUrl),x=(0,a.useState)("Defects"),g=(0,s.Z)(x,2),y=g[0],N=g[1],_=(0,a.useState)(0),S=(0,s.Z)(_,2),D=S[0],C=S[1],Z=localStorage.getItem("resId"),w=(0,a.useState)([]),M=(0,s.Z)(w,2),k=M[0],P=M[1],T=(0,a.useState)([]),A=(0,s.Z)(T,2),R=A[0],F=A[1],O=(0,a.useState)([]),H=(0,s.Z)(O,2),L=H[0],B=H[1],U=(0,a.useState)([]),q=(0,s.Z)(U,2),z=q[0],G=q[1],K=(0,a.useState)([]),Q=(0,s.Z)(K,2),J=Q[0],X=Q[1],$=(0,a.useState)([]),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1];return(0,a.useEffect)((function(){var e=null===f||void 0===f?void 0:f.state;!function(){var e=window.location.href.split(":"),t=e[e.length-1];v().get(j+"/CommonMS/master/getTabMenus?ProjectId=".concat(t,"&loggedUserId=").concat(Z,"&type=Project&subType=project")).then((function(e){var t=e.data;P(t),F(t.filter((function(e){return 1===e.grp}))),B(t.filter((function(e){return 2===e.grp}))),G(t.filter((function(e){return 3===e.grp}))),X(t.filter((function(e){return 4===e.grp}))),ne(t.filter((function(e){return 6===e.grp})))})).catch((function(e){console.log(e)}))}();var t=window.location.href;t.includes("Overview")&&N("Project Overview"),t.includes("taskPlan")&&N("Task Plan"),t.includes("capacityPlan")&&N("Capacity Plan");var n=t.split(":");C(n[n.length-1]),void 0!=(null===e||void 0===e?void 0:e.btnState)&&N(null===e||void 0===e?void 0:e.btnState)}),[]),(0,u.jsx)("div",{children:k.length>0?(0,u.jsxs)("div",{children:[(0,u.jsxs)("ul",{className:"tabsContainer",children:[(0,u.jsxs)("li",{children:[void 0!=(null===(t=R[0])||void 0===t?void 0:t.display_name)?(0,u.jsx)("span",{children:null===(n=R[0])||void 0===n?void 0:n.display_name}):"",(0,u.jsx)("ul",{children:R.slice(1).map((function(e){return(0,u.jsx)("li",{className:y===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){N(e.display_name)},children:e.display_name})}))})]})," ",(0,u.jsxs)("li",{children:[void 0!=(null===(l=L[0])||void 0===l?void 0:l.display_name)?(0,u.jsx)("span",{children:null===(i=L[0])||void 0===i?void 0:i.display_name}):"",(0,u.jsx)("ul",{children:L.slice(1).map((function(e){return(0,u.jsx)("li",{className:y===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){N(e.display_name)},children:e.display_name})}))})]})," ",(0,u.jsxs)("li",{children:[void 0!=(null===(o=z[0])||void 0===o?void 0:o.display_name)?(0,u.jsx)("span",{children:null===(r=z[0])||void 0===r?void 0:r.display_name}):"",(0,u.jsx)("ul",{children:z.slice(1).map((function(e){return(0,u.jsx)("li",{className:y===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){N(e.display_name)},children:e.display_name})}))})]})," ",(0,u.jsxs)("li",{children:[void 0!=(null===(d=J[0])||void 0===d?void 0:d.display_name)?(0,u.jsx)("span",{children:null===(m=J[0])||void 0===m?void 0:m.display_name}):"",(0,u.jsx)("ul",{children:J.slice(1).map((function(e){return(0,u.jsx)("li",{className:y===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){N(e.display_name)},children:e.display_name})}))})]})," ",(0,u.jsxs)("li",{children:[void 0!=(null===(p=te[0])||void 0===p?void 0:p.display_name)?(0,u.jsx)("span",{children:null===(h=te[0])||void 0===h?void 0:h.display_name}):"",(0,u.jsx)("ul",{children:te.slice(1).map((function(e){return(0,u.jsx)("li",{className:y===e.display_name?"buttonDisplayClick":"buttonDisplay",onClick:function(){N(e.display_name)},children:e.display_name})}))})]})]}),"Risks"===y?(0,u.jsx)(Y,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Issues"===y?(0,u.jsx)(I,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Defects"===y?(0,u.jsx)(E,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Accomplishments"===y?(0,u.jsx)(V,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Stakeholders"===y?(0,u.jsx)(W,{projectId:D,grp1Items:k.filter((function(e){return 1===e.grp}))}):"","Status"===y?(0,u.jsx)(le,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Audit Log"===y?(0,u.jsx)(fe,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Review log"===y?(0,u.jsx)(_e,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Scope Changes"===y?(0,u.jsx)(ge,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Baselines"===y?(0,u.jsx)(ye.Z,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Documents"===y?(0,u.jsx)(Ge,{projectId:D,grp1Items:k.filter((function(e){return 1===e.grp}))}):"","Project Overview"===y?(0,u.jsx)(Yt,{projectId:D,grp1Items:k.filter((function(e){return 1===e.grp}))}):"","Expenses"===y?(0,u.jsx)(tt,{projectId:D,grp3Items:k.filter((function(e){return 3===e.grp}))}):"","Resource Approvals"===y?(0,u.jsx)(st,{projectId:D,grp2Items:k.filter((function(e){return 2===e.grp}))}):"","Contract Documents"===y?(0,u.jsx)(it,{projectId:D,grp3Items:k.filter((function(e){return 3===e.grp}))}):"","Events"===y?(0,u.jsx)(ct,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Milestones"===y?(0,u.jsx)(pt,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Dependencies"===y?(0,u.jsx)(ht,{projectId:D,grp4Items:k.filter((function(e){return 4===e.grp}))}):"","Edit"===y?(0,u.jsx)(vt.default,{btnState:y,setbtnState:N,projectId:D,grp1Items:k.filter((function(e){return 1===e.grp}))}):"","Compliance"===y?(0,u.jsx)(ft,{projectId:D,grp6Items:k.filter((function(e){return 6===e.grp}))}):"","Task Plan"===y?(0,u.jsx)(_t,{projectId:D,grp2Items:k.filter((function(e){return 2===e.grp}))}):"","Hierarchy"===y?(0,u.jsx)(Lt,{projectId:D,grp1Items:k.filter((function(e){return 1===e.grp}))}):"","Capacity Plan"===y?(0,u.jsx)(Rt,{projectId:D,grp2Items:k.filter((function(e){return 2===e.grp}))}):"","QCR"===y?(0,u.jsx)(ft,{projectId:D,grp6Items:k.filter((function(e){return 6===e.grp}))}):""]}):(0,u.jsx)("div",{className:"statusMsg error",children:(0,u.jsxs)("span",{className:"error-block",children:[(0,u.jsx)(b.CSE,{})," \xa0 You dont have Permission to View this Project"]})})})}},8072:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var s=n(4942),a=n(1413),l=n(93433),i=n(74165),o=n(15861),r=n(29439),c=n(72791),d=n(17425),u=n(7692),m=n(70828),p=n(78820),h=n(74569),v=n.n(h),f=n(34831),j=n(63521),x=n(72426),g=n.n(x),y=n(58241),N=(n(65713),n(59513)),b=n.n(N),_=n(32125),S=n(57689),D=n(78983),C=n(59962),Z=n.n(C),w=n(56355),M=n(83854),k=(n(30374),n(80184)),I=function(e){var t=e.popup,n=e.setPopup,s=(e.setEditedData,e.handleDateUpdate),a=e.handleNo,l=e.popUpValue,i=e.setStgValue;e.stgValue,f.N.baseUrl;return(0,k.jsx)("div",{children:(0,k.jsx)(Z(),{children:(0,k.jsxs)(D.Tk,{visible:t,size:"xs",className:"ui-dialog",onClose:function(){return n(!1)},children:[(0,k.jsx)(D.p0,{className:"",children:(0,k.jsx)(D.fl,{children:(0,k.jsx)("span",{className:""})})}),(0,k.jsxs)(D.sD,{children:[2==l?(0,k.jsx)("h6",{children:"All the Allocations and Assignments of the resources from the date of completion till Project completion date, will be deleted. Do you want to continue?"}):(0,k.jsx)("h6",{children:"Do you want to delete all allocations and Assignments of the resources from today? Selecting NO will update project stage leaving Allocations and Assignments as-is."}),(0,k.jsxs)("div",{className:"btn-container center my-2",children:[(0,k.jsxs)("button",{className:"btn btn-primary",onClick:function(){s(),n(!1),i(l)},children:[(0,k.jsx)(w.FJM,{}),"Yes"]}),(0,k.jsxs)("button",{className:"btn btn-primary",onClick:function(){2===l?n(!1):(a(),n(!1),i(l))},children:[(0,k.jsx)(w.G5m,{})," No"]}),2==l?"":(0,k.jsxs)("button",{className:"btn btn-secondary",onClick:function(){n(!1)},children:[(0,k.jsx)(w.aHS,{})," Cancel"," "]})]})]})]})})})};var P=function(e){e.targetDisplayName,e.btnState;var t,n,h,x,N,D,C,Z,P,T,A,E,R,F,Y,O,H,L,B,U,q,V,z,G,K,W,Q,J,X,$,ee,te,ne,se,ae,le,ie,oe,re,ce,de,ue,me,pe,he,ve,fe,je,xe,ge,ye,Ne,be,_e,Se,De,Ce,Ze,we,Me,ke,Ie,Pe,Te,Ae,Ee,Re,Fe,Ye,Oe,He,Le,Be,Ue,qe,Ve,ze,Ge,Ke,We,Qe,Je,Xe,$e,et,tt,nt,st,at,lt,it,ot,rt,ct,dt,ut,mt,pt,ht,vt,ft,jt,xt,gt,yt,Nt,bt,_t,St,Dt,Ct,Zt,wt,Mt,kt,It,Pt,Tt,At,Et,Rt,Ft,Yt,Ot,Ht,Lt,Bt,Ut,qt,Vt,zt,Gt,Kt,Wt,Qt,Jt,Xt,$t,en,tn,nn,sn,an,ln,on,rn,cn,dn,un,mn,pn,hn,vn,fn,jn,xn,gn,yn,Nn,bn,_n,Sn,Dn,Cn,Zn,wn,Mn,kn,In,Pn,Tn,An,En,Rn,Fn,Yn,On,Hn,Ln,Bn,Un,qn,Vn,zn,Gn,Kn,Wn,Qn,Jn,Xn,$n,es,ts,ns,ss,as,ls,is,os,rs,cs,ds,us,ms,ps,hs,vs,fs,js,xs,gs=e.setbtnState,ys=(0,S.TH)(),Ns=(null===ys||void 0===ys||ys.state,window.location.href.split(":")),bs=Ns[Ns.length-1],_s=localStorage.getItem("resId"),Ss=f.N.baseUrl,Ds=(0,c.useState)([]),Cs=(0,r.Z)(Ds,2),Zs=Cs[0],ws=Cs[1],Ms=(0,c.useState)([]),ks=(0,r.Z)(Ms,2),Is=ks[0],Ps=ks[1],Ts=(0,c.useState)([]),As=(0,r.Z)(Ts,2),Es=As[0],Rs=As[1],Fs=(0,c.useState)([]),Ys=(0,r.Z)(Fs,2),Os=Ys[0],Hs=Ys[1],Ls=(0,c.useState)([]),Bs=(0,r.Z)(Ls,2),Us=Bs[0],qs=Bs[1],Vs=(0,c.useState)([]),zs=(0,r.Z)(Vs,2),Gs=zs[0],Ks=zs[1],Ws=(0,c.useState)([]),Qs=(0,r.Z)(Ws,2),Js=Qs[0],Xs=Qs[1],$s=(0,c.useState)([]),ea=(0,r.Z)($s,2),ta=ea[0],na=ea[1],sa=(0,c.useState)([]),aa=(0,r.Z)(sa,2),la=aa[0],ia=aa[1],oa=(0,c.useState)([]),ra=(0,r.Z)(oa,2),ca=ra[0],da=ra[1],ua=(0,c.useState)([]),ma=(0,r.Z)(ua,2),pa=ma[0],ha=ma[1],va=(0,c.useState)([]),fa=(0,r.Z)(va,2),ja=fa[0],xa=fa[1],ga=(0,c.useState)([]),ya=(0,r.Z)(ga,2),Na=(ya[0],ya[1]),ba=(0,c.useState)([]),_a=(0,r.Z)(ba,2),Sa=(_a[0],_a[1]),Da=(0,c.useState)([]),Ca=(0,r.Z)(Da,2),Za=Ca[0],wa=Ca[1],Ma=(0,c.useState)({priliminaryEfforts:"",contractedEfforts:""}),ka=(0,r.Z)(Ma,2),Ia=ka[0],Pa=ka[1],Ta=(0,c.useState)([]),Aa=(0,r.Z)(Ta,2),Ea=(Aa[0],Aa[1]),Ra=(0,c.useState)([]),Fa=(0,r.Z)(Ra,2),Ya=(Fa[0],Fa[1]),Oa=(0,c.useState)([]),Ha=(0,r.Z)(Oa,2),La=Ha[0],Ba=Ha[1],Ua=(0,c.useState)({revenue:"",contractedRevenue:""}),qa=(0,r.Z)(Ua,2),Va=qa[0],za=qa[1],Ga=(0,c.useState)({priliminaryRDC:"",ContractRDC:""}),Ka=(0,r.Z)(Ga,2),Wa=Ka[0],Qa=Ka[1],Ja=(0,c.useState)([]),Xa=(0,r.Z)(Ja,2),$a=(Xa[0],Xa[1]),el=(0,c.useState)({priliminaryOtherCost:"",contarctOtherCost:""}),tl=(0,r.Z)(el,2),nl=tl[0],sl=tl[1],al=(0,c.useState)(0),ll=(0,r.Z)(al,2),il=ll[0],ol=ll[1],rl=(0,c.useState)(0),cl=(0,r.Z)(rl,2),dl=cl[0],ul=cl[1],ml=(0,c.useState)([]),pl=(0,r.Z)(ml,2),hl=pl[0],vl=pl[1],fl=(0,c.useState)(0),jl=(0,r.Z)(fl,2),xl=jl[0],gl=jl[1],yl=(0,c.useState)(0),Nl=(0,r.Z)(yl,2),bl=Nl[0],_l=Nl[1],Sl=(0,c.useState)([]),Dl=(0,r.Z)(Sl,2),Cl=Dl[0],Zl=Dl[1],wl=(0,c.useState)([]),Ml=(0,r.Z)(wl,2),kl=Ml[0],Il=Ml[1],Pl=(0,c.useState)([]),Tl=(0,r.Z)(Pl,2),Al=Tl[0],El=Tl[1],Rl=(0,c.useState)([]),Fl=(0,r.Z)(Rl,2),Yl=Fl[0],Ol=Fl[1],Hl=(0,c.useState)([]),Ll=(0,r.Z)(Hl,2),Bl=Ll[0],Ul=Ll[1],ql=(0,c.useState)([]),Vl=(0,r.Z)(ql,2),zl=Vl[0],Gl=Vl[1],Kl=(0,c.useState)([]),Wl=(0,r.Z)(Kl,2),Ql=Wl[0],Jl=Wl[1],Xl=(0,c.useState)([]),$l=(0,r.Z)(Xl,2),ei=$l[0],ti=$l[1],ni=(0,c.useState)([]),si=(0,r.Z)(ni,2),ai=si[0],li=si[1],ii=(0,c.useState)([]),oi=(0,r.Z)(ii,2),ri=oi[0],ci=oi[1],di=document.createElement("div"),ui=(document.getElementById("yes"),(0,c.useState)("")),mi=(0,r.Z)(ui,2),pi=mi[0],hi=mi[1],vi=(0,c.useState)(""),fi=(0,r.Z)(vi,2),ji=fi[0],xi=fi[1],gi=(0,c.useState)(),yi=(0,r.Z)(gi,2),Ni=yi[0],bi=yi[1],_i=(0,c.useState)(),Si=(0,r.Z)(_i,2),Di=Si[0],Ci=Si[1],Zi=(0,c.useState)(),wi=(0,r.Z)(Zi,2),Mi=wi[0],ki=wi[1],Ii=(0,c.useState)(!1),Pi=(0,r.Z)(Ii,2),Ti=Pi[0],Ai=Pi[1],Ei=(0,c.useState)(!1),Ri=(0,r.Z)(Ei,2),Fi=Ri[0],Yi=Ri[1],Oi=(0,c.useState)([]),Hi=(0,r.Z)(Oi,2),Li=Hi[0],Bi=Hi[1],Ui=(0,c.useState)(""),qi=(0,r.Z)(Ui,2),Vi=qi[0],zi=qi[1],Gi=(0,c.useState)(""),Ki=(0,r.Z)(Gi,2),Wi=Ki[0],Qi=Ki[1],Ji=(0,c.useState)(""),Xi=(0,r.Z)(Ji,2),$i=Xi[0],eo=Xi[1],to=(0,c.useState)(!1),no=(0,r.Z)(to,2),so=no[0],ao=no[1],lo=(0,c.useState)(!1),io=(0,r.Z)(lo,2),oo=io[0],ro=io[1],co=(0,c.useRef)([]),uo=(0,c.useState)(""),mo=(0,r.Z)(uo,2),po=mo[0],ho=mo[1],vo=(0,c.useState)(""),fo=(0,r.Z)(vo,2),jo=fo[0],xo=fo[1],go=(0,c.useRef)(null),yo=function(){Ks([]),go.current=new AbortController,v()({method:"get",url:Ss+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(bs)}).then((function(e){var t=e.data;ro(!1),setTimeout((function(){ro(!1),Ks(t)}),1e3),ko(t[0].projCat),No(t[0].customer_id),xo(t[0].is_prj_status),bo(t[0].division_id),So(t[0].engagementId),_o(t[0].engagementId),Po(t[0].engagementId),wo(t[0].projectName),setTimeout((function(){document.body.click()}),2e3)})).catch((function(e){console.log(e)}))},No=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getDivisionsById?cid=".concat(e)}).then((function(e){var t=e.data;ia(t)}))},bo=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getEngagementsById?Did=".concat(e)}).then((function(e){var t=e.data;wa(t)}))},_o=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getEngagementTypeById?eid=".concat(e)}).then((function(e){var t=e.data;ha(t)})).catch((function(e){console.log("error :"+e)}))},So=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getContractTeamsById?eid=".concat(e)}).then((function(e){var t=e.data;da(t)})).catch((function(e){console.log("error :"+e)}))},Do=function(){Ol([]),v()({method:"get",url:Ss+"/ProjectMS/Audit/getProjectManager?objectid=".concat(bs)}).then((function(e){var t=e.data;Ol(t)})).catch((function(e){console.log(e)}))},Co=function(){v()({method:"get",url:Ss+"/ProjectMS/Audit/getOtherCost?projectId=".concat(bs)}).then((function(e){var t=e.data;t.length>0&&sl({priliminaryOtherCost:t[0].value,contarctOtherCost:t[1].value})})).catch((function(e){console.log(e)}))},Zo=function(){v()({method:"get",url:Ss+"/ProjectMS/Audit/getRevenue?projectId=".concat(bs)}).then((function(e){var t,n=e.data;n.length>0&&za({revenue:n[0].value||"",contractedRevenue:(null===(t=n[1])||void 0===t?void 0:t.value)||""});n[0].value,n[1].value})).catch((function(e){console.log(e)}))},wo=function(e){v()({method:"post",url:Ss+"/ProjectMS/Audit/getProjectKpidata",data:{businessUnitId:null,custName:null,prjName:e,prjId:bs,prjComplexity:null,prjStage:null,source:null,gm:null}}).then((function(e){e.data;Ba(e.data)})).then((function(e){}))},Mo=function(){v()({method:"get",url:Ss+"/ProjectMS/Audit/getEfforts?projectId=".concat(bs)}).then((function(e){var t=e.data;t.length>0&&Pa({priliminaryEfforts:t[0].value,contractedEfforts:t[1].value})})).catch((function(e){console.log(e)}))},ko=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getEffortTypesById?pcid=".concat(e)}).then((function(e){var t=e.data;xa(t)})).catch((function(e){console.log("error :"+e)}))},Io=function(){v()({method:"get",url:Ss+"/ProjectMS/Audit/getDirectCost?projectId=".concat(bs)}).then((function(e){var t=e.data;t.length>0&&Qa({priliminaryRDC:t[0].value,ContractRDC:t[1].value});var n={priliminaryRDC:t[0].value,ContractRDC:t[1].value};$a(JSON.parse(JSON.stringify(n)))})).catch((function(e){console.log(e)}))},Po=function(e){v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getPoNumberByEnguagementId?eid=".concat(e)}).then((function(e){var t=e.data;vl(t)}))},To=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n,s){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getHolidays?fromDate=".concat(t,"&toDate=").concat(n,"&calendarId=").concat(s)});case 3:return a=e.sent,l=a.data.holidays,e.abrupt("return",l);case 8:throw e.prev=8,e.t0=e.catch(0),console.error("Error fetching holidays:",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,s){return e.apply(this,arguments)}}();(0,S.s0)(),(0,c.useEffect)((function(){yo(),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getAllProjectCategorys"}).then((function(e){var t=e.data;ws(t)})),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getCustomers"}).then((function(e){var t=e.data;Ps(t)})),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getWeekCalendars"}).then((function(e){var t=e.data;Rs(t)})),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getHolidayCalendars"}).then((function(e){var t=e.data;Hs(t)})),qs([]),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getProjectPhases"}).then((function(e){var t=e.data;qs(t)})),Xs([]),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getProjectTypes"}).then((function(e){var t=e.data;Xs(t)})),v()({method:"get",url:Ss+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;na(t)})).catch((function(e){console.log("error :"+e)})),ko(),v()({method:"get",url:Ss+"/ProjectMS/Audit/getRiskFactorCharacteristics?projectId=".concat(bs)}).then((function(e){var t=e.data;Na(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getProjectName?projectId=".concat(bs)}).then((function(e){var t=e.data;Sa(t)})).catch((function(e){console.log(e)})),Mo(),Zo(),Io(),Co(),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getserviceOfferings"}).then((function(e){e.data,Zl(e.data.map((function(e){return{key:e.id,title:e.offering_name}})))})).catch((function(e){console.log("error :"+e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getGrossMargin?projectId=".concat(bs)}).then((function(e){var t=e.data;Ea(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getGM?projectId=".concat(bs)}).then((function(e){var t=e.data;Ya(t)})).catch((function(e){console.log(e)})),Do(),v()({method:"get",url:Ss+"/ProjectMS/Audit/getDeliveryManager?objectid=".concat(bs)}).then((function(e){var t=e.data;Ul(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getProjectApprover?objectid=".concat(bs)}).then((function(e){var t=e.data;Gl(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getProjectRequester?objectid=".concat(bs)}).then((function(e){var t=e.data;Jl(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/Audit/getBusinessUnit?projectId=".concat(bs)}).then((function(e){var t=e.data;ci(t)})).catch((function(e){console.log(e)})),v()({method:"get",url:Ss+"/ProjectMS/ProjectScopeChange/getLkupTypes"}).then((function(e){var t=e.data;Bi(t)}))}),[],null===(t=pa[0])||void 0===t?void 0:t.id),(0,c.useEffect)((function(){var e,t,n,s,a,l,r,c,d=function(e,t){return""===(null===e||void 0===e?void 0:e.trim())?t:e},u=function(e,t){for(var n=g()(e),s=g()(t).diff(n,"days")+1,a=0,l=0;l<s;l++){var i=n.clone().add(l,"days");0!==i.day()&&6!==i.day()&&a++}return a},m=d(null===(e=Gs[0])||void 0===e?void 0:e.contStartDate,null===(t=Gs[0])||void 0===t?void 0:t.contStartDate),p=d(null===(n=Gs[0])||void 0===n?void 0:n.contEndDate,null===(s=Gs[0])||void 0===s?void 0:s.contEndDate),h=d(null===(a=Gs[0])||void 0===a?void 0:a.plandStartDate,null===(l=Gs[0])||void 0===l?void 0:l.plandStartDate),v=d(null===(r=Gs[0])||void 0===r?void 0:r.plandEndDate,null===(c=Gs[0])||void 0===c?void 0:c.plandEndDate),f=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,n,s,a,l,o,r,c,d,f,j,x,g,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,To(null===(t=Gs[0])||void 0===t?void 0:t.contStartDate,null===(n=Gs[0])||void 0===n?void 0:n.contEndDate,null===(s=Gs[0])||void 0===s?void 0:s.holiday_calendar_id);case 3:return e.sent,e.next=6,To(null===(a=Gs[0])||void 0===a?void 0:a.plandStartDate,null===(l=Gs[0])||void 0===l?void 0:l.plandEndDate,null===(o=Gs[0])||void 0===o?void 0:o.holiday_calendar_id);case 6:c=e.sent,d=u(h,v),Qi(d-c),f=d-c,j=(null===(r=La[0])||void 0===r?void 0:r.planned_hours)/(8*f),El(j.toFixed(2)),x=u(m,p),zi(x-c),g=x-c,y=Ia.contractedEfforts/(8*g),Il(y.toFixed(2)),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error("Error in fetchData:",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();f()}),[Gs,null===(n=Gs[0])||void 0===n?void 0:n.contStartDate,null===(h=Gs[0])||void 0===h?void 0:h.contEndDate,null===(x=Gs[0])||void 0===x?void 0:x.plandStartDate,null===(N=Gs[0])||void 0===N?void 0:N.plandEndDate,null===(D=Gs[0])||void 0===D?void 0:D.holiday_calendar_id,Ia.contractedEfforts,null===(C=La[0])||void 0===C?void 0:C.planned_hours]),(0,c.useEffect)((function(){!function(e){var t=(""==Wa.priliminaryRDC?0:Wa.priliminaryRDC)+(""==nl.priliminaryOtherCost?0:nl.priliminaryOtherCost),n=(Va.revenue-t)/Va.revenue*100;ul(n?n.toFixed(2):e)}(),function(e){var t=(parseFloat(Wa.priliminaryRDC)||0)+(parseFloat(nl.priliminaryOtherCost)||0),n=Va.revenue-t;ol(n?n.toFixed(2):e)}()}),[Wa,Va,nl,bs]),(0,c.useEffect)((function(){!function(e){var t=(""==Wa.ContractRDC?0:Wa.ContractRDC)+(""==nl.contarctOtherCost?0:nl.contarctOtherCost),n=(Va.contractedRevenue-t)/Va.contractedRevenue*100;_l(n?n.toFixed(2):e)}(),function(e){var t=(""==Wa.ContractRDC?0:Wa.ContractRDC)+(""==nl.contarctOtherCost?0:nl.contarctOtherCost),n=Va.contractedRevenue-t;gl(n?n.toFixed(2):e)}()}),[Wa,nl,Va]);var Ao=function(e,t){Ks((function(n){var s=(0,l.Z)(n);return s[0][e]=t,s}))},Eo=function(e){var t=e.target,n=t.value,s=t.id;switch(ho(n),s){case"division_id":bo(n);break;case"engagementId":_o(n),So(n),Po(n);break;case"effort_type_id":default:break;case"customer_id":No(n)}Ao(s,n)},Ro=function(e){var t=e.target,n=(t.name,t.id),i=t.value;"revenue"===n?za((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"priliminaryRDC"===n?Qa((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"priliminaryOtherCost"===n?sl((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"contractedRevenue"===n?za((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"contarctOtherCost"===n?sl((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"ContractRDC"===n?Qa((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))})):"priliminaryFte"===n?Ks((function(e){var t=(0,l.Z)(e);return t[0].fte=i,t})):"contractFte"===n?Ba((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},"contracted_fte",e.target.value))})):("priliminaryEfforts"===n||"contractedEfforts"===n)&&Pa((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},e.target.id,e.target.value))}))},Fo=function(e){var t=e.target,n=t.value,s=t.id;Ks((function(e){var t=(0,l.Z)(e);return t[0][s]=n,t}))};return(0,c.useEffect)((function(){var e,t,n,s,a,l,i=g()(null===(e=Gs[0])||void 0===e?void 0:e.contStartDate).toDate();hi(i);var o=g()(null===(t=Gs[0])||void 0===t?void 0:t.contEndDate).toDate();xi(o);var r=g()(null===(n=Gs[0])||void 0===n?void 0:n.plandStartDate).toDate();bi(r);var c=g()(null===(s=Gs[0])||void 0===s?void 0:s.plandEndDate).toDate();if(Ci(c),null!=(null===(a=Gs[0])||void 0===a?void 0:a.actStartDate)){var d,u=g()(null===(d=Gs[0])||void 0===d?void 0:d.actStartDate).toDate();ki(u)}if(null!==(l=Gs[0])&&void 0!==l&&l.servicesOfferedId){var m,p=((null===(m=Gs[0])||void 0===m?void 0:m.servicesOfferedId)||"").split(",").map((function(e){return parseInt(e.trim(),10)})).filter((function(e){return!isNaN(e)}));ti(p)}}),[Gs]),(0,k.jsxs)("div",{children:[(0,k.jsxs)(k.Fragment,{children:[Fi?(0,k.jsxs)("div",{className:"statusMsg success",children:[" ",(0,k.jsx)(u.hXj,{})," Project Updated Successfully"," "]}):"",Ti?(0,k.jsxs)("div",{className:"statusMsg error",children:[" ",(0,k.jsx)(p.CSE,{})," Please select the valid values for highlighted fields"," "]}):""]}),(0,k.jsxs)("div",{className:"pageTitle",children:[(0,k.jsx)("div",{className:"childOne",children:(0,k.jsx)("h2",{children:null===(Z=Gs[0])||void 0===Z?void 0:Z.projectName})}),(0,k.jsx)("div",{className:"childTwo",children:(0,k.jsx)("h2",{children:"Edits"})}),(0,k.jsx)("div",{className:"childThree"})]}),(0,k.jsxs)("div",{className:"group mb-3 customCard",children:[(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectCode",children:["Project Code ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("div",{className:"textfield",ref:function(e){co.current[0]=e},children:(0,k.jsx)("input",{type:"text",disabled:!0,className:"form-control disableField",id:"projectCode",placeholder:!0,required:!0,defaultValue:null===(P=Gs[0])||void 0===P?void 0:P.projectCode})})]}),(0,k.jsxs)("div",{className:"form-group col-md-4 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectName",children:["Project Name ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("div",{className:"textfield",ref:function(e){co.current[1]=e},children:(0,k.jsx)("input",{type:"text",disabled:"Completed"==(null===(T=Gs[0])||void 0===T?void 0:T.projectStage),className:"form-control disableField ",id:"projectName",placeholder:!0,required:!0,onChange:function(e){var t=e.target.value.replace(/^\s+/g,"");e.target.value=t,Fo(e)},value:null===(A=Gs[0])||void 0===A?void 0:A.projectName})})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"businessUnit",children:["Business Unit ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("div",{className:"textfield",ref:function(e){co.current[2]=e},children:(0,k.jsx)("input",{type:"text",className:"form-control Done disableField",id:"UnitOfMeasure",value:null===(E=ri[0])||void 0===E?void 0:E.bussinessUnit,placeholder:!0,disabled:!0,required:!0})})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"customer",children:["Customer ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"customer_id",className:"disableField text",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(R=Gs[0])||void 0===R?void 0:R.projectStage),ref:function(e){co.current[3]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Is.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.customer_id),children:[" ",e.full_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"division",children:["Division ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"division_id",disabled:"Completed"==(null===(F=Gs[0])||void 0===F?void 0:F.projectStage),onChange:function(e){return Eo(e)},className:"text",ref:function(e){co.current[4]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),la.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.division_id),children:[" ",e.name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"subPractice",children:"Sub Practice"}),(0,k.jsx)("input",{type:"text",className:"form-control",id:"subPractice",disabled:"Completed"==(null===(Y=Gs[0])||void 0===Y?void 0:Y.projectStage),value:null==(null===(O=Gs[0])||void 0===O?void 0:O.subPractice)?"":null===(H=Gs[0])||void 0===H?void 0:H.subPractice,onChange:function(e){return Fo(e)}})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"engagementName",children:["Engagement Name ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"engagementId",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(L=Gs[0])||void 0===L?void 0:L.projectStage),className:"text",ref:function(e){co.current[5]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Za.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.engagementId),children:[" ",e.name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"engagementType",children:["Engagement Type ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"engagement_model_id",disabled:!0,defaultValue:null===(B=Gs[0])||void 0===B?void 0:B.engagementType,className:"text",ref:function(e){co.current[6]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),pa.map((function(e){var t,n;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.engagement_model_id)||e.lkup_name==(null===(n=pa[0])||void 0===n?void 0:n.lkup_name),children:[" ",e.lkup_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"contractTerms",children:["Contract Terms ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"contract",defaultValue:null===(U=Gs[0])||void 0===U?void 0:U.contractTerms,disabled:!0,className:"text",ref:function(e){co.current[7]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),ca.map((function(e){var t,n;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.contract)||e.lkup_name==(null===(n=ca[0])||void 0===n?void 0:n.lkup_name),children:[" ",e.lkup_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"executionMethodology",children:"Execution Methodology"}),(0,k.jsxs)("select",{id:"project_exec_method_id",className:"disableField",disabled:null!=(null===(q=Gs[0])||void 0===q?void 0:q.executionMethodology),onChange:function(e){return Eo(e)},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:365,selected:"Agile"==(null===(V=Gs[0])||void 0===V?void 0:V.executionMethodology)?365:"",children:"Agile"}),(0,k.jsx)("option",{value:366,selected:"Waterfall"==(null===(z=Gs[0])||void 0===z?void 0:z.executionMethodology)?366:"",children:"Waterfall"}),(0,k.jsx)("option",{value:367,selected:"Iterative"==(null===(G=Gs[0])||void 0===G?void 0:G.executionMethodology)?367:"",children:"Iterative"}),(0,k.jsx)("option",{value:368,selected:"Other"==(null===(K=Gs[0])||void 0===K?void 0:K.executionMethodology)?368:"",children:"Other"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"effortType",children:"Effort Type"}),(0,k.jsxs)("select",{id:"effort_type_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(W=Gs[0])||void 0===W?void 0:W.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),ja.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.effort_name==(null===(t=Gs[0])||void 0===t?void 0:t.effortType),children:[" ",e.effort_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"currency",children:["Currency ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"currency_id",onChange:function(e){return Eo(e)},disabled:!0,className:"text",ref:function(e){co.current[8]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),"currency_id",Li.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.currency_id),children:[" ",e.description]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"schedulingMode",children:["Scheduling Mode ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"typ_scheduling_mode_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Q=Gs[0])||void 0===Q?void 0:Q.projectStage),className:"text",ref:function(e){co.current[9]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:30,selected:"Days"==(null===(J=Gs[0])||void 0===J?void 0:J.schedulingMode)?30:"",children:"Days"}),(0,k.jsx)("option",{value:31,selected:"Hours"==(null===(X=Gs[0])||void 0===X?void 0:X.schedulingMode)?31:"",children:"Hours"}),(0,k.jsx)("option",{value:29,selected:"Weeks"==(null===($=Gs[0])||void 0===$?void 0:$.schedulingMode)?29:"",children:"Weeks"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"timeEntryMode ",children:["Time Entry Mode ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"typ_time_entry_mode_id",className:"disableField text",disabled:"Completed"==(null===(ee=Gs[0])||void 0===ee?void 0:ee.projectStage),onChange:function(e){return Eo(e)},ref:function(e){co.current[10]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:19,selected:"Project Level"==(null===(te=Gs[0])||void 0===te?void 0:te.timeEntryMode)?19:"",children:"Project Level"}),(0,k.jsx)("option",{value:20,selected:"Task Level"==(null===(ne=Gs[0])||void 0===ne?void 0:ne.timeEntryMode)?20:"",children:"Task Level"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"teamLocation ",children:["Team Location ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"team_location_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(se=Gs[0])||void 0===se?void 0:se.projectStage),className:"text",ref:function(e){co.current[11]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:364,selected:"Blended Shore"==(null===(ae=Gs[0])||void 0===ae?void 0:ae.teamLocation)?364:"",children:"Blended Shore"}),(0,k.jsx)("option",{value:361,selected:"Client Site"==(null===(le=Gs[0])||void 0===le?void 0:le.teamLocation)?361:"",children:"Client Site"}),(0,k.jsx)("option",{value:363,selected:"Off Shore"==(null===(ie=Gs[0])||void 0===ie?void 0:ie.teamLocation)?363:"",children:"Off Shore"}),(0,k.jsx)("option",{value:362,selected:"Onsite"==(null===(oe=Gs[0])||void 0===oe?void 0:oe.teamLocation)?362:"",children:"Onsite"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"projectScope",children:"Project Scope "}),(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",disabled:"Completed"==(null===(re=Gs[0])||void 0===re?void 0:re.projectStage),className:"form-control",id:"projectScopeId",placeholder:!0,value:" "==(null===(ce=Gs[0])||void 0===ce?void 0:ce.projectScopeId)?0:null===(de=Gs[0])||void 0===de?void 0:de.projectScopeId,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Fo(e)}})})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"unit_of_measure",children:"Unit of Measurement"}),(0,k.jsxs)("select",{id:"unit_of_measure",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(ue=Gs[0])||void 0===ue?void 0:ue.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsxs)("option",{value:"243",selected:"243"==(null===(me=Gs[0])||void 0===me?void 0:me.unit_of_measure),children:[" ","FP"]}),(0,k.jsx)("option",{value:"244",selected:"244"==(null===(pe=Gs[0])||void 0===pe?void 0:pe.unit_of_measure),children:"UCP"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"expenseBillable",children:"Expense Billable"}),(0,k.jsxs)("div",{className:"form-check form-check-inline",children:[(0,k.jsx)("input",{className:"form-check-input",type:"radio",disabled:"Completed"===(null===(he=Gs[0])||void 0===he?void 0:he.projectStage),id:"expenseBillableYes",name:"expenseBillable",value:"true",checked:!0===(null===(ve=Gs[0])||void 0===ve?void 0:ve.expenseBillable),onChange:function(e){Ks((function(e){var t=(0,l.Z)(e);return t[0].expenseBillable=!0,t}))}}),(0,k.jsx)("label",{className:"form-check-label",htmlFor:"expenseBillableYes",children:"Yes"})]}),(0,k.jsxs)("div",{className:"form-check form-check-inline",children:[(0,k.jsx)("input",{className:"form-check-input",type:"radio",disabled:"Completed"===(null===(fe=Gs[0])||void 0===fe?void 0:fe.projectStage),id:"expenseBillableNo",name:"expenseBillable",value:"false",checked:!1===(null===(je=Gs[0])||void 0===je?void 0:je.expenseBillable),onChange:function(e){Ks((function(e){var t=(0,l.Z)(e);return t[0].expenseBillable=!1,t}))}}),(0,k.jsx)("label",{className:"form-check-label",htmlFor:"expenseBillableNo",children:"No"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"weekCalendar",children:["Week Calendar ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"week_calendar_id",className:"disableField text",disabled:"Completed"==(null===(xe=Gs[0])||void 0===xe?void 0:xe.projectStage),onChange:function(e){return Eo(e)},ref:function(e){co.current[12]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Es.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.calendar_name==(null===(t=Gs[0])||void 0===t?void 0:t.weekCalendar),children:[" ",e.calendar_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"holidayCalendar",children:["Holiday Calendar ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"holiday_calendar_id",className:"disableField text",disabled:"Completed"==(null===(ge=Gs[0])||void 0===ge?void 0:ge.projectStage),onChange:function(e){return Eo(e)},ref:function(e){co.current[13]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Os.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.name==(null===(t=Gs[0])||void 0===t?void 0:t.holidayCalendar),children:[" ",e.name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectCategory",children:["Project Category ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"projCat",className:"disableField text",disabled:"Completed"==(null===(ye=Gs[0])||void 0===ye?void 0:ye.projectStage),onChange:function(e){return Eo(e)},ref:function(e){co.current[14]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Zs.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.project_category_name==(null===(t=Gs[0])||void 0===t?void 0:t.projectCategory),children:[" ",e.project_category_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectStage",children:["Project Stage ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("select",{id:"isPrjStatus",onChange:function(e){return function(e){var t=e.target,n=t.value,s=t.id;ho(n),"isPrjStatus"===s&&([2,4,6].includes(e.target.length)||5===e.target.length&&"1"===n?(ao(!1),xo(n)):[1,2,3,4].includes(Number(n))&&ao(!0),Ao("is_prj_status",n));so&&Ao(s,n)}(e)},className:"text",value:jo,ref:function(e){co.current[15]=e},children:"New"===(null===(Ne=Gs[0])||void 0===Ne?void 0:Ne.projectStage)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"0",children:"New"}),(0,k.jsx)("option",{value:"5",children:"Opportunity"}),(0,k.jsx)("option",{value:"1",children:"In Progress"})]}):"In Progress"===(null===(be=Gs[0])||void 0===be?void 0:be.projectStage)||"On Hold"===(null===(_e=Gs[0])||void 0===_e?void 0:_e.projectStage)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"1",children:"In Progress"}),(0,k.jsx)("option",{value:"3",children:"Withdrawn"}),(0,k.jsx)("option",{value:"4",children:"On Hold"}),(0,k.jsx)("option",{value:"2",children:"Completed"})]}):"Opportunity"===(null===(Se=Gs[0])||void 0===Se?void 0:Se.projectStage)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"5",children:"Opportunity"}),(0,k.jsx)("option",{value:"1",children:"In Progress"}),(0,k.jsx)("option",{value:"3",children:"Withdrawn"}),(0,k.jsx)("option",{value:"4",children:"On Hold"}),(0,k.jsx)("option",{value:"2",children:"Completed"})]}):"Completed"===(null===(De=Gs[0])||void 0===De?void 0:De.projectStage)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("option",{value:"1",name:"inprogress",children:"In Progress"}),(0,k.jsx)("option",{value:"2",children:"Completed"})]}):"Withdrawn"===(null===(Ce=Gs[0])||void 0===Ce?void 0:Ce.projectStage)?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"1",children:"In Progress"}),(0,k.jsx)("option",{value:"3",children:"Withdrawn"}),(0,k.jsx)("option",{value:"4",children:"On Hold"}),(0,k.jsx)("option",{value:"2",children:"Completed"})]}):(0,k.jsx)("option",{value:"2"})})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectPhase",children:["Project Phase ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"project_phase",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Ze=Gs[0])||void 0===Ze?void 0:Ze.projectStage),className:"text",ref:function(e){co.current[16]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),Us.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.lkup_name==(null===(t=Gs[0])||void 0===t?void 0:t.projectPhase),children:[" ",e.lkup_name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"projectHealth",children:["Project Health ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"project_health_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(we=Gs[0])||void 0===we?void 0:we.projectStage),className:"text",ref:function(e){co.current[17]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"498",selected:"On Schedule"==(null===(Me=Gs[0])||void 0===Me?void 0:Me.projectHealth)?"498":"",children:"On Schedule"}),(0,k.jsx)("option",{value:"499",selected:"Potential Issues"==(null===(ke=Gs[0])||void 0===ke?void 0:ke.projectHealth)?"499":"",children:"Potential issues"}),(0,k.jsx)("option",{value:"500",selected:"Serious Issues"==(null===(Ie=Gs[0])||void 0===Ie?void 0:Ie.projectHealth)?"500":"",children:"Serious issues"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsxs)("label",{htmlFor:"deliverables",children:["Deliverables ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsxs)("select",{id:"deliverables",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Pe=Gs[0])||void 0===Pe?void 0:Pe.projectStage),className:"text",ref:function(e){co.current[18]=e},children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"Yes",selected:"Yes"==(null===(Te=Gs[0])||void 0===Te?void 0:Te.deliverables)?"Yes":"",children:"Yes"}),(0,k.jsx)("option",{value:"NO",selected:"No"==(null===(Ae=Gs[0])||void 0===Ae?void 0:Ae.deliverables)?"No":"",children:"No"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"poNumber",children:"PO Number"}),(0,k.jsxs)("select",{id:"poNumberId",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Ee=Gs[0])||void 0===Ee?void 0:Ee.projectStage),Value:null===(Re=Gs[0])||void 0===Re?void 0:Re.poNumber,children:[(0,k.jsx)("option",{value:"null",children:" <<Please Select>>"}),hl.map((function(e){var t;return(0,k.jsxs)("option",{value:e.id,selected:e.id==(null===(t=Gs[0])||void 0===t?void 0:t.poNumberId),children:[" ",e.name]})}))]})]}),(0,k.jsxs)("div",{className:"form-group col-md-2 mb-2",children:[(0,k.jsx)("label",{htmlFor:"sfEnagagementType",children:"SF Enagagement Type"}),(0,k.jsxs)("select",{id:"sf_eng_type_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Fe=Gs[0])||void 0===Fe?void 0:Fe.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:1357,selected:"New Persuit"==(null===(Ye=Gs[0])||void 0===Ye?void 0:Ye.sfEngagementType)?"2":"",children:"New Persuit"}),(0,k.jsx)("option",{value:1358,selected:"Stream"==(null===(Oe=Gs[0])||void 0===Oe?void 0:Oe.sfEngagementType)?"3":"",children:"Stream"})]})]}),(0,k.jsxs)("div",{className:"form-group col-md-6 mb-1",children:[(0,k.jsxs)("label",{htmlFor:"projectDescription",children:["Project Description / Business Case"," ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("div",{className:"textfield",ref:function(e){co.current[19]=e},children:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("textarea",{className:"form-control",id:"business_case",disabled:"Completed"==(null===(He=Gs[0])||void 0===He?void 0:He.projectStage),placeholder:!0,rows:3,required:!0,value:null===(Le=Gs[0])||void 0===Le?void 0:Le.business_case,onChange:function(e){return Fo(e)}})})})]}),(0,k.jsxs)("div",{className:"form-group col-md-6 mb-1",children:[(0,k.jsxs)("label",{htmlFor:"projectHealthComments",children:["Project Health Comments",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("div",{className:"textfield",ref:function(e){co.current[20]=e},children:(0,k.jsx)("textarea",{className:"form-control",id:"prj_health_comments",disabled:"Completed"==(null===(Be=Gs[0])||void 0===Be?void 0:Be.projectStage),placeholder:!0,rows:3,required:!0,value:null===(Ue=Gs[0])||void 0===Ue?void 0:Ue.prj_health_comments,onChange:function(e){return Fo(e)}})})]})]}),(0,k.jsxs)("div",{className:"row",children:[(0,k.jsx)("div",{className:"col-md-4 group mb-2 container-fluid   customCard",children:(0,k.jsxs)("div",{className:"group mb-0 customCard",children:[(0,k.jsxs)("h2",{children:[(0,k.jsx)(d.t_2,{})," Stake Holders"]}),(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsxs)("label",{className:"col-5",htmlFor:"deliveryManager ",children:["Delivery Manager"," ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"form-control disableField",disabled:!0,id:"DeliveryManager ",required:!0,Value:null===(qe=Bl[0])||void 0===qe?void 0:qe.DeliveryManager})})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsxs)("label",{className:"col-5",htmlFor:"primaryManager ",children:["Primary Manager",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("div",{className:"autoComplete-container ".concat("Completed"==(null===(Ve=Gs[0])||void 0===Ve?void 0:Ve.projectStage)?"disabledFieldStyles":"","  reactsearchautocomplete"),ref:function(e){co.current[21]=e},children:(0,k.jsx)(j.ReactSearchAutocomplete,{items:ta,type:"Text",name:"resource",id:"primaryManger",fuseOptions:{keys:["id","name"],includeScore:!1,threshold:.3},resultStringKeyName:"name",placeholder:"Type minimum 3 characters to get the list",inputSearchString:null===(ze=ta.find((function(e){var t;return e.userId===(null===(t=Yl[0])||void 0===t?void 0:t.user_id)})))||void 0===ze?void 0:ze.name,onSelect:function(e){Ol((function(t){var n=(0,l.Z)(t);return n[0].id=e.id,n}))},showIcon:!1})})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsxs)("label",{className:"col-5",htmlFor:"projectRequestor ",children:["Project Requestor"," ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"form-control disableField",disabled:!0,id:"DeliveryManager ",required:!0,Value:null===(Ge=Ql[0])||void 0===Ge?void 0:Ge.ProjectRequester})})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsxs)("label",{className:"col-5",htmlFor:"projectApprover ",children:["Project Approver"," ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"form-control disableField",disabled:!0,id:"DeliveryManager ",required:!0,Value:null===(Ke=zl[0])||void 0===Ke?void 0:Ke.ProjectApprover})})})]})})]})]})}),(0,k.jsx)("div",{className:"col-md-4 ",children:(0,k.jsxs)("div",{className:"group mb-0 customCard",children:[(0,k.jsxs)("h2",{children:[(0,k.jsx)(d.t_2,{})," Services Offered"]}),(0,k.jsx)("div",{className:"group-content row",children:(0,k.jsx)("div",{className:"transferTable",ref:function(e){co.current[22]=e},children:(0,k.jsx)(y.Z,{className:"transferTable",dataSource:Cl,targetKeys:ei,selectedKeys:ai,onChange:function(e){console.log(e),ti(e);var t=[];e.forEach((function(e){t.push(e)})),Ks((function(e){var n=(0,l.Z)(e);return n[0].servicesOfferedId=t.toString(),n})),console.log(t)},onSelectChange:function(e,t){li([].concat((0,l.Z)(e),(0,l.Z)(t)))},render:function(e){return e.title},disabled:"Completed"==(null===(We=Gs[0])||void 0===We?void 0:We.projectStage)})})})]})}),"25"==(null===(Qe=Gs[0])||void 0===Qe?void 0:Qe.contract)||"25"==(null===(Je=ca[0])||void 0===Je?void 0:Je.id)||"26"==(null===(Xe=Gs[0])||void 0===Xe?void 0:Xe.contract)||"26"==(null===($e=ca[0])||void 0===$e?void 0:$e.id)||"27"==(null===(et=Gs[0])||void 0===et?void 0:et.contract)||"278"==(null===(tt=ca[0])||void 0===tt?void 0:tt.id)||"28"==(null===(nt=Gs[0])||void 0===nt?void 0:nt.contract)||"28"==(null===(st=ca[0])||void 0===st?void 0:st.id)||"606"==(null===(at=Gs[0])||void 0===at?void 0:at.contract)||"606"==(null===(lt=ca[0])||void 0===lt?void 0:lt.id)||"752"==(null===(it=ca[0])||void 0===it?void 0:it.id)||"752"==(null===(ot=Gs[0])||void 0===ot?void 0:ot.contract)?(0,k.jsx)("div",{className:"col-md-4 group mb-2 container-fluid   customCard",children:(0,k.jsxs)("div",{className:"group mb-0 customCard",children:[(0,k.jsxs)("h2",{children:[(0,k.jsx)(d.t_2,{})," PCQA"]}),(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"deliveryManager ",children:"Facilitator"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("div",{className:"autoComplete-container ".concat("Completed"==(null===(rt=Gs[0])||void 0===rt?void 0:rt.projectStage)?"disabledFieldStyles":"","  reactsearchautocomplete"),children:(0,k.jsx)(j.ReactSearchAutocomplete,{items:ta,type:"Text",name:"resource",id:"facilitatorID",fuseOptions:{keys:["id","name"],includeScore:!1,threshold:.3},resultStringKeyName:"name",placeholder:"Type minimum 3 characters to get the list",inputSearchString:null===(ct=ta.find((function(e){var t;return e.id===(null===(t=Gs[0])||void 0===t?void 0:t.facilitatorID)})))||void 0===ct?void 0:ct.name,onSelect:function(e){console.log(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].facilitatorID=e.id,n}))},showIcon:!1})})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"primaryManager  ",children:"Client Email"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsx)("input",{type:"text",className:"form-control disableField",disabled:!0,id:"clientEmail ",required:!0,defaultValue:null===(dt=Gs[0])||void 0===dt?void 0:dt.clientEmail})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsxs)("label",{className:"col-5",htmlFor:"projectRequestor ",children:["Project Type ",(0,k.jsx)("span",{className:"error-text",children:"\xa0*"})]}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"pcqa_type",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(ut=Gs[0])||void 0===ut?void 0:ut.projectStage),className:"text",ref:function(e){co.current[24]=e},children:[(0,k.jsxs)("option",{value:"",children:[" ","<<Please Select>>"]}),Js.map((function(e){var t;return(0,k.jsx)("option",{value:e.id,selected:e.lkup_name==(null===(t=Gs[0])||void 0===t?void 0:t.projectType),children:e.lkup_name})}))]})})]})})]})]})}):""]}),(0,k.jsxs)("div",{className:"row",children:[(0,k.jsxs)("div",{className:"group mb-0 col-md-4 customCard",children:[(0,k.jsxs)("h2",{children:[" ",(0,k.jsx)(u.ok1,{})," Risk Factor Characteristics"]}),17==(null===(mt=Gs[0])||void 0===mt?void 0:mt.projCat)||18==(null===(pt=Gs[0])||void 0===pt?void 0:pt.projCat)||19==(null===(ht=Gs[0])||void 0===ht?void 0:ht.projCat)?(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"technicalComplexity",children:"Technical Complexity"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"tech_complexity_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(vt=Gs[0])||void 0===vt?void 0:vt.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(ft=Gs[0])||void 0===ft?void 0:ft.techComplexity)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(jt=Gs[0])||void 0===jt?void 0:jt.techComplexity)?"359":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(xt=Gs[0])||void 0===xt?void 0:xt.techComplexity)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(gt=Gs[0])||void 0===gt?void 0:gt.techComplexity)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"domainSpecificChallenges",children:"Domain Specific Challenges"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"dom_spec_challenge_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(yt=Gs[0])||void 0===yt?void 0:yt.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(Nt=Gs[0])||void 0===Nt?void 0:Nt.domSpecChallenge)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(bt=Gs[0])||void 0===bt?void 0:bt.domSpecChallenge)?"359":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(_t=Gs[0])||void 0===_t?void 0:_t.domSpecChallenge)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(St=Gs[0])||void 0===St?void 0:St.domSpecChallenge)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"skilledResourcesAvailability",children:"Skilled Resources Availability"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"skill_res_avail_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Dt=Gs[0])||void 0===Dt?void 0:Dt.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(Ct=Gs[0])||void 0===Ct?void 0:Ct.skillResAvail)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(Zt=Gs[0])||void 0===Zt?void 0:Zt.skillResAvail)?"358":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(wt=Gs[0])||void 0===wt?void 0:wt.skillResAvail)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(Mt=Gs[0])||void 0===Mt?void 0:Mt.skillResAvail)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"depdThirdPartySystems",children:"Dependencies On Third Party Systems"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"dep_third_party_sys_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(kt=Gs[0])||void 0===kt?void 0:kt.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(It=Gs[0])||void 0===It?void 0:It.depThirdPartySys)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(Pt=Gs[0])||void 0===Pt?void 0:Pt.depThirdPartySys)?"358":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(Tt=Gs[0])||void 0===Tt?void 0:Tt.depThirdPartySys)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(At=Gs[0])||void 0===At?void 0:At.depThirdPartySys)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"devpEnvironmentAvailability",children:"Development Environment Availability"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"dev_env_avail_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Et=Gs[0])||void 0===Et?void 0:Et.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(Rt=Gs[0])||void 0===Rt?void 0:Rt.devEnvAvail)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(Ft=Gs[0])||void 0===Ft?void 0:Ft.devEnvAvail)?"358":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(Yt=Gs[0])||void 0===Yt?void 0:Yt.devEnvAvail)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(Ot=Gs[0])||void 0===Ot?void 0:Ot.devEnvAvail)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"custEnvId",children:"Dependencies on customer/Customer Environment"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"cust_env_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Ht=Gs[0])||void 0===Ht?void 0:Ht.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(Lt=Gs[0])||void 0===Lt?void 0:Lt.custEnv)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(Bt=Gs[0])||void 0===Bt?void 0:Bt.custEnv)?"358":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(Ut=Gs[0])||void 0===Ut?void 0:Ut.custEnv)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(qt=Gs[0])||void 0===qt?void 0:qt.custEnv)?"360":"",children:"N/A"})]})})]})}),(0,k.jsx)("div",{className:" col-md-12 mb-2",children:(0,k.jsxs)("div",{className:"form-group row",children:[(0,k.jsx)("label",{className:"col-5",htmlFor:"profitabilityId",children:"Margin/Profitability"}),(0,k.jsx)("span",{className:"col-1",children:":"}),(0,k.jsx)("div",{className:"col-6",children:(0,k.jsxs)("select",{id:"profitability_id",onChange:function(e){return Eo(e)},disabled:"Completed"==(null===(Vt=Gs[0])||void 0===Vt?void 0:Vt.projectStage),children:[(0,k.jsx)("option",{value:"",children:" <<Please Select>>"}),(0,k.jsx)("option",{value:"357",selected:"High Risk"==(null===(zt=Gs[0])||void 0===zt?void 0:zt.profitability)?"357":"",children:"High Risk"}),(0,k.jsx)("option",{value:"359",selected:"Low Risk"==(null===(Gt=Gs[0])||void 0===Gt?void 0:Gt.profitability)?"358":"",children:"Low Risk"}),(0,k.jsx)("option",{value:"358",selected:"Moderate Risk"==(null===(Kt=Gs[0])||void 0===Kt?void 0:Kt.profitability)?"358":"",children:"Moderate Risk"}),(0,k.jsx)("option",{value:"360",selected:"N/A"==(null===(Wt=Gs[0])||void 0===Wt?void 0:Wt.profitability)?"360":"",children:"N/A"})]})})]})})]}):""]}),(0,k.jsxs)("div",{className:"group mb-0 col-md-8 customCard",children:[(0,k.jsxs)("h2",{children:[" ",(0,k.jsx)(d.t_2,{})," Project KPIs"]}),(0,k.jsxs)("table",{className:"table table-striped table-bordered  display",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{width:"15%",children:"KPI"}),(0,k.jsx)("th",{width:"8%",children:"Preliminary"}),(0,k.jsx)("th",{width:"13%",children:"Contracted"}),(0,k.jsx)("th",{width:"11%",children:"Planned"}),(0,k.jsx)("th",{width:"11%",children:"Actual"})]})}),(0,k.jsxs)("tbody",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{width:"8%",children:"Schedule"}),(0,k.jsxs)("td",{width:"13%",id:"cont_efforts",children:[null==(null===(Qt=Gs[0])||void 0===Qt?void 0:Qt.preStartDate)?" ":g()(null===(Jt=Gs[0])||void 0===Jt?void 0:Jt.preStartDate).format("DD-MMM-yyyy"),"to",null==(null===(Xt=Gs[0])||void 0===Xt?void 0:Xt.preEndDate)?" ":g()(null===($t=Gs[0])||void 0===$t?void 0:$t.preEndDate).format("DD-MMM-yyyy")]}),(0,k.jsx)("td",{width:"13%",id:"pln_efforts",children:(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)(b(),{id:"contStartDate",className:"",selected:pi,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",Value:null===(en=Gs[0])||void 0===en?void 0:en.contStartDate,onChange:function(e){hi(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].contStartDate=g()(e).format("yyyy-MM-DD"),n}))},disabled:"Completed"==(null===(tn=Gs[0])||void 0===tn?void 0:tn.projectStage),onKeyDown:function(e){e.preventDefault()}}),(0,k.jsx)(b(),{id:"contEndDate",className:"",selected:ji,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,Value:null===(nn=Gs[0])||void 0===nn?void 0:nn.contEndDate,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){xi(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].contEndDate=g()(e).format("yyyy-MM-DD"),n}))},disabled:"Completed"==(null===(sn=Gs[0])||void 0===sn?void 0:sn.projectStage),onKeyDown:function(e){e.preventDefault()}})]})}),(0,k.jsx)("td",{width:"11%",id:"ptd_efforts",children:(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)(b(),{id:"plandStartDate",className:"",selected:Ni,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){bi(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].plandStartDate=g()(e).format("yyyy-MM-DD"),n}))},maxDate:Ni,disabled:"Completed"==(null===(an=Gs[0])||void 0===an?void 0:an.projectStage),onKeyDown:function(e){e.preventDefault()}}),(0,k.jsx)(b(),{id:"plandEndDate",className:"",selected:Di,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",onChange:function(e){Ci(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].plandEndDate=g()(e).format("yyyy-MM-DD"),n}))},minDate:Di,disabled:"Completed"==(null===(ln=Gs[0])||void 0===ln?void 0:ln.projectStage),onKeyDown:function(e){e.preventDefault()}})]})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsxs)("div",{className:"group-content row",children:[(0,k.jsx)(b(),{id:"actStartDate",type:"text",selected:Mi,dateFormat:"dd-MMM-yyyy",showMonthDropdown:!0,showYearDropdown:!0,placeholderText:void 0===Mi?"Actual Start Date":"",onChange:function(e){ki(e),Ks((function(t){var n=(0,l.Z)(t);return n[0].actStartDate=g()(e).format("yyyy-MM-DD"),n}))},maxDate:Mi,disabled:"Completed"==(null===(on=Gs[0])||void 0===on?void 0:on.projectStage),onKeyDown:function(e){e.preventDefault()}}),(0,k.jsx)("input",{className:"col-6 disableField",type:"text",disabled:!0,placeholder:"Actual End Date",Value:""===$i?null===(null===(rn=Gs[0])||void 0===rn?void 0:rn.actEndDate)||void 0===(null===(cn=Gs[0])||void 0===cn?void 0:cn.actEndDate)?"":g()(null===(dn=Gs[0])||void 0===dn?void 0:dn.actEndDate).format("DD-MMM-yyyy"):null===$i?"":g()($i).format("DD-MMM-yyyy")})]})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:"Duration (Days)"}),(0,k.jsx)("td",{id:"cont_rev",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,defaultValue:null===(un=La[0])||void 0===un?void 0:un.preliminary_duration})})}),(0,k.jsx)("td",{id:"pln_rev",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,Value:Vi})})}),(0,k.jsx)("td",{id:"ptd_rev",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,Value:Wi})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,Value:null===(mn=La[0])||void 0===mn?void 0:mn.actual_duration})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{children:["FTE"," ",(0,k.jsx)(w.DAO,{className:"",title:"FTE=Effort/(Duration*8)"})]}),(0,k.jsx)("td",{id:"cont_dc",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},id:"priliminaryFte",className:"cancel",disabled:"Completed"==(null===(pn=Gs[0])||void 0===pn?void 0:pn.projectStage),type:"text",value:null==(null===(hn=Gs[0])||void 0===hn?void 0:hn.fte)?0:null===(vn=Gs[0])||void 0===vn?void 0:vn.fte})})}),(0,k.jsx)("td",{id:"pln_dc",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},className:"disableField cancel",id:"contractFte",type:"text",disabled:!0,value:kl})})}),(0,k.jsx)("td",{id:"ptd_dc",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,value:Al})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField cancel",type:"text",disabled:!0,value:null==(null===(fn=La[0])||void 0===fn?void 0:fn.actual_fte)?0:((null===(jn=La[0])||void 0===jn?void 0:jn.actual_fte)+.01).toFixed(2)})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:"Effort (Hrs)"}),(0,k.jsx)("td",{id:"cont_oc",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[25]=e},children:(0,k.jsx)("input",{className:"cancel",id:"priliminaryEfforts",type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(xn=Gs[0])||void 0===xn?void 0:xn.projectStage),Value:"number"===typeof Ia.priliminaryEfforts?Ia.priliminaryEfforts.toFixed(2):""===Ia.priliminaryEfforts?"0.00":null===Ia.priliminaryEfforts?"N/A":Ia.priliminaryEfforts})})}),(0,k.jsx)("td",{id:"ptd_oc",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[26]=e},children:(0,k.jsx)("input",{id:"contractedEfforts",className:"cancel",type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(gn=Gs[0])||void 0===gn?void 0:gn.projectStage),Value:"number"===typeof Ia.contractedEfforts?Ia.contractedEfforts.toFixed(2):""===Ia.contractedEfforts?"0.00":null===Ia.contractedEfforts?"N/A":Ia.contractedEfforts})})}),(0,k.jsx)("td",{id:"atd_oc",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField cancel",type:"text",disabled:!0,Value:null==(null===(yn=La[0])||void 0===yn?void 0:yn.planned_hours)?0:null===(Nn=La[0])||void 0===Nn||null===(bn=Nn.planned_hours)||void 0===bn?void 0:bn.toLocaleString("en-IN")})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField cancel",type:"text",disabled:!0,Value:null==(null===(_n=La[0])||void 0===_n?void 0:_n.actual_hours)?0:null===(Sn=La[0])||void 0===Sn||null===(Dn=Sn.actual_hours)||void 0===Dn?void 0:Dn.toLocaleString("en-IN")})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:"Revenue"}),(0,k.jsx)("td",{id:"revenue",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[27]=e},children:(0,k.jsx)("input",{id:"revenue",type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(Cn=Gs[0])||void 0===Cn?void 0:Cn.projectStage),Value:"number"===typeof Va.revenue?Va.revenue.toFixed(2):""===Va.revenue?"0.00":null===Va.revenue?"N/A":Va.revenue})})}),(0,k.jsx)("td",{id:"pln_margin",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[28]=e},children:(0,k.jsx)("input",{id:"contractedRevenue",className:"cancel",type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(Zn=Gs[0])||void 0===Zn?void 0:Zn.projectStage),Value:"number"===typeof Va.contractedRevenue?Va.contractedRevenue.toFixed(2):""===Va.contractedRevenue?"0.00":null===Va.contractedRevenue?"N/A":Va.contractedRevenue})})}),(0,k.jsx)("td",{id:"ptd_margin",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},value:""==(null===(wn=La[0])||void 0===wn?void 0:wn.planned_revenue)||null==(null===(Mn=La[0])||void 0===Mn?void 0:Mn.planned_revenue)?0:null===(kn=La[0])||void 0===kn||null===(In=kn.planned_revenue)||void 0===In?void 0:In.toLocaleString("en-IN")})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,value:null==(null===(Pn=La[0])||void 0===Pn?void 0:Pn.actual_revenue)?0:null===(Tn=La[0])||void 0===Tn||null===(An=Tn.actual_revenue)||void 0===An?void 0:An.toLocaleString("en-IN")})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:"Resource Direct Cost"}),(0,k.jsx)("td",{id:"cont_dur",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[29]=e},children:(0,k.jsx)("input",{className:"cancel",id:"priliminaryRDC",name:"priliminaryRDC",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(En=Gs[0])||void 0===En?void 0:En.projectStage),type:"text",Value:"number"===typeof Wa.priliminaryRDC?Wa.priliminaryRDC.toFixed(2):""===Wa.priliminaryRDC?"0.00":null===Wa.priliminaryRDC?"N/A":Wa.priliminaryRDC})})}),(0,k.jsx)("td",{id:"pln_dur",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[30]=e},children:(0,k.jsx)("input",{id:"ContractRDC",type:"text",className:"cancel",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(Rn=Gs[0])||void 0===Rn?void 0:Rn.projectStage),Value:"number"===typeof Wa.ContractRDC?Wa.ContractRDC.toFixed(2):""===Wa.ContractRDC?"0.00":null===Wa.ContractRDC?"N/A":Wa.ContractRDC})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField cancel",type:"text",disabled:!0,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},Value:null==(null===(Fn=La[0])||void 0===Fn?void 0:Fn.planned_direct_cost)?0:null===(Yn=La[0])||void 0===Yn||null===(On=Yn.planned_direct_cost)||void 0===On?void 0:On.toLocaleString("en-IN")})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},value:null==(null===(Hn=La[0])||void 0===Hn?void 0:Hn.actual_direct_cost)?0:null===(Ln=La[0])||void 0===Ln||null===(Bn=Ln.actual_direct_cost)||void 0===Bn?void 0:Bn.toLocaleString("en-IN")})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:"Other Cost"}),(0,k.jsx)("td",{id:"cont_dur",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[31]=e},children:(0,k.jsx)("input",{id:"priliminaryOtherCost",className:"cancel",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(Un=Gs[0])||void 0===Un?void 0:Un.projectStage),type:"text",Value:"number"===typeof nl.priliminaryOtherCost?nl.priliminaryOtherCost.toFixed(2):""===nl.priliminaryOtherCost?"0.00":null===nl.priliminaryOtherCost?"N/A":nl.priliminaryOtherCost})})}),(0,k.jsx)("td",{id:"pln_dur",children:(0,k.jsx)("div",{className:"cancel",ref:function(e){co.current[32]=e},children:(0,k.jsx)("input",{id:"contarctOtherCost",className:"cancel",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},disabled:"Completed"==(null===(qn=Gs[0])||void 0===qn?void 0:qn.projectStage),type:"text",Value:"number"===typeof nl.contarctOtherCost?nl.contarctOtherCost.toFixed(2):""===nl.contarctOtherCost?"0.00":null===nl.contarctOtherCost?"N/A":nl.contarctOtherCost})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},value:null==(null===(Vn=La[0])||void 0===Vn?void 0:Vn.planned_other_cost)?0:null===(zn=La[0])||void 0===zn||null===(Gn=zn.planned_other_cost)||void 0===Gn?void 0:Gn.toLocaleString("en-IN")})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{className:"disableField",type:"text",disabled:!0,onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},value:null==(null===(Kn=La[0])||void 0===Kn?void 0:Kn.actual_other_cost)?0:null===(Wn=La[0])||void 0===Wn||null===(Qn=Wn.actual_other_cost)||void 0===Qn?void 0:Qn.toLocaleString("en-IN")})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{children:["Gross Margin"," ",(0,k.jsx)(w.DAO,{className:"",title:"GrossMargin=Revenue-(RDC+OC)"})]}),(0,k.jsx)("td",{id:"cont_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{disabled:!0,className:"disableField",type:"text",onChange:function(e){var t=e.target.value;/^[0-9]*\.?[0-9]*$/.test(t)||(e.target.value=t.replace(/[^0-9.]/g,"")),Ro(e)},value:il})})}),(0,k.jsx)("td",{id:"pln_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:xl})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:null==(null===(Jn=La[0])||void 0===Jn?void 0:Jn.planned_revenue)?di.textContent+" 0":di.textContent+" "+(null===(Xn=(null===($n=La[0])||void 0===$n?void 0:$n.planned_revenue)-((null===(es=La[0])||void 0===es?void 0:es.planned_direct_cost)+(null===(ts=La[0])||void 0===ts?void 0:ts.planned_other_cost)))||void 0===Xn?void 0:Xn.toLocaleString("en-IN"))})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:null==(null===(ns=La[0])||void 0===ns?void 0:ns.actual_revenue)?di.textContent+" 0":di.textContent+" "+(null===(ss=(null===(as=La[0])||void 0===as?void 0:as.actual_revenue)-((null===(ls=La[0])||void 0===ls?void 0:ls.actual_direct_cost)+(null===(is=La[0])||void 0===is?void 0:is.actual_other_cost)))||void 0===ss?void 0:ss.toLocaleString("en-IN"))})})})]}),(0,k.jsxs)("tr",{children:[(0,k.jsxs)("td",{children:["GM %"," ",(0,k.jsx)(w.DAO,{className:"",title:"GM %=(Revenue-(RDC+OC)/Revenue)*100"})]}),(0,k.jsx)("td",{id:"cont_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:dl})})}),(0,k.jsx)("td",{id:"pln_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:bl})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:null==(null===(os=La[0])||void 0===os?void 0:os.planned_revenue)?"NA":null===(rs=Math.round(100*((null===(cs=La[0])||void 0===cs?void 0:cs.planned_revenue)-((null===(ds=La[0])||void 0===ds?void 0:ds.planned_direct_cost)+(null===(us=La[0])||void 0===us?void 0:us.planned_other_cost)))/(null===(ms=La[0])||void 0===ms?void 0:ms.planned_revenue)*100)/100)||void 0===rs?void 0:rs.toLocaleString("en-IN")})})}),(0,k.jsx)("td",{id:"ptd_dur",children:(0,k.jsx)("div",{children:(0,k.jsx)("input",{type:"text",className:"disableField",disabled:!0,value:null==(null===(ps=La[0])||void 0===ps?void 0:ps.actual_revenue)?"NA":null===(hs=Math.round(100*((null===(vs=La[0])||void 0===vs?void 0:vs.actual_revenue)-((null===(fs=La[0])||void 0===fs?void 0:fs.actual_direct_cost)+(null===(js=La[0])||void 0===js?void 0:js.actual_other_cost)))/(null===(xs=La[0])||void 0===xs?void 0:xs.actual_revenue)*100)/100)||void 0===hs?void 0:hs.toLocaleString("en-IN")})})})]})]})]})]})]}),(0,k.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:[(0,k.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){return function(){var e,t,n,s,a,l,i,o,r,c,d,u,m,p,h,f,j,x,g,y,N,b,S,D,C,Z,w,M,k,I,P,T,A,E,R;if(go.current=new AbortController,(0,_.Z)(co))return Yi(!1),void Ai(!0);ro(!1),v()({method:"post",url:Ss+"/ProjectMS/ProjectScopeChange/projectEdit",signal:go.current.signal,data:{projectId:null===(e=Gs[0])||void 0===e?void 0:e.id,ProjectScope:null===(t=Gs[0])||void 0===t?void 0:t.projectScopeId,revenue:Va.revenue,facilitator:null===(n=Gs[0])||void 0===n?void 0:n.facilitatorID,PcqaType:null===(s=Gs[0])||void 0===s?void 0:s.pcqa_type,subPractice:null===(a=Gs[0])||void 0===a?void 0:a.subPractice,divisionId:Gs[0].division_id,engagementId:Gs[0].engagementId,EngagementType:null===(l=pa[0])||void 0===l?void 0:l.id,effortTypeId:Gs[0].effort_type_id,teamLocationId:Gs[0].team_location_id,customerId:Gs[0].customer_id,isPrjStatus:null===(i=Gs[0])||void 0===i?void 0:i.is_prj_status,projectPhase:null===(o=Gs[0])||void 0===o?void 0:o.project_phase,projectHealthId:null===(r=Gs[0])||void 0===r?void 0:r.project_health_id,PoNumber:null===(c=Gs[0])||void 0===c?void 0:c.poNumberId,SfEngTypeId:null===(d=Gs[0])||void 0===d?void 0:d.sf_eng_type_id,BusinessCase:null===(u=Gs[0])||void 0===u?void 0:u.business_case,PrjHealthComments:null===(m=Gs[0])||void 0===m?void 0:m.prj_health_comments,primaryManger:null===(p=Yl[0])||void 0===p?void 0:p.id,servicesOfferedId:null===(h=Gs[0])||void 0===h?void 0:h.servicesOfferedId,expenseBillable:null===(f=Gs[0])||void 0===f?void 0:f.expenseBillable,PrjCrgId:null===(j=Gs[0])||void 0===j?void 0:j.pcrgsId,clientEmail:null===(x=Gs[0])||void 0===x?void 0:x.clientEmail,complexityId:null===(g=Gs[0])||void 0===g?void 0:g.tech_complexity_id,domSpecChallengeId:null===(y=Gs[0])||void 0===y?void 0:y.dom_spec_challenge_id,skillResAvailId:null===(N=Gs[0])||void 0===N?void 0:N.skill_res_avail_id,depThirdPartySysId:null===(b=Gs[0])||void 0===b?void 0:b.dep_third_party_sys_id,devEnvAvailId:null===(S=Gs[0])||void 0===S?void 0:S.dev_env_avail_id,custEnvId:null===(D=Gs[0])||void 0===D?void 0:D.cust_env_id,profitabilityId:null===(C=Gs[0])||void 0===C?void 0:C.profitability_id,contStartDate:null===(Z=Gs[0])||void 0===Z?void 0:Z.contStartDate,contEndDate:null===(w=Gs[0])||void 0===w?void 0:w.contEndDate,plannedStartDt:null===(M=Gs[0])||void 0===M?void 0:M.plandStartDate,plannedEndDt:null===(k=Gs[0])||void 0===k?void 0:k.plandEndDate,actStartDate:null===(I=Gs[0])||void 0===I?void 0:I.actStartDate,actEndDate:$i,loggedId:_s,holidayCalendarId:Gs[0].holiday_calendar_id,weekelyCalenderId:Gs[0].week_calendar_id,projectExecMethodId:Gs[0].project_exec_method_id,projectCode:Gs[0].projectCode,projectName:Gs[0].projectName,projectdivisionId:"0",typContractTermsCatId:null===(P=ca[0])||void 0===P?void 0:P.id,typProjectCatId:Gs[0].projCat,deliverables:null===(T=Gs[0])||void 0===T?void 0:T.deliverables,projectStage:null===(A=Gs[0])||void 0===A?void 0:A.is_prj_status,typSchedulingModeId:Gs[0].typ_scheduling_mode_id,typTimeEntryModeId:Gs[0].typ_time_entry_mode_id,priliminaryFte:Gs[0].fte,priliminaryGM:dl,priliminaryGrossMargin:il,priliminaryRDC:Wa.priliminaryRDC,priliminaryOtherCost:nl.priliminaryOtherCost,priliminaryEfforts:Ia.priliminaryEfforts,contractedRevenue:Va.contractedRevenue,ContractGM:xl,ContractGrossMargin:bl,contarctOtherCost:nl.contarctOtherCost,ContractRDC:Wa.ContractRDC,contractFte:null===(E=La[0])||void 0===E?void 0:E.contracted_fte,contractedEfforts:Ia.contractedEfforts,unitOfMeasurement:null===(R=Gs[0])||void 0===R?void 0:R.unit_of_measure},headers:{"Content-Type":"application/json"}}).then((function(e){e.data,ro(!1),Ai(!1),Yi(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){Yi(!1);try{gs("Project Overview")}catch(e){console.error("Navigation error:",e)}}),2e3)}))}()},children:[(0,k.jsx)(w.TvB,{})," Save"]}),(0,k.jsxs)("button",{className:"btn btn-secondary",onClick:function(){yo(),Do(),Mo(),Zo(),Io(),Co()},children:[(0,k.jsx)(m.sQZ,{fontSize:"11px"})," Cancel"]})]})]}),oo?(0,k.jsx)(M.Z,{handleAbort:function(){go.current&&go.current.abort(),ro(!1)}}):"",so?(0,k.jsx)(I,{popup:so,setPopup:ao,handleDateUpdate:function(){var e=new Date,t=g()(e).format("YYYY-MM-DD");eo(t)},handleNo:function(){eo(null)},popUpValue:po,setStgValue:xo,stgValue:jo}):""]})}},85628:function(e,t,n){var s=n(74165),a=n(15861),l=n(93433),i=n(4942),o=n(29439),r=n(1413),c=n(72791),d=n(6748),u=n(99259),m=n(66934),p=n(12065),h=n(65902),v=n(99651),f=n(41523),j=n(56125),x=n(27336),g=n(56355),y=n(3555),N=(n(74569),n(34831)),b=(n(23421),n(28182)),_=n(64554),S=n(19977),D=n(20890),C=n(80184);N.N.baseUrl;function Z(e){return(0,C.jsx)(u.Z,(0,r.Z)((0,r.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,C.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function w(e){return(0,C.jsx)(u.Z,(0,r.Z)((0,r.Z)({className:"close",fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,C.jsx)("path",{d:"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z"})}))}function M(e){return(0,C.jsx)(u.Z,(0,r.Z)((0,r.Z)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:(0,C.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function k(e){var t=(0,x.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,C.jsx)(x.q.div,{style:t,children:(0,C.jsx)(j.Z,(0,r.Z)({},e))})}(0,y.td)([]);var I=c.memo((function(e){var t=e.defaultExpandedRows,n=e.data,u=e.setFlag,j=(e.flag,e.setTableData),x=e.projectName,y=(e.hierarchyCount,(0,c.useState)("")),N=(0,o.Z)(y,2),I=(N[0],N[1]),P=function(e,t){t=(0,r.Z)({id:"id",parentId:"parent",children:"subrows"},t);var n={},s=[],a=t.children;return e.forEach((function(e){var s=e[t.id],l=e[t.parentId];n[s]=(0,r.Z)((0,r.Z)((0,i.Z)({},a,[]),e),n[s]),n[l]=n[l]||(0,i.Z)({},a,[]),n[l][a].push(n[s])})),Object.values(n).forEach((function(e){"undefined"===typeof e[t.id]&&s.push.apply(s,(0,l.Z)(e[a]))})),s}(n),T=new Date(x.projectFromDate),A=new Date(T),E="".concat(A.getDate()," ").concat(A.toLocaleString("default",{month:"short"})," ").concat(A.getFullYear()),R=new Date(x.projectToDate),F=new Date(R),Y="".concat(F.getDate()," ").concat(F.toLocaleString("default",{month:"short"})," ").concat(F.getFullYear()),O=document.getElementsByClassName("iconContainer");(0,c.useEffect)((function(){setTimeout((function(){H()}),500);document.getElementsByClassName("MuiTreeView-root hierarchyTree");document.addEventListener("click",(function(e){setTimeout((function(){var e,t,n=Array.from(document.getElementsByClassName("iconContainer"));Array.from(n[0].children).forEach((function(e){"SPAN"==e.tagName&&e.remove()})),"SPAN"!=(null===(e=O[0])||void 0===e||null===(t=e.children[1])||void 0===t?void 0:t.tagName)&&H()}),500)}),!0)}),[]);var H=function(){var e=document.createElement("span");e.innerHTML='<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="hierarchyIcons folder" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"></path></svg>',O[0].appendChild(e)},L=c.forwardRef((function(e,t){var n,l=e.classes,o=e.className,r=e.label,c=e.nodeId,d=e.icon,m=e.expansionIcon,p=e.displayIcon,v=(0,h.Z)(c),f=v.disabled,x=v.expanded,g=v.selected,y=v.focused,N=v.handleExpansion,_=v.handleSelection,Z=v.preventSelection,w=d||m||p,M=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,l,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(t),console.log(t),a=null===(n=c)||void 0===n?void 0:n.split("_")[2],l=null===n||void 0===n?void 0:n.split("_")[0],i=null===n||void 0===n?void 0:n.split("_")[1],(0,S.Z)(a,l,i,I,u,j);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)("div",{className:(0,b.default)(o,l.root,(n={},(0,i.Z)(n,l.expanded,x),(0,i.Z)(n,l.selected,g),(0,i.Z)(n,l.focused,y),(0,i.Z)(n,l.disabled,f),n)),onMouseDown:function(e){Z(e)},ref:t,children:[(0,C.jsx)("div",{onClick:function(e){N(e)},className:l.iconContainer,children:w}),(0,C.jsx)(D.Z,{onClick:M,component:"div",children:r})]})})),B=(0,m.ZP)((function(e){var t,s;return(0,C.jsx)("div",{className:"hierarchy tree",children:(0,c.createElement)(v.Z,(0,r.Z)((0,r.Z)({ContentComponent:L},e),{},{key:String(e.node.id),nodeId:String(e.node.id),icon:(s=null===(t=e.node)||void 0===t?void 0:t.id,n.find((function(e){return e.parent==s}))?"":(0,C.jsx)(w,{})),label:(0,C.jsxs)(_.Z,{sx:{display:"flex",alignItems:"center",p:.5,pr:0},children:[(0,C.jsx)(_.Z,{color:"inherit",sx:{mr:1}}),(0,C.jsx)(D.Z,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:(0,C.jsxs)("span",{style:{color:e.node.text.includes("span")?e.node.text.split('"')[1].split(":")[1]:"",fontWeight:e.node.parent.includes("#")?"bold":""},children:[(0,C.jsxs)("span",{style:{fontWeight:e.node.text.includes("b")?"bold":""},children:[(0,C.jsx)(g.q1E,{}),"\xa0 \xa0",e.node.text.includes("span")?e.node.text.split('">')[1].split("(")[0].replaceAll("<b>","").replaceAll("</b>",""):e.node.text.split("(")[0].replaceAll("<b>","").replaceAll("</b>","")]}),(0,C.jsxs)("span",{children:[" ",void 0!=e.node.text.split("(")[1]?e.node.text.split("(")[1].includes("span")?"("+e.node.text.split("(")[1].replaceAll("</span>",""):"("+e.node.text.split("(")[1]:""]})]})})]}),TransitionComponent:k,title:void 0!=e.node.text.split("(")[1]&&e.node.text.split("(")[1].includes("span")?"":"From Date    : "+E+"\nTo Date         : "+Y}),Array.isArray(e.node.subrows)?e.node.subrows.map((function(e){return U(e)})):"")})}))((function(e){var t,n=e.theme;return t={},(0,i.Z)(t,"& .".concat(f.Z.iconContainer),{"& .close":{opacity:.3}}),(0,i.Z)(t,"& .".concat(f.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,p.Fq)(n.palette.text.primary,.4))}),t})),U=function(e){return(0,C.jsx)("div",{children:(0,C.jsx)(B,{node:e})})};return(0,C.jsx)("div",{style:{maxHeight:"400px",minHeight:"500px",overflowY:"auto"},children:(0,C.jsx)(d.Z,{"aria-label":"rich object",defaultExpanded:[t],defaultParentIcon:(0,C.jsx)("div",{className:"iconContainer",children:(0,C.jsx)(Z,{className:"hierarchyIcons"})}),defaultCollapseIcon:(0,C.jsx)("div",{className:"iconContainer",children:(0,C.jsx)(Z,{className:"hierarchyIcons"})}),defaultExpandIcon:(0,C.jsx)("div",{className:"iconContainer",children:(0,C.jsx)(M,{className:"hierarchyIcons"})}),defaultEndIcon:(0,C.jsx)(g.q1E,{className:"hierarchyIcons user"}),sx:{"& .css-1g86id8-MuiTreeItem-content .MuiTreeItem-label":{width:"auto",minwidth:0}},className:"hierarchyTree",children:U(P[0])})})}),(function(e,t){return e.hierarchyCount===t.hierarchyCount}));t.Z=I},24205:function(e,t,n){var s=n(4942),a=n(1413),l=n(29439),i=n(72791),o=n(63521),r=n(80184);t.Z=function(e){var t=e.riskDetails,n=e.getData,c=e.setFormData,d=(e.editedData,e.formEditData),u=e.onChangeHandler,m=e.refArr,p=(e.setUsername,e.name),h=e.id,v=e.value,f=e.onClear,j=e.inputSearchString,x=(0,i.useState)([]),g=(0,l.Z)(x,2),y=g[0];return g[1],(0,i.useEffect)((function(){}),[y]),(0,i.useEffect)((function(){}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"autoComplete-container",children:"UpdateBillingRate"==v?(0,r.jsx)(o.ReactSearchAutocomplete,{items:t,type:"Text",name:p,inputSearchString:null===d||void 0===d?void 0:d.assigned_to,id:h,className:"err",riskDetails:t,getData:n,onClear:f,placeholder:"Type minimum 3 characters",onChange:function(e){u(e),console.log("789------------------------")},onSelect:function(e){c((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},p,e.id))})),c((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},"Resname",e.name))}))},showIcon:!1}):"EngagementS"==v?(0,r.jsx)(o.ReactSearchAutocomplete,{items:t,type:"Text",name:p,inputSearchString:null===d||void 0===d?void 0:d.assigned_to,id:h,className:"err",riskDetails:t,getData:n,onClear:function(e){c((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,s.Z)({},p,""))})),console.log(p)},placeholder:"Type minimum 3 characters",onChange:function(e){u(e)},onSelect:function(e){c((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},p,e.id))}))},showIcon:!1,showNoResults:!0,showNoResultsText:"<<ALL>>"}):(0,r.jsx)("div",{className:"auto autocomplete",id:"auto",ref:function(e){void 0!=m&&(m.current[0]=e)},children:(0,r.jsx)(o.ReactSearchAutocomplete,{items:t,type:"Text",name:p,placeholder:"Type minimum 3 characters",inputSearchString:j,id:h,className:"err",onClear:f,riskDetails:t,getData:n,onChange:function(e){u(e),console.log("123---------------")},onSelect:function(e){c((function(t){return(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},p,e.id))}))},showIcon:!1})})}),(0,r.jsx)("span",{children:y.name})]})}},93867:function(){}}]);
//# sourceMappingURL=6662.7aac2b14.chunk.js.map