"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1934],{91934:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var a=s(74165),n=s(15861),r=s(4942),l=s(1413),c=s(29439),i=s(72791),o=s(56355),d=s(59513),u=s.n(d),m=(s(68639),s(78983)),h=s(74569),x=s.n(h),f=s(72426),p=s.n(f),y=s(34831),j=s(32125),N=s(7692),g=s(83854),D=s(87890),v=s(37145),M=s(1063),S=(s(41980),s(39122),s(31896),s(81975),s(25103)),b=(s(17153),s(80184));var w=function(e){var t,s=e.data,a=e.rows,n=e.setCheckedData,r=e.setSelectedData,o=e.checkboxSelect,d=e.setCheckboxSelect,u=e.dataAccess,m=(0,i.useState)([]),h=(0,c.Z)(m,2),x=h[0],f=h[1],p=(0,i.useState)([]),y=(0,c.Z)(p,2),j=y[0],N=y[1],g=(0,i.useState)([]),w=(0,c.Z)(g,2),Z=w[0],C=w[1];(0,i.useEffect)((function(){f(JSON.parse(JSON.stringify(s)))}),[s]),(0,i.useEffect)((function(){x.length>0&&(N(x[0]),C(x.splice(1)))}),[x]),(0,i.useEffect)((function(){}),[j]),(0,i.useEffect)((function(){}),[Z]);var k={contains:{value:null,matchMode:D.a6.CONTAINS}},E=(0,i.useState)({global:k.contains}),T=(0,c.Z)(E,2),F=T[0],B=T[1];(0,i.useEffect)((function(){B({global:k.contains})}),[j]);var P=(0,i.useState)(""),_=(0,c.Z)(P,2),O=_[0],A=_[1],R=function(e){var t=e.target.value,s=(0,l.Z)({},F);s.global.value=t,B(s),A(t)},Y=(0,b.jsxs)("div",{className:"flex justify-content-between",children:[(0,b.jsx)("span",{}),(0,b.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,b.jsx)("i",{className:"pi pi-search"}),(0,b.jsx)(S.o,{defaultValue:O,onChange:R,placeholder:"Keyword Search",style:{textAlign:"center",verticalAlign:"middle"}})]})]}),q=null===(t=Object.keys(j))||void 0===t?void 0:t.map((function(e,t){var s,a;return a=e,s=function(e){return(0,b.jsx)("div",{className:"ellipsis",title:"".concat(e[a]),children:""==e[a]||null==e[a]?"NA":e[a]})},(0,b.jsx)(M.s,{sortable:!0,body:s,field:e,header:j[e]},e)}));return(0,b.jsx)("div",{className:"darkHeader",children:Object.keys(j).length>0&&(0,b.jsxs)(v.w,{className:" primeReactDataTable",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:Z,paginator:!0,showGridlines:!0,rows:a,dataKey:"id",filters:F,responsiveLayout:"scroll",header:Y,emptyMessage:"No Data found.",selection:o,onSelectionChange:function(e){return function(e){var t=e.value,s=t.map((function(e){return e.id})),a=t.map((function(e){return e.status}));r(a),n(s),d(e.value)}(e)},children:[1e3===u&&(0,b.jsx)(M.s,{selectionMode:"multiple",className:"align center"}),q]})})},Z=s(78820),C=s(72920),k=s(38262),E=s(70828);var T=function(e){var t=(0,i.useState)([]),s=(0,c.Z)(t,2),d=s[0],h=s[1],f=(0,i.useState)([]),D=(0,c.Z)(f,2),v=D[0],M=D[1],S=(0,i.useState)([]),T=(0,c.Z)(S,2),F=T[0],B=T[1],P=(0,i.useState)({prjId:"",TsName:"",StartDt:"",EndDt:"",month:""}),_=(0,c.Z)(P,2),O=_[0],A=_[1],R=(0,i.useState)(),Y=(0,c.Z)(R,2),q=Y[0],W=Y[1],I=(0,i.useState)(),L=(0,c.Z)(I,2),G=L[0],U=L[1],z=(0,i.useState)("null"),H=(0,c.Z)(z,2),V=H[0],J=H[1],K=(0,i.useState)(!1),X=(0,c.Z)(K,2),Q=X[0],$=X[1],ee=(0,i.useState)(o.UdN),te=(0,c.Z)(ee,2),se=te[0],ae=te[1],ne=(0,i.useState)([]),re=(0,c.Z)(ne,2),le=re[0],ce=re[1],ie=(0,i.useState)(!1),oe=(0,c.Z)(ie,2),de=oe[0],ue=oe[1],me=(0,i.useState)(!1),he=(0,c.Z)(me,2),xe=he[0],fe=he[1],pe=(0,i.useState)([]),ye=(0,c.Z)(pe,2),je=ye[0],Ne=ye[1],ge=(0,i.useState)(!1),De=(0,c.Z)(ge,2),ve=De[0],Me=De[1],Se=(0,i.useState)(!1),be=(0,c.Z)(Se,2),we=be[0],Ze=be[1],Ce=(0,i.useState)(!1),ke=(0,c.Z)(Ce,2),Ee=ke[0],Te=ke[1],Fe=(0,i.useState)(!0),Be=(0,c.Z)(Fe,2),Pe=Be[0],_e=Be[1],Oe=(0,i.useRef)(null),Ae=localStorage.getItem("resId"),Re=(0,i.useState)([]),Ye=(0,c.Z)(Re,2),qe=Ye[0],We=Ye[1],Ie=y.N.baseUrl,Le=(0,i.useRef)([]),Ge=new Date,Ue=new Date(Ge.getFullYear(),Ge.getMonth(),1),ze=p()(Ue).format("yyyy-MM-DD"),He=null==q?ze:p()(q).format("yyyy-MM-DD"),Ve=new Date(Ge.getFullYear(),Ge.getMonth()+1,0),Je=p()(Ve).format("yyyy-MM-DD"),Ke="Monthly"==V?p()(q).endOf("month").format("yyyy-MM-DD"):null==G?Je:p()(G).format("yyyy-MM-DD"),Xe=(0,i.useState)([]),Qe=(0,c.Z)(Xe,2),$e=Qe[0],et=Qe[1];console.log($e);var tt=function(){He=p()(q).startOf("month").format("yyyy-MM-DD"),Ke=p()(q).endOf("month").format("yyyy-MM-DD"),fe(!1),Oe.current=new AbortController,x()({method:"Get",url:Ie+"/timeandexpensesms/fixedprice/gettabledata?fromdate=".concat(He,"&todate=").concat(Ke),signal:Oe.current.signal}).then((function(e){var t=e.data,s=[{Department:"Department",Customer:"Customer",Project:"Project",status:"Status"}].concat(t);ce(s),setTimeout((function(){fe(!1)}),1e3)}))};(0,i.useEffect)((function(){tt()}),["Monthly"==V&&null!=q?q:" "]),(0,i.useEffect)((function(){tt()}),[]);var st=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(){var t,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Le.current.filter((function(e){return null!=e})),Le.current=t,!(s=(0,j.Z)(Le))&&(0!=v.length&&$(!Q)),!s){e.next=10;break}return Me(!0),setTimeout((function(){Me(!1)}),3e3),e.abrupt("return");case 10:if(0!=v.length){e.next=16;break}return Te(!0),setTimeout((function(){Te(!1)}),3e3),e.abrupt("return");case 16:ae(Q?o.UdN:o.NR5),O.prjId=v.toString(),O.EndDt=p()(q).endOf("month").format("yyyy-MM-DD"),x()({method:"post",url:Ie+"/timeandexpensesms/fixedprice/posttimesheet",data:O}).then((function(e){Ne(e.data[0].message.split("-")[1]),ue(!0),setTimeout((function(){ue(!1)}),3e3),h([]),je.includes("already exists")||tt()}));case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){x()({method:"GET",url:Ie+"/CommonMS/master/getMenus?loggedUserId=".concat(Ae)}).then((function(e){var t=e.data;t.forEach((function(e){"Time & Expenses"===e.display_name&&We([e])}));var s=t.find((function(e){return"Time & Expenses"===e.display_name})).subMenus.find((function(e){return"Fixed Price - Create"===e.display_name})),a=s?s.access_level:null;console.log("Access Level:",a),et(a)}))}),[]),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"col-md-12",children:[we&&"pending"==F?(0,b.jsxs)("div",{className:"statusMsg error",children:[(0,b.jsx)(Z.CSE,{}),"Cannot delete billing timesheet in pending status"]}):we?(0,b.jsxs)("div",{className:"statusMsg success",children:[(0,b.jsx)(N.hXj,{size:"1.4em",color:"green",strokeWidth:{width:"100px"}}),"\xa0","Billing TimeSheet Deleted Successfully"]}):Ee?(0,b.jsxs)("div",{className:"statusMsg error",children:[(0,b.jsx)(Z.CSE,{}),"Please Select Project"]}):ve?(0,b.jsxs)("div",{className:"statusMsg error",children:[(0,b.jsx)(Z.CSE,{}),"Please select the valid values for highlighted fields"]}):de&&je.includes("already exists")?(0,b.jsxs)("div",{className:"statusMsg error",children:[(0,b.jsx)(Z.CSE,{}),je]}):de?(0,b.jsxs)("div",{className:"statusMsg success",children:[(0,b.jsx)(N.hXj,{size:"1.4em",color:"green",strokeWidth:{width:"100px"}}),"\xa0",je]}):"",(0,b.jsxs)("div",{className:"pageTitle",children:[(0,b.jsx)("div",{className:"childOne"}),(0,b.jsx)("div",{className:"childTwo",children:(0,b.jsx)("h2",{children:"Generate Billing Timesheet"})}),(0,b.jsx)("div",{className:"childThree"})]})]}),(0,b.jsx)(k.Z,{routes:qe,currentScreenName:["Fixed Price - Create"]}),(0,b.jsxs)("div",{className:"group mb-5 customCard",children:[(0,b.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,b.jsx)("h2",{children:"Search Filters"}),(0,b.jsx)("div",{className:"helpBtn",children:(0,b.jsx)(C.Z,{pdfname:"FixedPriceCreateTimesheet.pdf",name:"Generate Billing Timesheet Help"})}),(0,b.jsx)("div",{onClick:function(){$(!Q),ae(Q?o.UdN:o.NR5)},children:(0,b.jsx)("span",{children:se})})]}),(0,b.jsx)(m.V9,{visible:!Q,children:(0,b.jsxs)("div",{className:"group-content row mb-2",children:[(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsx)("label",{className:"col-5",htmlFor:"BillingCycle",children:"Billing Cycle"}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:"col-6",children:(0,b.jsxs)("select",{id:"BillingCycle",name:"BillingCycle",defaultValue:null,onChange:function(e){J(e.target.value)},children:[(0,b.jsxs)("option",{value:"null",children:["<< Please Select >>"," "]}),(0,b.jsx)("option",{value:"Monthly",children:"Monthly"}),(0,b.jsx)("option",{value:"Weekly",children:"Weekly"}),(0,b.jsx)("option",{value:"Bi-Weekly",children:"Bi-Weekly"})]})})]})}),(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsx)("label",{className:"col-5",htmlFor:"TsName",children:"Timesheet Name"}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:"col-6",children:(0,b.jsx)("input",{name:"TsName",type:"text",id:"TsName",placeholder:"",required:!0,onChange:function(e){e.preventDefault();var t=e.target,s=t.name,a=t.value;A((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},s,a))}))},value:O.TsName})})]})}),"Bi-Weekly"==V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"StartDt",children:["Billing Start Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:" datepicker col-6",ref:function(e){Le.current[0]=e},children:(0,b.jsx)(u(),{className:"StartDt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:q,onChange:function(e){A((function(t){var s;return(0,l.Z)((0,l.Z)({},t),{},(s={},(0,r.Z)(s,"StartDt",p()(e).format("yyyy-MM-DD")),(0,r.Z)(s,"EndDt",p()(q).add(13,"days").format("yyyy-MM-DD")),s))})),W(e),_e(!1)},placeholderText:"Billing Start Date",dateFormat:"dd-MMM-yyyy"})})]})}),(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"EndDt",children:["Billing End Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:" datepicker col-6",ref:function(e){Le.current[1]=e},children:(0,b.jsx)(u(),{className:0!=(null===q||void 0===q?void 0:q.length)?"invoicedisable":"EndDt",selected:""===O.StartDt?G:p()(q).add(13,"days")._d,onChange:function(e){A((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},"EndDt",p()(e).format("yyyy-MM-DD")))})),U(e)},showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",placeholderText:"Billing End Date",dateFormat:"dd-MMM-yyyy",disabled:!Pe})})]})})]}):"Weekly"==V?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"StartDt",children:["Billing Start Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:" datepicker col-6",ref:function(e){Le.current[0]=e},children:(0,b.jsx)(u(),{className:"StartDt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:q,onChange:function(e){A((function(t){var s;return(0,l.Z)((0,l.Z)({},t),{},(s={},(0,r.Z)(s,"StartDt",p()(e).format("yyyy-MM-DD")),(0,r.Z)(s,"EndDt",p()(q).add(6,"days").format("yyyy-MM-DD")),s))})),W(e),_e(!1)},placeholderText:"Billing Start Date",dateFormat:"dd-MMM-yyyy"})})]})}),(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row ",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"EndDt",children:["Billing End Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:" datepicker col-1 p-0",children:":"}),(0,b.jsx)("div",{className:"datepicker col-6",ref:function(e){Le.current[1]=e},children:(0,b.jsx)(u(),{className:"EndDt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:""==O.StartDt?G:p()(q).add(6,"days")._d,onChange:function(e){A((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},"EndDt",p()(e).format("yyyy-MM-DD")))})),U(e)},placeholderText:"Billing End Date",dateFormat:"dd-MMM-yyyy",disabled:!Pe})})]})})]}):"Monthly"==V?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"StartDt",children:["Month\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:" datepicker col-6",ref:function(e){Le.current[0]=e},children:(0,b.jsx)(u(),{className:"StartDt",selected:q,onChange:function(e){A((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},"StartDt",p()(e).format("yyyy-MM-DD")))})),W(e),tt(),_e(!1)},placeholderText:"Billing Start Date",dateFormat:"MMM-yyyy",showMonthYearPicker:!0})})]})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"StartDt",children:["Billing Start Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"  col-1 p-0",children:":"}),(0,b.jsx)("div",{className:" datepicker col-6",ref:function(e){Le.current[0]=e},children:(0,b.jsx)(u(),{className:"StartDt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",selected:q,minDate:q,onChange:function(e){A((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},"StartDt",p()(e).format("yyyy-MM-DD")))})),W(e),_e(!1)},placeholderText:"Billing Start Date",dateFormat:"dd-MMM-yyyy"})})]})})," ",(0,b.jsx)("div",{className:"col-md-3 mb-2",children:(0,b.jsxs)("div",{className:"form-group row",children:[(0,b.jsxs)("label",{className:"col-5",htmlFor:"EndDt",children:["Billing End Date\xa0",(0,b.jsx)("span",{className:"required error-text",children:"*"})]}),(0,b.jsx)("span",{className:"col-1 p-0",children:":"}),(0,b.jsx)("div",{className:"datepicker col-6",ref:function(e){Le.current[1]=e},children:(0,b.jsx)(u(),(0,l.Z)({className:"EndDt",showMonthDropdown:!0,showYearDropdown:!0,minDate:G,dropdownMode:"select",selected:G,onChange:function(e){A((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},"EndDt",p()(e).format("yyyy-MM-DD")))})),U(e)},placeholderText:"Billing End Date",dateFormat:"dd-MMM-yyyy"},""!=V?(0,b.jsxs)(b.Fragment,{children:["disabled=",!Pe]}):""))})]})})]}),1e3===$e?(0,b.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2 ",children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",onClick:st,children:[(0,b.jsx)(o.l_A,{})," Create"," "]}),(0,b.jsxs)("button",{type:"button",className:"btn btn-sm btn-secondary",title:"Cancel",onClick:function(){O.prjId=v;var e=Le.current.filter((function(e){return null!=e}));return Le.current=e,(0,j.Z)(Le)?(Me(!0),void setTimeout((function(){Me(!1)}),3e3)):0==v.length?(Te(!0),void setTimeout((function(){Te(!1)}),3e3)):void x()({method:"delete",url:Ie+"/timeandexpensesms/fixedprice/deletetimesheet?fromdate=".concat(He,"&project_id=").concat(v)}).then((function(e){Ze(!0),setTimeout((function(){Ze(!1)}),3e3),h([]),tt()}))},children:[(0,b.jsx)(E.sQZ,{fontSize:"11px"})," Cancel"," "]})]}):""]})}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)(w,{data:le,setCheckedData:M,value:"FixedPrice-Create",rows:25,selectedData:F,setSelectedData:B,checkboxSelect:d,setCheckboxSelect:h,dataAccess:$e}),xe?(0,b.jsx)(g.Z,{handleAbort:function(){Oe.current&&Oe.current.abort(),fe(!1)}}):""]})]})]})}}}]);
//# sourceMappingURL=1934.1d83e42d.chunk.js.map