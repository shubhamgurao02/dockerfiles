"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1817],{20586:function(e,t,n){n.d(t,{Z:function(){return x}});var s=n(72791),r=n(78983),l=n(17425),i=n(56355),c=n(70828),a=n(93433),o=n(29439),u=n(58632),d=n(93528),p=n(34831),v=n(74569),m=n.n(v),f=n(80184),h=(0,s.forwardRef)((function(e,t){var n=p.N.baseUrl,r=(0,s.useState)([]),l=(0,o.Z)(r,2),i=l[0],c=l[1],v=(0,s.useState)([]),h=(0,o.Z)(v,2),x=h[0],g=h[1],j=(0,s.useState)(!1),S=(0,o.Z)(j,2),y=S[0],b=S[1],N=(0,s.useState)([]),I=(0,o.Z)(N,2),_=I[0],w=I[1],C=(0,s.useState)(""),k=(0,o.Z)(C,2),E=k[0],Z=k[1];(0,s.useImperativeHandle)(t,(function(){return{setGlobalState:function(){localStorage.setItem("selectedEngCust",JSON.stringify(i))},resetTOlocalState:function(){var e=null===localStorage.getItem("selectedEngCust")?[]:JSON.parse(localStorage.getItem("selectedEngCust"));c(e),e.length===(null===_||void 0===_?void 0:_.length)?b(!0):b(!1)}}}));var T=function(e){return(0,f.jsxs)("div",{className:"option col-md-3 ellipsis row",children:[(0,f.jsxs)("div",{className:"col-md-2",style:{marginTop:"3px",width:"10px"},children:[" ",(0,f.jsx)("input",{type:"checkbox",id:e.id,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:"-2px"},onChange:function(t){return function(e){c((function(t){return t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat((0,a.Z)(t),[e])}))}(e)},checked:i.some((function(t){return t.id===e.id})),className:"mr-2"})]}),(0,f.jsx)("div",{className:" col-md-10 customerRoleMap",style:{width:"215px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.fullName,children:e.fullName})]},e.id)};return(0,s.useEffect)((function(){g((function(){return i.filter((function(e){var t;return null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(E)})).map((function(e){return T(e)}))}))}),[i,E]),(0,s.useEffect)((function(){m().get(n+"/ProjectMS/project/activeSalesReviewsCustomers").then((function(e){var t=e.data;console.log("respone--"+t.length),console.log(t),w(t)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){var e=null===localStorage.getItem("selectedEngCust")?[]:JSON.parse(localStorage.getItem("selectedEngCust"));c(e),(null===_||void 0===_?void 0:_.length)==(null===e||void 0===e?void 0:e.length)?b(!0):b(!1)}),[_]),(0,f.jsxs)("div",{className:"col-md-12 ",children:[(0,f.jsx)("div",{className:"col-md-12 mb-2",children:(0,f.jsx)("div",{className:"col-md-5 ",children:(0,f.jsxs)("div",{className:"form-group row",children:[(0,f.jsx)("label",{className:"col-3",htmlFor:"engagementName",children:"Search"}),(0,f.jsx)("span",{className:"col-1 ",children:":"}),(0,f.jsx)("div",{className:"col-6",children:(0,f.jsx)("input",{type:"text",placeholder:"minimum 3 characters",onChange:function(e){return Z(e.target.value.toLowerCase())}})})]})})}),(0,f.jsxs)("div",{className:"col-md-4 form-check",children:[(0,f.jsx)("input",{type:"checkbox",id:"SelectedItems",name:"SelectedItems",className:"form-check-input",onChange:function(){c([]),b(!1)},checked:i.length>0}),(0,f.jsxs)("label",{className:"form-check-label",children:["Selected Items",(0,f.jsx)("span",{className:"col-1",children:":"})]})]}),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"col-md-12 my-3 ",children:(0,f.jsx)(d.Z,{selectedCustDisp:x})})}),(0,f.jsxs)("div",{className:"col-md-6 form-check",children:[(0,f.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:function(){c(y?function(e){var t=_.map((function(e){return e.id}));return e.filter((function(e){return!t.includes(e.id)}))}:function(e){var t=e.map((function(e){return e.id})),n=_.filter((function(e){return!t.includes(e.id)}));return[].concat((0,a.Z)(e),(0,a.Z)(n))}),b((function(e){return!e}))},checked:y})," ",(0,f.jsxs)("label",{className:"form-check-label",children:["All Customers",(0,f.jsx)("span",{className:"col-1",children:":"})]}),"\xa0"]}),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(u.Z,{employeeElement:T,selectedCust:i,data:_,search:E})})]})}));function x(e){var t=e.visible,n=e.setVisible,a=e.setSelectedItems,o=e.selectedItems,u=e.value,d=e.buttonPopup,p=e.setButtonPopup,v=(e.buttonPopup1,e.setButtonPopup1),m=(0,s.useRef)(null);function x(e){var t=e.setVisible,n=e.buttonPopup,s=e.setButtonPopup;return(0,f.jsx)("div",{children:(0,f.jsxs)(r.Tk,{visible:n,alignment:"center",backdrop:"static",size:"sm",children:[(0,f.jsxs)(r.p0,{closeButton:!1,children:[(0,f.jsx)("div",{className:"row",children:(0,f.jsx)(r.fl,{children:(0,f.jsx)("div",{children:"Confirmation"})})}),(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{className:"btn float end",type:"popup",onClick:function(){return s((function(){return!1}))},children:(0,f.jsx)(c.sQZ,{})})]})]}),(0,f.jsxs)(r.sD,{children:[(0,f.jsx)("h6",{children:"Save changes ?"}),(0,f.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,f.jsx)("button",{type:"delete",className:"btn btn-primary",onClick:function(){t(!1),s((function(){return!0}))},children:"Yes"}),(0,f.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){t(!1),s((function(){return!1}))},children:"No"})]})]})]})})}return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{children:(0,f.jsxs)(r.Tk,{alignment:"center",backdrop:"static",visible:t,onClose:function(){return n(!1)},size:"xl",children:[(0,f.jsxs)(r.p0,{closeButton:!1,children:[(0,f.jsxs)("div",{className:"row",children:[(0,f.jsxs)(r.fl,{children:[" ","SalesReviews"==u?(0,f.jsx)("div",{style:{fontSize:"15px"},children:"Select Customers"}):(0,f.jsx)("div",{children:"Select Customers / Prospects"})]})," "]}),"SalesReviews"==u?(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{className:"btn float end",type:"popup",onClick:function(){return n(!1)},children:(0,f.jsx)(c.sQZ,{})})]}):(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{className:"btn float end",type:"popup",onClick:function(){p((function(e){return!e}))},children:(0,f.jsx)(c.sQZ,{})})]})]}),(0,f.jsx)(r.sD,{children:(0,f.jsx)(h,{ref:m,setSelectedItems:a,selectedItems:o})}),(0,f.jsx)(r.Ym,{children:(0,f.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:[(0,f.jsxs)(r.u5,{color:"primary",title:"Save Changes",onClick:function(){m.current.setGlobalState(),n(!1),v((function(){return!0}))},children:[(0,f.jsx)(l.G8K,{}),"Save"]}),(0,f.jsxs)(r.u5,{color:"primary",title:"Undo Changes",onClick:function(){m.current.resetTOlocalState()},children:[(0,f.jsx)(i.wXW,{size:"1.0em",title:"Undo Chages"}),"Undo"]})]})})]})}),d&&"SalesReviews"!==u?(0,f.jsx)(x,{buttonPopup:d,setButtonPopup:p,setVisible:n}):""]})}},51263:function(e,t,n){var s=n(29439),r=n(72791),l=n(66770),i=n.n(l),c=n(78983),a=n(34831),o=n(74569),u=n.n(o),d=n(56355),p=n(70828),v=n(80184);t.Z=function(e){var t,n=e.openPopup,l=e.setOpenPopup,o=(e.Vdata,e.rowData),m=e.accessData,f=(0,r.useState)({}),h=(0,s.Z)(f,2),x=(h[0],h[1]),g=(0,r.useState)(""),j=(0,s.Z)(g,2),S=j[0],y=j[1],b=a.N.baseUrl,N={toolbar:[[{header:[!1,1,2,3,4,5,6]},{font:[]},{color:[]},{bold:{tooltip:"Bold (Ctrl+B)"}},"italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","code-block","clean"]]};return(0,r.useEffect)((function(){u()({method:"get",url:b+"/SalesMS/services/getExecutiveNotes?rid=".concat(o.id)}).then((function(e){var t,n=e.data;x(n);var s=(null===(t=n[0])||void 0===t?void 0:t.notes)||"";y(s)}))}),[]),(0,v.jsx)("div",{children:(0,v.jsxs)(c.Tk,{visible:n,size:"xl",onClose:function(){return l(!1)},backdrop:"static",children:[(0,v.jsx)(c.p0,{className:"",style:{cursor:"all-scroll"},children:(0,v.jsxs)(c.fl,{children:[(0,v.jsxs)("span",{className:"",children:[" ","Notes -"," ",(""+o.executive).includes("^&")?o.customerTmp:(null===(t=o.customer)||void 0===t?void 0:t.split("^&")[1])||o.executive]})," "]})}),(0,v.jsxs)(c.sD,{children:[1e3===m?(0,v.jsx)(i(),{className:"",theme:"snow",value:S,name:"notes",id:"editor-container",onChange:function(e){y(e)},modules:N}):(0,v.jsx)(i(),{className:"",theme:"snow",value:S,name:"notes",id:"editor-container",onChange:function(e){y(e)},modules:N,readOnly:!0,style:{cursor:"not-allowed"}}),1e3===m?(0,v.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=S.replace(/<\/?[^>]+(>|$)/g,""),t={resId:o.id,notes:e,loggedUserId:localStorage.getItem("resId")};u()({method:"POST",url:b+"/SalesMS/pmo/savenotes",data:t}).then((function(e){var t=e.data;x(t),l(!1)}))}()},children:[(0,v.jsx)(d.TvB,{}),"Save"," "]}),(0,v.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){l(!1)},children:[(0,v.jsx)(p.sQZ,{fontSize:"11px"}),"Cancel"," "]})]}):""]})]})})}},37683:function(e,t,n){n.d(t,{Z:function(){return u}});var s=n(29439),r=n(74569),l=n.n(r),i=n(72791),c=n(34831),a=n(83854),o=n(80184);function u(e){var t=e.showSFpipeline,n=e.setshowSFpipeline,r=e.reportRunId,u=e.componentSelector,d=e.setRefreshButton,p=(e.refreshButton,(0,i.useState)(!1)),v=(0,s.Z)(p,2),m=v[0],f=v[1],h=(0,i.useRef)(null),x=c.N.baseUrl;return(0,o.jsxs)("div",{children:["custTarget"!==u&&(0,o.jsxs)("div",{className:"col-4 row ",style:{},children:[(0,o.jsx)("button",{id:"sfData",className:"col-4 btn btn-primary mr-2",style:{width:"auto",fontWeight:"bold"},onClick:function(){n((function(e){return!e}))},children:t?"Hide Sf Pipeline":"Show Sf Pipeline"}),(0,o.jsx)("button",{id:"refreshData",className:"col-4 btn btn-primary",style:{width:"auto",fontWeight:"bold"},onClick:function(){!function(){var e=setTimeout((function(){f(!0)}),2e3);h.current=new AbortController,l()({method:"post",url:x+"/SalesMS/salesforce/refreshSalesForceData",signal:h.current.signal,data:{reportRunId:""+r,for:"Services"}}).then((function(t){var n=t.data.status;f(!1),d(n),clearTimeout(e)})).catch((function(e){console.log(e)}))}()},children:"Refresh Sf Data"})]}),m?(0,o.jsx)(a.Z,{handleAbort:function(){h.current&&h.current.abort(),f(!1)}}):""]})}},47903:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=n(29439),r=n(72791),l=n(8009),i=n(93433),c=n(56355),a=n(34831),o=n(49177),u=n(34911),d=n(56637),p=n(53824),v=n(48462),m=n(59170),f=n(74569),h=n.n(f),x=n(16856),g=n(23853),j=n(17425),S=n(25415),y=n.n(S),b=n(37683),N=n(66770),I=n.n(N),_=n(78983),w=n(70828),C=n(80184),k=function(e){var t,n,l=e.openPopup,i=e.setOpenPopup,o=(e.Vdata,e.rowData),u=e.accessData,d=(0,r.useState)({}),p=(0,s.Z)(d,2),v=p[0],m=p[1],f=(0,r.useState)(""),x=(0,s.Z)(f,2),g=x[0],j=x[1],S=a.N.baseUrl,y={toolbar:[[{header:[!1,1,2,3,4,5,6]},{font:[]},{color:[]},{bold:{tooltip:"Bold (Ctrl+B)"}},"italic","underline",{list:"ordered"},{list:"bullet"},{script:"sub"},{script:"super"},{indent:"-1"},{indent:"+1"},{align:null},{align:"center"},{align:"right"},"strike","link","code-block","clean"]]};return(0,r.useEffect)((function(){h()({method:"get",url:S+"/SalesMS/services/getExecutiveNotes?rid=".concat(o.id)}).then((function(e){var t,n=e.data;m(n);var s=(null===(t=n[0])||void 0===t?void 0:t.notes)||"";j(s)}))}),[]),(0,C.jsx)("div",{children:(0,C.jsxs)(_.Tk,{visible:l,size:"xl",onClose:function(){return i(!1)},backdrop:"static",children:[(0,C.jsx)(_.p0,{className:"",style:{cursor:"all-scroll"},children:(0,C.jsx)(_.fl,{children:(0,C.jsxs)("span",{className:"",children:[" ","Notes - ",o.executive.split("^&")[0]," "]})})}),(0,C.jsxs)(_.sD,{children:[1e3===u?(0,C.jsx)(I(),{className:"",theme:"snow",value:g,name:"notes",defaultValue:null===(t=v[0])||void 0===t?void 0:t.notes,id:"editor-container",onChange:function(e){j(e)},modules:y}):(0,C.jsx)(I(),{className:"",theme:"snow",value:g,name:"notes",defaultValue:null===(n=v[0])||void 0===n?void 0:n.notes,id:"editor-container",modules:y,readOnly:!0,style:{cursor:"not-allowed"}}),1e3===u?(0,C.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){!function(){var e=g.replace(/<\/?[^>]+(>|$)/g,""),t={resId:o.id,notes:e,loggedUserId:localStorage.getItem("resId")};h()({method:"POST",url:S+"/SalesMS/pmo/savenotes",data:t}).then((function(e){var t=e.data;m(t),i(!1)}))}()},children:[(0,C.jsx)(c.TvB,{}),"Save"," "]}),(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){i(!1)},children:[(0,C.jsx)(w.sQZ,{fontSize:"11px"}),"Cancel"," "]})]}):""]})]})})},E=function(e){var t=e.serviceData,n=e.coloumnArray,l=e.reportRunId,f=e.setMessage,S=e.accessData,N=e.setMessage1,I=(e.hirarchy,e.setshowSFpipeline),_=e.showSFpipeline,w=e.componentSelector,E=e.setRefreshButton,Z=e.refreshButton,T=a.N.baseUrl,A=(0,r.useState)([]),O=(0,s.Z)(A,2),R=O[0],F=O[1],D=(0,r.useState)([]),B=(0,s.Z)(D,2),M=(B[0],B[1]),P=(0,r.useState)([]),L=(0,s.Z)(P,2),Q=L[0],U=L[1],z=(0,r.useState)([]),V=(0,s.Z)(z,2),J=V[0],Y=V[1],H=(0,r.useState)([]),q=(0,s.Z)(H,2),W=q[0],$=q[1],G=(0,r.useState)(!1),X=(0,s.Z)(G,2),K=X[0],ee=X[1],te=(0,r.useState)({}),ne=(0,s.Z)(te,2),se=ne[0],re=ne[1],le=localStorage.getItem("resId"),ie=(0,r.useState)(null),ce=(0,s.Z)(ie,2),ae=ce[0],oe=ce[1],ue=(0,r.useState)(null),de=(0,s.Z)(ue,2),pe=de[0],ve=de[1],me=null===R||void 0===R?void 0:R.filter((function(e){return 1===e.lvl})).map((function(e){return e.executive})),fe=0,he=0,xe={fte0:(0,C.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,C.jsx)("img",{src:o,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,C.jsx)("img",{src:d,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,C.jsx)("img",{src:v,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,C.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,C.jsx)("img",{src:m,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})};(0,r.useEffect)((function(){F(JSON.parse(JSON.stringify(t))),M(n)}),[t,n]),(0,r.useEffect)((function(){Se(),ye()}),[R,J]),(0,r.useEffect)((function(){Y([]),$([])}),[t]);var ge={1:(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"purple"}}),0:(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"green"}})},je=function(e,t,n,s,r,l){var c=e.target,a=c.value,o=c.id,u=(e.target.getAttribute("data-qua"),o.split("_")[0]),d=o.split("_")[1],p="Q1"===d||"Q2"===d||"Q3"===d||"Q4"===d?"quar":"month",v="id,executive,execStatus,supervisor,practiceId,practice,countryId,country,lvl,count,isEdit,keyAttr,parentAttr,isActive,2023_Q2_target,2022_07_01_target,2022_08_01_target,2022_09_01_target,2023_Q3_target,2022_10_01_target,2022_11_01_target,2022_12_01_target,2023_Q4_target,2023_01_01_target,2023_02_01_target,2023_03_01_target,2024_Q1_target,2023_04_01_target,2023_05_01_target,2023_06_01_target,total_target,",m=(v.split(",").findIndex((function(e){return e===o})),o.split("_")),f=null;switch(m[1]){case"Q1":f=[4,5,6];break;case"Q2":f=[7,8,9];break;case"Q3":f=[10,11,12];break;case"Q4":f=[1,2,3]}var h=Object.keys(R[n]),x=[];if(null!=f){for(var g=0;g<f.length;g++)1==(""+f[g]).length&&(f[g]="_0"+f[g]+"_01_"+m[2]);f.map((function(e){var t=h.filter((function(t){return t.includes(e)}));x.push(t)}))}F((function(s){var r=s.findIndex((function(e){return e.keyAttr===t}));if("quar"===p){var l=0;Object.keys(s[n]).forEach((function(e){e.includes("Q")&&(l+=parseInt(s[n][e]))})),s[n].total_target=l;var c=s[n].executive,u=s[n].executive.split("^&"),d=s.filter((function(e){return e.executive==c})).filter((function(e,t){return t>0})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),v=s.filter((function(e){return e.executive.includes(u[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),m=s.filter((function(e){return 3==e.lvl})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),f=s.filter((function(e){return e.executive.includes(u[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),h=s.filter((function(e){return e.executive==c})).filter((function(e,t){return t>0})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),g=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),j=Math.floor(a/3);s[n][x[0]]=j,s[n][x[1]]=j,s[n][x[2]]=j+a%3;var S=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[x[0]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),y=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[x[1]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),b=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[x[2]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);s[1][x[0]]=S,s[1][x[1]]=y,s[1][x[2]]=b;var N=s.filter((function(e){return e.executive==c})).filter((function(e,t){return t>0})).map((function(e){return e[x[0]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),I=s.filter((function(e){return e.executive==c})).filter((function(e,t){return t>0})).map((function(e){return e[x[1]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),_=s.filter((function(e){return e.executive==c})).filter((function(e,t){return t>0})).map((function(e){return e[x[2]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);s[r][x[0]]=N,s[r][x[1]]=I,s[r][x[2]]=_,s[r][o]=d,s[1].total_target=m,s[1][o]=g;for(var w=s.filter((function(e){return e.executive.includes(u[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[x[0]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),C=s.filter((function(e){return e.executive.includes(u[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[x[1]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),k=s.filter((function(e){return e.executive.includes(u[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[x[2]]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),E=s,Z=0;Z<E.length;Z++)E[Z].executive==u[0]+"^&  "&&(E[Z][o]=v,E[Z].total_target=f,E[Z][x[0]]=w,E[Z][x[1]]=C,E[Z][x[2]]=k);s[r].total_target=h}else if("month"===p){var T,A=[4,5,6],O=[7,8,9],R=[10,11,12],F=[1,2,3],D=null,B=e.target.id.split("_")[1];A.includes(+B)?(T="Q1",D=A):O.includes(+B)?(T="Q2",D=O):R.includes(+B)?(T="Q3",D=R):F.includes(+B)&&(T="Q4",D=F);var M=0,P=null;Object.keys(s[n]).forEach((function(e){if((e.includes(0)||e.includes(1)||e.includes(2)||e.includes(3)||e.includes(4)||e.includes(5)||e.includes(6)||e.includes(7)||e.includes(8)||e.includes(9))&&!e.includes("Q")){var t,r=e.split("_")[1],l=r.startsWith(0)?r.substring(1):r;null!=l&&null!==(t=D)&&void 0!==t&&t.includes(+l)&&(M+=parseInt(s[n][e]))}e.includes(T)&&(P=e)})),s[n][P]=M;var L=0;Object.keys(s[n]).forEach((function(e){e.includes("Q")&&(L+=parseInt(s[n][e]))})),s[n].total_target=L;var Q=s[n].executive,U=s[n].executive.split("^&"),z=s.filter((function(e){return e.executive==Q})).filter((function(e,t){return t>0})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),V=s.filter((function(e){return e.executive.includes(U[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),J=s.filter((function(e){return 3==e.lvl})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),Y=s.filter((function(e){return e.executive.includes(U[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),H=s.filter((function(e){return e.executive==Q})).filter((function(e,t){return t>0})).map((function(e){return e.total_target})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0),q=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[o]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);s[r][o]=z,s[r].total_target=H,s[1].total_target=J,s[1][o]=q,s[1][P]=s.filter((function(e){return 3==e.lvl})).map((function(e){return e[P]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);var W=s.filter((function(e){return e.executive.includes(U[0])})).filter((function(e){return e.lvl>2})).map((function(e){return e[P]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);s[r][P]=s.filter((function(e){return e.executive==Q})).filter((function(e,t){return t>0})).map((function(e){return e[P]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0);for(var $=s,G=0;G<$.length;G++)$[G].executive==U[0]+"^&  "&&($[G][o]=V,$[G].total_target=Y,$[G][P]=W)}return(0,i.Z)(s)}));var j=[],S=function(e,t){return{executiveId:""+s,customerId:"undefined",prospectId:"",practiceId:""+r,countryId:""+l,month:e,typ:"target",val:parseInt(t),comments:"",isOverridden:!1}};if("quar"===p){var y={Q1:["".concat(parseInt(u)-1,"-04-01"),"".concat(parseInt(u)-1,"-05-01"),"".concat(parseInt(u)-1,"-06-01")],Q2:["".concat(parseInt(u)-1,"-07-01"),"".concat(parseInt(u)-1,"-08-01"),"".concat(parseInt(u)-1,"-09-01")],Q3:["".concat(parseInt(u)-1,"-10-01"),"".concat(parseInt(u)-1,"-11-01"),"".concat(parseInt(u)-1,"-12-01")],Q4:["".concat(parseInt(u),"-01-01"),"".concat(parseInt(u),"-02-01"),"".concat(parseInt(u),"-03-01")]}[d],b=Math.floor(a/3);y.forEach((function(e,t){var n=b+(t===y.length-1?a%3:0);j.push(S(e,n))}))}else if("month"===p){var N=u+"_"+o.split("_")[1]+"_01";j.push(S(N,a))}U((function(e){return[].concat((0,i.Z)(e),j)}))};(0,r.useEffect)((function(){Se(),ye()}),[W]);var Se=function(){ve((function(){return null===R||void 0===R?void 0:R.map((function(e,t){var n=["id","count","countryId","execStatus","isEdit","keyAttr","lvl","parentAttr","practiceId","supervisor"],s=["country"],r=["target"],l=[];fe=2===e.lvl||3===e.lvl?fe:J.includes(e.executive)?1:0;var a=function(t){var a,o;t.includes("Q")&&(he=W.includes(t.split("_")[1])?1:0),!n.includes(t)&&(J.length>0||!s.includes(t))&&l.push(e.id<0&&(0,C.jsxs)("th",{style:{textAlign:"center",display:0===he&&null!==r&&void 0!==r&&r.some((function(e){return null===t||void 0===t?void 0:t.includes(e)}))&&!(null!==t&&void 0!==t&&t.includes("Q")||null!==t&&void 0!==t&&t.includes("total"))?"none":""},children:[null===(a=e[t])||void 0===a?void 0:a.split("^&")[0],-2===e.id&&(null===(o=e[t])||void 0===o?void 0:o.includes("Quart"))&&(0,C.jsx)("span",{onClick:function(){var e;e=t.split("_")[1],$((function(t){return null!==t&&void 0!==t&&t.includes(e)?null===t||void 0===t?void 0:t.filter((function(t){return t!==e})):[].concat((0,i.Z)(t),[e])}))},children:W.includes(t.split("_")[1])?(0,C.jsx)(c.ZCH,{size:"0.8em",title:"Hide Details",style:{cursor:"pointer",marginLeft:"5px"}}):(0,C.jsx)(c.jS6,{size:"0.8em",title:"Show Details",style:{cursor:"pointer",marginLeft:"5px"}})})]},t)),t};for(var o in e)a(o);return(0,C.jsx)("tr",{children:l},e.keyAttr+e.executive+e.countryId)}))}))},ye=function(){oe((function(){return null===R||void 0===R?void 0:R.map((function(e,t){var n=["id","count","countryId","execStatus","isEdit","keyAttr","lvl","parentAttr","practiceId","supervisor"],s=["executive","country","total_target"],l=["country"],a=["target"],o=[];fe=2===e.lvl||3===e.lvl?fe:J.includes(e.executive)?1:0;var u=function(u){var d,p,v,m;u.includes("Q")&&(he=W.includes(u.split("_")[1])?1:0),!n.includes(u)&&(J.length>0||!l.includes(u))&&o.push((0,C.jsx)("td",{className:u.includes("executive")?"executive":u.includes("Q")?u.split("_")[1][1]%2==0?"even":"odd":u.includes("total")?"total":u.includes("0")?u.split("_")[1]%2==0?"innereven":"innerodd":"",style:{display:0===fe&&(2===e.lvl||3===e.lvl)||0===he&&a.some((function(e){return u.includes(e)}))&&!u.includes("Q")&&!u.includes("total")?"none":""},children:s.includes(u)?(0,C.jsxs)(r.Fragment,{children:[(0,C.jsx)("span",{onClick:function(){var t;t=e.executive,Y("Summary"===t?function(e){return e.length===me.length?[]:me}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,i.Z)(e),[t])})},children:(1===e.lvl||0===e.lvl)&&"executive"===u&&(J.includes(e.executive)||"Summary"===e.executive&&J.length===me.length?(0,C.jsx)(c.qL$,{size:"1.2em",title:"Collapse",style:{cursor:"pointer",color:"#428bca"}}):(0,C.jsx)(c.PS5,{size:"1.2em",title:"Expand",style:{cursor:"pointer",color:"#428bca"}}))}),"executive"===u?2===e.lvl||3===e.lvl?(0,C.jsxs)("div",{style:{paddingLeft:3===e.lvl?"30px":""},children:[3===e.lvl&&(0,C.jsx)("span",{children:ge[0]}),(0,C.jsx)("span",{className:"executive"===u&&2===e.lvl||3===e.lvl?"collapsedRow":"",title:null===(d=e[u])||void 0===d?void 0:d.split("^&")[1],style:{fontWeight:3===e.lvl?" ":"normal",paddingRight:3===e.lvl?"60px":"110px"},children:(""+e[u]).includes("^&")?null===(p=e[u])||void 0===p?void 0:p.split("^&")[1]:e[u]})]}):(0,C.jsxs)("div",{children:[xe[e.execStatus],(0,C.jsx)("span",{title:(""+e[u]).includes("^&")?null===(v=e[u])||void 0===v?void 0:v.split("^&")[0]:e[u],children:(""+e[u]).includes("^&")?null===(m=e[u])||void 0===m?void 0:m.split("^&")[0]:e[u]}),(0,C.jsx)("span",{title:"Notes",children:"executive"==u&&"Summary"!==e[u]&&"<< Unassigned >>"!=e[u]?(0,C.jsx)(x.E49,{style:{float:"right",cursor:"pointer"},size:"1.5em",onClick:function(){ee(!0),re(e)}}):""})]}):1===e.lvl?(0,C.jsx)("span",{className:"country"===u&&1===e.lvl?"countryName":"",children:isNaN(parseFloat(e[u]))?e[u]:parseFloat(e[u]).toLocaleString("en-US")}):(0,C.jsx)("span",{children:isNaN(parseFloat(e[u]))?e[u]:parseFloat(e[u]).toLocaleString("en-US")})]}):(0,C.jsx)(r.Fragment,{children:3===e.lvl&&1e3==S?(0,C.jsx)("input",{type:"number",id:u,value:R[t][u],onChange:function(n){""===n.target.value&&(n.target.value="0",je(n,e.parentAttr,t,e.id,e.practiceId,e.countryId)),function(e,t){var n=e.target,s=n.value,r=n.id;F((function(e){var n=(0,i.Z)(e);return n[t][r]=s,n}))}(n,t)},onBlur:function(n){je(n,e.parentAttr,t,e.id,e.practiceId,e.countryId)}}):(0,C.jsxs)("span",{children:[" "===e[u]?"":parseInt(e[u]).toLocaleString("en-US")," "]})})},u)),u};for(var d in e)u(d);return-2!==e.id?(0,C.jsx)("tr",{children:o},e.keyAttr+e.executive+e.countryId):null}))}))};return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(j.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){for(var e=["id","customerId","isProspect","practiceId","countryId","execStatus","lvl","count","isEdit","keyAttr","parentAttr","isActive"],n=Object.keys(t[0]).filter((function(t){return!e.includes(t)})).map((function(e){if("customer"===e){var n=t[0][e].split("^&"),s=n[0].includes("__")?n[0].split("__"):[];return s[2]+s[4]}return t[0][e].split("^&")[0]})),r=t.slice(1).map((function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})))})).map((function(e){return Object.values(e)})),l=new(y().Workbook),i=l.addWorksheet("SalesTarget"),c=(i.addRow(n),0);c<r.length;c++)i.addRow(r[c]);[1].forEach((function(e){i.getRow(e).font={bold:!0}})),l.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesTarget.xlsx")}))}}),(0,C.jsx)("b",{style:{float:"right",paddingRight:"640px",fontSize:"17px",color:"#297ab0"},children:"Targets"}),t.length>0&&(0,C.jsx)(b.Z,{reportRunId:l,showSFpipeline:_,setshowSFpipeline:I,componentSelector:w,setRefreshButton:E,refreshButton:Z})]}),(0,C.jsx)("div",{className:"serviceCompTargetTable darkHeader toHead",children:(0,C.jsxs)("table",{className:"table table-bordered htmlTable",cellPadding:0,cellSpacing:0,children:[(0,C.jsx)("thead",{children:pe}),(0,C.jsx)("tbody",{children:ae})]})}),1e3===S?(0,C.jsxs)("div",{className:"btn-container center my-3 mb-2",children:[(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){Q.some((function(e){return 0!==e.val}))?h().post(T+"/SalesMS/services/saveSalesTargets?loggedUserId=".concat(le,"&reportRunId=").concat(l),Q).then((function(e){f(!0),setTimeout((function(){f(!1)}),3e3)})).catch((function(e){})):(N(!0),setTimeout((function(){N(!1)}),3e3))},children:[(0,C.jsx)(c.TvB,{}),"Save"," "]}),(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){!function(){for(var e=document.getElementsByClassName("empty"),n=0;n<e.length;n++){var s=e[n].id.split("__"),r=parseInt(s[1]),l=s[2];e[n].value=R[r][l]}F(t),U([])}()},children:[(0,C.jsx)(g.bxQ,{style:{color:"white"}}),"Reset"," "]})]}):"",K?(0,C.jsx)(k,{openPopup:K,setOpenPopup:ee,Vdata:t,accessData:S,rowData:se}):""]})},Z=(n(3555),n(51263));var T=function(e){var t=e.serviceData,n=e.reportRunId,l=e.accessData,i=e.coloumnArray,f=e.serviceDataCall,S=e.setMessageSgng,N=e.setMessage1,I=e.setshowSFpipeline,_=e.showSFpipeline,w=e.componentSelector,k=e.setRefreshButton,E=e.refreshButton,T=(0,r.useState)(null),A=(0,s.Z)(T,2),O=A[0],R=A[1],F=(0,r.useState)(null),D=(0,s.Z)(F,2),B=D[0],M=D[1],P=(0,r.useState)(JSON.parse(JSON.stringify(t))),L=(0,s.Z)(P,2),Q=L[0],U=L[1],z=(0,r.useState)(JSON.parse(JSON.stringify(t))),V=(0,s.Z)(z,2),J=(V[0],V[1],null===i||void 0===i?void 0:i.filter((function(e){return(null===e||void 0===e?void 0:e.includes("sgtarget"))||(null===e||void 0===e?void 0:e.includes("executive"))}))),Y=(0,r.useState)([]),H=(0,s.Z)(Y,2),q=H[0],W=H[1],$=(0,r.useState)(!1),G=(0,s.Z)($,2),X=G[0],K=G[1],ee=(0,r.useState)({}),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],re={fte0:(0,C.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,C.jsx)("img",{src:o,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,C.jsx)("img",{src:d,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,C.jsx)("img",{src:v,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,C.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,C.jsx)("img",{src:m,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},le=localStorage.getItem("resId"),ie=a.N.baseUrl;(0,r.useEffect)((function(){U(JSON.parse(JSON.stringify(t)))}),[t,n,i]),(0,r.useEffect)((function(){ae(),ce()}),[Q]),(0,r.useEffect)((function(){}),[q]);var ce=function(){M((function(){return Q.map((function(e,t){var n=[];return null===J||void 0===J||J.forEach((function(t,s){-2===e.id&&n.push((0,C.jsx)("th",{children:void 0!==e[t]&&e[t].split("^&1")[0]}))})),(0,C.jsx)("tr",{children:n})}))}))},ae=function(){R((function(){return Q.map((function(e,t){if(999===e.lvl)return(0,C.jsx)("tr",{children:(0,C.jsx)("td",{style:{textAlign:"center",backgroundColor:"white"},colSpan:J.length,className:"trLvl0",children:e.executive})},t);var n=[];return null===J||void 0===J||J.forEach((function(s,r){0===e.id?n.push(0===r?(0,C.jsx)("td",{className:"trLvl0",children:e[s]}):(0,C.jsx)("td",{className:"trLvl0",align:"right",children:null!==e[s]?parseInt(e[s]).toLocaleString("en-US"):""})):"Summary"!==e[s]&&0===r?n.push((0,C.jsx)("td",{className:"trLvl1",title:e[s],children:(0,C.jsxs)("div",{children:[re[e.execStatus]," ",(0,C.jsx)("span",{children:e[s]}),(0,C.jsx)(x.E49,{title:"Notes",style:{float:"right",cursor:"pointer"},size:"1.5em",onClick:function(){K(!0),se(e)}})]})})):n.push(0===r||r===J.length-1?(0,C.jsx)("td",{className:r===J.length-1?"summaryTotalColor":"trLvl1",children:null!==e[s]?parseInt(e[s]).toLocaleString("en-US"):""}):(0,C.jsx)("td",{className:r%2===0?"evenColor":"oddColor",children:1e3===l?(0,C.jsx)("input",{className:"textStyle",id:e.id+"__"+t+"__"+s,type:"text",style:{textAlign:"right",fontSize:"12px"},onKeyPress:function(e){oe(e)},onChange:function(n){ve(n,e,s,t,e.id+"__"+t+"__"+s)},onBlur:function(n){""===n.target.value&&(n.target.value="0",ve(n,e,s,t,e.id+"__"+t+"__"+s)),ue()},defaultValue:e[s].match(/\d+/)?parseInt(e[s]).toLocaleString("en-IN"):e[s]}):(0,C.jsx)("span",{children:e[s].match(/\d+/)?parseInt(e[s]).toLocaleString("en-IN"):e[s]})}))})),-2!==e.id?(0,C.jsx)("tr",{children:n}):null}))}))},oe=function(e){var t=e.which?e.which:e.keyCode;return 8==t||46==t||37==t||39==t?e.key:t<48||t>57?e.preventDefault():e.key},ue=function(){Q.forEach((function(e,t){J.forEach((function(t,n){if(0===e.id)switch(t){case J[1]:e[J[1]]=de(J[1]);break;case J[2]:e[J[2]]=de(J[2]);break;case J[3]:e[J[3]]=de(J[3]);break;case J[4]:e[J[4]]=de(J[4]);break;case J[5]:e[J[5]]=pe(e)}else if(e.id>0&&t===J[5])e[J[5]]=pe(e)}))})),ae()},de=function(e){var t=0;return Q.forEach((function(n,s){n.id>0&&(t+=parseInt(n[e]))})),t},pe=function(e){var t=0;return J.forEach((function(n,s){s>0&&s<J.length-1&&(t+=parseInt(e[n]))})),t},ve=function(e,n,s,r,l){var i=document.getElementById(l).classList,c=e.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");e.target.value=c,t[r][s]!==e.target.value?!i.contains("empty")&&i.add("empty"):i.contains("empty")&&i.remove("empty");var a=q,o={executiveId:"",month:"",typ:"",val:"",comments:""};o.executiveId=n.id;var u=s.split("_"),d="";"Q1"===u[1]?(d="04",u[0]=(parseInt(u[0])-1).toString()):"Q2"===u[1]?(d="07",u[0]=(parseInt(u[0])-1).toString()):"Q3"===u[1]?(d="10",u[0]=(parseInt(u[0])-1).toString()):"Q4"===u[1]&&(d="01");var p=u[0]+"-"+d+"-01";o.month=p,o.typ=u[2],o.val=e.target.value.replace(/,/g,""),a.some((function(e){return e.executiveId===o.executiveId&&e.month===o.month&&e.typ===o.typ}))?a.forEach((function(t,n){t.executiveId===o.executiveId&&t.month===o.month&&t.typ===o.typ&&(t.val=e.target.value.replace(/,/g,""))})):a.push(o),W(a),n[s]=e.target.value.replace(/,/g,"")},me=function(){document.getElementsByClassName("empty").length>0?function(){var e={};q.forEach((function(t,n){e[n]=t})),h()({method:"POST",url:ie+"/SalesMS/services/saveSalesSigningTargets?loggedUserId=".concat(le,"&reportRunId=").concat(n),data:e}).then((function(e){S(!0),setTimeout((function(){S(!1)}),3e3),f.current()}))}():(N(!0),setTimeout((function(){N(!1)}),4e3))};return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"",children:[(0,C.jsx)(j.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){for(var e=["id","customerId","isProspect","practiceId","countryId","execStatus","lvl","count","isEdit","keyAttr","parentAttr","isActive"],n=Object.keys(t[0]).filter((function(t){return!e.includes(t)})).map((function(e){if("customer"===e){var n=t[0][e].split("^&"),s=n[0].includes("__")?n[0].split("__"):[];return s[2]+s[4]}return t[0][e].split("^&")[0]})),r=t.slice(1).map((function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})))})).map((function(e){return Object.values(e)})),l=new(y().Workbook),i=l.addWorksheet("SalesTarget"),c=(i.addRow(n),0);c<r.length;c++)i.addRow(r[c]);[1].forEach((function(e){i.getRow(e).font={bold:!0}})),l.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesTarget.xlsx")}))}}),(0,C.jsx)("b",{style:{float:"right",paddingRight:"610px",fontSize:"17px",color:"#297ab0"},children:"Signings Targets"}),t.length>0&&(0,C.jsx)(b.Z,{reportRunId:n,showSFpipeline:_,setshowSFpipeline:I,componentSelector:w,setRefreshButton:k,refreshButton:E})]}),(0,C.jsx)("div",{className:"scrollit mt-1",children:(0,C.jsx)("div",{className:"signingTargetsTable darkHeader toHead",children:(0,C.jsxs)("table",{className:"table table-bordered htmlTable",cellPadding:0,cellSpacing:0,children:[(0,C.jsx)("thead",{children:B}),(0,C.jsx)("tbody",{children:O})]})})}),1e3===l?(0,C.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-container center my-3 mb-2",children:[(0,C.jsxs)("button",{className:"btn btn-primary",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){me()},children:[(0,C.jsx)(c.TvB,{}),"Save"]}),(0,C.jsxs)("button",{className:"btn btn-primary",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){!function(){for(var e=document.getElementsByClassName("empty"),n=0;n<e.length;n++){var s=e[n].id.split("__"),r=t[s[1]][s[2]];e[n].value=r.match(/\d+/)?parseInt(r).toLocaleString("en-IN"):r}U(JSON.parse(JSON.stringify(t))),ae(),W([])}()},children:[(0,C.jsx)(g.bxQ,{style:{color:"white"}}),"Reset"]})]}):"",X?(0,C.jsx)(Z.Z,{openPopup:X,setOpenPopup:K,Vdata:t,rowData:ne}):""]})},A=function(e){var t=e.serviceData,n=(e.reportRunId,e.coloumnArray),l=(e.serviceDataCall,(0,r.useState)([])),a=(0,s.Z)(l,2),f=a[0],h=a[1],x=(0,r.useState)([]),g=(0,s.Z)(x,2),j=(g[0],g[1]),S=(0,r.useState)([]),y=(0,s.Z)(S,2),b=y[0],N=y[1],I=null===f||void 0===f?void 0:f.filter((function(e){return 1===e.lvl})).map((function(e){return e.practice})),_=(0,r.useState)([]),w=(0,s.Z)(_,2),k=w[0],E=w[1],Z=0,T=0,A={fte0:(0,C.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,C.jsx)("img",{src:o,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,C.jsx)("img",{src:d,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,C.jsx)("img",{src:v,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,C.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,C.jsx)("img",{src:m,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})};(0,r.useEffect)((function(){h(t),j(n)}),[t,n]);var O=null===f||void 0===f?void 0:f.map((function(e,t){var n=["count","countryId","customerId","id","isEdit","isProspect","keyAttr","lvl","parentAttr","practiceId"],s=["practice","country","customer","total_target","total_custForecast"],l=["customer"],a=[];Z=2===e.lvl||3===e.lvl?Z:b.includes(e.practice)?1:0;var o=function(t){var o;t.includes("Q")&&(T=k.includes(t.split("_")[1])?1:0),(null===e||void 0===e?void 0:e.id)<0&&console.log(t),null!==e[t]&&!n.includes(t)&&(b.length>0||!l.includes(t))&&a.push(e.id<0?(0,C.jsxs)("th",{className:"targetth "+e[t].split("^&")[3],style:{display:0!==T||!t.includes("target")&&!t.includes("custForecast")||t.includes("Q")||t.includes("total")?"":"none"},children:[e[t].split("^&")[0],-2===e.id&&e[t].includes("Quart")&&(0,C.jsx)("span",{onClick:function(){var e;e=t.split("_")[1],E((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,i.Z)(t),[e])}))},children:k.includes(t.split("_")[1])?(0,C.jsx)(c._HU,{}):(0,C.jsx)(c.H_v,{})})]},t):(0,C.jsx)("td",{"data-lvl":e.lvl,"data-qua":null===(o=f[0][t])||void 0===o?void 0:o.split("^&")[4],className:"custMaptd "+t.split("_")[1]+" "+t,style:{display:0===Z&&(2===e.lvl||3===e.lvl)||0===T&&(t.includes("target")||t.includes("custForecast"))&&!t.includes("Q")&&!t.includes("total")?"none":""},children:s.includes(t)?(0,C.jsxs)(r.Fragment,{children:[(0,C.jsx)("span",{onClick:function(){var t;t=e.practice,N("Summary"===t?function(e){return e.length===I.length?[]:I}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,i.Z)(e),[t])})},children:(1===e.lvl||0===e.lvl)&&"practice"===t&&(b.includes(e.practice)||"Summary"===e.practice&&(null===b||void 0===b?void 0:b.length)===(null===I||void 0===I?void 0:I.length)?(0,C.jsx)(c.iUH,{}):(0,C.jsx)(c.H_v,{}))}),"practice"===t?2===e.lvl||3===e.lvl?(0,C.jsx)("span",{children:e[t].split("^&")[1]}):(0,C.jsxs)("span",{children:[A[e.practice]," ",e[t].split("^&")[0]]}):(0,C.jsx)("span",{children:e[t]})]}):(0,C.jsx)(r.Fragment,{children:3===e.lvl?(0,C.jsx)("input",{type:"number",id:t,value:e[t]}):(0,C.jsx)("span",{children:" "===e[t]?"":parseInt(e[t]).toLocaleString("en-US")})})},t)),t};for(var u in e)o(u);return(0,C.jsx)("tr",{"data-lvl":e.lvl,children:a},e.keyAttr+e.practice+e.customer)}));return(0,C.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12  customCard",children:[(0,C.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding custMapTablePrnt scrollit darkHeader",children:(0,C.jsx)("table",{className:"table table-bordered  ",children:(0,C.jsx)("tbody",{children:O})})}),(0,C.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center"})]})},O=n(86952),R=n(79563),F=n(83854);var D=function(e){var t=e.serviceData,n=e.reportRunId,l=(e.coloumnArray,e.serviceDataCall),i=e.setMessageCust,f=e.accessData,x=e.setMessage1,S=(0,r.useState)(JSON.parse(JSON.stringify(t))),b=(0,s.Z)(S,2),N=b[0],I=b[1],_=(0,r.useState)(null),w=(0,s.Z)(_,2),k=w[0],E=w[1],Z=(0,r.useState)(!1),T=(0,s.Z)(Z,2),A=T[0],O=T[1],R=(0,r.useState)([]),D=(0,s.Z)(R,2),B=D[0],M=D[1],P=(0,r.useState)(null),L=(0,s.Z)(P,2),Q=L[0],U=L[1],z=localStorage.getItem("resId"),V=a.N.baseUrl;(0,r.useEffect)((function(){I(JSON.parse(JSON.stringify(t)))}),[t,n]),(0,r.useEffect)((function(){Y(),H()}),[N]);var J={fte0:(0,C.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,C.jsx)("img",{src:o,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,C.jsx)("img",{src:d,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,C.jsx)("img",{src:v,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,C.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,C.jsx)("img",{src:m,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},Y=function(){U((function(){return N.map((function(e,t){var n=[];return Object.keys(e).forEach((function(t,s){var r=["count","countryId","customerId","id","isEdit","isProspect","keyAttr","lvl","parentAttr","practiceId","execStatus"];if(-2===e.id&&-1==r.indexOf(t)){var l=e[t].split("^&"),i=l[0].includes("__")?l[0].split("__"):[];n.push((0,C.jsx)("th",{style:{position:"sticky"},rowSpan:l[1],colSpan:l[2],children:i.length>0?(0,C.jsxs)("div",{children:[(0,C.jsxs)("span",{children:[(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"green"}}),(0,C.jsx)("span",{children:i[2]})]}),(0,C.jsxs)("span",{children:[(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"purple"}}),(0,C.jsx)("span",{children:i[4]})]})]}):l[0]}))}else-1===e.id&&-1==r.indexOf(t)&&e[t]&&n.push((0,C.jsx)("th",{children:e[t]}))})),(0,C.jsx)("tr",{children:n},t)}))}))},H=function(){O(!0),E((function(){return N.map((function(e,t){if(999===e.lvl)return(0,C.jsx)("tr",{children:(0,C.jsx)("td",{style:{textAlign:"center",backgroundColor:"white",fontSize:"14px",color:"black"},colSpan:24,children:e.executive})},t);if(-2===e.lvl||-1===e.lvl)return null;var n=[];return Object.keys(e).forEach((function(s,r){var l=["count","countryId","customerId","id","isEdit","isProspect","keyAttr","lvl","parentAttr","practiceId","execStatus"];if(0===e.id&&-1==l.indexOf(s))n.push((0,C.jsx)("td",{style:{textAlign:isNaN(parseFloat(e[s]))?"left":"right"},children:isNaN(parseFloat(e[s]))?e[s]:parseFloat(e[s]).toLocaleString("en-US")}));else if(e.id>0&&-1==l.indexOf(s)){n.push((0,C.jsx)("td",{className:" ".concat(-1!=["executive","practice","country","customer"].indexOf(s)?"trLvl1":s.includes("total_custForecast")?"total":s.includes("custForecast")&&!s.includes("total")&&r%2==0?"innereven":"innerodd"),children:s.includes("custForecast")&&!s.includes("total")&&1e3===f?(0,C.jsx)("input",{className:"textStyle",type:"text",id:e.id+"__"+t+"__"+s,onKeyPress:function(e){!function(e){var t=e.which?e.which:e.keyCode;8==t||46==t||37==t||39==t?e.key:t<48||t>57?e.preventDefault():e.key}(e)},onChange:function(n){q(n,e,t,s,e.id+"__"+t+"__"+s)},onBlur:function(n){""===n.target.value&&(n.target.value="0",q(n,e,t,s,e.id+"__"+t+"__"+s)),W()},defaultValue:e[s].match(/\d+/)?parseInt(e[s]).toLocaleString("en-IN"):e[s]}):s.includes("customer")?(0,C.jsxs)("div",{title:e[s],children:[1===e.isProspect?(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"purple"}}):(0,C.jsx)(c.gbA,{size:"0.8em",style:{color:"green"}}),(0,C.jsx)("span",{children:e[s]})]}):s.includes("executive")?(0,C.jsxs)("div",{children:["<< Unassigned >>"!=e.executive?(0,C.jsx)(C.Fragment,{children:J[e.execStatus]}):(0,C.jsx)(C.Fragment,{}),(0,C.jsx)("span",{title:e[s],children:e[s]})]}):(0,C.jsx)("div",{title:e[s],style:{textAlign:isNaN(parseFloat(e[s]))?"left":"right"},children:isNaN(parseFloat(e[s]))?e[s]:parseFloat(e[s]).toLocaleString("en-US")})}))}})),(0,C.jsx)("tr",{children:n},t)}))})),O(!1)},q=function(e,n,s,r,l){var i=document.getElementById(l).classList,c=e.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");e.target.value=c,t[s][r]!==e.target.value?!i.contains("empty")&&i.add("empty"):i.contains("empty")&&i.remove("empty");var a=B,o={executiveId:"",customerId:0,prospectId:0,practiceId:"",countryId:"",month:"",typ:"",val:"",comments:"",isOverridden:""};o.executiveId=n.id,1===n.isProspect?o.prospectId=n.customerId:o.customerId=n.customerId,o.practiceId=n.practiceId,o.countryId=n.countryId;var u=r.split("_");o.month=u[0]+"-"+u[1]+"-"+u[2],o.typ="custForecast",o.val=e.target.value.replace(/,/g,""),o.comments="",o.isOverridden=!1,a.some((function(e){return e.executiveId===o.executiveId&&e.customerId===o.customerId&&e.practiceId===o.practiceId&&e.countryId===o.countryId&&e.month===o.month}))?a.forEach((function(t,n){t.executiveId===o.executiveId&&t.customerId===o.customerId&&t.practiceId===o.practiceId&&t.countryId===o.countryId&&t.month===o.month&&(t.val=e.target.value.replace(/,/g,""))})):a.push(o),M(a),n[r]=e.target.value.replace(/,/g,"")},W=function(){N.forEach((function(e,t){Object.keys(e).forEach((function(t){0===e.id&&t.includes("custForecast")&&!t.includes("total")?e[t]=$(t):e.id>=0&&t.includes("custForecast")&&t.includes("total")&&(e[t]=G(t,e))}))})),H()},$=function(e){var t=0;return N.forEach((function(n,s){n.id>0&&(t+=parseInt(n[e]))})),t},G=function(e,t){var n=0;return Object.keys(t).forEach((function(s){s.includes("custForecast")&&s!==e&&(n+=parseInt(t[s]))})),n},X=function(){document.getElementsByClassName("empty").length>0?function(){var e=[];B.forEach((function(t,n){e[n]=t})),h()({method:"POST",url:V+"/SalesMS/services/saveSalesCustomerMapping?loggedUserId=".concat(z,"&reportRunId=").concat(n),data:e}).then((function(e){i(!0),setTimeout((function(){i(!1)}),8e3),l.current()}))}():(x(!0),setTimeout((function(){x(!1)}),4e3))};return(0,C.jsx)(C.Fragment,{children:A?(0,C.jsx)(F.Z,{handleAbort:function(){return O(!1)}}):(0,C.jsxs)("div",{children:[(0,C.jsx)(j.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right",marginBottom:"10px"},cursor:"pointer",onClick:function(){for(var e=["id","customerId","isProspect","practiceId","countryId","execStatus","lvl","count","isEdit","keyAttr","parentAttr","isActive"],t=Object.keys(N[0]).filter((function(t){return!e.includes(t)})).map((function(e){if("customer"===e){var t=N[0][e].split("^&"),n=t[0].includes("__")?t[0].split("__"):[];return n[2]+n[4]}return N[0][e].split("^&")[0]})),n=N.slice(1).map((function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,s.Z)(t,1)[0];return!e.includes(n)})))})).map((function(e){return Object.values(e)})),r=new(y().Workbook),l=r.addWorksheet("SalesTarget"),i=(l.addRow(t),0);i<n.length;i++)l.addRow(n[i]);[1].forEach((function(e){l.getRow(e).font={bold:!0}})),r.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesTarget.xlsx")}))}}),(0,C.jsx)("div",{className:"customerTargetsTable darkHeader toHead",children:(0,C.jsxs)("table",{className:"table table-bordered htmlTable",cellPadding:0,cellSpacing:0,children:[(0,C.jsx)("thead",{children:Q}),(0,C.jsx)("tbody",{children:k})]})}),1e3===f?(0,C.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 btn-container center my-3 mb-2",children:[(0,C.jsxs)("button",{className:"btn btn-primary mr4",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){X()},children:[(0,C.jsx)(c.TvB,{}),"Save"]}),(0,C.jsxs)("button",{className:"btn btn-primary mr4 ",style:{width:"80px",fontWeight:"bold",color:"white"},onClick:function(){!function(){for(var e=document.getElementsByClassName("empty"),n=0;n<e.length;n++){var s=e[n].id.split("__"),r=t[s[1]][s[2]];e[n].value=r.match(/\d+/)?parseInt(r).toLocaleString("en-IN"):r}I(JSON.parse(JSON.stringify(t))),H(),M([])}()},children:[(0,C.jsx)(g.bxQ,{style:{color:"white"}}),"Reset"]})]}):""]})})},B=n(7692);function M(){var e=(0,r.useRef)(null),t=(0,r.useState)([]),n=(0,s.Z)(t,2),i=(n[0],n[1]),c=(0,r.useState)(""),o=(0,s.Z)(c,2),u=o[0],d=o[1],p=(0,r.useState)([]),v=(0,s.Z)(p,2),m=v[0],f=v[1],x=(0,r.useState)([]),g=(0,s.Z)(x,2),j=g[0],S=g[1],y=(0,r.useState)(""),b=(0,s.Z)(y,2),N=b[0],I=b[1],_=(0,r.useState)("Executive"),w=(0,s.Z)(_,2),k=w[0],Z=w[1],F=(0,r.useState)(!1),M=(0,s.Z)(F,2),P=M[0],L=M[1],Q=(0,r.useRef)(null),U=(0,r.useState)(),z=(0,s.Z)(U,2),V=z[0],J=z[1],Y=(0,r.useState)(!1),H=(0,s.Z)(Y,2),q=H[0],W=H[1],$=(0,r.useState)(!1),G=(0,s.Z)($,2),X=G[0],K=G[1],ee=(0,r.useState)(!1),te=(0,s.Z)(ee,2),ne=te[0],se=te[1],re=(0,r.useState)(!1),le=(0,s.Z)(re,2),ie=le[0],ce=le[1],ae=(0,r.useState)(!1),oe=(0,s.Z)(ae,2),ue=oe[0],de=oe[1],pe=(0,r.useState)([]),ve=(0,s.Z)(pe,2),me=ve[0],fe=ve[1],he=localStorage.getItem("resId"),xe=a.N.baseUrl,ge=(0,r.useState)([]),je=(0,s.Z)(ge,2),Se=je[0],ye=je[1],be=(0,r.useState)(""),Ne=(0,s.Z)(be,2),Ie=Ne[0],_e=Ne[1];(0,r.useEffect)((function(){h().get(xe+"/ProjectMS/project/getHirarchyAccesss?loggedUserId=".concat(he)).then((function(e){var t=e.data;fe(t)})).catch((function(e){console.log(e)}))}),[]),(0,r.useEffect)((function(){we()}),[]);var we=function(){h()({method:"GET",url:xe+"/CommonMS/master/getMenus?loggedUserId=".concat(he)}).then((function(e){var t=e.data.find((function(e){return"Sales"===e.display_name})).subMenus.find((function(e){return"Services Plan & Review"===e.display_name}));ye(t.access_level)}))};return(0,r.useEffect)((function(){}),[N]),(0,r.useEffect)((function(){}),[j]),(0,r.useEffect)((function(){(q||X||ne||ie)&&window.scrollTo({top:0,behavior:"smooth"})}),[q,X,ne,ie]),(0,C.jsxs)("div",{ref:Q,children:[q&&(0,C.jsxs)("div",{className:"statusMsg success",children:[(0,C.jsx)(B.hXj,{}),"Target Saved successfully"]}),X&&(0,C.jsxs)("div",{className:"statusMsg error",children:[(0,C.jsx)(B.I2T,{}),"No modification to save"]}),ne&&(0,C.jsxs)("div",{className:"statusMsg success",children:[(0,C.jsx)(B.hXj,{}),"Mapping Saved successfully"]}),ie&&(0,C.jsxs)("div",{className:"statusMsg success",children:[(0,C.jsx)(B.hXj,{}),"Signing Targets Saved successfully"]}),(0,C.jsx)(l.Z,{setreportRunId:d,setcoloumnArray:f,setserviceData:S,serviceData:j,setcomponentSelector:I,setSummary:Z,serviceDataCall:e,setSfpipeline:i,SfPipeline:R.default,setshowSFpipeline:L,setViewBy:J,setSearch:de,hirarchy:me,setRefreshButton:_e,refreshButton:Ie}),"analytics"===N&&"Executive"===k&&ue&&(0,C.jsx)(O.Z,{Vdata:j,onclickchanger:"executive",expandableCols:["customer","country"],ViewBy:V,setViewBy:J,setshowSFpipeline:L,showSFpipeline:P,reportRunId:u,serviceData:j,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"analytics"===N&&"Practice"===k&&ue&&(0,C.jsx)(O.Z,{Vdata:j,onclickchanger:"practice",expandableCols:["customer","country"],ViewBy:V,setViewBy:J,setshowSFpipeline:L,showSFpipeline:P,reportRunId:u,serviceData:j,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"analytics"===N&&"Country"===k&&ue&&(0,C.jsx)(O.Z,{Vdata:j,onclickchanger:"country",expandableCols:["practice"],ViewBy:V,setViewBy:J,setshowSFpipeline:L,showSFpipeline:P,reportRunId:u,serviceData:j,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"analytics"===N&&"Customer"===k&&ue&&(0,C.jsx)(O.Z,{Vdata:j,onclickchanger:"customer",expandableCols:["practice","country"],ViewBy:V,setViewBy:J,setshowSFpipeline:L,showSFpipeline:P,reportRunId:u,serviceData:j,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"analytics"===N&&"Account Owner"===k&&ue&&(0,C.jsx)(O.Z,{Vdata:j,onclickchanger:"executive",expandableCols:["CSL","acc_type","Coverage"],ViewBy:V,setViewBy:J,setshowSFpipeline:L,showSFpipeline:P,reportRunId:u,serviceData:j,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"target"===N&&ue&&(0,C.jsx)(E,{serviceData:j,accessData:Se,coloumnArray:m,reportRunId:u,setMessage:W,setMessage1:K,setshowSFpipeline:L,showSFpipeline:P,hirarchy:me,componentSelector:N,setRefreshButton:_e,refreshButton:Ie}),"sgtarget"===N&&ue&&(0,C.jsx)(T,{serviceData:j,reportRunId:u,accessData:Se,coloumnArray:m,serviceDataCall:e,setMessageSgng:ce,setMessage1:K,setshowSFpipeline:L,showSFpipeline:P,componentSelector:N,hirarchy:me,setRefreshButton:_e,refreshButton:Ie}),"custTarget"===N&&ue&&(0,C.jsx)(D,{serviceData:j,reportRunId:u,coloumnArray:m,accessData:Se,serviceDataCall:e,setMessageCust:se,setMessage1:K}),"custForecast"===N&&ue&&(0,C.jsx)(A,{serviceData:j,reportRunId:u,accessData:Se,coloumnArray:m,serviceDataCall:e}),P&&ue&&(0,C.jsx)(R.default,{reportRunId:String(u),summval:k,onCloseTable:function(){L(!1)},SfPipeline:R.default,setSfpipeline:R.default})]})}},8009:function(e,t,n){n.d(t,{Z:function(){return Z}});var s=n(4942),r=n(1413),l=n(29439),i=n(59513),c=n.n(i),a=(n(68639),n(72791)),o=n(74569),u=n.n(o),d=n(34831),p=n(56355),v=n(59831),m=n(3900),f=n(36167),h=n(78983),x=n(32125),g=n(72426),j=n.n(g),S=n(83854),y=n(7692),b=n(22804),N=n(78820),I=n(57689),_=(n(86952),n(47903),n(85401)),w=(n(20586),n(72920)),C=n(38262),k=n(16030),E=n(80184);function Z(e){var t=e.setreportRunId,n=e.setcoloumnArray,i=e.setserviceData,o=(e.SfPipeline,e.setSfPipeline,e.setshowSFpipeline),g=(e.hirarchy,e.setSummary),Z=e.setcomponentSelector,T=e.serviceDataCall,A=e.setViewBy,O=(e.ViewBy,e.setSearch),R=(e.reportRunId,e.refreshButton),F=e.setRefreshButton,D=localStorage.getItem("resId"),B=(0,a.useState)(!1),M=(0,l.Z)(B,2),P=M[0],L=M[1],Q=(0,a.useState)([]),U=(0,l.Z)(Q,2),z=(U[0],U[1]),V=(0,a.useRef)(null),J=(0,a.useState)([{}]),Y=(0,l.Z)(J,2),H=Y[0],q=(Y[1],null===H||void 0===H||H.map((function(e){return null===e||void 0===e?void 0:e.id})).toString(),(0,a.useState)("")),W=(0,l.Z)(q,2),$=W[0],G=W[1],X=(0,a.useState)("0"),K=(0,l.Z)(X,2),ee=K[0],te=K[1],ne=(0,I.TH)(),se=new URLSearchParams(ne.search).get("id"),re=(0,a.useState)(!1),le=(0,l.Z)(re,2),ie=le[0],ce=le[1],ae=(0,a.useState)([]),oe=(0,l.Z)(ae,2),ue=oe[0],de=oe[1],pe=d.N.baseUrl,ve=function(){var e=new Date,t=Math.floor(e.getMonth()/3);return new Date(e.getFullYear(),3*t,1).toLocaleDateString("en-CA")},me=(0,k.v9)((function(e){return e.selectedSEState.directSETreeData})),fe=(0,a.useState)([]),he=(0,l.Z)(fe,2),xe=he[0],ge=he[1],je=(0,a.useState)(!1),Se=(0,l.Z)(je,2),ye=Se[0],be=Se[1],Ne=(0,a.useState)(!1),Ie=(0,l.Z)(Ne,2),_e=(Ie[0],Ie[1]);(0,a.useEffect)((function(){var e,t,n,s;u()({method:"get",url:pe+"/dashboardsms/savedsearch/FiltersData?saved_search_id=".concat(null===se?0:se)}).then((function(e){var t=e.data;ge(t)})),G(null===(e=JSON.parse(localStorage.getItem("selectedEngCust")))||void 0===e||null===(t=e.map((function(e){return e.id})))||void 0===t?void 0:t.toString()),te(null===(n=JSON.parse(localStorage.getItem("selectedEngCustOne")))||void 0===n||null===(s=n.map((function(e){return e.id})))||void 0===s?void 0:s.toString())}),[]);var we=(0,a.useState)({}),Ce=(0,l.Z)(we,2),ke=Ce[0],Ee=Ce[1];(0,a.useEffect)((function(){Ee((function(){return null!=se?{mode:null===xe||void 0===xe?void 0:xe.mode,from:null===xe||void 0===xe?void 0:xe.from,duration:null===xe||void 0===xe?void 0:xe.duration,measures:""==(null===xe||void 0===xe?void 0:xe.measures)?"target,call":null===xe||void 0===xe?void 0:xe.measures,viewByTime:null===xe||void 0===xe?void 0:xe.viewByTime,Divisions:null===xe||void 0===xe?void 0:xe.Divisions,monthsel:null===xe||void 0===xe?void 0:xe.monthsel,executives:null===xe||void 0===xe?void 0:xe.executives,isActive:null===xe||void 0===xe?void 0:xe.isActive,isIndividual:null===xe||void 0===xe?void 0:xe.isIndividual,customers:""==(null===xe||void 0===xe?void 0:xe.customers)?"-1":null===xe||void 0===xe?void 0:xe.customers,customerType:null===xe||void 0===xe?void 0:xe.customerType,prospects:null===xe||void 0===xe?void 0:xe.prospects,practices:null===xe||void 0===xe?void 0:xe.practices,countries:null===xe||void 0===xe?void 0:xe.countries,type:null===xe||void 0===xe?void 0:xe.type,summary:null===xe||void 0===xe?void 0:xe.summary,aelocation:null===xe||void 0===xe?void 0:xe.aelocation,engComp:null===xe||void 0===xe?void 0:xe.engComp,key:null===xe||void 0===xe?void 0:xe.key,selectExecs:null===xe||void 0===xe?void 0:xe.selectExecs,fyear:null===xe||void 0===xe?void 0:xe.fyear,accType:null===xe||void 0===xe?void 0:xe.accType,accOwner:null===xe||void 0===xe?void 0:xe.accOwner,newCust:null===xe||void 0===xe?void 0:xe.newCust,showBy:null===xe||void 0===xe?void 0:xe.showBy,vendors:null===xe||void 0===xe?void 0:xe.vendors,optType:null===xe||void 0===xe?void 0:xe.optType,quarter:null===xe||void 0===xe?void 0:xe.quarter,status:null===xe||void 0===xe?void 0:xe.status,duration2:null===xe||void 0===xe?void 0:xe.duration2,divisions:null===xe||void 0===xe?void 0:xe.divisions}:{mode:"view",from:j()(ve()).format("yyyy-MM-DD"),duration:"4",measures:"target,call",viewByTime:"quarter",Divisions:"-1",monthsel:j()(new Date).startOf("month").format("YYYY-MM-DD"),executives:"-2",isActive:"true",isIndividual:"false",customers:"-1",customerType:"-1",prospects:"-1",practices:"1,3,4,6,999",countries:"6,5,3,8,7,1,2,4",type:"analytics",summary:"Executive",aelocation:"-1",engComp:"-1",key:String((new Date).getTime()),selectExecs:"",accType:"-1",accOwner:"-1",newCust:"-1",showBy:"-1",vendors:"-1",optType:"-1",quarter:"-1",status:"-1",duration2:"-1",divisions:"-1"}}))}),[xe,se]);var Ze=(0,a.useState)(!1),Te=(0,l.Z)(Ze,2),Ae=Te[0],Oe=Te[1],Re=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal")),Fe=null!==localStorage.getItem("isIndividualCheckedLocal")&&JSON.parse(localStorage.getItem("isIndividualCheckedLocal")),De=(0,a.useState)(!1),Be=(0,l.Z)(De,2),Me=Be[0],Pe=Be[1],Le=(0,a.useState)(!1),Qe=(0,l.Z)(Le,2),Ue=Qe[0],ze=Qe[1],Ve=(0,a.useState)(p.UdN),Je=(0,l.Z)(Ve,2),Ye=Je[0],He=Je[1],qe=(0,a.useRef)([]),We=(0,a.useState)(new Date),$e=(0,l.Z)(We,2),Ge=$e[0],Xe=$e[1],Ke=(0,a.useState)([]),et=(0,l.Z)(Ke,2),tt=et[0],nt=et[1],st=(0,a.useState)([]),rt=(0,l.Z)(st,2),lt=rt[0],it=rt[1],ct=(0,a.useState)(!1),at=(0,l.Z)(ct,2),ot=at[0],ut=at[1],dt=(0,a.useState)("analytics"),pt=(0,l.Z)(dt,2),vt=pt[0],mt=pt[1],ft=(0,a.useState)(!1),ht=(0,l.Z)(ft,2),xt=(ht[0],ht[1],(0,a.useState)([])),gt=(0,l.Z)(xt,2),jt=gt[0],St=gt[1],yt=(0,a.useState)("<< All SE >>"),bt=(0,l.Z)(yt,2),Nt=bt[0],It=bt[1],_t=(0,a.useState)(-2),wt=(0,l.Z)(_t,2),Ct=wt[0],kt=wt[1],Et=(0,a.useState)([]),Zt=(0,l.Z)(Et,2),Tt=Zt[0],At=Zt[1],Ot=(0,a.useState)([]),Rt=(0,l.Z)(Ot,2),Ft=Rt[0],Dt=Rt[1],Bt=(0,a.useState)([]),Mt=(0,l.Z)(Bt,2),Pt=Mt[0],Lt=Mt[1],Qt=(0,a.useState)(Pt),Ut=(0,l.Z)(Qt,2),zt=Ut[0],Vt=Ut[1],Jt=(0,a.useState)([]),Yt=(0,l.Z)(Jt,2),Ht=Yt[0],qt=Yt[1],Wt=(0,a.useState)([]),$t=(0,l.Z)(Wt,2),Gt=$t[0],Xt=$t[1],Kt=(0,a.useState)([]),en=(0,l.Z)(Kt,2),tn=en[0],nn=en[1],sn=(0,a.useState)([]),rn=(0,l.Z)(sn,2),ln=rn[0],cn=rn[1],an=(0,a.useState)([]),on=(0,l.Z)(an,2),un=on[0],dn=on[1],pn=(0,a.useState)([]),vn=(0,l.Z)(pn,2),mn=vn[0],fn=vn[1],hn=(0,a.useState)([]),xn=(0,l.Z)(hn,2),gn=xn[0],jn=xn[1],Sn=(0,a.useState)([]),yn=(0,l.Z)(Sn,2),bn=yn[0],Nn=yn[1],In=(0,a.useState)([]),_n=(0,l.Z)(In,2),wn=_n[0],Cn=_n[1],kn=(0,a.useState)(!1),En=(0,l.Z)(kn,2),Zn=(En[0],En[1]),Tn=(0,a.useState)([]),An=(0,l.Z)(Tn,2),On=An[0],Rn=An[1],Fn=(0,a.useState)([]),Dn=(0,l.Z)(Fn,2),Bn=Dn[0],Mn=Dn[1],Pn=(0,a.useState)(!1),Ln=(0,l.Z)(Pn,2),Qn=Ln[0],Un=Ln[1],zn=(0,a.useState)((function(){var e=new Date;return e.setFullYear(e.getFullYear()+1),e.setMonth(e.getMonth()-3),e})),Vn=(0,l.Z)(zn,2),Jn=Vn[0],Yn=Vn[1],Hn=[{value:"target",label:"Targets"},{value:"sgtrgt",label:"Signings target"},{value:"custForecast",label:"Customer Mapping"},{value:"call",label:"Calls"},{value:"estRev",label:"Est. Revenue"},{value:"sf",label:"Sf Revenue"},{value:"pl",label:"Planned Revenue"},{value:"rr",label:"Recognized Revenue"},{value:"at",label:"Attainment %"},{value:"sgns",label:"signings"}],qn=(0,a.useState)([{value:"target",label:"Targets"},{value:"call",label:"Calls"}]),Wn=(0,l.Z)(qn,2),$n=Wn[0],Gn=Wn[1],Xn=(0,a.useState)([]),Kn=(0,l.Z)(Xn,2),es=Kn[0],ts=Kn[1];(0,a.useEffect)((function(){ns()}),[]);var ns=function(){u()({method:"GET",url:pe+"/CommonMS/master/getMenus?loggedUserId=".concat(D)}).then((function(e){var t=e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Project Timesheet (Deprecated)"!==e.display_name&&"Invoice Details"!==e.display_name&&"Accounting"!==e.display_name&&"Upload"!==e.display_name&&"Practice Calls [Deprecated]"!==e.display_name}))),e}));t.forEach((function(e){"Sales"===e.display_name&&ts([e])}));var n=t.find((function(e){return"Sales"===e.display_name})).subMenus.find((function(e){return"Services Plan & Review"===e.display_name}));At(n.access_level)}))};(0,a.useEffect)((function(){if(null!=se){Pt.filter((function(e){var t;return null===(t=ke.Divisions)||void 0===t?void 0:t.includes(parseInt(e.value))}));var e,t,n=xe.Divisions,s=n?n.split(",").map(Number):[],r=Pt.filter((function(e){return s.includes(e.value)})),l=tn.filter((function(e){var t;return null===xe||void 0===xe||null===(t=xe.countries)||void 0===t?void 0:t.includes(parseInt(e.value))})),i=Ht.filter((function(e){var t;return null===(t=ke.engComp)||void 0===t?void 0:t.includes(parseInt(e.value))})),c=Hn.filter((function(e){var t;return null===(t=xe.measures)||void 0===t?void 0:t.includes(e.value)})),a=null===wn||void 0===wn?void 0:wn.filter((function(e){var t;return null===xe||void 0===xe||null===(t=xe.practices)||void 0===t?void 0:t.includes(e.value)})),o=tn.filter((function(e){var t;return null===ke||void 0===ke||null===(t=ke.aelocation)||void 0===t?void 0:t.includes(e.value)}));if(void 0!==xe.from&&""!==xe.from){var u=new Date(xe.from);u.setMonth(u.getMonth()-3),u.setFullYear(u.getFullYear()+1),Yn(u)}var d=null===ke||void 0===ke?void 0:ke.executives,p=null===xe||void 0===xe?void 0:xe.type,m=ke.accType;if(void 0!==xe.from&&""!==xe.from){var f=xe.from;console.log(f),Xe((0,v.default)(f))}mt(p),Rn(m),(null===(e=ke.executives)||void 0===e?void 0:e.length)>3?kt("1"):kt(d);var h=null===tt||void 0===tt?void 0:tt.filter((function(e){var t;return null===xe||void 0===xe||null===(t=xe.accOwner)||void 0===t?void 0:t.includes(e.value)}));if(it(h),Mn(a),"-1"==xe.Divisions?Vt(Pt):Vt(r),"analytics"===(null===ke||void 0===ke?void 0:ke.type)&&"-1"!=(null===ke||void 0===ke?void 0:ke.aelocation)?(cn(o),Nn(ue)):(Nn(ue),cn(tn)),"custTarget"==ke.type&&"6,5,3,8,7,1,2"!=(null===xe||void 0===xe?void 0:xe.countries)&&cn(l),"target"==ke.type&&Nn(l),Z(vt),Gn(c),-1==(null===ke||void 0===ke?void 0:ke.engComp)?Xt(Ht):Xt(i),"-1"===xe.executives){It("<< Active SE >>")}else if("-3"===xe.executives){It("<< InActive SE >>")}else if("1"===xe.executives){It("<< Select SE >>")}else if("-2"===xe.executives){It("<< All SE >>")}else if((null===xe||void 0===xe||null===(t=xe.executives)||void 0===t?void 0:t.length)>3){It("<< Select SE >>")}}}),[se,ke.Divisions,ke.aelocation==ke.aelocation=="1,2,3,5,6,7,8,4"?"-1":ke.aelocation,ke.engComp,Pt,tn,Ht,xe.countries,wn,null===xe||void 0===xe?void 0:xe.type,ke.type,null===xe||void 0===xe?void 0:xe.from,ke.practices,ke.accOwner,xe.accOwner,tt]),(0,a.useEffect)((function(){null!=se&&setTimeout((function(){us()}),4e3)}),[ke]);var ss=function(e){e.expanded;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(p.qL$,{className:"chevronIcon"})})},rs=(0,a.useState)(),ls=(0,l.Z)(rs,2),is=ls[0],cs=ls[1],as=function(e){var t=e.id,n=e.value;if("summary"==t&&Ee((function(e){var n;return(0,r.Z)((0,r.Z)({},e),{},(n={},(0,s.Z)(n,t,"aelocation"),(0,s.Z)(n,"aelocation",-1),n))})),"viewByTime"==t&&(cs(n),Ee((function(e){var l;return(0,r.Z)((0,r.Z)({},e),{},(l={},(0,s.Z)(l,t,n),(0,s.Z)(l,"duration","quarter"===n?"4":"6"),l))}))),Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({},t,n))})),"executives"===t&&"1"===n&&ze(!0),"from"===t&&Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{fyear:j()(n).format("yyyy-MM-DD")})})),"type"===t)switch(Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,s.Z)({viewByTime:"quarter",countries:"6,5,3,8,7,1,2",customers:"-1",customerType:"-1",practices:"1,3,4,6",aelocation:"-1",engComp:"-1",executives:"-2",duration:"4"},"aelocation","-1"))})),n){case"target":Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"edit",summary:"none",measures:"",prospects:"",from:j()(ve()).format("yyyy-MM-DD"),aelocation:"-1"})}));break;case"sgtarget":Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"sgtargets",summary:"Executive",measures:-1,countries:-1,practices:-1,monthsel:j()(new Date).startOf("month").format("YYYY-MM-DD"),from:"2023-04-01",fyear:"2023-04-01",aelocation:"-1",prospects:-1})}));break;case"custForecast":Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"edit",summary:"none",measures:"custForecast,target",prospects:"0"})}));break;case"custTarget":Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"edit",summary:"none",measures:"ccustForecast",from:j()(ve()).format("yyyy-MM-DD"),prospects:$,customers:""==ee?"":ee,selectExecs:Re.map((function(e){return e.salesPersonName})).join(", ")})}));break;case"analytics":Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{mode:"view",summary:"Executive",measures:"target,call",prospects:"-1"})}))}};(0,a.useEffect)((function(){"success"==R&&(ds(),F(""))}),[R]);var os=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},us=function(){A(is),Zn(!0);var e=ke,t=qe.current.filter((function(e){return null!=e}));qe.current=t;var n=(0,x.Z)(qe);1==n&&(Un(!1),ut(!0)),n||("0"===e.executives||"1"===e.executives&&(null===localStorage.getItem("selectedSELocal")||void 0===localStorage.getItem("selectedSELocal")||"[]"===localStorage.getItem("selectedSELocal"))||"1"===e.customers&&(null===localStorage.getItem("selectedCust")||void 0===localStorage.getItem("selectedCust")||"[]"===localStorage.getItem("selectedCust"))?ut(!0):ps(e),setTimeout((function(){Zn(!1)}),2e3))},ds=function(){var e,s,r,l;O(!1),i([]);var c=null;c=ke;var a=setTimeout((function(){null==se&&Un(!0)}),2e3);ut(!1),null==se&&(c.aelocation="Account Owner"===c.summary||"6,5,3,8,7,1,2,4"===c.aelocation?-1:c.aelocation,c.executives="1"==c.executives?me:c.executives),c.prospects=""==(null===(e=JSON.parse(localStorage.getItem("selectedEngCust")))||void 0===e?void 0:e.map((function(e){return e.id})).toString())?"-1":null===(s=JSON.parse(localStorage.getItem("selectedEngCust")))||void 0===s?void 0:s.map((function(e){return e.id})).toString(),c.customers=""==(null===(r=JSON.parse(localStorage.getItem("selectedEngCustOne")))||void 0===r?void 0:r.map((function(e){return e.id})).toString())?"0":null===(l=JSON.parse(localStorage.getItem("selectedEngCustOne")))||void 0===l?void 0:l.map((function(e){return e.id})).toString(),u().post(pe+"/SalesMS/services/getSalesTargets",c).then((function(e){var s,r,l,o,u,d=e.data.data;O(!0);var v=e.data.reportRunId,m=[];switch(Un(!1),vt){case"target":m=null===(s=e.data.SalesTargets)||void 0===s?void 0:s.split(",");break;case"sgtarget":m=null===(r=e.data.SalesSigningTargets)||void 0===r?void 0:r.split(",");break;case"custForecast":m=null===(l=e.data.CustomerForecasts)||void 0===l?void 0:l.split(",");break;case"custTarget":m=null===(o=e.data.CustomerTargets)||void 0===o?void 0:o.split(",");break;case"analytics":m=null===(u=e.data.analytics)||void 0===u?void 0:u.split(",")}n(m);var f=d.map((function(e){return JSON.parse(JSON.stringify(e,m,4))}));g(c.summary),Z(vt),i(f),Un(!1),clearTimeout(a),t(v),Pe(!Me),!valid&&Me?He(p.UdN):He(p.NR5),Un(!1)})).catch((function(e){console.log(e)}))},ps=function(){O(!1),i([]);var e=null;e=ke;var s,r=setTimeout((function(){null==se&&Un(!0)}),2e3);(ut(!1),null==se)&&(e.aelocation="Account Owner"===e.summary||"6,5,3,8,7,1,2,4"===e.aelocation?-1:e.aelocation,e.executives="1"==e.executives?me:null===(s=e)||void 0===s?void 0:s.executives);e.prospects=""==xe.prospects?"-1":xe.prospects,e.customers=""==xe.customers?"0":xe.customers,u().post(pe+"/SalesMS/services/getSalesTargets",e).then((function(s){var l,c,a,o,u,d=s.data.data;O(!0);var v=s.data.reportRunId,m=[];switch(Un(!1),vt){case"target":m=null===(l=s.data.SalesTargets)||void 0===l?void 0:l.split(",");break;case"sgtarget":m=null===(c=s.data.SalesSigningTargets)||void 0===c?void 0:c.split(",");break;case"custForecast":m=null===(a=s.data.CustomerForecasts)||void 0===a?void 0:a.split(",");break;case"custTarget":m=null===(o=s.data.CustomerTargets)||void 0===o?void 0:o.split(",");break;case"analytics":m=null===(u=s.data.analytics)||void 0===u?void 0:u.split(",")}n(m);var f=d.map((function(e){return JSON.parse(JSON.stringify(e,m,4))}));g(e.summary),Z(vt),i(f),Un(!1),clearTimeout(r),t(v),Pe(!Me),!valid&&Me?He(p.UdN):He(p.NR5),Un(!1)})).catch((function(e){console.log(e)}))};(0,a.useEffect)((function(){u().get(pe+"/SalesMS/MasterController/salesExecutiveData").then((function(e){var t=e.data.filter((function(e){return 1===e.isActive})).map((function(e){return(0,E.jsx)("option",{value:e.val,children:e.lkupName},e.id)}));Dt(t)})).catch((function(e){})),u().get(pe+"/SalesMS/MasterController/SFOwnerDivisions").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.owner_Division}}));Lt(t),null==se&&Vt(t)})).catch((function(e){console.log(e)})),u().get(pe+"/CommonMS/master/getCompany").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.company_name}}));qt(t),null==se&&Xt(t)})).catch((function(e){console.log(e)})),u().get(pe+"/CommonMS/master/getCountries").then((function(e){var t=e.data;t.push({id:4,country_name:"Others"});var n=t.filter((function(e){return"NM"!==e.country_name})).sort((function(e,t){return"Others"===e.country_name?1:"Others"===t.country_name?-1:e.country_name.localeCompare(t.country_name)})).map((function(e){return{value:e.id,label:e.country_name}}));de(n.filter((function(e){return"Others"!=e.label}))),nn(n),null==se&&(cn(n),dn(n),fn(n),jn(n),Nn(n.filter((function(e){return"Others"!=e.label}))))})).catch((function(e){console.log(e)})),u().get(pe+"/CommonMS/master/getDepartments").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.group_name}}));Cn(t),null==se&&Mn(t)})).catch((function(e){console.log(e)})),u().get(pe+"/SalesMS/MasterController/getResources?isActive=0").then((function(e){var t=e.data;t.sort((function(e,t){return e.resourceName>t.resourceName}));var n=t.map((function(e){return(0,E.jsx)("option",{value:e.resourcesId,children:e.resourceName},e.userId)}));St(n)})).catch((function(e){})),u()({method:"get",url:pe+"/ProjectMS/Engagement/getAccountOwner"}).then((function(e){var t=[],n=e.data;n.length>0&&n.forEach((function(e){var n={label:e.Name,value:e.account_owner_id};t.push(n)})),t.push({label:"UnAssigned",value:999}),nt(t),it(t)}))}),[]),(0,a.useEffect)((function(){T.current=ds}),[ke]);return(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:"col-md-12",children:(0,E.jsxs)("div",{className:"pageTitle",children:[(0,E.jsx)("div",{className:"childOne"}),(0,E.jsx)("div",{className:"childTwo",children:(0,E.jsx)("h2",{children:"Services Plan and Review"})}),(0,E.jsx)("div",{className:"childThree"})]})}),(0,E.jsx)(C.Z,{routes:es,currentScreenName:["Services Plan and Review"]}),ot?(0,E.jsxs)("div",{className:"statusMsg error",children:[" ",(0,E.jsx)(N.CSE,{})," Please select valid values for highlighted fields"]}):"",Ae?(0,E.jsx)("div",{className:"statusMsg success",children:(0,E.jsxs)("span",{className:"errMsg",children:[(0,E.jsx)(y.hXj,{size:"1.4em"})," \xa0 Search created successfully."]})}):"",(0,E.jsxs)("div",{className:"group customCard",children:[(0,E.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,E.jsx)("h2",{children:"Search Filters"}),(0,E.jsx)("div",{className:"helpBtn",children:(0,E.jsx)(w.Z,{pdfname:"Services Plan and Review.pdf",name:"Services Plan and Review Help"})}),(0,E.jsx)("div",{className:"col-md-0 saveBtn",children:(0,E.jsx)(b.Z,{setEditAddmsg:Oe,pageurl:"http://10.11.12.149:3000/#/pmo/salesTargets",page_Name:"Sales",payload:ke})})," ","\xa0\xa0",(0,E.jsx)("div",{onClick:function(){Pe(!Me),He(Me?p.UdN:p.NR5)},children:(0,E.jsx)("span",{children:Ye})})]}),(0,E.jsx)(h.V9,{visible:!Me,children:(0,E.jsxs)("div",{className:"group-content row",children:[(0,E.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Action"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsxs)("select",{id:"type",className:"col-md-12 col-sm-12 col-xs-12 ",value:vt,onChange:function(e){It("<< All SE >>"),as(e.target),mt(e.target.value),kt(-2)},children:[(0,E.jsx)("option",{value:"custTarget",children:"Customer Targets"}),(0,E.jsx)("option",{value:"sgtarget",children:"Signings Targets"}),(0,E.jsx)("option",{value:"target",children:"Targets"}),(0,E.jsx)("option",{value:"analytics",children:"View"})]})})]})}),["analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"View By"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsxs)("select",{id:"viewByTime",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",value:ke.viewByTime,onChange:function(e){as(e.target)},children:[(0,E.jsx)("option",{value:"month",children:"Month"}),(0,E.jsx)("option",{value:"quarter",children:"Quarter"})]})})]})}),["sgtarget"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",id:"week-picker-wrapper",children:[(0,E.jsx)("label",{className:"col-5",children:"Financial Year"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsx)(c(),{selected:Jn,onChange:function(e){Yn(e);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()),t.setMonth(t.getMonth()+3);var n=e.getFullYear()+1,s=new Date(e.getTime());s.setFullYear(n),Yn(s),as({id:"from",value:j()(t).format("yyyy-MM-DD")})},dateFormat:"'FY' yyyy",showYearPicker:!0})})]})}),["target","custForecast","custTarget","custTarget","analytics"].includes(vt)&&"quarter"==ke.viewByTime&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",id:"week-picker-wrapper",children:[(0,E.jsxs)("label",{className:"col-5",children:["From Quarter",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 datepicker ",ref:function(e){qe.current[0]=e},children:(0,E.jsx)(c(),{className:"disabledFieldLook",selected:Jn,onChange:function(e){Yn(e);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()-1),t.setMonth(t.getMonth()+3),as({id:"from",value:t.toLocaleDateString("en-CA")})},dateFormat:"'FY' yyyy-QQQ",showQuarterYearPicker:!0})})]})}),"month"==ke.viewByTime&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row ",children:[(0,E.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["From Month",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("div",{className:"col-6 datepicker",style:{zIndex:4},children:(0,E.jsx)(c(),{onChange:function(e){Yn(e);var t=new Date(e.getTime());t.setFullYear(t.getFullYear()),t.setMonth(t.getMonth()),as({id:"monthsel",value:t.toLocaleDateString("en-CA")}),Xe(e)},selected:Ge,dateFormat:"MMM-yyyy",showMonthYearPicker:!0,onKeyDown:function(e){e.preventDefault()}})})]})}),["target","custForecast","custTarget","analytics"].includes(vt)&&"quarter"===ke.viewByTime&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Duration"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsxs)("select",{id:"duration",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",defaultValue:"4",value:ke.duration,onChange:function(e){as(e.target)},children:[(0,E.jsx)("option",{value:"1",children:"1"}),(0,E.jsx)("option",{value:"2",children:"2"}),(0,E.jsx)("option",{value:"3",children:"3"}),(0,E.jsx)("option",{value:"4",children:"4"})]})})]})}),"month"===ke.viewByTime&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Duration"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsxs)("select",{id:"duration",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",onChange:function(e){as(e.target)},value:ke.duration,children:[(0,E.jsx)("option",{value:"1",children:"1"}),(0,E.jsx)("option",{value:"2",children:"2"}),(0,E.jsx)("option",{value:"3",children:"3"}),(0,E.jsx)("option",{value:"4",children:"4"}),(0,E.jsx)("option",{value:"5",children:"5"}),(0,E.jsx)("option",{value:"6",children:"6"}),(0,E.jsx)("option",{value:"7",children:"7"}),(0,E.jsx)("option",{value:"8",children:"8"}),(0,E.jsx)("option",{value:"9",children:"9"}),(0,E.jsx)("option",{value:"10",children:"10"}),(0,E.jsx)("option",{value:"11",children:"11"}),(0,E.jsx)("option",{value:"12",children:"12"})]})})]})}),["target","sgtarget","custTarget","analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Sales Executive",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 ",children:(0,E.jsx)("div",{children:1e3===Tt||500===Tt?(0,E.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12 text",value:Ct,onChange:function(e){as(e.target),It(e.target.options[e.target.selectedIndex].text),kt(e.target.value)},ref:function(e){qe.current[1]=e},disabled:"Account Owner"==ke.summary,children:[(0,E.jsx)("option",{value:"null",children:"<< Please select>> "}),Ft]}):(0,E.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12 text",value:Ct,onChange:function(e){as(e.target),It(e.target.options[e.target.selectedIndex].text),kt(e.target.value)},ref:function(e){qe.current[1]=e},disabled:"Account Owner"==ke.summary,children:[(0,E.jsx)("option",{value:"null",children:"<< Please select>> "}),(0,E.jsx)("option",{value:"1",children:"Select SE"})]})})})]})}),["target","custForecast","custTarget","analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row ",children:[(0,E.jsxs)("label",{className:"col-5",children:["Practice",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect ",ref:function(e){qe.current[2]=e},children:(0,E.jsx)(f.NU,{className:"disableField",ArrowRenderer:ss,options:wn.sort((function(e,t){return e.label.localeCompare(t.label)})),hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Bn,valueRenderer:os,disabled:"view"==ke.mode,onChange:function(e){Mn(e);var t=e.map((function(e){return e.value}));as({id:"practices",value:t.toString()})}})})]})}),["target","custForecast","analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Res Location",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[3]=e},children:(0,E.jsx)(f.NU,{className:"disableField",ArrowRenderer:ss,options:ue,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:bn,valueRenderer:os,disabled:"view"==ke.mode,onChange:function(e){Nn(e);var t=e.map((function(e){return e.value}));as({id:"countries",value:t.toString()})}})})]})}),["custForecast","custTarget"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Customer"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsxs)("select",{ref:function(e){qe.current[0]=e},className:"text cancel",name:"Select Customer",id:"searchType",onChange:function(e){var t=e.target,n=(t.id,t.name),s=t.value;"Select Customer"==n&&"1"===s?(L(!0),ce(!0),Ee((function(e){var t,n;return(0,r.Z)((0,r.Z)({},e),{},{customerType:"1",prospects:null===(t=JSON.parse(localStorage.getItem("selectedEngCust")))||void 0===t?void 0:t.map((function(e){return e.id})).toString(),customers:null===(n=JSON.parse(localStorage.getItem("selectedEngCustOne")))||void 0===n?void 0:n.map((function(e){return e.id})).toString()})}))):Ee((function(e){return(0,r.Z)((0,r.Z)({},e),{},{customerType:"-1",customers:"",prospects:""})}))},value:null===ke||void 0===ke?void 0:ke.customerType,children:[H.length+"selected",(0,E.jsx)("option",{value:"-1",children:" <<ALL>>"}),(0,E.jsx)("option",{value:"1",children:"Select"})]})})]})}),["target","custForecast","analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Summary"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 ",children:(0,E.jsxs)("select",{id:"summary",className:"col-md-12 col-sm-12 col-xs-12 ",value:ke.summary,onChange:function(e){be(!0),as(e.target),fn(un),jn(un)},children:[("analytics"===vt||"custForecast"===vt)&&(0,E.jsx)("option",{value:"Account Owner",children:"Account Owner"}),("analytics"===vt||"custForecast"===vt)&&(0,E.jsx)("option",{value:"Customer",children:"Customer"}),"analytics"===vt&&(0,E.jsx)("option",{value:"Executive",children:"Executive"}),("target"===vt||"custForecast"===vt)&&(0,E.jsx)("option",{value:"none",children:"<< None >>"}),("target"===vt||"custForecast"===vt)&&(0,E.jsx)("option",{value:"country",children:" Country "})]})})]})}),["analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Measures",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[4]=e},children:(0,E.jsx)(f.NU,{ArrowRenderer:ss,options:Hn.sort((function(e,t){return e.label.localeCompare(t.label)})),hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:$n,valueRenderer:os,disabled:!1,onChange:function(e){Gn(e);var t=e.map((function(e){return e.value}));as({id:"measures",value:t.toString()})}})})]})}),["target","sgtarget","custForecast","custTarget","analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Owner Division",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[5]=e},children:(0,E.jsx)(f.NU,{ArrowRenderer:ss,options:Pt,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:zt,valueRenderer:os,disabled:!1,onChange:function(e){Vt(e);var t=e.map((function(e){return e.value}));as({id:"Divisions",value:t.toString()==Pt.map((function(e){return e.value})).join(",")?"-1":t.toString()})}})})]})}),["custTarget"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Country"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6",children:(0,E.jsx)(f.NU,{ArrowRenderer:ss,options:tn,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:ln,valueRenderer:os,disabled:!1,onChange:function(e){cn(e);var t=e.map((function(e){return e.value}));as({id:"countries",value:t.toString()})}})})]})}),["custForecast"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",id:"execSelDiv",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Sales Executive"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 ",children:(0,E.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12",onChange:function(e){as(e.target),It(e.target.options[e.target.selectedIndex].text)},children:[(0,E.jsx)("option",{value:0,children:"<< Please select>> "}),jt]})})]})}),["analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["AE Location",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[6]=e},children:(0,E.jsx)(f.NU,{className:"disableField",ArrowRenderer:ss,options:tn,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:null===se?"Account Owner"===ke.summary?un:"Executive"===ke.summary&&ye?mn:"Customer"===ke.summary&&ye?gn:ln:ln,valueRenderer:os,disabled:"Account Owner"==ke.summary,onChange:function(e){_e(!0),cn(e),fn(e),jn(e);var t=e.map((function(e){return e.value}));as({id:"aelocation",value:t.toString()==tn.map((function(e){return e.value})).join(",")?"-1":t.toString()})}})})]})}),["analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Eng.Company",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[7]=e},children:(0,E.jsx)(f.NU,{ArrowRenderer:ss,options:Ht.sort((function(e,t){return e.label.localeCompare(t.label)})),hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Gt,valueRenderer:os,disabled:!1,onChange:function(e){Xt(e);var t=e.map((function(e){return e.value}));as({id:"engComp",value:t.toString()==Ht.map((function(e){return e.value})).join(",")?"-1":t.toString()})}})})]})}),"Account Owner"==(null===ke||void 0===ke?void 0:ke.summary)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsxs)("label",{className:"col-5",children:["Account Owner",(0,E.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 multiselect",ref:function(e){qe.current[8]=e},children:(0,E.jsx)(f.NU,{ArrowRenderer:ss,id:"accOwner",options:tt,hasSelectAll:!0,value:lt,valueRenderer:os,shouldToggleOnHover:!1,disableSearch:!1,disabled:!1,onChange:function(e){it(e);var t=e.map((function(e){return e.value}));console.log(t,"selected"),as({id:"accOwner",value:t.toString()==tt.map((function(e){return e.value})).join(",")?"-1":t.toString()})}})})]})}),["analytics"].includes(vt)&&(0,E.jsx)("div",{className:"col-md-4 mb-2",children:(0,E.jsxs)("div",{className:"form-group row",children:[(0,E.jsx)("label",{className:"col-5",children:"Account Type"}),(0,E.jsx)("span",{className:"col-1 p-0",children:":"}),(0,E.jsx)("span",{className:"col-6 ",children:(0,E.jsxs)("select",{id:"accType",className:"col-md-12 col-sm-12 col-xs-12 ",value:On,onChange:function(e){as(e.target),Rn(e.target.value)},children:[(0,E.jsx)("option",{value:-1,children:"ALL"}),(0,E.jsx)("option",{value:1,children:"Current Account"}),(0,E.jsx)("option",{value:2,children:"New Logo"})]})})]})}),(0,E.jsx)("div",{className:"col-md-12 no-padding section",children:(0,E.jsx)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"},children:(0,E.jsxs)("span",{className:"selectedSE",children:[(0,E.jsx)("b",{children:"Selected SE : "}),(0,E.jsx)("span",{className:"dynText",children:"<< Select SE >>"===Nt?Re.map((function(e,t){return(0,E.jsxs)("span",{children:[Fe?e.salesPersonName?e.salesPersonName:e.text:e.salesPersonName?e.salesPersonName:e.text+" & Team",t===Re.length-1?"":", "]},e.id)})):Nt})]})})}),(0,E.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,E.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){!function(){A(is),Zn(!0);var e=ke,t=qe.current.filter((function(e){return null!=e}));qe.current=t;var n=(0,x.Z)(qe);1==n&&(Un(!1),ut(!0)),n||("0"===e.executives||"1"===e.executives&&(null===localStorage.getItem("selectedSELocal")||void 0===localStorage.getItem("selectedSELocal")||"[]"===localStorage.getItem("selectedSELocal"))||"1"===e.customers&&(null===localStorage.getItem("selectedCust")||void 0===localStorage.getItem("selectedCust")||"[]"===localStorage.getItem("selectedCust"))?ut(!0):ds(e),setTimeout((function(){Zn(!1)}),2e3))}(),o(!1)},children:[(0,E.jsx)(p.U41,{})," Search"]})}),(0,E.jsx)(_.Z,{visible:P,setVisible:L,value:"select",setCollectedProspect:z,setPopupIsLoading:ce,executiveIds:Re.map((function(e){return e.id}))}),(0,E.jsx)(m.default,{visible:Ue,setVisible:ze,accessData:Tt})]})})]}),Qn&&(0,E.jsx)(S.Z,{handleAbort:function(){return Un(!1)}}),(0,E.jsx)(E.Fragment,{children:1==ie?(0,E.jsx)("div",{className:"loader",children:(0,E.jsx)("div",{className:"loader-animation",style:{textAlign:"center"},children:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(S.Z,{handleAbort:function(){V.current&&V.current.abort()}})})})}):""})]})}},86952:function(e,t,n){n.d(t,{Z:function(){return S}});var s=n(93433),r=n(29439),l=n(56355),i=n(72791),c=n(49177),a=n(34911),o=n(56637),u=n(53824),d=n(48462),p=n(59170),v=n(16856),m=n(51263),f=n(17425),h=n(25415),x=n.n(h),g=(n(80296),n(37683)),j=n(80184);function S(e){var t=e.Vdata,n=e.onclickchanger,h=e.expandableCols,S=e.ViewBy,y=e.setshowSFpipeline,b=e.showSFpipeline,N=e.reportRunId,I=e.serviceData,_=e.componentSelector,w=e.setRefreshButton,C=e.refreshButton,k={fte0:(0,j.jsx)("img",{src:a,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,j.jsx)("img",{src:c,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,j.jsx)("img",{src:o,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,j.jsx)("img",{src:d,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,j.jsx)("img",{src:u,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,j.jsx)("img",{src:p,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})},E={1:(0,j.jsx)(l.gbA,{size:"0.8em",style:{color:"purple"}}),0:(0,j.jsx)(l.gbA,{size:"0.8em",style:{color:"green"}})},Z=(0,i.useState)([]),T=(0,r.Z)(Z,2),A=T[0],O=T[1],R=(0,i.useState)([]),F=(0,r.Z)(R,2),D=F[0],B=F[1],M=null===t||void 0===t?void 0:t.filter((function(e){return 1===e.lvl})).map((function(e){return e[n]})),P=null===t||void 0===t?void 0:t.filter((function(e){return 2===e.lvl})).map((function(e){return e[n]})),L=(0,i.useState)([]),Q=(0,r.Z)(L,2),U=Q[0],z=Q[1],V=(0,i.useState)(!1),J=(0,r.Z)(V,2),Y=J[0],H=J[1],q=(0,i.useState)({}),W=(0,r.Z)(q,2),$=W[0],G=W[1];(0,i.useEffect)((function(){O([]),B([]),z([])}),[t]);var X=0,K=0,ee=0,te="",ne=["target","call","custForecast","sf","pl","rr","sgns","attperc","est","sgtrgt"],se=["id","customerId","execStatus","supervisor","salesExecId","salesExec","customerTmp","salesExecStatus","practiceId","countryId","isProspect","lvl","count","isEdit","keyAttr","parentAttr"],re=null===t||void 0===t?void 0:t.map((function(e,t){var r=[];X=2===e.lvl?X:A.includes(e[n])?1:0,3===e.lvl?X=0:K=D.includes(e[n])?1:0;var i=function(n){var i,c;n.includes("Q")&&(ee=U.includes(n.split("_")[1])?1:0),!se.includes(n)&&(D.length<0||(!h.includes(n)||D.length>0&&n.includes("Coverage")||(!h.includes(n)||D.length>0&&n.includes("CSL")||(!h.includes(n)||D.length>0&&n.includes("acc_type")||!h.includes(n)))))&&r.push((-2===e.id&&(n.includes("total")?n.split("_")[0]!==te.split("_")[0]:n.split("_")[1]!==te.split("_")[1]||n.includes("executive")||n.includes("customer")||n.includes("country")||n.includes("CSL"))||-1===e.id)&&""!==e[n]&&(0,j.jsxs)("th",{className:"CSL"===n?"cslStyl":"Coverage"===n?"covStyl":"acc_type"===n?"accTypeStyl":"",rowSpan:null===(i=e[n])||void 0===i?void 0:i.split("^&")[1],colSpan:null===(c=e[n])||void 0===c?void 0:c.split("^&")[2],style:{textAlign:"center",display:0!==ee||!ne.some((function(e){return n.includes(e)}))||n.includes("Q")||n.includes("total")||"month"==S?"":"none"},children:["customer"===n?(0,j.jsxs)("span",{children:[E[e.isProspect],"Customer",E[1],"Prospect ",(0,j.jsx)("br",{}),"Sales Executive"]}):e[n].includes("Account Owner")?(0,j.jsxs)("span",{children:["AccountOwner /",(0,j.jsx)("br",{}),E[e.isProspect],"\xa0 Customer\xa0",E[1],"\xa0 Prospect"]}):(0,j.jsx)("span",{children:"Cust Map ($)"===e[n]?(0,j.jsxs)("span",{children:["Customer",(0,j.jsx)("br",{})," ","Targets ($)"]}):"SG Target ($)"===e[n]||" SG Target ($)"===e[n]?(0,j.jsxs)("span",{children:["Signing",(0,j.jsx)("br",{})," ","Targets ($)"]}):"Target ($)"===e[n]?(0,j.jsxs)("span",{children:["Revenue",(0,j.jsx)("br",{})," ","Targets ($)"]}):"Sf Rev ($)"===e[n]?(0,j.jsxs)("span",{children:["Sf",(0,j.jsx)("br",{})," ","Revenue ($)"]}):"Planned Rev ($)"===e[n]?(0,j.jsxs)("span",{children:["Planned",(0,j.jsx)("br",{})," ","Rev ($)"]}):"Recognized Rev ($)"===e[n]?(0,j.jsxs)("span",{children:["Recognized",(0,j.jsx)("br",{})," ","Rev ($)"]}):"Estimate Rev ($)"===e[n]?(0,j.jsxs)("span",{children:["Estimate",(0,j.jsx)("br",{})," ","Rev ($)"]}):e[n].split("^&")[0]}),-2===e.id&&e[n].includes("Quart")&&(0,j.jsx)("span",{onClick:function(){var e;e=n.split("_")[1],z((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,s.Z)(t),[e])}))},children:U.includes(n.split("_")[1])?(0,j.jsx)(l.ZCH,{size:"0.8em",title:"Hide Details",style:{cursor:"pointer",marginLeft:"5px"}}):(0,j.jsx)(l.jS6,{size:"0.8em",title:"Show Details",style:{cursor:"pointer",marginLeft:"5px"}})})]},"".concat(n,"_").concat(t))),te=n};for(var c in e)i(c);return(0,j.jsx)("tr",{children:r},"".concat(e.customerId,"_").concat(e.countryId,"_").concat(e.parentAttr,"_").concat(e.executive,"_").concat(e.practiceId,"_").concat(e.practice,"_").concat(e.keyAttr,"_").concat(e.lvl,"_").concat(e.count,"_").concat(e.supervisor,"_").concat(e.execStatus,"_").concat(e.id))})),le=null===t||void 0===t?void 0:t.filter((function(e){return-1!==e.lvl&&-2!==e.lvl})).map((function(e,t){var r=[];var i=function(e,t){return t in e}(e,"customer");0==i?2===e.lvl?(K=0,X=A.includes(e[n].split("^&")[0])?1:0):3===e.lvl?(X=0,K=D.includes(e[n])?1:0):(X=0,K=0):X=3===e.lvl?X:A.includes(e[n])?1:0;var c=function(i){var c,a,o,u;(i.includes("Q")&&(ee=U.includes(i.split("_")[1])?1:0),999===e.lvl)?"executive"===i?r.push((0,j.jsxs)("td",{colSpan:Object.keys(e).length-1,style:{textAlign:"center",backgroundColor:"white",fontSize:"14px"},children:[e[i].split("^&")[0]," "]},"".concat(i,"_").concat(t))):"customer"===i&&r.push((0,j.jsxs)("td",{colSpan:Object.keys(e).length-1,style:{textAlign:"center",backgroundColor:"white",fontSize:"14px"},children:[e[i].split("^&")[1]," "]},"".concat(i,"_").concat(t))):(!se.includes(i)&&(D.length<0||(!h.includes(i)||D.length>0&&i.includes("Coverage")||(!h.includes(i)||D.length>0&&i.includes("CSL")||(!h.includes(i)||D.length>0&&i.includes("acc_type")||!h.includes(i)))))&&r.push((0,j.jsxs)("td",{className:i.includes("executive")?"executive":i.includes("Q")?i.split("_")[1][1]%2==0?"even":"odd":i.includes("total")?"total":i.includes("0")?i.split("_")[1]%2==0?"innereven":"innerodd":"CSL"===i&&1===e.lvl?"cslStyl2":"Coverage"===i&&1===e.lvl?"covStyl2":"acc_type"===i&&1===e.lvl?"accTypeStyl2":"CSL"===i?"cslStyl":"Coverage"===i?"covStyl":"acc_type"===i?"accTypeStyl":"",style:{display:0===X&&0==K&&(2===e.lvl||3===e.lvl)||0===ee&&ne.some((function(e){return i.includes(e)}))&&!i.includes("Q")&&!i.includes("total")&&"month"!=S?"none":""},children:[(0,j.jsxs)("div",{children:[i===n&&e.lvl<2&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{onClick:function(){return function(e){if("Summary"===e)O((function(e){return e.length===M.length&&D.length===P.length?[]:M})),B((function(e){return e.length===P.length?[]:P}));else if(O((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat((0,s.Z)(t),[e])})),D.length>0){var t=D.filter((function(t){return!t.split("^&")[0].includes(e)}));B(t)}}(e[n])},children:A.includes(e[n])||A.length===M.length&&D.length===P.length?(0,j.jsx)(l.qL$,{size:"1.2em",title:"Collapse",style:{cursor:"pointer",color:"#428bca"}}):(0,j.jsx)(l.PS5,{size:"1.2em",title:"Expand",style:{cursor:"pointer",color:"#428bca"}})}),(0,j.jsx)("span",{children:k[e.execStatus]})]}),i!==n||2!==e.lvl&&3!==e.lvl?i!==n&&"country"!==i||3!==e.lvl?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:"customer"==i&&"  "!==e.customer&&"Summary"!==e.customer?E[e.isProspect]:""}),(0,j.jsx)("span",{title:" "===e[i]?" ":isNaN(e[i])?e[i]:parseInt(e[i]).toLocaleString("en-US"),children:" "===e[i]?" ":isNaN(e[i])?e[i]:parseInt(e[i]).toLocaleString("en-US")}),(0,j.jsxs)("span",{children:[" ","executive"!==i||e.customerTmp||"Summary"===e[i]||"<< Unassigned >>"===e[i]?"":(0,j.jsx)(v.E49,{title:"Notes",size:"1.5em",onClick:function(){H(!0),G(e)}})]})," "]}):"":(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("span",{className:"executive"===i&&2===e.lvl?"parentRow":3===e.lvl?"collapsedRow":"",children:["customer"===i&&"  "!==e.customer&&"Summary"==e.customer||"executive"===i&&"  "!==e.customer&&e.customer&&"Summary"!==e[i].includes("Account Owner")?E[e.isProspect]:"",i===n&&0===e.lvl]}),(0,j.jsx)(j.Fragment,{children:"customer"===i&&(0,j.jsxs)(j.Fragment,{children:[k[e.execStatus]," ",(0,j.jsx)("span",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:null===(c=e[i])||void 0===c?void 0:c.split("^&")[1],children:null===(a=e.customer)||void 0===a?void 0:a.split("^&")[1]}),(0,j.jsxs)("span",{style:{marginLeft:"auto",cursor:"pointer",float:"right"},children:[" ","customer"===i&&"Summary"!==e[i]&&"<< Unassigned >>"!==e[i]?(0,j.jsx)(v.E49,{title:"Notes",size:"1.5em",onClick:function(){H(!0),G(e)}}):""]})]})||(0,j.jsxs)("span",{title:null===(o=e.customer)||void 0===o?void 0:o.split("^&")[0],children:[" ","executive"===i&&(null===(u=e.customer)||void 0===u?void 0:u.split("^&")[0])]})})]})]}),(0,j.jsx)("span",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},className:"executive"===i&&2===e.lvl?"collapsedRow2":3===e.lvl?"collapsedRow3":"",children:"executive"===i&&2===e.lvl?(0,j.jsxs)("span",{style:{paddingLeft:"22px"},title:e.salesExec,children:[(0,j.jsx)("span",{onClick:function(){return t=e[n],void B((function(e){return e.includes(t)?e.filter((function(e){return!e.includes(t)})):[].concat((0,s.Z)(e),[t])}));var t},children:D.includes(e[n])||D.length===P.length?(0,j.jsx)(l.qL$,{size:"1.2em",title:"Collapse",style:{cursor:"pointer",color:"#428bca"}}):(0,j.jsx)(l.PS5,{size:"1.2em",title:"Expand",style:{cursor:"pointer",color:"#428bca"}})}),e.salesExec]}):"executive"===i&&3===e.lvl?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{style:{paddingLeft:"38px",fontWeight:"normal"},children:["executive"!==i||2===e.lvl||"  "===e.salesExec||e.customer||"Summary"===e.salesExec||2===e.lvl?null:E[e.isProspect],(0,j.jsx)("span",{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:e.customerTmp,children:e.customerTmp}),(0,j.jsx)("span",{style:{marginLeft:"auto",cursor:"pointer",float:"right"},children:(0,j.jsx)("span",{children:e.customerTmp&&2!==e.lvl&&(0,j.jsxs)("span",{children:[" ",(0,j.jsx)(v.E49,{size:"1.5em",title:"Notes",onClick:function(){H(!0),G(e)}})]})})})]})}):""})]},"".concat(i,"_").concat(t))),te=i)};for(var a in e)c(a);return(0,j.jsx)("tr",{children:r},"".concat(e.customerId,"_").concat(e.countryId,"_").concat(e.parentAttr,"_").concat(e.executive,"_").concat(e.practiceId,"_").concat(e.practice,"_").concat(e.keyAttr,"_").concat(e.lvl,"_").concat(e.count,"_").concat(e.supervisor,"_").concat(e.execStatus,"_").concat(e.id))}));return(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"row",children:(0,j.jsxs)("div",{className:"col-12",children:[(0,j.jsx)(f.WlY,{size:"1.5em",title:"Export to Excel",style:{color:"green",float:"right"},cursor:"pointer",onClick:function(){for(var e=["id","customerId","isProspect","practiceId","countryId","execStatus","lvl","count","isEdit","keyAttr","parentAttr","isActive","salesExecId","salesExecStatus"],n=Object.keys(t[0]).filter((function(t){return!e.includes(t)})).map((function(e){if("customer"===e){var n=t[0][e].split("^&"),s=n[0].includes("__")?n[0].split("__"):[];return s[2]+s[4]}return t[0][e].split("^&")[0]})),s=t.slice(1).map((function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var n=(0,r.Z)(t,1)[0];return!e.includes(n)})))})).map((function(e){return Object.values(e)})),l=new(x().Workbook),i=l.addWorksheet("SalesTarget"),c=(i.addRow(n),0);c<s.length;c++)i.addRow(s[c]);[1].forEach((function(e){i.getRow(e).font={bold:!0}})),l.xlsx.writeBuffer().then((function(e){saveAs(new Blob([e]),"SalesTarget.xlsx")}))}}),I.length>0&&(0,j.jsx)(g.Z,{reportRunId:N,showSFpipeline:b,setshowSFpipeline:y,componentSelector:_,setRefreshButton:w,refreshButton:C})]})}),(0,j.jsx)("div",{className:"serviceViewTable darkHeader toHead",children:(0,j.jsxs)("table",{className:"table table-bordered htmlTable",cellPadding:0,cellSpacing:0,children:[(0,j.jsx)("thead",{children:re}),(0,j.jsx)("tbody",{children:le})]})}),Y?(0,j.jsx)(m.Z,{openPopup:Y,setOpenPopup:H,Vdata:t,rowData:$}):""]})}}}]);
//# sourceMappingURL=1817.b5d4b5cb.chunk.js.map