"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9347],{40674:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var s=a(72791),n=a(29439),l=a(90029),r=a(10050),o=a(4942),i=a(1413),c=a(56355),d=a(78983),u=a(83854),m=a(74569),h=a.n(m),p=a(34831),v=a(47477),j=a(93433),f=a(87890),x=a(37145),g=a(1063),S=a(25103),N=a(46175),b=a(41310),w=(a(50919),a(35125)),y=a(80184);a(31052);var C=function(e){var t=e.data,l=e.rows,r=(e.col,e.headerdatagroup,e.linkColumns,e.linkColumnsRoutes,e.dynamicColumns),o=e.headerData,c=e.setHeaderData,d=e.exportData,u=e.customFilters,m=e.customFilterValue,h=e.setCustomFilterValue,p=e.fileName,v=(0,s.useState)([]),C=(0,n.Z)(v,2),_=C[0],Z=C[1],D=(0,s.useState)([]),P=(0,n.Z)(D,2),M=P[0],I=P[1],k=(0,s.useState)([]),T=(0,n.Z)(k,2),R=T[0],A=T[1],E=(0,s.useRef)(null);(0,s.useEffect)((function(){Z(JSON.parse(JSON.stringify(t)))}),[t]),(0,s.useEffect)((function(){if(_.length>0){c(_[0]),I(_.splice(1));var e=[],t=_[0];Object.keys(t).forEach((function(a){"StatusId"!=a&&e.push({title:t[a],dataKey:a})})),A(e)}}),[_]);var F={contains:{value:null,matchMode:f.a6.CONTAINS}},O=(0,s.useState)({global:F.contains}),Y=(0,n.Z)(O,2),L=Y[0],U=Y[1];(0,s.useEffect)((function(){U({global:F.contains})}),[o]);var B,H=(0,s.useState)(""),W=(0,n.Z)(H,2),V=W[0],z=W[1],J=function(e){var t=e.target.value,a=(0,i.Z)({},L);a.global.value=t,U(a),z(t)},K=function(){var e=u;if("select"===e.type)return(0,y.jsx)("select",{id:e.id,onChange:function(e){h(e.target.value)},children:Object.keys(e.data).map((function(t){return(0,y.jsx)("option",{selected:m==t,value:t,children:e.data[t]})}))})},G=function(){Promise.resolve().then(a.bind(a,34045)).then((function(e){var s=Object.keys(t[0]),n=(0,j.Z)(new Set(s)),l=t.map((function(e){return n.map((function(t){return e[t]}))})),r={Sheets:{data:e.utils.json_to_sheet(l,{skipHeader:!0})},SheetNames:["data"]};!function(e,t){Promise.resolve().then(a.t.bind(a,64802,23)).then((function(a){if(a&&a.default){var s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.default.saveAs(s,t+".xlsx")}}))}(e.write(r,{bookType:"xlsx",type:"array"}),p)}))},X=function(){Q()},Q=function(){for(var e=new w.default("p","pt","a4"),a=R.map((function(e){return e.title})),s=[],n=function(e){var a=R.map((function(a){return t[e][a.dataKey]}));s.push(a)},l=1;l<t.length;l++)n(l);var r=[90,90,90,100,130];e.text(235,40,"Tabla de Prestamo"),e.autoTable(a,s,{startY:65,theme:"grid",styles:{font:"times",halign:"center",cellPadding:3.5,lineWidth:.5,lineColor:[0,0,0],textColor:[0,0,0]},headStyles:{textColor:[0,0,0],fontStyle:"normal",lineWidth:.5,lineColor:[0,0,0],fillColor:[166,204,247]},alternateRowStyles:{fillColor:[212,212,212],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]},rowStyles:{lineWidth:.5,lineColor:[0,0,0]},tableLineColor:[0,0,0],columnStyles:{0:{cellWidth:r[0]},1:{cellWidth:r[1]},2:{cellWidth:r[2]},3:{cellWidth:r[3]},4:{cellWidth:r[4]}}}),e.save("pdf")},q=(0,y.jsxs)("div",{className:"flex  flex-row-reverse",children:[void 0!=u&&(0,y.jsx)("span",{children:(0,y.jsx)(K,{})}),(0,y.jsxs)("div",{className:"exportBtn ml-3",children:[(null===d||void 0===d?void 0:d.includes("CSV"))&&(0,y.jsx)("span",{className:"pi pi-file csv",onClick:function(){return e=!1,void E.current.exportCSV({selectionOnly:e});var e},title:"CSV"}),(null===d||void 0===d?void 0:d.includes("XLS"))&&(0,y.jsx)("span",{className:"pi pi-file-excel excel",onClick:G,title:"Export to Excel"}),(null===d||void 0===d?void 0:d.includes("PDF"))&&(0,y.jsx)("span",{className:"pi pi-file-pdf pdf",onClick:X,title:"PDF"})]}),(0,y.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,y.jsx)("i",{className:"pi pi-search"}),(0,y.jsx)(S.o,{defaultValue:V,onChange:J,placeholder:"Keyword Search"})]})]});return B=t[0].team_size?(0,y.jsxs)(N.E,{children:[(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"",colSpan:12}),(0,y.jsx)(g.s,{header:"Contractor(FTE)",colSpan:2}),(0,y.jsx)(g.s,{header:"Employee(FTE)",colSpan:2}),(0,y.jsx)(g.s,{header:"",colSpan:1})]}),(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Code",sortable:!0,field:"project_code"}),(0,y.jsx)(g.s,{header:"Project Name",sortable:!0,field:"project_name"}),(0,y.jsx)(g.s,{header:"Project Manager",sortable:!0,field:"lastYearProfit"}),(0,y.jsx)(g.s,{header:"Sales Executive",sortable:!0,field:"sales_executive"}),(0,y.jsx)(g.s,{header:"Project Stage",sortable:!0,field:"prj_stage"}),(0,y.jsx)(g.s,{header:"Primary BU",sortable:!0,field:"business_unit"}),(0,y.jsx)(g.s,{header:"PO#",sortable:!0,field:"po_number"}),(0,y.jsx)(g.s,{header:"Customer",sortable:!0,field:"customer"}),(0,y.jsx)(g.s,{header:"Pln St Dt",sortable:!0,field:"planned_start_dt"}),(0,y.jsx)(g.s,{header:"Pln End Dt",sortable:!0,field:"planned_end_dt"}),(0,y.jsx)(g.s,{header:"Act St Dt",sortable:!0,field:"actual_start_dt"}),(0,y.jsx)(g.s,{header:"Act End Dt",sortable:!0,field:"actual_end_dt"}),(0,y.jsx)(g.s,{header:"Onsite",sortable:!0,field:"contractor_onsite"}),(0,y.jsx)(g.s,{header:"Offshore",sortable:!0,field:"contractor_offshore"}),(0,y.jsx)(g.s,{header:"Onsite",sortable:!0,field:"employee_onsite"}),(0,y.jsx)(g.s,{header:"Offshore",sortable:!0,field:"employee_offshore"}),(0,y.jsx)(g.s,{header:"Team Size",sortable:!0,field:"team_size"})]})]}):(0,y.jsxs)(N.E,{children:[(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"",colSpan:12}),(0,y.jsx)(g.s,{header:"Contractor(FTE)",colSpan:2}),(0,y.jsx)(g.s,{header:"Employee(FTE)",colSpan:2}),(0,y.jsx)(g.s,{header:"",colSpan:1})]}),(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Code",sortable:!0,field:"project_code"}),(0,y.jsx)(g.s,{header:"Project Name",sortable:!0,field:"project_name"}),(0,y.jsx)(g.s,{header:"Project Manager",sortable:!0,field:"lastYearProfit"}),(0,y.jsx)(g.s,{header:"Sales Executive",sortable:!0,field:"sales_executive"}),(0,y.jsx)(g.s,{header:"Project Stage",sortable:!0,field:"prj_stage"}),(0,y.jsx)(g.s,{header:"Primary BU",sortable:!0,field:"business_unit"}),(0,y.jsx)(g.s,{header:"PO#",sortable:!0,field:"po_number"}),(0,y.jsx)(g.s,{header:"Customer",sortable:!0,field:"customer"}),(0,y.jsx)(g.s,{header:"Pln St Dt",sortable:!0,field:"planned_start_dt"}),(0,y.jsx)(g.s,{header:"Pln End Dt",sortable:!0,field:"planned_end_dt"}),(0,y.jsx)(g.s,{header:"Act St Dt",sortable:!0,field:"actual_start_dt"}),(0,y.jsx)(g.s,{header:"Act End Dt",sortable:!0,field:"actual_end_dt"}),(0,y.jsx)(g.s,{header:"Onsite",sortable:!0,field:"contractor_onsite"}),(0,y.jsx)(g.s,{header:"Offshore",sortable:!0,field:"contractor_offshore"}),(0,y.jsx)(g.s,{header:"Onsite",sortable:!0,field:"employee_onsite"}),(0,y.jsx)(g.s,{header:"Offshore",sortable:!0,field:"employee_offshore"})]})]}),(0,y.jsx)("div",{className:"darkHeader",children:Object.keys(o).length>0&&(0,y.jsx)(x.w,{stripedRows:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],headerColumnGroup:B,value:M,paginator:!0,showGridlines:!0,rows:l,dataKey:"id",filters:L,responsiveLayout:"scroll",header:q,emptyMessage:"No Records found.",ref:function(e){E.current=e},className:"primeReactDataTable projectSearchTable",children:r})})},_=a(11087);a(31052);var Z=function(e){var t=e.data,l=e.rows,r=(e.col,e.headerdatagroup,e.linkColumns,e.linkColumnsRoutes,e.dynamicColumns),o=e.headerData,c=e.setHeaderData,d=e.exportData,u=e.customFilters,m=e.customFilterValue,h=e.setCustomFilterValue,p=e.fileName,v=(0,s.useState)([]),g=(0,n.Z)(v,2),N=g[0],b=g[1],C=(0,s.useState)([]),_=(0,n.Z)(C,2),Z=_[0],D=_[1],P=(0,s.useState)([]),M=(0,n.Z)(P,2),I=M[0],k=M[1],T=(0,s.useRef)(null);(0,s.useEffect)((function(){b(JSON.parse(JSON.stringify(t)))}),[t]),console.log(t),(0,s.useEffect)((function(){if(N.length>0){c(N[0]),D(N.splice(1));var e=[],t=N[0];Object.keys(t).forEach((function(a){"StatusId"!=a&&e.push({title:t[a],dataKey:a})})),k(e)}}),[N]);var R={contains:{value:null,matchMode:f.a6.CONTAINS}},A=(0,s.useState)({global:R.contains}),E=(0,n.Z)(A,2),F=E[0],O=E[1];(0,s.useEffect)((function(){O({global:R.contains})}),[o]);var Y=(0,s.useState)(""),L=(0,n.Z)(Y,2),U=L[0],B=L[1],H=function(e){var t=e.target.value,a=(0,i.Z)({},F);a.global.value=t,O(a),B(t)},W=function(){var e=u;if("select"===e.type)return(0,y.jsx)("select",{id:e.id,onChange:function(e){h(e.target.value)},children:Object.keys(e.data).map((function(t){return(0,y.jsx)("option",{selected:m==t,value:t,children:e.data[t]})}))})},V=function(){Promise.resolve().then(a.bind(a,34045)).then((function(e){var s=Object.keys(t[0]),n=(0,j.Z)(new Set(s)),l=t.map((function(e){return n.map((function(t){return e[t]}))})),r={Sheets:{data:e.utils.json_to_sheet(l,{skipHeader:!0})},SheetNames:["data"]};!function(e,t){Promise.resolve().then(a.t.bind(a,64802,23)).then((function(a){if(a&&a.default){var s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});a.default.saveAs(s,t+".xlsx")}}))}(e.write(r,{bookType:"xlsx",type:"array"}),p)}))},z=function(){J()},J=function(){for(var e=new w.default("p","pt","a4"),a=I.map((function(e){return e.title})),s=[],n=function(e){var a=I.map((function(a){return t[e][a.dataKey]}));s.push(a)},l=1;l<t.length;l++)n(l);var r=[90,90,90,100,130];e.text(235,40,"Tabla de Prestamo"),e.autoTable(a,s,{startY:65,theme:"grid",styles:{font:"times",halign:"center",cellPadding:3.5,lineWidth:.5,lineColor:[0,0,0],textColor:[0,0,0]},headStyles:{textColor:[0,0,0],fontStyle:"normal",lineWidth:.5,lineColor:[0,0,0],fillColor:[166,204,247]},alternateRowStyles:{fillColor:[212,212,212],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]},rowStyles:{lineWidth:.5,lineColor:[0,0,0]},tableLineColor:[0,0,0],columnStyles:{0:{cellWidth:r[0]},1:{cellWidth:r[1]},2:{cellWidth:r[2]},3:{cellWidth:r[3]},4:{cellWidth:r[4]}}}),console.log(e.output("datauristring")),e.save("pdf")},K=(0,y.jsxs)("div",{className:"flex  flex-row-reverse",children:[void 0!=u&&(0,y.jsx)("span",{children:(0,y.jsx)(W,{})}),(0,y.jsxs)("div",{className:"exportBtn ml-3",children:[(null===d||void 0===d?void 0:d.includes("CSV"))&&(0,y.jsx)("span",{className:"pi pi-file csv",onClick:function(){return e=!1,void T.current.exportCSV({selectionOnly:e});var e},title:"CSV"}),(null===d||void 0===d?void 0:d.includes("XLS"))&&(0,y.jsx)("span",{className:"pi pi-file-excel excel",onClick:V,title:"Export to Excel"}),(null===d||void 0===d?void 0:d.includes("PDF"))&&(0,y.jsx)("span",{className:"pi pi-file-pdf pdf",onClick:z,title:"PDF"})]}),(0,y.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,y.jsx)("i",{className:"pi pi-search"}),(0,y.jsx)(S.o,{defaultValue:U,onChange:H,placeholder:"Keyword Search"})]})]});return(0,y.jsx)("div",{className:"darkHeader",children:Object.keys(o).length>0&&(0,y.jsx)(x.w,{stripedRows:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:Z,paginator:!0,showGridlines:!0,rows:l,dataKey:"id",filters:F,responsiveLayout:"scroll",header:K,emptyMessage:"No Records found.",ref:function(e){T.current=e},className:"primeReactDataTable",children:r})})};var D=function(e){e.formData;var t,a=e.data,l=e.linkColumns,r=e.linkColumnsRoutes,o=e.flag,i=(0,s.useState)([]),c=(0,n.Z)(i,2),d=c[0],u=c[1],m=(0,s.useState)([]),h=(0,n.Z)(m,2),v=h[0],j=h[1];(0,s.useEffect)((function(){a[0]&&u(JSON.parse(JSON.stringify(a[0])));j(["XLS"])}),[a]),p.N.baseUrl;for(var f=1;f<a.length;f++);(0,s.useEffect)((function(){}),[]);var x=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.prj_manager,children:e.prj_manager})},S=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.sales_executive,children:e.sales_executive})},N=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.business_unit,children:e.business_unit})},b=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.customer,children:e.customer})},w=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.project_code,children:e.project_code})},D=function(e){return(0,y.jsx)("div",{align:"center",style:{width:"87px"},title:e.planned_start_dt,children:e.planned_start_dt})},P=function(e){return(0,y.jsx)("div",{align:"center",style:{width:"87px"},title:e.planned_end_dt,children:e.planned_end_dt})},M=function(e){return(0,y.jsx)("div",{align:"left",style:{width:"87px"},title:e.actual_start_dt,children:e.actual_start_dt})},I=function(e){return(0,y.jsx)("div",{align:"left",style:{width:"87px"},title:e.actual_end_dt,children:e.actual_end_dt})},k=function(e){return(0,y.jsx)("div",{align:"right",title:e.team_size,children:e.team_size})},T=function(e){return(0,y.jsx)("div",{align:"right",title:e.contractor_onsite,children:null==e.contractor_onsite?0:e.contractor_onsite})},R=function(e){return(0,y.jsx)("div",{align:"right",title:e.contractor_offshore,children:null==e.contractor_offshore?0:e.contractor_offshore})},A=function(e){return(0,y.jsx)("div",{align:"right",title:e.employee_onsite,children:null==e.employee_onsite?0:e.employee_onsite})},E=function(e){return(0,y.jsx)("div",{align:"right",title:e.employee_offshore,children:null==e.employee_offshore?0:e.employee_offshore})},F=function(e){var t,a=null===(t=r[0])||void 0===t?void 0:t.split(":");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(_.rU,{target:"_blank",to:a[0]+":"+e[a[1]],title:e.project_name,children:e[l[0]]})})},O=null===(t=Object.keys(d))||void 0===t?void 0:t.map((function(e,t){return(0,y.jsx)(g.s,{sortable:!0,body:"employee_offshore"==e?E:"employee_onsite"==e?A:"contractor_offshore"==e?R:"contractor_onsite"==e?T:"actual_end_dt"==e?I:"actual_start_dt"==e?M:"planned_end_dt"==e?P:"planned_start_dt"==e?D:"project_code"==e?w:"customer"==e?b:"business_unit"==e?N:"sales_executive"==e?S:"team_size"==e?k:"prj_manager"==e?x:"project_name"==e&&F,field:e,header:d[e]},e)}));return(0,y.jsx)("div",{children:!0===o?(0,y.jsx)(C,{data:a,dynamicColumns:O,headerData:d,setHeaderData:u,exportData:v,rows:25}):(0,y.jsx)(Z,{data:a,dynamicColumns:O,headerData:d,setHeaderData:u,exportData:v,rows:25,fileName:"Project Search"})})},P=a(36167),M=a(63521),I=a(96907),k=a(72920),T=a(38262);var R=function(){var e=localStorage.getItem("resId"),t=(0,s.useState)(!1),a=(0,n.Z)(t,2),l=a[0],r=a[1],m=(0,s.useState)(c.UdN),v=(0,n.Z)(m,2),j=v[0],f=v[1],x=(0,s.useState)(!1),g=(0,n.Z)(x,2),S=g[0],N=g[1],b=(0,s.useState)(!1),w=(0,n.Z)(b,2),C=w[0],_=w[1],Z=(0,s.useState)([]),R=(0,n.Z)(Z,2),A=R[0],E=R[1],F=(0,s.useState)([]),O=(0,n.Z)(F,2),Y=O[0],L=O[1],U=(0,s.useState)([]),B=(0,n.Z)(U,2),H=B[0],W=B[1],V=(0,s.useState)([]),z=(0,n.Z)(V,2),J=z[0],K=z[1],G=(0,s.useState)([]),X=(0,n.Z)(G,2),Q=X[0],q=X[1],$=(0,s.useState)([]),ee=(0,n.Z)($,2),te=ee[0],ae=ee[1],se=(0,s.useState)([]),ne=(0,n.Z)(se,2),le=ne[0],re=ne[1],oe=(0,s.useState)([]),ie=(0,n.Z)(oe,2),ce=ie[0],de=ie[1],ue=(0,s.useState)([{}]),me=(0,n.Z)(ue,2),he=me[0],pe=me[1],ve=(0,s.useState)([]),je=(0,n.Z)(ve,2),fe=je[0],xe=je[1],ge=(0,s.useState)([]),Se=(0,n.Z)(ge,2),Ne=Se[0],be=Se[1],we=(0,s.useState)(!1),ye=(0,n.Z)(we,2),Ce=ye[0],_e=ye[1],Ze=(0,s.useState)([]),De=(0,n.Z)(Ze,2),Pe=De[0],Me=De[1],Ie=p.N.baseUrl,ke=(0,s.useRef)(null),Te=(0,s.useState)({projectName:"",manager:-1,primaryBu:" 170,211,123,82,168,207,212,18,213,49,149,208",customer:-1,projectSource:null,projectStage:1,po:null,teamLocation:null,engagementType:null,contractTeams:"28,27,752,606,26,25,750",FTE:0,currentAllocation:1,PCQAFacilitaor:"",teamsize:1}),Re=(0,n.Z)(Te,2),Ae=Re[0],Ee=Re[1],Fe=(0,s.useState)({projectId:null,resId:"",isAll:1}),Oe=(0,n.Z)(Fe,2),Ye=(Oe[0],Oe[1],function(e){Array.isArray(e)&&e.join(", "),h()({method:"get",url:Ie+"/ProjectMS/ProjectScopeChange/getAllCustomers?buid=".concat(Ae.primaryBu)}).then((function(e){var t=e.data;L(t)}))}),Le=function(){h()({method:"get",url:Ie+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;ae(t)})).catch((function(e){}))},Ue=function(){h()({method:"post",url:Ie+"/ProjectMS/project/getResListForAutoCmplt",data:{projectId:null,resId:"",isAll:1},headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data;W(t)}))};(0,s.useEffect)((function(){h().get(Ie+"/CostMS/cost/getDepartments").then((function(e){var t=[],a=e.data;a.push({value:999,label:"Non-Revenue Units"}),a.length>0&&a.forEach((function(e){var a={label:e.label,value:e.value};t.push(a)})),E(t);var s=JSON.parse(JSON.stringify(t)).filter((function(e){return 0==e.label.includes("Non-Revenue Units")}));xe(s)})).catch((function(e){return console.log(e)})),Ye(),Le(),h()({method:"get",url:Ie+"/ProjectMS/ProjectScopeChange/getProjectStage"}).then((function(e){var t=e.data;re(t)})).catch((function(e){})),h()({method:"get",url:Ie+"/ProjectMS/ProjectScopeChange/getEnguagementType"}).then((function(e){var t=e.data;de(t)})).catch((function(e){})),Ue(),h().get(Ie+"/ProjectMS/ProjectScopeChange/getContractTerms").then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.lkup_name,value:e.id};t.push(a)})),K(t);var s=JSON.parse(JSON.stringify(t)).filter((function(e){return 0==e.label.includes("Non-billable")}));q(s)})).catch((function(e){return console.log(e)}))}),[]),(0,s.useEffect)((function(){Ye()}),[Ae.primaryBu]);var Be=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c.qL$,{className:"chevronIcon"})})},He=(0,s.useState)([]),We=(0,n.Z)(He,2),Ve=We[0],ze=We[1];(0,s.useEffect)((function(){Je()}),[]);var Je=function(){h()({method:"GET",url:Ie+"/CommonMS/master/getMenus?loggedUserId=".concat(e)}).then((function(e){e.data.forEach((function(e){"Delivery"===e.display_name&&ze([e])}))}))},Ke=function(e,t){var a=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return a.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"col-md-12",children:[(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Project Search"})}),(0,y.jsx)("div",{className:"childThree"})]}),(0,y.jsx)(T.Z,{routes:Ve,currentScreenName:["Project Search"]})]}),(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(k.Z,{pdfname:"SearchProject.pdf",name:"Project Search Help"})}),(0,y.jsx)("div",{onClick:function(){r(!l),f(l?c.UdN:c.NR5)},children:(0,y.jsx)("span",{children:j})})]}),(0,y.jsx)(d.V9,{visible:!l,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectname",children:"Project Name"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("input",{type:"text",className:"form-control",id:"projectName",placeholder:!0,onChange:function(e){!function(e){var t=e.target,a=t.value;t.id,Ee((0,i.Z)((0,i.Z)({},Ae),{},{projectName:a}))}(e)}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"manager",children:"Manager"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"autoComplete-container",children:(0,y.jsx)(M.ReactSearchAutocomplete,{items:H,type:"Text",name:"manager",id:"manager",className:"err",fuseOptions:{keys:["id","ResName"]},resultStringKeyName:"ResName",resource:H,managerFnc:Ue,onSelect:function(e){Ee((function(t){return(0,i.Z)((0,i.Z)({},t),{},{manager:e.id})}))},showIcon:!1,onClear:function(){Ee((function(e){return(0,i.Z)((0,i.Z)({},e),{},{manager:null})}))}})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"primaryBu",children:"Business Unit"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(P.NU,{id:"primaryBu",options:A,hasSelectAll:!0,value:fe,ArrowRenderer:Be,disabled:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<< All>>"},onChange:function(e){xe(e);var t=[];e.forEach((function(e){t.push(e.value)})),Ee((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,o.Z)({},"primaryBu",t.toString()))})),Ye(t)},valueRenderer:Ke})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"customer",children:"Customer"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"",id:"customer",onChange:function(e){var t=e.target,a=t.value,s=t.id;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,a)))},children:[(0,y.jsx)("option",{value:"-1",children:" <<ALL>>"}),Y.map((function(e){return(0,y.jsxs)("option",{value:e.customerId,children:[" ",e.customers]})}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectsource",children:"Project Source"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"projectSource",onChange:function(e){var t=e.target,a=t.value,s=t.id;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,a)))},children:[(0,y.jsx)("option",{value:"null",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"PPM",children:"PPM"}),(0,y.jsx)("option",{value:"Projector",children:"Projector"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectstage",children:"Project Stage"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"projectStage",onChange:function(e){var t=e.target,a=t.value,s=t.id,n="1"===a?null:a;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"1",children:" <<ALL>>"}),le.map((function(e){return(0,y.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"po",children:"PO#"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"po",onChange:function(e){var t=e.target,a=t.value,s=t.id;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,a)))},children:["With PO Number",(0,y.jsx)("option",{value:"null",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"1",children:"With PO Number"}),(0,y.jsx)("option",{value:"0",children:"Without PO Number"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"teamlocation",children:"Team Location"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"teamLocation",onChange:function(e){var t=e.target,a=t.value,s=t.id,n="null"===a?null:a;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"null",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"361",children:"Client Site"}),(0,y.jsx)("option",{value:"362",children:"Onsite"}),(0,y.jsx)("option",{value:"363",children:"Off Shore"}),(0,y.jsx)("option",{value:"364",children:"Blended Shore"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5 ",htmlFor:"engagementtype",children:"Engagement Type"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"engagementType",onChange:function(e){var t=e.target,a=t.value,s=t.id,n="All"===a?null:a;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"All",children:" <<ALL>>"}),ce.map((function(e){return(0,y.jsxs)("option",{value:e.id,children:[" ",e.lkup_name]})}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"contractterms",children:"Contract Terms"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)(P.NU,{id:"contractTeams",options:J,hasSelectAll:!0,ArrowRenderer:Be,value:Q,disabled:!1,overrideStrings:{selectAllFiltered:"Select All",selectSomeItems:"<< All>>"},onChange:function(e){q(e);var t=[];e.forEach((function(e){t.push(e.value)})),Ee((function(e){return(0,i.Z)((0,i.Z)({},e),{},(0,o.Z)({},"contractTeams",t.toString()))}))},valueRenderer:Ke})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"fte",children:"FTE"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"FTE",onChange:function(e){var t=e.target,a=t.value,s=t.id;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,a)))},children:[(0,y.jsx)("option",{value:"0",selected:"selected",children:"No"}),(0,y.jsx)("option",{value:"1",children:"Yes"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"teamsize",children:"Team Size"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"teamsize",onChange:function(e){var t=e.target,a=t.value,s=t.id;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,a)))},children:[(0,y.jsx)("option",{value:"0",children:"No"}),(0,y.jsx)("option",{value:"1",selected:"selected",children:"Yes"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5 ",htmlFor:"currentallocation",children:"Current Allocation"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"currentAllocation",onChange:function(e){var t=e.target,a=t.value,s=t.id,n="null"===a?-1:a;Ee((0,i.Z)((0,i.Z)({},Ae),{},(0,o.Z)({},s,n)))},children:[(0,y.jsx)("option",{value:"null",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"1",selected:"selected",children:"Active"}),(0,y.jsx)("option",{value:"2",children:"InActive"}),(0,y.jsx)("option",{value:"3",children:"No Allocation"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"facilitator",children:"PCQA Facilitator"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"autoComplete-container",children:(0,y.jsx)(M.ReactSearchAutocomplete,{items:te,type:"Text",name:"PCQAFacilitaor",id:"PCQAFacilitaor",className:"err",fuseOptions:{keys:["id","name"]},resultStringKeyName:"name",resource:te,fcqaFacilitatorFnc:Le,onSelect:function(e){Ee((function(t){return(0,i.Z)((0,i.Z)({},t),{},{PCQAFacilitaor:e.id})}))},showIcon:!1,onClear:function(){Ee((function(e){return(0,i.Z)((0,i.Z)({},e),{},{PCQAFacilitaor:null})}))}})})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,y.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=setTimeout((function(){N(!0)}),2e3);ke.current=new AbortController,h()({method:"post",url:Ie+"/ProjectMS/project/getProjectSearch",signal:ke.current.signal,data:{projectName:Ae.projectName,manager:Ae.manager,primaryBu:Ae.primaryBu,customer:Ae.customer,projectSource:Ae.projectSource,projectStage:Ae.projectStage,po:Ae.po,teamLocation:Ae.teamLocation,engagementType:Ae.engagementType,contractTeams:Ae.contractTeams,FTE:Ae.FTE,currentAllocation:Ae.currentAllocation,PCQAFacilitaor:Ae.PCQAFacilitaor},headers:{"Content-Type":"application/json"}}).then((function(t){var a=t.data;if(a.sort((function(e,t){var a=e.project_code.toUpperCase(),s=t.project_code.toUpperCase();return a<s?-1:a>s?1:0})),1==Ae.teamsize&&0==Ae.FTE){_e(!1);pe([{project_code:"Code",project_name:"Project Name",prj_manager:"Project Manager",sales_executive:"Sales Executive",prj_stage:"Project Stage",business_unit:"Primary_BU",po_number:"PO#",customer:"Customer",planned_start_dt:"Pln St Dt",planned_end_dt:"Pln End Dt",actual_start_dt:"Act St Dt",actual_end_dt:"Act End Dt",team_size:"Team Size"}].concat(a)),clearTimeout(e),r(!l),f(l?c.UdN:c.NR5)}else if(1==Ae.teamsize&&1==Ae.FTE){_e(!0);pe([{project_code:"Code",project_name:"Project Name",prj_manager:"Project Manager",sales_executive:"Sales Executive",prj_stage:"Project Stage",business_unit:"Primary_BU",po_number:"PO#",customer:"Customer",planned_start_dt:"Pln St Dt",planned_end_dt:"Pln End Dt",actual_start_dt:"Act St Dt",actual_end_dt:"Act End Dt",contractor_onsite:"Onsite",contractor_offshore:"Offshore",employee_onsite:"Onsite",employee_offshore:"Offshore",team_size:"Team Size"}].concat(a)),clearTimeout(e)}else if(0==Ae.teamsize&&1==Ae.FTE){_e(!0);pe([{project_code:"Code",project_name:"Project Name",prj_manager:"Project Manager",sales_executive:"Sales Executive",prj_stage:"Project Stage",business_unit:"Primary_BU",po_number:"PO#",customer:"Customer",planned_start_dt:"Pln St Dt",planned_end_dt:"Pln End Dt",actual_start_dt:"Act St Dt",actual_end_dt:"Act End Dt",contractor_onsite:"Onsite",contractor_offshore:"Offshore",employee_onsite:"Onsite",employee_offshore:"Offshore"}].concat(a)),clearTimeout(e)}else{pe([{project_code:"Code",project_name:"Project Name",prj_manager:"Project Manager",sales_executive:"Sales Executive",prj_stage:"Project Stage",business_unit:"Primary_BU",po_number:"PO#",customer:"Customer",planned_start_dt:"Pln St Dt",planned_end_dt:"Pln End Dt",actual_start_dt:"Act St Dt",actual_end_dt:"Act End Dt"}].concat(a)),clearTimeout(e)}be(["project_name"]),Me(["/project/Overview/:project_id"]),_(!0)}))},children:[(0,y.jsx)(c.U41,{})," Search"," "]})})]})}),S?(0,y.jsx)(u.Z,{handleAbort:function(){ke.current&&ke.current.abort(),N(!1)}}):""]}),(0,y.jsx)("div",{className:"col-md-12 my-1",children:(0,y.jsxs)("div",{className:"statusMsg warning",children:[(0,y.jsx)(I.BrF,{}),"Note: Values for projector projects are for Jan-17 to +6 months from current month."]})}),C?(0,y.jsx)(D,{formData:Ae,data:he,linkColumns:Ne,linkColumnsRoutes:Pe,flag:Ce}):" "]})},A=a(7692);function E(e){var t=e.newMemberDropdown;return(0,y.jsx)("div",{className:"row engScroll",children:0===t.length?(0,y.jsx)("div",{className:"col-md-12",children:"None Selected"}):(0,y.jsx)("input",{type:"checkbox"})})}var F=a(49177),O=a(34911),Y=a(56637),L=a(53824),U=a(48462),B=a(59170),H=(0,s.forwardRef)((function(e,t){var a=e.value,l=e.newMemberDropdown;console.log(a);var r=p.N.baseUrl,o=(0,s.useState)(!1),i=(0,n.Z)(o,2),c=i[0],d=i[1],u=(0,s.useState)([]),m=(0,n.Z)(u,2),v=m[0],f=m[1],x=(0,s.useState)([]),g=(0,n.Z)(x,2),S=g[0],N=g[1],b=(0,s.useState)(!1),w=(0,n.Z)(b,2),C=w[0],_=w[1],Z=(0,s.useState)([]),D=(0,n.Z)(Z,2),P=D[0],M=D[1],I=(0,s.useState)(!1),k=(0,n.Z)(I,2),T=k[0],R=k[1],A=(0,s.useState)(""),H=(0,n.Z)(A,2),W=H[0],V=H[1];console.log(e.value),console.log("in line 29---"),console.log(l),console.log(e.newMemberDropdown),console.log(v),console.log(l);var z={fte0:(0,y.jsx)("img",{src:O,alt:"(fte_inactive_icon)",style:{height:"12px"},title:"Ex-Employee"}),fte1:(0,y.jsx)("img",{src:F,alt:"(fte_active_icon)",style:{height:"12px"},title:"Active Employee"}),fte2:(0,y.jsx)("img",{src:Y,alt:"(fte_notice_icon)",style:{height:"12px"},title:"Employee in notice period"}),subk0:(0,y.jsx)("img",{src:U,alt:"(subk_inactive_icon)",style:{height:"12px"},title:"Ex-Contractor"}),subk1:(0,y.jsx)("img",{src:L,alt:"(subk_active_icon)",style:{height:"12px"},title:"Active Contractor"}),subk2:(0,y.jsx)("img",{src:B,alt:"(subk_notice_icon)",style:{height:"12px"},title:"Contractor in notice period"})};(0,s.useImperativeHandle)(t,(function(){return{setGlobalState:function(){localStorage.setItem("selectedSE",JSON.stringify(v)),"EngagementS"!=e.value&&localStorage.setItem("isIndividual",T)},resetTOlocalState:function(){var t=null===localStorage.getItem("selectedSE")?[]:JSON.parse(localStorage.getItem("selectedSE"));f(t),"EngagementS"!=e.value&&R("true"===localStorage.getItem("isIndividual"))}}}));var J=function(e){console.log("***********************",e),f((function(t){return t.some((function(t){return t.id===e.id}))?t.filter((function(t){return t.id!==e.id})):[].concat((0,j.Z)(t),[e])}))},K=function(t){return(0,y.jsx)("span",{className:"option col-md-3",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"EngagementS"==e.value?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("input",{type:"checkbox",id:t.id,name:t.name,onChange:function(e){return J(t)},checked:v.some((function(e){return e.id===t.id})),className:"mr-2"}),(0,y.jsx)("span",{title:t.Name,children:t.Name})]}):(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("input",{type:"checkbox",id:t.id,name:t.salesPersonName,onChange:function(e){return J(t)},checked:v.some((function(e){return e.id===t.id}))}),"\xa0",z[t.type],"\xa0",(0,y.jsx)("span",{title:t.salesPersonName,children:t.salesPersonName})]})},t.id)};console.log("------------------------------------------------------"),console.log(v);return(0,s.useEffect)((function(){N((function(){return"EngagementS"==e.value?l.filter((function(e){return e.name})).map((function(e){return K(e)})):l.filter((function(e){return e.salesPersonName})).map((function(e){return K(e)}))})),void 0!=e.selectedItems&&e.setSelectedItems(v)}),[v,W]),"EngagementS"!=e.value&&(0,s.useEffect)((function(){f((function(e){return e.filter((function(e){return"empActive"===e.status}))}))}),[c]),(0,s.useEffect)((function(){"EngagementS"==e.value?h().get(r+"/ProjectMS/Engagement/customerdata").then((function(e){var t=e.data;M(t)})).catch((function(e){console.log(e)})):h().get(r+"/ProjectMS/Engagement/getCustomerName").then((function(e){var t=e.data;M(t)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){var t=null===localStorage.getItem("selectedSE")?[]:JSON.parse(localStorage.getItem("selectedSE"));"EngagementS"==e.value?(f((function(e){var t=e.map((function(e){return e.id})),a=P.filter((function(e){return!t.includes(e.id)}));return[].concat((0,j.Z)(e),(0,j.Z)(a))})),_(!0)):f(t),"EngagementS"!=e.value&&R("true"===localStorage.getItem("isIndividual"))}),[P]),(0,y.jsxs)("div",{className:"col-md-12",children:[(0,y.jsxs)("div",{className:"col-md-12",children:[(0,y.jsx)("div",{className:"col-md-5 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-3",htmlFor:"engagementName",children:"Search"}),(0,y.jsx)("span",{className:"col-1 ",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("input",{type:"text",placeholder:"type to Search",onChange:function(e){return V(e.target.value.toLowerCase())}})})]})}),"EngagementS"==e.value?"":(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsxs)("div",{className:"col-md-3",children:[(0,y.jsx)("label",{children:"Show Inactive"}),"\xa0",(0,y.jsx)("input",{type:"checkbox",id:"showInactive",name:"showInactive",onChange:function(){d((function(e){return!e}))},checked:c}),"\xa0"]}),(0,y.jsxs)("div",{className:"col-md-3",children:[(0,y.jsx)("label",{children:"Select Individual"}),"\xa0",(0,y.jsx)("input",{type:"checkbox",id:"SelectIndividual",name:"SelectIndividual",onChange:function(){return R((function(e){return!e}))},checked:T}),"\xa0"]})]})]}),(0,y.jsxs)("div",{className:"col-md-4 form-check",children:[(0,y.jsx)("input",{type:"checkbox",id:"SelectedItems",name:"SelectedItems",className:"form-check-input",onChange:function(){f([])},checked:v.length>0}),(0,y.jsxs)("label",{className:"form-check-label",children:["Selected Items ",(0,y.jsx)("span",{className:"col-1 ",children:":"})]})]}),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(E,{selectedSEDisp:S,newMemberDropdown:l})}),(0,y.jsx)("div",{className:"col-md-12 clearfixsss",style:{height:"10px"}}),(0,y.jsxs)("div",{className:"col-md-12 nopadding",children:["EngagementS"==e.value?"":(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("div",{className:"col-md-3 pr0",children:(0,y.jsx)("div",{className:"col-md-12 card customCard"})})]}),(0,y.jsxs)("div",{className:"col-md-12 customCard",children:[(0,y.jsxs)("div",{className:"col-md-6 form-check",children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:function(){console.log(e.value),f(C?function(e){var t=P.map((function(e){return e.id}));return e.filter((function(e){return!t.includes(e.id)}))}:function(t){var a=t.map((function(e){return e.id})),s="EngagementS"===e.value?P.filter((function(e){return!a.includes(e.id)})):P.filter((function(e){return e.status!==(c?"":"empInactive")})).filter((function(e){return!a.includes(e.id)}));return[].concat((0,j.Z)(t),(0,j.Z)(s))}),_((function(e){return!e}))},checked:C}),(0,y.jsxs)("label",{className:"form-check-label",children:["EngagementS"==e.value?"All Customers":"Select All Indirect Sales Executive",(0,y.jsx)("span",{className:"col-1 ",children:":"})]})]}),(0,y.jsx)(y.Fragment,{}),(0,y.jsx)("div",{className:"col-md-12 clearfix",style:{height:"20px"}}),"EngagementS"==e.value?"":(0,y.jsxs)(y.Fragment,{children:[" ",(0,y.jsx)("div",{className:"col-md-12 card customCard"})]})]})]})]})})),W=a(16030),V=a(49648);function z(e){var t=e.value,a=e.visible,n=e.setVisible,l=e.setSelectedItems,r=e.newMemberDropdown,o=e.selectedItems,i=(0,s.useRef)(null),c=(0,W.I0)();return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(d.Tk,{visible:a,onClose:function(){return n(!1)},size:"xl",children:[(0,y.jsx)(d.p0,{children:(0,y.jsx)(d.fl,{children:"EngagementS"==t?"Select Customers":"Select Executives"})}),(0,y.jsx)(d.sD,{children:(0,y.jsx)(H,{ref:i,value:t,setSelectedItems:l,selectedItems:o,newMemberDropdown:r})}),"EngagementS"==t?"":(0,y.jsxs)(d.Ym,{children:[(0,y.jsx)(d.u5,{onClick:function(){c((0,V.Xm)("undo")),i.current.resetTOlocalState()},children:"Undo"}),(0,y.jsx)(d.u5,{onClick:function(){i.current.setGlobalState(),c((0,V.Xm)("save")),n(!1)},children:"Save"})]})]})})}var J=a(40071),K=a(25415),G=a.n(K),X=a(72426),Q=a.n(X),q=a(38596),$=a(95269),ee=a(78820);var te=function(e){e.openPopup,e.setOpenPopup,e.data,e.updateId;var t,a=e.reviewerId,l=e.countData,r=(e.statusId,e.getCountData,e.successfullymsg),u=e.validationmessage,m=(e.tabledata,e.settabledata),j=e.updateStatus,f=(0,s.useState)([]),x=(0,n.Z)(f,2),S=(x[0],x[1],(0,s.useState)([])),N=(0,n.Z)(S,2),b=(N[0],N[1]),w=(0,s.useState)([]),C=(0,n.Z)(w,2),_=C[0],Z=C[1],D=(0,s.useState)([]),P=(0,n.Z)(D,2),M=P[0],I=P[1],k=(0,s.useState)([]),T=(0,n.Z)(k,2),R=(T[0],T[1],p.N.baseUrl),E=(0,s.useState)(!1),F=(0,n.Z)(E,2),O=F[0],Y=(F[1],(0,s.useState)([])),L=(0,n.Z)(Y,2),U=(L[0],L[1]),B=(0,s.useState)(!1),H=(0,n.Z)(B,2),W=H[0],V=H[1],z=(0,s.useState)([]),K=(0,n.Z)(z,2),G=(K[0],K[1],(0,s.useState)([])),X=(0,n.Z)(G,2),q=(X[0],X[1],(0,s.useState)({id:"",action_status:"",updated_by_id:""})),$=(0,n.Z)(q,2),te=$[0],ae=($[1],(0,s.useState)(te)),se=(0,n.Z)(ae,2),ne=(se[0],se[1]),le=(0,s.useState)(!1),re=(0,n.Z)(le,2),oe=re[0],ie=re[1],ce=(0,s.useState)([]),de=(0,n.Z)(ce,2);de[0],de[1],(0,s.useEffect)((function(){l[0]&&I(JSON.parse(JSON.stringify(l[0])))}),[l]);var ue=function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{style:{color:"orange",textAlign:"center",tittle:"delete",cursor:"pointer"},children:(0,y.jsx)(ee.YK6,{"data-toggle":"tooltip",title:"Delete",onClick:function(){V(!0),Z(e.id)}})})})},me=function(e){return(0,y.jsx)(y.Fragment,{children:"1060"==e.action_status?(0,y.jsx)("div",{children:"Completed"}):(0,y.jsxs)("select",{id:"action_status",onChange:function(t){!function(e,t){var a=null===e||void 0===e?void 0:e.target;a.id,a.value,U((function(e){return null===e||void 0===e?void 0:e.map((function(e){return e.id===t.id?(0,i.Z)((0,i.Z)({},e),{},{modified:!0}):e}))})),m((function(a){var s;return(0,i.Z)((0,i.Z)({},a),{},(0,o.Z)({},t.id,null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}))}(t,e)},defaultValue:e.action_status,children:[(0,y.jsx)("option",{value:"1058",selected:"1058"==ne.action_status,children:"New"}),(0,y.jsx)("option",{value:"1059",selected:"1059"==ne.action_status,children:"In Progress"}),(0,y.jsx)("option",{value:"1060",selected:"1060"==ne.action_status,children:"Completed"})]})})},he=function(e){return(0,y.jsx)("div",{title:a,className:"ellipsis tooltip-ex",children:a})},pe=function(e){return(0,y.jsx)("div",{"data-toggle":"tooltip",title:e.reviewer_comments,className:"ellipsis tooltip-ex",children:e.reviewer_comments})},ve=function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},x:!0,title:Q()(e.date_created).format("DD-MMM-YYYY"),children:Q()(e.date_created).format("DD-MMM-YYYY")})},je=function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},title:Q()(e.due_date).format("DD-MMM-YYYY"),children:Q()(e.due_date).format("DD-MMM-YYYY")})},fe=function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},title:"Invalid date"==e.completed_date?"":Q()(e.completed_date).format("DD-MMM-YYYY"),children:null==e.completed_date?"":Q()(e.completed_date).format("DD-MMM-YYYY")})},xe=function(e){return(0,y.jsx)("div",{"data-toggle":"tooltip",title:e.action,children:e.action})},ge=function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},children:e.SNo})},Se=null===(t=Object.keys(M))||void 0===t?void 0:t.map((function(e,t){return(0,y.jsx)(g.s,{sortable:!0,body:"id"==e?ue:"action_status"==e?me:"action_statuss"==e?he:"date_created"==e?ve:"due_date"==e?je:"completed_date"==e?fe:"action"==e?xe:"SNo"==e?ge:"reviewer_comments"==e&&pe,field:e,header:M[e]},e)}));function Ne(e){var t=e.deletePopup,a=e.setDeletePopup,s=e.deleteAction;return(0,y.jsx)("div",{className:"deletePopUpReviewLog",children:(0,y.jsxs)(d.Tk,{visible:t,size:"sm",className:"ui-dialog",onClose:function(){return a(!1)},children:[(0,y.jsx)(d.p0,{style:{cursor:"all-scroll"},children:(0,y.jsx)(d.fl,{children:(0,y.jsx)("span",{className:"",children:"Delete Confirmation"})})}),(0,y.jsxs)(d.sD,{children:[(0,y.jsx)("span",{style:{textAlign:"center"},children:"Are you sure you want to delete the Action Item ?"}),(0,y.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,y.jsxs)("button",{type:"delete",className:"btn btn-primary",onClick:function(){s(),a(!1)},children:[(0,y.jsx)(ee.bzc,{}),"Yes"," "]}),(0,y.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){a(!1)},children:[(0,y.jsx)(ee.oHP,{}),"No"," "]})]})]})]})})}return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[u?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsxs)("span",{children:[" ",(0,y.jsx)(J.SZZ,{})," Please Change Status Before Saving"]})]}):"",r?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(A.hXj,{}),"\xa0 Action status saved successfully"]})}):"",O?(0,y.jsx)("div",{className:"statusMsg error",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(ee.CSE,{}),"\xa0 Action status saved successfully"]})}):"",oe?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(A.I2T,{}),"\xa0 Action status Deleted successfully"]})}):"",(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{className:"ft16 mt-3 ",style:{color:"#297AB0",fontWeight:"bold"},children:"Action Items:"}),(0,y.jsx)(v.Z,{data:l,rows:[10],dynamicColumns:Se,headerData:M,setHeaderData:I})]}),(0,y.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:[" ",(0,y.jsxs)("button",{className:"btn btn-primary",onClick:function(){j()},children:[(0,y.jsx)(c.TvB,{})," Save"]})]})]}),W?(0,y.jsx)(Ne,{deletePopup:W,setDeletePopup:V,deleteAction:function(){ie(!1),h().delete(R+"/ProjectMS/project/deleteStatusItem?id=".concat(_)).then((function(e){var t=e.data;b(t),ie(!0),setTimeout((function(){ie(!1)}),3e3)}))}}):""]})};a(72572),a(41980),a(39122),a(31896),a(81975),a(54286),a(59962);var ae=function(e){var t,a=(0,s.useState)(!1),l=(0,n.Z)(a,2),r=l[0],o=l[1],c=(0,s.useState)([]),u=(0,n.Z)(c,2),m=u[0],j=u[1],f=(0,s.useState)(""),x=(0,n.Z)(f,2),S=x[0],N=x[1],b=(0,s.useState)(""),w=(0,n.Z)(b,2),C=w[0],_=w[1],Z=(0,s.useState)([]),D=(0,n.Z)(Z,2),P=(D[0],D[1]),M=(0,s.useState)(""),I=(0,n.Z)(M,2),k=I[0],T=I[1],R=p.N.baseUrl,A=(0,s.useState)([]),E=(0,n.Z)(A,2),F=E[0],O=E[1],Y=(0,s.useState)(!1),L=(0,n.Z)(Y,2),U=L[0],B=L[1],H=e.view,W=e.setView,V=e.projectId,z=(e.projectName,e.selectedCustomer),J=(0,s.useState)([{}]),K=(0,n.Z)(J,2),G=K[0],X=K[1],Q=(0,s.useState)([{}]),ee=(0,n.Z)(Q,2),ae=ee[0],se=ee[1],ne=(0,s.useState)(null),le=(0,n.Z)(ne,2),re=le[0],oe=le[1],ie=function(){oe(!1)},ce=(0,q.Z)({dialog:{position:"absolute",top:"250px",minHeight:"18%"},textField:{border:"1px solid rgb(159 13 13)"}})(),de=(0,s.useState)([]),ue=(0,n.Z)(de,2),me=(ue[0],ue[1],function(e){return _(e.reviewer),T(e.review_st),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{title:e.actItems,style:{cursor:"pointer",textAlign:"center",color:"#2E88C5"},onClick:function(){o(!0),he(null===e||void 0===e?void 0:e.prhId),N(e.prhId),_(e.reviewer),T(e.review_st)},children:(0,y.jsx)("div",{style:{textAlign:"center"},children:0!==e.actItems?e.actItems:""})})})}),he=function(e){void 0!==e&&h().get(R+"/ProjectMS/project/projectreviewlogTableInfo?ProjectId=".concat(e)).then((function(e){var t=e.data,a=[];t.forEach((function(e){var t={value:e.id};a.push(t)}));for(var s=0;s<t.length;s++)t[s].SNo=s+1;var n=[{SNo:"S.No",action:"Action",date_created:"Created Date",due_date:"Due Date",completed_date:"Completed Date",reviewer_comments:"Reviewer Comments",action_statuss:"Created By",action_status:"Status",id:"Action"}];se(n.concat(t)),se(n.concat(t.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{modified:!1})}))))}))};(0,s.useEffect)((function(){h().get(R+"/ProjectMS/project/reviewHistory?projectId=".concat(V)).then((function(e){for(var t=e.data,a=0;a<t.length;a++)t[a].docCount=0==t[a].docCount?"":t[a].docCount;X([{sno:"S.No",review_dt:"Review Date",review_st:"Status",rev_type:"Type",reviewer:"Reviewer",actItems:"Action Items",docCount:"Report",comments:"Comments"}].concat(t))})).catch((function(e){})),h()({method:"get",url:R+"/ProjectMS/Audit/projectOverviewDetails?projectId=".concat(V)}).then((function(e){var t=e.data;P(t)})).catch((function(e){})),he()}),[]);var pe=function(e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.docCount,style:{cursor:"pointer",textAlign:"center",color:"#2E88C5"},onClick:function(t){Ee(),j(e.docId),oe(t.currentTarget)},children:(0,y.jsx)("div",{style:{textAlign:"center"},children:e.docCount})})})},ve=function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},children:e.sno})},je=function(e){return(0,y.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.comments,children:e.comments})},fe=function(e){return(0,y.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.reviewer,children:e.reviewer})},xe=function(e){return(0,y.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.rev_type,children:e.rev_type})},ge=function(e){return(0,y.jsx)("span",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.review_st,children:e.review_st})},Se=function(e){return(0,y.jsx)("div",{className:" ellipsis tooltip-ex","data-toggle":"tooltip",title:e.review_dt,style:{textAlign:"center"},children:e.review_dt})},Ne=localStorage.getItem("resId"),be=(0,s.useState)({}),we=(0,n.Z)(be,2),ye=we[0],Ce=we[1],_e=(0,s.useState)(!1),Ze=(0,n.Z)(_e,2),De=Ze[0],Pe=Ze[1],Me=(0,s.useState)(!1),Ie=(0,n.Z)(Me,2),ke=Ie[0],Te=Ie[1],Re=Number(Ne)+1,Ae=null===(t=Object.keys(F))||void 0===t?void 0:t.map((function(e,t){return(0,y.jsx)(g.s,{sortable:!0,body:"actItems"==e?me:"docCount"==e?pe:"sno"==e?ve:"comments"==e?je:"reviewer"==e?fe:"rev_type"==e?xe:"review_dt"==e?Se:"review_st"==e&&ge,field:e,header:F[e]},e)})),Ee=function(){B(!0)};function Fe(e){(0,q.Z)({dialog:{position:"absolute",top:"250px",minHeight:"18%"},textField:{border:"1px solid rgb(159 13 13)"}})(),e.deletePopup,e.setDeletePopup;var t,a=e.docId,s=null===a||void 0===a||null===(t=a.split(","))||void 0===t?void 0:t.map((function(e){return null===e||void 0===e?void 0:e.split(":")}));null===s||void 0===s||s.map((function(e){}));var n=Boolean(re)?"my-popover":void 0;return(0,y.jsx)("div",{children:(0,y.jsx)($.ZP,{disablePortal:!0,arrow:!0,open:Boolean(re),id:n,maxWidth:"lg",anchorEl:re,onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},className:"primeReactPopover",children:(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"popoverHeader",children:[(0,y.jsx)("div",{children:(0,y.jsx)("b",{children:"Documents"})}),(0,y.jsx)("span",{onClick:ie,cursor:"pointer",children:"\u2715"})]}),(0,y.jsx)("ul",{className:"popoverLinks",children:null==s?(0,y.jsx)("li",{children:(0,y.jsx)("a",{"data-toggle":"tooltip",target:"_blank",children:"undefined"})}):null===s||void 0===s?void 0:s.map((function(e){return(0,y.jsx)("li",{children:(0,y.jsx)("a",{className:"linkSty",onClick:function(){return function(e,t){var a=R+"/CommonMS/document/downloadFile?documentId=".concat(e);h()({url:a,method:"GET",responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",t),document.body.appendChild(s),s.click()}))}(e[0],e[1])},children:e[1]})})}))})]})})})}return(0,y.jsxs)(d.Tk,{visible:H,size:"xl",onClose:function(){return W(!1)},backdrop:"static",maxWidth:"md",classes:{paper:ce.dialog},children:[(0,y.jsx)(d.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,y.jsx)(d.fl,{children:(0,y.jsxs)("span",{className:"ft16",children:["Review History:",null===z||void 0===z?void 0:z.projectName]})})}),(0,y.jsxs)(d.sD,{children:[(0,y.jsx)(v.Z,{data:G,rows:10,dynamicColumns:Ae,headerData:F,setHeaderData:O,fileName:"Project Reviews"}),re?(0,y.jsx)(Fe,{deletePopup:U,setDeletePopup:B,docId:m,handleClose:ie}):"",r&&(0,y.jsx)(te,{updateStatus:function(){if(null===ye||void 0===ye)Pe(!0);else if(0===Object.keys(ye).length)Pe(!0);else{var e;Te(!1);ae.filter((function(e){return null===e||void 0===e?void 0:e.modified}));var t=[];null===Object||void 0===Object||null===(e=Object.keys(ye))||void 0===e||e.forEach((function(e){var a={};a.id=+e,a.action_status=+ye[e],a.updated_by_id=+Re,t.push(a)})),h().post(R+"/ProjectMS/project/updateActionItemStatus",t).then((function(e){e.data;Pe(!1),Te(!0),setTimeout((function(){Te(!1)}),3e3),he(S),Ce(null)})).catch((function(e){console.error("An error occurred:",e)}))}},tabledata:ye,settabledata:Ce,validationmessage:De,successfullymsg:ke,getCountData:he,headerdata:F,setHeaderdata:O,data:G,updateId:S,reviewerId:C,statusId:k,countData:ae})]})]})},se=a(59513),ne=a.n(se);var le=function(e){var t=e.riskDetails,a=e.getData,l=e.setFormData,r=(e.editedData,e.formEditData,e.onChangeHandler),c=e.refArr,d=e.name,u=e.id,m=e.value,h=(0,s.useState)([]),p=(0,n.Z)(h,2),v=p[0];p[1],(0,s.useEffect)((function(){}),[v]),(0,s.useEffect)((function(){}),[t]);var j=localStorage.getItem("resName");return localStorage.getItem("resId"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"autoComplete-container",children:"UpdateBillingRate"==m?(0,y.jsx)(M.ReactSearchAutocomplete,{items:t,type:"Text",autocom:!0,name:d,inputSearchString:j,id:u,className:"err",riskDetails:t,getData:a,onChange:function(e){r(e)},onSelect:function(e){l((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,o.Z)({},d,e.id))}))},showIcon:!1}):(0,y.jsx)("div",{className:"auto autocomplete",id:"auto",ref:function(e){void 0!=c&&(c.current[0]=e)},children:(0,y.jsx)(M.ReactSearchAutocomplete,{items:t,type:"Text",name:d,autocomplete:"off",inputSearchString:j,id:u,className:"err",riskDetails:t,getData:a,onChange:function(e){r(e)},onSelect:function(e){l((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,o.Z)({},d,e.id))}))},showIcon:!1})})}),(0,y.jsx)("span",{children:v.name})]})},re=a(32125);new Date;var oe=function(e){var t=(0,q.Z)({dialog:{position:"absolute",top:"250px",minHeight:"18%"},textField:{border:"1px solid rgb(159 13 13)"}})(),a=e.open,l=e.setOpen,r=e.projectId,u=e.selectedCustomer,m=(e.revDate,e.totaldata),v=(0,s.useState)([]),f=(0,n.Z)(v,2),S=f[0],N=f[1],b=(0,s.useState)([{}]),w=(0,n.Z)(b,2),C=(w[0],w[1]),_=(0,s.useState)([]),Z=(0,n.Z)(_,2),D=Z[0],P=Z[1],M=localStorage.getItem("resId"),I=(0,s.useState)([]),k=(0,n.Z)(I,2),T=k[0],R=k[1],A=p.N.baseUrl,E=(0,s.useState)(""),F=(0,n.Z)(E,2),O=F[0],Y=F[1],L=(0,s.useState)(""),U=(0,n.Z)(L,2),B=U[0],H=U[1],W=(0,s.useState)(),V=(0,n.Z)(W,2),z=(V[0],V[1]),J=(0,s.useState)([]),K=(0,n.Z)(J,2),G=K[0],X=K[1],$=(0,s.useState)([]),te=(0,n.Z)($,2),ae=te[0],se=te[1],oe=(0,s.useState)([]),ie=(0,n.Z)(oe,2),ce=(ie[0],ie[1]),de=(0,s.useState)(!1),ue=(0,n.Z)(de,2),me=ue[0],he=ue[1],pe=(0,s.useState)(""),ve=(0,n.Z)(pe,2),je=(ve[0],ve[1],(0,s.useState)(!1)),fe=(0,n.Z)(je,2),xe=fe[0],ge=fe[1],Se=(0,s.useState)([]),Ne=(0,n.Z)(Se,2),be=(Ne[0],Ne[1],Number(M)+1),we=(0,s.useRef)([]),ye=(0,s.useState)([]),Ce=(0,n.Z)(ye,2),_e=Ce[0],Ze=Ce[1],De=function(){h().get(A+"/ProjectMS/project/reviewHistory?projectId=".concat(r)).then((function(e){var t=e.data;z(t)})).catch((function(e){}))};(0,s.useEffect)((function(){De()}),[]),(0,s.useEffect)((function(){var e;""==(null===(e=S[0])||void 0===e?void 0:e.event_name)&&(document.getElementsByClassName("p-row-editor-init p-link")[0].click(),setTimeout((function(){var e;null===(e=document.getElementsByClassName("p-row-editor-cancel p-link")[0])||void 0===e||e.addEventListener("click",(function(e){var t;""==(null===(t=S[0])||void 0===t?void 0:t.event_name)&&N(S.slice(1,S.length))}),!0)}),200))}),[S]);var Pe=function(e,t){return(0,y.jsx)("input",{type:"text",id:"action-".concat(t),className:"error".concat(!xe||null!==e&&void 0!==e&&e.action?"":" error-block"),onChange:function(e){var a=(0,j.Z)(_e);a[t.rowIndex]=(0,i.Z)((0,i.Z)({},a[t.rowIndex]),{},{action:e.target.value}),Ze(a),Y(a)}})},Me=function(e,t){return(0,y.jsx)("input",{type:"text",id:"reviewComments-".concat(t),onChange:function(e){var a=(0,j.Z)(_e);a[t.rowIndex]=(0,i.Z)((0,i.Z)({},a[t.rowIndex]),{},{revComments:e.target.value}),Ze(a)}})},Ie=function(e,t){var a,s=null===(a=_e[t.rowIndex])||void 0===a?void 0:a.date;return(0,y.jsx)("div",{className:"ReviewLogDatepicker",children:(0,y.jsx)(ne(),{showYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",className:"error".concat(xe&&!s?" error-block":""),minDate:new Date,dateFormat:"dd-MMM-yyyy",selected:s?new Date(s):null,onKeyDown:function(e){return e.preventDefault()},onChange:function(e){var a=(0,j.Z)(_e);a[t.rowIndex]=(0,i.Z)((0,i.Z)({},a[t.rowIndex]),{},{date:e}),Ze(a),R(a)},locale:"en-GB",placeholderText:"From Date"})})},ke=function(){h()({method:"get",url:A+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;P(t)}))};return(0,s.useEffect)((function(){}),[]),(0,s.useEffect)((function(){ke()}),[]),(0,y.jsx)("div",{children:(0,y.jsx)("div",{children:(0,y.jsxs)(d.Tk,{visible:a,size:"lg",onClose:function(){return l(!1)},backdrop:"static",maxWidth:"lg",classes:{paper:t.dialog},children:[(0,y.jsx)(d.p0,{className:"",children:(0,y.jsx)(d.fl,{children:(0,y.jsxs)("span",{className:"",children:["Design Review :",null===u||void 0===u?void 0:u.projectName]})})}),(0,y.jsx)(d.sD,{children:(0,y.jsxs)("div",{className:"col-md-12",children:[xe?(0,y.jsx)("div",{className:"statusMsg error p0",children:(0,y.jsxs)("span",{children:[(0,y.jsx)(ee.CSE,{}),"\xa0","Please provide the valid values for highlighted fields"]})}):"",(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-6 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-4",htmlFor:"projectmanager",children:["Reviewer Name\xa0",(0,y.jsx)("span",{className:"required error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("span",{className:"col-7 ",children:(0,y.jsx)("div",{className:"autoComplete-container cancel error autocomplete reactautocomplete",id:"autocomplete reactautocomplete",ref:function(e){we.current[0]=e},children:(0,y.jsx)(le,{name:"assigned_to",id:"assigned_to",value:"UpdateBillingRate",riskDetails:D,getDataRisks:ke,setFormData:C,onChangeHandler:function(e){var t=e.target,a=t.id;t.value;C((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,o.Z)({},e.target.id,a))}))},inputSearchString:M})})})]})}),(0,y.jsx)("div",{className:" col-md-6 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-4",htmlFor:"projectmanager",children:"Report"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("span",{className:"col-7 ",children:(0,y.jsx)("input",{type:"file",name:"docId",className:"fileUpload form-control cancel",id:"file",onChange:function(e){se(e.target.files[0]),ce(e.target.files[0].name)}})})]})}),(0,y.jsxs)("div",{className:"row",children:[(0,y.jsx)("div",{className:"col-md-2",children:(0,y.jsx)("label",{children:"Comments "})}),(0,y.jsx)("div",{className:"col-1",style:{width:"33px"},children:":"}),(0,y.jsx)("div",{className:"col-md-7",children:(0,y.jsx)("textarea",{type:"text",placeholder:"Type Comments here",onChange:function(e){H(e.target.value)}})})]})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"ft16 mt-3 ",style:{color:"#297AB0",fontWeight:"bold"},children:"Action Items:"}),(0,y.jsx)("div",{className:"card p-fluid  mb-2",children:(0,y.jsx)("div",{className:"customercard  darkHeader mt-2",children:(0,y.jsxs)(x.w,{className:"primeReactDataTable invoicingSearchTable    reportsPrimeTable",value:S,editMode:"row",rows:1500,selection:G,onSelectionChange:function(e){return X(e.value)},dataKey:"id",showGridlines:!0,stripedRows:!0,scrollHeight:"400px",responsiveLayout:"scroll",emptyMessage:"No Records found.",children:[(0,y.jsx)(g.s,{field:"action",header:"Action",body:function(e,t){return Pe(e,t)},style:{width:"20%"}}),(0,y.jsx)(g.s,{field:"date",header:"Due Date",body:function(e,t){return Ie(0,t)},style:{width:"20%"}}),(0,y.jsx)(g.s,{field:"Reviewercomments",header:" Reviewer Comments",body:function(e,t){return Me(0,t)},style:{width:"20%"}}),(0,y.jsx)(g.s,{field:"delete",header:"Action",body:function(e,t){return(0,y.jsx)(ee.YK6,{color:"orange",align:"center",title:"Delete Action",onClick:function(){!function(e){var t=(0,j.Z)(S);t.splice(e,1),N(t)}(t.rowIndex)}})},style:{width:"15%",textAlign:"center"}})]})})}),(0,y.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,y.jsxs)("button",{className:"btn btn-primary",title:"Add new row",onClick:function(e){me||he(!0);var t={action:"",date:"",Reviewercomments:"",id:Date.now()},a=[];a.push(t),O==[]||void 0==O||""==O&&""==T||void 0==T||T==[]?(ge(!0),N([].concat(a))):(ge(!1),N((function(e){return[].concat((0,j.Z)(e),[a])})))},children:[(0,y.jsx)(c.wEH,{})," Add"]}),(0,y.jsxs)("button",{id:"submit",className:"btn btn-primary",onClick:function(){!function(){if((0,re.Z)(we))return ge(!0),void setTimeout((function(){ge(!1)}),3e3);var e=_e.map((function(e){return{action:e.action,date:Q()(e.date).format("YYYY-MM-DD"),revComments:e.revComments}})),t=(0,o.Z)({projectId:m.id,revType:m.reviewTypeId,statusId:+m.revStatus,curRevHisId:m.curRevHisId,curRevId:be,revDate:Q()(m.scheduledDate).format("YYYY-MM-DD"),reviewerId:null===u||void 0===u?void 0:u.reviewerId,comments:B,loggedUser:M,actions:e},"reviewerId",be);h().postForm(A+"/ProjectMS/project/saveReviews",{files:ae,model:JSON.stringify(t)},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var t=e.data;De(),l(!1),setTaskStatus(t.action_status),setUpdateData(t),he(!1),setSuccessfullymsg(!0),setTimeout((function(){setSuccessfullymsg(!1)}),2e3)})).catch((function(e){}))}()},children:[(0,y.jsx)(c.TvB,{})," Submit"]})]})]})]})})]})})})},ie=(a(5636),a(85401)),ce=(a(68639),function(e){var t=e.rowData,a=e.setpostData,l=e.selectedCustomer,r=e.reviewdatevalid,c=e.setselecteddatevalidation,d=e.changedRows,u=e.setChangedRows,m=(0,s.useState)(t.scheduledDate?new Date(t.scheduledDate):null),h=(0,n.Z)(m,2),p=h[0],v=h[1],j=l===t.projectId&&r?"error-block":"";return(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"datepicker projectReviewDatepciker ",children:(0,y.jsx)(ne(),{name:"scheduled_date",className:"error ".concat(j),id:"scheduled_date",selected:p,autoComplete:"off",onChange:function(e){null===t||void 0===t||t.revStatus;!function(e,t,s){v(e),c(e),a((function(a){return(0,i.Z)((0,i.Z)({},a),{},(0,o.Z)({},t,(0,i.Z)((0,i.Z)({},a[t]),{},{selectedDate:e,reviewId:t,projectId:s})))}));var n=d.get(s);if(n){var l=(0,i.Z)((0,i.Z)({},n),{},{scheduledDate:e}),r=new Map(d);r.set(l.id,l),u(r)}}(e,null===t||void 0===t?void 0:t.reviewId,null===t||void 0===t?void 0:t.id)},minDate:new Date,dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()},showYearDropdown:!0,showMonthDropdown:!0,dropdownMode:"select",style:{textAlign:"center"}})})})}),de=[{label:"Design Review",value:"1021"},{label:"Code Review",value:"1022"},{label:"Management Review",value:"1023"}];var ue=function(){var e,t,l=(0,y.jsxs)(N.E,{children:[(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Status",rowSpan:2}),(0,y.jsx)(g.s,{header:"Project Details",colSpan:4,style:{textAlign:"center"}}),(0,y.jsx)(g.s,{header:"Last Review",rowSpan:2}),(0,y.jsx)(g.s,{header:"Scheduled Date",colSpan:3}),(0,y.jsx)(g.s,{header:"Action",rowSpan:2})]}),(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Project Name",field:"projectName",title:"projectName"}),(0,y.jsx)(g.s,{header:"Project Start Date",field:"prjStartDate"}),(0,y.jsx)(g.s,{header:"Customer",field:"customer"}),(0,y.jsx)(g.s,{header:"Project Stage",field:"prjStatus"}),(0,y.jsx)(g.s,{header:"Review Type",field:"reviewType"}),(0,y.jsx)(g.s,{header:"Review Status",field:"revStatusDtl"}),(0,y.jsx)(g.s,{header:"Review Date",field:"scheduledDate"})]})]}),r=(0,y.jsxs)(N.E,{children:[(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Project Details",colSpan:4,style:{textAlign:"center"}}),(0,y.jsx)(g.s,{header:"Review Details",colSpan:5}),(0,y.jsx)(g.s,{header:"Action",rowSpan:2})]}),(0,y.jsxs)(b.X,{children:[(0,y.jsx)(g.s,{header:"Project Name",field:"projectName",title:"projectName"}),(0,y.jsx)(g.s,{header:"Project Start Date",field:"prjStartDate"}),(0,y.jsx)(g.s,{header:"Customer",field:"customer"}),(0,y.jsx)(g.s,{header:"Project Stage",field:"prjStatus"}),(0,y.jsx)(g.s,{header:"Review Type",field:"reviewType"}),(0,y.jsx)(g.s,{header:"Scheduled Date",field:"scheduledDate"}),(0,y.jsx)(g.s,{header:"Completed Date",field:"lastReviewDate"}),(0,y.jsx)(g.s,{header:"Reviewer",field:"reviewer"}),(0,y.jsx)(g.s,{header:"Comments",field:"comments"})]})]}),m=(new Date,(0,s.useState)(!1)),v=(0,n.Z)(m,2),w=v[0],C=v[1],Z=(0,s.useState)(!1),D=(0,n.Z)(Z,2),I=D[0],T=D[1],R=(0,s.useState)([]),E=(0,n.Z)(R,2),F=E[0],O=E[1],Y=localStorage.getItem("resId"),L=(0,s.useState)(-1),U=(0,n.Z)(L,2),B=U[0],H=U[1],W=(0,s.useState)([]),V=(0,n.Z)(W,2),K=V[0],X=V[1],q=(0,s.useState)([]),$=(0,n.Z)(q,2),ee=$[0],te=$[1],se=(0,s.useState)([]),le=(0,n.Z)(se,2),re=le[0],ue=le[1],me=(0,s.useState)([]),he=(0,n.Z)(me,2),pe=(he[0],he[1]),ve=(0,s.useState)(!1),je=(0,n.Z)(ve,2),fe=je[0],xe=je[1],ge=(0,s.useState)(""),Se=(0,n.Z)(ge,2),Ne=Se[0],be=Se[1],we=(0,s.useState)([]),ye=(0,n.Z)(we,2),Ce=ye[0],_e=ye[1],Ze=(0,s.useState)(!1),De=(0,n.Z)(Ze,2),Pe=De[0],Me=De[1],Ie=(0,s.useState)(!1),ke=(0,n.Z)(Ie,2),Te=ke[0],Re=ke[1],Ae=(0,s.useState)(""),Ee=(0,n.Z)(Ae,2),Fe=Ee[0],Oe=Ee[1],Ye=(0,s.useState)(!1),Le=(0,n.Z)(Ye,2),Ue=Le[0],Be=Le[1],He=(0,s.useState)(de),We=(0,n.Z)(He,2),Ve=We[0],ze=We[1],Je=(0,s.useState)(""),Ke=(0,n.Z)(Je,2),Ge=Ke[0],Xe=(Ke[1],(0,s.useState)({scheduled_date:"",review_status_id:""})),Qe=(0,n.Z)(Xe,2),qe=Qe[0],$e=Qe[1],et=(0,s.useState)([{}]),tt=(0,n.Z)(et,2),at=tt[0],st=tt[1],nt=null===at||void 0===at?void 0:at.map((function(e){return null===e||void 0===e?void 0:e.id})).toString();(0,s.useEffect)((function(){}),[nt],[qe.serarchVals]);var lt=(0,s.useState)(!1),rt=(0,n.Z)(lt,2),ot=rt[0],it=rt[1],ct=(0,s.useState)(-1),dt=(0,n.Z)(ct,2),ut=dt[0],mt=dt[1],ht=(0,s.useState)(1),pt=(0,n.Z)(ht,2),vt=pt[0],jt=pt[1],ft=(0,s.useState)(-1),xt=(0,n.Z)(ft,2),gt=xt[0],St=xt[1],Nt=(0,s.useState)(-1),bt=(0,n.Z)(Nt,2),wt=bt[0],yt=bt[1],Ct=(0,s.useState)(!1),_t=(0,n.Z)(Ct,2),Zt=_t[0],Dt=_t[1],Pt=(0,s.useState)(!1),Mt=(0,n.Z)(Pt,2),It=Mt[0],kt=Mt[1],Tt=(0,s.useState)(c.UdN),Rt=(0,n.Z)(Tt,2),At=Rt[0],Et=Rt[1],Ft=(0,s.useState)(""),Ot=(0,n.Z)(Ft,2),Yt=Ot[0],Lt=Ot[1],Ut=(0,s.useState)(""),Bt=(0,n.Z)(Ut,2),Ht=Bt[0],Wt=Bt[1],Vt=((0,s.useRef)([]),(0,s.useRef)(null)),zt=(0,s.useState)({executives:-2}),Jt=(0,n.Z)(zt,2),Kt=(Jt[0],Jt[1],(0,s.useState)(!1)),Gt=(0,n.Z)(Kt,2),Xt=Gt[0],Qt=Gt[1],qt=(0,s.useState)(!1),$t=(0,n.Z)(qt,2),ea=$t[0],ta=$t[1],aa=(0,s.useState)(!1),sa=(0,n.Z)(aa,2),na=(sa[0],sa[1]),la=(0,s.useState)([]),ra=(0,n.Z)(la,2),oa=ra[0],ia=ra[1],ca=(0,s.useState)(c.ceS),da=(0,n.Z)(ca,2),ua=da[0],ma=da[1],ha=(0,s.useState)(c.wEH),pa=(0,n.Z)(ha,2),va=pa[0],ja=pa[1],fa=(0,s.useState)([]),xa=(0,n.Z)(fa,2),ga=xa[0],Sa=xa[1],Na=(0,s.useState)(),ba=(0,n.Z)(Na,2),wa=(ba[0],ba[1]),ya=(0,s.useState)([]),Ca=(0,n.Z)(ya,2),_a=Ca[0],Za=Ca[1],Da=(0,s.useState)([]),Pa=(0,n.Z)(Da,2),Ma=(Pa[0],Pa[1]),Ia=p.N.baseUrl,ka={userId:""},Ta=(0,s.useState)(ka),Ra=(0,n.Z)(Ta,2),Aa=Ra[0],Ea=Ra[1],Fa=(0,s.useState)([]),Oa=(0,n.Z)(Fa,2),Ya=Oa[0],La=Oa[1],Ua=(0,s.useState)([]),Ba=(0,n.Z)(Ua,2),Ha=Ba[0],Wa=Ba[1],Va=(0,s.useState)(-1),za=(0,n.Z)(Va,2),Ja=za[0],Ka=za[1],Ga=(0,s.useState)([]),Xa=(0,n.Z)(Ga,2),Qa=Xa[0],qa=Xa[1],$a=(0,s.useState)(1021),es=(0,n.Z)($a,2),ts=es[0],as=es[1],ss=(0,s.useState)(-1),ns=(0,n.Z)(ss,2),ls=ns[0],rs=ns[1],os=(0,s.useState)(),is=(0,n.Z)(os,2),cs=is[0],ds=(is[1],(0,s.useState)()),us=(0,n.Z)(ds,2),ms=us[0],hs=us[1],ps=(0,s.useState)([]),vs=(0,n.Z)(ps,2),js=(vs[0],vs[1]),fs=(0,s.useState)(),xs=(0,n.Z)(fs,2),gs=xs[0],Ss=(xs[1],(0,s.useState)({global:{value:null,matchMode:f.a6.CONTAINS},name:{operator:f.pg.AND,constraints:[{value:null,matchMode:f.a6.STARTS_WITH}]},"country.name":{operator:f.pg.AND,constraints:[{value:null,matchMode:f.a6.STARTS_WITH}]},representative:{value:null,matchMode:f.a6.IN},status:{operator:f.pg.OR,constraints:[{value:null,matchMode:f.a6.EQUALS}]}})),Ns=(0,n.Z)(Ss,2),bs=Ns[0],ws=Ns[1],ys=(0,s.useState)(null),Cs=(0,n.Z)(ys,2),_s=Cs[0],Zs=Cs[1];(0,s.useEffect)((function(){Qa[0]&&js(JSON.parse(JSON.stringify(Qa[0])));_e(["XLS"])}),[Qa]);var Ds=null===(e=JSON.parse(localStorage.getItem("selectedCust")))||void 0===e||null===(t=e.map((function(e){return e.id})))||void 0===t?void 0:t.toString(),Ps=function(){Promise.resolve().then(a.bind(a,34045)).then((function(e){var t=Object.keys(Qa[0]),a=(0,j.Z)(new Set(t));a.shift();for(var s=Qa.map((function(e){return a.map((function(t){var a=e[t];return"scheduledDate"===t&&Q()(a).isValid()?Q()(a).format("DD-MMM-YYYY"):a}))})),n=s.map((function(e){return Object.values(e)})),l=new(G().Workbook),r=l.addWorksheet("ProjectSearchResultsData"),o=0;o<n.length;o++)r.addRow(n[o]);[1].forEach((function(e){r.getRow(e).font={bold:!0}})),l.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});saveAs(t,"ProjectSearchResultsData")}))}))},Ms=function(){var e=bs.global?bs.global.value:"";return(0,y.jsxs)("div",{className:"flex  flex-row-reverse",children:[(0,y.jsx)("div",{className:"exportBtn ml-3",children:(null===Ce||void 0===Ce?void 0:Ce.includes("XLS"))&&(0,y.jsx)("span",{className:"pi pi-file-excel excel",onClick:Ps,title:"Export to Excel"})}),(0,y.jsxs)("span",{className:"p-input-icon-left",children:[(0,y.jsx)("i",{className:"pi pi-search"}),(0,y.jsx)(S.o,{type:"search",style:{float:"right"},value:e||"",onChange:function(e){return function(e){var t=e.target.value,a=(0,i.Z)({},bs);a.global.value=t,ws(a)}(e)},placeholder:"Global Search"})]})]})}(),Is=function(){h()({method:"get",url:Ia+"/dashboardsms/allocationDashboard/getManagers"}).then((function(e){var t=e.data;Sa(t)}))},ks=function(){h()({method:"post",url:Ia+"/governancems/pcqa/getreviews",data:{prjStr:B,buIds:Ja,custIds:"select"==ls?Ds:+ls,prjStage:+vt,reviewType:"1019"==wt?sn:""==ts?1021:ts,reviewStatus:wt,prjSource:gt,fromDt:""==Yt?-1:Q()(Yt).format("YYYY-MM-DD"),toDt:""==Ht?-1:Q()(Ht).format("YYYY-MM-DD"),prjManager:""==Aa.userId?-1:Aa.userId}}).then((function(e){for(var t=e.data.data,a=0;a<t.length;a++)t[a].prjStartDate=null==t[a].prjStartDate?"":Q()(t[a].prjStartDate).format("DD-MMM-yyyy"),t[a].lastReviewDate=null==t[a].lastReviewDate?" ":Q()(t[a].lastReviewDate).format("DD-MMM-yyyy");qa([{sno:"S.No",projectName:"Project Name",prjStartDate:"Project Start Date",customer:"Customer",prjStatus:"Project Stage",lastReviewDate:"Last Review",reviewType:"Review Type",revStatusDtl:"Review Status",scheduledDate:"Review Date",Risk_status:""}].concat(t));X(["projectName"]),te(["/project/Overview/"]),ia(t),Qt(!1),kt(!It),Et(It?c.UdN:c.NR5),ta(!0)}))};(0,s.useEffect)((function(){Qa[0]&&js(JSON.parse(JSON.stringify(Qa[0])))}),[Qa]),(0,s.useEffect)((function(){h().get(Ia+"/CommonMS/master/geActiveCustomerList").then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.fullName,value:e.id};t.push(a)})),Ma(t)})).catch((function(e){return console.log(e)})),Is(),h().get(Ia+"/CostMS/cost/getDepartments").then((function(e){var t=[],a=e.data;a.length>0&&a.forEach((function(e){var a={label:e.label,value:e.value};t.push(a)})),La(t),Wa(t)})).catch((function(e){return console.log(e)})),Ts()}),[]);var Ts=function(){h().get(Ia+"/ProjectMS/Engagement/getCustomerName").then((function(e){var t=e.data;t.sort((function(e,t){return e.name>t.name}));var a=t.map((function(e){return(0,y.jsx)("option",{value:e.resourcesId,children:e.name},e.userId)}));O(a)})).catch((function(e){}))},Rs={},As=(0,s.useState)(Rs),Es=(0,n.Z)(As,2),Fs=Es[0],Os=Es[1],Ys=(0,s.useState)({}),Ls=(0,n.Z)(Ys,2),Us=(Ls[0],Ls[1]),Bs=(0,s.useState)(""),Hs=(0,n.Z)(Bs,2),Ws=Hs[0],Vs=Hs[1],zs=(0,s.useState)(""),Js=(0,n.Z)(zs,2),Ks=Js[0],Gs=Js[1],Xs=(0,s.useState)(),Qs=(0,n.Z)(Xs,2),qs=(Qs[0],Qs[1],(0,s.useState)(new Map)),$s=(0,n.Z)(qs,2),en=$s[0],tn=$s[1],an=function(e){e.expanded;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(c.qL$,{className:"chevronIcon"})})},sn=Ve.map((function(e){return e.value.toString()})).join(","),nn=function(e){return(0,y.jsx)("div",{title:e.customer,className:"ellipsis",children:e.customer})};(0,s.useEffect)((function(){}),[Fs]);var ln=function(e){var t,a=null===(t=ee[0])||void 0===t?void 0:t.split(":");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(_.rU,{target:"_blank",to:a[0]+":"+e.id,"data-toggle":"tooltip",title:e.projectName,children:e[K[0]]})})},rn=function(e){return(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{style:{display:"flex",cursor:"pointer"},children:[(0,y.jsx)("div",{style:{minWidth:"20px"},children:"1018"==e.revStatus||"1017"==e.revStatus?(0,y.jsx)("div",{onClick:function(){ja(c.wEH),hs(e),Za(e.id),it(!0)},title:"Add Action Items",children:va}):null}),(0,y.jsx)("div",{onClick:function(){ma(c.ceS),Za(e.id),Dt(!0)},title:"Show History",children:ua})]})})},on=function(e,t){var a=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return a.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")};return(0,y.jsxs)("div",{children:[w?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsxs)("span",{className:"errMsg",children:[(0,y.jsx)(A.hXj,{}),"\xa0 Data Saved Successfully"]})}):"",Ue?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsxs)("span",{children:[" ",(0,y.jsx)(J.SZZ,{})," Please select valid values for highlighted fields"]})]}):"",Pe?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsxs)("span",{children:[" ",(0,y.jsx)(J.SZZ,{})," No modifications to save"]})]}):"",Te?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsxs)("span",{children:[" ",(0,y.jsx)(J.SZZ,{})," Please select Review Date"]})]}):"",(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Project Reviews"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsxs)("div",{className:"form-group customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{className:"helpBtn",children:(0,y.jsx)(k.Z,{pdfname:"ReviewProject.pdf",name:"Project Review Help"})}),(0,y.jsx)("div",{onClick:function(){kt(!It),Et(It?c.UdN:c.NR5)},children:(0,y.jsx)("span",{children:At})})]}),(0,y.jsxs)(d.V9,{visible:!It,children:[(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectname",children:"Project Name"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("input",{type:"text",className:"form-control",id:"prjStr",placeholder:!0,onChange:function(e){H(e.target.value)}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectmanager",children:"Project Manager"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"autoComplete-container ",children:(0,y.jsx)("span",{className:"auto",id:"auto",children:(0,y.jsx)("div",{className:"autoComplete-container",children:(0,y.jsx)(M.ReactSearchAutocomplete,{items:ga,type:"Text",name:"assignedto",id:"assignedto",manager:ga,onChange:function(e){!function(e){var t=e.target.value,a=e.target,s=(a.id,a.value);/^[0-9.]*$/.test(t)||(e.target.value=""),Ea((function(t){return(0,i.Z)((0,i.Z)({},t),{},(0,o.Z)({},e.target.id,s))}))}(e)},getManagerdata:Is,className:"AutoComplete",placeholder:"Type minimum 3 Characters",showIcon:!1,onSelect:function(e){Ea((function(t){return(0,i.Z)((0,i.Z)({},t),{},{userId:e.id})}))}})})})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"bu",children:"BU"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 multiselect",children:(0,y.jsx)(P.NU,{ArrowRenderer:an,id:"businessUnit",options:Ya,hasSelectAll:!0,valueRenderer:on,value:Ha,disabled:!1,onChange:function(e){Wa(e);var t=[];e.forEach((function(e){t.push(e.value)})),console.log(t),Ka(t.length>=13?-1:t.toString())}})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"customer",children:["Customer\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{name:"Customer",id:"Customer",onChange:function(e){var t=e.target,a=(t.id,t.name),s=t.value;"Customer"==a&&"select"===s&&xe(!0),rs(e.target.value)},children:[at.length+"selected",(0,y.jsx)("option",{value:"-1",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"-1",children:"BU Customer"}),(0,y.jsx)("option",{value:"select",children:"Select"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectstage",children:"Project Stage"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"projectstage",onChange:function(e){jt(e.target.value)},children:[(0,y.jsx)("option",{value:"null",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"1",selected:!0,children:"In Progress"}),(0,y.jsx)("option",{value:"2",children:"Completed"}),(0,y.jsx)("option",{value:"4",children:"On Hold"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"projectsource",children:"Project Source"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"projectsource",onChange:function(e){St(e.target.value)},children:[(0,y.jsx)("option",{value:"-1",children:"<<ALL>>"}),(0,y.jsx)("option",{value:"PPM",children:"PPM"}),(0,y.jsx)("option",{value:"Projector",children:"Projector"})]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"reviewstatus",children:"Review Status"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"reviewstatus",onChange:function(e){yt(e.target.value)},children:[(0,y.jsx)("option",{value:"-1",children:" <<ALL>>"}),(0,y.jsx)("option",{value:"1016",children:"To be Scheduled"}),(0,y.jsx)("option",{value:"1017",children:"Scheduled"}),(0,y.jsx)("option",{value:"1018",children:"Delayed"}),(0,y.jsx)("option",{value:"1019",children:"Completed"})]})})]})}),"1019"==wt?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"reviewtype",children:["From Date\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("div",{children:[(0,y.jsx)(ne(),{name:"fromdate",autoComplete:"off",id:"fromdate",dropdownMode:"select",selected:Yt,className:" ".concat(Ue?"error-block":""),dateFormat:"dd-MMM-yyyy",maxDate:new Date,onKeyDown:function(e){e.preventDefault()},onChange:function(e){Lt(e)},showMonthDropdown:!0,showYearDropdown:!0})," "]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"reviewtype",children:["To Date\xa0",(0,y.jsx)("span",{className:"error-text",children:"*"})]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("div",{children:[(0,y.jsx)(ne(),{name:"todate",id:"todate",dropdownMode:"select",autoComplete:"off",selected:Ht,className:" ".concat(Ue?"error-block":""),dateFormat:"dd-MMM-yyyy",minDate:Yt,maxDate:new Date,onKeyDown:function(e){e.preventDefault()},onChange:function(e){Wt(e)},showYearDropdown:!0,showMonthDropdown:!0})," "]})})]})})]}):"","1019"==wt?(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"reviewtype",children:[" ","Review Type"]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6 multiselect",children:(0,y.jsx)(P.NU,{value:Ve,options:de,placeholder:"Select state...",display:"chip",valueRenderer:on,ArrowRenderer:an,onChange:function(e){ze(e);var t=[];e.forEach((function(e){t.push(e.value)}))}})})]})}):(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"reviewtype",children:"Review Type"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{id:"reviewtype",onChange:function(e){as(e.target.value)},children:[(0,y.jsx)("option",{value:"1021",children:"Design Review"}),(0,y.jsx)("option",{value:"1022",children:"Code Review"}),(0,y.jsx)("option",{value:"1023",children:"Management Review"})]})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,y.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){"1019"===wt?""===Yt||""===Ht?Be(!0):(Be(!1),na(!1),setTimeout((function(){Qt(!0),setTimeout((function(){ks(),Qt(!1)}),1e3)}),1e3),Re(!1)):(Me(!1),ta(!1),setTimeout((function(){Qt(!0),setTimeout((function(){ks(),Qt(!1)}),1e3)}),1e3),Re(!1)),Ea(ka)},children:[(0,y.jsx)(c.U41,{})," Search"," "]})})]}),Xt?(0,y.jsx)(u.Z,{handleAbort:function(){Vt.current&&Vt.current.abort(),Qt(!1)}}):""]})]}),ea&&"1019"!==wt?(0,y.jsxs)("div",{className:"darkHeader",children:[(0,y.jsxs)(x.w,{className:"primeReactDataTable invoicingSearchTable",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:oa,paginator:!0,rows:10,header:Ms,filters:bs,onFilter:function(e){return ws(e.filters)},selection:_s,onSelectionChange:function(e){return Zs(null===e||void 0===e?void 0:e.value)},selectionMode:"single",dataKey:"id",showGridlines:!0,emptyMessage:"No Records To View.",headerColumnGroup:l,children:[(0,y.jsx)(g.s,{field:"product",body:function(e){var t=null;return t=e.scheduledDate<Q()(new Date).format("YYYY-MM-DD")&&("1018"==e.revStatus||"1017"==e.revStatus)?(0,y.jsx)("div",{className:"legendContainer align center",children:(0,y.jsx)("div",{className:"legend red",children:(0,y.jsx)("div",{className:"legendCircle",title:"Risk",children:(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"legendCircle",align:"center"}),(0,y.jsx)("div",{className:"legendTxt"})]})})})}):e.scheduledDate!=Q()(new Date).format("YYYY-MM-DD")||"1018"!=e.revStatus&&"1017"!=e.revStatus?(0,y.jsx)("div",{className:"legendContainer align center",children:(0,y.jsxs)("div",{className:"legend green",children:[(0,y.jsx)("div",{className:"legendCircle",title:"Risk"}),(0,y.jsx)("div",{className:"legendTxt"})]})}):(0,y.jsx)("div",{className:"legendContainer align center",children:(0,y.jsx)("div",{className:"legend amber",children:(0,y.jsxs)("div",{className:"legendCircle",title:"Risk",children:[(0,y.jsx)("div",{className:"legendCircle",align:"center"}),(0,y.jsx)("div",{className:"legendTxt"})]})})}),(0,y.jsx)("div",{className:"ellipsis",children:t})}}),(0,y.jsx)(g.s,{field:"projectName",body:ln}),(0,y.jsx)(g.s,{field:"prjStartDate",style:{textAlign:"center"}}),(0,y.jsx)(g.s,{field:"customer",body:nn}),(0,y.jsx)(g.s,{field:"prjStatus"}),(0,y.jsx)(g.s,{field:"lastReviewDate",style:{textAlign:"center"}}),(0,y.jsx)(g.s,{field:"reviewType"}),(0,y.jsx)(g.s,{field:"revStatusDtl",body:function(e){return pe(e.revStatus),wa(e.scheduledDate),mt(e.projectName),ue(e.reviewId),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("select",{id:"review_status_id",onChange:function(t){var a;!function(e,t,a){be(e),Os((function(s){return(0,i.Z)((0,i.Z)({},s),{},(0,o.Z)({},t,{revStatus:e,reviewId:t,projectId:a}))}));var s=new Map(en),n=(0,i.Z)((0,i.Z)({},_s),{},{revStatus:e});s.set(n.id,n),tn(s)}(null===t||void 0===t||null===(a=t.target)||void 0===a?void 0:a.value,null===e||void 0===e?void 0:e.reviewId,null===e||void 0===e?void 0:e.id)},defaultValue:null===e||void 0===e?void 0:e.revStatus,children:[(0,y.jsx)("option",{value:"1016",children:"To be Scheduled"}),(0,y.jsx)("option",{value:"1017",children:"Scheduled"}),(0,y.jsx)("option",{value:"1018",children:"Delayed"}),(0,y.jsx)("option",{value:"1019",children:"Completed"})]})})}}),(0,y.jsx)(g.s,{field:"scheduledDate",body:function(e){return(0,y.jsx)("div",{className:"datepicker",children:(0,y.jsx)(ce,{setValidateproject:Re,selectedvalidation:Ws,validateproject:Te,setselecteddatevalidation:Gs,selectedCustomer:_s,changedRows:en,setChangedRows:tn,reviewdatevalid:Fe,setFormData:$e,formData:qe,postData:Fs,setpostData:Os,rowData:e,id:"scheduledDate",className:e.className,setDateData:Us,dateFormat:"dd-MMM-yyyy",placeholderText:"Select Month",showYearDropdown:!0,showMonthDropdown:!0})})}}),(0,y.jsx)(g.s,{body:rn,style:{textAlign:"center",minWidth:"30px"}})]}),(0,y.jsx)("div",{className:"card"}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 my-2 btn-container center",children:(0,y.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e=[];if(""===Ne&&""==Ks||void 0==Ks||null==Ks)Me(!0),setTimeout((function(){Me(!1)}),3e3),window.scrollTo({top:0,behavior:"smooth"});else{var t;Me(!1),null===Object||void 0===Object||null===(t=Object.keys(Fs))||void 0===t||t.forEach((function(t){if(void 0!==Fs[t].projectId){var a,s,n,l,r,o,i=oa.find((function(e){return e.reviewId===Fs[t].reviewId}));Vs(Fs[t].date);var c={};c.id=+t,c.projectId=null===(a=Fs[t])||void 0===a?void 0:a.projectId,c.scheduledDate=void 0==(null===(s=Fs[t])||void 0===s?void 0:s.selectedDate)?null===i||void 0===i?void 0:i.scheduledDate:Q()(null===(n=Fs[t])||void 0===n?void 0:n.selectedDate).format("YYYY-MM-DD"),c.revType=+ts,c.statusId=null==(null===(l=Fs[t])||void 0===l?void 0:l.revStatus)||void 0==(null===(r=Fs[t])||void 0===r?void 0:r.revStatus)?null===i||void 0===i?void 0:i.revStatus:+(null===(o=Fs[t])||void 0===o?void 0:o.revStatus),c.loggedId=+Y,e.push(c)}}));var a=!0;en.forEach((function(e,t){var s=e.scheduledDate;Oe(e.scheduledDate),null!==s&&""!==s&&void 0!==s||(a=!1)})),a?h()({method:"post",url:Ia+"/ProjectMS/project/updateReviewProjects",data:e}).then((function(e){e.data;be(""),Gs(""),Re(!1),C(!0),ta(!1),Qt(!0),window.scrollTo({top:0,behavior:"smooth"}),ks(),Os(Rs),setTimeout((function(){C(!1),ta(!0),Qt(!1)}),2e3)})).catch((function(e){console.log("Response Data:",e)})):(Re(!0),window.scrollTo({top:0,behavior:"smooth"}))}},children:[(0,y.jsx)(c.TvB,{})," Save"," "]})})]}):"","1019"==wt?(0,y.jsx)("div",{className:"darkHeader",children:(0,y.jsxs)(x.w,{className:"primeReactDataTable invoicingSearchTable",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:oa,paginator:!0,rows:10,header:Ms,filters:bs,onFilter:function(e){return ws(e.filters)},selection:_s,onSelectionChange:function(e){return Zs(null===e||void 0===e?void 0:e.value)},selectionMode:"single",dataKey:"id",showGridlines:!0,emptyMessage:"No Records To View.",headerColumnGroup:r,children:[(0,y.jsx)(g.s,{field:"projectName",body:ln}),(0,y.jsx)(g.s,{field:"prjStartDate",style:{textAlign:"center"}}),(0,y.jsx)(g.s,{field:"customer",body:nn}),(0,y.jsx)(g.s,{field:"prjStatus"}),(0,y.jsx)(g.s,{field:"reviewType"}),(0,y.jsx)(g.s,{header:"Reviewer",field:"scheduledDate",body:function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},title:e.scheduledDate,className:"ellipsis",children:Q()(e.scheduledDate).format("DD-MMM-YYYY")})}}),(0,y.jsx)(g.s,{field:"lastReviewDate",body:function(e){return(0,y.jsx)("div",{style:{textAlign:"center"},title:e.lastReviewDate,className:"ellipsis",children:Q()(e.lastReviewDate).format("DD-MMM-YYYY")})}}),(0,y.jsx)(g.s,{header:"Reviewer",field:"reviewer"}),(0,y.jsx)(g.s,{header:"Comments",field:"comments"}),(0,y.jsx)(g.s,{body:rn,style:{textAlign:"center",minWidth:"30px"}})]})}):"",Zt?(0,y.jsx)(ae,{view:Zt,setView:Dt,setProjectId:Za,projectId:_a,projectName:ut,historyId:re,selectedCustomer:_s}):"",ot?(0,y.jsx)(oe,{totaldata:ms,revStatusvalue:Ge,reviewTypevalue:cs,reviewType:ts,open:ot,setOpen:it,setProjectId:Za,projectId:_a,projectName:ut,historyId:re,selectedCustomer:_s,revDate:gs,setLoader:Qt}):"",(0,y.jsx)(z,{visible:I,setVisible:T,newMemberDropdown:F})," ",(0,y.jsx)(ie.Z,{variance:1,visible:fe,setVisible:xe,setSelectedItems:st,selectedItems:at})]})};var me=function(){var e=(0,s.useState)("Open"),t=(0,n.Z)(e,2),a=t[0],o=t[1],i=(0,s.useState)("Project"),c=(0,n.Z)(i,2),d=c[0],u=(c[1],p.N.baseUrl),m=localStorage.getItem("resId"),v=(0,s.useState)([]),j=(0,n.Z)(v,2),f=(j[0],j[1],(0,s.useState)([])),x=(0,n.Z)(f,2),g=x[0],S=x[1];(0,s.useEffect)((function(){h()({method:"GET",url:u+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(m,"&Cont=project")}).then((function(e){var t=e.data;console.log(t),S(t),console.log(t)}))}),[]);var N=g,b=(0,s.useState)(N),w=(0,n.Z)(b,2),C=(w[0],w[1],(0,s.useState)(!1)),_=(0,n.Z)(C,2);return _[0],_[1],console.log(g),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:(0,y.jsx)("div",{className:"tabs",children:g.map((function(e){return(0,y.jsx)("button",{className:a===e.display_name.toString()?"buttonDisplayClick":"buttonDisplay",onClick:function(){o(e.display_name.toString()),console.log(e.display_name)},children:e.display_name},e.id)}))})}),"Open"===a&&(0,y.jsx)(l.Z,{buttonValue:d}),"Create"===a&&(0,y.jsx)(r.default,{buttonValue:d}),"Search"===a&&(0,y.jsx)(R,{}),"Reviews"===a&&(0,y.jsx)(ue,{})]})};var he=function(){return(0,y.jsx)("div",{children:(0,y.jsxs)("div",{className:"col-md-12",children:[" ",(0,y.jsx)(me,{})]})})}},38596:function(e,t,a){var s=a(87462),n=a(5822),l=a(40012);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(e,(0,s.default)({defaultTheme:l.Z},t))}}}]);
//# sourceMappingURL=9347.da0d35a6.chunk.js.map