"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4741,5100,1634],{7641:function(e,t,s){s.r(t),s.d(t,{default:function(){return le}});var a=s(1413),n=s(29439),r=s(74165),l=s(15861),i=s(4942),o=s(59513),c=s.n(o),d=(s(68639),s(72791)),u=s(74569),p=s.n(u),h=s(36167),m=s(63521),g=s(3900),x=s(34831),v=s(56355),f=s(78983),b=s(32125),j=s(83854),y=s(72426),S=s.n(y),N=s(78820),R=s(72920),I=s(38262),C=s(7692),k=s(16030),w=s(80184);function Z(e){var t=e.setScoreCardData,s=e.setqbrList,o=(e.scoreCradPermission,e.setrisk),u=e.setcsat,y=(e.setHistoricalTrendData,e.setShowHistoricalTrend),Z=e.setcardSelector,A=e.scoreCardDataPayload,_=e.setscoreCardDataPayload,T=(0,d.useState)("<< All SE >>"),P=(0,n.Z)(T,2),D=P[0],L=P[1],q=(0,d.useState)(!0),F=(0,n.Z)(q,2),E=(F[0],F[1],(0,d.useState)([])),M=(0,n.Z)(E,2),U=M[0],B=M[1],O=(0,d.useState)(-2),z=(0,n.Z)(O,2),H=z[0],$=z[1],W=new Date;console.log(W,"no===================106");var Q=W.getFullYear(),K=W.getMonth(),G=new Date(Q+1,K+3);console.log(G,"-----date");S()(G).format("DD-MM-yyyy");var Y=(0,d.useState)((function(){var e=new Date,t=e.getFullYear()+1,s=e.getMonth()+1-7;return new Date(t,s,1)})),V=(0,n.Z)(Y,2),J=V[0],X=V[1],ee=S()(new Date).add(1,"years").subtract(6,"months").format("yyyy-MM-DD");console.log(new Date,ee,"--currentQuarter");var te=(0,d.useState)(-2),se=(0,n.Z)(te,2),ae=se[0],ne=se[1],re=(0,d.useState)([1]),le=(0,n.Z)(re,2),ie=le[0],oe=le[1],ce=(0,d.useState)(!1),de=(0,n.Z)(ce,2),ue=de[0],pe=de[1],he=(0,d.useState)("se"),me=(0,n.Z)(he,2),ge=me[0],xe=me[1],ve=(0,d.useState)([]),fe=(0,n.Z)(ve,2),be=fe[0],je=fe[1],ye=[{value:8,label:"CSAT"},{value:3,label:"Customer Category & Top Projects"},{value:7,label:"Open Service Pipeline"},{value:6,label:"Progress of Services/Software"},{value:10,label:"QBR"},{value:5,label:"Realised, Planned By Location & Resoure Type"},{value:4,label:"Realised Revenue By Contract Terms"},{value:9,label:"Risks"},{value:1,label:"Summary"},{value:2,label:"Target, Realised, Planned, Calls and Variance By Location & Practice"}],Se=(0,d.useState)(ye),Ne=(0,n.Z)(Se,2),Re=Ne[0],Ie=Ne[1],Ce=(0,d.useState)(!1),ke=(0,n.Z)(Ce,2),we=ke[0],Ze=ke[1],Ae=(0,d.useState)(!1),_e=(0,n.Z)(Ae,2),Te=(_e[0],_e[1],(0,d.useState)([])),Pe=(0,n.Z)(Te,2),De=Pe[0],Le=(Pe[1],(0,d.useState)([])),qe=(0,n.Z)(Le,2),Fe=qe[0],Ee=qe[1],Me=(0,d.useState)(!1),Ue=(0,n.Z)(Me,2),Be=Ue[0],Oe=Ue[1],ze=(0,d.useState)([]),He=(0,n.Z)(ze,2),$e=He[0],We=He[1],Qe=(0,d.useState)([]),Ke=(0,n.Z)(Qe,2),Ge=Ke[0],Ye=Ke[1],Ve=(0,d.useState)([]),Je=(0,n.Z)(Ve,2),Xe=Je[0],et=Je[1],tt=(0,d.useState)([]),st=(0,n.Z)(tt,2),at=st[0],nt=st[1],rt=(0,d.useState)([]),lt=(0,n.Z)(rt,2),it=(lt[0],lt[1],(0,d.useState)([])),ot=(0,n.Z)(it,2),ct=(ot[0],ot[1],(0,d.useState)([])),dt=(0,n.Z)(ct,2),ut=dt[0],pt=dt[1],ht=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal")),mt=null!==localStorage.getItem("isIndividualCheckedLocal")&&JSON.parse(localStorage.getItem("isIndividualCheckedLocal"));var gt=ht.map((function(e){if(Array.isArray(e)){var t=(0,n.Z)(e,1)[0];if(t&&t.id&&t.text&&"fte1"===t.type&&"id"===t.parent)return{salesPersonName:t.text,type:t.type,id:parseInt(t.id),status:JSON.parse(t.li_attr).sestatus||"empActive"}}return e})),xt=gt.filter((function(e,t){return t===gt.findIndex((function(t){return e.id===t.id}))})).filter((function(e){return!Array.isArray(e)||0===e.length}));console.log(xt),console.log(gt);var vt=gt.map((function(e){return e.id})),ft=vt.filter((function(e){return"number"===typeof e}));console.log(ft,"love");var bt=ft.map((function(e){return Fe})).flat();console.log(bt,"mmmm");var jt=xt.map((function(e){return e.salesPersonName&&e.salesPersonName,"".concat(e.salesPersonName)})),yt=(jt.join(","),xt.map((function(e){return"Kirsten Craft"===e.salesPersonName?"".concat(e.salesPersonName," & team"):e.salesPersonName}))),St=(yt.join(","),xt.map((function(e){return e.id})));St.join(",");console.log(gt,"zzzzzzzzz");var Nt=(0,d.useState)(""),Rt=(0,n.Z)(Nt,2),It=Rt[0],Ct=Rt[1],kt=(0,d.useState)([]),wt=(0,n.Z)(kt,2),Zt=wt[0],At=wt[1],_t=(0,d.useState)(!1),Tt=(0,n.Z)(_t,2),Pt=Tt[0],Dt=Tt[1],Lt=(0,d.useState)(v.UdN),qt=(0,n.Z)(Lt,2),Ft=qt[0],Et=qt[1],Mt=(0,d.useRef)([]),Ut=(0,d.useRef)(null),Bt=(0,d.useState)(!1),Ot=(0,n.Z)(Bt,2),zt=Ot[0],Ht=Ot[1],$t=(0,d.useState)([]),Wt=(0,n.Z)($t,2),Qt=Wt[0],Kt=Wt[1],Gt=(0,d.useState)([]),Yt=(0,n.Z)(Gt,2),Vt=Yt[0],Jt=Yt[1],Xt=(0,d.useState)([]),es=(0,n.Z)(Xt,2),ts=es[0],ss=es[1],as=(0,d.useState)(""),ns=(0,n.Z)(as,2),rs=ns[0],ls=ns[1],is=(0,d.useState)("initial"),os=(0,n.Z)(is,2),cs=os[0],ds=os[1];console.log(J,"start");var us=localStorage.getItem("resId"),ps=(0,d.useState)([]),hs=(0,n.Z)(ps,2),ms=hs[0],gs=hs[1];(0,d.useEffect)((function(){xs()}),[]);var xs=function(){p()({method:"GET",url:ys+"/CommonMS/master/getMenus?loggedUserId=".concat(us)}).then((function(e){var t=e.data.find((function(e){return"Sales"===e.display_name})).subMenus.find((function(e){return"Scorecard"===e.display_name}));console.log(t.accessLevel),At(t.access_level);var s=t?t.userRoles.includes("690")&&t.userRoles.includes("641")?600:t.userRoles.includes("690")?690:t.userRoles.includes("641")?641:t.userRoles.includes("932")?932:t.userRoles.includes("46")?46:t.userRoles.includes("126")?126:t.userRoles.includes("919")?919:t.userRoles.includes("686")?686:t.userRoles.includes("909")?909:t.userRoles.includes("307")&&307:null;B(s),690==s||641==s||909==s||600==s?p()({method:"get",url:ys+"/dashboardsms/allocationDashboard/getCustomers?loggedUserId=".concat(us)}).then((function(e){var t=e.data;pt(t)})):p()({method:"get",url:ys+"/customersms/Customers/getCustomers"}).then((function(e){var t=e.data;pt(t)})),p().get(ys+"/SalesMS/MasterController/getCslDropDownData?userId=".concat(us)).then((function(e){var t=e.data,s=[],a=new Set;t.forEach((function(e){if(!a.has(e.PersonName)){var t={label:e.PersonName,value:e.id};s.push(t),a.add(e.PersonName)}})),We(s),Ye(s)})).catch((function(e){console.log(e)})),p().get(ys+"/CommonMS/master/getDPDropDownData?userId=".concat(us)).then((function(e){var t=e.data,s=[],a=new Set;t.forEach((function(e){if(!a.has(e.PersonName)){var t={label:e.PersonName,value:e.id};s.push(t),a.add(e.PersonName)}})),et(s),nt(s)})).catch((function(e){console.log(e)})),e.data.map((function(e){return e.subMenus&&(e.subMenus=e.subMenus.filter((function(e){return"Project Timesheet (Deprecated)"!==e.display_name&&"Invoice Details"!==e.display_name&&"Accounting"!==e.display_name&&"Upload"!==e.display_name&&"Practice Calls [Deprecated]"!==e.display_name}))),e})).forEach((function(e){"Sales"===e.display_name&&gs([e])}))}))},vs=function(e){var t=e.id,s=e.value;switch(console.log(t+" "+s),console.log(ge,"viewBy----"),console.log(ts,ts.length,ts.length+parseInt(1),"selectesFOwnerDivison.length",Qt.length,"sFOwnerDivisionsDropdown.length"),_((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},t,s))})),"executives"===t&&"1"===s&&pe(!0),s){case"ne":_((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},"from","2024-01-01"))}));break;case"tr":_((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},"from","2023-07-01"))}));break;case"se":_((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,i.Z)(t,"cslIds",-1),(0,i.Z)(t,"customerId",-1),(0,i.Z)(t,"executives",s),t))}));break;case"csl":_((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,i.Z)(t,"dpIds",-1),(0,i.Z)(t,"customerId",-1),(0,i.Z)(t,"executives",-1),t))}));break;case"dp":_((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,i.Z)(t,"executives",-1),(0,i.Z)(t,"cslIds",-1),(0,i.Z)(t,"customerId",-1),t))}));break;case"cust":_((function(e){var t;return(0,a.Z)((0,a.Z)({},e),{},(t={},(0,i.Z)(t,"cslIds",-1),(0,i.Z)(t,"dpIds",-1),t))}));break;case"Divisions":console.log(ts.length,"selectesFOwnerDivison.length",Qt.length,"sFOwnerDivisionsDropdown.length"),_((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},"viewby","se"))}))}};console.log(rs,"division state");var fs=(0,d.useState)([]),bs=(0,n.Z)(fs,2),js=(bs[0],bs[1]);(0,d.useEffect)((function(){p().get(ys+"/ProjectMS/project/getHirarchyAccesss?loggedUserId=".concat(us)).then((function(e){var t=e.data;console.log(t),js(t)})).catch((function(e){console.log(e)}))}),[]);var ys=x.N.baseUrl;(0,d.useEffect)((function(){}),[De]);var Ss=function(e){e.expanded;return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(v.qL$,{className:"chevronIcon"})})},Ns=function(e,t){var s=e.map((function(e){return e.value})),a=t.map((function(e){return e.value}));return s.length===a.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},Rs=(0,k.v9)((function(e){return e.selectedSEState.directSETreeData})),Is=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var a,n,l,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(A,"--scoreCardDataPayload"),console.log(A.measures,"---measures"),t({}),u([]),o([]),s([]),Ut.current=new AbortController,setTimeout((function(){Ht(!0)}),2e3),a=Mt.current.filter((function(e){return null!=e})),Mt.current=a,n=(0,b.Z)(Mt),console.log(n),1==n&&(Ht(!1),Ze(!0),setTimeout((function(){Ze(!1)}),2e3)),!n){e.next=15;break}return e.abrupt("return");case 15:return l=setTimeout((function(){Ht(!0)}),2e3),i=null,(i=A).executives="1"==i.executives?Rs:"se"!=i.viewby?-1:H,console.log("in line 304---"),A.executives=-1!=A.Divisions||-2!=A.executives||"Divisions"!=cs&&"initial"!=cs?-1==A.Divisions&&-2!=A.executives&&"Divisions"!=cs?A.executives:Vt:-2,console.log(A,cs,Vt,"after"),e.next=24,p()({method:"post",url:ys+"/SalesMS/scoreCard/scoreCardData",data:i,signal:Ut.current.signal}).then((function(e){var s=e.data;Ct(e.data.reportRunId),t(s),"tr"===A.type?(y(!0),t(s)):y(!1),clearTimeout(l),Ht(!1),!n&&Dt(!Pt),Et(Pt?v.UdN:v.NR5),Oe(!0)})).catch((function(e){console.log(e)}));case 24:p().get(ys+"/SalesMS/scoreCard/getScoreCardCSATProjects").then((function(e){var t=e.data;u(t)})).catch((function(e){console.log(e)})),p().get(ys+"/SalesMS/scoreCard/getScoreCardTProjectRisks").then((function(e){var t=e.data;o(t)})).catch((function(e){console.log(e)})),p().get(ys+"/SalesMS/scoreCard/getScoreCardProjectsQBRList").then((function(e){var t=e.data;s(t)})).catch((function(e){console.log(e)}));case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(Zt);console.log(Zt),(0,d.useEffect)((function(){p().get(ys+"/SalesMS/MasterController/salesExecutiveData").then((function(e){var t=e.data.filter((function(e){return 1===e.isActive})).map((function(e){return(0,w.jsx)("option",{value:e.val,children:e.lkupName},e.id)}));je(t)})).catch((function(e){console.log(e)})),p().get(ys+"/SalesMS/MasterController/SFOwnerDivisions").then((function(e){var t=e.data.map((function(e){return{value:e.id,label:e.owner_Division}}));Kt(t),ss(t),_((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},"Divisions",-1))}))})).catch((function(e){console.log(e)}))}),[]),(0,d.useEffect)((function(){p()({method:"get",url:ys+"/SalesMS/scoreCard/getExecutivesForOwnerDivision?divid=".concat(rs)}).then((function(e){var t=e.data;console.log(t,"response"),Jt(t)})).catch((function(e){console.log(e)}))}),[rs]);return(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"col-md-12",children:(0,w.jsxs)("div",{className:"pageTitle",children:[(0,w.jsx)("div",{className:"childOne"}),(0,w.jsx)("div",{className:"childTwo",children:(0,w.jsx)("h2",{children:"Scorecard"})}),(0,w.jsx)("div",{className:"childThree"})]})}),we?(0,w.jsxs)("div",{className:"statusMsg error",children:[" ",(0,w.jsx)(N.CSE,{})," Please select valid values for highlighted fields"]}):"",(0,w.jsx)(I.Z,{routes:ms,currentScreenName:["Scorecard"]}),(0,w.jsxs)("div",{className:"group mb-3  customCard",children:[(0,w.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,w.jsx)("h2",{children:"Search Filters"}),(0,w.jsxs)("div",{className:"helpBtn",children:[(0,w.jsx)(R.Z,{pdfname:"Scorecard.pdf",name:"Scorecard Help"}),Be&&(0,w.jsxs)("h2",{onClick:function(){Ht(!1),p().post(ys+"/SalesMS/salesforce/refreshSalesForceData",{reportRunId:""+It,for:""}).then((function(e){var t=e.data.data;console.log(t),Dt(!Pt),Et(Pt?v.UdN:v.NR5),Is(),Ht(!1)})).catch((function(e){console.log(e)}))},style:{cursor:"pointer"},children:["Sf ",(0,w.jsx)(C.t5J,{})]})]}),(0,w.jsx)("div",{onClick:function(){Dt(!Pt),Et(Pt?v.UdN:v.NR5)},children:(0,w.jsx)("span",{children:Ft})})]}),(0,w.jsx)(f.V9,{visible:!Pt,children:(0,w.jsxs)("div",{className:"group-content row",children:[(0,w.jsx)("div",{className:"col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsx)("label",{className:"col-5",children:"Type "}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("span",{className:"col-6",children:(0,w.jsxs)("select",{id:"type",className:"col-md-12 col-sm-12 col-xs-12  onLoadEmpty",onChange:function(e){vs(e.target)},children:[(0,w.jsx)("option",{value:"cu",children:"Current Quarter"}),(0,w.jsx)("option",{value:"tr",children:"Historical Trend"}),(0,w.jsx)("option",{value:"ne",children:"Next Quarter"})]})})]})}),(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsx)("label",{className:"col-5",children:"View By "}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("span",{className:"col-6",children:(0,w.jsx)("div",{id:"viewby",children:(0,w.jsxs)("select",{id:"viewby",className:"col-md-12 col-sm-12 col-xs-12  onLoadEmpty",onChange:function(e){vs(e.target),xe(e.target.value),"Divisions"==e.target.value&&ds("Divisions")},children:[(0,w.jsx)("option",{value:"se",children:"Executive"}),641==U||126==U||919==U||600==U?(0,w.jsx)("option",{value:"csl",children:"CSL"}):"",690==U||126==U||919==U||600==U?(0,w.jsx)("option",{value:"dp",children:"DP"}):"",(0,w.jsx)("option",{value:"cust",children:"Customer"}),(0,w.jsx)("option",{value:"Divisions",children:"Owner Division"})]})})})]})}),"se"===ge&&(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["Sales Executive"," ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("span",{className:"col-6",children:(0,w.jsx)("div",{id:"executives",children:1e3==Zt||500==Zt?(0,w.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12  text onLoadEmpty",value:ae,onChange:function(e){vs(e.target),L(e.target.options[e.target.selectedIndex].text),ne(e.target.value),$(e.target.value),console.log(e.target.options[e.target.selectedIndex].text,"se value")},ref:function(e){Mt.current[0]=e},children:[(0,w.jsx)("option",{value:"",children:"<< Please select>> "}),be]}):(0,w.jsxs)("select",{id:"executives",className:"col-md-12 col-sm-12 col-xs-12  text onLoadEmpty",value:ae,onChange:function(e){vs(e.target),L(e.target.options[e.target.selectedIndex].text),ne(e.target.value),$(e.target.value),console.log(e.target.options[e.target.selectedIndex].text,"se value")},ref:function(e){Mt.current[0]=e},children:[(0,w.jsx)("option",{value:"",children:"<< Please select>> "}),(0,w.jsx)("option",{value:"1",children:"Select SE"})]})})})]})}),"csl"===ge&&(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["CSL",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("div",{className:"col-6 multiselect",ref:function(e){Mt.current[1]=e},id:"CSL",children:(0,w.jsx)(h.NU,{ArrowRenderer:Ss,options:$e,hasSelectAll:!0,isLoading:!1,valueRenderer:Ns,shouldToggleOnHover:!1,disableSearch:!1,value:Ge,disabled:!1,onChange:function(e){Ye(e);var t=e.map((function(e){return e.value}));vs({id:"cslIds",value:t.toString()})}})})]})}),"dp"===ge&&(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["DP ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("div",{className:"col-6 multiselect",ref:function(e){Mt.current[2]=e},children:(0,w.jsx)(h.NU,{ArrowRenderer:Ss,valueRenderer:Ns,options:Xe,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:at,disabled:!1,onChange:function(e){nt(e);var t=e.map((function(e){return e.value}));vs({id:"dpIds",value:t.toString()})}})})]})}),"cust"===ge&&(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["Customer"," ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})," "]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("div",{className:"col-6 autocomplete",ref:function(e){Mt.current[3]=e},id:"Customer",children:(0,w.jsxs)("div",{className:"autoComplete-container",children:[(0,w.jsx)(m.ReactSearchAutocomplete,{items:ut,type:"Text",name:"customerId",id:"customerId",className:"AutoComplete",onSelect:function(e){_((function(t){return(0,a.Z)((0,a.Z)({},t),{},{customerId:e.id})}))},showIcon:!1,onClear:function(){_((function(e){return(0,a.Z)((0,a.Z)({},e),{},{customerId:"-1"})}))},placeholder:"Type minimum 3 characters"}),(0,w.jsxs)("span",{children:[" ",De.name]})]})})]})}),"Divisions"===ge&&(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["Owner Division"," ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("div",{className:"col-6 multiselect",ref:function(e){Mt.current[4]=e},children:(0,w.jsx)(h.NU,{ArrowRenderer:Ss,valueRenderer:Ns,options:Qt,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:ts,disabled:!1,onChange:function(e){ss(e);var t=e.length==Qt.length?-1:e.map((function(e){return e.value}));ls(t.toString()),vs({id:"Divisions",value:t.toString()})}})})]})}),"tr"!==A.type?(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["Measures"," ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})," "]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("div",{className:"col-6 multiselect",ref:function(e){Mt.current[5]=e},id:"Measures",children:(0,w.jsx)(h.NU,{ArrowRenderer:Ss,valueRenderer:Ns,options:ye,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Re,disabled:!1,onChange:function(e){Ie(e);var t=e.map((function(e){return e.value}));vs({id:"measures",value:t.toString()}),Z(t.toString())}})})]})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsxs)("label",{className:"col-5",children:["From Quarter"," ",(0,w.jsx)("span",{className:"required error-text ml-1",children:" *"})," "]}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("span",{className:"col-6 datepicker",ref:function(e){Mt.current[5]=e},children:(0,w.jsx)(c(),{selected:J,maxDate:S()(ee).endOf("quarter").toDate(),onChange:function(e){console.log(S()(ee).endOf("quarter").toDate(),S()(e).format("yyyy-MM-DD"),"quarter selected");parseInt(S()(e).format("YYYY-MM-DD")),parseInt(3);var t=S()(e).format("MM"),s=null;1==parseInt(t)||4==parseInt(t)||7==parseInt(t)?s=S()(e).subtract(1,"years").add(3,"months").format("yyyy-MM-DD"):10==parseInt(t)&&(s=S()(e).subtract(9,"months").format("yyyy-MM-DD")),console.log("in line 777"),console.log(s),X(S()(e)._d),vs({id:"from",value:S()(s).format("yyyy-MM-DD")});var a=S()(e).format("yyyy"),n=(new Date).getFullYear();console.log(a,n,parseInt(S()(s).format("MM")),"current year"),a==n&&1==parseInt(S()(s).format("MM"))?(oe([1,2,3]),console.log([1,2,3])):a==n+parseInt(1)&&4==parseInt(S()(s).format("MM"))?(oe([1,2]),console.log([1,2])):a==n&&10==parseInt(S()(s).format("MM"))||a==n&&7==parseInt(S()(s).format("MM"))?(oe([1,2,3,4]),console.log([1,2,3,4])):a==n+parseInt(1)&&7==parseInt(S()(s).format("MM"))?oe([1]):(oe([1,2,3,4]),console.log([1,2,3,4]))},dateFormat:"yyyy, QQQ",showQuarterYearPicker:!0})})]})}),(0,w.jsx)("div",{className:" col-md-3 mb-2",children:(0,w.jsxs)("div",{className:"form-group row",children:[(0,w.jsx)("label",{className:"col-5",children:"Duration "}),(0,w.jsx)("span",{className:"col-1 p-0",children:":"}),(0,w.jsx)("span",{className:"col-6",children:(0,w.jsx)("div",{id:"From Quarter",children:(0,w.jsx)("select",{id:"duration",name:"duration",className:"col-md-12 col-sm-12 col-xs-12 ",defaultValue:"1",onChange:function(e){vs(e.target)},children:ie.map((function(e){return(0,w.jsx)("option",{value:e,children:e})}))})})})]})})]}),"se"===ge&&(0,w.jsx)("div",{className:"col-md-12 no-padding section",children:(0,w.jsx)("div",{className:"seFooter",style:{borderTop:"1px solid #CCC"},children:(0,w.jsxs)("span",{className:"selectedSE",children:[(0,w.jsx)("b",{children:"Selected SE : "}),(0,w.jsx)("span",{className:"dynText",children:"<< Select SE >>"===D?ht.map((function(e,t){return(0,w.jsxs)("span",{children:[mt?e.salesPersonName?e.salesPersonName:e.text:e.salesPersonName?e.salesPersonName:e.text+" & Team",t===ht.length-1?"":", "]},e.id)})):D})]})})}),(0,w.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center",children:(0,w.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:Is,children:[(0,w.jsx)(v.U41,{})," Search"," "]})}),(0,w.jsx)(g.default,{visible:ue,setVisible:pe,setGrpId:Ee})]})}),zt?(0,w.jsx)(j.Z,{handleAbort:function(){Ut.current&&Ut.current.abort(),Ht(!1)}}):""]})]})}var A=s(29718),_=s.n(A),T=s(12003),P=s.n(T),D=s(4189),L=s.n(D);function q(e){var t=e.targets,s=[],a=[],r=[],l=[],i=[],o=[],c=(0,d.useState)([]),u=(0,n.Z)(c,2),p=u[0],h=u[1],m=(0,d.useState)({}),g=(0,n.Z)(m,2),x=g[0],f=g[1];return(0,d.useEffect)((function(){var e=Object.keys(t).length>0&&t.targets.map((function(e){var t=[];return["category","target","realised","planned","upside","calls","variance"].forEach((function(n){var c;if(e.id>-1)switch(n){case"category":s.push(e[n]);break;case"target":a.push(parseFloat(e[n]));break;case"realised":r.push(parseFloat(e[n]));break;case"planned":o.push(parseFloat(Math.abs(e[n])));break;case"upside":i.push(parseFloat(Math.abs(e[n])));break;case"variance":e[n]>0?l.push(parseFloat(e[n])):l.push(0)}t.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center"},children:e[n]},n):"category"!=n?(0,w.jsx)("td",{style:{textAlign:"right"},"data-toggle":"tooltip",title:parseInt(e[n]).toLocaleString("en-US"),children:null==e[n]?"$":parseInt(e[n])>=0?"$"+parseInt(e[n]).toLocaleString("en-US"):"-$"+parseInt(null===(c=e[n])||void 0===c?void 0:c.split("-")[1]).toLocaleString("en-US")}):(0,w.jsx)("td",{children:null==e[n]?"$":"category"===n?e[n]:"$"+parseInt(e[n]).toLocaleString("en-US")},n))})),(0,w.jsx)("tr",{children:t},e.id)})),n={chart:{type:"column",width:600,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{text:"Target, Realised/Closed, Planned/Upside, Calls and Variance",style:{fontSize:"15px"}},xAxis:{categories:s,labels:{style:{fontSize:"12px"}},gridLineWidth:.2},yAxis:[{allowDecimals:!1,min:0,title:{text:"Target/Realised/Planned/Upside/Variance ($)"},gridLineWidth:.2}],tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y.toLocaleString("en-US")+"<br/>"}},plotOptions:{column:{stacking:"normal"}},credits:{enabled:!1},legend:{itemStyle:{fontSize:"12px"}},series:[{name:"Target",color:"rgba(34, 167, 240, 1)",data:a,stack:"first",legendIndex:1},{name:"Variance",color:"#ff6666",data:l,stack:"second",legendIndex:5},{name:"Upside",color:"#b3b3b3",data:i,stack:"second",legendIndex:4},{name:"Planned",color:"#ffc966",data:o,stack:"second",legendIndex:3},{name:"Realised",color:"#66ff66",data:r,stack:"second",legendIndex:2}],responsive:{rules:[{condition:{maxWidth:2e3}}]}};h(e),f(n),console.log(t)}),[t]),(0,w.jsxs)("div",{className:"col-md-12 row",children:[(0,w.jsx)("div",{className:"col-md-6 mt-2 ",children:(0,w.jsx)(P(),{highcharts:_(),options:x})}),(0,w.jsxs)("div",{className:"col-md-6 pt-5 mt-5",children:[(0,w.jsxs)("div",{style:{backgroundColor:"#ffffff",padding:"2px"},className:"alert alert-warning",children:[(0,w.jsxs)("span",{className:"ml-2",children:[" ",(0,w.jsx)(v.DAO,{size:"0.8em"})]}),(0,w.jsxs)("span",{style:{fontSize:"13px"},children:[" ","When Realised Revenue Considered, Upsided & Planned Revenue are not considered"]})]}),(0,w.jsx)("div",{className:"darkHeader",children:(0,w.jsx)("table",{className:"table table-bordered  targetTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:p})})})]})]})}function F(e){var t=e.softdata,s=(0,d.useState)([]),a=(0,n.Z)(s,2),r=a[0],l=a[1];return(0,d.useEffect)((function(){var e=Object.keys(t).length>0&&t.oppRecRev.map((function(e){var t=[];return["customer","project","closedamt","upside","calls"].forEach((function(s){t.push(e.id<0?"project"==s?(0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:"Opportunity"},s):(0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:e[s]},s):"customer"!=s&&"project"!=s?(0,w.jsx)("td",{className:"p-0",style:{textAlign:"right",width:"50px"},"data-toggle":"tooltip",title:parseInt(e[s]).toLocaleString("en-US"),children:"$"+parseInt(e[s]).toLocaleString("en-US")}):"project"==s?(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",title:e[s],style:{maxWidth:"150px !important"},children:(0,w.jsx)("a",{href:"https://d300000000qxieam.my.salesforce.com/?ec=302&startURL=%2Fvisualforce%2Fsession%3Furl%3Dhttps%253A%252F%252Fd300000000qxieam.lightning.force.com%252Flightning%252Fr%252FOpportunity%252F0061W00001UtIfyQAF%252Fview",target:"_blank",rel:"noopener noreferrer","data-toggle":"tooltip",title:e[s],children:e[s]})},s):(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",title:e[s],children:e[s]},s))})),(0,w.jsx)("tr",{children:t},e.id)}));l(e)}),[t]),(0,w.jsxs)("div",{className:"col-md-12 darkHeader",children:[(0,w.jsx)("h6",{className:"subHeading",children:"Software"}),(0,w.jsx)("div",{className:"col-md-12 softSummry",children:(0,w.jsx)("table",{className:"table table-bordered serviceTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:r})})})]})}L()(_());var E=s(93433);function M(e){var t,s=e.softdata,a=(0,d.useState)([]),r=(0,n.Z)(a,2),l=r[0],i=r[1],o="obj",c=null===(t=s.prjRecRev)||void 0===t?void 0:t.filter((function(e){return 1==e.lvl})).map((function(e){return e[o]})),u=0,p=(0,d.useState)([]),h=(0,n.Z)(p,2),m=h[0],g=h[1],x={1:(0,w.jsx)(v.gbA,{style:{color:"purple"}}),0:(0,w.jsx)(v.gbA,{style:{color:"green"}})};return(0,d.useEffect)((function(){var e=Object.keys(s).length>0&&s.prjRecRev.map((function(e){var t=[];return u=2==e.lvl?u:l.includes(e[o])?1:0,["obj","target","revenue","planned","upside","total"].forEach((function(s){void 0!==e[s]&&t.push(e.id<0?"Customer/__iconPrj__Proj/__iconOpt__Oppt"==e[s]?(0,w.jsxs)("th",{style:{textAlign:"center",position:"sticky",top:0},children:["Customer /",(0,w.jsxs)("span",{className:"mr-1",children:[" ",x[0]]})," Proj / ",(0,w.jsx)("span",{className:"mr-1",children:x[1]})," Oppt"]},s):(0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:e[s]},s):"obj"!=s?(0,w.jsx)("td",{style:{textAlign:"right"},"data-toggle":"tooltip",title:parseInt(e[s]).toLocaleString("en-US"),children:"$"+(""!==e[s]?parseInt(e[s]).toLocaleString("en-US"):"0")}):(0,w.jsxs)("td",{className:"ellipsis","data-toggle":"tooltip",title:e[s],style:{display:0==u&&2==e.lvl?"none":""},children:[s==o&&e.lvl<2?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var t;t=e[o],i("Total"==t?function(e){return e.length==c.length?[]:c}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,E.Z)(e),[t])}),console.log("expanded")},children:l.includes(e[o])||l.length==c.length?(0,w.jsx)(v.iUH,{}):(0,w.jsx)(v.H_v,{})})}):""!=e.project||null!=e.project?(0,w.jsxs)("span",{children:[" ",x[0]," "]}):"",e[s]]},s))})),(0,w.jsx)("tr",{style:{display:2==e.lvl&&0==u?"none":""},children:t},e.id)}));g(e)}),[null===s||void 0===s?void 0:s.prjRecRev,l]),(0,w.jsxs)("div",{className:"col-md-12 darkHeader",children:[(0,w.jsx)("h6",{className:"subHeading",children:"Services"}),(0,w.jsx)("div",{className:"col-md-12 softSummry",children:(0,w.jsx)("table",{className:"table table-bordered serviceTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:m})})})]})}function U(e){var t=e.scoreCardData;return console.log(t),(0,w.jsxs)("div",{className:"col-md-12  customCard card graph",children:[(0,w.jsx)(q,{targets:t}),(0,w.jsxs)("div",{className:"col-md-12 ml-1 row",children:[(0,w.jsx)("div",{className:"col-md-6",children:(0,w.jsx)(M,{softdata:t})}),(0,w.jsx)("div",{className:"col-md-6",children:(0,w.jsx)(F,{softdata:t})})]})]})}s(6298)(_());var B=function(e){var t=e.chartData;return(0,w.jsx)("div",{children:(0,w.jsx)(P(),{highcharts:_(),options:t})})};L()(_());var O=function(e){var t=e.targetData,s=e.type,a=(0,d.useRef)([]),r=(0,d.useState)({}),l=(0,n.Z)(r,2),i=l[0],o=l[1],c=(0,d.useState)(null),u=(0,n.Z)(c,2),p=u[0],h=u[1];return(0,d.useEffect)((function(){!function(){var e=[],n=[],r=[],l=[],i=[],c=[];t.map((function(t){if(-1!=t.id)for(var s in e.push(t.category),t)switch(s){case"target":n.push(parseInt(t[s]));break;case"revenue":r.push(parseInt(t[s]));break;case"planned":l.push(parseInt(t[s]));break;case"upside":i.push(parseInt(t[s]));break;case"variance":c.push(parseInt(t[s]))}})),a.current=e;var d={credits:{enabled:!1},chart:{type:"column",width:600,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{text:"Target, Realised, Planned , Calls and Variance By ".concat(s),style:{fontSize:"15px"}},xAxis:{categories:a.current,gridLineWidth:.2},yAxis:{allowDecimals:!1,min:0,title:{text:"Target/Realised/Planned/Upside/Variance ($)"},gridLineWidth:.2},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+parseInt(this.y).toLocaleString("en-US")+"<br/>"}},plotOptions:{column:{stacking:"normal"}},series:[{name:"Target",color:"rgba(34, 167, 240, 1)",data:n,stack:"first",legendIndex:1},{name:"Variance",color:"#ff6666",data:c,stack:"second",legendIndex:5},{name:"Planned",color:"#ffc966",data:l,stack:"second",legendIndex:3},{name:"Realised",color:"#66ff66",data:r,stack:"second",legendIndex:2},{name:"Upside",color:"#b3b3b3",data:i,stack:"second",legendIndex:4}],exporting:{buttons:{contextButton:{symbolStrokeWidth:1,symbolFill:"#a4edba",symbolStroke:"#330033"}}},responsive:{rules:[{condition:{maxWidth:2e3}}]}};o(d)}(),function(){var e=["#","Target","Realised","Planned","Upside","Call","Variance"],s=[];h((function(){return t.map((function(t,a){var n=[];return e.forEach((function(e,a){-1==t.id?(s.push(Object.keys(t).find((function(s){return t[s]===e}))),n.push((0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:e}))):"category"!=s[a]?n.push((0,w.jsx)("td",{style:{textAlign:"right"},title:"$"+parseInt(t[s[a]]).toLocaleString("en-US"),children:"$"+parseInt(t[s[a]]).toLocaleString("en-US")})):n.push((0,w.jsx)("td",{title:t[s[a]],children:t[s[a]]}))})),(0,w.jsx)("tr",{className:"".concat(0===t.id&&"trLvl0"),children:n},t.id)}))}))}()}),[]),(0,w.jsx)("div",{children:(0,w.jsxs)("div",{className:"col-12 mt-3 customCard card graph darkHeader",children:[(0,w.jsx)(P(),{highcharts:_(),options:i}),null!=p?(0,w.jsx)("div",{className:"mt-2 border border-white",style:{maxHeight:"114px",overflowY:"auto"},children:(0,w.jsx)("table",{style:{width:"100%"},className:"table table-bordered serviceTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:p})})}):""]})})},z=s(11087);function H(e){var t=e.scoreCardData,s=(0,d.useState)([]),a=(0,n.Z)(s,2),r=a[0],l=a[1];return(0,d.useEffect)((function(){var e=Object.keys(t).length>0&&t.map((function(e){var t=[];return["customer","customer_email","project","project_mgr","csat_month_dt","csat_initiated_dt","proj_st_dt","proj_end_dt","status","survey_res"].forEach((function(s){t.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center",fontSize:"13px"},children:e[s]},s):"project"==s?(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",children:(0,w.jsx)(z.rU,{"data-toggle":"tooltip",title:e[s],to:"/project/Overview/:".concat(e.obj_id),target:"_blank",children:e[s]})}):(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",style:{fontSize:"13px",textAlign:"survey_res"===s?"right":"left"},title:e[s],children:e[s]},s))})),(0,w.jsx)("tr",{children:t},e.id)}));l(e)}),[t]),(0,w.jsxs)("div",{className:"col-md-12  customCard card graph darkHeader",children:[(0,w.jsx)("div",{className:"group-content row",children:(0,w.jsx)("h6",{className:"subHeading",children:"Customer CSAT Project List"})}),(0,w.jsx)("div",{className:"col-12 pl-2 pr-2",style:{maxHeight:"300px",overflowY:"auto"},children:(0,w.jsx)("table",{className:"table table-bordered csattable ",children:(0,w.jsx)("thead",{children:r})})})]})}function $(e){var t=e.risk,s=(0,d.useState)([]),a=(0,n.Z)(s,2),r=a[0],l=a[1];return(0,d.useEffect)((function(){var e=t.length>0&&t.map((function(e){var t=["id","customer_id","obj_id","notes","contxt"],s=[];return["customer","project","risk_name","risk_type","risk_source","risk_impact","risk_prob_occurance","risk_value","assigned_to","risk_occured","risk_status","risk_occured_dt","mitigation_dt","created_by"].forEach((function(a){!t.includes(a)&&s.push(e.id<0?(0,w.jsx)(w.Fragment,{children:"mitigation_dt"==a?(0,w.jsx)("th",{style:{textAlign:"center"},children:"Mitigation Dt"},a):"risk_occured_dt"==a?(0,w.jsx)("th",{style:{textAlign:"center"},children:"Occurred Dt"},a):(0,w.jsx)("th",{style:{textAlign:"center"},children:e[a]},a)}):"project"==a?(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",style:{fontSize:"13px"},children:(0,w.jsx)(z.rU,{"data-toggle":"tooltip",title:e[a],to:"/project/Overview/:".concat(e.obj_id),target:"_blank",children:e[a]})}):"risk_value"==a?(0,w.jsx)("td",{style:{textAlign:"right",fontSize:"13px"},"data-toggle":"tooltip",title:e[a],children:e[a]},a):(0,w.jsx)("td",{className:"ellipsis",style:{fontSize:"13px"},"data-toggle":"tooltip",title:e[a],children:e[a]},a))})),(0,w.jsx)("tr",{children:s},e.id)}));l(e)}),[t]),(0,w.jsxs)("div",{className:"col-md-12 darkHeader  customCard card graph",children:[(0,w.jsx)("div",{className:"group-content row",children:(0,w.jsx)("h6",{className:"subHeading",children:"Project Risks"})}),(0,w.jsx)("div",{className:"pl-2 pr-2",style:{overflowY:"scroll"},children:(0,w.jsx)("table",{className:"table table-bordered softSummry csattable",children:(0,w.jsx)("thead",{style:{fontSize:"13px",maxWidth:"12px"},children:r})})})]})}function W(e){var t=e.scoreCardData,s=[],a=[],r=[],l=[],i=[],o=[],c=[],u=[],p=[],h=[],m=[],g=[],x=[],v=0,f=0,b=0,j=0,y=0,S=0,N=(0,d.useState)([]),R=(0,n.Z)(N,2),I=R[0],C=R[1],k=(0,d.useState)({}),Z=(0,n.Z)(k,2),A=Z[0],T=Z[1];return(0,d.useEffect)((function(){var e=Object.keys(t).length>0&&t.custWOWRecRev.map((function(e){var t=[];return["week_no","serv_crated","soft_created","serv_closed","soft_closed","serv_lost","soft_lost"].forEach((function(n){"week_no"==n&&e.id>"0"&&x.push(e[n]),"serv_crated"==n&&e.id>"0"&&(v=parseFloat(v)+parseFloat(e[n]),s.push(parseFloat(v)),c.push(parseInt(0))),"soft_created"==n&&e.id>"0"&&(f=parseFloat(f)+parseFloat(e[n]),a.push(parseFloat(f)),u.push(parseInt(0))),"serv_closed"==n&&e.id>"0"&&(b=parseFloat(b)+parseFloat(e[n]),r.push(parseFloat(b)),p.push(parseInt(0))),"soft_closed"==n&&e.id>"0"&&(j=parseFloat(j)+parseFloat(e[n]),l.push(parseFloat(j)),h.push(parseInt(0))),"serv_lost"==n&&e.id>"0"&&(y=parseFloat(y)+parseFloat(e[n]),i.push(parseFloat(y)),m.push(parseInt(0))),"soft_lost"==n&&e.id>"0"&&(S=parseFloat(S)+parseFloat(e[n]),o.push(parseFloat(S)),g.push(parseInt(0))),"week_date"!==n&&"string"===typeof e[n]&&!n.includes("_cnt")&&""!==e[n]&&"#"!==e[n]&&null!==e[n]&&t.push(e.id<0?(0,w.jsx)("th",{colSpan:e[n].split("^&")[1],style:{textAlign:"center"},children:e[n].split("^&")[0]},n):"week_no"!==n?(0,w.jsxs)("td",{style:{textAlign:"right"},children:["$"+parseInt(e[n]).toLocaleString("en-US")+"("+e[n+"_cnt"]+")"," "]},n):(0,w.jsxs)("td",{className:"ellipsis",title:e[n],children:[" ",e[n]]}))})),(0,w.jsx)("tr",{children:t},e.id)})),n=[];n.push({name:"Serv Created",data:s,description:c}),n.push({name:"S/W Created",data:a,description:u}),n.push({name:"Serv Closed",data:r,description:p}),n.push({name:"S/W Closed",data:l,description:h}),n.push({name:"Serv Lost",data:i,description:m}),n.push({name:"S/W Lost",data:o,description:g});var d={lang:{thousandsSep:",",decimalPoint:"."},chart:{type:"line",width:670},title:{text:"Progress of Service/Software",style:{fontSize:"15px"}},xAxis:{categories:x,crosshair:!0,title:{text:"Weeks"}},yAxis:{allowDecimals:!0,padding:1,title:{text:"Amount"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},plotOptions:{series:{label:{connectorAllowed:!1}}},series:n};C(e),T(d)}),[t]),(0,w.jsx)("div",{className:"col-md-12  customCard card graph darkHeader",children:(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"col-6 pr-0",children:(0,w.jsx)(P(),{highcharts:_(),options:A})}),(0,w.jsx)("div",{className:"col-6 p-0 mt-5",children:(0,w.jsx)("div",{style:{maxWidth:"700px",overflowX:"auto"},children:(0,w.jsx)("table",{className:"table table-bordered progressOfswTable",children:(0,w.jsx)("thead",{children:I})})})})]})})}L()(_());var Q=function(e){var t=e.custRelRevCat,s=(0,d.useRef)(0),a=(0,d.useRef)(0),r=(0,d.useRef)(0),l=(0,d.useState)({}),o=(0,n.Z)(l,2),c=o[0],u=o[1],p=(0,d.useState)([]),h=(0,n.Z)(p,2),m=h[0],g=h[1],x=(0,d.useState)([]),f=(0,n.Z)(x,2),b=f[0],j=f[1],y="category",S=t.filter((function(e){return 1==e.lvl})).map((function(e){return e[y]})),N=0;(0,d.useEffect)((function(){R()}),[]),(0,d.useEffect)((function(){var e=t.map((function(e){var t=[];return N=2==e.lvl?N:b.includes(e[y])?1:0,["category","revenue","planned","calls","total"].forEach((function(s){void 0!==e[s]&&t.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:e[s]},s):"category"!=s?(0,w.jsx)("td",{style:{textAlign:"right"},"data-toggle":"tooltip",title:parseInt(e[s]).toLocaleString("en-US"),children:"$"+(""!==e[s]?parseInt(e[s]).toLocaleString("en-US"):"0")}):(0,w.jsxs)("td",{className:"ellipsis","data-toggle":"tooltip",title:e[s],style:{display:0==N&&2==e.lvl?"none":""},children:[s==y&&e.lvl<2&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var t;t=e[y],j("All Customers"==t?function(e){return e.length==S.length?[]:S}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,E.Z)(e),[t])}),console.log("expanded")},children:b.includes(e[y])||b.length==S.length?(0,w.jsx)(v.iUH,{}):(0,w.jsx)(v.H_v,{})})}),e[s]]},s))})),(0,w.jsx)("tr",{style:{display:2==e.lvl&&0==N?"none":""},children:t},e.id)}));g(e)}),[t,b]);var R=function(){var e;t.map((function(e){if(e.id>0)switch(e.category){case"Existing & Existing":s.current=parseInt(e.total);break;case"Existing & New":a.current=parseInt(e.total);break;case"New & New":r.current=parseInt(e.total)}}));var n={credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Customer Realised Revenue By Category",style:{fontSize:"15px"}},tooltip:{formatter:function(){return"".concat(this.point.name,'<br /><li style="color: ').concat(this.point.color,'">&#9679;</li> Rec. Revenue: <b>$').concat(_().numberFormat(this.point.y,0,",",","),"</b> (").concat(Math.round(10*this.point.percentage)/10,")%")}},xAxis:{categories:["Existing & Existing","Existing & New","New & New"]},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:(e={allowPointSelect:!0,cursor:"pointer",shadow:!0,startAngle:180},(0,i.Z)(e,"cursor","pointer"),(0,i.Z)(e,"depth",55),(0,i.Z)(e,"size","100%"),(0,i.Z)(e,"showInLegend",!0),e)},series:[{name:"Rec. Revenue",colorByPoint:!0,data:[{name:"Existing & Existing",y:s.current,selected:!0,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"Existing & New",y:a.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"New & New",y:r.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}}]}]};u(n)};return(0,w.jsxs)("div",{className:"col-12 mt-2  customCard card graph thead",children:[(0,w.jsx)("div",{className:"mr-0",children:(0,w.jsx)(P(),{highcharts:_(),options:c})}),null!=m?(0,w.jsx)("div",{className:"darkHeader",style:{maxHeight:"111px",overflowY:"auto"},children:(0,w.jsx)("table",{className:"table table-bordered serviceTable ",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:m})})}):""]})};L()(_());var K=function(e){var t=e.topCustomerByRealRev,s=e.cusRecRev,a=e.scoreCardDataPayload,r=(0,d.useState)({}),l=(0,n.Z)(r,2),o=l[0],c=l[1],u=(0,d.useState)(null),p=(0,n.Z)(u,2),h=p[0],m=p[1],g=(0,d.useRef)(0),x=(0,d.useRef)(0),v=(0,d.useRef)(0),f=(0,d.useRef)(0),b=(0,d.useRef)(0);(0,d.useEffect)((function(){y(),j()}),[]);var j=function(){var e="cust"===a.viewby?["Rank","Project","Realised","Planned","GM","GM%"]:["Rank","Customer","Realised","Planned","Upside","Call"],s=[];m((function(){return t.map((function(t,a){var n=[];return e.forEach((function(r,l){-1==t.id?(s.push(Object.keys(t).find((function(e){return t[e]===r}))),n.push((0,w.jsx)("th",{style:{textAlign:"center",backgroundColor:"#f4f4f4",position:"sticky",top:0},children:r}))):(console.log("customer"==s[l]&&"Project"==e[l]&&t[s[l]],r,"headerTitles[index1] "),n.push((0,w.jsx)("td",{style:{textAlign:l>1?"right":"Rank"==e[l]&&"center"},children:"Rank"==e[l]?a:"customer"==s[l]&&"Project"==r?t[s[l]]:"Customer"!=e[l]&&"Project"==e[l]?"".concat(l>1?"$":"")+parseInt(t[s[l]]).toLocaleString("en-US"):"".concat(l>1?"$"+parseInt(t[s[l]]).toLocaleString("en-Us"):t[s[l]])})))})),1===a?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("tr",{children:(0,w.jsx)("td",{style:{textAlign:"center",backgroundColor:"#f4f4f4"},colSpan:"6",children:"Top 1 to 10"})}),(0,w.jsx)("tr",{style:{backgroundColor:t.color},children:n})]}):11===a?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("tr",{children:(0,w.jsx)("td",{colSpan:"6"})}),(0,w.jsx)("tr",{children:(0,w.jsx)("td",{style:{textAlign:"center",backgroundColor:"#f4f4f4"},colSpan:"6",children:"Top 11 to 20"})}),(0,w.jsx)("tr",{style:{backgroundColor:t.color},children:n})]}):(0,w.jsx)("tr",{style:{backgroundColor:t.color},children:n})}))}))},y=function(){var e;null===s||void 0===s||s.map((function(e){switch(e.category){case"Top 1":g.current=parseInt(e.revenue);break;case"Top 2-5":x.current=parseInt(e.revenue);break;case"Top 6-10":v.current=parseInt(e.revenue);break;case"Top 11-20":f.current=parseInt(e.revenue);break;case"Rest":b.current=parseInt(e.revenue)}}));var t={credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Top Customers By Realised Revenue",style:{fontSize:"15px"}},tooltip:{formatter:function(){return"".concat(this.point.name,'<br /><li style="color: ').concat(this.point.color,'">&#9679;</li> Rec. Revenue: <b>$').concat(_().numberFormat(this.point.y,0,",",","),"</b> (").concat(Math.round(10*this.point.percentage)/10,")%")}},xAxis:{categories:["Top 1","Top 2-5","Top 6-10","Top 11-20","Rest"]},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:(e={allowPointSelect:!0,cursor:"pointer",shadow:!0,startAngle:180},(0,i.Z)(e,"cursor","pointer"),(0,i.Z)(e,"depth",55),(0,i.Z)(e,"size","100%"),(0,i.Z)(e,"showInLegend",!0),e)},series:[{colorByPoint:!0,data:[{name:"Top 1",y:g.current,selected:!0,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"Top 2-5",y:x.current,color:"#e4d354",dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"Top 6-10",y:v.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"Top 11-20",y:f.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"Rest",y:b.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}}]}]};c(t)};return(0,w.jsxs)("div",{className:"col-12 mt-2 customCard card graph darkHeader",children:[(0,w.jsx)("div",{className:"mr-0",children:(0,w.jsx)(P(),{highcharts:_(),options:o})}),null!=h?(0,w.jsx)("div",{style:{maxHeight:"111px",overflowY:"auto"},children:(0,w.jsx)("table",{className:" table table-bordered serviceTable1",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:h})})}):""]})};var G=function(e){var t=e.openOpptys,s=(0,d.useRef)([]),a=(0,d.useState)(null),i=(0,n.Z)(a,2),o=i[0],c=i[1];(0,d.useEffect)((function(){s.current.push((0,w.jsx)("th",{style:{textAlign:"center",fontSize:"13px"},children:"Sales Executive"})),p()}),[]);var u=function(e,t){for(var s=t.lvl+1+"_"+t.sales_executive,a=document.getElementsByClassName(s),n=0;n<a.length;n++)a[n].classList.contains("displayRow")?a[n].classList.remove("displayRow"):a[n].classList.add("displayRow")},p=function(){var e=(0,l.Z)((0,r.Z)().mark((function e(){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:[],s=[],t.map((function(e,a){-1==e.id||(1!=e.lvl||0!=t[a-1].lvl&&2!=t[a-1].lvl?s.push(e):(s.push(e),s.push(t[0])))})),c((function(){var e=["sales_executive","oppt_name","resource_amount","oppt_prob"],t=["Customer","Opportunity","Practice","R. Type","R. Amount","Oppt Amount","Close Date","Prob%","Stage","Next Step"],a=[];return s.map((function(n,r){var l=[];return 1==n.lvl?e.forEach((function(e,t){console.log(e,"***************");var s=n[e].includes("^&")?n[e].split("^&"):n[e];l.push((0,w.jsx)("td",{style:{textAlign:n[e].includes("^&")&&"right"},colSpan:"sales_executive"==e?4:3,children:n[e].includes("^&")?"$"+parseInt(s[0]).toLocaleString("en-US")+" "+s[1]:(0,w.jsxs)("span",{children:[(0,w.jsx)("span",{className:"mr-1",children:(0,w.jsx)(v.qL$,{})}),s]})}))})):2==n.lvl?a.forEach((function(e,t){l.push((0,w.jsx)("td",{className:"customer"==e?"customer":"oppt_name"==e?"oppt":"","data-toggle":"tooltip",title:n[e],colSpan:"oppt_closed_dt"==e?2:"",style:{textAlign:("resource_amount"==e||"oppt_amount"==e||"oppt_prob"==e)&&"right"},children:"resource_amount"==e||"oppt_amount"==e?"$"+parseInt(n[e]).toLocaleString("en-US"):n[e]}))})):0==n.lvl&&t.forEach((function(e,t){l.push((0,w.jsx)("th",{style:{textAlign:"center",fontSize:"13px"},colSpan:"Close Date"==e?2:"",children:e})),r<2&&a.push(Object.keys(n).find((function(t){return n[t]==e})))})),(0,w.jsx)("tr",{onClick:function(e){u(0,n)},className:" ".concat(1==n.lvl?"trLvl0":""," ").concat(0==n.lvl?"displayRow  "+s[r+1].lvl+"_"+s[r+1].sales_executive:2==n.lvl?"displayRow "+n.lvl+"_"+n.sales_executive:""," "),children:l},n.lvl)}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)("div",{className:"mt-2 col-md-12 no-padding customCard card graph darkHeader",children:[(0,w.jsx)("div",{className:"group-content row",children:(0,w.jsx)("h6",{className:"subHeading",children:"Open Service Pipeline"})}),(0,w.jsx)("div",{className:"pl-2 pr-2",children:null!=o?(0,w.jsx)("table",{style:{width:"100%"},className:"table table-bordered ",children:(0,w.jsxs)("thead",{style:{fontSize:"13px"},children:[(0,w.jsxs)("tr",{style:{width:"100%"},children:[(0,w.jsx)("th",{colSpan:4,style:{textAlign:"center",fontSize:"13px",minWidth:"300px"},children:"Sales Executive"}),(0,w.jsx)("th",{colSpan:3,style:{textAlign:"center",fontSize:"13px",minWidth:"300px"},children:"High"}),(0,w.jsx)("th",{colSpan:3,style:{textAlign:"center",fontSize:"13px",minWidth:"300px"},children:"Medium"}),(0,w.jsx)("th",{colSpan:3,style:{textAlign:"center",fontSize:"13px",minWidth:"300px"},children:"Others"})]}),o]})}):""})]})};function Y(e){console.log("props-------------"),console.log(e);var t=e.custContRecRev,s=e.custContRecRevTable,a=(0,d.useState)({}),r=(0,n.Z)(a,2),l=r[0],o=r[1],c=(0,d.useState)([]),u=(0,n.Z)(c,2),p=u[0],h=u[1],m=(0,d.useRef)(0),g=(0,d.useRef)(0),x=(0,d.useRef)(0),f=(0,d.useRef)(0),b=(0,d.useRef)(0),j=(0,d.useRef)(0),y="category",S=s.filter((function(e){return 1==e.lvl})).map((function(e){return e[y]})),N=0;(0,d.useEffect)((function(){I()}),[]);var R=null===s||void 0===s?void 0:s.map((function(e){var t=["catId","id","lvl"],s=[];N=2==e.lvl?N:p.includes(e[y])?1:0;for(var a="category,project,revenue,planned,total".split(","),n=function(){var n=a[r];null!==e[n]&&!t.some((function(e){return n.includes(e)}))&&s.push(e.id<0?(0,w.jsx)("th",{className:"pipeth",style:{textAlign:"center",position:"sticky",top:"0"},colSpan:e[n].split("^&")[2],rowSpan:e[n].split("^&")[1],children:e[n].split("^&")[0]},n):"category"!=n&&"project"!=n?(0,w.jsxs)("td",{className:"2"===e.lvl?"clear ":" ",style:{textAlign:"right"},colSpan:e[n].split("^&")[2],rowSpan:e[n].split("^&")[1],children:[(0,w.jsx)(d.Fragment,{children:"1"!==e.lvl||"Closed Amount"!==e.name&&"Unclosed Calls"!==e.name&&"Upside"!==e.name&&"Other Pipeline"!==e.name?"":(0,w.jsx)(FiChevronRight,{onClick:expCollapse})}),"$"+parseInt(e[n]).toLocaleString("en-US")]},n):"category"==n||"project"==n?(0,w.jsx)("td",{className:"2"==e.lvl?" clear ":"ellipsis",colSpan:e[n].split("^&")[2],rowSpan:e[n].split("^&")[1],style:{display:0==N&&2==e.lvl?"none":""},children:(0,w.jsxs)(d.Fragment,{children:[(n==y&&e.lvl<2||null==e.category&&e.lvl<2)&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var t;t=e[y],h("Total"==t?function(e){return e.length==S.length?[]:S}:function(e){return e.includes(t)?e.filter((function(e){return e!==t})):[].concat((0,E.Z)(e),[t])}),console.log("expanded")},children:p.includes(e[y])||p.length==S.length?(0,w.jsx)(v.iUH,{}):(0,w.jsx)(v.H_v,{})})}),null==e.category?"null":e[n].replaceAll("&nbsp;"," "),"\xa0"]})},n):"")},r=0;r<a.length;r++)n();return(0,w.jsx)("tr",{id:e.id,lvl:e.lvl,style:{display:2==e.lvl&&0==N?"none":""},onClick:function(t){!function(e,t){for(var s=t.lvl+1+"_"+t.sales_executive,a=document.getElementsByClassName(s),n=0;n<a.length;n++)a[n].classList.contains("displayRow")?a[n].classList.remove("displayRow"):a[n].classList.add("displayRow")}(0,e)},children:s},e.id)})),I=function(){var e;null===t||void 0===t||t.map((function(e){switch(e.contterm){case"BMS":m.current=parseInt(e.total);break;case"BNE":g.current=parseInt(e.total);break;case"BSA":x.current=parseInt(e.total);break;case"BTM":f.current=parseInt(e.total);break;case"FP":b.current=parseInt(e.total);break;case"NB-E":j.current=parseInt(e.total)}}));var s={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",options3d:{enabled:!0,alpha:45,beta:0}},title:{text:"Realised Revenue By Contract Terms",style:{fontSize:"15px"}},tooltip:{formatter:function(){return"".concat(this.point.name,'<br /><li style="color: ').concat(this.point.color,'">&#9679;</li> Rec. Revenue: <b>$').concat(_().numberFormat(this.point.y,0,",",","),"</b> (").concat(Math.round(10*this.point.percentage)/10,")%")}},xAxis:{categories:["BMS","BNE","BSA","BTM","FP","NB-E"]},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:(e={allowPointSelect:!0,cursor:"pointer",shadow:!0,startAngle:180},(0,i.Z)(e,"cursor","pointer"),(0,i.Z)(e,"depth",55),(0,i.Z)(e,"size","100%"),(0,i.Z)(e,"showInLegend",!0),(0,i.Z)(e,"dataLabels",{enabled:!0,formatter:function(){return"<b>".concat(point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}),e)},series:[(0,i.Z)({data:t.map((function(e){return{name:e.category,y:parseInt(e.revenue),color:e.color,customer:e.customer}})),colorByPoint:!0},"data",[{name:"BMS",y:m.current,selected:!0,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"BNE",y:g.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"BSA",y:x.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"BTM",y:f.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"FP",y:b.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}},{name:"NB-E",y:j.current,dataLabels:{enabled:!0,distance:10,formatter:function(){return"<b>".concat(this.point.name,"</b>:<br/>$").concat(_().numberFormat(this.point.y,0,",",",")," (").concat(Math.round(10*this.point.percentage)/10,")%")}}}])]};console.log("line 146"),console.log(m.current),console.log(g.current),o(s)};return(0,w.jsx)("div",{className:"mt-2 col-md-12 no-padding darkHeader customCard card graph",children:(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"mt-2 col-md-6 ",children:(0,w.jsx)(P(),{highcharts:_(),options:l})}),(0,w.jsx)("div",{className:"mt-2 col-md-6",style:{maxHeight:"384px",overflow:"auto"},children:(0,w.jsx)("table",{className:"table table-bordered serviceTable ",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:R})})})]})})}function V(e){var t=e.ftePlanByLoc,s=[],a=[],r=[],l=(0,d.useState)([]),i=(0,n.Z)(l,2),o=i[0],c=i[1],u=(0,d.useState)({}),p=(0,n.Z)(u,2),h=p[0],m=p[1];return(0,d.useEffect)((function(){var e=null===t||void 0===t?void 0:t.map((function(e){var t=[];return["category","revenue","planned"].forEach((function(n){if(e.id>-1)switch(n){case"category":s.push(e[n]);break;case"planned":r.push(parseFloat(e[n]));break;case"revenue":a.push(parseFloat(e[n]))}t.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center"},children:e[n]},n):"planned"==n||"revenue"==n?(0,w.jsx)("td",{style:{textAlign:"right"},children:"$"+parseInt(e[n]).toLocaleString("en-US")},n):(0,w.jsxs)("td",{children:[" ",e[n]]},n))})),(0,w.jsx)("tr",{children:t},e.id)})),n={chart:{type:"column",width:500,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{text:"FTE Realised, Planned By Location",style:{fontSize:"15px"}},xAxis:{categories:s,gridLineWidth:.2},yAxis:[{allowDecimals:!1,min:0,title:{text:"Realised / Planned ($)"},gridLineWidth:.2}],tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+parseInt(this.y).toLocaleString("en-US")+"<br/>"}},plotOptions:{column:{stacking:"normal"}},series:[{name:"Planned",color:"#ffc966",data:r,stack:"second",legendIndex:3},{name:"Realised",color:"#66ff66",data:a,stack:"second",legendIndex:2}],responsive:{rules:[{condition:{maxWidth:2e3}}]}};c(e),m(n)}),[t]),(0,w.jsxs)("div",{className:"col-12 darkHeader",children:[(0,w.jsx)("div",{className:"col-12 ",children:(0,w.jsx)(P(),{highcharts:_(),options:h})}),(0,w.jsx)("div",{className:"col-12 darkHeader",children:(0,w.jsx)("table",{className:"table table-bordered serviceTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:o})})})]})}function J(e){var t=e.subKPlanByLoc,s=[],a=[],r=[],l=(0,d.useState)([]),i=(0,n.Z)(l,2),o=i[0],c=i[1],u=(0,d.useState)({}),p=(0,n.Z)(u,2),h=p[0],m=p[1];return(0,d.useEffect)((function(){var e=null===t||void 0===t?void 0:t.map((function(e){var t=[];return["category","revenue","planned"].forEach((function(n){if(e.id>-1)switch(n){case"category":s.push(e[n]);break;case"planned":r.push(parseFloat(e[n]));break;case"revenue":a.push(parseFloat(e[n]))}t.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center"},children:e[n]},n):"planned"==n||"revenue"==n?(0,w.jsx)("td",{style:{textAlign:"right"},children:"$"+parseInt(e[n]).toLocaleString("en-US")},n):(0,w.jsx)("td",{children:e[n]},n))})),(0,w.jsx)("tr",{children:t},e.id)})),n={chart:{type:"column",width:500,options3d:{enabled:!0,alpha:8,beta:12,viewDistance:25,depth:70}},title:{text:"SUBK Realised, Planned By Location",style:{fontSize:"15px"}},xAxis:{categories:s,gridLineWidth:.2},yAxis:[{allowDecimals:!1,min:0,title:{text:"Planned / Realised  ($)"},gridLineWidth:.2}],tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+parseInt(this.y).toLocaleString("en-US")+"<br/>"}},plotOptions:{column:{stacking:"normal"}},series:[{name:"Planned",color:"#ffc966",data:r,stack:"second",legendIndex:3},{name:"Realised",color:"#66ff66",data:a,stack:"second",legendIndex:2}],responsive:{rules:[{condition:{maxWidth:2e3}}]}};c(e),m(n)}),[t]),(0,w.jsxs)("div",{className:"col-12 darkHeader",children:[(0,w.jsx)("div",{className:"col-12 ",children:(0,w.jsx)(P(),{highcharts:_(),options:h})}),(0,w.jsx)("div",{className:"col-12 ",children:(0,w.jsx)("table",{className:"table table-bordered serviceTable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:o})})})]})}function X(e){var t=e.ftePlanByLoc,s=e.subKPlanByLoc;return(0,w.jsxs)("div",{className:"col-12 mr-0 pr-0 row",style:{margin:"0px",padding:"0px"},children:[(0,w.jsx)("div",{className:"col-6 pr-0 customCard card graph",children:(0,w.jsx)(V,{ftePlanByLoc:t})}),(0,w.jsx)("div",{className:"col-6 pl-0 customCard card graph",children:(0,w.jsx)(J,{subKPlanByLoc:s})})]})}L()(_()),L()(_()),L()(_());var ee=s(11634);function te(e){var t=e.qbrList.map((function(e){var t=["customer_id","id","obj_id","id","customer_id","id"],s=[];return["customer","qbr_date","qbr_presenter","qbr_participants","qbr_cust_participants","qbr_present_date","qbr_notes","file"].forEach((function(a){null!==e[a]&&(!t.some((function(e){return a.includes(e)}))&&s.push(e.id<0?(0,w.jsx)("th",{className:"serviceth",style:{textAlign:"center"},colSpan:e[a].split("^&")[2],rowSpan:e[a].split("^&")[1],children:e[a].split("^&")[0]},a):(0,w.jsx)("td",{colSpan:e[a].split("^&")[2],rowSpan:e[a].split("^&")[1],children:"file"!=a||null==e.file&&""==e.file?(0,w.jsx)(d.Fragment,{children:(0,w.jsx)("span",{children:e[a]})}):(0,w.jsx)("div",{align:"center","data-toggle":"tooltip",title:"Download Document",children:(0,w.jsx)(ee.Z,{style:{color:"#86b558"}})})},a)))})),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("tr",{children:s},e.id)})}));return(0,w.jsx)("div",{className:"col-md-12  border-box no-padding csattable customCard card graph darkHeader",children:(0,w.jsxs)("div",{className:"group-content",children:[(0,w.jsx)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding ",children:(0,w.jsx)("h6",{className:"subHeading",children:"Customer QBR List"})}),(0,w.jsx)("table",{className:"table table-bordered  ",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:t})})]})})}var se=s(45987),ae=["cat"];var ne=function(e){var t=e.historicalTrendData,s=e.scoreCardDataPayload,r=(0,d.useState)([]),l=(0,n.Z)(r,2),i=l[0],o=l[1],c=(0,d.useState)([]),u=(0,n.Z)(c,2),p=u[0],h=u[1],m=(0,d.useState)([]),g=(0,n.Z)(m,2),x=g[0],v=g[1],f=(0,d.useState)([]),b=(0,n.Z)(f,2),j=b[0],y=b[1],S=(0,d.useState)([]),N=(0,n.Z)(S,2),R=N[0],I=N[1],C=(0,d.useState)([]),k=(0,n.Z)(C,2),Z=k[0],A=k[1],_=(0,d.useState)([]),T=(0,n.Z)(_,2),P=T[0],D=T[1],L=(0,d.useState)(null),q=(0,n.Z)(L,2),F=q[0],E=q[1];(0,d.useEffect)((function(){console.log("in line 11------"),console.log(t.targets),console.log(t),M(),U()}),[t]);var M=function(){var e,s,a,n,r,l,i,c=[],d=[],u=[],p=[],m=[],g=[],x=[],f=[];console.log("in line 28-------"),console.log(t.targets),null===(e=t.targets)||void 0===e||e.map((function(e){switch(console.log(e.qrtr,e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5),"qrtr"),x.push(e.qrtr),e.category){case"Total":c.push(parseInt(e.target)),d.push(parseInt(e.realised)),f.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Service":u.push(parseInt(e.target)),p.push(parseInt(e.realised)),f.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Software":m.push(parseInt(e.target)),g.push(parseInt(e.realised)),f.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}})),console.log(f,"xaxis");var b={title:{text:"Target,Realised/Closed By Quarter Trend"},yAxis:{tickInterval:1e7,title:{text:"Number of Employees"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:f,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:f.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Total Targets",data:c},{name:"Total Realised",data:d},{name:"Service Target",data:u},{name:"Service Realised",data:p},{name:"Software Target",data:m},{name:"Software Realised",data:g}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};o(b);var j=[],S=[],N=[],R=[],C=[],k=[],w=[],Z=[],_=[],T=[],P=[],L=[];console.log("in line 136-------"),console.log(t.practRecRev),null===(s=t.practRecRev)||void 0===s||s.map((function(e){switch(P.push(e.qrtr),e.category){case"Total":j.push(parseInt(e.target)),S.push(parseInt(e.realised)),L.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"DACS":N.push(parseInt(e.target)),R.push(parseInt(e.realised)),L.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"IM&A":C.push(parseInt(e.target)),k.push(parseInt(e.realised)),L.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"QA&TA":w.push(parseInt(e.target)),Z.push(parseInt(e.realised)),L.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Prolifics Products":_.push(parseInt(e.target)),T.push(parseInt(e.realised)),L.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}})),console.log(L,"xaxiz2");var q={title:{text:"Target,Realised/Closed Quarter Trend By Practice"},yAxis:{tickInterval:1e7,title:{text:"Number of Employees"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:L,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:L.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Total Targets",data:j},{name:"Total Realised",data:S},{name:"DACS Target",data:N},{name:"DACS Realised",data:R},{name:"IM&A Target",data:C},{name:"IM&A Realised",data:k},{name:"QA&TA Target",data:w},{name:"QA&TA Realised",data:Z},{name:"Prolifics Products Target",data:_},{name:"Prolifics Products Realised",data:T}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};h(q);var F=[],E=[],M=[],U=[],B=[],O=[],z=[],H=[],$=[],W=[],Q=[],K=[],G=[],Y=[];console.log("in line 274------"),console.log(t.locRecRev),null===(a=t.locRecRev)||void 0===a||a.map((function(e){switch(G.push(e.qrtr),e.category){case"Total":F.push(parseInt(e.target)),E.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"UK":M.push(parseInt(e.target)),U.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"US":B.push(parseInt(e.target)),O.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"India":z.push(parseInt(e.target)),H.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Germany":$.push(parseInt(e.target)),W.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Canada":Q.push(parseInt(e.target)),K.push(parseInt(e.realised)),Y.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}}));var V={title:{text:"Target,Realised/Closed Quarter Trend By Country"},yAxis:{tickInterval:1e7,title:{text:"Number of Employees"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:Y,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:Y.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Total Targets",data:F},{name:"Total Realised",data:E},{name:"UK Target",data:M},{name:"UK Realised",data:U},{name:"US Target",data:B},{name:"US Realised",data:O},{name:"India Target",data:z},{name:"India Realised",data:H},{name:"Germany Target",data:$},{name:"Germany Realised",data:W},{name:"Canada Target",data:Q},{name:"Canada Realised",data:K}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};v(V);var J=[],X=[],ee=[],te=[],se=[];console.log("in line 274------"),console.log(t.custCatRecRev),null===(n=t.custCatRecRev)||void 0===n||n.map((function(e){switch(te.push(e.qrtr),e.category){case"Existing & Existing":J.push(parseInt(e.realised)),se.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Existing & New":X.push(parseInt(e.realised)),se.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"New & New":ee.push(parseInt(e.realised)),se.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}}));var ae={title:{text:"Customer Realised Revenue Quarter Trend By Category"},yAxis:{tickInterval:1e7,title:{text:"Realised"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:se,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:se.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Existing & Existing Realised",data:J},{name:"Existing & New Realised",data:X},{name:"New & New Realised",data:ee}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};y(ae);var ne=[],re=[],le=[],ie=[],oe=[],ce=[],de=[];console.log("in line 274------"),console.log(t.custContRecRev),null===(r=t.custContRecRev)||void 0===r||r.map((function(e){switch(ce.push(e.qrtr),e.category){case"BMS":ne.push(parseInt(e.realised)),de.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"BNE":re.push(parseInt(e.realised)),de.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"BSA":le.push(parseInt(e.realised)),de.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"BTM":ie.push(parseInt(e.realised)),de.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"FP":oe.push(parseInt(e.realised)),de.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}}));var ue={title:{text:"Customer Realised Revenue Quarter Trend By ContractTerms"},yAxis:{tickInterval:1e7,title:{text:"Realised"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:de,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:de.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"BMS Realised",data:ne},{name:"BNE Realised",data:re},{name:"BSA Realised",data:le},{name:"BTM Realised",data:ie},{name:"FP Realised",data:oe}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};I(ue);var pe=[],he=[],me=[],ge=[],xe=[],ve=[],fe=[],be=[],je=[],ye=[],Se=[],Ne=[],Re=[],Ie=[];console.log("in line 136-------"),console.log(t.locFTERecRev),null===(l=t.locFTERecRev)||void 0===l||l.map((function(e){switch(Re.push(e.qrtr),e.category){case"Total":pe.push(parseInt(e.planned)),he.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"UK":me.push(parseInt(e.planned)),ge.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"US":xe.push(parseInt(e.planned)),ve.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"India":fe.push(parseInt(e.planned)),be.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Germany":je.push(parseInt(e.planned)),ye.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Canada":Se.push(parseInt(e.planned)),Ne.push(parseInt(e.realised)),Ie.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}}));var Ce={title:{text:"FTE Planned, Realised/Closed Quarter Trend By Country"},yAxis:{tickInterval:1e7,title:{text:"Number of Employees"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:Ie,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:Ie.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Total Planned",data:pe},{name:"Total Realised",data:he},{name:"UK Planned",data:me},{name:"UK Realised",data:ge},{name:" US Planned",data:xe},{name:"US Realised",data:ve},{name:"India Planned",data:fe},{name:" India Realised",data:be},{name:"Germany Planned",data:je},{name:"Germany Realised",data:ye},{name:"Canada Planned",data:Se},{name:"Canada Realised",data:Ne}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};D(Ce);var ke=[],we=[],Ze=[],Ae=[],_e=[],Te=[],Pe=[],De=[],Le=[],qe=[],Fe=[],Ee=[],Me=[],Ue=[];console.log("in line 136-------"),console.log(t.locSUBKRecRev),null===(i=t.locSUBKRecRev)||void 0===i||i.map((function(e){switch(Me.push(e.qrtr),e.category){case"Total":ke.push(parseInt(e.planned)),we.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"UK":Ze.push(parseInt(e.planned)),Ae.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"US":_e.push(parseInt(e.planned)),Te.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"India":Pe.push(parseInt(e.planned)),De.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Germany":Le.push(parseInt(e.planned)),qe.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5));break;case"Canada":Fe.push(parseInt(e.planned)),Ee.push(parseInt(e.realised)),Ue.push(e.qrtr.substring(0,4)+"-"+e.qrtr.substring(5))}}));var Be={title:{text:"SUBK Planned, Realised/Closed Quarter Trend By Country"},yAxis:{tickInterval:1e7,title:{text:"Number of Employees"}},tooltip:{formatter:function(){var e;return"<b>"+this.x+"</b><br/>"+this.series.name+": "+(null===(e=this.y)||void 0===e?void 0:e.toLocaleString("en-US"))+"<br/>"}},xAxis:{type:"category",categories:Ue,crosshair:!0,title:{text:"Quater"},accessibility:{rangeDescription:Ue.toString()}},legend:{align:"center",verticalAlign:"bottom",layout:"horizontal"},plotOptions:{series:{label:{connectorAllowed:!1}}},series:[{name:"Total Planned",data:ke},{name:"Total Realised",data:we},{name:"UK Planned",data:Ze},{name:"UK Realised",data:Ae},{name:" US Planned",data:_e},{name:"US Realised",data:Te},{name:"India Planned",data:Pe},{name:" India Realised",data:De},{name:"Germany Planned",data:Le},{name:"Germany Realised",data:qe},{name:"Canada Planned",data:Fe},{name:"Canada Realised",data:Ee}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}};A(Be)},U=function(){var e,n,r,l="cust"===s.viewby?["Rank","Project","Planned","Realised","GM","GM%"]:["Rank","Customer","Realised"],i=[];console.log(null===t||void 0===t||null===(e=t.custRecRevTable)||void 0===e?void 0:e.filter((function(e){return"0"==e.lvl})));var o=null===t||void 0===t||null===(n=t.custRecRevTable)||void 0===n?void 0:n.filter((function(e){return"0"!==e.lvl})),c=null===o||void 0===o?void 0:o.reduce((function(e,t){var n=t.cat,r=(0,se.Z)(t,ae);return e[n]||(e[n]="cust"==s.viewby?[{gm:"GM",lvl:"0",cat:"Category",gmperc:"GM%",planned:"Planned",id:-1,realised:"Realised",customer:"Project"}]:[{lvl:"0",customer:"Customer",id:-1,realised:"Realised",cat:"Category"}]),e[n].push((0,a.Z)((0,a.Z)({},r),{},{cat:n})),e}),{});console.log(c);var u=c&&(null===(r=Object.keys(c))||void 0===r?void 0:r.map((function(e,t){var s;console.log(e);var a=null===(s=c[e])||void 0===s?void 0:s.map((function(s,a){var n=[];return console.log(l,"headerTitles"),l.forEach((function(e,r){console.log(s.cat,e,"d[cat]"),-1==s.id?(i.push(Object.keys(s).find((function(t){return s[t]===e}))),n.push((0,w.jsx)("th",{style:{textAlign:"center",backgroundColor:"#f4f4f4",position:"sticky",top:0},children:e},"header-".concat(r))),console.log(i,e)):"Customer"===l[r]?n.push((0,w.jsx)("td",{style:{textAlign:r>1?"right":"Rank"===l[r]?"center":"left"},children:s[i[r]]},"row-".concat(t,"-").concat(a,"-").concat(r))):n.push((0,w.jsx)("td",{style:{textAlign:r>1?"right":"Rank"===l[r]?"center":"left"},children:"Rank"===l[r]?a:"Project"!==l[r]?(r>1?"$":"")+parseInt(s[i[r]]).toLocaleString("en-US"):(r>1?"$":"")+s[i[r]]},"row-".concat(t,"-").concat(a,"-").concat(r)))})),console.log(n),console.log(c[e]),(0,w.jsxs)(d.Fragment,{children:[0===a?(0,w.jsx)("tr",{children:(0,w.jsx)("td",{style:{textAlign:"center",backgroundColor:"#f4f4f4",fontWeight:"bold"},colSpan:l.length,children:e})}):null,(0,w.jsx)("tr",{children:n})]},"table-".concat(t,"-row-").concat(a))}));return(0,w.jsx)("table",{className:"mt-3 ml-2 col-5 table table-bordered custtable",children:(0,w.jsx)("tbody",{children:a})},"table-".concat(t))})));E(u)};return(0,w.jsx)("div",{className:"col-12",children:0!=Object.entries(t).length?(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"col-6 mt-2 customCard card graph",children:(0,w.jsx)(B,{chartData:i})}),(0,w.jsx)("div",{className:"col-6 mt-2 customCard card graph",children:(0,w.jsx)(B,{chartData:p})})]}),(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"col-6 mt-2  customCard card graph",children:(0,w.jsx)(B,{chartData:x})}),(0,w.jsx)("div",{className:"col-6 mt-2  customCard card graph",children:(0,w.jsx)(B,{chartData:j})})]}),(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"col-6 mt-2  customCard card graph",children:(0,w.jsx)(B,{chartData:R})}),(0,w.jsx)("div",{className:"col-6 mt-2  customCard card graph",children:(0,w.jsx)(B,{chartData:P})})]}),(0,w.jsxs)("div",{className:"col-12 row",children:[(0,w.jsx)("div",{className:"col-6 mt-2  customCard card graph",children:(0,w.jsx)(B,{chartData:Z})}),(0,w.jsxs)("div",{className:"col-6 mt-2  customCard card graph",style:{maxHeight:"401px",overflowY:"auto"},children:[(0,w.jsx)("b",{className:"mt-3 ml-3",style:{fontSize:"15px"},children:"cust"==s.viewby?"Project Realised Revenue Quarter Trend By Top Projects":"Customer Realised Revenue Quarter Trend By Top Customers "}),(0,w.jsx)("div",{className:"col-12",children:(0,w.jsx)("div",{className:"row",children:F})})]})]})]}):""})};function re(e){var t=e.effortvar,s=(0,d.useState)([]),a=(0,n.Z)(s,2),r=a[0],l=a[1];return(0,d.useEffect)((function(){var e=(null===t||void 0===t?void 0:t.length)>0&&t.map((function(e){var t=["id","prj_status","ct_term","ct_title","prj_compltn","pln_efforts","eac_efforts","pln_gm","eac_gm","critical_risks","high_risks"],s=[],a=Number(e.var_gm),n=Number(e.var_efforts);return["project_name","prj_pm_name","var_efforts","var_gm"].forEach((function(r){console.log(typeof e[r],"-----type of data keys"),!t.includes(r)&&s.push(e.id<0?(0,w.jsx)("th",{style:{textAlign:"center",position:"sticky",top:0},children:e[r]},r):"project_name"==r?(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",style:{minWidth:"150px"},children:(0,w.jsxs)("div",{className:" phTableLegends",style:{fontSize:"13px"},children:[e.var_gm<=5&&e.var_efforts<=5?(0,w.jsx)("div",{className:"legendContainer align left",children:(0,w.jsxs)("div",{className:"legend green",children:[(0,w.jsx)("div",{className:"legendCircle",title:"Risk"}),(0,w.jsx)("div",{className:"legendTxt"})]})}):e.var_gm>=10||e.var_efforts>=10?(0,w.jsx)("div",{className:"legendContainer align left",children:(0,w.jsxs)("div",{className:"legend red",children:[(0,w.jsx)("div",{className:"legendCircle",title:"Risk"}),(0,w.jsx)("div",{className:"legendTxt"})]})}):(0,w.jsx)("div",{className:"legendContainer align left",children:(0,w.jsxs)("div",{className:"legend amber",children:[(0,w.jsx)("div",{className:"legendCircle",title:"Risk"}),(0,w.jsx)("div",{className:"legendTxt"})]})}),(0,w.jsx)(z.rU,{style:{whiteSpace:"nowrap !important",overflow:"hidden",textOverflow:"ellipsis"},"data-toggle":"tooltip",title:e[r],to:"/project/Overview/:".concat(e.id),target:"_blank",children:e[r]})]})}):"var_efforts"==r?(0,w.jsx)("td",{style:{fontSize:"13px"},children:e.var_efforts<=5?(0,w.jsx)("div",{style:{color:"green",textAlign:"right"},children:n.toFixed(2)}):e.var_efforts>=10?(0,w.jsx)("div",{style:{color:"red",textAlign:"right"},children:n.toFixed(2)}):(0,w.jsx)("div",{style:{color:"#ffbf00",textAlign:"right"},children:n.toFixed(2)})}):"var_gm"==r?(0,w.jsx)("td",{children:e.var_gm<=5?(0,w.jsxs)("div",{className:"mr-1",style:{color:"green",textAlign:"right"},children:[a.toFixed(2),console.log(typeof Number(e.var_gm),"#####type")]}):e.var_gm>=10?(0,w.jsx)("div",{style:{color:"red",textAlign:"right"},children:a.toFixed(2)}):(0,w.jsx)("div",{style:{color:"#ffbf00",textAlign:"right"},children:a.toFixed(2)})}):(0,w.jsx)("td",{className:"ellipsis","data-toggle":"tooltip",style:{minWidth:"120px"},title:e[r],children:e[r]},r))})),(0,w.jsx)("tr",{style:{fontSize:"13px"},children:s},e.id)}));l(e)}),[t]),(0,w.jsxs)("div",{className:"col-md-12  customCard card graph darkHeader",children:[(0,w.jsx)("div",{className:"group-content row",children:(0,w.jsxs)("div",{className:"legendContainer",children:[(0,w.jsx)("span",{className:"font-weight-bold",children:"Efforts/GM Variance :"}),(0,w.jsx)("div",{className:"legend green",children:(0,w.jsx)("div",{className:"legendTxt t",children:"10 or Above 10"})}),(0,w.jsx)("div",{className:"legend amber",children:(0,w.jsx)("div",{className:"legendTxt t",children:"Btw 5 and 10 "})}),(0,w.jsx)("div",{className:"legend red",children:(0,w.jsx)("div",{className:"legendTxt t",children:"5 or below 5"})}),(0,w.jsxs)("div",{className:"legendContainer",children:[(0,w.jsx)("span",{className:"font-weight-bold",children:"Risk :"}),(0,w.jsxs)("div",{className:"legend red",children:[(0,w.jsx)("div",{className:"legendCircle "}),(0,w.jsx)("div",{className:"legendTxt",children:"Critical above 1 or High above 5"})]}),(0,w.jsxs)("div",{className:"legend amber",children:[(0,w.jsx)("div",{className:"legendCircle"}),(0,w.jsx)("div",{className:"legendTxt",children:"2-5 High or 1 Critical "})]}),(0,w.jsxs)("div",{className:"legend green",children:[(0,w.jsx)("div",{className:"legendCircle "}),(0,w.jsx)("div",{className:"legendTxt",children:"No Critical and High below 2 "})]})]})]})}),(0,w.jsx)("div",{className:"col-8 pl-2 pr-2 darkHeader",style:{maxHeight:"500px",overflowY:"auto"},children:(0,w.jsx)("table",{className:"table table-bordered softSummry csattable",children:(0,w.jsx)("thead",{style:{fontSize:"13px"},children:r})})})]})}function le(){var e,t,s,r,l,i=x.N.baseUrl,o=(0,d.useState)({}),c=(0,n.Z)(o,2),u=c[0],h=c[1],m=(0,d.useState)([]),g=(0,n.Z)(m,2),v=(g[0],g[1]),f=(0,d.useState)([]),b=(0,n.Z)(f,2),j=(b[0],b[1]),y=(0,d.useState)([]),S=(0,n.Z)(y,2),N=(S[0],S[1]),R=(0,d.useState)(),I=(0,n.Z)(R,2),C=(I[0],I[1],(0,d.useState)([])),k=(0,n.Z)(C,2),A=k[0],_=k[1],T=(0,d.useState)([]),P=(0,n.Z)(T,2),D=P[0],L=P[1],q=(0,d.useState)([]),F=(0,n.Z)(q,2),E=F[0],M=F[1],B=(0,d.useState)([]),z=(0,n.Z)(B,2),V=z[0],J=z[1],ee=(0,d.useState)([]),se=(0,n.Z)(ee,2),ae=se[0],le=se[1],ie=(0,d.useState)([]),oe=(0,n.Z)(ie,2),ce=oe[0],de=oe[1],ue=(0,d.useState)([]),pe=(0,n.Z)(ue,2),he=pe[0],me=pe[1],ge=(0,d.useState)([]),xe=(0,n.Z)(ge,2),ve=xe[0],fe=xe[1],be=(0,d.useState)(!1),je=(0,n.Z)(be,2),ye=je[0],Se=je[1],Ne=(0,d.useState)({}),Re=(0,n.Z)(Ne,2),Ie=Re[0],Ce=Re[1],ke=(0,d.useState)("-1"),we=(0,n.Z)(ke,2),Ze=we[0],Ae=we[1],_e=(0,d.useState)({}),Te=(0,n.Z)(_e,2),Pe=Te[0],De=Te[1],Le=(0,d.useState)({}),qe=(0,n.Z)(Le,2),Fe=qe[0],Ee=qe[1],Me=localStorage.getItem("resId"),Ue=(0,d.useState)([]),Be=(0,n.Z)(Ue,2),Oe=Be[0],ze=Be[1],He=(0,d.useState)([]),$e=(0,n.Z)(He,2),We=$e[0],Qe=$e[1],Ke=(0,d.useState)([]),Ge=(0,n.Z)(Ke,2),Ye=Ge[0],Ve=Ge[1],Je=(0,d.useState)([]),Xe=(0,n.Z)(Je,2),et=Xe[0];Xe[1];(0,d.useEffect)((function(){var e,t=null===Oe||void 0===Oe||null===(e=Oe.find((function(e){return"Sales"===e.display_name})))||void 0===e?void 0:e.subMenus.find((function(e){return"Scorecard"===e.display_name})).userRoles,s=t?null!==t&&void 0!==t&&t.includes("690")?690:null!==t&&void 0!==t&&t.includes("641")?641:null!==t&&void 0!==t&&t.includes("930")?930:(null===t||void 0===t?void 0:t.includes("46"))&&46:null;Qe(s),nt((0,a.Z)((0,a.Z)({},at),{},{cslIds:641==s?Number(Me)+1:"-1",dpIds:690==s?Number(Me)+1:"-1"}))}),[Oe]),(0,d.useEffect)((function(){p().get(i+"/CommonMS/master/getMenus?loggedUserId=".concat(Me)).then((function(e){var t=e.data;ze(t)}))}),[]),console.log(We);var tt=(0,d.useState)({executives:"-2",isActive:!0,measures:"-1",isSearch:!0,from:"2023-10-01",duration:1,type:"cu",viewby:"se",cslIds:-1,dpIds:-1,customerId:-1,isIndividual:!1,key:Me,opptyActType:"-1"}),st=(0,n.Z)(tt,2),at=st[0],nt=st[1];return(0,d.useEffect)((function(){_(u.practRecRev),L(u.locRecRev),M(u.custCatRecRev),J(u.custRecRevTable),le(u.custRecRev),de(u.openOpptys),me(u.custContRecRev),fe(u.custContRecRevTable),Ce(u),De(u.locSUBKRecRev),Ee(u.locFTERecRev),Ve(u.effortvar)}),[u,A,D,E,V,ae,ce,he,ve,Ie,Pe,Fe,Ye]),(0,w.jsxs)("div",{className:"col-lg-12 col-md-12 col-sm-12 no-padding",children:[(0,w.jsx)(Z,{setScoreCardData:h,setscoreCardDataPayload:nt,scoreCardDataPayload:at,setqbrList:N,setrisk:j,scoreCradPermission:et,setcsat:v,setShowHistoricalTrend:Se,setcardSelector:Ae}),ye?(0,w.jsx)("div",{children:(0,w.jsx)(ne,{historicalTrendData:Ie,scoreCardDataPayload:at})}):(0,w.jsxs)("div",{children:[(Ze.includes("-1")||Ze.includes("1"))&&(null===(e=u.targets)||void 0===e?void 0:e.length)>0?(0,w.jsx)("div",{children:(0,w.jsx)(U,{scoreCardData:u})}):"",(0,w.jsxs)("div",{className:"col-12 mr-0 pr-0 row",style:{margin:"0px",padding:"0px"},children:[(0,w.jsx)("div",{className:"col-6 pl-0",children:(Ze.includes("-1")||Ze.includes("2"))&&(null===A||void 0===A?void 0:A.length)>0?(0,w.jsxs)("div",{children:[" ",(0,w.jsx)(O,{targetData:A,type:"Practice"})," "]}):""}),(0,w.jsx)("div",{className:"col-6 pr-0",children:(Ze.includes("-1")||Ze.includes("2"))&&(null===D||void 0===D?void 0:D.length)>0?(0,w.jsxs)("div",{children:[(0,w.jsx)(O,{targetData:D,type:"Location"})," "]}):""})]}),(0,w.jsxs)("div",{className:"col-12 mr-0 pr-0 row",style:{margin:"0px",padding:"0px"},children:[(0,w.jsx)("div",{className:"col-6 pl-0",children:(Ze.includes("-1")||Ze.includes("3"))&&(null===E||void 0===E?void 0:E.length)>0?(0,w.jsx)("div",{children:(0,w.jsx)(Q,{custRelRevCat:E})}):""}),(0,w.jsx)("div",{className:"col-6 pr-0",children:(Ze.includes("-1")||Ze.includes("3"))&&(null===V||void 0===V?void 0:V.length)>0&&(null===ae||void 0===ae?void 0:ae.length)>0?(0,w.jsx)("div",{children:(0,w.jsx)(K,{topCustomerByRealRev:V,cusRecRev:ae,scoreCardDataPayload:at})}):""})]}),(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(Ze.includes("-1")||Ze.includes("4"))&&(null===ve||void 0===ve?void 0:ve.length)>0?(0,w.jsxs)("div",{children:[(0,w.jsx)(Y,{custContRecRev:he,custContRecRevTable:ve,type:"Practice"})," "]}):""})}),(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(Ze.includes("-1")||Ze.includes("5"))&&((null===Fe||void 0===Fe?void 0:Fe.length)>0||(null===Pe||void 0===Pe?void 0:Pe.length)>0)?(0,w.jsxs)("div",{children:[(0,w.jsx)(X,{ftePlanByLoc:Fe,subKPlanByLoc:Pe})," "]}):""})}),(Ze.includes("-1")||Ze.includes("6"))&&(null===(t=u.custWOWRecRev)||void 0===t?void 0:t.length)>0?(0,w.jsx)(W,{scoreCardData:u}):"",(Ze.includes("-1")||Ze.includes("8"))&&(null===(s=u.csatProjList)||void 0===s?void 0:s.length)>0?(0,w.jsx)(H,{scoreCardData:u.csatProjList}):"",(Ze.includes("-1")||Ze.includes("9"))&&(null===(r=u.risks)||void 0===r?void 0:r.length)>0?(0,w.jsx)($,{risk:u.risks}):"",(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(Ze.includes("-1")||Ze.includes("10"))&&(null===(l=u.qbr)||void 0===l?void 0:l.length)>0?(0,w.jsx)(te,{qbrList:u.qbr}):""}),(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(Ze.includes("-1")||Ze.includes("9"))&&(null===Ye||void 0===Ye?void 0:Ye.length)>0?(0,w.jsx)(re,{effortvar:Ye}):""}),(0,w.jsx)("div",{className:"col-md-12 no-padding",children:(Ze.includes("-1")||Ze.includes("7"))&&(null===ce||void 0===ce?void 0:ce.length)>0?(0,w.jsx)(G,{openOpptys:ce}):""})]})]})}},11634:function(e,t,s){var a=s(64836);t.Z=void 0;var n=a(s(45649)),r=s(80184),l=(0,n.default)((0,r.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm-1 8V7c0-.55.45-1 1-1s1 .45 1 1v3h1.79c.45 0 .67.54.35.85l-2.79 2.79c-.2.2-.51.2-.71 0l-2.79-2.79c-.31-.31-.09-.85.36-.85H11zm5 7H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"}),"DownloadForOfflineRounded");t.Z=l}}]);
//# sourceMappingURL=4741.0a6b280c.chunk.js.map