"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5658],{79483:function(e,t,s){s.r(t);var r=s(4942),a=s(1413),o=s(29439),n=s(72426),c=s.n(n),i=s(72791),l=s(74569),d=s.n(l),u=s(11167),m=(s(47477),s(78820)),f=s(83854),v=(s(72572),s(14651)),h=s(70828),g=s(7692),p=s(34831),j=s(24745),x=s(80184);t.default=function(){var e,t,s=(0,i.useRef)([]),n=p.N.baseUrl,l=(0,i.useState)([{}]),N=(0,o.Z)(l,2),b=N[0],w=N[1],y=(0,i.useState)([{}]),S=(0,o.Z)(y,2),D=S[0],Z=S[1],_=(0,i.useState)([]),k=(0,o.Z)(_,2),C=k[0],A=k[1],E=(0,i.useState)([]),Y=(0,o.Z)(E,2),M=Y[0],R=Y[1],O=(0,i.useState)([]),T=(0,o.Z)(O,2),L=T[0],H=(T[1],(0,i.useState)([])),B=(0,o.Z)(H,2),J=B[0],U=(B[1],(0,i.useState)([])),F=(0,o.Z)(U,2),G=F[0],I=(F[1],(0,i.useState)([])),P=(0,o.Z)(I,2),z=P[0],Q=(P[1],(0,i.useState)(!1)),X=(0,o.Z)(Q,2),q=X[0],K=X[1],V=(0,i.useState)(!1),W=(0,o.Z)(V,2),$=W[0],ee=W[1],te=(0,i.useState)("0"),se=(0,o.Z)(te,2),re=se[0],ae=se[1],oe=(0,i.useState)([]),ne=(0,o.Z)(oe,2),ce=ne[0],ie=(ne[1],(0,i.useState)(!1)),le=(0,o.Z)(ie,2),de=le[0],ue=le[1],me=(0,i.useState)(!1),fe=(0,o.Z)(me,2),ve=fe[0],he=fe[1];console.log(ce);var ge=localStorage.getItem("resId"),pe=(0,i.useState)(new Date),je=(0,o.Z)(pe,2),xe=je[0];je[1],console.log(xe);var Ne={comments:"",reviewed_by:ge,reviewed_date:c()(xe).format("yyyy-MM-DD")};console.log(Ne);var be=(0,i.useState)(""),we=(0,o.Z)(be,2),ye=(we[0],we[1],(0,i.useState)(Ne)),Se=(0,o.Z)(ye,2),De=Se[0];Se[1],console.log(De);var Ze=(0,i.useState)({}),_e=(0,o.Z)(Ze,2),ke=_e[0],Ce=_e[1],Ae=(0,i.useRef)(null),Ee=function(){K(!0),Ae.current=new AbortController,d().get(n+"/accountingms/ErrorLogs/getErrorLogsUnread").then((function(e){for(var t=e.data,s=0;s<t.length;s++)t[s].SNo=s+1,t[s].createdAt=null==t[s].createdAt?"":c()(t[s].createdAt).format("YYYY-MM-DD HH:mm:ss");w([{procName:"Procedure",errorDesc:"Error Description",createdAt:"Created Date",reviewed_by:"Reviewed By",reviewed_date:"Reviewed Date",comments:"Comments"}].concat(t)),A(t),setTimeout((function(){K(!1)}),3e3),ee(!0),setTimeout((function(){ee(!1)}),2e3),Ce()})).catch((function(e){}))};(0,i.useEffect)((function(){Ee()}),[]);var Ye=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.errorDesc,children:e.errorDesc})},Me=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.procName,children:e.procName})},Re=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.createdAt,children:e.createdAt})};console.log(b);var Oe=function(e){L[0];return console.log(ke),(0,x.jsx)("div",{className:"ptTextarea-container",ref:function(e){s.current[0]=e},children:(0,x.jsx)("textarea",{rows:3,className:"cancel valid",id:"comments",name:"comments",onChange:function(t){!function(e,t){console.log(e),Ce((function(s){return(0,a.Z)((0,a.Z)({},s),{},(0,r.Z)({},t,e))}))}(t.target.value,e.id)}})})},Te=null===(e=Object.keys(C))||void 0===e?void 0:e.map((function(e,t){return(0,x.jsx)(u.sgG,{sortable:!0,body:"comments"==e&&Oe||"errorDesc"==e&&Ye||"procName"==e&&Me||"createdAt"==e&&Re,field:e,header:C[e]},e)}));(0,i.useEffect)((function(){b[0]&&A(JSON.parse(JSON.stringify(b[0])))}),[b]),(0,i.useEffect)((function(){d().get(n+"/accountingms/ErrorLogs/getErrorLogsRead").then((function(e){var t=e.data;console.log(t);for(var s=0;s<t.length;s++)t[s].SNo=s+1,t[s].createdAt=null==t[s].createdAt?"":c()(t[s].createdAt).format("DD-MM-YYYY HH:mm:ss"),t[s].reviewed_date=null==t[s].reviewed_date?"":c()(t[s].reviewed_date).format("DD-MM-YYYY");Z([{procName:"Procedure",errorDesc:"Error Description",createdAt:"Created Date",reviewedby:"Reviewed By",reviewed_date:"Reviewed Date",comments:"Comments"}].concat(t)),R(t),ee(!0),setTimeout((function(){ee(!1)}),100)})).catch((function(e){}))}),[]);var Le=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.errorDesc,children:e.errorDesc})},He=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.comments,children:e.comments})},Be=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.reviewedby,children:e.reviewedby})},Je=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.reviewed_date,children:e.reviewed_date})},Ue=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.procName,children:e.procName})},Fe=function(e){return(0,x.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e.createdAt,children:e.createdAt})},Ge=null===(t=Object.keys(M))||void 0===t?void 0:t.map((function(e,t){return(0,x.jsx)(u.sgG,{sortable:!0,body:"errorDesc"==e&&Le||"comments"==e&&He||"reviewedby"==e&&Be||"reviewed_date"==e&&Je||"procName"==e&&Ue||"createdAt"==e&&Fe,field:e,header:M[e]},e)}));(0,i.useEffect)((function(){D[0]&&R(JSON.parse(JSON.stringify(D[0])))}),[D]);var Ie=(0,i.useState)(""),Pe=(0,o.Z)(Ie,2);return Pe[0],Pe[1],console.log(ce),(0,x.jsxs)("div",{className:"col-md-12",children:[ve?(0,x.jsxs)("div",{className:"statusMsg success",children:[" ",(0,x.jsxs)("span",{className:"errMsg",children:[(0,x.jsx)(g.hXj,{size:"1.4em"})," \xa0 Comments Saved Successfully"]})]}):"",de?(0,x.jsx)("div",{className:"statusMsg error",children:(0,x.jsxs)("span",{className:"error-block",children:[(0,x.jsx)(m.CSE,{})," \xa0 No modifications to save"]})}):"",(0,x.jsxs)("div",{className:"pageTitle",children:[(0,x.jsx)("div",{className:"childOne"}),(0,x.jsx)("div",{className:"childTwo",children:(0,x.jsx)("h2",{children:"Error Logs"})}),(0,x.jsx)("div",{className:"childThree"})]}),(0,x.jsx)("br",{}),(0,x.jsxs)("div",{className:"col-md-12",children:[(0,x.jsxs)("div",{className:"form-check form-check-inline",children:[(0,x.jsx)("input",{className:"form-check-input",type:"radio",id:"read",checked:1==re,onChange:function(e){ae("1")}}),(0,x.jsx)("label",{htmlFor:"yes",children:"Read"})]}),(0,x.jsxs)("div",{className:"form-check form-check-inline",children:[(0,x.jsx)("input",{type:"radio",className:"form-check-input",id:"unread",checked:0==re,value:re,onChange:function(e){ae("0")}}),(0,x.jsx)("label",{htmlFor:"no",children:"Unread"})]})]}),(0,x.jsx)("br",{}),q?(0,x.jsx)("div",{className:"loaderBlock",children:(0,x.jsx)(f.Z,{handleAbort:function(){Ae.current&&Ae.current.abort(),K(!1)}})}):"",0==re?(0,x.jsx)(j.Z,{data:b,linkColumns:L,linkColumnsRoutes:J,dynamicColumns:Te,headerData:C,setHeaderData:A,rows:10}):$?(0,x.jsx)(f.Z,{setsearching:ee}):(0,x.jsx)(j.Z,{data:D,linkColumns:G,linkColumnsRoutes:z,dynamicColumns:Ge,headerData:M,setHeaderData:R,rows:10}),0==re?(0,x.jsx)("div",{className:"row",children:(0,x.jsxs)("div",{className:"col-md-12 btn-container center ",children:[(0,x.jsxs)("button",{className:"btn btn-primary mt-2 mb-2",onClick:function(){if(void 0==ke||null==ke||ke=={}||""==ke)ue(!0);else{console.log("231................................."),ue(!1);var e=[];Object.keys(ke).forEach((function(t){var s={};s.id=+t,s.reviewed_date=De.reviewed_date,s.reviewed_by=+De.reviewed_by,s.comments=ke[t],e.push(s)})),d()({method:"post",url:n+"/accountingms/ErrorLogs/updatecomments",data:e}).then((function(e){ue(!1),he(!0),setTimeout((function(){he(!1)}),3e3),Ee(),Ce(),console.log("success",e),window.location.reload()}))}},children:[(0,x.jsx)(v.CLo,{}),"Save"]}),(0,x.jsxs)("button",{className:"btn btn-primary mt-2 mb-2",onClick:function(){return function(){for(var e=document.getElementsByClassName("cancel"),t=0;t<e.length;t++)console.log(e[t]),console.log(e[t].id),console.log(e[t].value),e[t].value=null,ue(!1),he(!1),Ce()}()},children:[(0,x.jsx)(h.sQZ,{}),"Reset"]})]})}):""]})}}}]);
//# sourceMappingURL=5658.33dfebdb.chunk.js.map