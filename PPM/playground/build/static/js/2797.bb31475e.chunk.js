"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[2797,1634],{2797:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var a=s(29439),i=s(72791),n=s(74569),c=s.n(n),r=s(72426),o=s.n(r),l=s(1063),d=s(78820),u=s(47477),p=s(7692),m=s(34831),f=(s(41980),s(39122),s(31896),s(81975),s(11634)),h=s(93433),x=s(4942),j=s(1413),v=s(59513),_=s.n(v),N=s(78983),g=(s(59962),s(63521)),b=s(16856),y=s(32125),S=s(80184);function D(e){var t=e.clickButtonPopUp,s=e.setValueID,n=(e.valueID,e.sethideSelectbutton),c=e.hideSelectbutton,r=(e.setprolificspartId,e.prolificspartId),o=e.setClickButtonPopUp,l=e.setFormEditData,u=(e.formEditData,e.handleAddEmail),m=(e.details,e.handleChange,e.type),f=(e.onChangeState1,e.finalState1),x=e.setDisplayTextEmails,v=e.setProlificsparticipantdata,_=e.prolificsparticipantdata,D=e.issueDetails,Z=e.editedData,P=e.setValue,M=e.value,w=e.displayTextEmails,I=(0,i.useState)(null),k=(0,a.Z)(I,2),E=k[0],A=k[1],q=(0,i.useState)(!1),T=(0,a.Z)(q,2),R=T[0],F=T[1],Y=(0,i.useRef)([]),B=(0,i.useState)([]),Q=(0,a.Z)(B,2),U=Q[0];Q[1];(0,i.useEffect)((function(){}),[M]),(0,i.useEffect)((function(){L()}),[M]);var O=function(){o(!1)};(0,i.useEffect)((function(){L()}),[f]);var L=function e(){if(void 0===M||null===M)return null;A((function(){return Object.keys(M).map((function(t,s){return(0,S.jsxs)("div",{children:[(0,S.jsx)("input",{type:"checkbox",onClick:function(e){!function(e,t){var s=w;if(e.target.checked)s.push(t);else{var a=s.indexOf(t);s.splice(a,1)}x(s)}(e,M[t])}}),M[t],(0,S.jsx)(d.YK6,{onClick:function(){delete M[t],e()}})]},s)}))}))},z=(0,i.useState)(!(null===Z||void 0===Z||!Z.prolificsParticipants)),V=(0,a.Z)(z,2),K=V[0],G=V[1],H=function(){l((function(e){return(0,j.Z)((0,j.Z)({},e),{},{prolifics_participants:null})}))};return(0,S.jsxs)("div",{children:[(0,S.jsxs)(N.Tk,{size:"sm",visible:t,onClose:function(){o(!1)},children:[(0,S.jsx)(N.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,S.jsx)(N.fl,{children:(0,S.jsx)("span",{className:"ft16",children:"Prolifics Participants"})})}),(0,S.jsxs)(N.sD,{children:[1==R?(0,S.jsxs)("div",{className:"statusMsg error",children:[" ",(0,S.jsx)(d.CSE,{})," Please Provide Resource"]}):"",(0,S.jsxs)("div",{className:"group-content row",children:[(0,S.jsxs)("div",{className:" col-md-12 row mb-2",children:[(0,S.jsx)("div",{className:"col-md-8",children:(0,S.jsx)("div",{className:"autocomplete",ref:function(e){Y.current[0]=e},children:(0,S.jsx)("div",{className:"autoComplete-container",children:(0,S.jsx)(g.ReactSearchAutocomplete,{items:D,type:"Text",name:"prolifics_participants",id:"prolifics_participants",placeholder:"Enter Resource Name",issueDetails:D,className:"AutoComplete",onClear:H,onSelect:function(e){v((function(t){return(0,j.Z)((0,j.Z)({},t),{},{prolifics_participants:e})})),l((function(t){return(0,j.Z)((0,j.Z)({},t),{},{prolifics_participants:e.id})}))},showIcon:!1})})})}),(0,S.jsxs)("button",{type:"submit",className:"btn btn-primary col-4",onClick:function(){!function(){var e=_.prolifics_participants?_.prolifics_participants.name:void 0;if((0,y.Z)(Y))F(!0);else{F(!1),n(!1),u();var t=_.prolifics_participants?_.prolifics_participants.id:void 0;P((function(t){return[].concat((0,h.Z)(t),[e])})),s((function(e){return[].concat((0,h.Z)(e),[t])})),L()}}()},title:"Add",children:[(0,S.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"}),(0,S.jsx)(b.LkC,{})," Add"]})]}),"edit"==m?(0,S.jsxs)("div",{className:"row",children:[E,(null===Z||void 0===Z?void 0:Z.prolificsParticipants)&&(null===Z||void 0===Z?void 0:Z.prolificsParticipants.split(",").map((function(e,t){var s="checkbox".concat(t);return(0,S.jsxs)("label",{className:"checkbox-container",children:[(0,S.jsx)("input",{type:"checkbox",id:s,checked:!0,onChange:null}),e.trim(),(0,S.jsx)("span",{className:"checkmark"})]},t)})))]}):(0,S.jsxs)("div",{className:"row",children:[E,w.length>0?(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("label",{className:"checkbox-container",children:[(0,S.jsx)("input",{type:"checkbox",id:"checkbox1",checked:K,onChange:function(){G((function(e){return!e}))}}),(0,S.jsx)("span",{className:"checkmark"})]})}):""]}),(0,S.jsx)("div",{className:"col-md-1"}),"edit"==m?(0,S.jsxs)("div",{children:[" ",(0,S.jsxs)("button",{className:" col-md-4 btn btn-primary",onClick:O,title:"Select",children:[(0,S.jsx)(p.jC8,{})," Select"]})," "]}):(0,S.jsxs)("button",{className:" col-md-4 btn btn-primary",onClick:O,disabled:c,title:"Select",children:[(0,S.jsx)(p.jC8,{})," Select"]})]})]})]}),(0,S.jsx)(C,{prolificspartId:r,storeprolificparticipantid:U})]})}var Z=s(56355);function C(e){var t,s,n=e.buttonPopups,r=(e.documentId,e.setDcoumentId,e.setButtonPopups),l=e.customerId,u=(e.storeprolificparticipantid,e.issueDetails),p=(e.editId,e.type),f=(e.data,e.editedData),v=(e.setEditedData,e.setAddmsg),C=e.selectedId,P=e.setEditAddmsg,M=e.setData,w=m.N.baseUrl,I=function(){c().get(w+"/customersms/Qbr/getQbrDetails?cid=".concat(l)).then((function(e){for(var t=e.data,s=0;s<t.length;s++)t[s].SNo=s+1;for(var a=0;a<t.length;a++)t[a].qbr_dt=null==t[a].qbr_dt?"":o()(t[a].qbr_dt).format("DD-MMM-YYYY"),t[a].presentation_dt=null==t[a].presentation_dt?"":o()(t[a].presentation_dt).format("DD-MMM-YYYY");M([{SNo:"S.No",qbr_dt:"QBR Date",leadPresenter:"Lead Presenter",prolificsParticipants:"Prolifics Participants",customerParticipants:"Customer Participant",presentation_dt:"Presentation Date",meeting_notes:"Meeting Notes & Next Steps",doc_id:"Presentation File",Action:"Action"}].concat(t))}))};(0,i.useEffect)((function(){I()}),[]);var k=(0,i.useState)([]),E=(0,a.Z)(k,2),A=E[0],q=E[1],T=(0,i.useState)(0),R=(0,a.Z)(T,2),F=R[0],Y=R[1],B=(0,i.useState)(null),Q=(0,a.Z)(B,2),U=Q[0],O=(Q[1],(0,i.useState)(null)),L=(0,a.Z)(O,2),z=L[0],V=L[1],K=function(e){q(e.target.files[0])},G=(0,i.useState)(f),H=(0,a.Z)(G,2),J=H[0],X=H[1],W=(0,i.useState)(null),$=(0,a.Z)(W,2),ee=($[0],$[1],(0,i.useState)()),te=(0,a.Z)(ee,2),se=te[0],ae=te[1],ie=(0,i.useState)(null),ne=(0,a.Z)(ie,2),ce=ne[0],re=(ne[1],(0,i.useState)(0)),oe=(0,a.Z)(re,2),le=(oe[0],oe[1]),de=(0,i.useState)(!1),ue=(0,a.Z)(de,2),pe=ue[0],me=ue[1],fe=(0,i.useRef)([]),he=(0,i.useState)(!1),xe=(0,a.Z)(he,2),je=xe[0],ve=xe[1],_e=(0,i.useState)({}),Ne=(0,a.Z)(_e,2),ge=Ne[0],be=Ne[1],ye=(0,i.useState)([{}]),Se=(0,a.Z)(ye,2),De=Se[0],Ze=Se[1],Ce=(0,i.useState)(!1),Pe=(0,a.Z)(Ce,2),Me=Pe[0],we=Pe[1],Ie=(0,i.useState)({prolifics_participants:""}),ke=(0,a.Z)(Ie,2),Ee=ke[0],Ae=(ke[1],function(){ve(!0),we(!0)}),qe=function(e){var t=e.target,s=(t.id,t.name),a=t.value;X((function(e){return(0,j.Z)((0,j.Z)({},e),{},(0,x.Z)({},s,a))}))},Te=(0,i.useState)({}),Re=(0,a.Z)(Te,2),Fe=Re[0],Ye=Re[1],Be=(0,i.useState)([]),Qe=(0,a.Z)(Be,2),Ue=Qe[0],Oe=Qe[1],Le=(0,i.useState)([]),ze=(0,a.Z)(Le,2),Ve=ze[0],Ke=ze[1];(0,i.useEffect)((function(){}),[]),(0,i.useEffect)((function(){}),[C]),(0,i.useEffect)((function(){}),[De]);var Ge=(0,i.useState)([]),He=(0,a.Z)(Ge,2),Je=He[0],Xe=He[1],We=(0,i.useState)([]),$e=(0,a.Z)(We,2),et=$e[0],tt=$e[1],st=localStorage.getItem("resId"),at=(null===J||void 0===J?void 0:J.prolificsParticipants)||[],it=Array.isArray(et)?et:[],nt=[at].concat((0,h.Z)(it)).join(","),ct=(null===f||void 0===f?void 0:f.prolifics_participants)||[],rt=(it=Array.isArray(et)?et:[],[ct].concat((0,h.Z)(it)).join(","),null===(t=Je.prolifics_participants)||void 0===t||t.id,(null===f||void 0===f?void 0:f.prolifics_participants)+","+Ve),ot=(null===(s=Je.prolifics_participants)||void 0===s||s.id,Ve.join(",")),lt=function(){X((function(e){return(0,j.Z)((0,j.Z)({},e),{},{leadPresenterID:""})}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(N.Tk,{size:"xs",backdrop:"static",visible:n,onClose:function(){r(!1)},children:[(0,S.jsx)(N.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,S.jsx)(N.fl,{children:"add"==p?(0,S.jsx)("span",{className:"ft16",children:" Add QBR"}):(0,S.jsx)("span",{className:"ft16",children:" Edit QBR"})})}),(0,S.jsxs)(N.sD,{children:[pe?(0,S.jsx)("div",{className:"statusMsg error",children:(0,S.jsxs)("span",{className:"error-block",children:[(0,S.jsx)(d.CSE,{})," \xa0 Please select the valid values for highlighted fields"]})}):"",(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2 ",children:[(0,S.jsxs)("label",{className:"col-4",htmlFor:"Date",children:["QBR Date",(0,S.jsx)("span",{className:"error-text",children:"\xa0\xa0*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 textfield",children:(0,S.jsx)("div",{className:"datepicker",ref:function(e){fe.current[0]=e},children:"add"==p?(0,S.jsx)(_(),{name:"qbr_dt",selected:se,id:"qbr_dt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"err cancel",dateFormat:"dd-MMM-yyyy",onChange:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},(0,x.Z)({},"qbr_dt",o()(e).format("yyyy-MM-DD")))})),ae(e)},onKeyDown:function(e){},autoComplete:"false"}):(0,S.jsx)(_(),{name:"qbr_dt",selected:ce,id:"qbr_dt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"err cancel",value:null===J||void 0===J?void 0:J.qbr_dt,dateFormat:"dd-MMM-yyyy",onChange:function(e){var t=o()(e).format("DD-MMM-yyyy");X((function(e){return(0,j.Z)((0,j.Z)({},e),{},{qbr_dt:t})}))},onKeyDown:function(e){},autoComplete:"false"})})})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",children:[(0,S.jsxs)("label",{className:"col-4",children:["Lead Presenter",(0,S.jsx)("span",{className:"error-text",children:"\xa0\xa0*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"autocomplete",ref:function(e){fe.current[1]=e},children:"add"==p?(0,S.jsx)("div",{className:"autoComplete-container",children:(0,S.jsx)(g.ReactSearchAutocomplete,{items:u,type:"Text",name:"lead_presenter",id:"lead_presenter",placeholder:"Type minimum 3 Characters",issueDetails:u,getData:I,onClear:lt,className:"AutoComplete",onSelect:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},{leadPresenterID:e.id})}))},showIcon:!1})}):(0,S.jsx)("div",{className:"autoComplete-container",children:(0,S.jsx)(g.ReactSearchAutocomplete,{items:u,type:"Text",name:"lead_presenter",id:"lead_presenter",placeholder:"Type minimum 3 Characters",issueDetails:u,getData:I,onClear:lt,className:"AutoComplete",onSelect:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},{leadPresenterID:e.id})}))},inputSearchString:null===f||void 0===f?void 0:f.leadPresenter,showIcon:!1})})})})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",children:[(0,S.jsxs)("label",{className:"col-4",htmlFor:"",children:["Prolifics Participants",(0,S.jsx)("span",{className:"error-text"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),"add"==p?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"autocomplete",children:(0,S.jsx)("input",{type:"text",placeholder:"Enter Resource Name",autoComplete:"off",required:!0,disabled:!0,value:Ue})})}),(0,S.jsx)("div",{className:"col-1 p-0",children:(0,S.jsxs)("button",{className:"btn",children:[" ",(0,S.jsx)(b.Gpi,{onClick:function(){Ae()},title:"Edit"})]})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"autocomplete",children:(0,S.jsx)("input",{type:"text",autoComplete:"off",placeholder:"Enter Resource Name",required:!0,disabled:!0,value:nt})})}),(0,S.jsx)("div",{className:"col-1 p-0",children:(0,S.jsx)("button",{className:"btn",children:(0,S.jsx)(b.Gpi,{onClick:function(){Ae()},title:"Edit"})})})]})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",children:[(0,S.jsxs)("label",{className:"col-4",htmlFor:"customer_participants",children:["Customer Participant",(0,S.jsx)("span",{className:"error-text"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 textfield",children:(0,S.jsx)("div",{className:"autocomplete",children:"add"==p?(0,S.jsx)("div",{className:"autoComplete-container",children:(0,S.jsx)(g.ReactSearchAutocomplete,{items:u,type:"Text",name:"customer_participants",id:"customer_participants",placeholder:"Type minimum 3 Characters",issueDetails:u,getData:I,className:"AutoComplete",onSelect:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},{customer_participants:e.id})}))},showIcon:!1})}):(0,S.jsx)("div",{className:"autoComplete-container",children:(0,S.jsx)(g.ReactSearchAutocomplete,{items:u,type:"Text",name:"customer_participants",id:"customer_participants",placeholder:"Type minimum 3 Characters",issueDetails:u,getData:I,onClear:function(){X((function(e){return(0,j.Z)((0,j.Z)({},e),{},{customerParticipantsID:""})}))},className:"AutoComplete",onSelect:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},{customerParticipantsID:e.id})}))},inputSearchString:null===f||void 0===f?void 0:f.customerParticipants,showIcon:!1})})})})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",children:[(0,S.jsxs)("label",{className:"col-4",htmlFor:"Date",children:["Presentation Date",(0,S.jsx)("span",{className:"error-text"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 textfield",children:"add"==p?(0,S.jsx)(_(),{name:"presentation_dt",selected:z,id:"presentation_dt",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"err cancel",dateFormat:"dd-MMM-yyyy",onChange:function(e){X((function(t){return(0,j.Z)((0,j.Z)({},t),{},(0,x.Z)({},"presentation_dt",o()(e).format("yyyy-MM-DD")))})),V(e)},onKeyDown:function(e){},autoComplete:"false"}):(0,S.jsx)(_(),{name:"presentation_dt",selected:U,id:"presentation_dt",value:null===J||void 0===J?void 0:J.presentation_dt,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"err cancel",dateFormat:"dd-MMM-yyyy",onChange:function(e){var t=o()(e).format("DD-MMM-yyyy");X((function(e){return(0,j.Z)((0,j.Z)({},e),{},{presentation_dt:t})}))},onKeyDown:function(e){},autoComplete:"false"})})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",id:"UploadDocument",children:[(0,S.jsx)("label",{className:"col-4",htmlFor:"updateDocument",children:"Upload Documents"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:"add"==p?(0,S.jsx)("input",{type:"file",name:"file",className:"fileUpload unique1 form-control",id:"file",onChange:K},F):(0,S.jsx)("input",{type:"file",name:"doc_id",className:"fileUpload unique1 form-control",id:"doc_id",onChange:K},F)}),(0,S.jsxs)("div",{className:"col-12",children:[(0,S.jsx)("div",{className:"col-5",children:" "}),(0,S.jsx)("div",{className:"col-7",style:{float:"right"},children:(0,S.jsx)("span",{style:{color:"red",fontSize:"12px"},children:"Supported types jpg, jpeg, xlsx, docx, txt, pdf"})})]})]})}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group row mb-2",children:[(0,S.jsx)("label",{className:"col-4",htmlFor:"",children:"Meeting Notes & Next Steps"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:"add"==p?(0,S.jsx)("textarea",{type:"meeting_notes",name:"meeting_notes",id:"meeting_notes",onChange:function(e){return qe(e)}}):(0,S.jsx)("textarea",{type:"meeting_notes",name:"meeting_notes",id:"meeting_notes",defaultValue:null===f||void 0===f?void 0:f.meeting_notes,onChange:function(e){return X((function(t){return(0,j.Z)((0,j.Z)({},t),{},(0,x.Z)({},"meeting_notes",e.target.value))}))}})})]})}),(0,S.jsx)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:"add"==p?(0,S.jsxs)("button",{className:"btn btn-primary ",title:"Save",onClick:function(){var e=(0,y.Z)(fe);1==e&&me(!0),e||c().postForm(w+"/customersms/Qbr/SaveAndUpload?loggedUserId=".concat(st,"&fileRevision=1.0"),{file:A,data:JSON.stringify({customer_id:l,qbr_dt:J.qbr_dt,lead_presenter:J.leadPresenterID,prolifics_participants:ot,customer_participants:J.customer_participants,presentation_dt:J.presentation_dt,doc_id:J.doc_id,meeting_notes:J.meeting_notes})},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){I(),le(),r(!1),v(!0),setTimeout((function(){v(!1)}),3e3),Y((function(e){return e+1}))}))},children:[(0,S.jsx)(Z.TvB,{}),"Save"]}):(0,S.jsxs)("button",{className:"btn btn-primary ",title:"Save",onClick:function(){if((0,y.Z)(fe))me(!0);else{var e=o()(J.qbr_dt).format("yyyy-MM-DD"),t=o()(J.presentation_dt).format("yyyy-MM-DD");c().postForm(w+"/customersms/Qbr/SaveAndUpload?loggedUserId=".concat(st,"&fileRevision=1.0"),{file:A.length<0?"":A,data:JSON.stringify({id:J.id,customer_id:l.toString(),qbr_dt:""==e||null==e||void 0==e?J.qbr_dt:e,lead_presenter:""==J.leadPresenterID||null==J.leadPresenterID?f.lead_presenter:J.leadPresenterID,prolifics_participants:rt,customer_participants:""==J.customerParticipantsID||void 0==J.customerParticipantsID||null==J.customerParticipantsID?f.customer_participants:J.customerParticipantsID,presentation_dt:""==t||null==t||void 0==t||"Invalid date"==t?J.presentation_dt:t,doc_id:f.doc_id,meeting_notes:""==J.meeting_notes||null==J.meeting_notes?f.meetingNotes:J.meeting_notes})},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){I(),le(),r(!1),P(!0),setTimeout((function(){P(!1)}),3e3)}))}},children:[(0,S.jsx)(Z.TvB,{}),"Save"]})})]})]}),je?(0,S.jsx)(D,{setprolificspartId:Ye,prolificspartId:Fe,type:p,editedData:f,clickButtonPopUp:je,setFormEditData:X,formEditData:J,setClickButtonPopUp:ve,handleChange:qe,handleAddEmail:function(){var e=ge||[];e[Object.keys(e).length]=Ee.prolifics_participants,be(e),Ze([].concat((0,h.Z)(De),[{prolifics_participants:""}]))},addList1:De,setAddList1:Ze,finalState1:ge,issueDetails:u,getData:I,setDisplayTextEmails:tt,displayTextEmails:et,hideSelectbutton:Me,sethideSelectbutton:we,setProlificsparticipantdata:Xe,prolificsparticipantdata:Je,setValue:Oe,setValueID:Ke,valueID:Ve,value:Ue}):""]})}var P=s(38262);var M=function(e){var t,s=e.customerId,n=(e.filteredData,e.mainMenu.find((function(e){return"QBR"===e.display_name}))),r=(0,i.useState)([{}]),h=(0,a.Z)(r,2),x=h[0],j=h[1],v=localStorage.getItem("resId"),_=m.N.baseUrl,N=(0,i.useState)([]),g=(0,a.Z)(N,2),b=g[0],y=g[1],D=(0,i.useState)(!1),M=(0,a.Z)(D,2),w=M[0],I=M[1],k={customer_id:s,qbr_dt:"",lead_presenter:"",prolifics_participants:"",customer_participants:"",presentation_dt:"",doc_id:"",meeting_notes:""},E=(0,i.useState)(k),A=(0,a.Z)(E,2),q=A[0],T=A[1],R=(0,i.useState)([]),F=(0,a.Z)(R,2),Y=(F[0],F[1],(0,i.useState)({ToDate:""})),B=(0,a.Z)(Y,2),Q=(B[0],B[1]),U=(0,i.useState)(),O=(0,a.Z)(U,2),L=O[0],z=O[1],V=(0,i.useState)(!1),K=(0,a.Z)(V,2),G=K[0],H=K[1],J=(0,i.useState)([]),X=(0,a.Z)(J,2),W=X[0],$=X[1],ee=(0,i.useState)([]),te=(0,a.Z)(ee,2),se=te[0],ae=te[1],ie=(0,i.useState)([]),ne=(0,a.Z)(ie,2),ce=ne[0];ne[1],(0,i.useEffect)((function(){}),[s]);var re=(0,i.useState)(!1),oe=(0,a.Z)(re,2),le=oe[0],de=oe[1];(0,i.useEffect)((function(){c().get(_+"/customersms/Qbr/getQbrDetails?cid=".concat(s)).then((function(e){for(var t=e.data,s=0;s<t.length;s++)t[s].SNo=s+1;for(var a=0;a<t.length;a++)t[a].qbr_dt=null==t[a].qbr_dt?"":o()(t[a].qbr_dt).format("DD-MMM-YYYY"),t[a].presentation_dt=null==t[a].presentation_dt?"":o()(t[a].presentation_dt).format("DD-MMM-YYYY"),t[a].customerParticipants=null==t[a].customerParticipants?"":t[a].customerParticipants,t[a].customer_participants=null==t[a].customer_participants?"":t[a].customer_participants,t[a].prolificsParticipants=null==t[a].prolificsParticipants?"":t[a].prolificsParticipants,t[a].prolifics_participants=null==t[a].prolifics_participants?"":t[a].prolifics_participants;ae(["Action"]),j([{SNo:"S.No",qbr_dt:"QBR Date",leadPresenter:"Lead Presenter",prolificsParticipants:"Prolifics Participants",customerParticipants:"Customer Participant",presentation_dt:"Presentation Date",meeting_notes:"Metting Notes & Next Steps",doc_id:"Presentation File",Action:"Action"}].concat(t))})).catch((function(e){})),c()({method:"get",url:_+"/ProjectMS/Issues/getAssignedData"}).then((function(e){var t=e.data;y(t)}))}),[s]);var ue=(0,i.useState)("add"),pe=(0,a.Z)(ue,2),me=pe[0],fe=pe[1];(0,i.useEffect)((function(){}),[q]);var he=function(e){for(var t in e)null===e[t]&&(e[t]="");se[0];return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{align:"center",children:(0,S.jsx)(d.QML,{type:"edit",title:"Edit",size:"1.2em",color:"orange",cursor:"pointer",onClick:function(){T(e),z(e.SNo),H(!0),fe("edit")}})})})},xe=(0,i.useState)([]),je=(0,a.Z)(xe,2),ve=je[0],_e=je[1];(0,i.useEffect)((function(){}),[]);var Ne=function(e){return(0,S.jsx)("div",{align:"center","data-toggle":"tooltip",title:"Download Document",children:""!=e.doc_id?(0,S.jsx)(f.Z,{style:{cursor:"pointer",color:"#86b558"},onClick:function(){!function(e){var t=_+"/customersms/Qbr/downloadFile?documentId=".concat(e.doc_id);c()({url:t,method:"GET",responseType:"blob"}).then((function(t){var s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s,a.setAttribute("download",e.file_name),document.body.appendChild(a),a.click()}))}(e)}}):""})},ge=function(e){return(0,S.jsx)("div",{align:"center","data-toggle":"tooltip",title:e.SNo,children:e.SNo})},be=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.prolificsParticipants,children:e.prolificsParticipants})},ye=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.leadPresenter,children:e.leadPresenter})},Se=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",title:e.qbr_dt,children:e.qbr_dt})},De=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.customerParticipants,children:e.customerParticipants})},Ze=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",title:e.presentation_dt,children:e.presentation_dt})},Ce=function(e){return(0,S.jsx)("div",{"data-toggle":"tooltip",className:"ellipsis",title:e.meeting_notes,children:e.meeting_notes})},Pe=null===(t=Object.keys(W))||void 0===t?void 0:t.map((function(e,t){return n.is_write||"doc_id"===e||"SNo"===e||"prolificsParticipants"===e||"leadPresenter"===e||"qbr_dt"===e||"customerParticipants"===e||"presentation_dt"===e||"meeting_notes"===e?(0,S.jsx)(l.s,{sortable:!0,body:"Action"===e?he:"doc_id"===e?Ne:"SNo"===e?ge:"prolificsParticipants"===e?be:"leadPresenter"===e?ye:"qbr_dt"===e?Se:"customerParticipants"===e?De:"presentation_dt"===e?Ze:"meeting_notes"===e?Ce:"",field:e,header:W[e]},e):null}));(0,i.useEffect)((function(){x[0]&&$(JSON.parse(JSON.stringify(x[0])))}),[x]);var Me=(0,i.useState)([]),we=(0,a.Z)(Me,2),Ie=(we[0],we[1]);(0,i.useEffect)((function(){c()({method:"get",url:_+"/customersms/Customers/getProjectName?cid=".concat(s)}).then((function(e){var t=e.data;Ie(t)}))}),[]);var ke=(0,i.useState)([]),Ee=(0,a.Z)(ke,2),Ae=Ee[0],qe=Ee[1];(0,i.useEffect)((function(){c()({method:"get",url:_+"/customersms/Customers/getCustomerName?cid=".concat(s)}).then((function(e){var t=e.data;qe(t)}))}),[s]);var Te=(0,i.useState)([]),Re=(0,a.Z)(Te,2),Fe=Re[0],Ye=Re[1];(0,i.useEffect)((function(){Be()}),[]);var Be=function(){c()({method:"GET",url:_+"/CommonMS/master/getMenus?loggedUserId=".concat(v)}).then((function(e){e.data.forEach((function(e){"Customers"===e.display_name&&Ye([e])}))}))};return(0,S.jsxs)("div",{children:[w?(0,S.jsx)("div",{className:"statusMsg success",children:(0,S.jsxs)("span",{className:"errMsg",children:[(0,S.jsx)(p.hXj,{})," \xa0 Saved successfully"]})}):"",le?(0,S.jsx)("div",{className:"statusMsg success",children:(0,S.jsxs)("span",{className:"errMsg",children:[(0,S.jsx)(p.hXj,{})," \xa0 Update successfully"]})}):"",(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne",children:(0,S.jsx)("h2",{children:Ae})}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"QBR"})}),(0,S.jsx)("div",{className:"childThree"})]})}),(0,S.jsx)(P.Z,{routes:Fe,currentScreenName:["Customer Search","QBR"]}),(0,S.jsxs)("div",{className:"row",children:[(0,S.jsx)("div",{className:"col-md-11"}),(0,S.jsx)("div",{className:"col-md-1",children:1==n.is_write?(0,S.jsxs)("button",{onClick:function(){H(!0),fe("add")},className:"btn btn-primary mt-2 mb-2",style:{width:"100px"},title:"Add QBR",children:[(0,S.jsx)(Z.wEH,{}),"Add QBR"]}):""})]}),(0,S.jsx)("div",{className:"group mb-3 customCard",children:(0,S.jsx)(u.Z,{data:x,linkColumns:se,linkColumnsRoutes:ce,dynamicColumns:Pe,headerData:W,setHeaderData:$,rows:10})}),G?(0,S.jsx)(C,{setSearchdates:Q,issueDetails:b,type:me,setData:j,data:x,customerId:s,setEditedData:T,editId:L,editedData:q,setAddmsg:I,setEditAddmsg:de,buttonPopups:G,setButtonPopups:H,setDcoumentId:_e,documentId:ve}):""]})}},11634:function(e,t,s){var a=s(64836);t.Z=void 0;var i=a(s(45649)),n=s(80184),c=(0,i.default)((0,n.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm-1 8V7c0-.55.45-1 1-1s1 .45 1 1v3h1.79c.45 0 .67.54.35.85l-2.79 2.79c-.2.2-.51.2-.71 0l-2.79-2.79c-.31-.31-.09-.85.36-.85H11zm5 7H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"}),"DownloadForOfflineRounded");t.Z=c}}]);
//# sourceMappingURL=2797.bb31475e.chunk.js.map