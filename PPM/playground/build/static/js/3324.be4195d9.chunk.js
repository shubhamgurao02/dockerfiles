"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3324],{33324:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var s=n(93433),a=n(4942),l=n(1413),r=n(29439),o=n(72791),i=n(74569),c=n.n(i),u=n(11087),d=n(1063),m=(n(41980),n(39122),n(31896),n(81975),n(24205),n(63521)),h=n(83854),f=n(87890),p=n(56355),v=n(37145),x=n(25103),j=n(35125),N=n(25415),S=n.n(N),y=n(80184);n(31052);var g=function(e){var t=e.data,a=e.rows,i=e.dynamicColumns,c=e.headerData,u=e.setHeaderData,d=e.exportData,m=e.customFilters,h=e.customFilterValue,p=e.setCustomFilterValue,N=e.fileName,g=(0,o.useState)([]),C=(0,r.Z)(g,2),b=C[0],Z=C[1],T=(0,o.useState)([]),w=(0,r.Z)(T,2),I=w[0],k=w[1],_=(0,o.useState)([]),P=(0,r.Z)(_,2),W=P[0],O=P[1],E=(0,o.useRef)(null);(0,o.useEffect)((function(){Z(JSON.parse(JSON.stringify(t)))}),[t]),(0,o.useEffect)((function(){if(b.length>0){u(b[0]),k(b.splice(1));var e=[],t=b[0];null===Object||void 0===Object||Object.keys(t).forEach((function(n){"StatusId"!=n&&e.push({title:t[n],dataKey:n})})),O(e)}}),[b]);var R={contains:{value:null,matchMode:f.a6.CONTAINS}},F=(0,o.useState)({global:R.contains}),D=(0,r.Z)(F,2),A=D[0],L=D[1];(0,o.useEffect)((function(){L({global:R.contains})}),[c]);var M=(0,o.useState)(""),V=(0,r.Z)(M,2),U=V[0],J=V[1],K=function(e){var t=e.target.value,n=(0,l.Z)({},A);n.global.value=t,L(n),J(t)},Y=function(){var e=m;if("select"===e.type)return(0,y.jsx)("select",{id:e.id,onChange:function(e){p(e.target.value)},children:Object.keys(e.data).map((function(t){return(0,y.jsx)("option",{selected:h==t,value:t,children:e.data[t]})}))})},H=function(){Promise.resolve().then(n.bind(n,34045)).then((function(e){for(var n=Object.keys(t[0]),a=(0,s.Z)(new Set(n)),l=t.map((function(e){return a.map((function(t){var n=e[t];if("revenue"===t&&"string"===typeof n){var s=parseFloat(n);return isNaN(s)?n:s.toLocaleString()}return"scheduledDate"===t&&moment(n).isValid()?moment(n).format("DD-MMM-YYYY"):n}))})).map((function(e){return Object.values(e)})),r=new(S().Workbook),o=r.addWorksheet(N),i=0;i<l.length;i++)o.addRow(l[i]);[1].forEach((function(e){o.getRow(e).font={bold:!0}})),r.xlsx.writeBuffer().then((function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});saveAs(t,N)}))}))},B=function(){G()},G=function(){for(var e=new j.default("l","mm","a3"),n=W.map((function(e){return e.title})),s=[],a=function(e){var n=W.map((function(n){return t[e][n.dataKey]}));s.push(n)},l=1;l<t.length;l++)a(l);var r=[30,30,30,30,30,30];e.text(15,30,N);var o={0:{cellWidth:r[0]},1:{cellWidth:r[1]},2:{cellWidth:r[2]},3:{cellWidth:r[3]},4:{cellWidth:r[4]},5:{cellWidth:r[5]}};e.autoTable(n,s,{startY:34,theme:"grid",styles:{font:"times",halign:"center",cellPadding:1,lineWidth:.5,lineColor:[0,0,0],textColor:[0,0,0]},headStyles:{textColor:[0,0,0],fontStyle:"normal",lineWidth:.5,lineColor:[0,0,0],fillColor:[166,204,247]},alternateRowStyles:{fillColor:[212,212,212],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]},rowStyles:{lineWidth:.5,lineColor:[0,0,0]},tableLineColor:[0,0,0],columnStyles:o}),e.save(N)},X=function(){q()},q=function(){var e=window.open("","_blank");if(e){var t=z();e.document.write('\n    <html>\n      <head>\n        <title>Print Table</title>\n        <link rel="stylesheet" type="text/css" href="path-to-your-print-styles.css">\n      </head>\n      <body>\n        <h1>PPM :: Customer Search</h1>\n        '.concat(t,"\n      </body>\n    </html>\n  ")),e.document.close(),e.print()}},z=function(){console.log(t);var e=t.map((function(e){return"\n      <tr>\n        <td>".concat(e["Customer Name"],"</td>\n        <td>").concat(e["Customer Status"],"</td>\n        <td>").concat(e["Industry Type"],"</td>\n        <td>").concat(e["Sales Territory"],"</td>\n        <td>").concat(e.Website,"</td>\n      </tr>")}));return"\n    <table>\n      <thead>\n        <tr>\n       \n        </tr>\n      </thead>\n      <tbody>\n        ".concat(e.join(""),"\n      </tbody>\n    </table>\n  ")},Q=(0,y.jsxs)("div",{className:"flex  flex-row-reverse",children:[void 0!=m&&(0,y.jsx)("span",{children:(0,y.jsx)(Y,{})}),(0,y.jsxs)("div",{className:"exportBtn ml-3",children:[(null===d||void 0===d?void 0:d.includes("CSV"))&&(0,y.jsx)("span",{className:"pi pi-file csv",onClick:function(){return e=!1,void E.current.exportCSV({selectionOnly:e});var e},title:"CSV"}),(null===d||void 0===d?void 0:d.includes("XLS"))&&(0,y.jsx)("span",{className:"pi pi-file-excel excel",onClick:H,title:"Export to Excel"}),(null===d||void 0===d?void 0:d.includes("PDF"))&&(0,y.jsx)("span",{className:"pi pi-file-pdf pdf",onClick:B,title:"PDF"}),(null===d||void 0===d?void 0:d.includes("PRINT"))&&(0,y.jsx)("span",{className:"pi pi-print print",onClick:X,title:"Print"})]}),(0,y.jsxs)("span",{className:"p-input-icon-left tableGsearch",children:[(0,y.jsx)("i",{className:"pi pi-search"}),(0,y.jsx)(x.o,{id:"searchInput",defaultValue:U,onChange:K,placeholder:"Keyword Search"})]})]});return(0,y.jsx)("div",{className:"darkHeader",children:Object.keys(c).length>0&&(0,y.jsx)(v.w,{paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} to {last} of {totalRecords}",rowsPerPageOptions:[10,25,50],value:I,paginator:!0,showGridlines:!0,rows:a,dataKey:"id",filters:A,responsiveLayout:"scroll",header:Q,emptyMessage:"No Records found.",ref:function(e){E.current=e},className:"primeReactDataTable reportsPrimeTable ",children:i})})},C=n(78983),b=n(34831),Z=n(38262);n(31052);var T=function(){var e,t=(0,o.useState)(!1),n=(0,r.Z)(t,2),s=n[0],i=n[1],v=(0,o.useState)(p.UdN),x=(0,r.Z)(v,2),j=x[0],N=x[1],S=(0,o.useState)([]),T=(0,r.Z)(S,2),w=(T[0],T[1]),I=b.N.baseUrl,k=(0,o.useState)(""),_=(0,r.Z)(k,2),P=(_[0],_[1],(0,o.useState)({IndustryId:null,StatusId:null,SalesTerritory:null,full_name:null})),W=(0,r.Z)(P,2),O=W[0],E=W[1],R=localStorage.getItem("resId"),F=(0,o.useState)([]),D=(0,r.Z)(F,2),A=D[0],L=D[1];(0,o.useEffect)((function(){M()}),[]);var M=function(){c()({method:"GET",url:I+"/CommonMS/master/getMenus?loggedUserId=".concat(R)}).then((function(e){e.data.forEach((function(e){"Customers"===e.display_name&&L([e])}))}))},V=function(e){var t=e.target,n=t.id,s=t.value;E((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,"null"==s?null:s))}))},U=(0,o.useState)([]),J=(0,r.Z)(U,2),K=J[0],Y=J[1];(0,o.useEffect)((function(){Y(["XLS","PDF","PRINT"])}),[]);var H=(0,o.useState)(!1),B=(0,r.Z)(H,2),G=B[0],X=B[1],q=(0,o.useState)([{}]),z=(0,r.Z)(q,2),Q=z[0],$=z[1],ee=(0,o.useState)(!1),te=(0,r.Z)(ee,2),ne=te[0],se=te[1],ae=function(){c()({method:"post",url:I+"/customersms/Customersearch/postwholedata",data:O,headers:{"Content-Type":"application/json"}}).then((function(e){var t=e.data,n=["customer/dashboard/:id",(0,y.jsx)("a",{href:"Website"})];ie(["Customer Name","Website"]),me(n),$([{"Customer Name":"Customer Name","Industry Type":"Industry Type","Sales Territory":"Sales Territory","Customer Status":"Customer Status",Website:"Website"}].concat(t)),setTimeout((function(){se(!1)}),100)})).catch((function(e){}))},le=(0,o.useState)([]),re=(0,r.Z)(le,2),oe=re[0],ie=re[1],ce=(0,o.useState)([]),ue=(0,r.Z)(ce,2),de=ue[0],me=ue[1],he=(0,o.useState)([]),fe=(0,r.Z)(he,2),pe=fe[0],ve=fe[1];(0,o.useEffect)((function(){Q[0]&&ve(JSON.parse(JSON.stringify(Q[0])))}),[Q]);var xe=function(e){var t,n=null===(t=de[0])||void 0===t?void 0:t.split(":");return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(u.rU,{target:"_blank",className:"ellipsis",to:n[0]+":"+e[n[1]],"data-toggle":"tooltip",title:e["Customer Name"],children:e[oe[0]]})})},je=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e["Customer Status"],children:e["Customer Status"]})},Ne=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e["Sales Territory"],children:e["Sales Territory"]})},Se=function(e){return(0,y.jsx)("div",{className:"ellipsis","data-toggle":"tooltip",title:e["Industry Type"],children:e["Industry Type"]})},ye=function(e){return(0,y.jsx)("div",{children:"N/A"===e.Website||"na"===e.Website||"n/a"===e.Website?(0,y.jsx)("span",{children:e.Website}):(0,y.jsx)("a",{href:e.Website,target:"_blank",rel:"noopener noreferrer",title:e.Website,children:(0,y.jsx)("span",{children:e.Website})})})},ge=null===(e=Object.keys(pe))||void 0===e?void 0:e.map((function(e,t){return(0,y.jsx)(d.s,{sortable:!0,body:"Customer Name"==e?xe:"Website"==e?ye:"Customer Status"==e?je:"Sales Territory"==e?Ne:"Industry Type"==e?Se:"",field:e,header:pe[e]},e)})),Ce=(0,o.useState)([]),be=(0,r.Z)(Ce,2),Ze=be[0],Te=be[1],we=(0,o.useState)([]),Ie=(0,r.Z)(we,2),ke=Ie[0],_e=Ie[1],Pe=(0,o.useState)([]),We=(0,r.Z)(Pe,2),Oe=We[0],Ee=We[1],Re=(0,o.useState)({IndustryId:null,StatusId:null,SalesTerritory:null,full_name:null}),Fe=(0,r.Z)(Re,2),De=(Fe[0],Fe[1],function(){c()({method:"post",url:I+"/customersms/Customersearch/postwholedata",data:O,headers:{"Content-Type":"application/json"}}).then((function(e){e.data})).catch((function(e){}))}),Ae=(0,o.useState)(""),Le=(0,r.Z)(Ae,2),Me=(Le[0],Le[1],{contains:{value:null,matchMode:f.a6.CONTAINS}}),Ve=(0,o.useState)({full_name:Me.contains}),Ue=(0,r.Z)(Ve,2),Je=(Ue[0],Ue[1]);(0,o.useEffect)((function(){Je({full_name:Me.contains})}),[pe]);var Ke=(0,o.useState)([]),Ye=(0,r.Z)(Ke,2),He=Ye[0],Be=Ye[1],Ge=(0,o.useState)([]),Xe=(0,r.Z)(Ge,2),qe=(Xe[0],Xe[1]),ze=(0,o.useState)([]),Qe=(0,r.Z)(ze,2),$e=(Qe[0],Qe[1]);return(0,o.useEffect)((function(){Be(JSON.parse(JSON.stringify(Q)))}),[Q]),(0,o.useEffect)((function(){if(He.length>0){ve(He[0]),qe(He.splice(1));var e=[],t=He[0];Object.keys(t).forEach((function(n){"StatusId"!=n&&e.push({title:t[n],dataKey:n})})),$e(e)}}),[He]),(0,o.useEffect)((function(){c()({method:"get",url:I+"/customersms/Customersearch/getid"}).then((function(e){var t=e.data;w(t)})).catch((function(e){})),c()({method:"get",url:I+"/customersms/Customersearch/getsalesterritory"}).then((function(e){e.data,Te(e.data)})).catch((function(e){})),c()({method:"get",url:I+"/customersms/Customersearch/getIndusdetails"}).then((function(e){var t=e.data;_e(t)})).catch((function(e){})),ae(),c()({url:I+"/customersms/Customersearch/getcustomer"}).then((function(e){Ee(e.data)})),De()}),[]),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Customer Search"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsx)(Z.Z,{routes:A,currentScreenName:["Customer Search"]}),(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[(0,y.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,y.jsx)("h2",{children:"Search Filters"}),(0,y.jsx)("div",{onClick:function(){i(!s),N(s?p.UdN:p.NR5)},children:(0,y.jsx)("span",{children:j})})]}),(0,y.jsx)(C.V9,{visible:!s,children:(0,y.jsxs)("div",{className:"group-content row",children:[(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsxs)("label",{className:"col-5",htmlFor:"full_name",children:["Customer Name"," "]}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsx)("div",{className:"autocomplete",children:(0,y.jsx)("div",{className:"autoComplete-container",children:(0,y.jsx)(m.ReactSearchAutocomplete,{items:Oe,type:"Text",name:"full_name",id:"full_name",customer:Oe,className:"AutoComplete",onClear:function(){E((function(e){return(0,l.Z)((0,l.Z)({},e),{},{full_name:null})}))},onSelect:function(e){E((function(t){return(0,l.Z)((0,l.Z)({},t),{},{full_name:e.id})}))},showIcon:!1})})})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"industrytype",children:"Industry Type"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text cancel",id:"IndustryId",name:"IndustryId",onChange:function(e){return V(e)},children:[(0,y.jsx)("option",{value:"null",children:" <<All>>"}),ke.map((function(e){return(0,y.jsx)("option",{value:e.id,children:e.lkup_name})}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"salesterritory",children:"Sales Territory"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text cancel",name:"SalesTerritory",id:"SalesTerritory",onChange:function(e){return V(e)},children:[(0,y.jsx)("option",{value:"null",children:" <<All>>"}),Ze.map((function(e){return(0,y.jsx)("option",{value:e.id,children:e.full_name})}))]})})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"form-group row",children:[(0,y.jsx)("label",{className:"col-5",htmlFor:"customerstatus",children:"Customer Status"}),(0,y.jsx)("span",{className:"col-1 p-0",children:":"}),(0,y.jsx)("div",{className:"col-6",children:(0,y.jsxs)("select",{className:"text cancel",name:"StatusId",id:"StatusId",onChange:function(e){return V(e)},children:[(0,y.jsx)("option",{value:"null",children:" <<All>>"}),(0,y.jsx)("option",{value:161,children:"Active"}),(0,y.jsx)("option",{value:162,children:"InActive"}),(0,y.jsx)("option",{value:160,children:"New"})]})})]})}),(0,y.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:(0,y.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){se(!1),X(!0),i(!s),N(s?p.UdN:p.NR5),ae()},children:[(0,y.jsx)(p.U41,{}),"Search"," "]})})]})})]}),1==G?(0,y.jsxs)("div",{className:"group mb-3 customCard",children:[ne?(0,y.jsx)(h.Z,{}):"",(0,y.jsx)(g,{data:Q,linkColumns:oe,linkColumnsRoutes:de,dynamicColumns:ge,headerData:pe,setHeaderData:ve,exportData:K,rows:25,fileName:"PPM Customer Search"})]}):(0,y.jsx)(y.Fragment,{})]})}}}]);
//# sourceMappingURL=3324.be4195d9.chunk.js.map