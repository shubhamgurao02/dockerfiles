"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3704],{3704:function(e,t,n){n.d(t,{Z:function(){return H}});var s=n(74165),r=n(15861),c=n(4942),a=n(1413),i=n(29439),l=n(74569),o=n.n(l),u=n(72791),d=n(86388),h=n(34831),f=n(76053),x=n(13400),p=n(56355),m=n(78983),j=n(72426),y=n.n(j),v=n(80184);var g=function(e){var t=e.costLoginHistoryPopUp,n=e.setCostLoginHistoryPopUp,s=e.costLoginHistoryData,r=(0,u.useState)(null),c=(0,i.Z)(r,2),a=c[0],l=c[1];(0,u.useEffect)((function(){o()}),[]);var o=function(e){var t=void 0===e?s:e;l((function(){return t.map((function(e,t){var n=[];return n.push((0,v.jsx)("td",{children:t+1})),["employee_name","ip_address","login_date_and_time"].forEach((function(t,s){n.push((0,v.jsx)("td",{children:"login_date_and_time"===t?y()(e[t]).format("DD-MMM-yyyy HH:mm:ss"):e[t]}))})),(0,v.jsx)("tr",{children:n},t)}))}))};return(0,v.jsx)("div",{children:(0,v.jsxs)(m.Tk,{size:"xl",visible:t,onClose:function(){return n(!1)},children:[(0,v.jsx)(m.p0,{children:(0,v.jsx)(m.fl,{children:"Cost Login History"})}),(0,v.jsxs)(m.sD,{children:[(0,v.jsx)("div",{className:"",children:""}),null!=a?(0,v.jsxs)("div",{className:"col-md-12",children:[(0,v.jsx)("div",{className:"col-md-12 mb-1",style:{marginLeft:"2%"},align:"right",children:(0,v.jsx)("input",{type:"search",onChange:function(e){!function(e){var t=e.target,n=(t.id,t.value),r=s.filter((function(e,t){return Object.keys(e).some((function(t){var s="Invalid date"!==y()(e[t])._d&&y()(e[t]).format("DD-MMM-yyyy HH:mm:ss"),r="Invalid date"!==s&&n.toLowerCase().includes(""+s);return e[t].toLowerCase().includes(n.toLowerCase())||r}))}));o(r)}(e)}})}),(0,v.jsx)("table",{className:"table table-bordered table-striped",style:{width:"100%"},children:(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S No."}),(0,v.jsx)("th",{children:"Employee Name"}),(0,v.jsx)("th",{children:"IP Address"}),(0,v.jsx)("th",{children:" Login Date And Time"})]}),a]})})]}):""]})]})})},S=n(78820);n(85565);var C=function(e){var t=e.costChangeHistoryPopUp,n=e.setCostChangeHistoryPopUp,s=e.costHistoryChangeData,r=(0,u.useState)(null),c=(0,i.Z)(r,2),a=c[0],l=c[1],o=(0,u.useRef)(null),d=(0,u.useRef)(!1);(0,u.useEffect)((function(){I()}),[]);var h,p=(0,u.useState)(30),j=(0,i.Z)(p,2),y=j[0],g=j[1],S=(0,u.useState)(0),C=(0,i.Z)(S,2),b=C[0],N=C[1],Z=(0,u.useState)("hide"),w=(0,i.Z)(Z,2),D=w[0],k=w[1];(0,u.useEffect)((function(){return h=setInterval((function(){g((function(e){return e-1})),0===y&&N((function(e){return e+1}))}),1e3),0===y?(k("hide"),o.current=null,d.current=!1,I(),function(){return clearInterval(h)}):function(){return clearInterval(h)}}),[y]);var M=function(){k("show"),g(30),N(0)},K=function(){k("hide"),clearInterval(h)},U=function(e){o.current==e?(o.current=null,K()):(o.current=e,M()),I()},I=function(){l((function(){var e=["updated_emp","created_dt","cost_value"];return 0!==s.length?s.map((function(t,n){var s=[];return e.forEach((function(r,c){0==c?(s.push((0,v.jsx)("td",{children:n+1})),s.push((0,v.jsx)("td",{children:t[r]}))):c==e.length-1?(s.push((0,v.jsx)("td",{id:c,children:null==o.current&&0==d.current?"******":o.current==n||1==d.current?t[r]:"******"})),s.push((0,v.jsx)("td",{children:(0,v.jsx)(x.Z,{title:"View",style:{height:"1px"},onClick:function(){U(n)},children:(0,v.jsx)(f.knC,{})})}))):s.push((0,v.jsx)("td",{children:t[r]}))})),(0,v.jsx)("tr",{children:s},n)})):(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:"5",align:"center",children:"No Data Found"})})}))};return(0,v.jsx)("div",{children:(0,v.jsxs)(m.Tk,{size:"xl",visible:t,onClose:function(){return n(!1)},children:[(0,v.jsx)(m.p0,{className:"hgt22",children:(0,v.jsx)(m.fl,{children:(0,v.jsx)("span",{className:"ft16",children:"Cost History"})})}),(0,v.jsxs)(m.sD,{children:[(0,v.jsxs)("div",{className:"col-md-12",children:[(0,v.jsxs)("div",{className:"col-md-6 p0 mt13",align:"left",children:[" ","show"==D?(b<10?"0"+b:b)+":"+(y<10?"0"+y:y):""," "]}),s.length>0?(0,v.jsx)("div",{className:" mb-1",align:"right",children:(0,v.jsx)("button",{className:"btn btn-primary",onClick:function(){1==d.current?(d.current=!1,K()):(d.current=!0,M()),I()},children:"Show All"})}):""]}),(0,v.jsx)("div",{className:"col-md-12",children:(0,v.jsx)("table",{className:"table table-bordered table-striped",style:{width:"100%"},children:(0,v.jsxs)("tbody",{children:[(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"S.No"}),(0,v.jsx)("th",{children:"Changed By"}),(0,v.jsx)("th",{children:"Created Dt"}),(0,v.jsx)("th",{children:"Cost Value"}),(0,v.jsx)("th",{children:"Actions"})]}),a]})})})]})]})})},b=n(36167),N=n(59513),Z=n.n(N),w=(n(68639),n(3555)),D=n(16856),k=n(83854),M=n(32125),K=(0,w.td)(""),U=(0,w.td)(!1),I=(0,w.td)("");var T=function(e){var t=e.formData,n=e.country,l=e.departments,j=e.selectedDepartments,N=e.filtersData,w=e.setfiltersData,T=e.date,E=e.setDate,L=e.setSelectedDepartments,P=h.N.baseUrl,_=window.location.href,H=localStorage.getItem("resId"),V=(0,u.useState)(!1),R=(0,i.Z)(V,2),A=R[0],B=R[1],O=(0,u.useState)(p.UdN),F=(0,i.Z)(O,2),z=F[0],G=F[1],q=(0,u.useState)(null),$=(0,i.Z)(q,2),Y=$[0],J=$[1],Q=(0,u.useState)(!1),W=(0,i.Z)(Q,2),X=W[0],ee=W[1],te=(0,u.useState)(null),ne=(0,i.Z)(te,2),se=ne[0],re=ne[1],ce=(0,u.useRef)(!1),ae=(0,u.useRef)([]),ie=(0,u.useRef)(""),le=(0,u.useRef)([]),oe=(0,u.useState)(!1),ue=(0,i.Z)(oe,2),de=ue[0],he=ue[1],fe=(0,u.useState)([]),xe=(0,i.Z)(fe,2),pe=xe[0],me=(xe[1],(0,u.useState)(!1)),je=(0,i.Z)(me,2),ye=je[0],ve=je[1],ge=(0,u.useState)([]),Se=(0,i.Z)(ge,2),Ce=Se[0],be=Se[1],Ne=(0,u.useRef)("show"),Ze=(0,u.useRef)(""),we=(0,u.useState)(""),De=(0,i.Z)(we,2),ke=De[0],Me=De[1],Ke=(0,u.useState)(""),Ue=(0,i.Z)(Ke,2),Ie=Ue[0],Te=Ue[1],Ee=(0,u.useState)(!1),Le=(0,i.Z)(Ee,2),Pe=Le[0],_e=Le[1],He=(0,u.useState)(!1),Ve=(0,i.Z)(He,2),Re=Ve[0],Ae=Ve[1],Be=(0,u.useState)(!1),Oe=(0,i.Z)(Be,2),Fe=Oe[0],ze=Oe[1],Ge=(0,u.useState)(0),qe=(0,i.Z)(Ge,2),$e=(qe[0],qe[1]),Ye=(0,u.useRef)([]),Je=(0,u.useRef)([]),Qe={},We=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze(!0),void 0===t||!t.includes("Calculate")){e.next=6;break}return Ye.current=new AbortController,e.next=5,o()({method:"POST",url:P+"/CostMS/cost/computedCost",signal:Ye.current.signal,data:N});case 5:e.sent;case 6:return Ye.current=new AbortController,e.next=9,o()({method:"POST",url:P+"/CostMS/cost/resourcesCostData",signal:Ye.current.signal,data:N});case 9:n=e.sent,r=n.data,le.current=r,$e(r.length),ze(!1),Xe();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=function(){J((function(){var e,t=["eNum","eName","designation","dName","cName","cVal","actual_cost","computedCost","effectiveFrom"];return null===(e=le.current)||void 0===e?void 0:e.map((function(e,n){var s=[];return t.forEach((function(r,c){var a;"cVal"==r?s.push("show"===Ne.current?(0,v.jsx)("td",{id:e.eNum,align:"right",children:0==ce.current&&""==ie.current?"*******":ie.current==e.eNum||1==ce.current&&-1!=(null===(a=ae.current)||void 0===a?void 0:a.indexOf(e.eNum))?e[r]:"*******"}):Ze.current===e.eNum?(0,v.jsx)("td",{children:(0,v.jsx)("input",{type:"text",className:I.current,onKeyPress:function(e){return function(e){var t=e.which?e.which:e.keyCode;return 8==t||46==t||37==t||39==t?e.key:t<48||t>57?e.preventDefault():e.key}(e)},defaultValue:e[r],onChange:function(e){tt(e)}})}):(0,v.jsx)("td",{children:"*******"})):t.length-1==c?(s.push((0,v.jsx)("td",{align:"center",children:y()(e[r]).format("DD-MMM-yyyy")})),s.push((0,v.jsxs)("td",{align:"center",children:[(0,v.jsx)("span",{children:(0,v.jsx)(x.Z,{title:"View",style:{height:"1px"},onClick:function(t){et(t,e.eNum,e[r])},children:(0,v.jsx)(f.knC,{})})}),0==("textInput"===Ne.current&&Ze.current===e.eNum)?(0,v.jsx)("span",{style:{marginLeft:"-10px"},children:(0,v.jsx)(x.Z,{title:"Edit",style:{height:"1px"},onClick:function(t){rt(e,e.cVal,n)},children:(0,v.jsx)(D.oTc,{style:{fontSize:"16px"}})})}):"","textInput"===Ne.current&&Ze.current===e.eNum?(0,v.jsx)("span",{style:{marginLeft:"-10px"},children:(0,v.jsx)(x.Z,{title:"Save",style:{height:"1px"},onClick:function(t){rt(e,e.cVal)},children:(0,v.jsx)(p.TvB,{style:{fontSize:"16px"}})})}):"",(0,v.jsx)("span",{style:{marginLeft:"-10px"},children:(0,v.jsx)(x.Z,{title:"Cost History",style:{height:"1px"},onClick:function(t){it(e)},children:(0,v.jsx)(S.wYb,{style:{fontSize:"16px"}})})}),"textInput"===Ne.current&&Ze.current===e.eNum?(0,v.jsx)("span",{style:{marginLeft:"-10px"},children:(0,v.jsx)(x.Z,{title:"Close",style:{height:"1px"},onClick:function(){ct()},children:(0,v.jsx)(S.LHV,{style:{fontSize:"16px"}})})}):""]}))):"cVal"===r||"computedCost"===r?s.push((0,v.jsxs)("td",{children:[(0,v.jsx)("span",{children:" $"})," ",(0,v.jsx)("span",{style:{float:"right"},children:"null"===e[r]?"-":e[r]})]})):"actual_cost"===r?s.push((0,v.jsxs)("td",{children:[(0,v.jsx)("span",{children:" $"})," ",(0,v.jsx)("span",{style:{float:"right"},children:e[r]})]})):s.push((0,v.jsx)("td",{children:e[r]}))})),(0,v.jsx)("tr",{children:s},n)}))}))},et=function(e,t,n){if(ie.current==t)return ie.current="",Ct(),void Xe();ae.current.length>0?(ae.current=ae.current.filter((function(e){return e!=t})),St()):(ie.current=t,St()),Xe()},tt=function(e){K.value=e.target.value},nt=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://geolocation-db.com/json/").then((function(e){return e.json()}),"jsonp").then((function(e){st(e.IPv4)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),st=function(e){var t={},n=_.split("#");t.ipAddress=e,t.userId=H,t.url=n[1],o()({method:"POST",url:P+"/CostMS/cost/saveLoginTracks",data:t}).then((function(e){}))},rt=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n,r,c){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==Qe[c]&&(Qe[c]="update"),a=n.eNum,"show"!==Ne.current){e.next=7;break}Ne.current="textInput",Ze.current=a,e.next=21;break;case 7:if(K.value==n.cVal||""==K.value){e.next=18;break}return I.current="",n.cVal=K.value,n.secretKey=t.secretKey,n.resourceId=t.resourceId,e.next=14,at(n);case 14:e.sent&&(Me((0,v.jsx)("div",{className:"col-md-12 successMsg",children:(0,v.jsx)("span",{children:"Values Updated Successfully."})})),setTimeout((function(){I.current="",Me("")}),2e3),Ne.current="show",Ze.current="",We()),e.next=21;break;case 18:I.current="txtBoxBorderColor",Me((0,v.jsx)("div",{className:"col-md-12 errMsg",children:(0,v.jsx)("span",{children:"Please Give Correct Values."})})),setTimeout((function(){I.current="",Me("")}),2e3);case 21:We(),Xe();case 23:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}(),ct=function(){Ne.current="show",Ze.current="",Xe()},at=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()({method:"post",url:P+"/CostMS/cost/updateResourceCost",data:t,headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,U.value=n.data.type,e.abrupt("return",n.data.type);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(e){var n={resourceId:e.eNum,secretKey:t.secretKey};o()({method:"POST",url:P+"/CostMS/cost/getCostHistory",data:n}).then((function(e){be(e.data),ve(!0)}))};(0,u.useLayoutEffect)((function(){}),[j]),(0,u.useEffect)((function(){var e=[];j.forEach((function(t){e.push(t.value)})),N.businessUnit=e.toString(),We()}),[]);var lt,ot=(0,u.useState)(30),ut=(0,i.Z)(ot,2),dt=ut[0],ht=ut[1],ft=(0,u.useState)(0),xt=(0,i.Z)(ft,2),pt=xt[0],mt=xt[1],jt=(0,u.useState)("hide"),yt=(0,i.Z)(jt,2),vt=yt[0],gt=yt[1];(0,u.useEffect)((function(){return lt=setInterval((function(){ht((function(e){return e-1})),0===dt&&mt((function(e){return e+1}))}),1e3),0===dt?(gt("hide"),ie.current="",ce.current=!1,Xe(),function(){return clearInterval(lt)}):function(){return clearInterval(lt)}}),[dt]);var St=function(){gt("show"),ht(30),mt(0)},Ct=function(){gt("hide"),clearInterval(lt)},bt=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P+"/CostMS/cost/upload",e.next=3,o().post(t,se,{headers:{"Content-Type":"multipart/form-data"}});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){}),[Ie]),(0,u.useEffect)((function(){nt()}),[]),(0,v.jsxs)("div",{className:"col-md-12",children:[Fe?(0,v.jsx)(k.Z,{handleAbort:function(){Ye.current&&Ye.current.abort(),ze(!1)}}):"",(0,v.jsxs)("div",{className:"col-md-12",children:[Pe&&(0,v.jsx)("div",{className:"p6 col-md-12 successMsg",children:"Grid Computed Successfully...."}),Re&&(0,v.jsxs)("div",{className:"p6 col-md-12 statusMsg error",children:[(0,v.jsx)(S.SR5,{className:"confirmMsgIcon"}),"Please Enter Mandatory Fields"]}),(0,v.jsx)("div",{className:"pageTitle",children:(0,v.jsxs)("div",{className:"childOne",children:[(0,v.jsx)("div",{className:"childTwo",children:(0,v.jsx)("h2",{children:"View/Upload"})}),(0,v.jsx)("div",{className:"childThree"})]})}),(0,v.jsxs)("div",{className:"gropu mb-3 customCard",children:[(0,v.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,v.jsx)("h2",{children:"Search Filters"}),(0,v.jsx)("div",{onClick:function(){B(!A),G(A?p.UdN:p.NR5)},children:(0,v.jsx)("span",{children:z})})]}),(0,v.jsx)(m.V9,{visible:!A,children:(0,v.jsxs)("div",{class:"group-content row mb-2",children:[(0,v.jsx)("div",{class:"col-md-4 mb-2",children:(0,v.jsxs)("div",{class:"form-group row",children:[(0,v.jsxs)("label",{class:"col-5",for:"BuIds",children:["Country",(0,v.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,v.jsx)("span",{class:"col-1 p-0",children:":"}),(0,v.jsxs)("div",{class:"col-6",children:[" ",(0,v.jsx)("select",{id:"country",onChange:function(e){return function(e){var t=e.target,n=t.id,s=t.value;w((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,c.Z)({},n,s))}))}(e)},children:n.map((function(e){return(0,v.jsx)("option",{value:e.id,selected:"India"==e.country_name,children:e.country_name})}))})]})]})}),(0,v.jsx)("div",{class:"col-md-4 mb-2",children:(0,v.jsxs)("div",{class:"form-group row",children:[(0,v.jsxs)("label",{class:"col-5",for:"BuIds",children:["Business Unit",(0,v.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,v.jsx)("span",{class:"col-1 p-0",children:":"}),(0,v.jsx)("div",{class:"col-6 multiselect",ref:function(e){Je.current[0]=e},children:(0,v.jsx)(b.NU,{id:"businessUnit",options:l,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,valueRenderer:function(e,t){return e.length===l.length?"<< ALL >>":0===e.length?"<< Please Select >>":e.map((function(t){return e.length>1?t.label+",":t.label}))},value:j,disabled:!1,onChange:function(e){L(e);var t=[];null===e||void 0===e||e.forEach((function(e){t.push(e.value)})),N.businessUnit=t.toString()}})})]})}),(0,v.jsx)("div",{class:"col-md-4 mb-2",children:(0,v.jsxs)("div",{class:"form-group row",children:[(0,v.jsxs)("label",{class:"col-5",for:"BuIds",children:["Month",(0,v.jsx)("span",{className:"required error-text ml-1",children:"*"})]}),(0,v.jsx)("span",{class:"col-1 p-0",children:":"}),(0,v.jsx)("div",{class:"col-6",children:(0,v.jsx)(Z(),{id:"month",selected:T,onChange:function(e){!function(e){E(e)}(e)},maxDate:new Date,dateFormat:"MMM-yyyy",showMonthYearPicker:!0})})]})}),(0,v.jsx)("div",{class:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3 ",children:(0,v.jsx)("button",{type:"submit",class:"btn btn-primary",title:"Search",onClick:function(){!function(e){if(N.fromDate=y()(T).subtract(N.duration-1,"months").startOf("month").format("yyyy-MM-DD"),N.toDate=y()(T).endOf("month").format("yyyy-MM-DD"),(0,M.Z)(Je))return Ae(!0),void setTimeout((function(){Ae(!1)}),3e3);We()}()},children:"Search"})})]})}),ke,(0,v.jsxs)("div",{className:"mb-1 row",style:{float:"right"},children:["show"===vt?(0,v.jsxs)("div",{className:"col-md-2 maskTimer",align:"left",children:[(0,v.jsx)("label",{children:"Mask Time :"}),(0,v.jsxs)("span",{children:[pt<10?"0"+pt:pt,":",dt<10?"0"+dt:dt]})]}):"",(0,v.jsxs)("div",{className:"col me-1 d-flex flex-direction-end gap-2",children:[(0,v.jsx)("button",{className:"btn btn-primary ",onClick:function(){null!=Y&&0!=Y.length&&(Te("Calculate"),We("Calculate"))},children:"Calculate"}),(0,v.jsx)("button",{className:"btn btn-primary ",onClick:function(){!function(){if(null!=Y&&0!=Y.length){ze(!0);var e={};e.secretKey=t.secretKey,e.loggedUserId=H,o()({method:"POST",url:P+"/CostMS/cost/computeGrid",data:e}).then((function(e){ze(!1),_e(!0),setTimeout((function(){_e(!1)}),2e3)}))}}()},children:"Compute Grid"}),(0,v.jsx)("button",{className:"btn btn-primary ",onClick:function(){!function(){if(null!=Y&&0!=Y.length){if(ce.current=!0!==ce.current,!ce.current)return ae.current=[],Ct(),void Xe();var e,t=[];null===(e=le.current)||void 0===e||e.forEach((function(e){t.push(e.eNum)}));var n=t.filter((function(e){return e!=ie.current}));ae.current=n,St(),Xe()}}()},children:"View All"}),(0,v.jsx)("button",{className:"btn btn-primary ",onClick:function(){ee(!0),Te("Upload")},children:"Upload"}),(0,v.jsx)("button",{className:"btn btn-primary",onClick:function(){ee(!0),Te("Upload & Calculate")},children:"Upload & Calculate"})]})]}),(0,v.jsx)("div",{id:"viewAndUpload",className:"col-md-12 mt-1 ",children:(0,v.jsxs)("table",{id:"viewAndUploadTable",style:{width:"100%"},className:"table table-bordered table-striped darkHeader",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{className:"headerSticky ",align:"center",children:[(0,v.jsx)("th",{children:"Resource Id"}),(0,v.jsx)("th",{children:"Resource Name"}),(0,v.jsx)("th",{children:"Role Type"}),(0,v.jsx)("th",{children:"Business Unit"}),(0,v.jsx)("th",{children:"Country"}),(0,v.jsx)("th",{children:"Actual Salary ($)"}),(0,v.jsx)("th",{children:"Actual Cost ($)"}),(0,v.jsx)("th",{children:"Role Cost"}),(0,v.jsx)("th",{children:"Effective From"}),(0,v.jsx)("th",{children:"Action"})]})}),(0,v.jsx)("tbody",{children:0!=le.current.length?Y:(0,v.jsx)("tr",{children:(0,v.jsx)("td",{colSpan:9,children:"No Data Found"})})})]})})]}),X?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(d.Z,{excelUploadPopUp:X,setExcelUploadPopUp:ee,excelFile:se,setExcelFile:re,uploadExcelSheet:bt,getResourcesCostData:We,formData:t,stateValue:Ie,setLoaderTimer:ze})}):"",de?(0,v.jsx)(g,{costLoginHistoryPopUp:de,setCostLoginHistoryPopUp:he,costLoginHistoryData:pe}):"",ye?(0,v.jsx)(C,{costChangeHistoryPopUp:ye,setCostChangeHistoryPopUp:ve,costHistoryChangeData:Ce}):""]})]})};var E=function(e){var t=e.open,n=e.setGenerateSecretKey,s=(0,u.useState)([]),r=(0,i.Z)(s,2),l=r[0],d=r[1];console.log(l);var f=h.N.baseUrl,x=(0,u.useState)(""),p=(0,i.Z)(x,2),j=p[0],y=p[1],g=(0,u.useState)(""),C=(0,i.Z)(g,2),b=(C[0],C[1]),N=(0,u.useState)(""),Z=(0,i.Z)(N,2),w=(Z[0],Z[1]);(0,u.useEffect)((function(){o().get(f+"/ProjectMS/Audit/getloggeduser?loggedId=".concat(loggedUserId)).then((function(e){var t=e.data;console.log(t),d(t)})).catch((function(e){return console.log(e)}))}),[]);var D={resourceId:513,emailOfficial:"bala.peddi@prolifics.com",secretKey:""},k=(0,u.useState)({initialSecretKey:"",secondSecretKey:""}),M=(0,i.Z)(k,2),K=M[0],U=M[1];(0,u.useEffect)((function(){}),[]);var I=function(e){var t=e.target,n=t.id,s=t.value;U((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,c.Z)({},n,s))}))};return(0,v.jsx)("div",{children:(0,v.jsxs)(m.Tk,{size:"lg",visible:t,onClose:function(){return n(!1)},children:[(0,v.jsx)(m.p0,{children:(0,v.jsx)(m.fl,{children:"Generate Secret Key"})}),(0,v.jsxs)(m.sD,{children:[(0,v.jsx)("div",{children:j}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"col-md-5",children:[(0,v.jsx)("label",{className:"p0",children:"Enter secret Key "}),(0,v.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,v.jsx)("div",{className:"col-md-1",children:(0,v.jsx)("span",{className:"p25",children:":"})}),(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("input",{className:"enterSecretKeyValidation",style:{marginLeft:"-40px"},id:"initialSecretKey",type:"text",onChange:function(e){I(e)}}),(0,v.jsx)("br",{})]}),(0,v.jsxs)("div",{className:"col-md-5",children:[(0,v.jsx)("label",{className:"p0",children:"Re-Enter secret Key "}),(0,v.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,v.jsx)("div",{className:"col-md-1",children:(0,v.jsx)("span",{className:"p25",children:":"})}),(0,v.jsxs)("div",{className:"col-md-6",children:[(0,v.jsx)("input",{className:"reEnterSecretKeyValidation",style:{marginLeft:"-40px",marginTop:"4px"},id:"secondSecretKey",type:"text",onChange:function(e){I(e)}}),(0,v.jsx)("br",{})]})]})]}),(0,v.jsxs)(m.Ym,{children:[(0,v.jsx)(m.u5,{className:"popUpCloseButton",color:"secondary",onClick:function(){return n(!1)},children:(0,v.jsx)("div",{className:"popUpCloseButtonText",children:"Close"})}),(0,v.jsx)(m.u5,{onClick:function(){K.initialSecretKey===K.secondSecretKey&&0!=K.initialSecretKey.length&&0!=K.secondSecretKey.length?(D.secretKey=K.initialSecretKey,b(""),w(""),y(""),o()({method:"post",url:f+"/CostMS/cost/generateSecretKey",data:D,headers:{"Content-Type":"application/json"}}).then((function(e){y(e.data.status),setTimeout((function(){y("")}),2e3)})).catch((function(e){return console.log(e)}))):(y((0,v.jsxs)("div",{className:"col-md-12 errMsg",style:{width:"90%"},children:[(0,v.jsx)(S.SR5,{className:"confirmMsgIcon"}),"Please Enter Mandatory Fields"]})),b("txtBoxBorderColor"),w("txtBoxBorderColor"))},color:"primary",children:"Save changes"})]})]})})},L=n(25763);var P=function(e){var t=e.secretKeyValidationPopUp,n=e.setSecretKeyValidationPopUp,s=e.loginStatus,r=(e.setLoginStatus,e.secretKeysDataSize),c=e.onChangeHandler,a=e.validateSecretKey,i=e.handleGenerateSecretKey,l=e.confirmationMessageClass,o=e.borderColor;return(0,v.jsx)("div",{children:(0,v.jsxs)(m.Tk,{size:"sm",visible:t,onClose:function(){return n(!1)},children:[(0,v.jsx)(m.p0,{className:"hgt22",children:(0,v.jsx)(m.fl,{children:(0,v.jsx)("span",{className:"ft16",children:"Secret Key Verification"})})}),(0,v.jsxs)(m.sD,{children:[(0,v.jsx)("div",{className:l,children:s}),(0,v.jsxs)("div",{className:"col-md-12",children:[(0,v.jsx)("input",{id:"secretKey",type:"text",autoComplete:"off",className:"".concat(o," hideCharacters"),style:{width:"60%"},onChange:function(e){c(e)}}),(0,v.jsx)("button",{className:"btn btn-primary mt-2",onClick:function(){a()},children:"Submit"}),(0,v.jsx)("br",{}),0==r.length?(0,v.jsxs)("button",{className:"btn btn-primary",onClick:function(){i()},children:[(0,v.jsx)(L.Lju,{className:"genarateKeyIcon"}),"Generate Secret Key"]}):""]})]})]})})},_=n(36036);var H=function(e){var t=e.country,n=e.departments,l=e.selectedDepartments,d=e.setSelectedDepartments,f=h.N.baseUrl,x=(0,u.useState)({resourceId:513,emailOfficial:"bala.peddi@prolifics.com",secretKey:""}),p=(0,i.Z)(x,2),m=p[0],j=p[1],g=(0,u.useState)(),C=(0,i.Z)(g,2),b=C[0],N=C[1],Z=(0,u.useState)(!1),w=(0,i.Z)(Z,2),D=w[0],k=w[1],M=(0,u.useState)(""),K=(0,i.Z)(M,2),U=K[0],I=K[1],L=(0,u.useState)(!0),H=(0,i.Z)(L,2),V=H[0],R=H[1],A=(0,u.useState)([]),B=(0,i.Z)(A,2),O=B[0],F=B[1],z=(0,u.useState)(""),G=(0,i.Z)(z,2),q=G[0],$=G[1],Y=(0,u.useState)(""),J=(0,i.Z)(Y,2),Q=J[0],W=J[1],X=(0,u.useState)(""),ee=(0,i.Z)(X,2),te=ee[0],ne=ee[1],se=(0,u.useState)((function(){return new Date})),re=(0,i.Z)(se,2),ce=re[0],ae=re[1],ie=(0,u.useState)({legalEntityName:"a",country:"3",businessUnit:"",fromDate:y()(ce).startOf("month").format("yyyy-MM-DD"),toDate:y()(ce).endOf("month").format("yyyy-MM-DD"),duration:"1",secretKey:m.secretKey}),le=(0,i.Z)(ie,2),oe=le[0],ue=le[1];(0,u.useEffect)((function(){oe.secretKey=m.secretKey}),[m]);var de=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=m).ipAddress=te,e.next=4,o()({method:"post",url:f+"/CostMS/cost/validateSecretKey",data:t,headers:{"Content-Type":"application/json"}});case 4:n=e.sent,N(n.data),0==Object.keys(n.data).length?($("errMsg"),I((0,v.jsxs)("span",{className:"statusMsg error",children:[(0,v.jsx)(S.SR5,{className:"confirmMsgIcon"}),"Authentication Failed.......!"]})),W("txtBoxBorderColor"),setTimeout((function(){I(""),W(""),$("")}),4e3)):($("successMsg"),I((0,v.jsxs)("span",{children:[(0,v.jsx)(_.DqJ,{className:"confirmMsgIcon"}),"Logged In Successfully"]})),I(""),R(!1),$(""));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://geolocation-db.com/json/").then((function(e){return e.json()}),"jsonp").then((function(e){ne(e.IPv4)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){o()({method:"GET",url:f+"/CostMS/cost/findSecretKeysDataSize"}).then((function(e){F(e.data)})).catch((function(e){return console.log(e)})),he()}),[]),(0,v.jsxs)("div",{children:[(0,v.jsx)(P,{secretKeyValidationPopUp:V,setSecretKeyValidationPopUp:R,loginStatus:U,setLoginStatus:I,secretKeysDataSize:O,onChangeHandler:function(e){var t=e.target,n=t.id,s=t.value;j((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,c.Z)({},n,s))}))},validateSecretKey:de,handleGenerateSecretKey:function(){k(!D)},confirmationMessageClass:q,borderColor:Q}),(0,v.jsx)("div",{children:null!==b&&void 0!==b&&b.status&&0==V?(0,v.jsx)(T,{formData:m,country:t,departments:n,selectedDepartments:l,filtersData:oe,setfiltersData:ue,date:ce,setDate:ae,setSelectedDepartments:d}):""}),(0,v.jsx)("div",{children:D?(0,v.jsx)(E,{open:D,setGenerateSecretKey:k}):""})]})}}}]);
//# sourceMappingURL=3704.fcafedf4.chunk.js.map