"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4994],{4994:function(e,s,o){o.r(s),o.d(s,{default:function(){return Z}});var l=o(93433),n=o(29439),a=o(72791),t=(o(5636),o(74569)),r=o.n(t),c=o(34831),i=(o(72572),o(56355)),d=o(47477),u=o(1063),m=o(11087),f=o(72426),v=o.n(f),h=o(4942),g=o(1413),x=(o(59962),o(78983)),N=o(7692),p=o(59513),j=o.n(p),b=o(32125),_=o(78820),y=o(80184);function S(e){var s=e.custName,o=e.setCustName,l=e.getData,t=e.data,i=(0,a.useState)(!1),d=(0,n.Z)(i,2),u=d[0],m=d[1],f=(0,a.useState)(),p=(0,n.Z)(f,2),S=p[0],Z=p[1],D=(0,a.useState)(null),C=(0,n.Z)(D,2),w=C[0],M=C[1],k=localStorage.getItem("resId"),R=(0,a.useRef)([]),U=c.N.baseUrl,E=(0,a.useState)({releaseDate:"",versionNumber:""}),T=(0,n.Z)(E,2),F=T[0],I=T[1];console.log(F);var O=(0,a.useState)(!1),A=(0,n.Z)(O,2),V=A[0],B=A[1];return(0,y.jsx)("div",{children:(0,y.jsxs)(x.Tk,{size:"lg",visible:s,onClose:function(){o(!1)},backdrop:"static",children:[(0,y.jsx)(x.p0,{className:"hgt22",style:{cursor:"all-scroll"},children:(0,y.jsx)(x.fl,{children:(0,y.jsx)("span",{className:"ft16",children:" Upload Release Notes"})})}),(0,y.jsxs)(x.sD,{children:[1==V?(0,y.jsxs)("div",{className:"statusMsg error",children:[" ",(0,y.jsx)(_.CSE,{}),"Please select valid values for highlighted fields"]}):"",1==u?(0,y.jsx)("div",{className:"statusMsg success",children:(0,y.jsx)("span",{className:"errMsg",children:"\xa0 Release Notes saved successfully"})}):"",(0,y.jsxs)("div",{className:"row",children:[(0,y.jsxs)("div",{className:"row mb-2",children:[(0,y.jsx)("div",{className:" col-md-3 ",children:(0,y.jsxs)("label",{children:["Release Date :",(0,y.jsx)("span",{className:"error-text",children:"*"})]})}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsxs)("div",{className:"datepicker cancel",ref:function(e){R.current[0]=e},children:[(0,y.jsx)(j(),{id:"releaseDate",selected:S,autoComplete:"off",showMonthDropdown:!0,showYearDropdown:!0,onChange:function(e){console.log(e),Z(e),I((function(s){return(0,g.Z)((0,g.Z)({},s),{},(0,h.Z)({},"releaseDate",v()(e).format("yyyy-MM-DD")))}))},dateFormat:"dd-MMM-yyyy",onKeyDown:function(e){e.preventDefault()}})," "]})}),(0,y.jsxs)("div",{className:" col-md-3 ",children:[(0,y.jsxs)("label",{children:["Version :",(0,y.jsx)("span",{className:"error-text",children:"*"})]})," "]}),(0,y.jsx)("div",{className:" col-md-3 mb-2",children:(0,y.jsx)("div",{className:"textfield",ref:function(e){R.current[1]=e},children:(0,y.jsx)("input",{className:"form-control",id:"versionNumber",type:"text",onChange:function(e){console.log(e),console.log(e.target.value),I((function(s){return(0,g.Z)((0,g.Z)({},s),{},(0,h.Z)({},"versionNumber",e.target.value))}))}})})})]}),(0,y.jsxs)("div",{className:"row mb-2",children:[(0,y.jsx)("div",{className:"textfield col-md-6 p0",children:(0,y.jsx)("div",{className:"textfield",style:{backgroundColor:V?"red":"",border:V?"1px solid red":""},ref:function(e){R.current[2]=e},children:(0,y.jsx)("input",{className:"fileUpload form-control cancel",type:"file",id:"fileName",name:"fileName",autoComplete:"off",accept:".xls, .xlsx",placeholder:"Enter Resource Name",onChange:function(e){M(e.target.files[0]),I((function(s){var o;return(0,g.Z)((0,g.Z)({},s),{},(0,h.Z)({},e.target.id,null===(o=e.target.files[0])||void 0===o?void 0:o.name))}))}})})}),(0,y.jsx)("div",{className:"textfield col-md-6",children:(0,y.jsxs)("button",{onClick:function(){return function(e){console.log(t,"datasahid"),console.log(F,"formdata1"),console.log(null===w||void 0===w?void 0:w.name,"selectedfile");for(var s=!1,n=1;n<t.length;n++){var a=t[n].version_number,c=t[n].release_date,i=t[n].file_name;if(a==F.versionNumber&&c==F.releaseDate&&i==(null===w||void 0===w?void 0:w.name)){s=!0;break}}console.log(R);var d=(0,b.Z)(R);console.log(d),d?B(!0):0==s&&(r().postForm(U+"/supportms/support/UploadFileAndData?versionNumber=".concat(F.versionNumber,"&releaseDt=").concat(F.releaseDate,"&loggedUserId=").concat(k),{file:w},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e,"ressahid"),B(!1),m(!0),l()})).catch((function(e){console.log(e)})),setTimeout((function(){o(!1)}),3e3))}()},id:"upload",name:"upload",className:"btn btn-primary",children:[(0,y.jsx)(N.jC8,{})," Upload"]})})]})]})]})]})})}var Z=function(e){e.customerId;var s,o=(0,a.useState)([{}]),t=(0,n.Z)(o,2),f=t[0],h=t[1],g=(0,a.useState)([]),x=(0,n.Z)(g,2),N=x[0],p=(x[1],c.N.baseUrl),j=(0,a.useState)(!1),b=(0,n.Z)(j,2),Z=b[0],D=b[1],C=(0,a.useState)([]),w=(0,n.Z)(C,2),M=w[0],k=(w[1],(0,a.useState)()),R=(0,n.Z)(k,2),U=R[0],E=R[1];console.log(f);var T=(0,a.useState)([]),F=(0,n.Z)(T,2),I=F[0],O=F[1],A=(0,a.useState)([]),V=(0,n.Z)(A,2),B=V[0],H=V[1],J=(0,a.useState)([]),L=(0,n.Z)(J,2),z=(L[0],L[1],(0,a.useState)()),G=(0,n.Z)(z,2),K=G[0],P=G[1],Y=(0,a.useState)(!1),q=(0,n.Z)(Y,2),Q=q[0],W=q[1];console.log(K);var X=function(e){return console.log("in line 91------------"),console.log(e.svn_revision),E(e.svn_revision),P(e.doc_folder_id),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(m.rU,{style:{cursor:"pointer"},onClick:function(){le(e)},title:e.file_name,"data-toggle":"tooltip",children:[" ",e[B[0]]]})})},$=function(e){return(0,y.jsx)("div",{Align:"center",children:e.S_No})},ee=function(e){return(0,y.jsx)("div",{Align:"right",children:e.S_No})},se=function(e){return console.log(e.document_id),(0,y.jsx)("div",{"data-toggle":"tooltip",title:v()(e.release_date).format("DD-MMM-yyyy"),children:v()(e.release_date).format("DD-MMM-yyyy")})};console.log(M);var oe=null===(s=Object.keys(I))||void 0===s?void 0:s.map((function(e,s){return(0,y.jsx)(u.s,{sortable:!0,body:"file_name"==e?X:"S_No"==e?$:"version_number"==e?ee:"release_date"==e&&se,field:e,header:I[e]},e)}));console.log(U);var le=function(e){console.log(null===e||void 0===e?void 0:e.file_name),console.log(e);var s=p+"/VendorMS/vendor/downloadFile?documentId=".concat(null===e||void 0===e?void 0:e.document_id,"&svnRevision=").concat(null===e||void 0===e?void 0:e.svn_revision),o=!0;r()({url:s,method:"GET",responseType:"blob"}).then((function(s){o=!1,console.log(s,"respons");var l=window.URL.createObjectURL(new Blob([s.data]));console.log(l);var n=document.createElement("a");console.log(n),n.href=l,n.setAttribute("download",e.file_name),document.body.appendChild(n),n.click()})),console.log(o,"res"),setTimeout((function(){1==o?(console.log("not downloadable"),W(!0)):W(!1)}),500)};(0,a.useEffect)((function(){f[0]&&O(JSON.parse(JSON.stringify(f[0])))}),[f]),console.log(N);var ne=function(){r().get(p+"/supportms/support/getHelpReleseNotes").then((function(e){var s,o=e.data;o.forEach((function(e,s){e.S_No=s+1,e.id=s}));var n=["file_name"];H(n);var a=[].concat([{S_No:"S.No",version_number:"Version Number",file_name:"Release Notes",release_date:"Release Date"}],(0,l.Z)(o));console.log(a),console.log(null===(s=o[0])||void 0===s?void 0:s.document_id),h(a),console.log(n)})).catch((function(e){console.log("Error :"+e)}))};return(0,a.useEffect)((function(){ne()}),[]),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"col-md-12 mb-2",children:(0,y.jsxs)("div",{className:"pageTitle",children:[(0,y.jsx)("div",{className:"childOne"}),(0,y.jsx)("div",{className:"childTwo",children:(0,y.jsx)("h2",{children:"Release Notes"})}),(0,y.jsx)("div",{className:"childThree"})]})}),(0,y.jsxs)("div",{className:"customCard",children:[(0,y.jsx)("div",{className:"col-md-12",children:(0,y.jsx)("div",{className:"col-2 mb-2",children:(0,y.jsxs)("button",{id:"upload",name:"upload",className:"btn btn-primary",onClick:function(){return W(!1),void D(!0)},children:[(0,y.jsx)(i.DUB,{}),"Upload"]})})}),1==Q?(0,y.jsxs)("div",{className:"statusMsg error",children:[(0,y.jsx)(_.CSE,{})," Document is not available"]}):"",(0,y.jsx)(d.Z,{data:f,linkColumns:B,dynamicColumns:oe,headerData:I,setHeaderData:O,rows:10})]}),Z?(0,y.jsx)(S,{custName:Z,setCustName:D,getData:ne,folder:K,data:f}):""]})}}}]);
//# sourceMappingURL=4994.0187cab9.chunk.js.map