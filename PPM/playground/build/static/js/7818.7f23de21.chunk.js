(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7818],{3900:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var s=n(29439),a=n(72791),i=n(23382),c=n(78794),r=n(16030),o=n(49648),l=n(93433),d=n(49177),u=n(34911),m=n(56637),p=n(53824),h=n(48462),f=n(59170),x=n(80184),v=function(e){var t=e.item,n=e.propsValue,s=e.isInSelected,a={fte0:(0,x.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Employee"}),fte1:(0,x.jsx)("img",{src:d,alt:"(fte_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Employee"}),fte2:(0,x.jsx)("img",{src:m,alt:"(fte_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Employee in notice period"}),subk0:(0,x.jsx)("img",{src:h,alt:"(subk_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Contractor"}),subk1:(0,x.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Contractor"}),subk2:(0,x.jsx)("img",{src:f,alt:"(subk_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Contractor in notice period"})},i=(0,r.I0)(),c=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})),l=!!c.some((function(e){return e.id==t.id}))&&(!!s||(!c.find((function(e){return e.id==t.id})).hasOwnProperty("key")||""));return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("span",{className:"option col-md-4 employee-element",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"170px",marginTop:"6px"},title:t.salesPersonName?t.salesPersonName:t.text,children:"EngagementS"==n?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("input",{type:"checkbox",id:t.id,name:t.Name,checked:l,onChange:function(e){var n=e.target.checked;i((0,o.AQ)({item:t,isChecked:n}))},className:"mr-2"}),(0,x.jsx)("span",{className:"button-pointer",onClick:function(e){var n=!document.getElementById(t.id).checked;i((0,o.AQ)({item:t,isChecked:n}))},title:t.Name,children:null===t||void 0===t?void 0:t.Name})]}):(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsx)("input",{type:"checkbox",id:t.id,name:t.salesPersonName?t.salesPersonName:t.text,checked:l,onChange:function(e){var n=e.target.checked;i((0,o.AQ)({item:t,isChecked:n}))}}),"\xa0",a[t.type],"\xa0",(0,x.jsx)("span",{className:"button-pointer",onClick:function(e){var n=!document.getElementById(t.id).checked;i((0,o.AQ)({item:t,isChecked:n}))},children:t.salesPersonName?t.salesPersonName:t.text})]})},t.id)})};function g(e){var t=e.data,n=e.input,i=e.search,c=e.propsValue,o=(0,a.useState)([]),l=(0,s.Z)(o,2),d=l[0],u=l[1],m=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp}));return(0,a.useEffect)((function(){u((function(){return"EngagementS"==n?t.filter((function(e){return e.Name.toLowerCase().includes(i)})).map((function(e){return(0,x.jsx)(v,{item:e,propsValue:c},e.id)})):t.filter((function(e){return e.salesPersonName.toLowerCase().includes(i)})).map((function(e){return(0,x.jsx)(v,{item:e,propsValue:c},e.id)}))}))}),[m,t,i]),(0,x.jsxs)("div",{className:"row scroll-container indirectse",style:{margin:"0px",border:"1px solid #ccc",borderRadius:"3px"},children:[0===d.length&&(0,x.jsx)("div",{className:"col-md-12",id:"noExecDiv",children:"No Executives found"}),d]})}var j=function(e){e.selectedSEDisp;var t=e.s1,n=(e.nonRepeatedData,(0,a.useState)([])),i=(0,s.Z)(n,2),c=(i[0],i[1],t.filter((function(e){return"id"!==e.key}))),o=(0,a.useState)(!0),l=(0,s.Z)(o,2),d=l[0],u=(l[1],c.salesPersonName,(0,a.useState)([])),m=(0,s.Z)(u,2),p=(m[0],m[1],(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})));return(0,r.v9)((function(e){return e.selectedSEState.isShowInactiveChecked})),(0,r.I0)(),(0,x.jsx)("div",{className:"row engScroll",style:{width:"98%",marginLeft:"14px"},children:0===p.length?(0,x.jsx)("div",{className:"col-md-12",children:"None Selected"}):(0,x.jsx)("div",{style:{display:"grid",gridTemplateColumns:"auto auto auto auto"},children:null===p||void 0===p?void 0:p.map((function(t){return(0,x.jsx)("div",{children:(0,x.jsx)("span",{children:1==d&&(0,x.jsx)(v,{item:t,propsValue:e.propsValue,isInSelected:!0},t.id)})},t.id)}))})})},S=n(1413),y=n(56355),N=n(78983),E=n(76053),b=n(34831),I=n(74569),k=n.n(I),C=n(63521);var Z=function(e){var t=e.data,n=(e.employeeElement,e.setselectedSE),i=(e.showInactive,e.getvTeamData),c=e.search,d=(e.newMemberDropdown,e.propsValue),u=e.setValidationMessage,m=e.teamMemData,p=(0,a.useState)(!1),h=(0,s.Z)(p,2),f=h[0],g=h[1],j=(0,a.useState)(!1),S=(0,s.Z)(j,2),I=S[0],Z=S[1],w=(0,a.useState)(t.teamName),T=(0,s.Z)(w,2),_=(T[0],T[1],(0,a.useState)(!1)),M=(0,s.Z)(_,2),A=M[0],D=M[1],P=(0,a.useState)(),q=(0,s.Z)(P,2),V=q[0],L=q[1],O=(0,a.useState)(0),R=(0,s.Z)(O,2),B=R[0],F=R[1],z=(0,a.useState)(!1),U=(0,s.Z)(z,2),J=U[0],Q=U[1],H=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})),G=(0,a.useState)(!0),Y=(0,s.Z)(G,2),X=Y[0],$=Y[1],W=(0,r.v9)((function(e){return e.selectedSEState.isShowInactiveChecked})),K=(0,r.I0)(),ee=(0,a.useState)([]),te=(0,s.Z)(ee,2),ne=(te[0],te[1],(0,a.useRef)());function se(e){var t=e.open,n=e.setOpen,s=(e.id,e.data),a=e.getvTeamData;return(0,x.jsx)("div",{className:"reviewLogDeletePopUp",children:(0,x.jsxs)(N.Tk,{size:"sm",visible:t,backdrop:"static",alignment:"center",onClose:function(){n(!1)},children:[(0,x.jsx)(N.p0,{className:"",children:(0,x.jsx)(N.fl,{children:(0,x.jsx)("span",{className:"",children:"Confirmation"})})}),(0,x.jsxs)(N.sD,{children:[(0,x.jsx)("span",{children:"Are you sure you want to delete the team?"}),(0,x.jsx)("hr",{}),(0,x.jsxs)("div",{style:{display:"flex"},children:[(0,x.jsx)("button",{type:"Ok",className:"btn btn-primary",onClick:function(){!function(e){k().delete(ae+"/SalesMS/MasterController/deleteVirtualTeam?teamId=".concat(e)).then((function(e){console.log(e),a()})).catch((function(e){console.log(e)}))}(s.teamId),console.log(s),n(!1)},style:{marginLeft:"30%"},children:(0,x.jsx)("span",{children:"Yes"})}),(0,x.jsx)("button",{type:"Cancel",className:"btn btn-secondary mx-2",onClick:function(){n(!1)},children:(0,x.jsx)("span",{children:"No"})})]})]})]})})}(0,a.useEffect)((function(){var e=t.data,n=e.filter((function(e){return H.some((function(t){return e.memId==t.id}))}));e.length==n.length&&e.length>0?D(!0):D(!1)}),[H]);var ae=b.N.baseUrl;return(0,x.jsxs)("div",{className:"section col-md-12  optionList ",children:[(0,x.jsxs)("div",{className:"selectSEbtnContainer",children:[(0,x.jsx)("input",{type:"checkbox",id:"selectAllExec",onChange:function(e){var s=e.target.checked;!function(e,t){var s=e.map((function(e){return{type:e.type,salesPersonName:e.memName,id:e.memId,status:e.status}}));t?s.filter((function(e){return e.status!==(W?"":"empInactive")})).filter((function(e){return!H.some((function(t){return n=t,e.id===n.id;var n}))})).forEach((function(e){K((0,o.AQ)({item:e,isChecked:t}))})):s.filter((function(e){return e.status!==(W?"":"empInactive")})).forEach((function(e){K((0,o.AQ)({item:e,isChecked:t}))})),n(A?function(e){var t=e.map((function(e){return e.id})),n=s.filter((function(e){return e.status!==(W?"":"empInactive")})).filter((function(e){return!t.includes(e.id)}));return[].concat((0,l.Z)(e),(0,l.Z)(n))}:function(e){var t=s.map((function(e){return e.id}));return e.filter((function(e){return!t.includes(e.id)}))})}(t.data,s)},checked:A}),1==!f?(0,x.jsx)("label",{children:t.teamName}):(0,x.jsx)("input",{ref:ne,id:"virtualTeamName",style:{border:"1px solid ".concat(X?"":"red"),backgroundColor:X?"transparent":"rgba(255, 0, 0, 0.2)",color:X?"":"red",fontWeight:X?"normal":"bold"},type:"text",defaultValue:t.teamName,onChange:function(e){L(e.target.value)}}),!f&&!I&&(0,x.jsx)("span",{title:"Edit Team",onClick:function(){return g(!0)},className:"button-pointer",children:(0,x.jsx)(y.KHI,{})}),f&&(0,x.jsx)("span",{title:"Save Team",onClick:function(){var e=ne.current.value;e==t.teamName?($(!1),u("Team Name Already Exists !!"),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){u(),$(!0)}),3e3)):null==e||""==e||0==e.length?($(!1),u("Please enter Team Name !!"),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){u(),$(!0)}),3e3)):function(e){var t={id:e,teamName:V};k().post(ae+"/SalesMS/MasterController/postSalesVirtualTeamMembers",t).then((function(){i(),g(!1)})).catch((function(e){console.log(e)}))}(t.teamId)},children:(0,x.jsx)(y.TvB,{})}),f&&(0,x.jsx)("span",{title:"Cancel",onClick:function(){return g(!1)},children:(0,x.jsx)(E.v8y,{})}),(0,x.jsxs)("span",{className:"selectSEformBtns",children:[!I&&!f&&(0,x.jsx)("span",{title:"Add Member to Team",onClick:function(){return Z(!0)},className:"button-pointer",children:(0,x.jsx)(y.EIY,{})}),I&&(0,x.jsx)("span",{title:"cancel",onClick:function(){return Z(!1)},children:(0,x.jsx)(E.v8y,{})}),I&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"autoComplete-container ",children:(0,x.jsx)("div",{className:X?"":"error-block",children:(0,x.jsx)(C.ReactSearchAutocomplete,{className:"autocomplete",items:m,placeholder:"Enter a name",type:"text",name:"name",id:"userId",onSelect:function(e){F(e.resourcesId)},showIcon:!1})})}),(0,x.jsx)("button",{type:"button",className:"btn btn-primary btnSE",onClick:function(){null==B||0==B||void 0==B?($(!1),u("Please select a team member !!"),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){u(),$(!0)}),3e3)):t.data.some((function(e){return e.memId==B}))?(u("Resource already exists in the team !!"),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((function(){u()}),3e3)):(!function(e){var t={teamId:e,executiveId:B,createdDate:""};k().post(ae+"/SalesMS/MasterController/addVirtualMembers",t).then((function(){i(),g(!1)})).catch((function(e){console.log(e)}))}(t.teamId),i(),Z(!1))},children:"Add"})]})]}),!f&&!I&&(0,x.jsx)("span",{title:"Delete Team",onClick:function(){Q(!0)},className:"button-pointer",children:(0,x.jsx)(y.AMf,{})})]}),(0,x.jsxs)("div",{className:"row engScroll virualTeamRender",children:[0===t.data.length&&(0,x.jsx)("div",{className:"col-md-12",id:"noExecDiv",children:"No Members found"}),t.data.filter((function(e){return e.status!==(W?"":"empInactive")})).filter((function(e){return e.memName.toLowerCase().includes(c)})).map((function(e){var t={type:e.type,salesPersonName:e.memName,id:e.memId,status:e.status};return(0,x.jsx)(v,{item:t,propsValue:d},t.id)})),J&&(0,x.jsx)(se,{open:J,setOpen:Q,data:t,getvTeamData:i})]})]})};function w(e){var t=e.employeeElement,n=e.setselectedSE,i=e.showInactive,c=e.getvTeamData,r=e.seOptions,o=e.vTeamData,l=e.search,d=e.propsValue,u=e.setValidationMessage,m=(0,a.useState)([]),p=(0,s.Z)(m,2),h=p[0],f=p[1],v=(0,a.useState)([]),g=(0,s.Z)(v,2),j=g[0],y=g[1],N=b.N.baseUrl;(0,a.useEffect)((function(){k().get(N+"/SalesMS/MasterController/getResources?isActive=1").then((function(e){var t=e.data,n=t.map((function(e){var t=(0,S.Z)({},e);return t.name=t.resourceName,delete t.resourceName,t}));y(n);var s=t.map((function(e){return(0,x.jsx)("option",{value:e.resourcesId,children:e.resourceName},e.userId)}));f(s)})).catch((function(e){console.log(e)}))}),[]);var E=o.map((function(e){return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Z,{data:e,employeeElement:t,setselectedSE:n,showInactive:i,getvTeamData:c,search:l,seOptions:r,newMemberDropdown:h,propsValue:d,setValidationMessage:u,teamMemData:j},e.teamId),(0,x.jsx)("div",{className:"col-md-12 nopadding clearfix"})]})}));return(0,x.jsx)("div",{className:"col-md-12",children:E})}var T=n(7692),_=n(37762),M=n(74165),A=n(15861),D=n(4942),P=n(65902),q=n(99651),V=n(41523),L=n(6748),O=n(64554),R=n(56125),B=n(66934),F=n(12065),z=n(99259),U=n(20890),J=(n(3555),n(27336)),Q=n(28182);n(29718);function H(e){return(0,x.jsx)(z.Z,(0,S.Z)((0,S.Z)({className:"hierarchyCollapseIcon",fontSize:"inherit",style:{width:12,height:12}},e),{},{children:(0,x.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function G(e){return(0,x.jsx)(z.Z,(0,S.Z)((0,S.Z)({className:"close",fontSize:"inherit",style:{width:12,height:12}},e),{},{children:(0,x.jsx)("path",{d:"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z"})}))}function Y(e){return(0,x.jsx)(z.Z,(0,S.Z)((0,S.Z)({className:"hierarchyExpandIcon",fontSize:"inherit",style:{width:12,height:12}},e),{},{children:(0,x.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function X(e){var t=(0,J.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return(0,x.jsx)(J.q.div,{style:t,children:(0,x.jsx)(R.Z,(0,S.Z)({},e))})}function $(e){var t=e.onSelectSE,n=e.setGrpId,i=e.accessData,c=e.dataAccess,v={fte0:(0,x.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Ex-Employee"}),fte1:(0,x.jsx)("img",{src:d,alt:"(fte_active_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Active Employee"}),fte2:(0,x.jsx)("img",{src:m,alt:"(fte_notice_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Employee in notice period"}),subk0:(0,x.jsx)("img",{src:h,alt:"(subk_inactive_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Ex-Contractor"}),subk1:(0,x.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Active Contractor"}),subk2:(0,x.jsx)("img",{src:f,alt:"(subk_notice_icon)",style:{height:"12px",marginTop:"-5px",marginRight:"10px"},title:"Contractor in notice period"})};console.log(c);var g=(0,a.useState)(null),j=(0,s.Z)(g,2),N=j[0],E=j[1],I=(0,r.v9)((function(e){return e.selectedSEState.isShowInactiveChecked})),C=(0,r.v9)((function(e){return e.selectedSEState.isIndividualChecked})),Z=b.N.baseUrl,w=(0,a.useState)([]),T=(0,s.Z)(w,2),R=T[0],z=T[1],J=localStorage.getItem("resId"),$=(0,r.I0)(),W=(0,a.useState)(null),K=(0,s.Z)(W,2),ee=K[0],te=K[1],ne=(0,a.useState)({}),se=(0,s.Z)(ne,2),ae=(se[0],se[1],(0,a.useState)([])),ie=(0,s.Z)(ae,2),ce=ie[0],re=ie[1],oe=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})),le=oe.map((function(e){return e.id})),de=oe.filter((function(e){return"directsalesEx"===e.key})).map((function(e){return e.id})),ue=I?ce:null===ce||void 0===ce?void 0:ce.filter((function(e){return"empInactive"!==e.status})),me=de[0],pe=(0,a.useState)(),he=(0,s.Z)(pe,2),fe=he[0],xe=he[1];(0,a.useEffect)((function(){if(ee){var e=function(e,t,n){re(e),t=(0,S.Z)({id:"id",parentId:"parent",children:"subrows"},t);var s={},a=[],i=t.children;return e.forEach((function(e){var n=e[t.id],a=e[t.parentId];s[n]=(0,S.Z)((0,S.Z)((0,D.Z)({},i,[]),e),s[n]),s[a]=s[a]||(0,D.Z)({},i,[]),s[a][i].push(s[n])})),Object.values(s).forEach((function(e){"undefined"===typeof e[t.id]&&a.push.apply(a,(0,l.Z)(e[i]))})),a}(ee);if(e.length>1){var t=e.find((function(e){return"#"==e.parent}));t&&xe(t)}else xe(e[0]);E(e)}}),[ee]),(0,a.useEffect)((function(){R&&te(I?R:R.filter((function(e){return"fte0"!==e.type&&"subk0"!==e.type})))}),[I,R]),(0,a.useEffect)((function(){Ie()}),[]);var ve=a.forwardRef((function(e,t){var n,s=e.classes,a=e.className,i=e.label,c=e.nodeId,r=e.icon,o=e.expansionIcon,l=e.displayIcon,d=(0,P.Z)(c),u=d.disabled,m=d.expanded,p=d.selected,h=d.focused,f=d.handleExpansion,v=d.handleSelection,g=d.preventSelection,j=r||o||l,S=function(){var e=(0,A.Z)((0,M.Z)().mark((function e(t){var n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(t),null===(n=c)||void 0===n?void 0:n.split("_")[2],null===n||void 0===n?void 0:n.split("_")[0],null===n||void 0===n?void 0:n.split("_")[1];case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)("div",{className:(0,Q.default)(a,s.root,(n={},(0,D.Z)(n,s.expanded,m),(0,D.Z)(n,s.selected,p),(0,D.Z)(n,s.focused,h),(0,D.Z)(n,s.disabled,u),n)),onMouseDown:function(e){g(e)},ref:t,children:[(0,x.jsx)("div",{onClick:function(e){f(e)},className:s.iconContainer,children:j}),(0,x.jsx)(U.Z,{onClick:S,component:"div",children:i})]})})),ge=function(e,t){var n=[];return function t(s){var a,i=(0,_.Z)(e);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.parent===s&&(n.push(c.id),t(c.id))}}catch(r){i.e(r)}finally{i.f()}}(t),n}(ue,me),je=(C?[me].concat((0,l.Z)(le)):[].concat((0,l.Z)(ge),(0,l.Z)(le),[me])).join(",");function Se(e){var t=[];return e.map((function(e){if(t.push(e.id),e.subrows.length>0){var n=Se(e.subrows);t.push.apply(t,(0,l.Z)(n))}})),t}(0,a.useEffect)((function(){$((0,o.$f)(je))}),[je]);document.getElementsByClassName("iconContainer");var ye=(0,a.useState)(null),Ne=(0,s.Z)(ye,2),Ee=(Ne[0],Ne[1],(0,B.ZP)((function(e){var t,s,i,c,r,o,l,d,u,m,p,h,f,g,j,E;return(0,x.jsx)("div",{className:"hierarchy tree",children:(0,a.createElement)(q.Z,(0,S.Z)((0,S.Z)({ContentComponent:ve},e),{},{key:String(null===(t=e.node)||void 0===t?void 0:t.id),nodeId:String(null===(s=e.node)||void 0===s?void 0:s.id),onClick:function(t){var s,a,i=Se((a=null===(s=e.node)||void 0===s?void 0:s.id,N[0].subrows.filter((function(e){return e.id==a}))));n(i)},icon:(E=null===(i=e.node)||void 0===i?void 0:i.id,ee.find((function(e){return e.parent==E}))?"":(0,x.jsx)(G,{})),label:(0,x.jsxs)(O.Z,{sx:{display:"flex",alignItems:"center",p:.5,pr:0},children:[(0,x.jsx)(O.Z,{color:"inherit",children:"Department"==(null===(c=e.node)||void 0===c?void 0:c.type)?(0,x.jsx)(y.I$,{}):v[null===(r=e.node)||void 0===r?void 0:r.type]}),(0,x.jsx)(U.Z,{variant:"body2",sx:{fontWeight:"inherit"},children:(0,x.jsxs)("span",{style:{color:null!==(o=e.node)&&void 0!==o&&o.text.includes("span")?e.node.text.split('"')[1].split(":")[1]:""},children:[(0,x.jsxs)("span",{children:[" ",null!==(l=e.node)&&void 0!==l&&l.text.includes("span")?null===(d=e.node)||void 0===d?void 0:d.text.split('">')[1].split("(")[0].replaceAll("<b>","").replaceAll("</b>",""):null===(u=e.node)||void 0===u?void 0:u.text.split("(")[0].replaceAll("<b>","").replaceAll("</b>","")]}),(0,x.jsxs)("span",{children:[" ",void 0!=(null===(m=e.node)||void 0===m?void 0:m.text.split("(")[1])?null!==(p=e.node)&&void 0!==p&&p.text.split("(")[1].includes("span")?"("+(null===(h=e.node)||void 0===h?void 0:h.text.split("(")[1].replaceAll("</span>","")):"("+(null===(f=e.node)||void 0===f?void 0:f.text.split("(")[1]):""]})]})})]}),TransitionComponent:X}),Array.isArray(null===(g=e.node)||void 0===g?void 0:g.subrows)?null===(j=e.node)||void 0===j?void 0:j.subrows.map((function(e){return be(e)})):console.log("coming here?"))})}))((function(e){var t,n=e.theme;return t={},(0,D.Z)(t,"& .".concat(V.Z.iconContainer),{"& .close":{opacity:.3}}),(0,D.Z)(t,"& .".concat(V.Z.group),{marginLeft:15,paddingLeft:18,borderLeft:"1px dashed ".concat((0,F.Fq)(n.palette.text.primary,.4))}),t}))),be=function(e){return(0,x.jsx)("div",{children:(0,x.jsx)(Ee,{node:e})})};console.log(i,c);var Ie=function(){k().get(1e3==i||500==i?Z+"/CommonMS/master/getDirectSe?loggedUserId=".concat(J,"&activeId=1"):690==c||641==c||600==c||100==i||909==c?Z+"/ProjectMS/project/getdirectHirarchyBasis?loggedUserId=".concat(1):Z+"/ProjectMS/project/getdirectHirarchyBasis?loggedUserId=".concat(J)).then((function(e){var t=e.data.map((function(e){try{var t=JSON.parse(e.li_attr);return void 0!==t.sestatus&&(e.status=t.sestatus),e.li_attr=JSON.stringify(t),e.key="directsalesEx",e}catch(n){return console.error("Error processing object: ".concat(n)),e}}));z(t)})).catch((function(e){console.log(e)}))};return(0,x.jsx)("div",{children:(0,x.jsx)(L.Z,{"aria-label":"rich object",ContentComponent:ve,onNodeSelect:function(e,n){var s=(0,l.Z)(R).find((function(e){return e.id===n}));s&&t(s,e)},defaultParentIcon:(0,x.jsx)("div",{className:"iconContainer",children:(0,x.jsx)(H,{className:"hierarchyIcons"})}),defaultCollapseIcon:(0,x.jsx)("div",{className:"iconContainer",children:(0,x.jsx)(H,{className:"hierarchyIcons"})}),defaultExpandIcon:(0,x.jsx)("div",{className:"iconContainer",children:(0,x.jsx)(Y,{className:"hierarchyIcons"})}),defaultEndIcon:(0,x.jsx)("div",{className:"iconContainer",children:(0,x.jsx)(Y,{className:"hierarchyIcons"})}),sx:{"& .css-1g86id8-MuiTreeItem-content .MuiTreeItem-label":{width:"auto",minwidth:0}},className:"hierarchyTree",defaultExpanded:["id"],children:N&&be(fe)})})}n(89704),n(4751);var W=(0,a.forwardRef)((function(e,t){var n=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})),i=(0,r.v9)((function(e){return e.selectedSEState.isIndividualChecked})),c=(0,a.useState)(""),v=(0,s.Z)(c,2),S=v[0],E=v[1],I=(0,r.v9)((function(e){return e.selectedSEState.isShowInactiveChecked})),C=(0,r.I0)(),Z=e.value,_=(e.permissions,e.setGrpId),M=e.SetBulkIds,A=e.accessData,D=e.dataAccess,P=e.setVisible,q=(0,a.useState)(!1),V=(0,s.Z)(q,2),L=V[0],O=V[1],R=(0,a.useState)([]),B=(0,s.Z)(R,2),F=(B[0],B[1],localStorage.getItem("resId")),z=b.N.baseUrl,U=(0,a.useState)(!1),J=(0,s.Z)(U,2),Q=J[0],H=J[1],G=(0,a.useState)([]),Y=(0,s.Z)(G,2),X=Y[0],W=Y[1],K=(0,a.useState)(!1),ee=(0,s.Z)(K,2),te=ee[0],ne=ee[1],se=(0,a.useState)([]),ae=(0,s.Z)(se,2),ie=ae[0],ce=ae[1],re=(0,a.useState)([]),oe=(0,s.Z)(re,2),le=oe[0],de=(oe[1],(0,a.useState)(!1)),ue=(0,s.Z)(de,2),me=ue[0],pe=ue[1],he=(0,a.useState)([]),fe=(0,s.Z)(he,2),xe=fe[0],ve=fe[1],ge=(0,a.useState)(!1),je=(0,s.Z)(ge,2),Se=je[0],ye=je[1],Ne=(0,a.useState)(""),Ee=(0,s.Z)(Ne,2),be=Ee[0],Ie=Ee[1],ke=(0,a.useState)([]),Ce=(0,s.Z)(ke,2),Ze=Ce[0],we=Ce[1],Te=(0,a.useState)([]),_e=(0,s.Z)(Te,2),Me=_e[0],Ae=_e[1],De=function(){k().get(z+"/SalesMS/MasterController/getVirtualTeamsData?userId=".concat(F)).then((function(e){var t=e.data;Ae(t)})).catch((function(e){console.log(e)}))},Pe={fte0:(0,x.jsx)("img",{src:u,alt:"(fte_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Employee"}),fte1:(0,x.jsx)("img",{src:d,alt:"(fte_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Employee"}),fte2:(0,x.jsx)("img",{src:m,alt:"(fte_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Employee in notice period"}),subk0:(0,x.jsx)("img",{src:h,alt:"(subk_inactive_icon)",style:{height:"12px",marginTop:"-5px"},title:"Ex-Contractor"}),subk1:(0,x.jsx)("img",{src:p,alt:"(subk_active_icon)",style:{height:"12px",marginTop:"-5px"},title:"Active Contractor"}),subk2:(0,x.jsx)("img",{src:f,alt:"(subk_notice_icon)",style:{height:"12px",marginTop:"-5px"},title:"Contractor in notice period"})},qe=function(){var e={teamName:X,userId:F};k().post(z+"/SalesMS/MasterController/addVirtualTeams",e).then((function(){De(),H(!1)})).catch((function(e){console.log(e)}))};(0,a.useImperativeHandle)(t,(function(){return{setGlobalState:function(){localStorage.setItem("selectedSE",JSON.stringify(ie)),"EngagementS"!=e.value&&localStorage.setItem("isIndividual",Se)},resetTOlocalState:function(){var t=null===localStorage.getItem("selectedSE")?[]:JSON.parse(localStorage.getItem("selectedSE"));ce(t),"EngagementS"!=e.value&&ye("true"===localStorage.getItem("isIndividual"))}}}));var Ve=function(e,t){C((0,o.AQ)({item:e,isChecked:t})),ce((function(t){var n=null===t||void 0===t?void 0:t.filter((function(e){return!(null!==e&&void 0!==e&&e.hasOwnProperty("key"))})),s=n.findIndex((function(t){return t.id===e.id}));return-1!==s&&n.splice(s,1),[].concat((0,l.Z)(n),[e])})),O(!0)};var Le=(0,a.useState)([]),Oe=(0,s.Z)(Le,2),Re=Oe[0],Be=(Oe[1],Re.reduce((function(e,t){return"directsalesEx"===JSON.parse(t.props.children).key?(e=e.filter((function(e){return"directsalesEx"!==JSON.parse(e.props.children).key}))).push(t):e.push(t),e}),[]));return console.log(A),(0,a.useEffect)((function(){De()}),[]),(0,a.useEffect)((function(){Ze.filter((function(e){return n.some((function(t){return e.id==t.id}))})).length==Ze.length&&Ze.length>0?pe(!0):pe(!1)}),[n,Ze]),(0,a.useEffect)((function(){"EngagementS"==e.value?k().get(z+"/ProjectMS/Engagement/customerdata").then((function(e){var t=e.data;ve(t)})).catch((function(e){console.log(e)})):k().get(z+"/SalesMS/MasterController/getInDirectSalesExecutiveTreeData?userId=512").then((function(e){var t=e.data;console.log(t),t.push({type:"fte1",salesPersonName:"Unassigned",id:9999,status:"empActive"}),ve(t)})).catch((function(e){console.log(e)}))}),[]),(0,a.useEffect)((function(){var t=null===localStorage.getItem("selectedSE")?[]:JSON.parse(localStorage.getItem("selectedSE"));"EngagementS"==e.value?ce((function(e){var t=e.map((function(e){return e.id})),n=xe.filter((function(e){return!t.includes(e.id)}));return[].concat((0,l.Z)(e),(0,l.Z)(n))})):ce(t),"EngagementS"!=e.value&&ye("true"===localStorage.getItem("isIndividual"))}),[xe]),(0,a.useEffect)((function(){var e=(0,l.Z)(xe);if(I)if(be){var t=e.filter((function(e){return"EngagementS"==Z?e.Name.toLowerCase().includes(be):e.salesPersonName.toLowerCase().includes(be)}));we(t)}else we(e);else{var n=e.filter((function(e){return"empInactive"!=e.status}));be&&(n=n.filter((function(e){return"EngagementS"==Z?e.Name.toLowerCase().includes(be):e.salesPersonName.toLowerCase().includes(be)}))),we(n),C((0,o.$L)(I))}}),[I,xe,be]),(0,x.jsxs)("div",{className:"col-md-12",children:[(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsxs)("div",{className:"col-md-12 row",children:[(0,x.jsxs)("div",{className:"col-md-4 row",style:{marginLeft:"6px"},children:[(0,x.jsx)("label",{className:"col-3",style:{display:"initial"},htmlFor:"engagementName",children:"Search"}),(0,x.jsx)("span",{className:"col-1 ",children:":"}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsx)("input",{type:"text",placeholder:"Type to Search",onChange:function(e){return Ie(e.target.value.toLowerCase())}})})]}),"EngagementS"==e.value?"":(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsxs)("div",{className:"col-md-2",children:[(0,x.jsx)("input",{type:"checkbox",id:"showInactive",name:"showInactive",onChange:function(e){ne((function(e){return!e})),C((0,o.Sb)())},checked:I}),(0,x.jsx)("label",{style:{marginTop:"-22px",marginLeft:"17%"},children:"Show Inactive"})]}),(0,x.jsxs)("div",{className:"col-md-2",children:[(0,x.jsx)("input",{type:"checkbox",id:"SelectIndividual",name:"SelectIndividual",onChange:function(){ye((function(e){return!e})),C((0,o.At)()),M(!1)},checked:i}),(0,x.jsx)("label",{style:{marginTop:"-22px",marginLeft:"17%"},children:"Select Individual"}),"\xa0"]}),(0,x.jsxs)("div",{className:"col-md-4 d-flex justify-content-end",children:[(0,x.jsxs)(N.u5,{onClick:function(){C((0,o.Xm)("undo"))},style:{marginRight:"5px",padding:"5px"},children:[(0,x.jsx)(y.ceS,{})," Undo"]}),(0,x.jsxs)(N.u5,{onClick:function(){C((0,o.Xm)("save")),P(!1)},style:{padding:"5px"},children:[(0,x.jsx)(y.TvB,{})," Save"]})]})]})]})}),(0,x.jsxs)("div",{className:"col-md-4 form-check",style:{marginLeft:"10px"},children:[(0,x.jsx)("input",{type:"checkbox",id:"SelectedItems",name:"SelectedItems",className:"form-check-input",onChange:function(){ce([]),C((0,o.vu)())},checked:n.length>0}),(0,x.jsxs)("label",{className:"form-check-label",children:["Selected items ",(0,x.jsx)("span",{className:"col-1 ",children:":"})]})]}),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(j,{selectedSEDisp:le,s1:Re,visible:L,selectedSE:ie,nonRepeatedData:Be,propsValue:e.value})}),(0,x.jsx)("div",{className:"col-md-12 clearfixsss",style:{height:"10px"}}),(0,x.jsxs)("div",{className:"col-md-12 nopadding row",children:["EngagementS"==e.value?"":(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsxs)("div",{className:"col-md-4 pr-0 pl-4 mt-0.5",children:[(0,x.jsx)("label",{children:"Direct Sales Executives"}),(0,x.jsx)("div",{className:"col-md-9 card customCard selectSeExpand mt-1 scroll-container directse",style:{width:"100%"},children:(0,x.jsx)($,{onSelectSE:Ve,setGrpId:_,dataAccess:D,accessData:A})})]})]}),(0,x.jsxs)("div",{className:"col-md-8 customCard",children:[1e3==A||500==A?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"col-md-4 form-check",children:[(0,x.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:function(e){var t;(t=e.target.checked)?(Ze.forEach((function(e){C((0,o.AQ)({item:e,isChecked:t}))})),pe(!0)):Ze.forEach((function(e){C((0,o.AQ)({item:e,isChecked:t}))}))},checked:me,style:{marginLeft:"-22px"}}),(0,x.jsxs)("label",{className:"form-check-label",children:["EngagementS"==e.value?"All Customers":"Indirect Sales Executives",(0,x.jsx)("span",{className:"col-1 ",children:":"})]})]}),(0,x.jsx)(g,{data:Ze,input:Z,search:be,propsValue:e.value})]}):"",1e3==A?(0,x.jsxs)("div",{children:[(0,x.jsxs)("div",{className:"selectSEformBtns mb-1 mt-3 ",children:[(0,x.jsx)("label",{className:"",children:"Virtual Teams"}),!Q&&(0,x.jsx)("div",{onClick:function(){return H(!0)},className:"button-pointer",title:"Add new team",children:(0,x.jsx)(y.EIY,{className:"button-pointer",title:"Add new team"})}),Q&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{onClick:function(){return H(!1)},children:(0,x.jsx)(T.GTT,{})}),(0,x.jsx)("input",{placeholder:"Team Name",name:"teamName",id:"teamName",onChange:function(e){W(e.target.value)}}),(0,x.jsx)("button",{className:"btn btn-primary btnSE",type:"button",title:"Add Team",onClick:qe,children:(0,x.jsx)("span",{children:"Add"})})]}),S?(0,x.jsx)("div",{className:"statusMsg error",children:(0,x.jsxs)("span",{children:[(0,x.jsx)(y.gJy,{})," "+S]})}):""]}),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:"row",style:{margin:"0px",border:"1px solid rgb(204, 204, 204)",borderRadius:"3px"},children:(0,x.jsx)("div",{className:"scroll-container virtualteam",children:(0,x.jsx)(w,{employeeElement:function(t,s){return(0,x.jsx)("span",{className:"option col-md-4",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"160px",marginTop:"6px"},children:"EngagementS"==e.value?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("input",{type:"checkbox",id:t.id,name:t.Name,checked:n.some((function(e){return e.id==t.id})),onChange:function(e){var n=e.target.checked;Ve(t,n)},className:"mr-2"}),(0,x.jsx)("span",{title:t.Name,children:t.Name})]}):(0,x.jsxs)(x.Fragment,{children:[" ",(0,x.jsx)("input",{type:"checkbox",id:t.id,name:t.salesPersonName,checked:n.some((function(e){return e.id==t.id})),onChange:function(e){return Ve(t,e.target.checked)}}),"\xa0",Pe[t.type],"\xa0",(0,x.jsx)("span",{title:t.salesPersonName,children:t.salesPersonName})]})},t.id)},writeVirtualTeam:qe,setselectedSE:ce,showInactive:te,search:be,vTeamData:Me,setvTeamData:Ae,getvTeamData:De,propsValue:e.value,setValidationMessage:E})})})})]}):""]})]})]})}));function K(e){var t=e.value,n=e.setVisible,l=e.setGrpId,d=e.dataAccess,u=e.SetBulkIds,m=e.visible,p=e.pipelinePermission,h=e.accessData,f=e.selectedSE,v=e.setselectedSE,g=e.seOptions,j=e.setSelectedItems,S=e.selectedItems,y=e.accessBased,N=(0,a.useState)(!1),E=(0,s.Z)(N,2),b=E[0],I=E[1],k=(0,r.I0)(),C=(0,a.useRef)(null),Z=function(){I(!1),n(!1)},w=(0,r.v9)((function(e){return e.selectedSEState.selectedSEProp})),T=null===localStorage.getItem("selectedSELocal")?[]:JSON.parse(localStorage.getItem("selectedSELocal"));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(i.Z,{show:m,onHide:function(){w.length!=T.length?I(!0):n(!1)},size:"xl",backdrop:"static",children:[(0,x.jsx)(i.Z.Header,{closeButton:!0,children:(0,x.jsx)(i.Z.Title,{children:"EngagementS"===t?"Select Customers":"Select Executives"})}),(0,x.jsx)(i.Z.Body,{children:(0,x.jsx)(W,{ref:C,accessData:h,value:t,setGrpId:l,selectedSE:f,setselectedSE:v,dataAccess:d,SetBulkIds:u,seOptions:g,setSelectedItems:j,pipelinePermission:p,selectedItems:S,accessBased:y,setVisible:n})})]}),(0,x.jsxs)(i.Z,{show:b,onHide:Z,centered:!0,children:[(0,x.jsx)(i.Z.Header,{closeButton:!0,children:(0,x.jsx)(i.Z.Title,{children:"Confirm Changes"})}),(0,x.jsx)(i.Z.Body,{children:(0,x.jsx)("p",{children:"Do you want to save your changes before closing?"})}),(0,x.jsxs)(i.Z.Footer,{className:"d-flex justify-content-center",children:[(0,x.jsx)(c.Z,{variant:"primary",onClick:function(){k((0,o.Xm)("save")),I(!1),n(!1)},children:"Yes, Save"}),(0,x.jsx)(c.Z,{variant:"secondary",onClick:Z,children:"No, Cancel"})]})]})]})}},42480:function(){}}]);
//# sourceMappingURL=7818.7f23de21.chunk.js.map