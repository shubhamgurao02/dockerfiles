"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[7465],{27465:function(e,s,t){t.r(s);var n=t(93433),a=t(12860),l=t(29439),i=t(72791),c=t(36167),r=(t(41980),t(39122),t(31896),t(81975),t(56355)),o=t(34831),d=t(78983),u=t(74569),h=t.n(u),m=t(85401),j=t(37145),x=t(1063),p=t(7692),v=t(83854),g=t(32125),f=t(78820),N=t(39126),b=t(73220),S=t(80184);s.default=function(){var e=o.N.baseUrl,s=(0,i.useState)([]),t=(0,l.Z)(s,2),u=(t[0],t[1]),y=(0,i.useState)(new Date),Z=(0,l.Z)(y,2),I=(Z[0],Z[1],(0,i.useState)(!1)),C=(0,l.Z)(I,2),w=C[0],E=C[1],L=(0,i.useState)(r.UdN),_=(0,l.Z)(L,2),P=_[0],k=_[1],F=(0,i.useState)([]),T=(0,l.Z)(F,2),O=T[0],R=T[1],U=(0,i.useState)([]),M=(0,l.Z)(U,2),A=M[0],H=M[1],D=(0,i.useState)("170,211,123,82,168,207,212,18,213,49,149,208,243"),B=(0,l.Z)(D,2),G=B[0],J=B[1],V=(0,i.useState)([]),z=(0,l.Z)(V,2),W=z[0],q=z[1],K=(0,i.useState)([]),Q=(0,l.Z)(K,2),X=Q[0],Y=Q[1],$=(0,i.useState)(-1),ee=(0,l.Z)($,2),se=ee[0],te=ee[1],ne=(0,i.useState)([]),ae=(0,l.Z)(ne,2),le=ae[0],ie=ae[1],ce=(0,i.useState)(!1),re=(0,l.Z)(ce,2),oe=re[0],de=re[1],ue=(0,i.useState)(!1),he=(0,l.Z)(ue,2),me=he[0],je=he[1],xe=(0,i.useState)([]),pe=(0,l.Z)(xe,2),ve=pe[0],ge=pe[1],fe=(0,i.useState)(),Ne=(0,l.Z)(fe,2),be=Ne[0],Se=Ne[1],ye=(0,i.useState)([]),Ze=(0,l.Z)(ye,2),Ie=Ze[0],Ce=Ze[1],we=(0,i.useState)([]),Ee=(0,l.Z)(we,2),Le=Ee[0],_e=Ee[1],Pe=(0,i.useState)([]),ke=(0,l.Z)(Pe,2),Fe=(ke[0],ke[1]),Te=(0,i.useState)(!1),Oe=(0,l.Z)(Te,2),Re=Oe[0],Ue=Oe[1],Me=(0,i.useState)(!1),Ae=(0,l.Z)(Me,2),He=Ae[0],De=Ae[1],Be=(0,i.useRef)([]),Ge=(0,i.useState)(!1),Je=(0,l.Z)(Ge,2),Ve=Je[0],ze=Je[1],We=(0,i.useState)({}),qe=(0,l.Z)(We,2),Ke=qe[0],Qe=qe[1],Xe=(0,i.useState)(-1),Ye=(0,l.Z)(Xe,2),$e=Ye[0],es=Ye[1],ss=(0,i.useState)(-1),ts=(0,l.Z)(ss,2),ns=ts[0],as=ts[1],ls=function(e){var s=e.id,t=e.value;"customers"===s&&"1"===t&&je(!0)};(0,i.useEffect)((function(){le.length>0&&Qe(JSON.parse(JSON.stringify(le[0])))}),[le]),(0,i.useEffect)((function(){h().get(e+"/timeandexpensesms/getSolutionList").then((function(e){var s=e.data;ge(s)})),h().get(e+"/CostMS/cost/getDepartments").then((function(e){var s=e.data,t=[];s.length>0&&s.forEach((function(e){var s={label:e.label,value:e.value};t.push(s)})),H(t),R(t)})),h().get(e+"/timeandexpensesms/getExecutiveName").then((function(e){var s=e.data,t=[];s.length>0&&s.forEach((function(e){var s={label:e.Executive_name,value:e.id};t.push(s)})),Y(t),q(t)})),u("Table values..............................",le)}),[]),(0,i.useEffect)((function(){}),[Le]);var is=(0,i.useState)([]),cs=(0,l.Z)(is,2),rs=(cs[0],cs[1]);return(0,S.jsxs)("div",{children:[He?(0,S.jsxs)("div",{className:"statusMsg error",children:[" ",(0,S.jsx)(f.CSE,{})," Please select valid values for highlighted fields"]}):"",(0,S.jsx)(S.Fragment,{children:Ve?(0,S.jsx)("div",{className:"statusMsg success",children:"Mapping saved successfully"}):""}),(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne"}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"Solution Mapping"})}),(0,S.jsx)("div",{className:"childThree"})]})}),(0,S.jsxs)("div",{className:"group mb-3 customCard",children:[(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Search Filters"}),(0,S.jsx)("div",{onClick:function(){E(!w),k(w?r.UdN:r.NR5)},children:(0,S.jsx)("span",{children:P})})]}),(0,S.jsxs)(d.V9,{visible:!w,children:[(0,S.jsxs)("div",{className:"group-content row",children:[(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"bu",children:["BU",(0,S.jsx)("span",{style:{color:"red"},children:"*"})," "]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"multiselect",ref:function(e){Be.current[0]=e},children:(0,S.jsx)(c.NU,{id:"buId",name:"buId",options:A,hasSelectAll:!0,value:O,disabled:!1,onChange:function(e){R(e);var s=[];e.forEach((function(e){s.push(e.value)})),J(s.toString())}})})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"customer",children:["Customer ",(0,S.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{id:"customers",name:"customers",className:"col-md-12 col-sm-12 col-xs-12  onLoadEmpty",onChange:function(e){ls(e.target),es(e.target.value)},children:[(0,S.jsx)("option",{value:-1,children:"<< All >> "}),(0,S.jsx)("option",{value:0,children:"Active Customers"}),(0,S.jsx)("option",{value:1,children:"Select"})]})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsx)("label",{className:"col-5",htmlFor:"projectstatus",children:"Project Status"}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{id:"projectstatus",name:"projectstatus",onChange:function(e){ls(e.target),as(e.target.value)},children:[(0,S.jsx)("option",{value:-1,children:"<< All >> "}),(0,S.jsx)("option",{value:0,children:"New"}),(0,S.jsx)("option",{value:1,children:"In Progress"}),(0,S.jsx)("option",{value:2,children:"Completed"}),(0,S.jsx)("option",{value:3,children:"Withdrawn"}),(0,S.jsx)("option",{value:4,children:"On Hold"}),(0,S.jsx)("option",{value:5,children:"Opportunity"}),(0,S.jsx)("option",{value:6,children:"Pending Invoice"}),(0,S.jsx)("option",{value:1108,children:"Invalid"})]})})]})}),(0,S.jsx)("div",{className:" col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Sales Executive ",(0,S.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)("div",{className:"multiselect",ref:function(e){Be.current[1]=e},children:(0,S.jsx)(c.NU,{id:"salesExecutiveId",name:"salesExecutiveId",options:X,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:W,disabled:!1,onChange:function(e){q(e);var s=[];e.forEach((function(e){s.push(e.value)})),te(s.toString())}})})})]})}),(0,S.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-2",children:(0,S.jsxs)("button",{type:"submit",className:"btn btn-primary",onClick:function(){if((0,g.Z)(Be))return De(!0),void setTimeout((function(){De(!1)}),3e3);Ue(!0),1===$e&&(String(JSON.parse(localStorage.getItem("selectedCust")).map((function(e){return e.id}))),(0,a.Z)("customerId")),h()({method:"get",url:e+"/timeandexpensesms/getProjectSolutions?prjStatus=".concat(ns,"&buIds=").concat(G,"&executiveIds=").concat(se,"&customerIds=").concat($e)}).then((function(e){for(var s=e.data,t=0;t<s.length;t++)s[t].Sno=t+1;var a=(0,n.Z)(s);ie(a),rs(a)})),de(!0),setTimeout((function(){Ue(!1)}),100),de(!0)},children:["Search"," "]})})]}),Re?(0,S.jsx)(v.Z,{}):""]})]}),(0,S.jsx)("div",{children:oe?(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{id:"myDatatable_filter",class:"dataTables_filter",style:{height:"25px",width:"165px",marginLeft:"auto"},children:(0,S.jsxs)("label",{children:["Search:\xa0",(0,S.jsx)("input",{type:"search",className:"col-7",placeholder:!0,"aria-controls":"myDatatable"})]})}),(0,S.jsx)("div",{className:"col-md-12 mt-4",children:(0,S.jsxs)(j.w,{className:"solutionMappingTable",value:le,paginator:!0,rows:10,showGridlines:!0,highlightOnHover:!0,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},rowGroupMode:"rowspan",groupRowsBy:"role",sortOrder:2,responsiveLayout:"scroll",children:[(0,S.jsx)(x.s,{field:"Sno",header:"S.No"}),(0,S.jsx)(x.s,{field:"project",header:"Project",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",id:e.projectId,onChange:function(e){},children:e.project})})}}),(0,S.jsx)(x.s,{field:"prjMgr",header:"Project Manager",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",children:e.prjMgr})})}}),(0,S.jsx)(x.s,{field:"executive",header:"Executive",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",children:e.executive})})}}),(0,S.jsx)(x.s,{field:"customer",header:"Customer",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",children:e.customer})})}}),(0,S.jsx)("column",{field:"solutionId",header:"Solution",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",children:(0,S.jsxs)("select",{name:"solutionId",id:e.projectId,onChange:function(e){Se(e.target.value)},children:[(0,S.jsx)("option",{value:"",children:"<< Please Select >>"}),ve.map((function(s){return(0,S.jsx)("option",{value:s.id,selected:e.solutionId==s.id,children:s.solution_name})}))]})})})}}),(0,S.jsx)("column",{field:"gitLabURL",header:"GitLab URL",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsxs)("span",{className:"vertical-align-middle ml-2",children:[(0,S.jsx)("input",{type:"text",id:e.projectId,onChange:function(e){Ce(e.target.value)},defaultValue:e.gitLabURL}),(0,S.jsxs)("a",{href:e.gitLabURL,children:[" ",(0,S.jsx)(p.rpH,{})]})]})})}}),(0,S.jsx)(x.s,{field:"isArchived",header:"Archive",body:function(e){return(0,S.jsx)(i.Fragment,{children:(0,S.jsx)("span",{className:"vertical-align-middle ml-2",children:(0,S.jsx)("input",{type:"checkbox",id:e.projectId,onChange:function(s){_e((function(t){var a=(0,n.Z)(t),l=a.findIndex((function(s){return s.projectId===e.projectId}));return-1!==l?(a[l]={projectId:e.projectId,solutionId:parseInt(be),gitLabURL:Ie,isArchived:!0===s.target.checked?1:0},a):[].concat((0,n.Z)(t),[{projectId:e.projectId,solutionId:parseInt(be),gitLabURL:Ie,isArchived:!0===s.target.checked?1:0}])}))},defaultChecked:e.isArchived})})})}})]})}),(0,S.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:[(0,S.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){h().post(e+"/timeandexpensesms/saveMapping",Le).then((function(e){Fe(e.data)})),ze(!0),setTimeout((function(){ze(!1)}),3e3)},children:[(0,S.jsx)(p.jC8,{})," Save"]}),(0,S.jsxs)("button",{className:"btn btn-secondary",onClick:function(){!function(e){(0,b.Z)(Be);for(var s=document.getElementsByClassName("cancel"),t=0;t<s.length;t++)s[t].value=Object.keys(Ke).length>0?Ke[s[t].id]:""}()},children:[(0,S.jsx)(N.zjw,{}),"Reset"]})]})]}):" "}),(0,S.jsx)(m.Z,{visible:me,setVisible:je})]})}},12860:function(e,s,t){function n(e){throw new TypeError('"'+e+'" is read-only')}t.d(s,{Z:function(){return n}})}}]);
//# sourceMappingURL=7465.cf46072c.chunk.js.map