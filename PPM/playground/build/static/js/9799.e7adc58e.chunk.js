"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9799],{39425:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var s=n(74165),a=n(15861),r=n(29439),i=n(72791),l=(n(90029),n(1413)),c=n(93433),o=n(59513),d=n.n(o),u=(n(68639),n(34831)),p=n(56355),m=n(74569),x=n.n(m),h=n(7692),f=n(70828),v=n(37145),j=n(1063),g=n(72426),y=n.n(g),b=function(e){for(var t=e.current,n=[],s=function(e,t){""==t?(e.classList.add("abc"),n.push(!0)):(e.classList.remove("error-block"),n.push(!1))},a=0;a<t.length;a++){var r=t[a].classList,i=null;if(r.contains("text"))s(i=t[a],i.value);else if(r.contains("datepicker")){var l=t[a].children[0].children[0];s(l,l.children[0].value)}else if(r.contains("multiselect")){var c=t[a].children[0].children[0].children[0];s(c,c.children[0].children[0].classList.contains("gray")?"":"present")}else if(r.contains("textfield")){var o=t[a].children[0];s(o,o.value)}else if(r.contains("autocomplete")){var d=t[a].children[0].children[0].children[0];s(d,d.children[0].children[0].value)}else if(r.contains("reactautocomplete")){var u=t[a].children[0].children[0].children[0].children[0];console.log(u);var p=u.children[0].children[0].value;console.log(p),s(u,p)}}return n.includes(!0)},N=n(40071),S=n(38262),C=n(80184);var D=function(){var e=(0,i.useState)(),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,i.useState)(),o=(0,r.Z)(a,2),m=o[0],g=o[1],D=(0,i.useState)([]),Z=(0,r.Z)(D,2),k=Z[0],T=Z[1],E=(0,i.useState)([]),M=(0,r.Z)(E,2),w=M[0],A=M[1],_=(0,i.useState)([]),I=(0,r.Z)(_,2),F=I[0],Y=I[1],R=(0,i.useState)([]),P=(0,r.Z)(R,2),B=P[0],O=P[1],L=(0,i.useState)([]),U=(0,r.Z)(L,2),H=U[0],V=U[1],z=(0,i.useState)([]),W=(0,r.Z)(z,2),$=W[0],K=W[1],G=(0,i.useState)([]),J=(0,r.Z)(G,2),q=J[0],X=J[1],Q=(0,i.useState)(!1),ee=(0,r.Z)(Q,2),te=ee[0],ne=ee[1],se=(0,i.useState)(!1),ae=(0,r.Z)(se,2),re=ae[0],ie=ae[1],le=(0,i.useState)(!1),ce=(0,r.Z)(le,2),oe=ce[0],de=ce[1],ue=(0,i.useRef)([]),pe=(0,i.useState)(!1),me=(0,r.Z)(pe,2),xe=me[0],he=me[1],fe=(0,i.useState)(""),ve=(0,r.Z)(fe,2),je=ve[0],ge=ve[1],ye=(0,i.useState)(!0),be=(0,r.Z)(ye,2),Ne=be[0],Se=be[1],Ce=(0,i.useState)(!1),De=(0,r.Z)(Ce,2),Ze=De[0],ke=De[1],Te=(0,i.useState)(!1),Ee=(0,r.Z)(Te,2),Me=Ee[0],we=Ee[1],Ae=(0,i.useState)(!1),_e=(0,r.Z)(Ae,2),Ie=_e[0],Fe=_e[1],Ye=(0,i.useState)(!0),Re=(0,r.Z)(Ye,2),Pe=Re[0],Be=Re[1],Oe=(0,i.useState)(!1),Le=(0,r.Z)(Oe,2),Ue=Le[0],He=Le[1],Ve=u.N.baseUrl,ze=localStorage.getItem("resId"),We=(0,i.useState)([]),$e=(0,r.Z)(We,2),Ke=$e[0],Ge=$e[1];(0,i.useEffect)((function(){Je()}),[]);var Je=function(){x()({method:"GET",url:Ve+"/CommonMS/master/getMenus?loggedUserId=".concat(ze)}).then((function(e){e.data.forEach((function(e){"Time & Expenses"===e.display_name&&Ge([e])}))}))};(0,i.useEffect)((function(){var e=k.filter((function(e){return e.id==w})).map((function(e){return e.currency}));ge(e[0])}),[w]),(0,i.useEffect)((function(){x()({method:"get",url:Ve+"/ProjectMS/Engagement/getCurrency"}).then((function(e){var t=e.data;T(t)}))}),[]);var qe=H.map((function(e,t){return{id:t+1,date:y()(e).format("DD-MMM-YYYY"),usdofvalue:F,usdinvalue:B}}));(0,i.useEffect)((function(){X((function(e){return $}))}),[$]);var Xe=function(e,t){var n=q.findIndex((function(e){return e.id===t.id})),s=(0,c.Z)(q);s[n]=(0,l.Z)((0,l.Z)({},s[n]),{},{usdofvalue:"usd"===e.target.id?e.target.value:s[n].usdofvalue,usdinvalue:"local"===e.target.id?e.target.value:s[n].usdinvalue}),X(s)};(0,i.useEffect)((function(){$.length>0&&Be(!1),console.log("selected rows: ",$)}),[$]);var Qe=qe.map((function(e){var t=q.find((function(t){return t.id===e.id}));return t?(0,l.Z)((0,l.Z)({},e),{},{usdofvalue:t.usdofvalue,usdinvalue:t.usdinvalue}):e}));return(0,i.useEffect)((function(){re&&(s(),g(),console.log("first: ",re))}),[re]),(0,C.jsxs)("div",{children:[oe?(0,C.jsxs)("div",{className:"statusMsg error",children:[" ",(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(N.SZZ,{})," Please provide the valid values for required fields fields"," "]})]}):"",xe?(0,C.jsx)("div",{className:"statusMsg success",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(h.hXj,{}),"Foreign Exchange Rates For ",je," Saved Successfully"]})}):"",Ze?(0,C.jsxs)("div",{className:"statusMsg error",children:[" ",(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(N.SZZ,{})," Please select End Date Greater Than Begin Date"," "]})]}):"",Me?(0,C.jsxs)("div",{className:"statusMsg error",children:[" ",(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(N.SZZ,{})," USD to Local is Invalid"," "]})]}):"",Ie?(0,C.jsxs)("div",{className:"statusMsg error",children:[" ",(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(N.SZZ,{})," Local to USD is Invalid"," "]})]}):"",(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsx)("h2",{children:"Add Foreign Exchange Rates"})}),(0,C.jsx)("div",{className:"childThree"})]})}),(0,C.jsx)(S.Z,{routes:Ke,currentScreenName:["Expenses","Add Foreign Exchange Rates"]}),(0,C.jsx)("div",{className:"group mb-3 customCard",children:(0,C.jsxs)("div",{className:"group-content row",children:[(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Currency",(0,C.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsxs)("select",{id:"country-select",className:"text cancel",ref:function(e){ue.current[0]=e},onChange:function(e){A(e.target.value)},children:[(0,C.jsx)("option",{value:"",children:" <<Please Select>>"}),k.map((function(e){return"US Dollar(USD)"===e.currency?"":(0,C.jsx)("option",{value:e.id,children:e.currency})}))]})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Begin Date",(0,C.jsx)("span",{children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("div",{className:"datepicker position-relative z-3",ref:function(e){ue.current[1]=e},children:(0,C.jsx)(d(),{dateFormat:"dd-MMM-yyyy",selected:n,onChange:function(e){return s(e)},onKeyDown:function(e){return e.preventDefault()},placeholderText:"Begin Date",selectsStart:!0})})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["End Date",(0,C.jsx)("span",{children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("div",{className:"datepicker",ref:function(e){ue.current[2]=e},children:(0,C.jsx)(d(),{dateFormat:"dd-MMM-yyyy",selected:m,onChange:function(e){return g(e)},onKeyDown:function(e){return e.preventDefault()},placeholderText:"End Date",selectsStart:!0})})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"name",children:["USD to Local",(0,C.jsx)("span",{children:" \xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("div",{className:"textfield",ref:function(e){ue.current[3]=e},children:(0,C.jsx)("input",{type:"text",className:"form-control cancel",id:"name",placeholder:"",required:!0,onChange:function(e){Y(e.target.value)}})})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"name",children:["Local to USD",(0,C.jsx)("span",{children:" \xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("div",{className:"textfield",ref:function(e){ue.current[4]=e},children:(0,C.jsx)("input",{type:"text",className:"form-control cancel",id:"name",placeholder:"",required:!0,onChange:function(e){O(e.target.value)}})})})]})}),(0,C.jsx)("div",{className:"form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",onClick:function(){return b(ue)?(de(!0),void setTimeout((function(){de(!1)}),3e3)):m.getTime()<n.getTime()?(ke(!0),void setTimeout((function(){ke(!1)}),3e3)):isNaN(F)?(we(!0),void setTimeout((function(){we(!1)}),3e3)):isNaN(B)?(Fe(!0),void setTimeout((function(){Fe(!1)}),3e3)):(V(function(e,t){for(var n=[],s=new Date(e);s<=t;){var a=s.toLocaleDateString("en-CA");n.push(a),s.setDate(s.getDate()+1)}return n}(n,m)),void ne(!0))},children:[(0,C.jsx)(p.wEH,{})," Add"," "]})})]})})]}),te?(0,C.jsxs)("div",{className:"darkHeader",children:[(0,C.jsx)("div",{className:"expensesAdd",children:(0,C.jsxs)(v.w,{value:Ue?Qe:qe,showGridlines:!0,scrollable:!0,scrollHeight:"400px",selectionMode:"checkbox",selection:$,onSelectionChange:function(e){return function(e){console.log(e.value),K(e.value)}(e)},dataKey:"id",isDataSelectable:function(){return!re},children:[(0,C.jsx)(j.s,{selectionMode:"multiple",className:re?"not-allowed":""}),(0,C.jsx)(j.s,{field:"date",header:"Date"}),(0,C.jsx)(j.s,{field:"usdofvalue",header:"USD to Local",body:function(e){return $.map((function(e){return e.id})).includes(e.id)&&Ne?(0,C.jsx)("input",{type:"text",id:"usd",defaultValue:e.usdofvalue,onChange:function(t){return Xe(t,e)}}):e.usdofvalue},bodyClassName:"text-right"}),(0,C.jsx)(j.s,{field:"usdinvalue",header:"Local to USD",body:function(e){return $.map((function(e){return e.id})).includes(e.id)&&Ne?(0,C.jsx)("input",{type:"text",id:"local",defaultValue:e.usdinvalue,onChange:function(t){return Xe(t,e)}}):(0,C.jsx)("div",{align:"right",style:{placeContent:"end"},children:e.usdinvalue})},bodyClassName:"text-right"})]})}),(0,C.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-2",children:[(0,C.jsxs)("button",{className:"btn btn-primary",disabled:Pe,onClick:function(){for(var e=document.getElementsByClassName("cancel"),t=0;t<e.length;t++)e[t].value="",e[t].classList.contains("reactautocomplete")&&e[t].children[0].children[0].children[0].children[0].children[0].children[1].click();console.log(q);var n=q.map((function(e){return{currencyId:w,date:y()(e.date).format("YYYY-MM-DD"),value_of_usd:e.usdofvalue,value_in_usd:e.usdinvalue}}));console.log("formated data: ",n),x().post("".concat(Ve,"/timeandexpensesms/addExpenses"),n,{headers:{"Content-Type":"application/json"}}).then((function(e){(console.log(e.status),console.log(e),200==e.status)&&(ie(!0),Se(!1),he(!0),Be(!1),document.getElementsByClassName("p-checkbox-box p-component p-highlight")[0].setAttribute("class","p-checkbox-box p-component"),setTimeout((function(){he(!1)}),3e3),He(!0))})).catch((function(e){return console.log(e)}))},children:[(0,C.jsx)(h.jC8,{})," Save"]}),(0,C.jsx)("button",{className:"btn btn-secondary",onClick:function(e){ne(!1)},children:(0,C.jsxs)("span",{className:"logo",children:[(0,C.jsx)(f.sQZ,{})," Close"]})})]})]}):""]})},Z=n(4942),k=n(78820);var T=function(e){var t=u.N.baseUrl,n=e.formData,s=e.setFormData,a=e.projectRenderData,r=e.dates,c=e.setDates,o=e.expenseTypeRenderData,d=e.iconState,p=e.setRates,m=e.setLoader,h=e.setWeekData;(0,i.useEffect)((function(){v()}),[n]);var f=function(e){if("left"===e){var a=setTimeout((function(){m(!0)}),2e3),r=y()(n.fromDate).subtract(1,"days").format("DD-MMM-yyyy");x().get(t+"/timeandexpensesms/projectExpense/getWeekDays?lastDay=".concat(r)).then((function(e){var t,n;m(!1),clearTimeout(a);var r=null===(t=e.data)||void 0===t?void 0:t.days[0],i=null===(n=e.data)||void 0===n?void 0:n.days[e.data.days.length-1];s((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"fromDate",r))})),s((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"toDate",y()(i).endOf("day")))})),h(e.data),p(e.data.rates)})).catch((function(e){return console.log(e)}))}else{var i=setTimeout((function(){m(!0)}),2e3),c=y()(n.toDate).add(7,"days").format("DD-MMM-yyyy");x().get(t+"/timeandexpensesms/projectExpense/getWeekDays?lastDay=".concat(c)).then((function(e){var t,n;m(!1),clearTimeout(i);var a=null===(t=e.data)||void 0===t?void 0:t.days[0],r=null===(n=e.data)||void 0===n?void 0:n.days[e.data.days.length-1];s((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"fromDate",a))})),s((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"toDate",y()(r).endOf("day")))})),h(e.data),p(e.data.rates)})).catch((function(e){return console.log(e)}))}},v=function(){for(var e=[],t=y()(n.fromDate),s=y()(n.toDate);t.isSameOrBefore(s,"day");)e.push(t.format("YYYY-MM-DD")),t.add(1,"days");c(e)};return(0,C.jsx)("div",{className:"darkHeader",children:(0,C.jsxs)("table",{id:"details",className:"table table-bordered htmlTable expensesCreateTable",children:[(0,C.jsxs)("thead",{style:{backgroundColor:"#eee"},children:[(0,C.jsx)("tr",{children:(0,C.jsxs)("th",{colSpan:r.length+2,children:[(0,C.jsx)(k._u0,{title:"Previous Week",style:{cursor:"pointer"},onClick:function(){f("left")}}),y()(n.fromDate).format("DD-MMM-yyyy")+" to "+y()(n.toDate).format("DD-MMM-yyyy"),(0,C.jsx)(k.bBv,{style:{cursor:"pointer"},title:"Next Week",onClick:function(){f("right")}})]})}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{rowSpan:2,children:"Project/Expense Type"}),r.map((function(e){return(0,C.jsx)("th",{children:y()(e).format("ddd")})})),(0,C.jsx)("th",{rowSpan:2,children:"Total"})]}),(0,C.jsx)("tr",{children:r.map((function(e){return(0,C.jsx)("th",{style:{backgroundColor:y()(e).format("DD-MMM-YYYY")==y()().format("DD-MMM-YYYY")?"#D9FBB3":"#eeeeee",textAlign:"center"},children:y()(e).format("DD-MMM")})}))})]}),(0,C.jsxs)("tbody",{children:[a,"down"===d&&o]})]})})},E=n(78983);var M=function(e){var t,n,s,a,r,c,o=e.expenseTypePopupState,d=e.setExpenseTypePopupState,u=e.expenseTypeOptions,p=e.setExpenseTypesValues,m=e.setSelectedExpenseTypes,x=e.selectedExpenseTypes,h=e.setIconState,f=e.selectAll,v=e.setSelectAll,j=e.isValuesChecked,g=e.setIsValuesChecked,b={"Project Name":null===u||void 0===u||null===(t=u.projectDetails)||void 0===t?void 0:t.projectName,"Project Manager":null===u||void 0===u||null===(n=u.primaryManager)||void 0===n?void 0:n.name,"Start Date":null!==(null===u||void 0===u||null===(s=u.projectDetails)||void 0===s?void 0:s.actualStartDate)?y()(null===u||void 0===u||null===(a=u.projectDetails)||void 0===a?void 0:a.actualStartDate).format("DD-MMM-YYYY"):"-","End Date":null!==(null===u||void 0===u||null===(r=u.projectDetails)||void 0===r?void 0:r.actualEndDate)?y()(null===u||void 0===u||null===(c=u.projectDetails)||void 0===c?void 0:c.actualEndDate).format("DD-MMM-YYYY"):"-"};(0,i.useEffect)((function(){N(f)}),[f]);var N=function(e){var t=[];Object.keys(j).forEach((function(n){t[n]=e})),g(t)};return(0,i.useEffect)((function(){var e=x.map((function(e){return e.id})),t=j;e.forEach((function(e){t[e]=!0})),g(t)}),[]),(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)(E.Tk,{visible:o,size:"lg",onClose:function(){return d(!1)},backdrop:"static",children:[(0,C.jsx)(E.p0,{className:"",children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{className:"",children:"Expense Types"})})}),(0,C.jsxs)(E.sD,{children:[(0,C.jsx)("div",{lassName:"col-md-12",children:u.hasOwnProperty("projectDetails")&&(0,C.jsx)("div",{className:"expTypeDiv",style:{backgroundColor:"#eeeeee",padding:"3px",border:"1px solid #ddd"},children:Object.keys(b).map((function(e,t){return(0,C.jsxs)("div",{className:"col-md-12 row",children:[(0,C.jsx)("label",{className:"col-md-4",children:e}),(0,C.jsx)("span",{className:"col-md-1",children:":"}),(0,C.jsx)("span",{className:"col-md-6 ellipsis",title:b[e],children:b[e]})]},t)}))})}),(0,C.jsxs)("div",{className:"my-3",children:[(0,C.jsxs)("div",{className:"col-12",style:{backgroundColor:"#ebebeb",display:"flex",alignItems:"center",marginBottom:"5px",padding:"4px 8px"},children:[(0,C.jsx)("input",{type:"checkbox",checked:f,onChange:function(e){v((function(e){return!e}))}}),(0,C.jsxs)("strong",{children:["\xa0","  Select All"]})]}),(0,C.jsx)("div",{className:"col-12",children:(0,C.jsx)("div",{className:"row",children:u.expenses.map((function(e,t){return(0,C.jsx)("div",{className:"col-md-4",children:(0,C.jsxs)("div",{children:[(0,C.jsx)("input",{id:e.id,type:"checkbox",defaultChecked:x.some((function(t){return t.id==e.id})),checked:j[e.id],onChange:function(t){g((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,Z.Z)({},e.id,t.target.checked))}))}}),(0,C.jsx)("span",{children:"  "+e.lkup_name})]},t)})}))})})]}),(0,C.jsx)("div",{className:" form-group col-md-12 col-sm-12 col-xs-1 btn-container center my-2",children:(0,C.jsxs)("button",{className:"btn btn-primary",type:"Add",onClick:function(){!function(){if(h("down"),Object.values(j).includes(!0)){var e=[];Object.keys(j).forEach((function(t){j[t]&&e.push(t)})),p(e);var t=JSON.parse(JSON.stringify(u.expenses)).filter((function(t){return e.includes(""+t.id)})),n=x.concat(t.filter((function(e){return!x.some((function(t){return t.id===e.id}))})));m(n)}d(!1)}()},children:[" ","Add"]})})]})]})})})},w=n(72920),A=n(63521);var _=function(e){var t=e.expensesTypePopup,n=e.setExpensesTypePopup,s=e.expenseTypeId,a=e.currencyOptionsData,o=e.country,d=e.cities,u=e.carTypes,p=e.paidBy,m=e.airportList,x=e.mobileType,f=e.expDate,v=e.expenseData,j=e.setExpenseData,g=e.expInfo,b=e.projectId,S=e.expName,D=e.setFileMap,k=e.fileMap,T=e.files,M=e.setFiles,w=e.isExpenseBillable,_=e.setExpCurrencySymbol,I=e.expCurrencySymbol,F=e.id,Y=(0,i.useState)(""),R=(0,r.Z)(Y,2),P=R[0],B=R[1];(0,i.useEffect)((function(){if(!g.some((function(e){return e.expTypId==s&&e.date==f}))){var e=function(e){var t,n,s;switch(e){case 620:return{noOfNights:0,subLocation:"",restOfWorld:"",prjId:b,name:S,expAmt:0};case 766:return{mobileType:null===(t=x[0])||void 0===t?void 0:t.id,prjId:b,name:S,expAmt:0};case 616:return{peopleAttnd:0,guestAttnd:0,empAttnd:0,prjId:b,name:S,expAmt:0};case 615:return{noOfMiles:0,rate:0,rental:0,charge:0,fuelAmount:0,carType:null===(n=u[0])||void 0===n?void 0:n.id,tollCharge:0,parking:0,prjId:b,name:S,expAmt:0};case 621:return{origin:"",destination:"",ticketFare:0,addCharges:0,prjId:b,name:S,expAmt:0,travelType:"777",tripType:"779"};default:return{date:y()(f).format("YYYY-MM-DD"),expTypId:e,paidBy:null===(s=p[0])||void 0===s?void 0:s.id,currency:"448",location:"3",description:"",prjId:b,name:S,expAmt:0}}}(s);j(e)}}),[]);var O=function(e){var t=e.target,n=t.name,a=t.value;if(j((function(e){var t;return(0,l.Z)((0,l.Z)({},e),{},(t={date:y()(f).format("YYYY-MM-DD"),expTypId:s,description:""},(0,Z.Z)(t,n,a),(0,Z.Z)(t,"prjId",b),(0,Z.Z)(t,"name",S),t))})),"isBillable"==n&&j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isBillable:"on"==a})})),s.startsWith("621")&&(j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{expAmt:parseFloat(e.ticketFare||0)+parseFloat(e.addCharges||0),stops:se})})),void 0!==(null===v||void 0===v?void 0:v.origin)&&void 0!==(null===v||void 0===v?void 0:v.destination)&&v.origin===v.destination?B("Origin and destination cannot be the same."):B("")),("noOfMiles"===n||"rate"===n||"tollCharge"===n||"parking"===n)&&"615"===s){var r=("noOfMiles"===n?a:v.noOfMiles)*("rate"===n?a:v.rate),i=parseFloat(v.tollCharge||0),c=parseFloat(v.parking||0),o=r+i+c;j((function(e){return(0,l.Z)((0,l.Z)({},e),{},{fuelAmount:r.toFixed(2),expAmt:o.toFixed(2)})}))}},L=function(e){var t=Array.from(e.target.files);M((function(e){return[].concat((0,c.Z)(e),t)}));for(var n=(0,l.Z)({},k),a=0;a<t.length;a++){var r=t[a],i="".concat(b,"_").concat(s,"_").concat(y()(f).format("YYYY-MM-DD"));n[i]||(n[i]=[]),n[i].push(r.name)}D(n)},U=(0,i.useState)(!1),H=(0,r.Z)(U,2),V=H[0],z=H[1],W=(0,i.useState)(null),$=(0,r.Z)(W,2),K=$[0],G=$[1];(0,i.useEffect)((function(){void 0==F&&_((function(){var e,t=document.createElement("div");return t.innerHTML=null===(e=a.find((function(e){return e.id==v.currency})))||void 0===e?void 0:e.currencyCode,t.innerHTML}))}),[v]);var J=(0,i.useState)([{id:1,value:"",isFirst:!0}]),q=(0,r.Z)(J,2),X=q[0],Q=q[1],ee=function(){var e={id:X.length+1,value:"",isFirst:!1};Q([].concat((0,c.Z)(X),[e]))},te=(0,i.useState)(""),ne=(0,r.Z)(te,2),se=ne[0],ae=ne[1];(0,i.useEffect)((function(){var e=X.map((function(e){return e.value})).join(",");ae(e)}),[X]);var re=function(){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(E.Tk,{visible:V,style:{width:"350px",marginLeft:"80px"},onClose:function(){return z(!1)},backdrop:"static",alignment:"center",children:[(0,C.jsx)(E.p0,{className:"",children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{className:"",children:"Delete Confirmation"})})}),(0,C.jsxs)(E.sD,{children:[(0,C.jsx)("span",{children:"Are you sure you want to permanently remove this item?"}),(0,C.jsx)("hr",{}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,C.jsx)("button",{className:"btn btn-primary",onClick:function(){!function(){var e=(0,l.Z)({},k);for(var t in e){var n=e[t].indexOf(K);if(-1!==n){e[t].splice(n,1),D(e);break}}var s=T.filter((function(e){return e.name!==K}));M(s)}(),z(!1)},children:"Yes"}),(0,C.jsx)("button",{className:"btn btn-secondary mx-2",onClick:function(){return z(!1)},children:"No"})]})]})]})})};return(0,C.jsxs)(E.Tk,{size:"lg",visible:t,onClose:function(){return n(!1)},backdrop:"static",alignment:"center",children:[(0,C.jsx)(E.p0,{children:(0,C.jsx)(E.fl,{})}),(0,C.jsxs)(E.sD,{children:[P&&(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{})," ",P]})}),(0,C.jsx)("div",{children:function(){var e,t,n,i,N,S,D,Z,T,E,M,_,Y,R,B,U,H;return(0,C.jsxs)("div",{className:"col-12 row",children:[(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Paid By"}),(0,C.jsx)("select",{name:"paidBy",onChange:O,children:p.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.lkup_name},e.id)}))})]}),!s.includes("621")&&(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Country"}),(0,C.jsxs)("select",{name:"location",onChange:O,children:[o.map((function(e){return(0,C.jsx)("option",{value:e.id,selected:3==e.id,children:e.country_name})})),(0,C.jsx)("option",{value:"others",children:"Others"})]})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Currency"}),(0,C.jsx)("select",{name:"currency",onChange:O,children:a.map((function(e){return(0,C.jsx)("option",{value:e.id,selected:448==e.id,children:e.currency})}))})]}),s.includes("620")&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"No. of nights"}),(0,C.jsx)("input",{type:"text",name:"noOfNights",onChange:O,defaultValue:null===g||void 0===g||null===(e=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===e?void 0:e.noOfNights,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"City"}),(0,C.jsxs)("div",{className:"autoComplete-container",children:[" ",(0,C.jsx)(A.ReactSearchAutocomplete,{name:"subLocation",id:"city",placeholder:"search city",className:"AutoComplete ",type:"Text",items:d,showIcon:!1,onSelect:function(e){return j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{subLocation:e.value})}))}})]})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Other City"}),(0,C.jsx)("input",{type:"text",name:"restOfWorld",onChange:O,defaultValue:null===g||void 0===g||null===(t=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===t?void 0:t.restOfWorld})]})]}),s.includes("616")&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"No. of Guests Attended"}),(0,C.jsx)("input",{type:"text",name:"guestAttnd",onChange:O,defaultValue:null===g||void 0===g||null===(n=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===n?void 0:n.guestAttnd,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"No. of Prolifics Employees"}),(0,C.jsx)("input",{type:"text",name:"empAttnd",onChange:O,defaultValue:null===g||void 0===g||null===(i=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===i?void 0:i.empAttnd,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Total People Attended"}),(0,C.jsx)("input",{type:"text",name:"peopleAttnd",readOnly:!0,value:parseInt(v.guestAttnd||0)+parseInt(v.empAttnd||0),defaultValue:null===g||void 0===g||null===(N=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===N?void 0:N.peopleAttnd})]})]}),s.includes("766")&&(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Type"}),(0,C.jsx)("select",{name:"mobileType",onChange:O,children:x.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.lkup_name},e.id)}))})]}),s.includes("621")&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Origin"}),(0,C.jsxs)("div",{className:"autoComplete-container",children:[" ",(0,C.jsx)(A.ReactSearchAutocomplete,{name:"origin",id:"city",placeholder:"search city",className:"AutoComplete ",type:"Text",items:m,showIcon:!1,showClear:!1,onSelect:function(e){return j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{origin:e.value})}))},styling:{backgroundColor:""!==P?"#F2DEDE":""}})]})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Destination"}),(0,C.jsxs)("div",{className:"autoComplete-container",children:[" ",(0,C.jsx)(A.ReactSearchAutocomplete,{name:"destination",id:"city",placeholder:"search city",className:"AutoComplete ",type:"Text",items:m,showIcon:!1,showClear:!1,onSelect:function(e){j((function(t){return(0,l.Z)((0,l.Z)({},t),{},{destination:e.value})}))},styling:{backgroundColor:""!==P?"#F2DEDE":""}})]})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Ticket Fare"}),(0,C.jsx)("input",{type:"text",name:"ticketFare",onChange:O,defaultValue:null===g||void 0===g||null===(S=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===S?void 0:S.ticketFare,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Additional Charges"}),(0,C.jsx)("input",{type:"text",name:"addCharges",onChange:O,defaultValue:null===g||void 0===g||null===(D=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===D?void 0:D.addCharges,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Travel Type"}),(0,C.jsxs)("span",{className:"radioContainer",children:[(0,C.jsx)("input",{type:"radio",name:"travelType",onChange:O,value:"777",defaultChecked:!0}),(0,C.jsx)("label",{children:"Domestic"})]}),(0,C.jsxs)("span",{className:"radioContainer",children:[(0,C.jsx)("input",{type:"radio",name:"travelType",onChange:O,value:"778"}),(0,C.jsx)("label",{children:"International"})]})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Trip Type"}),(0,C.jsxs)("span",{className:"radioContainer",children:[(0,C.jsx)("input",{type:"radio",name:"tripType",onChange:O,value:"779",defaultChecked:!0}),(0,C.jsx)("label",{children:"One Way"})]}),(0,C.jsxs)("span",{className:"radioContainer",children:[(0,C.jsx)("input",{type:"radio",name:"tripType",onChange:O,value:"780"}),(0,C.jsx)("label",{children:"Round Trip"})]}),(0,C.jsxs)("span",{className:"radioContainer",children:[(0,C.jsx)("input",{type:"radio",name:"tripType",onChange:O,value:"781"}),(0,C.jsx)("label",{children:"Multi-City"})]})]}),"781"===v.tripType&&(0,C.jsx)("div",{className:"mt-2 mb-4 row",children:null===X||void 0===X?void 0:X.map((function(e){return(0,C.jsxs)("div",{className:"col-6 multiStopsContainer",children:[(0,C.jsx)("label",{children:"Stops ".concat(e.id)}),(0,C.jsx)("input",{type:"text",name:"stop_".concat(e.id),onChange:function(t){return function(e,t){var n=(0,c.Z)(X);null===n||void 0===n||n.map((function(n){return n.id==e&&(n.value=t),n})),Q(n)}(e.id,t.target.value)}}),e.isFirst?(0,C.jsx)(h.poH,{size:"1.25em",className:"iconColor",onClick:ee}):(0,C.jsx)(h.SW4,{className:"iconColor",size:"1.25em",onClick:function(){return function(e){var t=X.filter((function(t){return t.id!==e}));Q(t)}(e.id)}})]},e.id)}))}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Net Amount"}),(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsx)("span",{children:I}),(0,C.jsx)("input",{className:"ms-1",type:"text",name:"expAmt",style:{textAlign:"right"},defaultValue:g.length>0?null===g||void 0===g||null===(Z=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===Z?void 0:Z.expAmt.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):null===v||void 0===v||null===(T=v.expAmt)||void 0===T?void 0:T.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})]})]})]}),s.includes("615")&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Car Type"}),(0,C.jsx)("select",{name:"carType",onChange:O,children:u.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.lkup_name},e.id)}))})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Toll Charge"}),(0,C.jsx)("input",{type:"text",name:"tollCharge",onChange:O,defaultValue:null===g||void 0===g||null===(E=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===E?void 0:E.tollCharge,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Parking Fee"}),(0,C.jsx)("input",{type:"text",name:"parking",onChange:O,defaultValue:null===g||void 0===g||null===(M=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===M?void 0:M.parking,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"No. of kms"}),(0,C.jsx)("input",{type:"text",name:"noOfMiles",onChange:O,defaultValue:null===g||void 0===g||null===(_=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===_?void 0:_.noOfMiles,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Rate per km"}),(0,C.jsx)("input",{type:"text",name:"rate",onChange:O,defaultValue:null===g||void 0===g||null===(Y=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===Y?void 0:Y.rate,onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Amount"}),(0,C.jsx)("input",{type:"text",name:"fuelAmount",value:parseFloat(v.noOfMiles||0)*parseFloat(v.rate||0),readOnly:!0})]}),(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Net Amount"}),(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsx)("span",{children:I}),(0,C.jsx)("input",{className:"ms-1",type:"text",name:"expAmt",style:{textAlign:"right"},value:parseFloat(v.tollCharge||0)+parseFloat(v.parking||0)+parseFloat(v.noOfMiles||0)*parseFloat(v.rate||0),defaultValue:null===g||void 0===g||null===(R=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===R?void 0:R.expAmt.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),readOnly:!0})]})]})]}),1==w&&(0,C.jsx)("div",{className:"row",children:(0,C.jsxs)("div",{className:"col-4 mt-2",style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)("input",{type:"checkbox",name:"isBillable",onChange:O}),(0,C.jsx)("strong",{className:"ml-1",children:"Billable"})]})}),![615,621].some((function(e){return s.startsWith(e)}))&&(0,C.jsxs)("div",{className:"col-4 mb-2",children:[(0,C.jsx)("label",{children:"Net Amount"}),(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsx)("span",{children:I}),(0,C.jsx)("input",{className:"ms-1",type:"text",name:"expAmt",style:{textAlign:"right"},defaultValue:g.length>0?((null===(B=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===B?void 0:B.expAmt)||"").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):((null===v||void 0===v?void 0:v.expAmt)||"").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()},onChange:O})]})]}),(0,C.jsxs)("div",{className:"col-12",children:[(0,C.jsx)("label",{children:"Description"}),(0,C.jsx)("textarea",{name:"description",onChange:O,defaultValue:null===(U=g.find((function(e){return e.expTypId==s&&e.date==y()(f).format("YYYY-MM-DD")})))||void 0===U?void 0:U.description})]}),(0,C.jsx)("label",{children:"Add Receipt: "}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{class:"file-label",children:[(0,C.jsx)("input",{type:"file",multiple:!0,disabled:634!==(null===(H=g[0])||void 0===H?void 0:H.status_id)&&void 0!==F,onChange:L}),(0,C.jsx)("span",{children:"Choose Files"})]}),Object.keys(k).map((function(e,t){var n=e.split("_"),a=(0,r.Z)(n,3),i=a[0],l=a[1],c=a[2];return i==b&&l==s&&c==y()(f).format("YYYY-MM-DD")?(0,C.jsx)("div",{children:k[e].map((function(e,t){return(0,C.jsxs)("div",{children:[(0,C.jsx)(h.SW4,{className:"iconColor",onClick:function(){return function(e){z(!0),G(e)}(e)}})," ",(0,C.jsx)("strong",{children:e})]},t)}))},t):null}))]})]})}()}),(0,C.jsx)("div",{className:" form-group col-md-12 col-sm-12 col-xs-1 btn-container center my-2",children:(0,C.jsx)("button",{className:"btn btn-primary",onClick:function(){return n(!1)},children:"Add"})}),V&&(0,C.jsx)(re,{})]})]})},I=n(39126),F=n(96907),Y=n(83854),R=n(57689),P=n(17425),B=n(16030),O=n(49648);var L=function(e){var t,n,o,m=(0,i.useState)(y()().startOf("week").add(1,"days")._d),v=(0,r.Z)(m,2),j=v[0],g=v[1],b=(0,i.useState)([]),S=(0,r.Z)(b,2),D=S[0],L=S[1],U=(0,i.useState)(null),H=(0,r.Z)(U,2),V=H[0],z=H[1],W=(0,i.useState)([]),$=(0,r.Z)(W,2),K=$[0],G=$[1],J=(0,i.useState)([]),q=(0,r.Z)(J,2),X=q[0],Q=q[1],ee=(0,i.useState)(!1),te=(0,r.Z)(ee,2),ne=te[0],se=te[1],ae=(0,i.useState)({}),re=(0,r.Z)(ae,2),ie=re[0],le=re[1],ce=(0,i.useState)(null),oe=(0,r.Z)(ce,2),de=oe[0],ue=oe[1],pe=(0,i.useState)([]),me=(0,r.Z)(pe,2),xe=me[0],he=me[1],fe=(0,i.useState)("3"),ve=(0,r.Z)(fe,2),je=ve[0],ge=ve[1],ye=(0,i.useState)(""),be=(0,r.Z)(ye,2),Ne=be[0],Se=be[1],Ce=(0,i.useState)([]),De=(0,r.Z)(Ce,2),Ze=De[0],ke=De[1],Te=(0,i.useState)([]),Ee=(0,r.Z)(Te,2),Me=Ee[0],we=Ee[1],Ae=(0,i.useState)([]),_e=(0,r.Z)(Ae,2),Ie=_e[0],Fe=_e[1],Ye=(0,i.useState)([]),Re=(0,r.Z)(Ye,2),Pe=Re[0],Be=Re[1],Oe=(0,i.useState)({}),Le=(0,r.Z)(Oe,2),Ue=Le[0],He=Le[1],Ve=(0,i.useState)([]),ze=(0,r.Z)(Ve,2),We=ze[0],$e=ze[1],Ke=(0,i.useState)([]),Ge=(0,r.Z)(Ke,2),Je=Ge[0],qe=Ge[1],Xe=(0,i.useState)(!1),Qe=(0,r.Z)(Xe,2),et=Qe[0],tt=Qe[1],nt=(0,i.useState)(),st=(0,r.Z)(nt,2),at=st[0],rt=st[1],it=(0,i.useState)([]),lt=(0,r.Z)(it,2),ct=lt[0],ot=lt[1],dt=(0,i.useState)("&#8377"),ut=(0,r.Z)(dt,2),pt=ut[0],mt=ut[1],xt=(0,i.useState)(null),ht=(0,r.Z)(xt,2),ft=ht[0],vt=ht[1],jt=(0,i.useState)([]),gt=(0,r.Z)(jt,2),yt=gt[0],bt=gt[1],Nt=(0,i.useState)(null),St=(0,r.Z)(Nt,2),Ct=St[0],Dt=St[1],Zt=(0,i.useState)(!0),kt=(0,r.Z)(Zt,2),Tt=kt[0],Et=kt[1],Mt=(0,i.useState)(!1),wt=(0,r.Z)(Mt,2),At=wt[0],_t=wt[1],It=localStorage.getItem("resId"),Ft=(e.handleAbort,e.setbtnState),Yt=(0,R.s0)(),Rt=(0,R.UO)().id,Pt=(0,i.useState)([]),Bt=(0,r.Z)(Pt,2),Ot=Bt[0],Lt=Bt[1],Ut=(0,i.useState)(),Ht=(0,r.Z)(Ut,2),Vt=Ht[0],zt=Ht[1];(0,i.useEffect)((function(){tt(!1),zt(!1),void 0!==Rt&&(x().get(an+"/timeandexpensesms/projectExpense/create?stackId=".concat(Rt,"&userId=").concat(It)).then((function(e){g(y()(e.data[0].expense_date).startOf("week").add(1,"days")._d),Lt(e.data)})).catch((function(e){return console.log(e)})),_n(!0),Rn("down"),tt(!1),zt(!0))}),[]);var Wt=(0,i.useState)([]),$t=(0,r.Z)(Wt,2),Kt=$t[0],Gt=$t[1];(0,i.useEffect)((function(){var e,t;void 0!==Rt&&void 0!==(null===(e=Ot[0])||void 0===e?void 0:e.id)&&x().get(an+"/timeandexpensesms/projectExpense/expenseDocuments?expenseId=".concat(null===(t=Ot[0])||void 0===t?void 0:t.id)).then((function(e){Gt(e.data),rt((function(){var e;return null===(e=Ot[0])||void 0===e?void 0:e.object_id}))})).catch((function(e){return console.log(e)}))}),[Ot]);var Jt=(0,i.useState)([]),qt=(0,r.Z)(Jt,2),Xt=qt[0],Qt=qt[1];(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x().get(an+"/ProjectMS/projectExpenses/paymentUsers");case 3:t=e.sent,n=t.data,Qt(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.useEffect)((function(){var e=null===Ot||void 0===Ot?void 0:Ot.map((function(e){return{id:e.expense_type_id,lkup_name:e.lkup_name}}));we(e);var t=null===Ot||void 0===Ot?void 0:Ot.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{date:e.expense_date,prjId:e.object_id,expTypId:e.expense_type_id,expAmt:e.amount,paidBy:e.paid_by,currency:e.currency_type_id,description:e.description,location:e.location_id,id:e.id,isActive:e.is_active,note:e.note,noOfMiles:e.no_of_miles,rate:e.rate,rental:e.rental,charge:e.charge,fuelAmount:e.fuel_amount,carType:e.car_type_id,tollCharge:e.toll_charge,parking:e.parking_fee,peopleAttnd:e.people_attended,guestAttnd:e.guests_attended,empAttnd:e.emp_attended,noOfNights:e.no_of_nights,subLocation:e.city_id,restOfWorld:e.rest_of_world,origin:e.origin_city_id,destination:e.destination_city_id,ticketFare:e.ticket_fare,addCharges:e.additional_charge,travelType:e.type_travel_id,tripType:e.type_trip_id,mobileType:e.type_id,statusId:e.status_id})}));bt(t),Ks(Kt),vn((function(){var e,t=document.createElement("div");return t.innerHTML=null===D||void 0===D||null===(e=D.find((function(e){var t;return e.id==(null===(t=Ot[0])||void 0===t?void 0:t.currency_type_id)})))||void 0===e?void 0:e.currencyCode,t.innerHTML}))}),[Ot]);var en=(0,i.useState)({fromDate:"",toDate:""}),tn=(0,r.Z)(en,2),nn=tn[0],sn=tn[1],an=u.N.baseUrl,rn=(0,i.useState)({}),ln=(0,r.Z)(rn,2),cn=(ln[0],ln[1]);(0,i.useEffect)((function(){on(),Cn()}),[je]),(0,i.useEffect)((0,a.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y()(j).startOf("week").add(7,"days").format("DD-MMM-yyyy"),n=setTimeout((function(){tt(!0)}),2e3),zt(!1),e.next=5,x().get(an+"/timeandexpensesms/projectExpense/getWeekDays?lastDay=".concat(t)).then((function(e){var t,s,a=null===(t=e.data)||void 0===t?void 0:t.days[0],r=null===(s=e.data)||void 0===s?void 0:s.days[e.data.days.length-1];sn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"fromDate",a))})),sn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},"toDate",y()(r).endOf("day")))})),cn(e.data),He(e.data.rates),tt(!1),clearTimeout(n),zt(!0)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)}))),[j]);var on=function(){x().get(an+"/ProjectMS/Engagement/getCurrency").then((function(e){L(e.data)})).catch((function(e){return console.log(e)}))};(0,i.useEffect)((function(){jn(),gn(),yn(),bn(),Nn(),Sn()}),[]);var dn=(0,i.useState)("&#8377"),un=(0,r.Z)(dn,2),pn=un[0],mn=un[1],xn=(0,i.useState)("&#8377"),hn=(0,r.Z)(xn,2),fn=hn[0],vn=hn[1];(0,i.useEffect)((function(){var e;void 0!==Rt&&mt(null===D||void 0===D||null===(e=D.find((function(e){var t;return e.id===(null===(t=Ot[0])||void 0===t?void 0:t.currency_type_id)})))||void 0===e?void 0:e.currencyCode);mn((function(){var e=document.createElement("div");return e.innerHTML=pt,e.innerHTML}))}),[pt,Ot,D]);var jn=function(){x().get(an+"/CostMS/cost/getCountries").then((function(e){ke(e.data)})).catch((function(e){return console.log(e)}))},gn=function(){x().post(an+"/timeandexpensesms/projectExpense/getCities?objectId=3").then((function(e){var t=e.data.map((function(e){return{name:e.city,value:e.id.toString()}}));Fe(t)})).catch((function(e){return console.log(e)}))},yn=function(){x().post(an+"/timeandexpensesms/projectExpense/carType").then((function(e){Be(e.data)})).catch((function(e){return console.log(e)}))},bn=function(){x().post(an+"/timeandexpensesms/projectExpense/paidBy").then((function(e){$e(e.data)})).catch((function(e){return console.log(e)}))},Nn=function(){x().post(an+"/timeandexpensesms/projectExpense/airportList").then((function(e){var t=e.data.map((function(e){return{name:e.name,value:e.id.toString()}}));qe(t)})).catch((function(e){return console.log(e)}))},Sn=function(){x().post(an+"/timeandexpensesms/projectExpense/mobileType").then((function(e){ot(e.data)})).catch((function(e){return console.log(e)}))},Cn=function(){var e=localStorage.getItem("resId"),t="businessUnit";3==je&&(t="projects"),x().get(an+"/timeandexpensesms/projectExpense/getProjects?userId=".concat(e,"&type=").concat(t)).then((function(e){var t=e.data;Q(t)}))};(0,i.useEffect)((function(){void 0!=nn.project&&Dn()}),[nn]);var Dn=function(){x().post(an+"/timeandexpensesms/projectExpense/getExpenseTypesPopUp/?prjId=".concat(nn.project,"&expLvlType=").concat(je)).then((function(e){le(e.data)})).catch((function(e){return console.log(e)}))},Zn=(0,i.useState)(!1),kn=(0,r.Z)(Zn,2),Tn=kn[0],En=kn[1],Mn=(0,i.useState)(!1),wn=(0,r.Z)(Mn,2),An=wn[0],_n=wn[1],In=(0,i.useState)("right"),Fn=(0,r.Z)(In,2),Yn=Fn[0],Rn=Fn[1],Pn=function(){Rn("right"===Yn?"down":"right")},Bn=(0,i.useState)(!1),On=(0,r.Z)(Bn,2),Ln=On[0],Un=On[1],Hn=(0,i.useState)({}),Vn=(0,r.Z)(Hn,2),zn=Vn[0],Wn=Vn[1];(0,i.useEffect)((function(){var e,t={};null===(e=ie.expenses)||void 0===e||e.map((function(e){t[e.id]=!1})),Wn(t)}),[ie]),(0,i.useEffect)((function(){1==An&&ls()}),[An,yt,K,Yn,pt,Ue,Ot,pn]);var $n=(0,i.useState)(1),Kn=(0,r.Z)($n,2),Gn=Kn[0],Jn=Kn[1],qn=(0,i.useState)(),Xn=(0,r.Z)(qn,2),Qn=Xn[0],es=Xn[1],ts=function(e){return es(e),yt.filter((function(t){return t.date==y()(e).format("YYYY-MM-DD")})).map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)>0?"".concat(pn," ").concat((yt.filter((function(t){return t.date==y()(e).format("YYYY-MM-DD")})).map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):""},ns=function(e){return yt.filter((function(t){return t.expTypId==e.id})).map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)>0?"".concat(pn,"  ").concat(parseFloat(yt.filter((function(t){return t.expTypId==e.id})).map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})):""},ss=(0,i.useState)(null),as=(0,r.Z)(ss,2),rs=as[0],is=as[1],ls=function(){z((function(){var e,t,n,s,a,r,i,l;return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"expandArrow",children:[(0,C.jsx)("input",{type:"checkbox",defaultChecked:Tt,disabled:void 0!==Rt&&634!==(null===(e=Ot[0])||void 0===e?void 0:e.status_id),onChange:function(e){Et(e.currentTarget.checked)}}),(0,C.jsx)("span",{onClick:Pn,children:"right"===Yn?(0,C.jsx)(k.rYR,{}):(0,C.jsx)(k.i0B,{})})]}),(0,C.jsxs)("div",{className:"expType",children:[void 0==Rt?(0,C.jsx)("span",{title:null===X||void 0===X||null===(t=X.find((function(e){return e.id==nn.project})))||void 0===t?void 0:t.name,children:null===X||void 0===X||null===(n=X.find((function(e){return e.id==nn.project})))||void 0===n?void 0:n.name}):(0,C.jsx)("span",{title:void 0!==(null===X||void 0===X||null===(s=X.find((function(e){var t;return(null===(t=Ot[0])||void 0===t?void 0:t.object_id)==e.id})))||void 0===s?void 0:s.name)?null===X||void 0===X||null===(a=X.find((function(e){var t;return(null===(t=Ot[0])||void 0===t?void 0:t.object_id)==e.id})))||void 0===a?void 0:a.name:"Finance",children:void 0!==(null===X||void 0===X||null===(r=X.find((function(e){var t;return(null===(t=Ot[0])||void 0===t?void 0:t.object_id)==e.id})))||void 0===r?void 0:r.name)?null===X||void 0===X||null===(i=X.find((function(e){var t;return(null===(t=Ot[0])||void 0===t?void 0:t.object_id)==e.id})))||void 0===i?void 0:i.name:"Finance"}),void 0==Rt||634==(null===(l=Ot[0])||void 0===l?void 0:l.status_id)?(0,C.jsxs)("button",{className:"btn",onClick:function(){se((function(){return!0}))},children:[(0,C.jsx)(h.poH,{}),"Add Expense"]}):""]})]})}),K.map((function(e){return(0,C.jsx)("td",{children:(0,C.jsx)("div",{style:{textAlign:"center"},children:yt.length>0&&(0,C.jsx)("strong",{children:ts(e)})})})})),(0,C.jsx)("td",{style:{textAlign:"right"},children:(0,C.jsx)("strong",{children:yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn>0&&"".concat(pn," ").concat((yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))})})]})})}))},cs=(0,i.useState)(!1),os=(0,r.Z)(cs,2),ds=os[0],us=os[1],ps=(0,i.useState)(!1),ms=(0,r.Z)(ps,2),xs=ms[0],hs=ms[1],fs=(0,i.useState)(""),vs=(0,r.Z)(fs,2),js=vs[0],gs=vs[1],ys=(0,i.useState)({}),bs=(0,r.Z)(ys,2),Ns=bs[0],Ss=bs[1],Cs=function(e){var t,n,s;return y()(e).format("YYYY-MM-DD")==(null===(t=Ot[0])||void 0===t?void 0:t.expense_date)?(s=null===(n=Ot[0])||void 0===n?void 0:n.approvalStatus).includes("Submitted")?"#ccc":s.includes("PM Approved")||s.includes("Pending")||s.includes("IT Approved")||s.includes("HR Approved")?"#CDE6FE":s.includes("PM Rejected")?"#e54c53":s.includes("Paid")?"#D9FBB3":s.includes("Approved To Pay")?"#0080ff":s.includes("FM Rejected")||s.includes("IT Rejected")||s.includes("HR Rejected")?"#e54c53":"":""},Ds=(0,i.useState)({}),Zs=(0,r.Z)(Ds,2),ks=Zs[0],Ts=Zs[1];(0,i.useEffect)((function(){ue((function(){return(0,C.jsx)(C.Fragment,{children:Me.length>0?null===Me||void 0===Me?void 0:Me.map((function(e){var t,n,s=/\d+$/.test(e.lkup_name);return(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"innerRows justify-content-between",children:[(0,C.jsx)("span",{children:e.lkup_name}),!s&&(void 0===Rt||634===(null===(t=Ot[0])||void 0===t?void 0:t.status_id))&&(0,C.jsx)(h.poH,{style:{cursor:"pointer"},title:"Add another expense",onClick:function(){!function(e){var t=Me.findIndex((function(t){return t.id===e}));if(-1!==t){var n=Me.filter((function(t){return t.id.toString().startsWith(e)&&t.id!==e})).length+1,s={id:"".concat(e,"_").concat(n),lkup_name:"".concat(Me[t].lkup_name," Expense ").concat(n)};Me.splice(t+n,0,s),we((0,c.Z)(Me))}else console.error("Expense type not found.")}(e.id)}}),void 0==Rt||634==(null===(n=Ot[0])||void 0===n?void 0:n.status_id)?(0,C.jsx)(h.SW4,{style:{cursor:"pointer"},title:"Delete Expense",onClick:function(){Ts(e),Ga(!0)}}):""]})}),K.map((function(t){var n,s,a;return(0,C.jsx)("td",{children:(0,C.jsxs)("div",{className:"inputFields",children:[(0,C.jsx)("span",{children:yt.length>0&&void 0==Rt?fn:pn}),(0,C.jsx)("input",{type:"text",id:e.id,readOnly:!0,style:{textAlign:"right",backgroundColor:"".concat(Cs(t))},defaultValue:(null===(n=yt.find((function(n){return n.expTypId==e.id&&n.date==y()(t).format("YYYY-MM-DD")})))||void 0===n?void 0:n.expAmt)>0?null===(s=yt.find((function(n){return n.expTypId==e.id&&n.date==y()(t).format("YYYY-MM-DD")})))||void 0===s?void 0:s.expAmt.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"",onClick:function(n){var s=""+e.id;En(!0),Se(s),Dt(t),void 0==Rt&&rt(nn.project),is((function(){var e;return null===(e=X.find((function(e){return e.id==nn.project})))||void 0===e?void 0:e.expenseBillable})),gs(e.lkup_name)},onChange:function(n){bt((function(s){var a=(0,c.Z)(s),r=y()(t).format("YYYY-MM-DD"),i=e.id,l=a.findIndex((function(e){return e.date==r&&e.expTypId==i}));return a[l].expAmt=n.target.value,a}))},onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()},disabled:y()(t).isBefore(y()(_a(),"DD-MMMM-YYYY"))||void 0!==Rt&&yt[0].date!==y()(t).format("YYYY-MM-DD")}),y()(t).format("YYYY-MM-DD")==(null===(a=Ot[0])||void 0===a?void 0:a.expense_date)&&void 0!==Rt&&Kt.length>0&&(0,C.jsx)(F.odP,{style:{cursor:"pointer"},onClick:function(){return tr(!0)}})]})},t)})),(0,C.jsx)("td",{style:{textAlign:"right"},children:(0,C.jsx)("strong",{className:"text-center m-0",children:yt.length>0&&(0,C.jsx)("span",{children:ns(e)})})})]})})):(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:K.length+2,className:"text-center",style:{backgroundColor:"#EEEEEE"},children:"No Expenses"})})})}))}),[Me,pt,yt,K,pn,fn,Ot]);var Es=(0,i.useState)(0),Ms=(0,r.Z)(Es,2),ws=Ms[0],As=Ms[1],_s=(0,i.useState)(""),Is=(0,r.Z)(_s,2),Fs=Is[0],Ys=Is[1],Rs=(0,i.useState)(0),Ps=(0,r.Z)(Rs,2),Bs=Ps[0],Os=Ps[1];(0,i.useEffect)((function(){var e=Gn*yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)-parseFloat(ws);Os(parseFloat(e))}),[ws,yt]),(0,i.useEffect)((function(){vt((function(){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("table",{className:"amtTbl Net_table",children:(0,C.jsxs)("tbody",{children:[(0,C.jsxs)("tr",{style:{backgroundColor:"#e6ecff",border:"0px"},children:[(0,C.jsx)("td",{children:(0,C.jsx)("strong",{children:"Total"})}),(0,C.jsxs)("td",{children:[": ",pn]}),(0,C.jsx)("td",{children:(0,C.jsx)("strong",{style:{float:"right"},children:isNaN(yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn)?"0.00":(yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)*Gn).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})})]}),(0,C.jsxs)("tr",{style:{backgroundColor:"#ffffe6"},children:[(0,C.jsx)("td",{children:(0,C.jsx)("strong",{children:"Advance"})}),(0,C.jsxs)("td",{children:[": ",pn]}),(0,C.jsx)("td",{style:{paddingRight:"0.25%"},children:(0,C.jsx)("input",{type:"text",style:{textAlign:"right"},defaultValue:"0.00",onChange:function(e){return As(e.target.value)},onKeyDown:function(e){var t=e.key,n=/^[0-9]$/.test(t),s="."===t,a=["Backspace","Delete","ArrowLeft","ArrowRight"].includes(t);n||s||a||e.preventDefault()}})})]}),(0,C.jsxs)("tr",{style:{backgroundColor:"#ffe6f3"},children:[(0,C.jsx)("td",{children:(0,C.jsx)("strong",{children:"Net"})}),(0,C.jsxs)("td",{children:[": ",pn]}),(0,C.jsx)("td",{children:(0,C.jsx)("strong",{style:{float:"right"},children:isNaN(Gn)||isNaN(parseFloat(ws||0))||isNaN(yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0))?"0.00":(Gn*yt.map((function(e){return parseFloat(e.expAmt)})).reduce((function(e,t){return e+t}),0)-parseFloat(ws||0)).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})})]})]})})})}))}),[pt,yt,ws,pn]);var Ls=(0,i.useState)({}),Us=(0,r.Z)(Ls,2),Hs=Us[0],Vs=Us[1];(0,i.useEffect)((function(){if(!1===Tn){if(0===Object.keys(Hs).length)return;var e=yt.findIndex((function(e){return e.expTypId===Hs.expTypId&&e.date===Hs.date}));bt(-1!==e?function(t){var n=(0,c.Z)(t);return n[e]=(0,l.Z)({},Hs),n}:function(e){return[].concat((0,c.Z)(e),[(0,l.Z)({},Hs)])})}}),[Tn,Hs]);var zs=(0,i.useState)([]),Ws=(0,r.Z)(zs,2),$s=Ws[0],Ks=Ws[1],Gs=(0,i.useState)(!1),Js=(0,r.Z)(Gs,2),qs=Js[0],Xs=Js[1],Qs=(0,i.useState)({}),ea=(0,r.Z)(Qs,2),ta=ea[0],na=ea[1],sa=(0,i.useState)(!1),aa=(0,r.Z)(sa,2),ra=aa[0],ia=aa[1],la=(0,i.useState)(!1),ca=(0,r.Z)(la,2),oa=ca[0],da=ca[1],ua=(0,B.I0)();(0,i.useEffect)((function(){ra&&(Yt("/expense/Create/".concat(ta.expenseStackId)),window.location.reload()),oa&&(Xt.includes(parseInt(It))?(ua((0,O.B3)("Search")),Yt("/search/userExpenseHistory"),Ft("Search")):setTimeout((function(){Yt("/stackView")}),2e3))}),[ra,oa]);var pa=(0,i.useState)(!1),ma=(0,r.Z)(pa,2),xa=ma[0],ha=ma[1],fa=(0,i.useState)(!1),va=(0,r.Z)(fa,2),ja=va[0],ga=va[1],ya=(0,i.useState)(!1),ba=(0,r.Z)(ya,2),Na=ba[0],Sa=ba[1],Ca=function(e){var t=yt.filter((function(e){return e.expAmt>0})),n={};if(t.length>0){n={isSubmit:e,stackId:void 0!==Rt?Rt:"",expLvlType:je,stackDesc:Fs,stackAdvance:ws,netAmount:Bs,stackCurrency:D.find((function(e){return e.currencyCode==pt})).id,tripId:ka,redirectToCreate:!1,expInfo:t,fileMap:Ns},1==e&&void 0==Rt&&(n.stackId=ta.expenseStackId);for(var s=new FormData,a=0;a<$s.length;a++)s.append("files",$s[a],$s[a].name);s.append("parseParams",JSON.stringify(n)),1===e?$s.length>0||Kt.length>0?(ga(!1),x().post(an+"/timeandexpensesms/projectExpense/save?userId=".concat(It),s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),na(e.data),_t(!0),setTimeout((function(){_t(!1)}),3e3),setTimeout((function(){da(!0)}),3e3),ga(!1)})).catch((function(e){ga(!1),ha(!0),setTimeout((function(){ha(!1)}),3e3)}))):(Sa(!0),setTimeout((function(){Sa(!1)}),3e3)):0===e&&(ga(!1),x().post(an+"/timeandexpensesms/projectExpense/save?userId=".concat(It),s,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),na(e.data),_t(!0),setTimeout((function(){_t(!1)}),3e3),ia(!0),ga(!1)})).catch((function(e){ga(!1),ha(!0),setTimeout((function(){ha(!1)}),3e3)})))}else Xs(!0),setTimeout((function(){Xs(!1)}),3e3)},Da=(0,i.useState)(null),Za=(0,r.Z)(Da,2),ka=Za[0],Ta=Za[1],Ea=(0,i.useState)([]),Ma=(0,r.Z)(Ea,2),wa=Ma[0],Aa=Ma[1],_a=function(){return y()().subtract(6,"months").add(4,"days").format("DD-MMM-YYYY")},Ia=(0,i.useState)(!1),Fa=(0,r.Z)(Ia,2),Ya=Fa[0],Ra=Fa[1],Pa=(0,i.useState)(!1),Ba=(0,r.Z)(Pa,2),Oa=Ba[0],La=Ba[1],Ua=(0,i.useState)(!1),Ha=(0,r.Z)(Ua,2),Va=Ha[0],za=Ha[1],Wa=(0,i.useState)(!1),$a=(0,r.Z)(Wa,2),Ka=$a[0],Ga=$a[1],Ja=function(){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(E.Tk,{visible:Ka,style:{width:"400px"},onClose:function(){return Ga(!1)},backdrop:"static",alignment:"center",children:[(0,C.jsx)(E.p0,{className:"",children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{className:"",children:"Delete Confirmation"})})}),(0,C.jsxs)(E.sD,{children:[(0,C.jsx)("span",{children:"Are you sure you want to permanently remove this item?"}),(0,C.jsx)("hr",{}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,C.jsx)("button",{className:"btn btn-primary",onClick:function(){we((function(e){return e.filter((function(e){return e.lkup_name!==ks.lkup_name}))})),bt((function(e){return e.filter((function(e){return e.name!==ks.lkup_name}))})),Wn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,Z.Z)({},ks.id,!1))})),Ga(!1),La(!0),setTimeout((function(){La(!1)}),3e3)},children:"Yes"}),(0,C.jsx)("button",{className:"btn btn-secondary mx-2",onClick:function(){return Ga(!1)},children:"No"})]})]})]})})},qa=function(){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(E.Tk,{visible:Va,style:{width:"400px"},onClose:function(){return za(!1)},backdrop:"static",alignment:"center",children:[(0,C.jsx)(E.p0,{className:"",children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{className:"",children:"Delete Confirmation"})})}),(0,C.jsxs)(E.sD,{children:[(0,C.jsx)("span",{children:"Are you sure you want to remove selected projects ?"}),(0,C.jsx)("hr",{}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,C.jsx)("button",{className:"btn btn-primary",onClick:function(){z(null),ue(null),_n(!1),La(!0),bt([]),we([]),setTimeout((function(){La(!1)}),3e3),za(!1),Et(!1),As(0),Wn({}),bt([])},children:"Yes"}),(0,C.jsx)("button",{className:"btn btn-secondary mx-2",onClick:function(){return za(!1)},children:"No"})]})]})]})})},Xa=(0,i.useState)(!1),Qa=(0,r.Z)(Xa,2),er=Qa[0],tr=Qa[1],nr=function(){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(E.Tk,{visible:er,style:{width:"300px",height:"200px"},onClose:function(){return tr(!1)},backdrop:"static",alignment:"center",children:[(0,C.jsx)(E.p0,{children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{children:"Attached Documents"})})}),(0,C.jsx)(E.sD,{children:Kt.map((function(e){return(0,C.jsx)("div",{className:"mt-2",style:{width:"250px",border:"1px solid silver"},children:(0,C.jsx)("a",{href:"".concat(an,"/CommonMS/document/downloadFile?documentId=").concat(e.document_id,"&svnRevision=").concat(e.svn_revision),children:e.file_name})},e.id)}))})]})})};return(0,C.jsxs)("div",{children:[At?(0,C.jsx)("div",{className:"statusMsg success",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(h.hXj,{style:{marginTop:"-2px"}}),"Expense(s) Saved Successfully"]})}):"",Ya?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{style:{marginTop:"-2px"}})," Please select project(s) to delete"]})}):"",Na?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{style:{marginTop:"-2px"}})," Receipts are missing for some expenses. Please add receipts to Submit."]})}):"",xa?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{style:{marginTop:"-2px"}})," Expense save failed."]})}):"",qs?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{style:{marginTop:"-2px"}})," Please provide at least one expense"]})}):"",ds?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{style:{marginTop:"-2px"}})," Please select a project"]})}):"",Oa?(0,C.jsx)("div",{className:"statusMsg success",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(h.hXj,{style:{marginTop:"-2px"}}),"Expense deleted Successfully"]})}):"",(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),void 0==Rt?(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsx)("h2",{children:"Create Expense Report : Draft"})}):(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsxs)("h2",{children:[null===(t=Ot[0])||void 0===t?void 0:t.approvalStatus," Expense Report :"," ",null===(n=Ot[0])||void 0===n?void 0:n.stackName]})}),(0,C.jsx)("div",{className:"childThree"})]})}),(0,C.jsx)("div",{className:"helpBtn",style:{float:"right",paddingTop:"5px"},children:(0,C.jsx)(w.Z,{pdfname:"CreateExpenseType.pdf",name:"Create Expense Report : Draft Help"})}),(0,C.jsxs)("div",{className:"group mb-3 customCard",children:[(0,C.jsxs)("div",{className:"group-content row",children:[(0,C.jsxs)("div",{className:"col-md-12 roleTableLegends",children:[(0,C.jsxs)("span",{style:{margin:"0px 0px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#cccccc"}),"Submitted"]}),(0,C.jsxs)("span",{style:{margin:"0px 6px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#e54c53"}),"Rejected"]}),(0,C.jsxs)("span",{style:{margin:"0px 6px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#CDE6FE"}),"Approved"]}),(0,C.jsxs)("span",{style:{margin:"0px 6px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#0080ff"}),"Approved To Pay"]}),(0,C.jsxs)("span",{style:{margin:"0px 6px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#D9FBB3"}),"Paid"]}),(0,C.jsxs)("span",{style:{margin:"0px 6px"},children:[(0,C.jsx)(I.rJz,{size:12,color:"#009933"}),"Received"]})]}),void 0==Rt&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row ",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"email-input",children:"Date"}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)(d(),{selected:j,onChange:function(e){return g(e)},placeholderText:"Billing Start Date",dateFormat:"dd-MMM-yyyy",minDate:new Date(_a())})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"country-select",children:"Expense For"}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("select",{id:"country-select",onChange:function(e){ge(e.target.value)},onBlur:function(){7==je&&sn((function(e){var t;return(0,l.Z)((0,l.Z)({},e),{},{project:null===(t=X[0])||void 0===t?void 0:t.id})}))},children:[{id:3,value:"Project"},{id:7,value:"Business Unit"}].map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.value},e.id)}))})})]})}),3==je&&(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Project",(0,C.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsxs)("select",{id:"projects",onChange:function(e){!function(e){sn((function(t){return(0,l.Z)((0,l.Z)({},t),{},{project:e.target.value})}))}(e)},disabled:An&&3!==je,style:{backgroundColor:ds?"#F2DEDE":""},children:[(0,C.jsx)("option",{value:"",children:"<<Please Select>>"}),null===X||void 0===X?void 0:X.map((function(e,t){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})})]})}),7==je&&(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Business Unit",(0,C.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("select",{id:"projects",disabled:7==je,style:{backgroundColor:ds?"#F2DEDE":""},children:null===X||void 0===X?void 0:X.map((function(e,t){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"country-select",children:"Currency"}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("select",{onChange:function(e){mt((function(){return D.find((function(t){return t.id==e.target.value})).currencyCode})),void 0==Rt&&Jn((function(){var e,t=null===D||void 0===D?void 0:D.find((function(e){return e.currencyCode==pt})).id;return null===(e=Ue[Qn][t])||void 0===e?void 0:e.valueOfUSD}))},children:D.map((function(e){return(0,C.jsx)("option",{value:e.id,selected:448==e.id,children:e.currency})}))})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2 mt-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"name",children:"Trip"}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6 autoComplete-container",children:(0,C.jsx)(A.ReactSearchAutocomplete,{name:"Trip",id:"tripId",placeholder:"Type/Press Space",className:"AutoComplete ",type:"Text",items:wa,showIcon:!1,onSearch:function(e){!function(e){var t=parseInt(It)+1;x().get(an+"/timeandexpensesms/projectExpense/tripId?searchStr=".concat(e,"&resId=").concat(t)).then((function(e){var t=e.data.map((function(e){return{name:e.label,id:e.id}}));Aa(t)})).catch((function(e){console.error(e)}))}(e.trim())},onSelect:function(e){Ta(e.id)},labelKey:"label",valueKey:"id"})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2 mt-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5 align-self-start",htmlFor:"message-textarea",children:"Stack Description"}),(0,C.jsx)("span",{className:"col-1 p-0 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("textarea",{style:{resize:"none"},rows:2,className:"form-control",id:"message-textarea",placeholder:"Please Enter Description",required:!0,onChange:function(e){return Ys(e.target.value)}})})]})})]})]}),void 0==Rt&&(0,C.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:(0,C.jsx)("div",{children:(0,C.jsxs)("button",{onClick:function(){!function(){if(void 0==nn.project)return us(!0),void setTimeout((function(){us(!1)}),3e3);_n(!0),ls(),void 0!==nn.project&&hs(!0)}()},type:"button",className:"btn btn-primary",title:"Search",disabled:xs,children:[(0,C.jsx)(P.C$9,{})," Add"," "]})})})]}),(0,C.jsxs)("div",{children:[void 0==Rt?(0,C.jsxs)("div",{style:{border:" 1px solid #fff",borderRadius:"5px",margin:" 5px 0",padding:"2px",borderColor:"#d7ae09",color:"#d7ae09",alignItems:"center",gap:"2px",fontSize:"13px"},children:[(0,C.jsxs)("span",{className:"bold",children:[(0,C.jsx)(F.BrF,{style:{marginLeft:"15px",marginRight:"15px"}})," ","Note : \xa0"]}),(0,C.jsxs)("span",{children:["You can add expense from ",_a()]})]}):(0,C.jsxs)("div",{style:{border:" 1px solid #fff",borderRadius:"5px",margin:" 5px 0",padding:"2px",borderColor:"#d7ae09",color:"#d7ae09",alignItems:"center",gap:"2px",fontSize:"13px"},children:[(0,C.jsxs)("span",{className:"bold",children:[(0,C.jsx)(F.BrF,{style:{marginLeft:"15px",marginRight:"15px"}})," ","Note : \xa0"]}),(0,C.jsx)("span",{children:"Changes can't be made once submitted."})]}),et?(0,C.jsx)(Y.Z,{handleAbort:function(){return tt(!1)}}):(0,C.jsx)("div",{className:"group-content row",children:(0,C.jsxs)("div",{className:"col-md-12",children:[Vt&&(0,C.jsx)(T,{formData:nn,setFormData:sn,projectRenderData:V,dates:K,setDates:G,expenseTypeRenderData:de,iconState:Yn,setIconState:Rn,setRates:He,setWeekData:cn,setLoader:tt,loader:et}),ne&&(0,C.jsx)(M,{expenseTypePopupState:ne,setExpenseTypePopupState:se,expenseTypeOptions:ie,formData:nn,setFormData:sn,dates:K,setExpenseTypeRenderData:ue,expenseTypesValues:xe,setExpenseTypesValues:he,setExpensesTypePopup:En,expensesTypePopup:Tn,setExpenseTypeId:Se,setSelectedExpenseTypes:we,selectedExpenseTypes:Me,iconState:Yn,setIconState:Rn,isValuesChecked:zn,setIsValuesChecked:Wn,selectAll:Ln,setSelectAll:Un}),Tn&&(0,C.jsx)(_,{expensesTypePopup:Tn,setExpensesTypePopup:En,expenseTypeId:Ne,currencyOptionsData:D,country:Ze,cities:Ie,carTypes:Pe,paidBy:We,airportList:Je,mobileType:ct,expDate:Ct,setExpenseData:Vs,expenseData:Hs,expInfo:yt,projectId:at,expName:js,setFileMap:Ss,fileMap:Ns,setRates:He,setFiles:Ks,isExpenseBillable:rs,expCurrencySymbol:fn,setExpCurrencySymbol:vn,files:$s,id:Rt}),An&&Vt?ft:"",void 0!=Rt&&634!=(null===(o=Ot[0])||void 0===o?void 0:o.status_id)||!Vt?"":(0,C.jsxs)("div",{className:" form-group col-md-12 col-sm-12 col-xs-12 btn-container center my-3 mb-1",children:[(0,C.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){Ca(0)},children:[(0,C.jsx)(p.TvB,{}),"Save"]}),(0,C.jsxs)("button",{className:"btn btn-primary",type:"submit",onClick:function(){Ca(1)},children:[(0,C.jsx)(h.hXj,{}),"Submit"]}),(0,C.jsxs)("button",{className:"btn btn-secondary",onClick:function(){Tt?za(!0):(Ra(!0),setTimeout((function(){Ra(!1)}),3e3))},children:[(0,C.jsx)(f.sQZ,{size:"11px"})," Delete"]})]})]})})]}),ja?(0,C.jsx)(Y.Z,{handleAbort:function(){return ga(!1)}}):"",Va&&(0,C.jsx)(qa,{}),er&&(0,C.jsx)(nr,{}),Ka&&(0,C.jsx)(Ja,{})]})};n(72572);var U=n(32128),H=n(11087);var V=function(e){var t,n=e.buttonValue,s=(document.createElement("div"),(0,i.useState)([])),a=(0,r.Z)(s,2),l=(a[0],a[1]),c=(0,i.useState)([]),o=(0,r.Z)(c,2),d=(o[0],o[1],(0,i.useState)([])),p=(0,r.Z)(d,2),m=p[0],f=(p[1],u.N.baseUrl),v=(0,i.useState)([]),j=(0,r.Z)(v,2),g=j[0],y=(j[1],(0,i.useState)([])),b=(0,r.Z)(y,2),D=b[0],Z=(b[1],localStorage.getItem("resId")),k=(0,i.useState)([]),T=(0,r.Z)(k,2),E=T[0],M=T[1],A=(0,i.useState)([]),_=(0,r.Z)(A,2),I=_[0],F=(_[1],(0,i.useState)([])),R=(0,r.Z)(F,2),P=R[0],B=R[1],O=(0,i.useState)([]),L=(0,r.Z)(O,2),V=L[0],z=(L[1],(0,i.useState)([])),W=(0,r.Z)(z,2),$=W[0],K=(W[1],(0,i.useState)([])),G=(0,r.Z)(K,2),J=G[0],q=(G[1],(0,i.useState)([])),X=(0,r.Z)(q,2),Q=X[0],ee=X[1],te=(0,i.useState)([]),ne=(0,r.Z)(te,2),se=ne[0],ae=ne[1],re=(0,i.useState)(!1),ie=(0,r.Z)(re,2),le=ie[0],ce=ie[1],oe=(0,i.useState)([]),de=(0,r.Z)(oe,2),ue=de[0],pe=de[1],me=(0,i.useState)({userId:"",ObjectTypeId:"",ObjectId:"",VisitedOn:""}),xe=(0,r.Z)(me,2),he=xe[0],fe=(xe[1],(0,i.useState)(-1)),ve=(0,r.Z)(fe,2),je=ve[0],ge=(ve[1],(0,i.useState)(-1)),ye=(0,r.Z)(ge,2),be=ye[0],Ne=(ye[1],(0,i.useState)(-1)),Se=(0,r.Z)(Ne,2),Ce=Se[0],De=(Se[1],(0,i.useState)(-1)),Ze=(0,r.Z)(De,2),ke=Ze[0],Te=(Ze[1],(0,i.useState)(-1)),Ee=(0,r.Z)(Te,2),Me=Ee[0],we=(Ee[1],(0,i.useState)(!1)),Ae=(0,r.Z)(we,2),_e=Ae[0],Ie=Ae[1],Fe=(0,i.useState)([]),Ye=(0,r.Z)(Fe,2),Re=Ye[0],Pe=(Ye[1],(0,i.useState)([])),Be=(0,r.Z)(Pe,2),Oe=Be[0],Le=Be[1],Ue=null===(t=Re[Re.length-1])||void 0===t?void 0:t.id;console.log(Ue,".........");var He=(0,i.useState)([]),Ve=(0,r.Z)(He,2),ze=(Ve[0],Ve[1],(0,i.useState)("")),We=(0,r.Z)(ze,2),$e=We[0],Ke=We[1],Ge=(0,i.useState)(!1),Je=(0,r.Z)(Ge,2),qe=Je[0],Xe=Je[1],Qe=(0,i.useRef)(null);(0,i.useEffect)((function(){}),[g,D,$,Q]),console.log(ue),(0,i.useEffect)((function(){}),[E]),(0,i.useEffect)((function(){}),[he]),(0,i.useEffect)((function(){}),[je,be,Ce,ke,Me,Ue]),(0,i.useEffect)((function(){}),[]),console.log(P),(0,i.useEffect)((function(){x()({method:"GET",url:f+"/CommonMS/master/getMenus?loggedUserId=".concat(Z)}).then((function(e){e.data.forEach((function(e){"Time & Expenses"===e.display_name&&"Expense"==n&&Le([e])}))}))}),[]),(0,i.useEffect)((function(){nt(),st()}),[n]);var et,tt,nt=function(){Xe(!1),Qe.current=new AbortController,x()({method:"get",url:f+"/timeandexpensesms/ExpenseOpen/gettabledata?userid=".concat(Z),signal:Qe.current.signal}).then((function(e){e=e.data;ae(e),setTimeout((function(){Xe(!1)}),3e3)})).catch((function(e){}))},st=function(){x()({method:"get",url:f+"/timeandexpensesms/ExpenseOpen/getSearchdata"}).then((function(e){var t=e.data;t.push({id:"-1",name:"<<ALL>>"}),ee(t)})).catch((function(e){}))},at=function(e){document.getElementsByClassName("err");if(null==e){if(null==E.id)return Ke("1px solid rgb(183 1 1) !important"),void Ie(!0);Ie(!1),H.rU,"/engagement/Dashboard/:".concat(E.id),console.log(E.id),x()({method:"post",url:f+"/timeandexpensesms/ExpenseOpen/updateUserSearchHistory",data:{userId:Z,objectId:E.id},headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e)}))}else x()({method:"post",url:f+"/timeandexpensesms/ExpenseOpen/updateUserSearchHistory",data:{userId:Z,objectId:e}}).then((function(e){console.log(e)}))};return"Project"===n?(et="OpenProject.pdf",tt="Project Open Help"):"Engagement"===n?(et="Eng.pdf",tt="Engagement Open Help"):"Customer"===n?(et="OpenCustomer.pdf",tt="Customer Open Help"):"Expense"===n?(et="expense.pdf",tt="Expense Open Help"):(et="OpenVMG.pdf",tt="Vendor Open Help"),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsxs)("h2",{children:[" ","".concat(n," Search History")]})}),(0,C.jsx)("div",{className:"childThree"})]})}),"Expense"==n?(0,C.jsx)(S.Z,{routes:Oe,currentScreenName:["Expenses","Expense Search History"]}):"Project"==n?(0,C.jsx)(S.Z,{routes:Oe,currentScreenName:["Projects","Project Search History"]}):"Customer"==n?(0,C.jsx)(S.Z,{routes:Oe,currentScreenName:["Customers","Customer Search History"]}):"Vendor"==n?(0,C.jsx)(S.Z,{routes:Oe,currentScreenName:["Vendor Search History"]}):"Engagement"==n?(0,C.jsx)(S.Z,{routes:Oe,currentScreenName:["Engagements","Engagement Search History"]}):"",(0,C.jsx)("div",{className:"helpBtn",style:{float:"right",paddingTop:"5px"},children:(0,C.jsx)(w.Z,{pdfname:et,name:tt})}),(0,C.jsx)("div",{className:"body body-bg col-xs-12 col-sm-12 col-md-12 col-lg-12 customCard ",children:(0,C.jsxs)("div",{className:"form-group cvu darkHeader",children:[(0,C.jsxs)("div",{className:"col-6 my-2 no-padding",children:[m.length>0||V.length>0||J.length>0||se.length>0?(0,C.jsxs)("table",{id:"details",className:"col-12 table table-bordered  openTable ",children:[(0,C.jsxs)("thead",{children:[(0,C.jsx)("tr",{children:"Expense"==n?(0,C.jsx)("th",{colSpan:4,className:"tableheading",style:{backgroundColor:"#eeeeee"},children:(0,C.jsx)("h6",{className:"text-center m-0",style:{color:"#187fde",fontSize:"15px"},children:"Recent ".concat(n," Searches")})}):(0,C.jsx)("th",{colSpan:2,className:"tableheading",style:{backgroundColor:"#eeeeee"},children:(0,C.jsx)("h6",{className:"text-center m-0",style:{color:"#187fde",fontSize:"15px"},children:"Recent ".concat(n," Searches")})})}),"Expense"==n?(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:(0,C.jsx)("b",{children:"Expense"})})}),(0,C.jsx)("th",{children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:(0,C.jsx)("b",{children:"Created By"})})}),(0,C.jsx)("th",{children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:(0,C.jsx)("b",{children:"Net Amount"})})}),(0,C.jsx)("th",{children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:(0,C.jsx)("b",{children:"Status"})})})]}):(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{style:{backgroundColor:"#eeeeee"},children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:n})}),(0,C.jsx)("th",{style:{backgroundColor:"#eeeeee"},children:(0,C.jsx)("h6",{className:"text-center m-0",style:{fontSize:"13px"},children:"Actions"})})]})]}),(0,C.jsx)("tbody",{children:"Expense"==n?(0,C.jsxs)(C.Fragment,{children:[console.log(se),se.map((function(e){return(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{value:e.id,children:(0,C.jsx)("span",{onClick:function(){at(e.id),Ie(!1)},children:(0,C.jsx)(H.rU,{"data-toggle":"tooltip",title:"Go To Expense Stack",to:"/expense/Create/".concat(e.id),target:"_blank",children:e.Expense})})}),(0,C.jsx)("td",{children:(0,C.jsx)("span",{children:e.createdBy})}),(0,C.jsx)("td",{align:"right",children:(0,C.jsxs)("span",{children:["&#8377"==e.Currency?"\u20b9 ":"&#36"==e.Currency?"$ ":"&#163"==e.Currency?"\xa3 ":"&#128"==e.Currency?"\u20ac ":"C&#36"==e.Currency?"C$ ":"&#107;&#110;"==e.Currency?"kn ":"Bds&#36"==e.Currency?"Bds$ ":"Jordan"==e.Currency?"Jordan ":"ASUD"==e.Currency?"ASUD ":"","null"==e.NetAmount?" ":"&#1583;.&#1573;"==e.Currency?(0,C.jsxs)(C.Fragment,{children:[parseFloat(e.NetAmount).toFixed(2)," \u062f.\u0625 "]}):parseFloat(e.NetAmount).toFixed(2)]})}),(0,C.jsx)("td",{children:(0,C.jsx)("span",{children:e.Status})})]})}))]}):""})]}):"",(0,C.jsxs)("div",{className:"body col-xs-12 col-sm-12 col-md-12 col-lg-12  mt-3  no-padding",children:[_e?(0,C.jsx)("div",{className:"statusMsg error col-12 mb-2",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{}),"\xa0","Please select any ".concat(n)]})}):"",le?(0,C.jsx)("div",{className:"statusMsg error col-12 mb-2",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(N.SZZ,{}),"\xa0","Not authorized to any ".concat(n)]})}):"",(0,C.jsx)("div",{className:" group-content  err",children:(0,C.jsxs)("div",{className:"row ",children:[(0,C.jsxs)("div",{className:"Expense"==n?"col-3 h6":"col-2 h6",style:{fontSize:"13px"},children:["Expense"==n?"Expense Stack":n,"Expense"==n?(0,C.jsx)("span",{className:"required error-text ml-1",children:"* "}):"",":"]}),(0,C.jsx)("div",{className:"col-6 autoComplete-container",id:"autoComplete",style:{fontSize:"12px"},children:(0,C.jsx)(U.Z,{vendorListData:g,setAutoCompleteData:M,handleSelect:function(e){document.getElementsByClassName("err");if(null==e){if(null==E.id)return Ke("1px solid rgb(183 1 1) !important"),void Ie(!0);Ie(!1),H.rU,"/vendor/vendorDoc/:".concat(E.id),console.log(E.id),x()({method:"post",url:f+"/VendorMS/vendor/updateUserSearchHistory",data:{userId:Z,objectId:E.id},headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e)}))}else console.log(e),x()({method:"post",url:f+"/VendorMS/vendor/updateUserSearchHistory",data:{userId:Z,objectId:e}}).then((function(e){console.log(e)}))},buttonValue:n,projectData:D,setAccess:l,customerData:I,filteredData:ue,setFilteredData:pe,setExpensesLength:B,autoCompleteValidation:$e,engagementData:$,expenseData:Q,handleExpenseSelect:at})}),(0,C.jsx)("div",{className:"err col-2",children:P>0?(0,C.jsx)(H.rU,{title:"Search",to:"Expense"==n&&"/expense/Create/".concat(E.id),target:"_blank",children:(0,C.jsxs)("button",{className:"btn btn-primary ",onClick:function(){"Expense"==n&&at()},children:[(0,C.jsx)(h.Goc,{})," Search"]})}):(0,C.jsxs)("button",{className:"btn btn-primary ",onClick:function(){ce(!0),setTimeout((function(){ce(!1)}),1e3)},children:[(0,C.jsx)(h.Goc,{})," Search"]})})]})})]})]}),qe?(0,C.jsx)(Y.Z,{handleAbort:function(){Qe.current&&Qe.current.abort(),Xe(!1)}}):""]})})]})},z=n(36167),W=n(87890),$=(n(50919),n(59962),n(64802),n(92080));var K=function(e){var t=new Date,o=new Date;o.setMonth(t.getMonth()-1),o.setDate(o.getDate()),console.log(o);var m=(0,i.useState)(o),g=(0,r.Z)(m,2),b=g[0],N=g[1],D=(0,i.useState)(new Date),Z=(0,r.Z)(D,2),T=Z[0],M=Z[1],A=(0,i.useState)([]),_=(0,r.Z)(A,2),L=_[0],U=_[1],V=(0,i.useState)([]),K=(0,r.Z)(V,2),G=K[0],J=K[1],q=(0,i.useState)(""),X=(0,r.Z)(q,2),Q=X[0],ee=X[1],te=(0,i.useState)([]),ne=(0,r.Z)(te,2),se=ne[0],ae=ne[1],re=(0,i.useState)(null),ie=(0,r.Z)(re,2),le=ie[0],ce=ie[1],oe=(0,i.useState)(!1),de=(0,r.Z)(oe,2),ue=de[0],pe=de[1],me=(0,i.useState)(!1),xe=(0,r.Z)(me,2),he=xe[0],fe=xe[1],ve=(0,B.I0)(),je=(0,i.useState)(!1),ge=(0,r.Z)(je,2),ye=ge[0],be=ge[1],Ne=(0,i.useState)(p.UdN),Se=(0,r.Z)(Ne,2),Ce=Se[0],De=Se[1],Ze=(0,i.useState)({global:{value:null,matchMode:W.a6.CONTAINS},stackName:{value:null,matchMode:W.a6.STARTS_WITH},resource:{value:null,matchMode:W.a6.STARTS_WITH},approval:{value:null,matchMode:W.a6.STARTS_WITH},projectCode:{value:null,matchMode:W.a6.STARTS_WITH},projectName:{value:null,matchMode:W.a6.STARTS_WITH},amt:{value:null,matchMode:W.a6.STARTS_WITH},payment:{value:null,matchMode:W.a6.STARTS_WITH},disbursedAmt:{value:null,matchMode:W.a6.STARTS_WITH},clientAmt:{value:null,matchMode:W.a6.STARTS_WITH},createdOn:{value:null,matchMode:W.a6.CONTAINS}}),ke=(0,r.Z)(Ze,2),Te=ke[0],Ee=ke[1],Me=(0,i.useState)(""),we=(0,r.Z)(Me,2),Ae=we[0],_e=we[1],Ie=(0,i.useState)(),Fe=(0,r.Z)(Ie,2),Ye=Fe[0],Re=Fe[1],Pe=(0,i.useState)(!0),Be=(0,r.Z)(Pe,2),Oe=Be[0],Le=Be[1],Ue=(0,i.useState)({}),He=(0,r.Z)(Ue,2),Ve=He[0],ze=He[1],We=(0,i.useState)([]),$e=(0,r.Z)(We,2),Ke=$e[0],Ge=$e[1],Je=(0,i.useState)(!1),qe=(0,r.Z)(Je,2),Xe=qe[0],Qe=qe[1],et=(0,i.useState)({}),tt=(0,r.Z)(et,2),nt=tt[0],st=tt[1],at=(0,i.useState)([]),rt=(0,r.Z)(at,2),it=rt[0],lt=rt[1],ct=(0,i.useState)(!1),ot=(0,r.Z)(ct,2),dt=ot[0],ut=ot[1],pt=(0,i.useState)([]),mt=(0,r.Z)(pt,2),xt=mt[0],ht=mt[1],ft=(0,i.useState)(),vt=(0,r.Z)(ft,2),jt=(vt[0],vt[1],(0,i.useState)(0)),gt=(0,r.Z)(jt,2),yt=gt[0],bt=gt[1],Nt=(0,i.useState)([]),St=(0,r.Z)(Nt,2),Ct=St[0],Dt=St[1],Zt=(0,i.useState)(!0),kt=(0,r.Z)(Zt,2),Tt=(kt[0],kt[1]),Et=(0,i.useState)(!1),Mt=(0,r.Z)(Et,2),wt=(Mt[0],Mt[1],(0,i.useState)(!1)),At=(0,r.Z)(wt,2),_t=(At[0],At[1],(0,i.useState)(!1)),It=(0,r.Z)(_t,2),Ft=It[0],Yt=It[1],Rt=(0,i.useState)(0),Pt=(0,r.Z)(Rt,2),Bt=Pt[0],Ot=Pt[1],Lt=localStorage.getItem("resId"),Ut=(e.handleAbort,u.N.baseUrl),Ht=((0,i.useRef)(),(0,R.s0)()),Vt=e.paymentUsers,zt=Vt.includes(parseInt(Lt))?[{label:"PM Approved",value:628}]:[],Wt=Vt.includes(parseInt(Lt))?[{label:"Approved To Pay",value:631},{label:"Paid",value:636},{label:"Received",value:637},{label:"Pending",value:844}]:[],$t=(0,i.useState)(zt),Kt=(0,r.Z)($t,2),Gt=Kt[0],Jt=Kt[1],qt=(0,i.useState)(Wt),Xt=(0,r.Z)(qt,2),Qt=Xt[0],en=Xt[1],tn=i.useState(null),nn=(0,r.Z)(tn,2),sn=nn[0],an=nn[1],rn=function(){an(!1)},ln=(0,i.useState)([]),cn=(0,r.Z)(ln,2),on=cn[0],dn=cn[1],un="Time & Expenses",pn=(0,i.useState)([]),mn=(0,r.Z)(pn,2),xn=mn[0],hn=mn[1];console.log(xn),(0,i.useEffect)((function(){x()({method:"GET",url:Ut+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(Lt,"&Cont=Expense")}).then((function(e){var t=e.data;console.log(t),t.forEach((function(e){e.display_name===un&&dn([e])}));var n=t.find((function(e){return"Search"===e.display_name})),s=n?n.access_level:null;console.log(s),hn(s)}))}),[]),(0,i.useEffect)((function(){x()({method:"get",url:Ut+"/ProjectMS/defectphases/getresourceid?id=".concat(Lt)}).then((function(e){var t=e.data;bt(t)})),x()({method:"GET",url:Ut+"/CommonMS/master/getMenus?loggedUserId=".concat(Lt)}).then((function(e){e.data.forEach((function(e){e.display_name===un&&dn([e])}))}))}),[]),(0,i.useEffect)((function(){fn()}),[]);var fn=function(){x().get(Ut+"/timeandexpensesms/expensesSearch/dropdowns").then((function(e){var t,n,s=[],a=[];null===(t=e.data.state)||void 0===t||t.forEach((function(e){var t={label:e.lkup_name,value:e.id};s.push(t)})),null===(n=e.data.paymentState)||void 0===n||n.forEach((function(e){var t={label:e.lkup_name,value:e.id};a.push(t)})),U(s),J(a)})).catch((function(e){return console.log(e)}))},vn=function(e){e.expanded;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(p.qL$,{className:"chevronIcon"})})},jn=function(e){var t=String(e);if(t.includes(".")){var n=t.split(".");return n[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"."+n[1].padEnd(2,"0")}return t.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+".00"},gn=function(e){var t=document.createElement("div");return t.innerHTML=e.clientCurrencyCode,t.innerHTML},yn=function(){var e={state:Gt.map((function(e){return e.value})).join(","),paymentState:Qt.map((function(e){return e.value})).join(","),fromDt:y()(b).format("YYYY-MM-DD"),toDt:y()(T).format("YYYY-MM-DD"),searchString:Q,userId:Lt},t=setTimeout((function(){pe(!0)}),2e3);x().post(Ut+"/timeandexpensesms/expensesSearch/expenseReport",e).then((function(e){for(var n=e.data,s=0;s<n.length;s++)n[s].createdOn=null==n[s].createdOn?"":y()(n[s].createdOn).format("DD-MMM-YYYY");ae(n),clearTimeout(t),pe(!1),be(!ye),De(ye?p.UdN:p.NR5)})).catch((function(e){return console.log(e)}))};(0,i.useEffect)((function(){yn()}),[]);var bn=function(e,t){var n=new Blob([e],{type:"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,t);else{var s=document.createElement("a");s.href=window.URL.createObjectURL(n),s.download=t,s.click(),window.URL.revokeObjectURL(s.href)}},Nn=(0,i.useState)(!1),Sn=(0,r.Z)(Nn,2),Cn=Sn[0],Dn=Sn[1],Zn=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=document.createElement("a")).href=Ut+"/ProjectMS/projectExpenses/downloadStack?stackId=".concat(t),n.download="Expense.pdf",Dn(!1),e.next=6,x().get(n.href).then((function(e){200===e.status&&n.click()})).catch((function(e){console.error("An error occurred:",e),setDocumentFail(!0),setTimeout((function(){setDocumentFail(!1)}),3e3)}));case 6:Dn(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kn=function(e){return(0,C.jsx)("a",{className:"linkSty",onClick:function(){var t;ut(!1),t=e.expense_id,x().get(Ut+"/ProjectMS/projectExpenses/expenseHistory?expenseId=".concat(t)).then((function(e){lt(e.data),ut(!1)})).catch((function(e){return console.log(e)})),Qe(!0),st(e)},children:"View"})};function Tn(e){var t=e.popUp,n=e.setPopUp,r=e.data,i=e.totalData,l=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n,a){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.createElement("a")).href=Ut+"/CommonMS/document/downloadFile?documentId=".concat(t,"&svnRevision=").concat(n),r.click();case 3:case"end":return e.stop()}}),e)})));return function(t,n,s){return e.apply(this,arguments)}}();return(0,C.jsx)("div",{children:dt?(0,C.jsx)(Y.Z,{handleAbort:function(){ut(!1)}}):(0,C.jsxs)(E.Tk,{visible:t,backdrop:"static",size:"lg",onClose:function(){return n(!1)},children:[(0,C.jsx)(E.p0,{style:{cursor:"all-scroll"},children:(0,C.jsx)(E.fl,{children:(0,C.jsx)("span",{className:"ft16",children:"Expense Details"})})}),(0,C.jsxs)(E.sD,{children:[(0,C.jsx)("div",{className:"container",children:(0,C.jsx)("div",{className:"form-group content",children:(0,C.jsxs)("div",{className:"col-12 row",children:[(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Project"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:i.filter((function(e){return e.stackId===r.id})).map((function(e){return e.projectName}))})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Resource"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:r.fullName})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Expense Category"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:r.Expense_Type})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Description"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:r.description})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Incurred Amount"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:gn(r)+" "+jn(r.Incurred)})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Disbursed Amount"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:gn(r)+" "+jn(r.disbursed_amount)})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Paid By"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:r.Payee})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Status"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsxs)("div",{className:"col-5",children:[null==r.Payment||""==r.Payment?r.Approval:r.Payment," "]})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Receipt(s)"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5 ellipsis",children:(0,C.jsx)("a",{className:"linkSty",onClick:function(e){return l(r.document_id,r.svn_revision,r.file_name)},title:r.file_name,children:r.file_name})})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Approval Workflow"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:r.approvalFlow.split(",").join(" >> ").slice(0,-4)})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("strong",{children:"Expense History"})}),(0,C.jsx)("div",{className:"col-1",children:":"})]})]})})}),(0,C.jsx)("div",{style:{backgroundColor:"#eee",border:"1px solid #ddd",minHeight:"40px",maxHeight:"100px",padding:"5px 7px",overflowY:"auto"},className:"row h-50",children:it.filter((function(e){return"Drafted"!=e.state})).map((function(e){return(0,C.jsxs)("div",{children:[(0,C.jsxs)("strong",{children:[e.state," by ",e.firstName," ",e.lastName," on"," ",y()(e.dateCreated).format("DD-MMM-YYYY")]}),(0,C.jsx)("br",{}),(0,C.jsxs)("div",{className:"col-12 row",children:[(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("span",{children:"Disbursed Amount"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:gn(r)+" "+jn(e.disbursedAmount)})]}),(0,C.jsxs)("div",{className:"col-6 row",children:[(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)("span",{children:"Comment"})}),(0,C.jsx)("div",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-5",children:""==e.comments||null==e.comments?"NA":e.comments})]})]})]})}))})]}),(0,C.jsx)(E.Ym,{children:(0,C.jsx)("button",{className:"btn btn-primary mx-auto",onClick:function(){return n(!1)},children:"Close"})})]})})}var En=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,C.jsx)("input",{type:"checkbox",id:"billable",defaultChecked:e.is_billable,onChange:function(t){return zn(t,e)}}):0==e.is_billable||null==e.is_billable?"No":"Yes"},Mn=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,C.jsx)("input",{type:"text",id:"disbursed",defaultValue:e.disbursed_amount,onChange:function(t){return zn(t,e)},onKeyDown:function(e){var t=e.key;/^[0-9]$/.test(t)||"."===t||"Backspace"===t||e.preventDefault()}}):(0,C.jsx)("div",{title:gn(e)+" "+jn(e.disbursed_amount),children:gn(e)+" "+jn(e.disbursed_amount)})},wn=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,C.jsx)("input",{type:"text",id:"client",defaultValue:e.client_amount,onChange:function(t){return zn(t,e)},onKeyDown:function(e){var t=e.key;/^[0-9]$/.test(t)||"."===t||"Backspace"===t||e.preventDefault()}}):(0,C.jsx)("div",{title:gn(e)+" "+jn(e.client_amount),children:gn(e)+" "+jn(e.client_amount)})},An=function(e){return e.includes("Submitted")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#ccc"}})}):e.includes("PM Approved")||e.includes("Pending")||e.includes("IT Approved")||e.includes("HR Approved")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#CDE6FE"}})}):e.includes("PM Rejected")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#e54c53"}})}):e.includes("Drafted")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#EDD4A2"}})}):e.includes("Paid")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#D9FBB3"}})}):e.includes("Approved To Pay")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#0080ff"}})}):e.includes("FM Rejected")||e.includes("IT Rejected")||e.includes("HR Rejected")?(0,C.jsx)("span",{children:(0,C.jsx)(I.rJz,{style:{color:"#e54c53"}})}):(0,C.jsx)("span",{})},_n=(0,i.useState)(""),In=(0,r.Z)(_n,2),Fn=In[0],Yn=In[1],Rn=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)&&!Vt.includes(parseInt(Lt))?(0,C.jsx)("div",{children:(0,C.jsx)("select",{onChange:function(t){return zn(t,e)},id:"dropDown",children:e.drop_down.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,C.jsx)("option",{value:t,children:n})}))})}):(0,C.jsxs)("div",{onMouseOver:function(t){an(null===t||void 0===t?void 0:t.currentTarget),Yn(e.approvalFlow.split(",").join(" >> ").slice(0,-4))},onMouseLeave:rn,className:"ellipsis",children:[An(e.Approval)," ",e.Approval]})};console.log(null===Vt||void 0===Vt?void 0:Vt.includes(parseInt(Lt)));var Pn=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)&&Vt.includes(parseInt(Lt))?(0,C.jsx)("div",{children:(0,C.jsx)("select",{onChange:function(t){return zn(t,e)},id:"dropDown",children:e.drop_down.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,C.jsx)("option",{value:t,children:n})}))})}):"string"===typeof e.Payment&&e.Payment.trim().length>0&&/[a-zA-Z]/.test(e.Payment)?(0,C.jsxs)("span",{title:e.Payment,className:"ellipsis",children:[An(e.Payment)," ",e.Payment]}):""},Bn=function(e,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{children:(0,C.jsx)("input",{className:"form-check-input",type:"checkbox",id:e.id,style:{height:"20px",width:"20px",marginLeft:"5px"},checked:Ke.some((function(t){return t.expense_id===e.expense_id})),onChange:function(n){var s=(0,c.Z)(Ct);s[t]=n.target.checked,Dt(s),e.Payment=Object.keys(e.drop_down[0])[0];var a=(0,c.Z)(Ke);if(n.target.checked)a.push(e);else{var r=a.findIndex((function(t){return t.expense_id===e.expense_id}));-1!==r&&a.splice(r,1)}!function(e){Ge(e)}(a)},disabled:$n(e)})})})},On=(0,i.useState)([]),Ln=(0,r.Z)(On,2),Un=Ln[0],Hn=Ln[1],Vn=function(e){return Ke.map((function(e){return e.expense_id})).includes(e.expense_id)?(0,C.jsx)("textarea",{id:"comment",style:{resize:"none"},defaultValue:e.comments,onChange:function(t){return zn(t,e)}}):(0,C.jsx)("div",{title:e.comments,className:"ellipsis",children:e.comments})};(0,i.useEffect)((function(){ht((function(e){return Ke}))}),[Ke]);var zn=function(e,t){var n=xt.findIndex((function(e){return e.expense_id===t.expense_id})),s=(0,c.Z)(xt);s[n]=(0,l.Z)((0,l.Z)({},s[n]),{},{disbursed_amount:"disbursed"===e.target.id?e.target.value:s[n].disbursed_amount,client_amount:"client"===e.target.id?e.target.value:s[n].client_amount,comments:"comment"===e.target.id?e.target.value:s[n].comments,is_billable:"billable"===e.target.id?!s[n].is_billable:s[n].is_billable,Payment:"dropDown"===e.target.id?e.target.value:s[n].Payment}),ht(s)},Wn=function(e,t){var n=e.map((function(e){return e.value})),s=t.map((function(e){return e.value}));return n.length===s.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},$n=function(e){return!e.isEdit};return(0,C.jsxs)("div",{children:[Ft?(0,C.jsx)("div",{className:"statusMsg success",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(h.hXj,{}),"Expense(s) Saved successfully"]})}):"",(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsx)("h2",{children:"Search Expense"})}),(0,C.jsx)("div",{className:"childThree"})]})}),(0,C.jsx)(S.Z,{routes:on,currentScreenName:["Expenses","Search Expense"]}),(0,C.jsx)("div",{className:"float-end my-2",children:(0,C.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){return Ht("/stackView")},title:"View",children:"Stack View"})}),(0,C.jsxs)("div",{className:"group mb-3 customCard",children:[(0,C.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,C.jsx)("h2",{children:"Search Filters"}),(0,C.jsx)("div",{className:"helpBtn",children:(0,C.jsx)(w.Z,{pdfname:"SearchExpense.pdf",name:"Search Expense Help"})}),(0,C.jsx)("div",{onClick:function(){be(!ye),De(ye?p.UdN:p.NR5)},children:(0,C.jsx)("span",{children:Ce})})]}),(0,C.jsx)(E.V9,{visible:!ye,children:(0,C.jsxs)("div",{className:"group-content row ",children:[(0,C.jsx)("div",{className:"col-md-12 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-3",children:["Search String",(0,C.jsx)("p",{style:{fontWeight:"100"},children:"(Searches in stack name, project and resource)"})]}),(0,C.jsx)("span",{className:"col-1",children:":"}),(0,C.jsx)("div",{className:"col-8",children:(0,C.jsx)("input",{type:"text",className:"form-control",id:"name",onChange:function(e){return ee(e.target.value)}})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"country-select",children:"Approval Workflow"}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)(z.NU,{ArrowRenderer:vn,id:"roleTypes",options:L,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Gt,valueRenderer:Wn,onChange:function(e){return Jt(e)},disabled:!1})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"country-select",children:"Payment Workflow"}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)(z.NU,{ArrowRenderer:vn,id:"roleTypes",options:G,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Qt,valueRenderer:Wn,onChange:function(e){return en(e)},disabled:!1})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2 mt-1",children:(0,C.jsxs)("div",{className:"form-group row ",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"email-input",children:"From Date"}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)(d(),{selected:b,onChange:function(e){return N(e)},dateFormat:"dd-MMM-yyyy",placeholderText:"Billing Start Date",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",maxDate:T})})]})}),(0,C.jsx)("div",{className:"col-md-3 mb-2 mt-1",children:(0,C.jsxs)("div",{className:"form-group row ",children:[(0,C.jsx)("label",{className:"col-5",htmlFor:"email-input",children:"To Date"}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsx)(d(),{selected:T,dateFormat:"dd-MMM-yyyy",onChange:function(e){return M(e)},placeholderText:"Billing Start Date",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",minDate:b})})]})}),(0,C.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 d-flex align-items-center justify-content-center no-padding center",children:(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",onClick:function(){return yn()},children:[(0,C.jsx)(p.U41,{})," Search"," "]})})]})})]}),(0,C.jsxs)("div",{style:{border:" 1px solid #fff",borderRadius:"5px",margin:" 5px 0",padding:"2px",backgroundColor:"rgba(215, 174, 9, 0.1)",borderColor:"#d7ae09",color:"#d7ae09",alignItems:"center",gap:"2px",fontSize:"13px"},children:[(0,C.jsxs)("span",{className:"bold",children:[(0,C.jsx)(F.BrF,{})," Note : ",(0,C.jsx)("br",{})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("li",{style:{marginLeft:"20px"},children:"Hover mouse on expense name to view description."}),(0,C.jsx)("li",{style:{marginLeft:"20px"},children:"To change status expand the Stack and select checkbox."})]})]}),(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:"group customCard",children:(0,C.jsx)("div",{className:"group-content row",children:(0,C.jsxs)("div",{className:"col-md-12",children:[(0,C.jsxs)("div",{className:"flex justify-content-end m-2",children:[(0,C.jsx)("label",{children:"Search \xa0:\xa0 "}),(0,C.jsx)("input",{value:Ae,onChange:function(e){var t=e.target.value,n=(0,l.Z)({},Te);n.global.value=t,Ee(n),_e(t)}}),(0,C.jsx)(P.WlY,{size:"1.5em",title:"Export to Excel",cursor:"pointer",style:{color:"green",marginLeft:"10px",marginRight:"-10px"},onClick:function(){var e={stackName:"Stack",resource:"Resource",approval:"Approval Status",payment:"Payment Status",projectName:"Project",projectCode:"Project Code",amt:"Incurred",disbursedAmt:"Disbursed",clientAmt:"Client",createdOn:"Created On"},t=se.map((function(t){var n={};return Object.keys(e).forEach((function(s){n[e[s]]=t[s]})),n})),s=new(n(25415).Workbook),a=s.addWorksheet("ExpenseReport");a.addRow(Object.values(e)).font={bold:!0},t.forEach((function(e){a.addRow(Object.values(e))})),s.xlsx.writeBuffer().then((function(e){bn(e,"ExpenseReport.xlsx")}))}})]}),(0,C.jsx)("div",{className:"darkHeader",children:(0,C.jsxs)(v.w,{value:se,className:"primeReactDataTable ",showGridlines:!0,stripedRows:!0,expandedRows:le,onRowToggle:function(e){return ce(e.data)},onRowExpand:function(e){var t=e.data.projectId;fe(!1),x().get(Ut+"/ProjectMS/projectExpenses/stackExpenses?stackId=".concat(e.data.stackId,"&userId=").concat(Lt,"&raisedBy=").concat(e.data.raised_by,"&projectId=").concat(t,"&statusId=").concat(e.data.status_id)).then((function(t){se.find((function(t){return t.stackId===e.data.stackId})).subrows=t.data,fe(!1)})).catch((function(e){return console.log(e)}))},rowExpansionTemplate:function(e){return(0,C.jsxs)(C.Fragment,{children:[he?(0,C.jsx)(Y.Z,{handleAbort:function(){return fe(!1)}}):"",(0,C.jsxs)(v.w,{value:e.subrows,className:"primeReactDataTable",stripedRows:!0,sortOrder:1,children:[(0,C.jsx)(j.s,{style:{textAlign:"center"},header:function(t,n){return s=e.subrows,(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"form-check pl-4",children:(0,C.jsx)("input",{className:"form-check-input",type:"checkbox",id:s.filter((function(e){return e.isEdit})).map((function(e){return e.id})).toString(),style:{height:"20px",width:"20px"},checked:xt.filter((function(e){var t;return e.id===(null===(t=s[0])||void 0===t?void 0:t.id)})).filter((function(e){return 1==e.isEdit})).length===s.filter((function(e){return 1==e.isEdit})).length&&0!==s.filter((function(e){return 1==e.isEdit})).length,onChange:function(e){var t=e.target.checked;Tt(t);var n=e.target.id;if(t){var a=s.filter((function(e){return e.isEdit})),r=Un;if(0!=a.length)for(var i=0;i<a.length;i++)a[i].Payment=Object.keys(a[i].drop_down[0])[0],r.push(a[i]),Hn(r);var l=r.map((function(e){return""+e.id}));if(Bt>0)if(n.includes(","))for(var c=n.split(","),o=0;o<c.length;o++)document.getElementById(c[o]).checked=l.includes(""+c[o]);else document.getElementById(n).checked=l.includes(""+n);Ge((function(){return Un}))}else{var d=Ke.filter((function(e){return!s.includes(e)}));Hn(d),Ge((function(){return d}))}Ot((function(e){return e+1}))},disabled:s.every($n)})})});var s},body:function(e,t){return Bn(e,t)}}),(0,C.jsx)(j.s,{sortable:!0,field:"",header:"Name",body:function(t){return(0,C.jsx)("div",{title:e.stackId===t.id?"".concat(e.projectName,"(").concat(e.projectCode,")"):"",className:"ellipsis",children:e.stackId===t.id?"".concat(e.projectName,"(").concat(e.projectCode,")"):""})}}),(0,C.jsx)(j.s,{sortable:!0,field:"expense_date",header:"Date",body:function(e){return(0,C.jsx)("div",{title:y()(e.expense_date).format("DD-MMM-yyyy"),className:"ellipsis",children:y()(e.expense_date).format("DD-MMM-yyyy")})}}),(0,C.jsx)(j.s,{sortable:!0,field:"Payee",header:"Payee",body:function(e){return(0,C.jsx)("div",{title:e.Payee,className:"ellipsis",children:e.Payee})}}),(0,C.jsx)(j.s,{sortable:!0,field:"Expense_Type",header:"Expense Type",body:function(e){return(0,C.jsx)("div",{title:e.Expense_Type,className:"ellipsis",children:e.Expense_Type})}}),(0,C.jsx)(j.s,{sortable:!0,field:"is_billable",style:{textAlign:"center"},header:"Billable",body:En}),(0,C.jsx)(j.s,{sortable:!0,field:"Incurred",header:"Incurred",style:{textAlign:"right"},body:function(e){return(0,C.jsx)("div",{title:gn(e)+" "+jn(e.Incurred),children:gn(e)+" "+jn(e.Incurred)})}}),(0,C.jsx)(j.s,{sortable:!0,field:"disbursed_amount",header:"Disbursed",style:{textAlign:"right"},body:Mn}),(0,C.jsx)(j.s,{sortable:!0,field:"client_amount",header:"Client",style:{textAlign:"right"},body:wn}),(0,C.jsx)(j.s,{sortable:!0,field:"Approval",header:"Approval",body:Rn}),(0,C.jsx)(j.s,{sortable:!0,field:"Payment",header:"Payment",body:Pn}),(0,C.jsx)(j.s,{sortable:!0,field:"comments",header:"Comments",body:Vn}),(0,C.jsx)(j.s,{field:"",header:"Details",body:kn})]}),(0,C.jsxs)("div",{style:{display:"flex",border:"1px solid #ECF0F1"},children:[(0,C.jsx)("button",{style:{height:"25px"},className:"btn btn-primary","data-toggle":"tooltip",title:"Save row",disabled:0===xt.filter((function(t){return t.id===e.stackId})).length,onClick:function(){return function(e){var t=xt.filter((function(t){return t.id===e.stackId})).map((function(e){return{expenseId:e.expense_id,isBillable:0==e.is_billable?0:1,disbursedAmount:parseFloat(e.disbursed_amount),clientAmmount:parseFloat(e.client_amount),payment:parseInt(e.Payment),comments:e.comments,resId:yt,stackId:e.id}}));x().post(Ut+"/ProjectMS/projectExpenses/saveExpenses",t,{headers:{"Content-Type":"application/json"}}).then((function(e){Yt(!0),setTimeout((function(){Yt(!1)}),3e3),Ge([]),yn()})).catch((function(e){return console.log(e)}))}(e)},children:(0,C.jsx)(p.TvB,{})}),(0,C.jsx)("button",{style:{height:"25px"},className:"btn btn-primary ms-1 p-1 cancel","data-toggle":"tooltip",title:"Cancel row editing",disabled:0===xt.filter((function(t){return t.id===e.stackId})).length,onClick:function(){return function(e){var t=Ke.filter((function(t){return t.id!==e.stackId}));Ge(t),Hn(t)}(e)},children:(0,C.jsx)(f.sQZ,{})})]})]})},filters:Te,globalFilterFields:["stackName","resource","approval","projectCode","projectName","amt","payment","disbursedAmt","clientAmt","createdOn"],emptyMessage:"No Expenses",paginator:!0,rows:25,paginationPerPage:5,paginationRowsPerPageOptions:[5,15,25,50],paginationComponentOptions:{rowsPerPageText:"Records per page:",rangeSeparatorText:"out of"},currentPageReportTemplate:"View {first} - {last} of {totalRecords} ",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[10,25,50],children:[(0,C.jsx)(j.s,{expander:function(e){return e.subrows.length>=0},style:{width:"5rem"}}),(0,C.jsx)(j.s,{sortable:!0,field:"stackName",header:"Stack",body:function(e){return(0,C.jsx)("div",{title:e.stackName,children:(0,C.jsx)(H.rU,{"data-toggle":"tooltip",title:e.stackName,to:"/expense/Create/".concat(e.stackId),target:"_blank",className:"linkSty",onClick:function(){ve((0,O.B3)("Create"))},children:e.stackName})})}}),(0,C.jsx)(j.s,{sortable:!0,field:"resource",header:"Resource",body:function(e){return(0,C.jsx)("div",{title:e.resource,className:"ellipsis",children:e.resource})}}),(0,C.jsx)(j.s,{sortable:!0,field:"approval",header:"Approval Status",body:function(e){return Ve.stackId!==e.stackId||Vt.includes(parseInt(Lt))?(0,C.jsx)("div",{title:e.approval,children:e.approval}):(0,C.jsx)("div",{children:(0,C.jsx)("select",{value:Ye,onChange:function(e){return Re(e.target.value)},children:e.dropDown.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,C.jsx)("option",{value:t,children:n},t)}))})})}}),(0,C.jsx)(j.s,{sortable:!0,field:"payment",header:"Payment Status",body:function(e){return Ve.stackId===e.stackId&&Vt.includes(parseInt(Lt))?(0,C.jsx)("div",{children:(0,C.jsx)("select",{value:Ye,onChange:function(e){return Re(e.target.value)},children:e.dropDown.map((function(e){var t=Object.keys(e)[0],n=e[t];return(0,C.jsx)("option",{value:t,children:n},t)}))})}):(0,C.jsx)("div",{title:e.payment,children:e.payment})}}),(0,C.jsx)(j.s,{sortable:!0,field:"projectName",header:"Name",body:function(e){return(0,C.jsx)("div",{title:e.projectName,className:"ellipsis",children:e.projectName})}}),(0,C.jsx)(j.s,{sortable:!0,field:"projectCode",header:"Code",body:function(e){return(0,C.jsx)("div",{title:e.projectCode,className:"ellipsis",children:e.projectCode})}}),(0,C.jsx)(j.s,{sortable:!0,field:"amt",header:"Incurred",style:{textAlign:"right"},body:function(e){return(0,C.jsx)("div",{title:gn(e)+" "+jn(e.amt),children:gn(e)+" "+jn(e.amt)})}}),(0,C.jsx)(j.s,{sortable:!0,field:"disbursedAmt",header:"Disbursed",style:{textAlign:"right"},body:function(e){return(0,C.jsx)("div",{title:gn(e)+" "+jn(e.disbursedAmt),children:gn(e)+" "+jn(e.disbursedAmt)})}}),(0,C.jsx)(j.s,{sortable:!0,field:"clientAmt",header:"Client",style:{textAlign:"right"},body:function(e){return(0,C.jsx)("div",{title:gn(e)+" "+jn(e.clientAmt),children:gn(e)+" "+jn(e.clientAmt)})}}),(0,C.jsx)(j.s,{sortable:!0,field:"createdOn",header:"Created On",body:function(e){return(0,C.jsx)("div",{title:y()(e.createdOn).format("DD-MMM-yyyy"),children:y()(e.createdOn).format("DD-MMM-yyyy")})}}),(0,C.jsx)(j.s,{field:"",header:"Actions",style:{textAlign:"center"},body:function(e){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(I.DWq,{size:"1.8em",style:{color:"#428bca",marginRight:"10px",marginLeft:"-10px",cursor:"pointer"},onClick:function(){return Zn(e.stackId)}}),Vt.includes(parseInt(Lt))&&("PM Approved"===e.approval||"Approved to pay"===e.approval)||!Vt.includes(parseInt(Lt))&&!e.subrows.length>0&&"Submitted"===e.approval?(0,C.jsx)(k.QML,{size:"1.5em",style:{cursor:"pointer",marginRight:"-15px"},color:"orange",onClick:function(t){Le(!1),ze(e),Re(Object.keys(e.dropDown[0])[0])}}):""]})}})]})}),(0,C.jsxs)("div",{style:{display:"flex",border:"1px solid #ECF0F1"},children:[(0,C.jsxs)("button",{className:"btn btn-primary ms-1 p-1","data-toggle":"tooltip",title:"Save row",onClick:function(){var e={stackId:Ve.stackId,newStatusId:parseInt(Ye)};x().post(Ut+"/ProjectMS/projectExpenses/saveStackExpenses",e,{headers:{"Content-Type":"application/json"}}).then((function(e){Yt(!0),setTimeout((function(){Yt(!1)}),3e3),ze({}),yn()})).catch((function(e){return console.log(e)}))},disabled:Oe,children:[(0,C.jsx)(p.TvB,{}),"Save"]}),(0,C.jsxs)("button",{className:"btn btn-primary ms-1 p-1","data-toggle":"tooltip",title:"Cancel row editing",onClick:function(){Le(!0),ze({})},disabled:Oe,children:[(0,C.jsx)(f.sQZ,{fontSize:"11px"}),"Cancel"]})]})]})})})})]}),Xe?(0,C.jsx)(Tn,{setPopUp:Qe,data:nt,popUp:Xe,totalData:se}):"",sn&&(0,C.jsx)($.Z,{handleClose:rn,anchorEl:sn,rowData:Fn}),ue?(0,C.jsx)(Y.Z,{handleAbort:function(){return pe(!1)}}):"",Cn?(0,C.jsx)(Y.Z,{handleAbort:function(){return Dn(!1)}}):""]})},G=n(20085);var J=function(){var e=(0,i.useState)([]),t=(0,r.Z)(e,2),n=t[0],s=t[1],a=(0,i.useState)(),o=(0,r.Z)(a,2),d=o[0],m=o[1],v=(0,i.useState)(""),j=(0,r.Z)(v,2),g=j[0],y=j[1],b=(0,i.useState)(),N=(0,r.Z)(b,2),D=N[0],T=N[1],E=(0,i.useState)(),M=(0,r.Z)(E,2),w=M[0],A=M[1],_=(0,i.useState)(),I=(0,r.Z)(_,2),F=I[0],R=I[1],P=(0,i.useState)(),B=(0,r.Z)(P,2),O=B[0],L=B[1],U=(0,i.useState)(),H=(0,r.Z)(U,2),V=H[0],z=H[1],W=(0,i.useState)(),$=(0,r.Z)(W,2),K=$[0],J=$[1],q=(0,i.useState)(),X=(0,r.Z)(q,2),Q=X[0],ee=X[1],te=(0,i.useState)(),ne=(0,r.Z)(te,2),se=ne[0],ae=ne[1],re=(0,i.useState)(),ie=(0,r.Z)(re,2),le=ie[0],ce=ie[1],oe=(0,i.useState)(!1),de=(0,r.Z)(oe,2),ue=de[0],pe=de[1],me=(0,i.useState)(!1),xe=(0,r.Z)(me,2),he=xe[0],fe=xe[1],ve=(0,i.useState)(!0),je=(0,r.Z)(ve,2),ge=je[0],ye=je[1],be=(0,i.useState)(!1),Ne=(0,r.Z)(be,2),Se=Ne[0],Ce=Ne[1],De=(0,i.useState)(null),Ze=(0,r.Z)(De,2),ke=Ze[0],Te=Ze[1],Ee=(0,i.useState)(-1),Me=(0,r.Z)(Ee,2),we=Me[0],Ae=Me[1],_e=(0,i.useState)(!1),Ie=(0,r.Z)(_e,2),Fe=Ie[0],Ye=Ie[1],Re=u.N.baseUrl,Pe=(0,i.useState)(!1),Be=(0,r.Z)(Pe,2),Oe=Be[0],Le=Be[1],Ue=(0,i.useState)(!1),He=(0,r.Z)(Ue,2),Ve=He[0],ze=He[1],We=(0,i.useState)(!1),$e=(0,r.Z)(We,2),Ke=$e[0],Ge=$e[1],Je=(0,i.useState)(""),qe=(0,r.Z)(Je,2),Xe=qe[0],Qe=qe[1],et=(0,i.useState)(""),tt=(0,r.Z)(et,2),nt=tt[0],st=tt[1],at=(0,i.useState)(""),rt=(0,r.Z)(at,2),it=rt[0],lt=rt[1],ct=(0,i.useState)(""),ot=(0,r.Z)(ct,2),dt=ot[0],ut=ot[1],pt=(0,i.useState)(!1),mt=(0,r.Z)(pt,2),xt=mt[0],ht=mt[1],ft=(0,i.useRef)(null),vt=(0,i.useState)(1),jt=(0,r.Z)(vt,2),gt=jt[0],yt=jt[1],bt=localStorage.getItem("resId"),Nt=(0,i.useState)([]),St=(0,r.Z)(Nt,2),Ct=St[0],Dt=St[1],Zt=(0,i.useState)([]),kt=(0,r.Z)(Zt,2),Tt=(kt[0],kt[1]),Et="Time & Expenses",Mt=(0,i.useState)(19),wt=(0,r.Z)(Mt,2),At=wt[0],_t=(wt[1],(0,i.useState)(0)),It=(0,r.Z)(_t,2),Ft=(It[0],It[1]),Yt=(0,i.useState)(1),Rt=(0,r.Z)(Yt,2),Pt=Rt[0],Bt=Rt[1],Ot=(0,i.useState)(0),Lt=(0,r.Z)(Ot,2),Ut=Lt[0],Ht=Lt[1],Vt=At,zt=(0,i.useState)(0),Wt=(0,r.Z)(zt,2),$t=Wt[0],Kt=Wt[1],Gt=(0,i.useState)(Vt),Jt=(0,r.Z)(Gt,2),qt=Jt[0],Xt=Jt[1],Qt=(0,i.useState)(Vt),en=(0,r.Z)(Qt,2),tn=(en[0],en[1]),nn=n.length;(0,i.useEffect)((function(){var e=(gt-1)*Vt,t=e+Vt;Ht(e),Kt(e),Xt(t)}),[gt,Vt]),(0,i.useEffect)((function(){Ht((gt-1)*Vt)}),[gt,Vt]),(0,i.useEffect)((function(){var e=Ut+Vt,t=n.slice(Ut,e);tn(e>nn?nn:e),Ft(t),Bt(Math.ceil(n.length/Vt)),cn(t)}),[n,Ut,Vt,At,Pt]),(0,i.useEffect)((function(){x()({method:"GET",url:Re+"/CommonMS/master/getMenus?loggedUserId=".concat(bt)}).then((function(e){e.data.forEach((function(e){e.display_name===Et&&Dt([e])}))}))}),[]),(0,i.useEffect)((function(){x()({method:"GET",url:Re+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(bt,"&Cont=Expense")}).then((function(e){var t=e.data;t.forEach((function(e){e.display_name===Et&&Dt([e])}));var n=t.find((function(e){return"Expense Types"===e.display_name})),s=n?n.access_level:null;Tt(s)}))}),[]);var sn=function(){ht(!1),ft.current=new AbortController,x()({method:"get",url:Re+"/timeandexpensesms/ExpenseTypes/getData",signal:ft.current.signal}).then((function(e){s(e.data),ht(!1),setTimeout((function(){ht(!1)}),2e3)}))};(0,i.useEffect)((function(){sn()}),[]),(0,i.useEffect)((function(){cn()}),[K,Q,g,Xe,D,F,w,O,V,se,le,nt]),(0,i.useEffect)((function(){cn()}),[Fe,n,we]);var an=[];(0,i.useEffect)((function(){var e=Ut+Vt,t=n.slice(Ut,e);tn(e>nn?nn:e),Ft(t),Bt(Math.ceil(n.length/Vt)),cn(t)}),[n,Ut,Vt,Pt]);var rn=function(){Ye((function(e){return!1})),Ae(-1),Le(!1),ze(!1),Ge(!1),Ce(!1),ye(!0)},ln=["lkupName","Supervisor","PM","IT","HR","LD","Finance","Project","BU","Org","attachment","isActive","action"],cn=function(){Te((function(){var e=n,t=(Fe?[(0,l.Z)({},ln)].concat((0,c.Z)(e)):n).slice($t,qt);return 0===t.length?(0,C.jsx)("tr",{children:(0,C.jsx)("td",{colSpan:17,align:"center",children:"No Records Found"})}):t.map((function(e,t){var n=[];return Fe&&0===t||-1!==we&&we===t?ln.forEach((function(t,s){"action"===t?n.push((0,C.jsxs)("td",{style:{textAlign:"center"},title:e[t],children:[(0,C.jsx)(k.gg_,{title:"Save",style:{cursor:"pointer"},onClick:function(e){on()}})," ","\xa0",(0,C.jsx)(k.LHV,{title:"Cancel",style:{cursor:"pointer"},onClick:function(e){rn()}})]},s)):"lkupName"===t?n.push((0,C.jsx)("td",{children:(0,C.jsx)("input",{id:t,type:"text",className:"textBxBrdrRd inputCss validateErr ",defaultValue:e.lkupName,onChange:function(e){Qe((function(){return(0,Z.Z)({},"lkupName",e.target.value)}))}})})):"Supervisor"===t?n.push((0,C.jsx)("td",{style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss validateErr disabledIcon",defaultChecked:1==e.Supervisor,disabled:void 0==(null===D||void 0===D?void 0:D.PM)&&1==e.PM||1==dt,onChange:function(e){lt(e.target.checked),y((function(){return(0,Z.Z)({},"Supervisor",e.target.checked)}))}})},s)):"PM"===t?n.push((0,C.jsx)("td",{style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,disabled:void 0==(null===g||void 0===g?void 0:g.Supervisor)&&1==e.Supervisor||1==it,className:"textBxBrdrRd inputCss validateErr disabledIcon",defaultChecked:1==e.PM,onChange:function(e){ut(e.target.checked),T((function(){return(0,Z.Z)({},"PM",e.target.checked)}))}})},s)):"IT"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.IT,onChange:function(e){R((function(){return(0,Z.Z)({},"IT",e.target.checked)}))}})},s)):"HR"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.HR,onChange:function(e){A((function(){return(0,Z.Z)({},"HR",e.target.checked)}))}})},s)):"LD"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.LD,onChange:function(e){L((function(){return(0,Z.Z)({},"LD",e.target.checked)}))}})},s)):"Finance"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.Finance,onChange:function(e){z((function(){return(0,Z.Z)({},"Finance",e.target.checked)}))}})},s)):"Project"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.Project,onChange:function(e){J((function(t){return(0,l.Z)((0,l.Z)({},t),{},{Project:e.target.checked})}))}})},s)):"BU"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1===e.BU,onChange:function(e){ee((function(){return(0,Z.Z)({},"BU",e.target.checked)}))}})},s)):"Org"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.Org,onChange:function(e){ae((function(){return(0,Z.Z)({},"Org",e.target.checked)}))}})},s)):"attachment"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsx)("input",{type:"checkbox",id:t,className:"textBxBrdrRd inputCss editableSelectHeight validateErr",defaultChecked:1==e.attachment,onChange:function(e){ce((function(){return(0,Z.Z)({},"attachment",e.target.checked)}))}})},s)):"isActive"===t?n.push((0,C.jsx)("td",{id:t,style:{textAlign:"center"},title:e[t],children:(0,C.jsxs)("select",{id:t,onChange:function(e){st(e.target.value)},children:[(0,C.jsx)("option",{value:"1",selected:1==e.isActive,children:"True"}),(0,C.jsx)("option",{value:"0",selected:0==e.isActive,children:"False"})]})},s)):n.push((0,C.jsxs)("td",{id:t,children:[" ",e[t]]}))})):ln.forEach((function(s,a){var r;"action"==s?n.push((0,C.jsx)("td",{children:(0,C.jsx)("div",{align:"center",children:(0,C.jsx)("span",{children:(0,C.jsx)(k.QML,{style:{cursor:"pointer"},title:"Edit",className:"pointerCursor",onClick:function(n){!function(e,t){Ae(t),m(e),Ce(!0),ye(!1)}(e,t)}})})})})):n.push((0,C.jsx)("td",{align:a>11?"left":a>0?"center":"left",title:(r=e[s],1===r?" Approval is required":0===r?" Approval is not required":1==r?"True":!1===r?" False":r),children:function(){switch(e[s]){case 1:return"YES";case 0:return"X";case!0:return"True";case!1:return"False";default:return String(e[s]).trim()}}()}))})),(0,C.jsx)("tr",{children:n},t)}))}))},on=function(){var e={id:null===d||void 0===d?void 0:d.id,lkup_name:void 0==(null===Xe||void 0===Xe?void 0:Xe.lkupName)?null===d||void 0===d?void 0:d.lkupName:null===Xe||void 0===Xe?void 0:Xe.lkupName,is_active:void 0==nt||""==nt||null==nt?1==(null===d||void 0===d?void 0:d.isActive)?1:0:1==nt?1:0,is_attachment:void 0==(null===le||void 0===le?void 0:le.attachment)?null===d||void 0===d?void 0:d.attachment:!0===(null===le||void 0===le?void 0:le.attachment)?1:0,sort_order:1,is_bu:void 0==(null===Q||void 0===Q?void 0:Q.BU)?null===d||void 0===d?void 0:d.BU:!0===(null===Q||void 0===Q?void 0:Q.BU)?1:0,is_org:void 0==(null===se||void 0===se?void 0:se.Org)?null===d||void 0===d?void 0:d.Org:!0===(null===se||void 0===se?void 0:se.Org)?1:0,is_project:void 0==(null===K||void 0===K?void 0:K.Project)?null===d||void 0===d?void 0:d.Project:!0===(null===K||void 0===K?void 0:K.Project)?1:0,is_editable:1,Supervisor:void 0==(null===g||void 0===g?void 0:g.Supervisor)?null===d||void 0===d?void 0:d.Supervisor:1==(null===g||void 0===g?void 0:g.Supervisor)?1:0,Finance:void 0==(null===V||void 0===V?void 0:V.Finance)?null===d||void 0===d?void 0:d.Finance:1==(null===V||void 0===V?void 0:V.Finance)?1:0,PM:void 0==(null===D||void 0===D?void 0:D.PM)?null===d||void 0===d?void 0:d.PM:!0===(null===D||void 0===D?void 0:D.PM)?1:0,IT:void 0==(null===F||void 0===F?void 0:F.IT)?null===d||void 0===d?void 0:d.IT:!0===(null===F||void 0===F?void 0:F.IT)?1:0,HR:void 0==(null===w||void 0===w?void 0:w.HR)?null===d||void 0===d?void 0:d.HR:!0===(null===w||void 0===w?void 0:w.HR)?1:0,LD:void 0==(null===O||void 0===O?void 0:O.LD)?null===d||void 0===d?void 0:d.LD:!0===(null===O||void 0===O?void 0:O.LD)?1:0};if([void 0,""].includes(e.lkup_name))Le(!0);else{if(0==[e.Supervisor,e.Finance,e.PM,e.IT,e.HR,e.LD].includes(1))return ze(!0),void Le(!1);if(0==[e.is_bu,e.is_org,e.is_project].includes(1))return Ge(!0),ze(!1),void Le(!1);-1!==we&&x()({method:"post",url:Re+"/timeandexpensesms/ExpenseTypes/postingdata",data:e}).then((function(e){sn(),Ye(!1),Le(!1),ze(!1),fe(!0),setTimeout((function(){fe(!1)}),3e3),Ae(-1),Ge(!1),Ce(!1),ye(!0),Qe(""),ce(""),ee(""),ae(""),J(""),y(""),z(),T(),R(),A(),L(),ut(),lt(""),m()})),1==Fe&&x()({method:"post",url:Re+"/timeandexpensesms/ExpenseTypes/postingdata",data:{lkup_name:null===Xe||void 0===Xe?void 0:Xe.lkupName,is_active:""==nt?1:nt,is_attachment:!0===(null===le||void 0===le?void 0:le.attachment)?1:0,sort_order:1,is_bu:!0===(null===Q||void 0===Q?void 0:Q.BU)?1:0,is_org:!0===(null===se||void 0===se?void 0:se.Org)?1:0,is_project:!0===(null===K||void 0===K?void 0:K.Project)?1:0,is_editable:1,Supervisor:!0===(null===g||void 0===g?void 0:g.Supervisor)?1:0,Finance:1==(null===V||void 0===V?void 0:V.Finance)?1:0,PM:!0===(null===D||void 0===D?void 0:D.PM)?1:0,IT:!0===(null===F||void 0===F?void 0:F.IT)?1:0,HR:!0===(null===w||void 0===w?void 0:w.HR)?1:0,LD:!0===(null===O||void 0===O?void 0:O.LD)?1:0}}).then((function(e){sn(),Ye(!1),Ae(-1),Le(!1),Ge(!1),pe(!0),setTimeout((function(){pe(!1)}),3e3),Ce(!1),ye(!0),Qe(""),st(""),ce(""),ee(""),ae(""),J(""),y(""),z(""),T(""),R(""),A(""),L(""),ze(!1),ut(""),lt("")}))}};return(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"col-md-12  mt-2",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsx)("h2",{children:"Add Expense Types"})}),(0,C.jsx)("div",{className:"childThree"})]})}),(0,C.jsx)(S.Z,{routes:Ct,currentScreenName:["Expenses","Add Expense Types"]}),ue?(0,C.jsxs)("div",{className:"statusMsg success",children:[(0,C.jsx)(h.hXj,{}),"Expenses Saved Successfully"]}):"",he?(0,C.jsxs)("div",{className:"statusMsg success",children:[(0,C.jsx)(h.hXj,{}),"Expenses Updated Successfully"]}):"",Oe?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(k.CSE,{}),"\xa0","Please provide Expense Name"]})}):"",Ve?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(k.CSE,{}),"\xa0","Please provide atleast one WorkFlow"]})}):"",Ke?(0,C.jsx)("div",{className:"statusMsg error",children:(0,C.jsxs)("span",{children:[(0,C.jsx)(k.CSE,{}),"\xa0","Please provide atleast one Expense Type Levels"]})}):"",(0,C.jsxs)("div",{className:" customCard ",children:[(0,C.jsx)("div",{className:"darkHeader",children:(0,C.jsxs)("div",{className:"col-md-12 no-padding",children:[xt?(0,C.jsx)(Y.Z,{handleAbort:function(){ft.current&&ft.current.abort(),ht(!1)}}):"",(0,C.jsxs)("table",{className:"table table-bordered table-striped expenseTypeTable primeReactDataTable",children:[(0,C.jsxs)("thead",{children:[(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{rowSpan:2,style:{textAlign:"center"},children:"Expense"}),(0,C.jsx)("th",{colSpan:6,style:{textAlign:"center"},children:"Workflow Approvals"}),(0,C.jsx)("th",{colSpan:3,style:{textAlign:"center"},children:"Expense Type Levels"}),(0,C.jsx)("th",{rowSpan:2,style:{textAlign:"center"},children:"Attachment"}),(0,C.jsx)("th",{rowSpan:2,style:{textAlign:"center"},children:"Is Active"}),(0,C.jsx)("th",{rowSpan:2,style:{textAlign:"center"},children:"Action"})]}),(0,C.jsxs)("tr",{children:[(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"Supervisor"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"PM"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"IT"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"HR"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"L&D"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"Finance"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"Project"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"BU"}),(0,C.jsx)("th",{className:"pointerCursor",style:{textAlign:"center"},children:"Org"})]})]}),(0,C.jsx)("tbody",{children:ke})]})]})}),(0,C.jsx)("div",{className:"col-md-6 pagination justify-content-center",style:{marginLeft:"283px"},children:(0,C.jsx)("label",{style:{align:"left"},children:(0,C.jsx)(G.Z,{count:Math.ceil(n.length/Vt),page:gt,onChange:function(e,t){yt(t)},showFirstButton:!0,showLastButton:!0})})}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"form-group col-md-2 btn-container-events center my-3",children:[(0,C.jsxs)("button",{className:"btn btn-primary",disabled:Se,title:"Add new row",onClick:function(e){Ye(!0),Se||(Ce(!0),ye(!1)),yt(1),Qe(""),y(""),T(""),A(""),R(""),L(""),z(""),J(""),ee(""),ae(""),ce(""),st(""),s([].concat(an,(0,c.Z)(n))),Ht(0),Kt(0),Xt(Vt),tn(Vt)},children:[(0,C.jsx)(p.wEH,{})," Add"]}),(0,C.jsxs)("button",{className:"btn btn-primary",disabled:ge,title:"Save row",onClick:function(){on()},children:[(0,C.jsx)(p.TvB,{})," Save"]}),(0,C.jsxs)("button",{className:"btn btn-secondary",title:"Cancel row editing",disabled:ge,onClick:function(e){rn()},children:[(0,C.jsx)(f.sQZ,{fontSize:"11px"})," Cancel"]})]})})]})]})},q=n(32125);n(47477);var X=function(){var e,t=(0,i.useState)(""),n=(0,r.Z)(t,2),l=n[0],c=n[1],o=(0,i.useState)(!1),p=(0,r.Z)(o,2),m=p[0],f=p[1],g=(0,i.useRef)(null),b=(0,i.useState)(),N=(0,r.Z)(b,2),D=N[0],Z=N[1],T=(0,i.useState)([]),E=(0,r.Z)(T,2),M=E[0],w=E[1],A=(0,i.useState)([]),_=(0,r.Z)(A,2),I=_[0],F=_[1],R=(0,i.useState)(!1),P=(0,r.Z)(R,2),B=P[0],O=P[1],L=(0,i.useState)({currancyId:"",startDate:"",endDate:""}),U=(0,r.Z)(L,2),H=(U[0],U[1],(0,i.useState)([])),V=(0,r.Z)(H,2),z=V[0],W=V[1],$=(0,i.useState)(!1),K=(0,r.Z)($,2),G=(K[0],K[1]),J=(0,i.useState)([]),X=(0,r.Z)(J,2),Q=X[0],ee=(X[1],(0,i.useState)()),te=(0,r.Z)(ee,2),ne=(te[0],te[1],u.N.baseUrl),se=localStorage.getItem("resId"),ae=(0,i.useState)([]),re=(0,r.Z)(ae,2),ie=re[0],le=re[1];(0,i.useEffect)((function(){x()({method:"GET",url:ne+"/CommonMS/master/getMenus?loggedUserId=".concat(se)}).then((function(e){e.data.forEach((function(e){"Time & Expenses"===e.display_name&&le([e])}))})),oe()}),[]);var ce=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,x().get("".concat(ne,"/timeandexpensesms/expenses/getforex?id=").concat(z,"&startDate=").concat(y()(l).format("yyyy-MM-DD"),"&endDate=").concat(y()(D).format("yyyy-MM-DD")));case 3:return t=e.sent,e.next=6,t.data;case 6:for(n=e.sent,[{description:"Currency",currency_date:"Date",value_of_usd:"USD to Local",value_in_usd:"Local to USD"}],setTimeout((function(){G(!1),w(n),O(!1)}),1e3),a=0;a<n.length;a++)n[a].currency_date=null==n[a].currency_date?"":y()(n[a].currency_date).format("DD-MMM-yyyy");f(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){x()({method:"get",url:ne+"/ProjectMS/Engagement/getCurrency"}).then((function(e){var t=e.data;F(t)}))},de=(0,i.useRef)([]),ue=function(e){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{style:{float:"left"},children:e.value_of_usd})})},pe=function(e){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{style:{float:"left"},children:e.value_in_usd})})};return null===(e=Object.keys(Q))||void 0===e||e.map((function(e,t){return(0,C.jsx)(j.s,{sortable:!0,body:"value_of_usd"==e?ue:"value_in_usd"==e&&pe,field:e,header:Q[e]},e)})),console.log("data",M),(0,C.jsxs)("div",{children:[B?(0,C.jsxs)("div",{className:"statusMsg error",children:[" ",(0,C.jsx)(k.CSE,{})," Please Select Highlighted field values"]}):"",(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"col-md-12",children:(0,C.jsxs)("div",{className:"pageTitle",children:[(0,C.jsx)("div",{className:"childOne"}),(0,C.jsx)("div",{className:"childTwo",children:(0,C.jsx)("h2",{children:"View Foreign Exchange Rates"})}),(0,C.jsx)("div",{className:"childThree"})]})}),(0,C.jsx)(S.Z,{routes:ie,currentScreenName:["Expenses","View Foreign Exchange Rates"]}),(0,C.jsx)("div",{className:"group mb-3 customCard",children:(0,C.jsxs)("div",{className:"group-content row",children:[(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Currency",(0,C.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6",children:(0,C.jsxs)("select",{id:"country-select",className:"text",ref:function(e){de.current[0]=e},onChange:function(e){W(e.target.value)},children:[(0,C.jsx)("option",{value:"",children:" <<Please Select>>"}),I.map((function(e){return"US Dollar(USD)"===e.currency?"":(0,C.jsx)("option",{value:e.id,children:e.currency})}))]})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Begin Date",(0,C.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6 datepicker",ref:function(e){de.current[1]=e},children:(0,C.jsx)(d(),{dropdownMode:"select",dateFormat:"dd-MMM-yyyy",selected:l,onChange:function(e){return c(e)},placeholderText:"Begin Date",showMonthDropdown:!0,showYearDropdown:!0})})]})}),(0,C.jsx)("div",{className:"col-md-4 mb-2",children:(0,C.jsxs)("div",{className:"form-group row",children:[(0,C.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["End Date",(0,C.jsx)("span",{style:{color:"red"},children:"\xa0*"})]}),(0,C.jsx)("span",{className:"col-1 p-0",children:":"}),(0,C.jsx)("div",{className:"col-6 datepicker",ref:function(e){de.current[2]=e},children:(0,C.jsx)(d(),{dropdownMode:"select",dateFormat:"dd-MMM-yyyy",selected:D,onChange:function(e){return Z(e)},placeholderText:"End Date",showMonthDropdown:!0,showYearDropdown:!0})})]})}),(0,C.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 no-padding center mb-2",children:[(0,C.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center",children:(0,C.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",onClick:function(e){!function(){var e=(0,q.Z)(de);1==e&&O(!0),g.current=new AbortController,e||(f(!1),ce())}()},children:[(0,C.jsx)(h.Goc,{})," Search"]})}),m?(0,C.jsx)(Y.Z,{handleAbort:function(){g.current&&g.current.abort(),f(!1)}}):""]}),(0,C.jsx)("div",{className:"darkHeader",children:(0,C.jsx)("div",{className:"col-md-12 ",children:(0,C.jsxs)(v.w,{value:M,showGridlines:!0,paginator:!0,rows:25,sortMode:"multiple",style:{border:"1px solid silver",borderRadius:"3px"},tableStyle:{minWidth:"50rem"},children:[(0,C.jsx)(j.s,{field:"description",header:"Currency",align:"center",sortable:!0,style:{width:"25%"}}),(0,C.jsx)(j.s,{field:"currency_date",header:"Date",align:"center",sortable:!0,style:{width:"25%"}}),(0,C.jsx)(j.s,{field:"value_of_usd",header:"USD to Local",align:"center",sortable:!0,style:{width:"25%"}}),(0,C.jsx)(j.s,{field:"value_in_usd",header:"Local to USD",align:"center",sortable:!0,style:{width:"25%"}})]})})})]})})]})]})},Q=n(21381);var ee=function(e){var t=u.N.baseUrl,n=localStorage.getItem("resId"),l=(0,B.v9)((function(e){return e.selectedSEState.expenseButtonState}));console.log(l);var c=(0,i.useState)(l),o=(0,r.Z)(c,2),d=o[0],p=o[1],m=(0,i.useState)("Expense"),h=(0,r.Z)(m,2),f=h[0],v=(h[1],(0,i.useState)([])),j=(0,r.Z)(v,2),g=j[0],y=j[1],b=(0,B.I0)(),N=(0,R.TH)(),S=window.location.href,Z=(0,i.useState)(0),k=(0,r.Z)(Z,2),T=(k[0],k[1]),E=(0,R.s0)();(0,i.useEffect)((function(){x().get(t+"/CommonMS/master/getMenus?loggedUserId=".concat(n)).then((function(e){var s=e.data.find((function(e){return"Time & Expenses"===e.display_name})).subMenus.find((function(e){return"Expenses"===e.display_name})),a=s?s.userRoles.includes("690")?690:s.userRoles.includes("641")?641:s.userRoles.includes("932")?932:s.userRoles.includes("46")?46:s.userRoles.includes("126")?126:s.userRoles.includes("919")?919:s.userRoles.includes("686")?686:s.userRoles.includes("930")?930:s.userRoles.includes("307")&&307:null;x()({method:"GET",url:t+"/CommonMS/master/getBenchMtericsMenus?loggedUserId=".concat(n,"&Cont=Expense")}).then((function(e){var t=e.data;console.log(t),console.log(a);var n=t.filter((function(e){return"Expense Types"!=e.display_name}));y(126==a?n:t),console.log(t),console.log(n)})),setDataAccess(a)}))}),[]),(0,i.useEffect)((function(){var e=null===N||void 0===N?void 0:N.state;console.log(N),S.includes("Create")&&p("Create");var t=S.split(":");T(t[t.length-1]),void 0!=(null===e||void 0===e?void 0:e.btnState)&&p(null===e||void 0===e?void 0:e.btnState)}),[]);var M=(0,i.useRef)(null),w=function(){M.current&&M.current.abort()},A=(0,i.useState)([]),_=(0,r.Z)(A,2),I=_[0],F=_[1],Y=(0,i.useState)(!1),P=(0,r.Z)(Y,2),U=P[0],H=P[1];return(0,i.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x().get(t+"/ProjectMS/projectExpenses/paymentUsers");case 3:n=e.sent,a=n.data,F(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),console.log(g),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{children:(0,C.jsx)("div",{className:"tabs",style:{margin:"3px"},children:g.map((function(e){return(0,C.jsx)("button",{className:d===e.display_name.toString()?"buttonDisplayClick":"buttonDisplay",onClick:function(){E("/search/userExpenseHistory"),"Create"==e.display_name&&window.location.reload(),setTimeout((function(){p(e.display_name.toString())}),100),b((0,O.B3)(e.display_name.toString())),console.log(e.display_name)},children:e.display_name},e.id)}))})}),"Open"===d?(0,C.jsx)(V,{buttonValue:f,setbtnState:p}):"","Create"===d?(0,C.jsx)(L,{handleAbort:w,setbtnState:p}):"","Search"===d?I.includes(parseInt(n))||U?(0,C.jsx)(K,{handleAbort:w,setbtnState:p,paymentUsers:I}):(0,C.jsx)(Q.Z,{setIsClassicView:H}):"","Expense Types"===d?(0,C.jsx)(J,{}):"","Add Foreign Exchange Value"===d?(0,C.jsx)(D,{}):"","View Foreign Exchange Rates"===d?(0,C.jsx)(X,{}):""]})}}}]);
//# sourceMappingURL=9799.e7adc58e.chunk.js.map