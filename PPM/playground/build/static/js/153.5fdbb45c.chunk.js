"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[153,4205],{24205:function(e,t,n){var a=n(4942),l=n(1413),s=n(29439),o=n(72791),r=n(63521),c=n(80184);t.Z=function(e){var t=e.riskDetails,n=e.getData,i=e.setFormData,u=(e.editedData,e.formEditData),d=e.onChangeHandler,m=e.refArr,h=(e.setUsername,e.name),p=e.id,f=e.value,v=e.onClear,x=e.inputSearchString,g=(0,o.useState)([]),j=(0,s.Z)(g,2),_=j[0];return j[1],(0,o.useEffect)((function(){}),[_]),(0,o.useEffect)((function(){}),[t]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"autoComplete-container",children:"UpdateBillingRate"==f?(0,c.jsx)(r.ReactSearchAutocomplete,{items:t,type:"Text",name:h,inputSearchString:null===u||void 0===u?void 0:u.assigned_to,id:p,className:"err",riskDetails:t,getData:n,onClear:v,placeholder:"Type minimum 3 characters",onChange:function(e){d(e),console.log("789------------------------")},onSelect:function(e){i((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},h,e.id))})),i((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},"Resname",e.name))}))},showIcon:!1}):"EngagementS"==f?(0,c.jsx)(r.ReactSearchAutocomplete,{items:t,type:"Text",name:h,inputSearchString:null===u||void 0===u?void 0:u.assigned_to,id:p,className:"err",riskDetails:t,getData:n,onClear:function(e){i((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},h,""))})),console.log(h)},placeholder:"Type minimum 3 characters",onChange:function(e){d(e)},onSelect:function(e){i((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},h,e.id))}))},showIcon:!1,showNoResults:!0,showNoResultsText:"<<ALL>>"}):(0,c.jsx)("div",{className:"auto autocomplete",id:"auto",ref:function(e){void 0!=m&&(m.current[0]=e)},children:(0,c.jsx)(r.ReactSearchAutocomplete,{items:t,type:"Text",name:h,placeholder:"Type minimum 3 characters",inputSearchString:x,id:p,className:"err",onClear:v,riskDetails:t,getData:n,onChange:function(e){d(e),console.log("123---------------")},onSelect:function(e){i((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},h,e.id))}))},showIcon:!1})})}),(0,c.jsx)("span",{children:_.name})]})}},30153:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var a=n(4942),l=n(1413),s=n(29439),o=n(72791),r=n(56355),c=n(59513),i=n.n(c),u=(n(68639),n(72426)),d=n.n(u),m=n(36167),h=n(24205),p=n(74569),f=n.n(p),v=n(34831),x=n(15473),g=n(39157),j=n(78983),_=n(78820),b=n(59962),w=n.n(b),S=n(80184);var y=function(e){var t=e.handleApprove,n=e.buttonPopup,a=e.setButtonPopup,l=e.selectedData;return(0,S.jsx)("div",{className:"shiftAllowanceStatusPopup",children:(0,S.jsx)(w(),{children:(0,S.jsxs)(j.Tk,{size:"sm",visible:n,className:"ui-dialog shiftAllowanceStatusPopup",onClose:function(){a(!1)},children:[(0,S.jsx)(j.p0,{style:{cursor:"all-scroll"},children:(0,S.jsx)("h6",{children:"Approve Resource Allownces"})}),(0,S.jsxs)(j.sD,{children:[(0,S.jsx)("span",{children:"Are you sure you want to approve allowances ?"}),(0,S.jsxs)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:[(0,S.jsx)("button",{type:"delete",className:"btn btn-primary",onClick:function(e){t(l)},children:"Yes"}),(0,S.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){a(!1)},children:"No"})]})]})]})})})};n(11683);var N=n(93433),Z=n(11167),A=n(37145),C=n(93540);var k=function(e){var t=e.data,n=(e.setData,e.bodyData,e.dataAccess),a=e.setSelectedData,l=e.loggedUserId,r=e.open,c=e.roles,i=e.setPrevComments,u=e.setAnchorEl,d=(e.permissions,(0,o.useState)(t)),m=(0,s.Z)(d,2),h=m[0],p=m[1];console.log(h),console.log(c),h.map((function(e,t){return(0,S.jsx)("li",{children:e.name},t)})),console.log(h.allow_extra_hours_amt);var f=(0,o.useState)(!1),v=(0,s.Z)(f,2),x=v[0],g=v[1],j=(0,o.useState)([]),_=(0,s.Z)(j,2),b=_[0],w=_[1];console.log(n,"****************8"),(0,o.useEffect)((function(){p(t)}),[t]),console.log(0),console.log(h.map((function(e){return e.allow_wknd_amt})));var y=function(e){return console.log(c),console.log(e.data.allowance_status_id),500==n&&1292==e.data.allowance_status_id||900==n&&1293==e.data.allowance_status_id&&1292!=e.data.allowance_status_id||900==n&&1295==e.data.allowance_status_id&&1292!=e.data.allowance_status_id||800==n&&1299!=e.data.allowance_status_id&&1292!=e.data.allowance_status_id&&1293!=e.data.allowance_status_id&&1297!=e.data.allowance_status_id||126==n&&1299==e.data.allowance_status_id&&1292!=e.data.allowance_status_id||2716==l||1273913==l||512==l};return console.log(y),(0,S.jsx)("div",{className:"darkHeader",children:r&&(0,S.jsx)("div",{className:"group mb-3 customCard ",children:(0,S.jsxs)(A.w,{value:h,paginator:!0,selection:b,onSelectionChange:function(e){console.log(e.value),a(e.value),w(e.value),0==e.value.length?g(!1):g(!0)},checked:x,rows:25,showGridlines:!0,isDataSelectable:y,responsiveLayout:"scroll",children:[(0,S.jsx)(Z.sgG,{selectionMode:"multiple",headerStyle:{width:"3rem"},body:function(e){return 1300===e.allowance_status_id?" ":(0,S.jsx)(C.X,{value:e})}}),(0,S.jsx)(Z.sgG,{field:"empId",header:"Emp ID",body:function(e){return console.log(e),(0,S.jsx)("span",{children:e.empId})}}),(0,S.jsx)(Z.sgG,{field:"empName",header:"Name",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.empName,children:(0,S.jsx)("span",{children:e.empName})})}}),(0,S.jsx)(Z.sgG,{field:"customers",header:"Customers(DP)",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.customers,children:(0,S.jsx)("span",{children:e.customers})})}}),(0,S.jsx)(Z.sgG,{field:"projects",header:"Projects(PM)",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.projects,children:(0,S.jsx)("span",{children:e.projects})})}}),(0,S.jsx)(Z.sgG,{field:"res_ww",header:"WW",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.res_ww,children:(0,S.jsx)("span",{children:e.res_ww})})}}),(0,S.jsx)(Z.sgG,{field:"allow_days",header:"No. Of Days",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.allow_days,children:(0,S.jsx)("span",{children:e.allow_days})})}}),(0,S.jsx)(Z.sgG,{field:"allow_amt",header:"Allow. Amt",body:function(e){return(0,S.jsx)("div",{className:"ellipsis",title:e.allow_amt,children:(0,S.jsx)("span",{children:e.allow_amt})})}}),(0,S.jsx)(Z.sgG,{field:"allow_extra_hours",header:"Ext. Hrs",body:function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",{id:"allow_extra_hours",defaultValue:e.allow_extra_hours,type:"text",onChange:function(n){var a,l=125*(null===n||void 0===n||null===(a=n.target)||void 0===a?void 0:a.value),s=t.findIndex((function(t){return t.id==e.id}));t[s].allow_extra_hours_amt=l,p((0,N.Z)(t))},required:!0})})}}),(0,S.jsx)(Z.sgG,{field:"allow_extra_hours_amt",header:"Ext. Hrs Amt",body:function(e,t){return(0,S.jsx)("span",{defaultValue:t,children:e.allow_extra_hours_amt})}}),(0,S.jsx)(Z.sgG,{field:"allow_wknd_hours",header:"WeeEnd Hrs",body:function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",{type:"text",defaultValue:e.allow_wknd_hours,onChange:function(n){var a=125*n.target.value,l=t.findIndex((function(t){return t.id==e.id}));t[l].allow_wknd_amt=a,p((0,N.Z)(t))}})})}}),(0,S.jsx)(Z.sgG,{field:"allow_wknd_amt",header:"WeeEnd Amt",body:function(e){return(0,S.jsx)("span",{children:e.allow_wknd_amt})}}),(0,S.jsx)(Z.sgG,{field:"allow_ocall_hours",header:"Oncall Hrs",body:function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",{type:"text",defaultValue:e.allow_ocall_hours,onChange:function(n){var a=n.target.value,l=t.findIndex((function(t){return t.id==e.id}));t[l].allow_ocall_hours=a,p((0,N.Z)(t))}})})}}),(0,S.jsx)(Z.sgG,{field:"allow_ocall_amt",header:"Oncall Amt",body:function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",{type:"text",defaultValue:e.allow_ocall_amt,onChange:function(n){var a=n.target.value,l=t.findIndex((function(t){return t.id==e.id}));t[l].allow_ocall_amt=a,p((0,N.Z)(t))}})})}}),(0,S.jsx)(Z.sgG,{field:"allow_total_amt",header:"Tot. Amt",body:function(e){var t=parseInt(e.allow_total_amt)+parseInt(e.allow_ocall_amt)+parseInt(e.allow_wknd_amt)+parseInt(e.allow_extra_hours_amt);return(0,S.jsx)("span",{children:t})}}),(0,S.jsx)(Z.sgG,{field:"allowance_status",header:"Status"}),(0,S.jsx)(Z.sgG,{field:"comments",header:" Comments",body:function(e){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("input",{type:"text",defaultValue:e.comments})})}}),(0,S.jsx)(Z.sgG,{field:"prevcomments",header:"History",body:function(e){return console.log(e.prevcomments),(0,S.jsx)("div",{style:{textAlign:"center"},children:(0,S.jsx)("i",{type:"button",className:"pi pi-comments",style:{fontSize:"1rem"},onClick:function(t){i(e.prevcomments),u(t.currentTarget)}})})}})]})})})};var D=function(e){var t=e.handleReject,n=e.rejectbuttonPopup,a=e.setRejectButtonPopup,l=e.selectedData;return(0,S.jsx)("div",{children:(0,S.jsx)(w(),{children:(0,S.jsxs)(j.Tk,{size:"Default",visible:n,className:"ui-dialog",onClose:function(){a(!1)},children:[(0,S.jsx)(j.p0,{style:{cursor:"all-scroll"},children:(0,S.jsx)("h6",{children:"Reject Resource Allownces"})}),(0,S.jsxs)(j.sD,{children:[(0,S.jsx)("span",{children:"Are you sure you want to reject allowances ?"}),(0,S.jsxs)("div",{className:'className="col-md-12 col-sm-12 col-xs-12 btn-container center my-3',children:[(0,S.jsx)("button",{type:"delete",className:"btn btn-primary",onClick:function(e){t(l)},children:"Yes"}),(0,S.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){a(!1)},children:"No"})]})]})]})})})},E=n(72920),R=n(38262);var I=function(){var e=(0,o.useState)(new Date),t=(0,s.Z)(e,2),n=t[0],c=t[1],u=(0,o.useState)(new Date),p=(0,s.Z)(u,2),b=(p[0],p[1],(0,o.useState)(new Date)),w=(0,s.Z)(b,2),N=(w[0],w[1],(0,o.useState)(!1)),Z=(0,s.Z)(N,2),A=Z[0],C=Z[1],I=(0,o.useState)(r.UdN),P=(0,s.Z)(I,2),M=P[0],T=P[1],F=v.N.baseUrl,H=(v.N.projectmsbaseUrl,(0,o.useState)("cust")),O=(0,s.Z)(H,2),G=O[0],U=O[1];console.log(G);var B=(0,o.useState)([]),V=(0,s.Z)(B,2),L=V[0],K=V[1],z=(0,o.useState)(!1),Y=(0,s.Z)(z,2),W=Y[0],q=Y[1],X=(0,o.useState)(!1),J=(0,s.Z)(X,2),$=J[0],Q=J[1],ee=(0,o.useState)({assigned_to:"",custIds:"",value:"",id:""}),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],le=(0,o.useState)([]),se=(0,s.Z)(le,2),oe=se[0],re=se[1];console.log(ne.assigned_to),console.log(ne);var ce=(0,o.useState)([]),ie=(0,s.Z)(ce,2),ue=ie[0],de=ie[1];console.log(ue);var me=(0,o.useState)([]),he=(0,s.Z)(me,2),pe=he[0],fe=he[1],ve=(0,o.useState)([]),xe=(0,s.Z)(ve,2),ge=xe[0],je=xe[1];console.log(ge);var _e=(0,o.useState)([]),be=(0,s.Z)(_e,2),we=be[0],Se=be[1],ye=(0,o.useState)(!1),Ne=(0,s.Z)(ye,2),Ze=Ne[0],Ae=Ne[1],Ce=(0,o.useState)(),ke=(0,s.Z)(Ce,2),De=ke[0];ke[1],console.log(De);var Ee=(0,o.useState)([]),Re=(0,s.Z)(Ee,2),Ie=Re[0],Pe=Re[1],Me=(0,o.useState)([]),Te=(0,s.Z)(Me,2),Fe=Te[0],He=Te[1],Oe=(0,o.useState)([]),Ge=(0,s.Z)(Oe,2),Ue=Ge[0],Be=Ge[1],Ve=(0,o.useState)([]),Le=(0,s.Z)(Ve,2),Ke=(Le[0],Le[1]),ze=(0,o.useState)([]),Ye=(0,s.Z)(ze,2),We=(Ye[0],Ye[1]),qe=(0,o.useState)(),Xe=(0,s.Z)(qe,2),Je=Xe[0],$e=Xe[1],Qe=(0,o.useState)([]),et=(0,s.Z)(Qe,2),tt=et[0],nt=et[1];console.log(Je);var at=localStorage.getItem("resId"),lt=localStorage.getItem("resName"),st=new Date,ot=st.getFullYear(),rt=st.toLocaleString("default",{month:"short"}),ct=st.getDate(),it="".concat(ot,"-").concat(rt,"-").concat(ct);console.log(localStorage);var ut=(0,o.useState)(!1),dt=(0,s.Z)(ut,2),mt=dt[0],ht=dt[1],pt=(0,o.useState)([]),ft=(0,s.Z)(pt,2),vt=ft[0],xt=ft[1],gt=(0,o.useState)([]),jt=(0,s.Z)(gt,2),_t=jt[0],bt=(jt[1],(0,o.useState)(null)),wt=(0,s.Z)(bt,2),St=wt[0],yt=wt[1],Nt=(0,o.useState)([]),Zt=(0,s.Z)(Nt,2),At=Zt[0],Ct=Zt[1],kt=(0,o.useState)([]),Dt=(0,s.Z)(kt,2),Et=Dt[0],Rt=Dt[1],It=(0,o.useState)(),Pt=(0,s.Z)(It,2),Mt=(Pt[0],Pt[1],(0,o.useState)([])),Tt=(0,s.Z)(Mt,2),Ft=Tt[0],Ht=Tt[1],Ot=(0,o.useState)([]),Gt=(0,s.Z)(Ot,2),Ut=Gt[0],Bt=Gt[1],Vt=(0,o.useRef)([]),Lt=(0,o.useState)({extHrs:""}),Kt=(0,s.Z)(Lt,2),zt=(Kt[0],Kt[1],(0,o.useState)(!1)),Yt=(0,s.Z)(zt,2),Wt=Yt[0],qt=Yt[1],Xt=(0,o.useState)(!1),Jt=(0,s.Z)(Xt,2),$t=Jt[0],Qt=Jt[1],en=(0,o.useState)(""),tn=(0,s.Z)(en,2),nn=(tn[0],tn[1],(0,o.useState)("")),an=(0,s.Z)(nn,2),ln=an[0],sn=(an[1],(0,o.useState)([])),on=(0,s.Z)(sn,2),rn=(on[0],on[1]),cn=(0,o.useState)([]),un=(0,s.Z)(cn,2),dn=un[0],mn=un[1],hn=(0,o.useState)([]),pn=(0,s.Z)(hn,2),fn=pn[0],vn=pn[1];(0,o.useEffect)((function(){f()({method:"GET",url:F+"/CommonMS/master/getMenus?loggedUserId=".concat(at)}).then((function(e){var t=e.data,n=t.find((function(e){return"Time & Expenses"===e.display_name})).subMenus.find((function(e){return"Shift Allownaces"===e.display_name}));console.log(n),t.forEach((function(e){"Time & Expenses"===e.display_name&&vn([e])}));var a=n.userRoles.includes("14")&&n.userRoles.includes("46")&&n.userRoles.includes("690")?900:n.userRoles.includes("14")&&n.userRoles.includes("46")&&n.userRoles.includes("126")?800:n.userRoles.includes("14")&&n.userRoles.includes("46")?500:n.userRoles.includes("690")?690:n.userRoles.includes("126")?126:null;mn(a),console.log(a)}))}),[]);var xn=function(e,t){var n=e.map((function(e){return e.value})),a=t.map((function(e){return e.value}));return n.length===a.length?"<< ALL >>":e.map((function(e){return e.label})).join(", ")},gn=(0,o.useState)({extra_hours:"",weekend_hours:"",oncall_hours:"",oncall_amount:"",comments:""}),jn=(0,s.Z)(gn,2),_n=jn[0],bn=jn[1];console.log(_n.allow_extra_hours),console.log(125*_n.allow_wknd_hours);var wn=(0,o.useState)({AllocType:"",Status:"",startDate:"2023-10-01",Customer:"",viewType:"cust"}),Sn=(0,s.Z)(wn,2),yn=Sn[0],Nn=Sn[1];console.log(yn.startDate),console.log(G),(0,o.useEffect)((function(){}),[G]);var Zn=function(e){f()({method:"get",url:F+"/ProjectMS/risks/getAssignedData"}).then((function(e){var t=e.data;K(t),console.log(t)}))};(0,o.useEffect)((function(){Zn()}),[]),(0,o.useEffect)((function(){var e=[];ue.forEach((function(t){e.push(t.value),console.log(t)}))}),[ue]),(0,o.useEffect)((function(){var e=[];ge.forEach((function(t){e.push(t.value)}))}),[ge]),(0,o.useEffect)((function(){Cn(),kn(),function(){var e=[];e.push({value:"cust",label:"Customer/Project"},{value:"res",label:"Resource"}),We(e),Ke(e.filter((function(e){return 0!=e.value})));var t=[];e.forEach((function(e){0!=e.value&&t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"viewType",t.toString()))}))}(),f()({method:"get",url:F+"/timeandexpensesms/ShiftAllownces/getuserroleid?user_id=".concat(at)}).then((function(e){var t=e.data;console.log(t,"**********"),console.log(t[0].role_type_id.split(","),"**********"),nt(t[0].role_type_id.split(",")),console.log(t[0].role_type_id);var n=t[0].role_type_id;f()({method:"get",url:F+"/timeandexpensesms/ShiftAllownces/getuserId?id=".concat(at)}).then((function(e){var t=e.data;$e(e.data),console.log(t),f().post(F+"/timeandexpensesms/ShiftAllownces/getcustomerprojectname?resId=".concat(t,"&resRoles=").concat(n)).then((function(e){var t=[],n=e.data;if(console.log(n),n.length>0&&n.forEach((function(e){var n={label:e.name,value:e.id};t.push(n)})),de(t),fe(t),console.log(t),4452475==at)return f().get(F+"/timeandexpensesms/ShiftAllownces/getadmincustomerandprojectdata").then((function(e){var t=[],a=e.data;console.log(n),a.length>0&&a.forEach((function(e){var n={label:e.name,value:e.id};t.push(n)})),je(t),Se(t)}))})).catch((function(e){return console.log(e)}))}))}))}),[]),(0,o.useEffect)((function(){An()}),[pe,we]);var An=function(e){var t={custIds:""};t.custIds=4452475==at?we.map((function(e){return e.value})).toString():pe.map((function(e){return e.value})).toString(),f()({method:"post",url:F+"/timeandexpensesms/ShiftAllownces/getprojectname",data:t}).then((function(e){var t=[],n=e.data;console.log(n),n.length>0&&n.forEach((function(e){var n={label:e.name,value:e.id};t.push(n)})),Pe(t),He(t),console.log(t)})).catch((function(e){return console.log(e)}))};(0,o.useEffect)((function(){var e=[];Ie.forEach((function(t){e.push(t.value)}))}),[Ie]);var Cn=function(){var e=[];e.push({value:1,label:"Billable"},{value:2,label:"Non Billable"}),Rt(e),Be(e.filter((function(e){return 0!=e.value})));var t=[];e.forEach((function(e){0!=e.value&&t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"AllocType",t.toString()))}))},kn=function(){var e=[];e.push({value:1292,label:"New"},{value:1293,label:"PM Approved"},{value:1295,label:"DP Approved"},{value:1297,label:"Finance Approved"},{value:1299,label:"HR Approved"},{value:1300,label:"Paid"},{value:1301,label:"Rejected"}),Ht(e),Bt(e.filter((function(e){return 0!=e.value})));var t=[];e.forEach((function(e){0!=e.value&&t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Status",t.toString()))}))},Dn=function(){console.log("in  line 286----"),ht(!0),q(!1),console.log("in line 423---------");var e=yn.Status;console.log(e);var t=yn.startDate;console.log(t);var n={accessType:"-1",viewBy:G,customers:"",projects:"",fromDt:t,allowStates:e,allocStates:"",resId:0};"res"==G?n.resId=ne.assigned_to:4452475==at?(n.customers=we.map((function(e){return e.value})).toString(),n.projects=Fe.map((function(e){return e.value})).toString()):(n.customers=pe.map((function(e){return e.value})).toString(),n.projects=Fe.map((function(e){return e.value})).toString()),C(!A),T(A?r.UdN:r.NR5),console.log("in line 453---------"),console.log(n),f()({method:"post",url:F+"/timeandexpensesms/ShiftAllownces/gettabledata",data:n}).then((function(e){e=e.data;console.log(e);var t=e.filter((function(e){return e.id>0}));console.log(e),xt(t),rn(t),Ae(!0),console.log(e)})).catch((function(e){}))};function En(e){var t=e.anchorEl,n=e.handleClose,a=e.prevComments,l=Boolean(t)?"":void 0;console.log(a);a.replace(/<br\s*\/?>/g,""),a.split("<br />");for(var s=a.replace(/<br \/>|<b>|<\/b>/g,"").split(":").map((function(e){return e.trim()})),o=[],r=0;r<s.length;r+=2){var c=s[r]+" : "+s[r+1];o.push(c)}return console.log(o.map((function(e,t){return(0,S.jsx)("p",{children:e.replace(/<br \/>/g,"")},t)}))),console.log(o),(0,S.jsx)("div",{classname:"Shiftallowances",children:(0,S.jsx)(x.ZP,{classname:"Shiftallowances",id:l,open:Boolean(t),anchorEl:t,onClose:n,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:(0,S.jsx)("div",{children:(0,S.jsx)(g.Z,{children:(0,S.jsxs)("div",{children:[console.log(a),o.map((function(e,t){return(0,S.jsx)("p",{children:e},t)}))]})})})})})}return(0,S.jsxs)("div",{children:[W?(0,S.jsx)("div",{className:"statusMsg error",children:(0,S.jsxs)("span",{className:"error-block",children:[(0,S.jsx)(_.CSE,{})," \xa0 Please Select Mandatory Fields"]})}):"",$?(0,S.jsx)("div",{className:"statusMsg error",children:(0,S.jsxs)("span",{className:"error-block",children:[(0,S.jsx)(_.CSE,{})," \xa0 Please Select Atleast One Resource"]})}):"",(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"pageTitle",children:[(0,S.jsx)("div",{className:"childOne"}),(0,S.jsx)("div",{className:"childTwo",children:(0,S.jsx)("h2",{children:"Shift Allowances"})}),(0,S.jsx)("div",{className:"childThree"})]})}),(0,S.jsx)(R.Z,{routes:fn,currentScreenName:["Shift Allowances"]}),(0,S.jsxs)("div",{className:"group mb-3 customCard",children:[(0,S.jsxs)("div",{className:"col-md-12 collapseHeader",children:[(0,S.jsx)("h2",{children:"Search Filters"}),(0,S.jsx)("div",{className:"helpBtn",children:(0,S.jsx)(E.Z,{pdfname:"ShiftAllowanceExpenses.pdf",name:"Shift Allowances Help"})}),(0,S.jsx)("div",{onClick:function(){C(!A),T(A?r.UdN:r.NR5)},children:(0,S.jsx)("span",{children:M})})]}),(0,S.jsx)(j.V9,{visible:!A,children:(0,S.jsxs)("div",{className:"group-content row",children:[(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["View By ",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsxs)("select",{id:"select",defaultValue:"Customer/Project",name:"SelectType",onChange:function(e){var t=e.target,n=t.id,s=t.value,o=t.name;console.log(n+"-----"+s),bn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},o,s))})),console.log(_n),U(s)},children:[(0,S.jsx)("option",{value:"cust",children:"Customer/Project"}),(0,S.jsx)("option",{value:"res",children:"Resource"})]})})]})}),"cust"==G?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Customer",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsxs)("div",{className:"col-6 multiselect",ref:function(e){Vt.current[0]=e},children:[4452475!=at?(0,S.jsx)(m.NU,{id:"Customer",options:ue,hasSelectAll:!0,isLoading:!1,valueRenderer:xn,value:pe,shouldToggleOnHover:!1,disableSearch:!1,selected:pe,disabled:!1,onChange:function(e){fe(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Customer",t.toString()))}))}}):"",4452475==at?(0,S.jsx)(m.NU,{id:"Data2",options:ge,hasSelectAll:!0,valueRenderer:xn,isLoading:!1,value:we,shouldToggleOnHover:!1,disableSearch:!1,selected:we,disabled:!1,onChange:function(e){Se(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Data2",t.toString()))}))}}):""]})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Project",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){Vt.current[1]=e},children:(0,S.jsx)(m.NU,{className:"multiselect",id:"Projects",valueRenderer:xn,options:Ie,hasSelectAll:!0,isLoading:!1,shouldToggleOnHover:!1,disableSearch:!1,value:Fe,selected:Fe,disabled:!1,onChange:function(e){He(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Projects",t.toString()))}))}})})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Alloc Type ",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(m.NU,{id:"typeId",options:Et,hasSelectAll:!0,valueRenderer:xn,value:Ue,disabled:!1,onChange:function(e){Be(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"AllocType",t.toString()))}))}})})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Month ",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(i(),{dateFormat:"MMM-yyyy",selected:n,id:"startDate",name:"startDate",onChange:function(e){Nn((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},"startDate",d()(e).format("yyyy-MM-DD")))})),c(e)},onKeyDown:function(e){e.preventDefault()},showMonthYearPicker:!0})})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"country-select",children:["Status ",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",ref:function(e){Vt.current[2]=e},children:(0,S.jsx)(m.NU,{className:"multiselect",id:"Status",options:Ft,hasSelectAll:!0,value:Ut,valueRenderer:xn,disabled:!1,onChange:function(e){Bt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Status",t.toString()))}))}})})]})})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Month",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6",children:(0,S.jsx)(i(),{dateFormat:"MMM-yyyy",selected:n,id:"startDate",name:"startDate",onChange:function(e){Nn((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},"startDate",d()(e).format("yyyy-MM-DD")))})),c(e)},onKeyDown:function(e){e.preventDefault()},showMonthYearPicker:!0})})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Resource Name",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 reactautocomplete",children:(0,S.jsx)(h.Z,{name:"assigned_to",id:"assigned_to",riskDetails:L,getData:Zn,setFormData:ae,onChangeHandler:function(e){console.log("onChange Handler");var t=e.target,n=(t.id,t.value);ae((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},e.target.id,n))}))}})})]})}),(0,S.jsx)("div",{className:"col-md-3 mb-2",children:(0,S.jsxs)("div",{className:"form-group row",children:[(0,S.jsxs)("label",{className:"col-5",htmlFor:"email-input",children:["Status ",(0,S.jsx)("span",{className:"error-text",children:"*"})]}),(0,S.jsx)("span",{className:"col-1 p-0",children:":"}),(0,S.jsx)("div",{className:"col-6 multiselect",children:(0,S.jsx)(m.NU,{className:"multiselect",id:"Status",options:Ft,hasSelectAll:!0,value:Ut,disabled:!1,valueRenderer:xn,onChange:function(e){Bt(e);var t=[];e.forEach((function(e){t.push(e.value)})),Nn((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},"Status",t.toString()))}))}})})]})})]}),(0,S.jsx)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:(0,S.jsxs)("button",{type:"button",className:"btn btn-primary",title:"Search",value:ln,onClick:function(){Dn()},children:[(0,S.jsx)(r.U41,{})," Search"," "]})})]})})]}),mt&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k,{data:vt,loggedUserId:at,roles:tt,open:Ze,bodyData:_t,setPrevComments:Ct,setAnchorEl:yt,buttonPopup:Wt,dataAccess:dn,setButtonPopup:qt,setSelectedData:re}),(0,S.jsxs)("div",{className:"col-md-12 col-sm-12 col-xs-12 btn-container center my-3",children:[(0,S.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){oe.length>0?(qt(!0),Q(!1)):(Q(!0),setTimeout((function(){Q(!1)}),3e3))},children:[(0,S.jsx)(r.TvB,{})," Approve"]}),(0,S.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){oe.length>0?(Qt(!0),Q(!1)):(Q(!0),setTimeout((function(){Q(!1)}),3e3))},children:[(0,S.jsx)(r.wXW,{})," Reject"]})]})]}),St?(0,S.jsx)(En,{handleClose:function(){yt(!1)},anchorEl:St,prevComments:At}):"",Wt?(0,S.jsx)(y,{handleApprove:function(e){console.log(e),console.log(e[0].allowance_status_id);for(var t=0;t<e.length;t++)for(var n=0;n<Ft.length;n++)if(e[t].allowance_status_id==Ft[n].value&&1300!=e[t].allowance_status_id&&1301!=e[t].allowance_status_id){console.log(Ft[n+1].value),e[t].allowance_status_id=Ft[n+1].value,e[t].allowance_status=Ft[n+1].label;break}console.log(e);for(var a=[],l=0;l<e.length;l++){var s=1293==e[l].allowance_status_id?Je:null,o=1295==e[l].allowance_status_id?Je:null,r=1297==e[l].allowance_status_id?Je:null,c=1299==e[l].allowance_status_id?Je:null,i="0"!=e[l].is_overridden,u=1293==e[l].allowance_status_id?"<br /><b>PM -> "+lt+"</b> : <b>"+it+" (Approved) </b> :"+e[l].comments:1295==e[l].allowance_status_id?"<br /><b>DP -> "+lt+"</b> : <b>"+it+" (Approved) </b> :"+e[l].comments:1297==e[l].allowance_status_id?"<br /><b>Finance -> "+lt+"</b> : <b>"+it+" (Approved) </b> :"+e[l].comments:1299==e[l].allowance_status_id?"<br /><b>HR -> "+lt+"</b> : <b>"+it+" (Approved) </b> :"+e[l].comments:"";a.push({resourceId:e[l].id,workingwindow:e[l].res_ww,date:yn.startDate,resourceShiftAllowance:{allowanceAmount:e[l].allow_amt,extraHours:e[l].allow_extra_hours,extraHoursAmount:e[l].allow_extra_hours_amt,weekendHours:e[l].allow_wknd_hours,weekendAmount:e[l].allow_wknd_amt,oncallHours:e[l].allow_ocall_hours,oncallAmount:e[l].allow_ocall_amt,totalAmount:e[l].allow_total_amt,allowanceStatus:e[l].allowance_status_id,comments:u,pmApproverId:s,dpApproverId:o,financeApproverId:r,hrApproverId:c,isOverridden:i}})}console.log(a),f()({method:"post",url:F+"/timeandexpensesms/ShiftAllownces/postShiftAllownces",data:a}).then((function(e){console.log("success",e),Dn(),qt(!1),re([])}))},buttonPopup:Wt,setButtonPopup:qt,selectedData:oe}):"",$t?(0,S.jsx)(D,{handleReject:function(e){console.log(e),console.log(e[0].allowance_status_id),console.log(e);for(var t=[],n=0;n<e.length;n++){var a=1292==e[n].allowance_status_id?Je:null,l=1293==e[n].allowance_status_id?Je:null,s=1295==e[n].allowance_status_id?Je:null,o=1297==e[n].allowance_status_id?Je:null,r="0"!=e[n].is_overridden,c=1292==e[n].allowance_status_id?"<br /><b>PM -> "+lt+"</b> : <b>"+it+" (Rejected) </b> :"+e[n].comments:1293==e[n].allowance_status_id?"<br /><b>DP -> "+lt+"</b> : <b>"+it+" (Rejected) </b> :"+e[n].comments:1295==e[n].allowance_status_id?"<br /><b>Finance -> "+lt+"</b> : <b>"+it+" (Rejected) </b> :"+e[n].comments:1297==e[n].allowance_status_id?"<br /><b>HR -> "+lt+"</b> : <b>"+it+" (Rejected) </b> :"+e[n].comments:"";e[n].allowance_status="New",t.push({resourceId:e[n].id,workingwindow:e[n].res_ww,date:yn.startDate,resourceShiftAllowance:{allowanceAmount:e[n].allow_amt,extraHours:e[n].allow_extra_hours,extraHoursAmount:e[n].allow_extra_hours_amt,weekendHours:e[n].allow_wknd_hours,weekendAmount:e[n].allow_wknd_amt,oncallHours:e[n].allow_ocall_hours,oncallAmount:e[n].allow_ocall_amt,totalAmount:e[n].allow_total_amt,allowanceStatus:1292,comments:c,pmApproverId:a,dpApproverId:l,financeApproverId:s,hrApproverId:o,isOverridden:r}})}console.log(t),f()({method:"post",url:F+"/timeandexpensesms/ShiftAllownces/postShiftAllownces",data:t}).then((function(e){console.log("success",e),Dn(),Qt(!1),re([])}))},rejectbuttonPopup:$t,setRejectButtonPopup:Qt,selectedData:oe}):""]})}},93540:function(e,t,n){n.d(t,{X:function(){return u}});var a=n(72791),l=n(42062),s=n(93574),o=n(95854);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,l,s,o,r=[],c=!0,i=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(r.push(a.value),r.length!==t);c=!0);}catch(u){i=!0,l=u}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(i)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=a.memo(a.forwardRef((function(e,t){var n=i(a.useState(!1),2),c=n[0],d=n[1],m=a.useRef(null),h=a.useRef(e.inputRef),p=function(t){if(!e.disabled&&!e.readOnly&&e.onChange){var n=f(),a=t.target instanceof HTMLDivElement||t.target instanceof HTMLSpanElement,l=t.target===h.current,s=a&&t.target.checked!==n;if(l||s){var r=n?e.falseValue:e.trueValue;e.onChange({originalEvent:t,value:e.value,checked:r,stopPropagation:function(){},preventDefault:function(){},target:{type:"checkbox",name:e.name,id:e.id,value:e.value,checked:r}})}o.p7.focus(h.current),t.preventDefault()}},f=function(){return e.checked===e.trueValue};a.useImperativeHandle(t,(function(){return{props:e,getElement:function(){return m.current},getInput:function(){return h.current}}})),a.useEffect((function(){o.gb.combinedRefs(h,e.inputRef)}),[h,e.inputRef]),(0,l.rf)((function(){h.current.checked=f()}),[e.checked,e.trueValue]);var v=f(),x=o.gb.isNotEmpty(e.tooltip),g=o.gb.findDiffKeys(e,u.defaultProps),j=o.gb.reduceKeys(g,o.p7.ARIA_PROPS),_=(0,o.AK)("p-checkbox p-component",{"p-checkbox-checked":v,"p-checkbox-disabled":e.disabled,"p-checkbox-focused":c},e.className),b=(0,o.AK)("p-checkbox-box",{"p-highlight":v,"p-disabled":e.disabled,"p-focus":c}),w=o.Cz.getJSXIcon(v?e.icon:"",{className:"p-checkbox-icon p-c"},{props:e,checked:v});return a.createElement(a.Fragment,null,a.createElement("div",r({ref:m,id:e.id,className:_,style:e.style},g,{onClick:p,onContextMenu:e.onContextMenu,onMouseDown:e.onMouseDown}),a.createElement("div",{className:"p-hidden-accessible"},a.createElement("input",r({ref:h,type:"checkbox",id:e.inputId,name:e.name,tabIndex:e.tabIndex,defaultChecked:v,onFocus:function(){d(!0)},onBlur:function(){d(!1)},onKeyDown:function(e){"Space"===e.code&&p(e)},disabled:e.disabled,readOnly:e.readOnly,required:e.required},j))),a.createElement("div",{className:b},w)),x&&a.createElement(s.u,r({target:m,content:e.tooltip},e.tooltipOptions)))})));u.displayName="Checkbox",u.defaultProps={__TYPE:"Checkbox",id:null,inputRef:null,inputId:null,value:null,name:null,checked:!1,trueValue:!0,falseValue:!1,style:null,className:null,disabled:!1,required:!1,readOnly:!1,tabIndex:null,icon:"pi pi-check",tooltip:null,tooltipOptions:null,onChange:null,onMouseDown:null,onContextMenu:null}}}]);
//# sourceMappingURL=153.5fdbb45c.chunk.js.map